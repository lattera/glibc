 # Local configure fragment for sysdeps/unix/sysv/linux.

# On Linux, the default is to use libio instead of stdio.
test $stdio = default && stdio=libio

# Don't bother trying to generate any glue code to be compatible with the
# existing system library, because we are the only system library.
inhibit_glue=yes

echo $ac_n "checking installed Linux kernel header files""... $ac_c" 1>&6
if eval "test \"`echo '$''{'libc_cv_linux203'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16 "configure"
#include "confdefs.h"
#include <linux/version.h>
int main() { return 0; }
int t() {
#if LINUX_VERSION_CODE <  (2 *65536+ 0 *256+ 3) /* 2.0.3 */
eat flaming death
#endif
; return 0; }
EOF
if { (eval echo configure:26: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  libc_cv_linux203='2.0.3 or later'
else
  rm -rf conftest*
  libc_cv_linux203='TOO OLD!'
fi
rm -f conftest*

fi

echo "$ac_t""$libc_cv_linux203" 1>&6
if test "$libc_cv_linux203" != '2.0.3 or later'; then
  { echo "configure: error: GNU libc requires kernel header files from
Linux 2.0.3 or later to be installed before configuring.
The kernel header files are found usually in /usr/include/asm and
/usr/include/linux; make sure these directories use files from
Linux 2.0.3 or later.  This check uses <linux/version.h>, so
make sure that file was built correctly when installing the kernel header
files." 1>&2; exit 1; }
fi
