Thu Apr 13 09:45:01 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/expm1.c: #undef expm1 before weak_alias.

	* libc-symbols.h [! HAVE_ASM_SET_DIRECTIVE] (strong_alias,
 	strong_alias_asm): Use `foo = bar' syntax instead.
	* configure.in: Fix AC_ARG_WITH uses; check for --with-fp.  Move
 	$host_os checks to set gnu_ld/as and elf before sysdirs
 	generation.  Fix $with_fp test.
	[$elf=yes]: Prepend MACHINE/elf directory.

	* elf/libelf.h (elf_hash): Use XOR instead of ANDN when the bits
 	being cleared are already known to be set.  Thanks Ulrich.

Wed Apr 12 23:27:22 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/environ.c: Add weak alias `_environ'.

Tue Apr 11 20:38:55 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/i386/add_n.S [PIC]: Use self-call to avoid generating reloc.
	* sysdeps/i386/sub_n.S [PIC]: Likewise.

Mon Apr 10 14:53:15 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* libc-symbols.h (_elf_set_element) [PIC]: Don't make the element
 	word `const'.

	* Makeconfig (CPPFLAGS, CFLAGS): Fix swapped references to
 	$(foo-$(suffix $@)).

	* manual/Makefile (chapters-incl): Filter out summary.texi.

	* stdlib/strtod.c (STRTOF): Use extra macro to make STRTOF's #defn
 	a weak symbol instead of literal "STRTOF".

	* locale/setlocale.c: Work around ld bug: don't weakify refs to
 	_nl_{current,C}_*.

Sun Apr  9 01:24:33 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (+depfiles): Translate %.so to %.o in $(extra-objs).

	* malloc/free.c [emacs] (__malloc_safe_bcopy): Define to safe_bcopy.
	* malloc/realloc.c (__malloc_safe_bcopy): Undefine before defining.

	* malloc/free.c (memmove, __malloc_safe_bcopy): Do include these
 	#ifdef emacs, but only #ifndef memmove.
	* malloc/realloc.c [emacs] (__malloc_safe_bcopy): Just #define to
 	safe_bcopy.
	(memmove): Define only if undefined.

Sat Apr  8 00:40:59 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* extra-lib.mk (install-lib, extra-objs, alltypes-$(lib)): Make
 	sure these are simply-expanded variables.

	* locale/loadlocale.c (_nl_load_locale): Use MAP_INHERIT flag in
 	mmap call.

	* configure.in (os=freebsd*|bsdi*): Set base_os=unix/bsd/bsd4.4
 	for these too.

	* sysdeps/unix/sysv/tcsetattr.c: Use |= instead of = to properly
 	set c_oflag value.

	* Makeconfig [! objpfx] (csu-objpfx): Add trailing slash.

	* locale/Makefile (categories): Uncomment collate.
	* locale/lc-collate.c: New file.

	* malloc/free.c (__malloc_safe_bcopy, memmove): Don't define
 	#ifdef emacs.
	* malloc/realloc.c: Likewise.

	* stdio/_itoa.h (_EXTERN_INLINE): Define if undefined.
	(_itoa): Use it in defn.
	* stdio/_itoa.c (_EXTERN_INLINE): Define to empty before #include
 	"_itoa.h".
	(_itoa): Function removed.

	* malloc/free.c: Remove use of `assert'.

	* malloc/realloc.c [! emacs] (safe_bcopy): Renamed to
 	__malloc_safe_bcopy; #define safe_bcopy.
	* malloc/free.c: Cope with systems lacking `memmove'.
	(_free_internal): Cast result of _malloc_internal.

Wed Apr  5 00:13:45 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdinline.c: Include signal.h first, so we don't define
 	its inlines too.

	* sysdeps/unix/sysv/sysv4/sigset.h (__sigfillset): Use ~0L instead
 	of -1 to avoid compiler warning.

	* configure.in (host_os=linux*): Set elf=yes for this, not just
 	linux*elf*.

	* misc/login_tty.c [! TIOCSCTTY]: Try an emulation using ttyname
 	and open.

	* sysdeps/i386/bsd-_setjmp.S: Fix typo in name: setjmp -> _setjmp.

Tue Apr  4 00:48:53 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/start.c: Remove spurious decl and #endif.

	* misc/progname.c (program_invocation_name,
 	program_invocation_short_name): Make these initialized data
 	definitions.

	* sysdeps/mach/hurd/setitimer.c (fork_itimer): Add self reference
 	so gcc doesn't optimize out the function entirely.

Sun Apr  2 13:13:52 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/execvp.c: Don't use stat to search path; just try execv
 	until it works.

	* sysdeps/mach/hurd/i386/trampoline.c: Add a link to
 	SS->active_resources, so that _hurdsig_longjmp_from_handler will
 	be called when a longjmp unwinds the signal frame.
	* sysdeps/mach/hurd/i386/sigreturn.c: Remove the link on the
 	SS->active_resources chain added by _hurd_setup_sighandler.
	* hurd/sigunwind.c: New file.
	* hurd/Makefile (sig): Add sigunwind.

	* Makerules (lib%.so: lib%_pic.a): Remove dir name from $*.

	* MakeTAGS (tags-sources): Include $(all-dist).
	[subdir] (all-dist): Define to $(distribute).

Sat Apr  1 00:08:06 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (lib%.so: lib%_pic.a): Pass -L options for subdir and
 	parent objdirs.

	* extra-lib.mk (object-suffixes-$(lib)): New variable, produced by
 	filtering out $($(lib)-inhibit-o); use that instead of
 	$(object-suffixes) in all the other variables.

	* locale/loadlocale.c (_nl_load_locale) [MAP_FILE]: Define it zero
 	if undefined.

	* string/strxfrm.c: Just copy the string (for now).
	* string/strcoll.c: Just call strcmp (for now).

	* mach/Makefile (lock): Add mutex-init.
	* mach/mutex-solid.c (_cthread_mutex_lock_routine,
 	_cthread_mutex_unlock_routine): Variables removed.
	(__mutex_lock_solid, __mutex_unlock_solid): Don't use them; just stub.
	(__mutex_init): Function moved to new file mutex-init.c.
	* mach/mutex-init.c: New file, broken out of mutex-solid.c.

Thu Mar 30 20:43:02 1995  Brendan Kehoe  <brendan@zen.org>

	* sysdeps/mips/__longjmp.c (__longjmp): Take out CONST.
	* sysdeps/alpha/__longjmp.c (__longjmp): Take out const.

Thu Mar 30 01:38:00 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* elf/elf.h (STN_UNDEF): New macro (distinct from SHN_UNDEF, though
 	both are zero).

Wed Mar 29 11:26:48 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* elf/dlfcn.h: New file.

	* Make-dist (README): Commit it to CVS if there is a CVS directory.

	More changes from Germano Caronni <caronni@tik.ethz.ch>:
	* malloc/free.c: Relocate _heapinfo when that allows us to return
 	core to the system.

	* malloc/malloc.c: Move #include <errno.h> outside #ifndef
	_MALLOC_INTERNAL.

Mon Mar 27 02:23:15 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* mach/Makefile (headers): Add mach/mach_traps.h.

	* Makerules ($(installed-libcs) rule): Fix typos.

	* sysdeps/unix/bsd/bsd4.4/revoke.S: New file.
	* sysdeps/stub/revoke.c: New file.
	* misc/Makefile (routines): Add revoke.
	* posix/unistd.h [__USE_BSD] (revoke): Declare it.
	* sysdeps/generic/pty.c (openpty, forkpty): Declare return types.
	(forkpty): Declare login_tty.
	* misc/logwtmp.c (logwtmp): Declare to return void.
	* misc/login_tty.c (login_tty): Include unistd.h.  Declare return type.

	* posix/unistd.h [__USE_BSD] (ttyslot): Declare it.

	* posix/unistd.h [__USE_BSD] (L_SET, L_INCR, L_XTND): Define
 	unless L_SET already defined.
	* misc/sys/file.h (L_SET, L_INCR, L_XTND): Don't define if L_SET
 	already defined.

	Incorporated -lutil library from 4.4-Lite.
	* misc/Makefile (extra-libs, libutil-routines): New variables.
	* misc/login.c, misc/login_tty.c, misc/logout.c, misc/logwtmp.c,
	sysdeps/generic/pty.c: New files for -lutil incorporated from 4.4-Lite.

	Support simple, light-weight unwind-protect mechanism for longjmp.
	* setjmp/longjmp.c: Call _longjmp_unwind first thing.
	* sysdeps/mach/hurd/jmp-unwind.c: New file.
	* sysdeps/stub/jmp-unwind.c: New file.
	* sysdeps/i386/jmp_buf.h (_JMPBUF_UNWINDS): New macro.
	* sysdeps/mips/jmp_buf.h (_JMPBUF_UNWINDS): New macro.
	* setjmp/Makefile (routines): Add jmp-unwind.
	* hurd/hurd/userlink.h (struct hurd_userlink): Move `next' and
 	`prevp' members into new substructure `resource'; add another such
 	substructure `thread' and members `cleanup' (function ptr) and
 	`cleanup_data' (generic ptr).
	(_hurd_userlink_link, _hurd_userlink_unlink): Insert/remove LINK
	into the `_hurd_self_sigstate ()->active_resources' list via the
	`thread' substructure.
	* hurd/hurd/port.h (_hurd_port_cleanup): Declare it.
	(_hurd_port_locked_get): Set LINK->cleanup to _hurd_port_cleanup and
	LINK->cleanup_data' to the port extracted.
	* hurd/hurd/signal.h (struct hurd_sigstate): New member
	`active_resources'.
	* hurd/port-cleanup.c: New file.
	* hurd/Makefile (routines): Add port-cleanup.

	* malloc/malloc.c: Include errno.h.

Sat Mar 25 18:24:21 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* locale/loadlocale.c (_nl_load_locale): Avoid */ inside comment.

Fri Mar 24 02:35:37 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* misc/Makefile (headers): Add utmp.h.
	* misc/utmp.h: New file, incorporated from 4.4-Lite.

	* stdio/printf-parse.h: New file, mostly written by drepper.
	* stdio/vfprintf.c: Rewritten, mostly by drepper.
	* stdio/printf-prs.c: Rewritten.
	* stdio/Makefile (distribute): Add printf-parse.h.

Thu Mar 23 22:03:44 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/start.c [! NO_UNDERSCORES]: Don't declare _start
 	with asm name.  Just do a ".set start, __start".

	* malloc/realloc.c: Call _free_internal instead of free.

Tue Mar 21 00:14:27 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* locale/loadlocale.c (_nl_load_locale): If LOCALE/LC_* is a
 	directory, open LOCALE/LC_*/SYS_LC_* instead.

Mon Mar 20 03:19:23 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/fpioconst.c, stdio/fpioconst.h, stdio/gmp-impl.h,
	stdio/gmp.h, stdio/longlong.h, stdio/mp_clz_tab.c,
	stdio/gen-mpn-copy: Files moved to stdlib.
	* stdio/Makefile: All mpn stuff moved to stdlib/Makefile.
	* stdlib/Makefile: All the mpn stuff moved here from stdio/Makefile.
	* stdio/printf_fp.c: Use ../stdlib to find fpioconst.h and gmp
 	headers.
	* stdlib/strtod.c: Don't use ../stdio to find fpioconst.h and gmp
 	headers.

	* Makefile (parent-mostlyclean): Don't use $(libc.a).
	(parent-clean): Use $(objpfx) to find sysd-*.
	* Rules (generated): Append dummy.o dummy.c.
	* Makerules (lib): Depend on lib-noranlib.
	(lib-noranlib): Depend on $(install-lib) in objdir.
	(common-mostlyclean): Remove $(install-lib) and stub-$(subdir)
	from objdir.  Don't remove TAGS; it comes in the distribution.

	* malloc/malloc.c (morecore): Save errno around call to
 	_realloc_internal.  Don't account for the additional new blocks of
 	the info table itself when choosing the new table size for the
 	first crack; if it succeeds, the new blocks will have been found
 	in existing free space already described by the existing info
 	table.

	* stdio/vfscanf.c (%n): Use READ_IN - 1, so as not to count the
 	read-ahead character.

Sat Mar 18 14:07:08 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/dtable.c, hurd/getdport.c, hurd/hurd.h, hurd/hurdexec.c,
	  hurd/hurdinit.c, hurd/hurdprio.c, hurd/hurdsock.c,
	  hurd/ports-get.c, hurd/ports-set.c, hurd/setauth.c,
	  hurd/setuids.c, sysdeps/mach/hurd/i386/trampoline.c:
	Get anal with unsigned to pacify compiler.

	* stdio/vfscanf.c: Grok positional parameter specs (i.e. %3$d
 	means %d from 3rd arg).

	* sysdeps/mach/hurd/closedir.c: Include hurd/fd.h.

	* stdlib/strtol.c: If !GROUP, set END to null.  In loop, test only
 	END, not GROUP.

Fri Mar 17 12:58:37 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makefile (subdirs): Put elf last.

	* sunrpc/Makefile (install-lib): Variable removed.
	(rpcsvc-objs): Variable removed.
	(extra-objs): Don't include $(rpcsvc-objs).
	(extra-libs): New variable, contains librpcsvc.
	(librpcsvc-routines): New variable.
	(librpcsvc-inhibit-o): New variable, contains .so.
	(omit-deps): Set this to $(librpcsvc-routines).
	($(objpfx)rpcgen): Don't use $(libc.a).
	(lib, $(objpfx)librpcsvc.a): Targets removed.

	* o-iterator.mk, extra-lib.mk: New files.
	* Makerules (o-iterator): New variable.
	[extra-libs]: Include extra-lib.mk to generate rules for each word
	of $(extra-libs).
	* Makefile (distribute): Add extra-lib.mk, o-iterator.mk.

Fri Mar 17 13:28:04 1995  Ulrich Drepper  <drepper@ipd.info.uni-karlsruhe.de>

	* sysdeps/ieee754/ldbl2mpn.c (__mpn_extract_long_double):
	Handle 80-bit denormalized numbers correctly.

	* stdlib/strtod.c, stdlib/strtof.c, stdlib/strtold.c:
	(IMPLICIT_ONE, *_MAX_10_EXP_LOG): Macros removed; no longer needed.
	* stdlib/strtod.c (RETURN): Add parentheses around return value.
	(round_and_return): Correct handling of denormalized numbers.

	* stdio/fpioconst.c, stdio/fpioconst.h: Don't use
 	LDBL_MAX_10_EXP_LOG; LAST_POW10 defines the maximal available
 	exponent.

Thu Mar 16 00:04:41 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* locale/C-ctype.c: New correct data generated by drepper.

	* Rules: Don't use $(libc.a).

	Parsing of grouped numbers contributed by Ulrich Drepper.
	* stdlib/strtol.c (__strtol_internal): Renamed from strtol.  Take
 	new flag arg; if nonzero, parse locale-dependent thousands
 	grouping and interpret only the prefix that is correctly grouped.
	(strtol): Define this to call _strtol_internal with zero for the flag.
	Use a weak symbol for the definition.
	* stdlib/strtod.c (strtod, __strtod_internal): Likewise.
  	Check for the exponent of the number overflowing the float format.
	* stdlib/stdlib.h (__strtof, __strtold): Declarations removed.
	(__strto{f,d,ld,l,ul,q,uq}_internal): Declare these functions.
	[__OPTIMIZE__]: Define inline functions calling those.
	* stdlib/strtold.c (STRTOF): Set to strtold, not __strtold.
	(strtold): Remove weak alias.
	* stdlib/strtof.c (STRTOF): Set to strtof, not __strtof.
	(strtof): Remove weak alias.
	* stdlib/grouping.h: New file, written by drepper.
	* stdlib/Makefile (distribute): Add grouping.h.
	* stdio/vfscanf.c: Grok %' modifier to numeric conversions.  Call
 	__strtoX_internal with the grouping flag set iff the modifier is
 	present.

Wed Mar 15 00:40:54 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/memchr.c: Fix typos: limit.h -> limits.h.

	* mach/Machrules: Produce static deps for all object flavors.
	[interface-library]: Remove all these variables and rules.
	($(interface-library)-routines): Define this variable.
	(extra-libs): Append $(interface-library) to this.
	* mach/Makefile (interface-library): Omit .a suffix.
	* hurd/Makefile: Likewise.

Tue Mar 14 23:40:31 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/internals.c (flushbuf): If !FLUSH_ONLY, don't skip out
 	early if no new data in buffer after priming.

Mon Mar 13 01:48:16 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (object-suffixes, libtypes): Move all these variables
 	to Makeconfig.
	* Makeconfig (object-suffixes, libtypes): Moved here from Makerules.

	* Makerules (build-extra-lib): New canned sequence.

	* sysdeps/mach/hurd/euidaccess.c: Include fcntl.h.  Declare ERR;
 	fix uses of FILE and PORT.  Remove bogus weak alias for `access'.

	* sysdeps/mach/hurd/dirfd.c: Include hurd/fd.h and errno.h.
	Add missing semicolon.
	* sysdeps/mach/hurd/opendir.c: Include hurd/fd.h.  Use a `struct
 	hurd_fd *' temp var, since DIRP->__fd is a `void *'.
	* sysdeps/mach/hurd/readdir.c: Include hurd/fd.h.

	* stdlib/wcstombs.c: #if 0 out code for non-ASCII chars until the
 	locale data format is implemented.

	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler):
 	Pass &__sigreturn on the stack to the trampoline code, so it is
 	not position-dependent.

	* stdio/printf_fp.c (NDEBUG): Define this to disable assert.
  	Don't include <stdarg.h>.
	(__printf_fp): Last arg ARGS is now `const void **const'; 
	dereference ARGS[0] instead of using va_arg.

	* locale/setlocale.c: In LC_ALL case, initialize CATEGORY before
 	loop to install data.

	* locale/loadlocale.c (_nl_category_num_items): Use _NL_ITEM_INDEX
 	to extract number from item code.
	(_nl_load_locale): Close the descriptor when finished.

	* malloc/realloc.c (_realloc_internal): Call _malloc_internal in
 	place of malloc.

	* time/tzfile.c (__tzfile_default): Initialize RULE_STDOFF to zero.

	* stdio/printf_fp.c (group_number): Cast *GROUPING to unsigned int
 	to avoid warning.
	* sysdeps/generic/sigset.h (__SIGSETFN): Cast result of sizeof to
 	int to avoid warning.

	Support building several flavors of objects and libraries.
	* Makerules (libtypes, object-suffixes): New variables.
	(libtype.*, CFLAGS-*, CPPFLAGS-*): New variables for each object
	suffix.
	(CFLAGS, CPPFLAGS): Append $(C{,CPP}FLAGS-$(suffix $@)).
	(%.so, %.po, %.go): New compilation rules for %.S, %.s, %.c.
	(close-check-inhibit-asm): Append a semicolon.
	(sysd-rules): Generate rules for each object suffix.
	(compile.S, compile.c): Always assume gcc.
	(OUTPUT_OPTION): Define unconditionally.
	(+make-deps): In generated rule, produce a dependent for each
	object suffix.
	(.SUFFIXES): Add $(object-suffixes) in place of .o.
	(.PRECIOUS): Make all suffix flavors precious.
	($(libc.a)): Target removed.
	(lib): Depend on each enabled libtype.
	(libobjs, objects, objs): Depend on all the enabled object flavors.
	(lib%.a): New pattern rule.
	[$(build-shared)=yes] (lib%.so: lib%_pic.a): New pattern rule.
	(stamp-$(subdir)): Rewritten to a pattern rule for stamp.%-$(subdir)
	to make one for each flavor; library dep rule likewise rewritten.
	($(libc.a)(__.SYMDEF)): Target replaced with one target for each
	flavor.
	(symdef.%): New pattern rule; helper for __.SYMDEF targets.
	(installed-libcs): New variable.
	(install): Depend on that instead of
	$(libdir)/lib$(libprefix)$(libc-name).a;
	that file's rule rewritten to make each enabled libtype.
	(install-lib.so): New variable, filters lib%.so from $(install-lib).
	(install-lib): Filter out lib%.so after setting install-lib.so.
	[$(build-shared)=yes] (install): Install $(install-lib.so).
	(common-mostlyclean): Remove all flavors of objects.
	* Makefile ($(libc.a)(__.SYMDEF)): Target removed.
	[$(build-shared)=yes] (lib): Depend on $(common-objpfx)libc.so.

Sun Mar 12 18:21:10 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/stub/ulimit.c: Don't include gnu-stabs.h.
	* sysdeps/stub/pause.c: Likewise.
	* sysdeps/stub/time.c: Likewise.

	* stdlib/mbtowc.c: #if 0 out code for non-ASCII chars until the
 	locale data format is implemented.
	* stdlib/wctomb.c: Likewise.

	* mach/Makefile ($(objpfx)errsystems.c): Reenable this rule; the
 	gcc bug is fixed.
	* mach/errsystems.c: File removed.

	* Makeconfig (libc.a): Variable removed.
	(+link): Don't use it.

	* configure.in (AC_ARG_ENABLE calls): Use $enableval instead of
 	assuming `yes'.

	* malloc/malloc.h (_malloc_internal, _realloc_internal): Declare these.
	* malloc/realloc.c (_realloc_internal): Renamed from realloc;
 	don't use __realloc_hook.
	(realloc): New function; call __realloc_hook ?: _realloc_internal.
	* malloc/malloc.c (_malloc_internal): Renamed from malloc;
	don't use __malloc_hook.
	(malloc): New function; call __malloc_hook ?: _malloc_internal.
	Changes from Germano Caronni <caronni@tik.ethz.ch>:
	(initialize): Set up _heaplimit to cover the _heapinfo table.
	(morecore_recursing): New static variable.
	(morecore): If that is set, return null immediately.
	When growing the info table, before getting new core from the
 	system for it, set morecore_recursing and try moving _heapinfo
 	with _realloc_internal.  When that fails and we get new core, set
 	_heaplimit to cover the core for the new _heapinfo table.
	(register_heapinfo): New function.  Record the _heapinfo table's
	own blocks in that table and in the statistics variables.
	(initialize, _malloc_internal): Use it after allocating new table.

Fri Mar 10 22:26:28 1995  Jim Meyering  (meyering@comco.com)

	* sysdeps/generic/memchr.c: Remove ansidecl.h and clean up for use
	by other packages.
	[LONG_MAX <= LONG_MAX_32_BITS]: Don't compile 64-bit code.

Fri Mar 10 13:31:29 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* mach/errorlib.h (errors): Use const for decl.

	* time/tzfile.c (uc2ul, _uc2ul): Macros removed.
	(decode): New inline function; decode signed 32-bit integers, and
	sign-extend properly when long is longer than 32 bits.
	(__tzfile_read): Changed all uses of uc2ul to decode.
	Decode the transition times properly when sizeof (time_t) > 4.

	* stdio/printf.h: Doc fixes.  Don't #include <stddef.h>.
	(printf_function): Make last arg ARGS a vector of pointers instead of a
	pointer to va_list.

Fri Mar 10 13:46:25 1995  Ulrich Drepper  <drepper@ipd.info.uni-karlsruhe.de>

	* stdio/vfprintf.c [USE_IN_LIBIO] (PAD): Use return value of _IO_padn.
	(buffered_vfprintf): Remove line buffer when flush failed.

Fri Mar 10 00:04:55 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* time/tzfile.c (struct ttinfo): New member `isgmt'.
  	(__tzfile_read): Read isgmt flags for each type.
  	(__tzfile_default): When using TZDEFRULES DST rules, adjust
 	transition times according to the isstd and isgmt flags for the
 	types of each transition, and adjust each transition to point to
 	type index either 0 or 1.  Reset type indices 0 and 1 to describe
 	the user's settings.

Thu Mar  9 22:29:03 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* locale/categories.def (LC_CTYPE): Merge CLASS_EB and CLASS_EL
 	into just CLASS.  Add standard/optional flag to all items.

	* locale/localeinfo.h (_NL_CURRENT_DEFINE): Fix typo.

	* ctype/ctype.h [__BYTE_ORDER == __LITTLE_ENDIAN] (_ISbit):
 	Rearrange defn to satisfy compiler.

	* locale/localeinfo.h: Declare _nl_current.

	* configure.in: Use AC_CHECK_TOOL for CC, AR, RANLIB.  Accept args
 	--enable-shared, --enable-profile, --enable-omitfp; pass settings
 	through to config.make.
	* config.make.in (build-shared, build-profile, build-omitfp): New
 	config vars.

	* elf/elf.h (STN_UNDEF): Renamed to SHN_UNDEF (typo).
	(DT_NUM): New macro.

	* locale/nl_langinfo.c: Include errno.h and stddef.h.  Fix typos.

	* locale/lc-ctype.c (_nl_postload_ctype): Fix macro insanity.

	* locale/loadlocale.c (_nl_load_locale) [! MAP_COPY]: Define
 	MAP_COPY to MAP_PRIVATE.

Thu Mar  9 17:16:53 1995  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/alpha/divrem.m4: Undefine `ret' to avoid the definition
	that's used inside the alpha sysdep.h.

	* sysdeps/alpha/__longjmp.c (__longjmp): Remove obsolete __NORETURN
	keyword.
	* sysdeps/alpha/__math.h (__copysign): Remove obsolete __CONSTVALUE.

	* configure.in: Match `osf*', not `osf1*'.
	* configure: Likewise.
	* sysdeps/unix/bsd/osf: Renamed from `sysdeps/unix/bsd/osf1'.

Wed Mar  8 13:38:13 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/configure.bat: Fixes from DJ.

	* time/backward, time/europe, time/northamerica, time/pacificnew,
	time/zdump.c, time/zic.c, time/tzfile.h, time/private.h,
	time/ialloc.c: Code and data updated from ADO's 95b.
	* time/emkdir.c: File removed.
	* time/Makefile (distribute, extra-objs, zic): Omit it.
	
	* time/localtime.c: Deansideclized.  Never #define __tzname et al
 	to non-__ names.

	* locale/lc-ctype.c (__ctype_tolower, __ctype_toupper): Use int *
 	instead of short int *.
	* ctype/ctype-info.c: Likewise.
	* ctype/ctype.h: Likewise.

	* locale/langinfo.h (_NL_CTYPE_CLASS): Use this (just one) instead
 	of EB and EL versions.

Mon Mar  6 12:34:56 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* ctype/ctype.h (_ISbit): New macro, defined dependent on byte order.
	(_IS* enum): Use _ISbit to produce values.

Sun Mar  5 19:40:13 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* locale/localeinfo.h: Rewritten for new locale system, using
	locale data files and with <langinfo.h> interface.
	* locale/setlocale.c: Rewritten to use locale data files.
	* langinfo.h: New file.
        * locale/langinfo.h: New file.
        * locale/nl_langinfo.c: New file.
        * locale/loadlocale.c: New file.
        * locale/lc-ctype.c: New file.
        * locale/lc-messages.c: New file.
        * locale/lc-monetary.c: New file.
        * locale/lc-numeric.c: New file.
        * locale/lc-time.c: New file.
        * locale/categories.def: New file.
	* locale/Makefile (headers): Remove localeinfo.h.
	(distribute): New variable; put localeinfo.h here, and categories.def.
	(routines): Add loadlocale.
	(categories): New variable.
	(aux): Use that to get C-category and lc-category.
	* ctype/ctype.h (_IS*): Use independent bits for all but _ISalnum.
	* ctype/ctype-info.c: For initial tables, use
	_nl_C_LC_CTYPE_{class,toupper,tolower} constant tables defined in
	locale/C-ctype.c. 
	* locale/C-ctype.c, locale/C-messages.c: New files.
 	* locale/C-monetary.c, locale/C-numeric.c, locale/C-time.c:
	Default "C" locale data updated for new locale system.
	* locale/C-collate.c: File removed.
        * locale/C-ctype_ct.c: File removed.
        * locale/C-ctype_mb.c: File removed.
        * locale/C-response.c: File removed.
	* locale/localeconv.c: Use _NL_CURRENT macro to access locale data.
	* stdio/printf_fp.c, stdio/vfprintf.c, stdio/vfscanf.c,
	  stdlib/strtod.c, time/asctime.c, time/strftime.c:
	Include ../locale/localeinfo.h and use _NL_CURRENT macro to access
	locale data.
	* time/localtime.c: Don't include <localeinfo.h>.
	* time/tzset.c: Don't use locale items for default TZ value or
	"GMT" string (use "UTC").

	* stdio/vfprintf.c [USE_IN_LIBIO] (PAD): Only call the function if
 	WIDTH>0; update DONE.

	* malloc/malloc.c (morecore): Fix last change to calculate by
 	blocks instead of bytes.

Fri Mar  3 12:24:52 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/sys/mman.h (__mmap, __munmap): Declare these.
	* sysdeps/unix/sysv/irix4/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/osf1/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/sys/mman.h: Likewise.
	* sysdeps/stub/munmap.c (munmap): Rename to __munmap, add weak
 	alias munmap.
	* sysdeps/unix/mman/munmap.S: Likewise.
	* sysdeps/mach/munmap.c: Likewise.
	* sysdeps/mach/hurd/mmap.c (mmap): Rename to __mmap, add weak
 	alias mmap.
	* sysdeps/unix/mman/mmap.S: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/mmap.c: Likewise.
	* sysdeps/stub/mmap.c: Likewise.

	* sysdeps/unix/bsd/setsid.c: Use __getpgid instead of __getpgrp.

	* sysdeps/unix/dirfd.c: #undef dirfd before function defn.

Thu Mar  2 12:15:24 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* misc/search.h: Add missing semicolon.

	* sysdeps/unix/dirfd.c: Fix typo.

	* sysdeps/generic/sys/mman.h (mmap): Use __off_t instead of off_t
 	in decl.

	* stdio/vfscanf.c (%c): In no-assign case, fix loop to decrement
 	WIDTH before test.

Wed Mar  1 00:57:47 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdlib/strtod.c: Fixes from drepper.
	[IMPLICIT_ONE]: New macro, one for IEEE754 formats.
	* stdlib/strtold.c [IMPLICIT_ONE]: New macro, 0.
	* stdlib/strtof.c [IMPLICIT_ONE]: New macro, 1.

	* stdio/vfprintf.c: Correctly notice Z modifier.

	* misc/search.h: New file.
	* misc/Makefile (headers): Add search.h.
	* misc/insremque.c: Include search.h.
	(struct qelem): Type removed.

Mon Feb 27 07:00:57 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* elf/libelf.h: New file.
	* elf/elf_hash.c: New file.

Sun Feb 26 15:51:00 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	Changes from Germano Caronni <caronni@tik.ethz.ch>:
	* malloc/malloc.c (morecore): Account in NEWSIZE for the
 	malloc_info structures for each new block.

Sat Feb 25 02:17:52 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/kill.c: When the process has no message port
 	registered and we have its task port, translate a few signals to
 	task_suspend/task_resume/task_terminate.

Fri Feb 24 14:40:48 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* io/Makefile (routines): Add euidaccess.
	* sysdeps/mach/hurd/euidaccess.c: New file.
	* sysdeps/stub/euidaccess.c: New file.
	* posix/unistd.h [__USE_GNU] (euidaccess): Declare it.

	* dirent/Makefile (routines): Add dirfd.
	* sysdeps/stub/dirfd.c: New file.
	* sysdeps/unix/dirfd.c: New file.
	* sysdeps/unix/dirstream.h (_DIR_dirfd): New macro.
	* dirent/dirent.h (dirfd): Declare new function.  Define as macro
 	_DIR_dirfd if that is defined.
	* sysdeps/mach/hurd/dirstream.h (DIR): Replace `__port' member
 	with `void *__fd'.
	* sysdeps/mach/hurd/opendir.c: Use DIRP->__fd instead of DIRP->__port.
	Open the file with `open'; set FD_CLOEXEC on the fd.
	* sysdeps/mach/hurd/closedir.c: Likewise.
	* sysdeps/mach/hurd/readdir.c: Likewise.
	* sysdeps/mach/hurd/dirfd.c: New file.

	* posix/Makefile (glob/configure): Do cvs commit if there is a CVS
 	directory.
	(glob/ChangeLog): Likewise.

	* locale/locale.h (LC_*): Use small integers instead of bit masks.

	* stdio/bug4.c: Put temporary files in /tmp.
	* stdio/bug3.c: Likewise.
	* stdio/bug5.c: Likewise.
	* stdio/test-fseek.c: Likewise.
	* stdio/test-popen.c: Likewise.

Wed Feb 22 00:44:41 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/configure.in: Put AC_ISC_POSIX before AC_CONST.

	* libc-symbols.h (weak_symbol): New macro.

	* hurd/hurdsig.c (_hurd_internal_post_signal): Ignore preempter
 	elts with null handlers.

	* sysdeps/mach/hurd/i386/sigreturn.c: Restore the FPU state.

Tue Feb 21 21:53:30 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdlib/random.c (__srandom): Change algorithm used to populate
 	the state array.
	(randtbl): Recomputed with new algorithm.

	* sysdeps/sparc/Makefile [subdir=crypt] (crypt): Reset only if set
 	to original value of `crypt'.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/Makefile [subdir=crypt]
 	(crypt): New variable, set to crypt.solar.

Tue Feb 21 11:50:37 1995  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/sparc/Makefile (routines): Reference `dotmul', not `mul'.

	* config.h.in: Put comment around ^L to pacify Solaris as here too.

Tue Feb 21 00:10:50 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* string/Makefile (distribute): Add pagecopy.h.
	* sysdeps/mach/pagecopy.h: New file.
	* sysdeps/generic/pagecopy.h: New file.
	* sysdeps/generic/memcpy.c: Include pagecopy.h; call
 	PAGE_COPY_FWD_MAYBE first when word aligned.
	* sysdeps/generic/memmove.c: Likewise.

	* misc/bsd-compat.c (longjmp, setjmp): Functions removed.
	(getpgrp): Call __getpgid instead of __getpgrp.

	* Makefile (subdirs): Add elf first.
	* elf/Makefile: New file.
	* elf/elf.h: New file.

	* sysdeps/unix/start.c (errno): Only define if it's not #define'd
 	as a macro.
	[! NO_UNDERSCORES]: Define `start' as a weak alias, not a symbol
	indirection.

	* csu/Makefile (crtstuff): New variable consolidates crti, crtn;
 	add crti_s, crtn_s.
	(install-lib, extra-objs, generated-, omit-deps): Use that.
	(initfini): New canned sequence, broken out of crt[in].s rule.
	(crt[in].s rule): Use it.
	(crt[in]_s.s): New rule.
	* csu/initfini.c (GLOBAL): New macro; define it to empty if undefined.
	(_init, _fini): Use GLOBAL as storage class.
	Add self reference to avoid GCC optimizing out the functions.

	* Makefile (headers): Remove $(stddef.h).
	* Makeconfig (stddef.h): Variable removed; now require gcc version
 	>= 2.2.
	* stddef.h: File removed.

Mon Feb 20 19:42:31 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/ultrix4/mips/start.S: Remove `__environ'
 	definition.
	* sysdeps/unix/bsd/osf1/alpha/start.S: Likewise.

	* stdlib/strtod.c: Allow the string to start with a decimal point
 	without a leading zero.

Mon Feb 20 04:04:57 1995  Roland McGrath  <roland@duality.gnu.ai.mit.edu>

	* Makefile (subdirs): Put csu first.

	* sysdeps/mach/hurd/start.c: Include unistd.h for __environ decl.

	* Makeconfig [elf=yes] (+preinit, +postinit): New variables, set
 	to crt[in].o.
	(csu-objpfx): New variable.
	(+link): Use it to find start.o and $(+preinit), $(+postinit).

	* Rules (subdir_lib, all): Depend on objs.

	* config.h.in [HAVE_ELF || HAVE_GNU_LD]: Define HAVE_WEAK_SYMBOLS.

	* stdlib/strtod.c (PASTE, PASTE1): New helper macros; use these in
 	access to float.h macros.

	* misc/efgcvt.c: New file.
	* misc/Makefile (routines): Add efgcvt.

Sun Feb 19 20:10:43 1995  Brendan Kehoe  <brendan@zen.org>

	* sysdeps/sparc/mul.S: Renamed to `dotmul.S'.
        * sysdeps/sparc/Makefile (routines): Reference `dotmul.S', not `mul.S',
        to avoid a misreference that would override sysdeps/generic/mul.c.
	* sysdeps/sparc/Dist: Likewise.

Sun Feb 19 17:46:13 1995  Roland McGrath  <roland@duality.gnu.ai.mit.edu>

	* posix/Makefile (aux): Add environ.
	* posix/environ.c: New file.
	* sysdeps/unix/sparc/start.c: Remove __environ definition.
	* sysdeps/unix/start.c: Likewise.
	* sysdeps/unix/sysv/irix4/start.c: Likewise.
	* sysdeps/mach/hurd/start.c: Likewise.
	* sysdeps/mach/start.c: Likewise.
	* sysdeps/stub/start.c: Likewise.

	* sysdeps/unix/make_errlist.c: In produced program, test
 	HAVE_WEAK_SYMBOLS instead of HAVE_GNU_LD.
	* sysdeps/unix/sysv/sysv4/dup2.c: Fix #include of renamed file.
  	Remove extra weak alias.

	* sysdeps/unix/sysv/sysv4/sigaltstack.S: Fix unsquashed file name
 	in #include.

	* libc-symbols.h: Put comment around ^L to pacify Solaris as.

	* sysdeps/posix/Makefile (cded-objdir-includes): New variable
 	replaced cded-objdir-CPPFLAGS; transform $(+includes) instead of
 	$(CPPFLAGS).
	(mk-stdiolim): Use it instead.

Fri Feb 17 12:16:27 1995  Roland McGrath  <roland@duality.gnu.ai.mit.edu>

	* mach/mach_init.c (__vm_page_size): Make it initialized.  It does
 	not work to make a weak alias to a bss symbol.

	* stdio/Makefile (distribute): Remove mpn-copy.mk; add gen-mpn-copy.
	(tests): Add test-fwrite.
	* stdio/test-fwrite.c: New file.

	* stdlib/stdlib.h [__USE_GNU]: Declare strtof, strtold, __strtof,
 	__strtold.

	* Makefile (autoconf-it): New canned sequence.  Do cvs commit if
 	there is a CVS directory.
	(configure, %/configure): Use $(autoconf-it) for cmds.
	* Make-dist: Likewise.
	* sysdeps/mach/hurd/Makefile (errlist.c, errnos.h): Do cvs commit
 	if there is a CVS directory.
	* sysdeps/sparc/Makefile (divrem output): Likewise.
	* sysdeps/alpha/Makefile (divrem output): Likewise.
	* Makerules ($(gpl2lgpl)): Likewise.

	* Makerules (rule to install lib%.a from $(install-lib)): Fix
 	patsubst to elide ranlib for $(non-lib.a).

	* stdio/tst-printf.c: Enable FP tests.  Add some new tests from rfg.

Thu Feb 16 04:06:06 1995  Roland McGrath  <roland@duality.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mig-reply.c: Add weak aliases to non-__ names.
	* mach/mig-dealloc.c: Add weak alias mig_deallocate.

Wed Feb 15 13:34:01 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd/signal.h (HURD_MSGPORT_RPC): Take new arg
 	DEALLOC_REFPORT; deallocate the refport after use only if it
 	evaluates to nonzero.
	* sysdeps/mach/hurd/kill.c: Pass DEALLOC_REFPORT arg of one.
	* hurd/hurdkill.c: Pass DEALLOC_REFPORT arg of zero.

	* hurd/hurdsig.c (abort_rpcs): Take new arg int *STATE_CHANGE; set
 	*STATE_CHANGE to indicate whether or not we changed *STATE and it
 	should be committed to the thread.
	(abort_all_rpcs): Take new arg LIVE; if nonzero and abort_rpcs changes
	state for a thread, do thread_set_state on that thread.  Don't use
 	SS->intr_port for collecting reply ports, it is not safe to
 	clobber that when suspending; instead, alloca a temporary array.
	(_hurd_internal_post_signal): Pass LIVE flag to abort_all_rpcs:
	zero when dying, one when suspending.  Pass new arg to abort_rpcs.

	* sysdeps/mach/hurd/stdio_init.c: Don't lock the file descriptor;
 	HURD_FD_PORT_USE will.  Don't use critical sections around
 	HURD_FD_PORT_USE invocations.

	* sysdeps/mach/hurd/stdio_init.c: Don't make pipes/FIFOs unbuffered.
	* sysdeps/posix/stdio_init.c: Likewise.

Tue Feb 14 03:01:12 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd/fd.h (_hurd_fd_get): Don't do critical section
 	locking; don't leave the descriptor locked on return.
	(HURD_FD_PORT_USE): Don't expect _hurd_fd_get to return the fd locked.
	Use a critical section around locking the descriptor.
	Check for an empty descriptor and return EBADF.
	* sysdeps/mach/hurd/dup2.c: Likewise.
	* sysdeps/mach/hurd/fcntl.c: Likewise.
	Use HURD_FD_PORT_USE macro for RPCs.
	* sysdeps/mach/hurd/sysd-stdio.c: Don't lock the descriptor before
 	using HURD_FD_PORT_USE.
	* sysdeps/mach/hurd/defs.c (init_stdio): Don't expect _hurd_fd_get
 	to lock the descriptor.
	* sysdeps/mach/hurd/stdio_init.c: Use critical sections while
 	locking the descriptor.
	* sysdeps/mach/hurd/fdopen.c: Likewise.
	* hurd/fd-close.c: Likewise.
	Don't expect the descriptor to be locked on entry.
	Check for empty descriptor and return EBADF.

	Factor ctty RPC code for SIGTTIN/SIGTTOU generation out into
	new functions _hurd_ctty_input and _hurd_ctty_output, each
	called with (io_t port, io_t ctty, error_t (*rpc) (io_t)).
	* hurd/ctty-input.c: New file.
	* hurd/ctty-output.c: New file.
	* hurd/Makefile (dtable): Add ctty-input and ctty-output.
	* hurd/fd-read.c: Use _hurd_ctty_input.
	* hurd/fd-write.c: Use _hurd_ctty_output.
	* sysdeps/mach/hurd/ioctl.c: Likewise.
	* hurd/hurd/fd.h (_hurd_ctty_input, _hurd_ctty_output): Declare them.

Mon Feb 13 11:36:12 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/vfscanf.c (%e, %f, %g): Use strtod, __strtold, or __strtof
 	as appropriate to the type.

	* sysdeps/ieee754/huge_val.h (__huge_val_t): New macro to avoid
 	repeating the union.
	(HUGE_VAL, __huge_val): Use it.
	[__USE_GNU] (HUGE_VALf, HUGE_VALl): New macros, along with
	analogous macros to HUGE_VAL's: __huge_val[fl]_t, __HUGE_VAL[fl]_bytes.
	* stdlib/strtold.c (FLOAT_HUGE_VAL): Define this to HUGE_VALl.
	(STRTOF): Set to __strtold; define strtold as weak alias.
	* stdlib/strtof.c (FLOAT_HUGE_VAL): Define this to HUGE_VALf.
	(STRTOF): Set to __strtof; define strtof as weak alias.

	* sysdeps/ieee754/ieee754.h (union ieee754_float): New type.
	(IEEE754_FLOAT_BIAS): New macro.

	* sysdeps/ieee754/mpn2ldbl.c: Fix typos.

	* stdlib/testmb.c: Add tests from rfg for using normal chars as
 	multibyte chars.

	* hurd/hurdmalloc.c (malloc_init): Add self reference to avoid not
 	only the `defined but not used' warning, but also to avoid GCC
 	optimizing out the entire function (!).

	* stdlib/wctomb.c: Include ctype.h.

	* Makerules (install-lib-non.a): Don't include $(non-lib.a).

	* hurd/hurdmalloc.c: Include string.h; #define bcopy using memcpy.

Sat Feb 11 04:05:29 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/printf_fp.c: Include "fpioconst.h".
	(_tens_p): Table moved to fpioconst.c, renamed to _fpioconst_pow10.
	(__printf_fp): All references changed.
	Don't bother computing THOUSANDS_SEP if GROUPING is empty.
	(group_number): Use memmove instead of memcpy, since operands overlap.
	* stdio/fpioconst.c: New file, tables broken out of stdio/printf_fp.c.
	* stdio/fpioconst.h: New file, header declaring the table data.
	* stdio/Makefile (aux): Add fpioconst.
	(distribute): Add fpioconst.h.
	* stdlib/strtod.c: Complete rewrite from drepper.
	* stdlib/strtof.c: New file.
	* stdlib/strtold.c: New file.
	* stdlib/Makefile (routines): Add strtof, strtold.
	* stdio/Makefile (routines): Add mpn2flt, mpn2dbl, mpn2ldbl.
	* sysdeps/stub/mpn2flt.c: New file.
	* sysdeps/stub/mpn2dbl.c: New file.
	* sysdeps/stub/mpn2ldbl.c: New file.
	* sysdeps/ieee754/mpn2flt.c: New file.
	* sysdeps/ieee754/mpn2dbl.c: New file.
	* sysdeps/ieee754/mpn2ldbl.c: New file.

	* Makerules (install-lib.a): Don't filter out $(non-lib.a).
	($(install-lib.a) in $(libdir) rule): Elide ranlib command when $@
	appears in $(non-lib.a).

Fri Feb 10 17:20:14 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdlib/wctomb.c: A normal ASCII character translates to itself.
	* stdlib/mbtowc.c: Likewise.

Thu Feb  9 03:55:55 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* setjmp/setjmp.h (longjmp, _longjmp, __longjmp, siglongjmp):
 	Remove `const' from prototypes.
	* sysdeps/m68k/__longjmp.c: Likewise.
	* setjmp/longjmp.c: Likewise.
	* sysdeps/i386/__longjmp.c: Likewise.

	* sysdeps/posix/tempname.c: Increment *IDX at beginning of loop,
 	so when we return a name, it is incremented past the value that
 	produces that same name.

	* stdio/fgets.c (fgets): Change `size_t' to `int' in prototype.  Sigh.
	* stdio/stdio.h (fgets): Likewise.

	* stdio/vfprintf.c (printf_unknown): Print ' for INFO->group flag.

	* hurd/fd-write.c: Don't clobber ERR with the msg_sig_post call
 	when it's EBACKGROUND; we need to notice that it is EBACKGROUND
 	and retry the RPC.
	* hurd/fd-read.c: Likewise.

Wed Feb  8 05:01:11 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/sysdep.h (FATAL_PREPARE_INCLUDE): New macro, set to
 	<mach/mig_support.h>.
	* assert/assert-perr.c [FATAL_PREPARE_INCLUDE]: Include it.
	* assert/assert.c: Likewise.
	* sysdeps/posix/libc_fatal.c: Likewise.

Tue Feb  7 12:17:58 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/stdio.h [__STRICT_ANSI__] (stdin, stdout, stderr): Define
	as macros, to satisfy ANSI pedants.

	* stdio/internals.c (flushbuf): When there is no new data after
 	priming the stream, return without writing out the buffer.
	* stdio/Makefile (tests): Add bug7.
	* stdio/bug7.c: New file.

	* io/sys/stat.h (S_IFIFO, S_IFLNK, S_IFSOCK, S_ISFIFO, S_ISLNK,
 	S_ISSOCK): Define only if the corresponding underlying __S_IF* macro
 	is defined.

	* stdio/getdelim.c: Decrement COPY after getting a char from __fillbf.

	* stdio/Makefile (tests): Add errnobug.
	* stdio/errnobug.c: New file.

	* mach/mig_strncpy.c: Include string.h.

	* sysdeps/mach/sysdep.h: Don't #include <mach/mig_support.h>.  Its
 	inlines cause trouble for files defining global register variables.

	* stdio/vfprintf.c: Use _strerror_internal for %m.

	* sysdeps/ieee754/dbl2mpn.c: Fixes from drepper for 64-bit limbs.

	* stdio/printf.h (struct printf_info): New member `group', for %' flag.
	* stdio/printf-prs.c (parse_printf_format): Grok %' flag and set flag.
	* stdio/vfprintf.c (group_number): New function.
	(vfprintf): Support %' flag for integer formats, by calling
	group_number after formatting the number in WORK.
	* stdio/printf_fp.c (guess_grouping, group_number): New functions.
	(__printf_fp): Implement `group' flag using them.

	* Makefile (include sysd-dirs): Protect with ifndef avoid-generated.
	(parent-clean): Remove sysd-rules, not sysdirs.
	(distclean): Pass avoid-generated=yes to submake.
	(distclean-1): Remove $(sysdep-$(distclean-1)).

	* Makerules (objects, objs): Depend on $(extra-objs) too.
	(include sysd-Makefile): Protect with ifndef avoid-generated.

	* Makeconfig (+defines, +gnu-stabs, gnu-as): Variables removed.
	(CPPFLAGS): Use $(defines) in place of $(+defines).
	Replace -D_LIBC with -include $(..)libc-symbols.h.

	* stdio/freopen.c: Set seen bit before calling fclose.

Mon Feb  6 18:34:40 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/setpriority.c: Keep track of numbers of
 	successes and each kind of failure.  Return EPERM or EACCES only
 	if every task failed that way.

	* sysdeps/mach/hurd/getpriority.c: Handle out of band buffers
 	correctly.

	* sysdeps/mach/hurd/ptrace.c (PTRACE_ATTACH, PTRACE_DETACH): Stop
 	or resume the process after frobbing.

	* hurd/hurdsig.c: Use spin lock operations on sigstate locks
	throughout.
	(_hurd_thread_sigstate): Don't lock the sigstate lock.
	(_hurd_internal_post_signal): New subfunction `mark_pending'; replace
	repeated sequences with calls to it.  Don't expect the sigstate
 	lock to be held on entry; lock it just before examining sigaction.
  	In handler case, check SS->critical_section after calling
 	abort_rpcs; if set, mark the signal pending and resume the thread.
	* hurd/hurd/signal.h (_hurd_self_sigstate_unlocked): Function removed.
	(_hurd_self_sigstate): Don't lock the sigstate lock.
	(HURD_EINTR_RPC): Call _hurd_self_sigstate instead of
	_hurd_self_sigstate_unlocked.
	* hurd/msgportdemux.c: Don't expect _hurd_self_sigstate to lock
	the sigstate lock.
	* hurd/hurdexec.c: Use spin lock operations on sigstate lock.
  	Don't expect _hurd_self_sigstate to lock it.  Fix critical section
 	locking.
	* hurd/hurd-raise.c: Likewise.
	* sysdeps/mach/hurd/sigsuspend.c: Likewise. 
	* sysdeps/mach/hurd/sigpending.c: Likewise.
	* sysdeps/mach/hurd/sigaltstack.c: Likewise.
	* sysdeps/mach/hurd/sigaction.c: Likewise.
	* sysdeps/mach/hurd/sigprocmask.c: Likewise.
	* hurd/fd-write.c: Likewise.
	* hurd/fd-read.c: Likewise.
	* sysdeps/mach/hurd/ioctl.c: Likewise.
	* sysdeps/mach/hurd/fork.c: Likewise.
	* sysdeps/mach/hurd/i386/sigreturn.c: Likewise.
	* sysdeps/mach/hurd/mips/sigreturn.c: Likewise.  
	* sysdeps/mach/hurd/alpha/sigreturn.c: Likewise.
	* hurd/hurdmsg.c (get_int): Likewise.

	* stdio/vfprintf.c: Include stddef.h.  Fix typos in libio code.

	* stdio/vfprintf.c (__pad): Function renamed to __printf_pad, made
 	global.
	(PAD): Caller changed.
	* stdio/printf_fp.c (__pad): Function removed.
	(PAD): Use __printf_pad instead.

Sun Feb  5 17:59:53 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	Merged new FP printer by Ulrich Drepper.
	* stdio/printf_fp.c: Rewrite by drepper.
	* stdio/Makefile (routines): Add ldbl2mpn.
	* sysdeps/ieee754/ieee754.h (union ieee754_double): Add `ieee_nan'
 	member.
	(union ieee854_long_double): New type, from drepper.
	(IEEE754_DOUBLE_BIAS, IEEE854_LONG_DOUBLE_BIAS): New macros.
	* sysdeps/ieee754/ldbl2mpn.c: New file, by drepper.
	* sysdeps/stub/ldbl2mpn.c: New file.
	* math/Makefile (routines): Add isinfl and isnanl.
	* sysdeps/ieee754/isinfl.c: New file.
	* sysdeps/stub/isinfl.c: New file.
	* sysdeps/ieee754/isnanl.c: New file.
	* sysdeps/stub/isnanl.c: New file.

	* malloc/malloc.c (__malloc_extra_blocks): New variable.
	(malloc): When getting more core, get __malloc_extra_blocks extra;
	put the new block at the end of the free list and let the next loop
 	iteration use the initial portion of it.
	* malloc/free.c (_free_internal): Account for twice
 	__malloc_extra_blocks in deciding if we have so much extra memory
 	we should return it to the system.
	* malloc/malloc.h (__malloc_extra_blocks): Declare it.
	* posix/glob.c (prefix_array, glob_pattern_p): Remove gratuitous
 	const in parameter decl.

	* sysdeps/unix/mips/sysdep.h (ENTRY): Add `.ent' directive.

Fri Feb  3 18:15:52 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* munch.awk (EXTERNS): Print decls using __P instead of EXFUN.

	* sysdeps/mips/setjmp_aux.c: Use ENV[0].__jmpbuf[0].
	* sysdeps/mips/bsd-_setjmp.S: Use `li' insn instead of `move'.
	* sysdeps/mips/bsd-setjmp.S: Likewise.
	* sysdeps/mips/__longjmp.c: Remove obsolete __NORETURN keyword.
	* sysdeps/mach/hurd/mips/trampoline.c (_hurd_setup_sighandler):
 	Use `long int' for sigcode.  Use explicit register numbers instead
 	of names.
	(_hurdsig_rcv_interrupted_p): Use _hurdsig_catch_fault.
	* sysdeps/mach/hurd/mips/exc2signal.c: Use `long int' for sigcode.

Thu Feb  2 20:06:45 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdmalloc.c: Remove bogus bcopy decl.

	* mach/mig_strncpy.c: Add missing `const' in prototype.  Rewritten
 	using __stpncpy.

	* io/ftw.c (ftw, ftw_dir): Treat ENOENT from stat like EACCES.

	* stdio/vfprintf.c: Set PREC to zero for %. without following digit.

Tue Jan 31 13:49:57 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* mach/mig_strncpy.c: Include mach.h instead of string.h.  Use
 	vm_size_t instead of size_t for arg and return types.

	* mach/mach_init.c: Don't declare __mig_init; mach/mig_support.h
 	already does.

Mon Jan 30 00:33:35 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* set-hooks.h (RUN_HOOK): Dereference PTR properly.

	* configure.in (friendly stddef.h check): Write override defn for
 	`stddef.h' Make variable.
	(AC_LINK_FILES): Use `echo ...` to avoid " " appearing nonempty.

	* configure.in (host_os=sysv4*|solaris2*): Set elf=yes.

	* Rules ($(objpfx)dummy.o): Write an empty function, not just an
 	empty file.

	* sysdeps/sparc/Makefile (sysdep-realclean): New variable.

Sat Jan 28 03:38:56 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makefile (distribute): Remove gnu-stabs.h; add libc-symbols.h.

	* sysdeps/mach/sysdep.h [ASSEMBLER]: Protect include of
 	mach/machine/syscall_sw.h with this.

Fri Jan 27 18:33:20 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd/signal.h: Include <hurd/msg.h>, and <spin-lock.h>
 	instead of <lock-intern.h>.
	(struct hurd_sigstate): Member `lock' changed to a `spin_lock_t'.
	(_hurd_critical_section_lock): Use spin lock operators.
	Don't hold the sigstate lock, unlock it after setting the flag.
	(_hurd_critical_section_unlock): Take the sigstate lock
	to clear the flag; while holding it, check pending signals.  After
 	unlocking, sig_post ourselves if there were pending signals.

	* hurd/catch-exc.c (_S_catch_exception_raise): Don't take the
 	sigstate lock.  If it is locked, clear SS->critical_section and
 	SS->context, and unlock it.

	* sysdeps/mach/sysdep.h (EXT, LEXT): New macros.

	* set-init.c (__libc_init) [HAVE_ELF]: Run _init and atexit (_fini).
	* munch-tmpl.c: Likewise.

	* mach/Makefile (routines): Don't filter out syscall_% from
 	$(mach-syscalls).

Fri Jan 27 17:53:49 1995  Jim Meyering  (meyering@comco.com)

	* posix/fnmatch.c: Declare errno if it's not defined.
	That's simpler than testing #if !defined(__GNU_LIBRARY__)
	&& !defined(STDC_HEADERS).

Fri Jan 27 15:40:29 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* csu/Makefile: New file.
	* csu/initfini.c: New file.
	* Makefile (+other_dirs): Add csu.
	(+init): Variable renamed to libc-init.  All references changed.
	(aux): Remove start.
	(install-lib): Variable removed.
	(crt0.o, Mcrt1.o  crt1.o): Targets removed.

	* mach/Machrules (static deps of RPC_*.o): Add $(..)libc-symbols.h
	and $(objpfx)config.h.
	(static deps of RPC alias *.o): Removed.

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sysdep.h [ASSEMBLER]:
 	Protect macros with this.
	* sysdeps/unix/bsd/osf1/alpha/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sequent/i386/sysdep.h: Likewise.
	* sysdeps/unix/bsd/vax/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sony/newsos/m68k/sysdep.h: Likewise.
	* sysdeps/unix/mips/sysdep.h: Likewise.

Thu Jan 26 00:02:01 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (compile.[Sc]): Match gcc in $(CC) better.
	(BUILD_CFLAGS): Instead of $(config-defines), use -include config.h.

	* hurd/intr-rpc.awk: Emit weak alias.

	* sysdeps/unix/bsd/sun/sunos4/wait4.c: Call getpgrp instead of
 	__getpgrp.

	* sysdeps/unix/bsd/hp/m68k/sysdep.h [ASSEMBLER]: Protect macros with
 	this.
	* sysdeps/unix/i386/sysdep.h: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.

	* io/ftw.c: Avoid `ret' as variable name.
	* posix/glob.c: Likewise.

	* ctype/ctype.h (_ISalpha): Define as its own bit.
	* locale/C-ctype_ct.c (__ctype_b_C): Set _ISalpha bit in all letters.

	* stdlib/exit.c [HAVE_GNU_LD]: Protect #include "set-hooks.h" and
 	DEFINE_HOOK with this.

Wed Jan 25 00:45:56 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdinit.c: Use DECLARE_HOOK instead of `extern DEFINE_HOOK'.
	* mach/spin-solid.c (spin_lock_solid): Define as weak alias to __name.
	* mach/shortcut.awk: Emit weak alias.
	* mach/spin-lock.c: Add weak aliases for all spin-lock.h functions.
	* mach/mach_init.c (mach_init, vm_page_size): Defin weak aliases for
 	__ names.
	* mach/Makefile (lock): Remove spin-syms.
	(routines): Remove __ names, vm_page_size, msgserver_t.
	($(mach-syscalls) rule): Generate files without __, add weak alias.
	Remove symbol alias file rule.
	($(mach-shortcuts) rule): Likewise.
	[!mach-shortcuts] (user-interfaces): Filter out mach/mach4 too.
	* mach/Machrules (if-calls.c): Variable and rule removed.
	(interface-headers): Don't add $($(if)-calls).
	(transform-user-stub): Define to add weak alias.
	* set-hooks.h: Use new libc-symbols.h set access macros.
	* time/Makefile (routines): Remove __ names.
	(aux): Variable removed.
	* hurd/Makefile: Likewise.
	* sysdeps/unix/start.c (environ): Define as weak alias for __environ.
	(data_start): Define as weak alias for __data_start.
	* sysdeps/mach/hurd/start.c: Likewise.
	* sysdeps/unix/sparc/start.c: Likewise.
	* sysdeps/unix/make_errlist.c: Emit weak aliases for sys_nerr and
 	sys_errlist.
	* sysdeps/mach/hurd/errlist.awk: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/start.S (environ): Define as weak
 	alias for __environ.
	* sysdeps/unix/bsd/ultrix4/mips/start.S: Likewise.
	* sysdeps/stub/setdomain.c: Use new stub_warning macro.
	* sysdeps/stub/getdomain.c: Likewise.
	* sysdeps/stub/vhangup.c: Likewise.
	* sysdeps/stub/swapon.c: Likewise.
	* sysdeps/stub/sendmsg.c: Likewise.
	* sysdeps/stub/recvmsg.c: Likewise.
	* sysdeps/stub/acct.c: Likewise.
	* sysdeps/stub/isinf.c: Likewise.  Add weak alias isinf for __isinf.
	* sysdeps/mach/hurd/_exit.c: Remove obsolete __NORETURN keyword.
	* sysdeps/posix/libc_fatal.c: Likewise.
	* sysdeps/i386/abort.c: Likewise.
	* sysdeps/i386/__longjmp.c: Likewise.
	* sysdeps/generic/make_siglist.c: Emit defn always for
 	_sys_siglist.  Emit weak alias to sys_siglist.
	* sysdeps/generic/atan.c: Remove obsolete __CONSTVALUE keyword.
	* sysdeps/ieee754/log10.c: Likewise.
	* time/difftime.c: Likewise.
	* stdlib/random.c (srand): Define as weak alias for __srandom.
	* stdlib/exit.c: Remove obsolete __NORETURN keyword.  Use set-hooks
 	macros for __libc_atexit.
	* stdlib/Makefile (routines): Remove __random, srand.
	* stdio/gets.c: Use new link_warning macro instead of old
 	warn_references.
	* stdio/Makefile (routines): Remove __ names.
	(aux): Remove syms-stdio.
	* socket/Makefile (routines): Added e on getpeernam and getsocknam.
	* setjmp/longjmp.c: Remove obsolete __NORETURN keyword.
	* setjmp/Makefile (routines): Remove _longjmp, siglongjmp.
	* setjmp/setjmp.h: Replace __NORETURN keyword with __attribute__ uses.
	* stdio/stdio.h: Likewise.
	* misc/Makefile (routines): Remove __ names.
	(aux): Remove data_start.
	* sysdeps/mach/hurd/defs.c: Don't include gnu-stabs.h.
	* sysdeps/mach/hurd/brk.c: Likewise.
	* hurd/hurdid.c: Likewise.
	* hurd/hurdpid.c: Likewise.
	* hurd/openport.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/hurdsig.c: Likewise.
	* hurd/hurdrlimit.c: Likewise.
	* hurd/hurdmalloc.c: Likewise.
	* hurd/dtable.c: Likewise.
	* hurd/setauth.c: Likewise.
	* misc/progname.c: Likewise.
	* misc/init-misc.c: Likewise.
	* sysdeps/generic/vfork.c: Likewise.
	* sysdeps/unix/bsd/init-posix.c: Likewise.
	* math/math.h: Replace __CONSTVALUE keyword with __attribute__ uses.
	* time/time.h: Likewise.
	* math/Makefile (routines): Remove __ names.
	* io/Makefile: Likewise.
	* termios/Makefile: Likewise.
	* resource/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* assert/assert.h: Replace __NORETURN keyword with __attribute__
 	uses.  Functions return void and macros deal with this.
	* assert/assert-perr.c: Remove obsolete __NORETURN keyword.
  	Return void.  Don't include gnu-stabs.h.
	* assert/assert.c: Likewise.
	* posix/Makefile (routines): Remove __ names, setpgrp.  Add
 	getpgid.
	(aux): Remove environ.
	* stdlib/stdlib.h (abort, exit): Replace __NORETURN keyword with
 	__attribute__ use.
	* posix/unistd.h (_exit): Likewise.
	(__getpgrp, __setpgrp): Declarations removed.
	(__getpgid, getpid): Declare these.

	* configure.in (host_os=gnuelf|linuxelf): Set elf=yes.  Do AC_SUBST
 	for gnu_ld, gnu_as, elf, and weak.  Call AC_LINK_FILEES on
 	$libc_link_{sources,dests}.
	* sysdeps/unix/configure.in: Remove __ from file names.  Don't
 	create files, just add to libc_link_{dests,sources}.

	* config.make.in (gnu-as, gnu-ld, elf, weak-symbols): New variables.

	* config.h.in: Add #undefs used by sysdeps configures.

	* sysdeps/unix/sysv/sysv4/Makefile (sysdep_routines): Removed
 	__setpgid, __getpgid.
	* sysdeps/unix/sysv/sco3.2.4/setpgid.c: Included file was renamed
 	from setpgrp.c.
	* sysdeps/unix/sysv/sco3.2.4/getpgid.c: Included file was renamed
 	from __getpgrp.c.
	* sysdeps/unix/bsd/getpgrp.c: File removed.
	* sysdeps/generic/getpgrp.c: Moved from sysdeps/stub/getpgrp.c.
	Call __getpgid with zero.
	* sysdeps/stub/setpgid.c: Renamed __setpgrp to __setpgid, added
 	weak aliases setpgid and setpgrp.
	* sysdeps/unix/sysv/irix4/setpgid.S: Likewise.
	* sysdeps/unix/common/setpgid.S: Likewise.
	* sysdeps/mach/hurd/setpgid.c: Likewise.
	* sysdeps/unix/sysv/sysv4/setpgid.c: Likewise.
	Use subcall 5 to __pgrpsys.
	* sysdeps/stub/getpgid.c: Renamed __getpgrp to __getpgid, added
 	weak alias getpgid.
	* sysdeps/mach/hurd/getpgid.c: Likewise.
	* sysdeps/unix/sysv/irix4/getpgid.S: Likewise.
	* sysdeps/unix/common/getpgid.S: Likewise.
	* sysdeps/unix/sysv/sysv4/getpgid.c: Likewise.
	Use subcall 4 to __pgrpsys.
	* sysdeps/stub/__getpgrp.c: Renamed to getpgid.c.
	* sysdeps/unix/sysv/sysv4/__getpgrp.c: Renamed to getpgid.c.
	* sysdeps/unix/sysv/sco3.2.4/__getpgrp.c: Renamed to getpgid.c.
	* sysdeps/unix/sysv/irix4/__getpgrp.S: Renamed to getpgid.S.
	* sysdeps/unix/common/__getpgrp.S: Renamed to getpgid.S.
	* sysdeps/mach/hurd/__getpgrp.c: Renamed to getpgid.c.
	* sysdeps/stub/setpgrp.c: Renamed to setpgid.c.
	* sysdeps/unix/sysv/sysv4/setpgrp.c: Renamed to setpgid.c.
	* sysdeps/unix/sysv/sco3.2.4/setpgrp.c: Renamed to setpgid.c.
	* sysdeps/unix/sysv/irix4/setpgrp.S: Renamed to setpgid.S.
	* sysdeps/unix/common/setpgrp.S: Renamed to setpgid.S.
	* sysdeps/mach/hurd/setpgrp.c: Renamed to setpgid.c.

	* sysdeps/unix/bsd/hp/m68k/getdents.S: Included file was renamed
 	from __getdents.S.

	* sysdeps/posix/defs.c: Don't include gnu-stabs.h.
	* sysdeps/stub/sigpending.c: Use new libc-symbols.h macro for stub
 	warning.
	* sysdeps/stub/fexecve.c: Likewise.
	* sysdeps/stub/fchdir.c: Likewise.
	* sysdeps/stub/fchflags.c: Likewise.
	* sysdeps/stub/chflags.c: Likewise.

	* sysdeps/m68k/__longjmp.c: Remove __NORETURN; it's obsolete.
	* sysdeps/generic/abort.c: Likewise.
	* sysdeps/ieee754/ldexp.c: Remove __CONSTVALUE; it's obsolete.

	* hurd/hurdioctl.c: Include hurd/ioctl.h.
	(_hurd_ioctl_handler_lists): Define this set.
	(_hurd_lookup_ioctl_handler): New function.
	* hurd/hurd/fd.h: ioctl handler stuff moved to hurd/ioctl.h.
	* hurd/hurd/ioctl.h: New file, broken out of hurd/fd.h.
	(_hurd_lookup_ioctl_handler): Declare it.
	(ioctl_handler_t): New typedef.  Use it throughout.
	* sysdeps/mach/hurd/ioctl.c: Include hurd/ioctl.h.
	(_hurd_ioctl_handler_lists): Don't define.
	(__ioctl): Call _hurd_lookup_ioctl_handler.

	* stdlib/strtol.c (maxquad): Make this const.
	[__GNUC__ == 2 && __GNUC_MINOR__ < 7]: Only use maxquad in this case.

	* posix/glob/configure.in: Put AC_AIX and AC_MINIX early, before
 	any compile tests.

	* sysdeps/mach/hurd/setitimer.c (timer_thread): Call
 	__msg_sig_post_request, not __sig_post_request.

	* misc/getusersh.c: Renamed to getusershell.c.
	* sysdeps/stub/sethostnam.c: Renamed to sethostname.c.
	* sysdeps/unix/inet/sethostnam.S: Renamed to sethostname.S.
	* sysdeps/unix/sysv/sysv4/sethostnam.c: Renamed to sethostname.c.
	* sysdeps/mach/hurd/sethostnam.c: Renamed to sethostname.c.

Tue Jan 24 00:14:30 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/stub/settod.c: Renamed to settimeofday.c.
	* sysdeps/unix/bsd/settod.S: Renamed to settimeofday.c.
	* sysdeps/unix/sysv/settod.c: Renamed to settimeofday.c.
	* sysdeps/mach/hurd/settod.c: Renamed to settimeofday.c.
	* sysdeps/stub/setitmr.c: Renamed to setitimer.c.
	* sysdeps/unix/common/setitmr.S: Renamed to setitimer.S.
	* sysdeps/mach/hurd/setitmr.c: Renamed to setitimer.c.
	* sysdeps/posix/fpathcon.c: Renamed to fpathconf.c.
	* sysdeps/stub/fpathcon.c: Renamed to fpathconf.c.
	* sysdeps/unix/sysv/irix4/fpathcon.c: Renamed to fpathconf.c.
	* sysdeps/stub/getprio.c: Renamed to getpriority.c.
	* sysdeps/unix/sysv/irix4/getprio.c: Renamed to getpriority.c.
	* sysdeps/unix/common/getprio.S: Renamed to getpriority.S.
	* sysdeps/mach/hurd/getprio.c: Renamed to getpriority.c.
	* sysdeps/stub/setprio.c: Renamed to setpriority.c.
	* sysdeps/unix/sysv/irix4/setprio.c: Renamed to setpriority.c.
	* sysdeps/unix/common/setprio.S: Renamed to setpriority.S.
	* sysdeps/mach/hurd/setprio.c: Renamed to setpriority.c.
	* sysdeps/stub/getpeernam.c: Renamed to getpeername.c.
	* sysdeps/unix/inet/getpeernam.S: Renamed to getpeername.S.
	* sysdeps/unix/sysv/linux/getpeernam.S: Renamed to getpeername.S.
	* sysdeps/mach/hurd/getpeernam.c: Renamed to getpeername.c.
	* sysdeps/stub/getsocknam.c: Renamed to getsockname.c.
	* sysdeps/unix/inet/getsocknam.S: Renamed to getsockname.S.
	* sysdeps/unix/sysv/linux/getsocknam.S: Renamed to getsockname.S.
	* sysdeps/mach/hurd/getsocknam.c: Renamed to getsockname.c.
	* sysdeps/stub/sigaltstk.c: Renamed to sigaltstack.c.
	* sysdeps/unix/bsd/bsd4.4/sigaltstk.S: Renamed to sigaltstack.S.
	* sysdeps/unix/sysv/sysv4/sigaltstk.S: Renamed to sigaltstack.S.
	* sysdeps/mach/hurd/sigaltstk.c: Renamed to sigaltstack.c.

	* sysdeps/mach/hurd/i386/sigreturn.c: Call __msg_sig_post instead
 	of __sig_post.
	* sysdeps/mach/hurd/sigsuspend.c: Likewise.
	* sysdeps/mach/hurd/kill.c: Likewise.
	* sysdeps/mach/hurd/sigprocmask.c: Likewise.

	* misc/sys/cdefs.h (__NORETURN, __CONSTVALUE): Macros removed.
	[!__GNUC__ || __GNUC__<2] (__attribute__): Define to empty.

	* sysdeps/stub/remove.c: New file.
	* sysdeps/posix/remove.c: New file.

Mon Jan 23 03:26:09 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* time/mktime.c [weak_alias] (timelocal): Define as weak alias for
 	mktime.
	* mach/mig_strncpy.c (mig_strncpy): Define as weak alias for
 	__mig_strncpy.
	* mach/msg-destroy.c: Renamed from __msg_dest.c.
	(mach_msg_destroy): Define as weak alias for __mach_msg_destroy.
	* mach/setup-thread.c (mach_setup_thread): Define as weak alias.
	* time/tzset.c (tzname, daylight, timezone): Define as weak
	aliases for __ names.
	* hurd/hurdkill.c (hurd_sig_post): Define as weak alias.
	* hurd/hurdlookup.c: Add weak aliases for non-__ names.
	* Makefile (+init): Test $(gnu-ld)=yes, not for $(+gnu-stabs)
	being defined.

Sun Jan 22 15:19:51 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* string/Makefile (routines): Remove __ names, index, rindex, and
	bcmp.
	* sysdeps/alpha/strchr.c [weak_alias] (index): Define as weak
	alias for strchr.
	* sysdeps/generic/strchr.c: Likewise.
	* sysdeps/generic/strrchr.c [weak_alias] (rindex): Define as weak
	alias for strrchr.
	* sysdeps/generic/memcmp.c [weak_alias] (bcmp): Define as weak
	alias for memcmp.

	* malloc/free.c (cfree): Define this function, with weak_alias if
	available, otherwise a C function.
	* malloc/Makefile (gmalloc-routines): Remove cfree.

Sat Jan 21 08:08:58 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/fseek.c: Do move bufp by O when that puts it exactly at
	get_limit.  This has the effect of no-op'ing properly for zero.

	* configure.in: Add AC_CONFIG_HEADER(config.h).
	(--with-elf, --with-weak-symbols): Grok these and define HAVE_*.
	* config.h.in: New file.

	* setjmp/longjmp.c: Add weak aliases _longjmp, siglongjmp.
	All code converted to use weak symbols, defined in the files which
	define the real code (with the __ names, the non-__ names are weak).
	All old symbol alias files removed.
	Many files renamed to remove __ prefix since there is now just
	the one file for both the __ and non-__ name for each function.
	* libc-symbols.h: New file.
	* set-hooks.h: Use libc-symbols.h macros for accessing symbol
	sets.
	* gnu-stabs.h: Prepend #error this file is obsolete.
	* sysdeps/ieee754/ldexp.c: Add weak aliases scalb and __scalb.
	* sysdeps/stub/__access.c: Renamed to access.c; added weak alias
	access.
	* sysdeps/unix/common/__access.S: Likewise.
	* sysdeps/mach/hurd/__access.c: Likewise.
	* sysdeps/stub/__adjtime.c: Renamed to adjtime.c; added weak alias
	adjtime.
	* sysdeps/unix/common/__adjtime.S: Likewise.
	* sysdeps/mach/__adjtime.c: Likewise.
	* sysdeps/mach/hurd/__adjtime.c: Likewise.
	* sysdeps/stub/__brk.c: Renamed to brk.c; added weak alias brk.
	* sysdeps/unix/bsd/sun/m68k/__brk.S: Likewise.
	* sysdeps/unix/bsd/vax/__brk.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/__brk.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__brk.S: Likewise.
	* sysdeps/unix/i386/__brk.S: Likewise.
	* sysdeps/unix/sparc/__brk.S: Likewise.
	* sysdeps/unix/mips/__brk.S: Likewise.
	* sysdeps/mach/hurd/__brk.c: Likewise.
	* sysdeps/standalone/__brk.c: Likewise.
	* sysdeps/stub/__chdir.c: Renamed to chdir.c; added weak alias chdir.
	* sysdeps/unix/__chdir.S: Likewise.
	* sysdeps/mach/hurd/__chdir.c: Likewise.
	* sysdeps/stub/__chmod.c: Renamed to chmod.c; added weak alias chmod.
	* sysdeps/unix/__chmod.S: Likewise.
	* sysdeps/mach/hurd/__chmod.c: Likewise.
	* sysdeps/stub/__chown.c: Renamed to chown.c; added weak alias chown.
	* sysdeps/unix/__chown.S: Likewise.
	* sysdeps/mach/hurd/__chown.c: Likewise.
	* sysdeps/stub/__close.c: Renamed to close.c; added weak alias close.
	* sysdeps/unix/__close.S: Likewise.
	* sysdeps/mach/hurd/__close.c: Likewise.
	* sysdeps/standalone/__close.c: Likewise.
	* sysdeps/generic/__copysign.c: Renamed to copysign.c; added weak
	alias copysign.
	* sysdeps/ieee754/__copysign.c: Likewise.
	* sysdeps/alpha/__copysign.c: Likewise.
	* sysdeps/ieee754/__drem.c: Renamed to drem.c; added weak alias drem.
	* sysdeps/m68k/fpu/__drem.c: Likewise.
	* sysdeps/stub/__drem.c: Likewise.
	* sysdeps/posix/__dup.c: Renamed to dup.c; added weak alias dup.
	* sysdeps/stub/__dup.c: Likewise.
	* sysdeps/unix/__dup.S: Likewise.
	* sysdeps/posix/__dup2.c: Renamed to dup2.c; added weak alias dup2.
	* sysdeps/stub/__dup2.c: Likewise.
	* sysdeps/unix/sysv/sysv4/__dup2.c: Likewise.
	* sysdeps/unix/sysv/irix4/__dup2.c: Likewise.
	* sysdeps/unix/common/__dup2.S: Likewise.
	* sysdeps/mach/hurd/__dup2.c: Likewise.
	* sysdeps/stub/__execve.c: Renamed to execve.c; added weak alias
	execve.
	* sysdeps/unix/__execve.S: Likewise.
	* sysdeps/mach/hurd/__execve.c: Likewise.
	* sysdeps/generic/__expm1.c: Renamed to expm1.c; added weak alias
	expm1.
	* sysdeps/m68k/fpu/__expm1.c: Likewise.
	* sysdeps/stub/__fchmod.c: Renamed to fchmod.c; added weak alias
	fchmod.
	* sysdeps/unix/common/__fchmod.S: Likewise.
	* sysdeps/mach/hurd/__fchmod.c: Likewise.
	* sysdeps/stub/__fchown.c: Renamed to fchown.c; added weak alias
	fchown.
	* sysdeps/unix/common/__fchown.S: Likewise.
	* sysdeps/mach/hurd/__fchown.c: Likewise.
	* sysdeps/stub/__fcntl.c: Renamed to fcntl.c; added weak alias fcntl.
	* sysdeps/unix/__fcntl.S: Likewise.
	* sysdeps/mach/hurd/__fcntl.c: Likewise.
	* math/__finite.c: Renamed to finite.c; added weak alias finite.
	* sysdeps/posix/__flock.c: Renamed to flock.c; added weak alias flock.
	* sysdeps/stub/__flock.c: Likewise.
	* sysdeps/unix/bsd/__flock.S: Likewise.
	* sysdeps/mach/hurd/__flock.c: Likewise.
	* hurd/__fopenport.c: Renamed to fopenport.c; added weak alias
	fopenport.
	* sysdeps/stub/__fork.c: Renamed to fork.c; added weak alias fork.
	* sysdeps/unix/__fork.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__fork.S: Likewise.
	* sysdeps/unix/i386/__fork.S: Likewise.
	* sysdeps/unix/sparc/__fork.S: Likewise.
	* sysdeps/unix/mips/__fork.S: Likewise.
	* sysdeps/mach/hurd/__fork.c: Likewise.
	* sysdeps/posix/__fpathcon.c: Renamed to fpathcon.c; added weak
	alias fpathconf.
	* sysdeps/stub/__fpathcon.c: Likewise.
	* sysdeps/unix/sysv/irix4/__fpathcon.c: Likewise.
	* sysdeps/stub/__fstat.c: Renamed to fstat.c; added weak alias fstat.
	* sysdeps/unix/__fstat.S: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__fstat.S: Likewise.
	* sysdeps/mach/hurd/__fstat.c: Likewise.
	* stdio/__getdelim.c: Renamed to getdelim.c; added weak alias
	getdelim.
	* sysdeps/stub/__getdents.c: Renamed to getdents.c; added weak
	alias getdents.
	* sysdeps/unix/__getdents.c: Likewise.
	* sysdeps/unix/bsd/sun/__getdents.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/__getdents.S: Likewise.
	* sysdeps/unix/bsd/ultrix4/__getdents.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__getdents.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__getdents.S: Likewise.
	* sysdeps/unix/sysv/__getdents.c: Likewise.
	* sysdeps/mach/hurd/__getdents.c: Likewise.
	* hurd/__getdport.c: Renamed to getdport.c; added weak alias getdport.
	* sysdeps/posix/__getdtsz.c: Renamed to getdtsz.c; added weak
	alias getdtablesize.
	* sysdeps/stub/__getdtsz.c: Likewise.
	* sysdeps/unix/bsd/__getdtsz.S: Likewise.
	* sysdeps/unix/sysv/sysv4/__getdtsz.c: Likewise.
	* sysdeps/mach/hurd/__getdtsz.c: Likewise.
	* sysdeps/stub/__getegid.c: Renamed to getegid.c; added weak alias
	getegid.
	* sysdeps/unix/__getegid.S: Likewise.
	* sysdeps/mach/hurd/__getegid.c: Likewise.
	* sysdeps/stub/__geteuid.c: Renamed to geteuid.c; added weak alias
	geteuid.
	* sysdeps/unix/__geteuid.S: Likewise.
	* sysdeps/mach/hurd/__geteuid.c: Likewise.
	* sysdeps/stub/__getgid.c: Renamed to getgid.c; added weak alias
	getgid.
	* sysdeps/unix/__getgid.S: Likewise.
	* sysdeps/mach/hurd/__getgid.c: Likewise.
	* sysdeps/stub/__getgrps.c: Renamed to getgroups.c; added weak
	alias getgroups.
	* sysdeps/unix/bsd/sequent/i386/__getgrps.S: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__getgrps.c: Likewise.
	* sysdeps/unix/sysv/irix4/__getgrps.c: Likewise.
	* sysdeps/unix/common/__getgrps.S: Likewise.
	* sysdeps/mach/hurd/__getgrps.c: Likewise.
	* sysdeps/stub/__gethstnm.c: Renamed to gethostname.c; added weak
	alias gethostname. 
	* sysdeps/unix/inet/__gethstnm.S: Likewise.
	* sysdeps/unix/sysv/__gethstnm.c: Likewise.
	* sysdeps/unix/sysv/sysv4/__gethstnm.c: Likewise.
	* sysdeps/mach/hurd/__gethstnm.c: Likewise.
	* sysdeps/stub/__getitmr.c: Renamed to getitimer.c; added weak
	alias getitimer.
	* sysdeps/unix/common/__getitmr.S: Likewise.
	* sysdeps/mach/hurd/__getitmr.c: Likewise.
	* stdio/__getline.c: Renamed to getline.c; added weak alias getline.
	* sysdeps/posix/__getpgsz.c: Renamed to getpagesize.c; added weak
	alias getpagesize.
	* sysdeps/stub/__getpgsz.c: Likewise.
	* sysdeps/unix/__getpgsz.c: Likewise.
	* sysdeps/unix/bsd/__getpgsz.S: Likewise.
	* sysdeps/unix/sysv/sysv4/__getpgsz.c: Likewise.
	* sysdeps/mach/__getpgsz.c: Likewise.
	* sysdeps/stub/__getpid.c: Renamed to getpid.c; added weak alias
	getpid.
	* sysdeps/unix/__getpid.S: Likewise.
	* sysdeps/mach/hurd/__getpid.c: Likewise.
	* sysdeps/stub/__getppid.c: Renamed to getppid.c; added weak alias
	getppid.
	* sysdeps/unix/__getppid.S: Likewise.
	* sysdeps/mach/hurd/__getppid.c: Likewise.
	* sysdeps/posix/__gettod.c: Renamed to gettimeofday.c; added weak
	alias gettimeofday.
	* sysdeps/stub/__gettod.c: Likewise.
	* sysdeps/unix/sysv/irix4/__gettod.c: Likewise.
	* sysdeps/unix/common/__gettod.S: Likewise.
	* sysdeps/mach/__gettod.c: Likewise.
	* sysdeps/stub/__getuid.c: Renamed to getuid.c; added weak alias
	getuid.
	* sysdeps/unix/__getuid.S: Likewise.
	* sysdeps/mach/hurd/__getuid.c: Likewise.
	* sysdeps/generic/__infnan.c: Renamed to infnan.c; added weak
	alias infnan.
	* sysdeps/ieee754/__infnan.c: Likewise.
	* sysdeps/vax/__infnan.c: Likewise.
	* sysdeps/stub/__ioctl.c: Renamed to ioctl.c; added weak alias ioctl.
	* sysdeps/unix/__ioctl.S: Likewise.
	* sysdeps/mach/hurd/__ioctl.c: Likewise.
	* sysdeps/posix/__isatty.c: Renamed to isatty.c; added weak alias
	isatty.
	* sysdeps/stub/__isatty.c: Likewise.
	* sysdeps/unix/bsd/__isatty.c: Likewise.
	* sysdeps/mach/hurd/__isatty.c: Likewise.
	* sysdeps/ieee754/__isinf.c: Renamed to isinf.c; added weak alias
	isinf.
	* sysdeps/m68k/fpu/__isinf.c: Likewise.
	* sysdeps/stub/__isinf.c: Likewise.
	* sysdeps/generic/__isnan.c: Renamed to isnan.c; added weak alias
	isnan.
	* sysdeps/ieee754/__isnan.c: Likewise.
	* sysdeps/m68k/fpu/__isnan.c: Likewise.
	* sysdeps/stub/__kill.c: Renamed to kill.c; added weak alias kill.
	* sysdeps/unix/__kill.S: Likewise.
	* sysdeps/mach/hurd/__kill.c: Likewise.
	* sysdeps/stub/__link.c: Renamed to link.c; added weak alias link.
	* sysdeps/unix/__link.S: Likewise.
	* sysdeps/mach/hurd/__link.c: Likewise.
	* sysdeps/ieee754/__logb.c: Renamed to logb.c; added weak alias logb.
	* sysdeps/m68k/fpu/__logb.c: Likewise.
	* sysdeps/stub/__logb.c: Likewise.
	* sysdeps/stub/__lseek.c: Renamed to lseek.c; added weak alias lseek.
	* sysdeps/unix/__lseek.S: Likewise.
	* sysdeps/mach/hurd/__lseek.c: Likewise.
	* sysdeps/generic/__lstat.c: Renamed to lstat.c; added weak alias
	lstat.
	* sysdeps/stub/__lstat.c: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__lstat.S: Likewise.
	* sysdeps/unix/common/__lstat.S: Likewise.
	* sysdeps/mach/hurd/__lstat.c: Likewise.
	* sysdeps/generic/__memccpy.c: Renamed to memccpy.c; added weak
	alias memccpy.
	* sysdeps/vax/__memccpy.c: Likewise.
	* sysdeps/stub/__mkdir.c: Renamed to mkdir.c; added weak alias mkdir.
	* sysdeps/unix/sysv/__mkdir.c: Likewise.
	* sysdeps/unix/common/__mkdir.S: Likewise.
	* sysdeps/mach/hurd/__mkdir.c: Likewise.
	* sysdeps/stub/__mknod.c: Renamed to mknod.c; added weak alias mknod.
	* sysdeps/unix/__mknod.S: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__mknod.S: Likewise.
	* sysdeps/mach/hurd/__mknod.c: Likewise.
	* mach/__msg.c: Renamed to msg.c; added weak alias mach_msg.
	* mach/__msgserver.c: Renamed to msgserver.c; added weak alias
	mach_msg_server.
	* sysdeps/stub/__open.c: Renamed to open.c; added weak alias open.
	* sysdeps/unix/__open.S: Likewise.
	* sysdeps/mach/hurd/__open.c: Likewise.
	* sysdeps/standalone/__open.c: Likewise.
	* sysdeps/stub/__pathconf.c: Renamed to pathconf.c; added weak
	alias pathconf.
	* sysdeps/unix/sysv/sco3.2.4/__pathconf.S: Likewise.
	* sysdeps/unix/sysv/irix4/__pathconf.c: Likewise.
	* hurd/__pid2task.c: Renamed to pid2task.c; added weak alias pid2task.
	* sysdeps/stub/__pipe.c: Renamed to pipe.c; added weak alias pipe.
	* sysdeps/unix/bsd/vax/__pipe.S: Likewise.
	* sysdeps/unix/bsd/m68k/__pipe.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__pipe.S: Likewise.
	* sysdeps/unix/i386/__pipe.S: Likewise.
	* sysdeps/unix/sparc/__pipe.S: Likewise.
	* sysdeps/unix/mips/__pipe.S: Likewise.
	* sysdeps/mach/hurd/__pipe.c: Likewise.
	* stdlib/__random.c: Renamed to random.c; added weak alias random.
	* sysdeps/stub/__read.c: Renamed to read.c; added weak alias read.
	* sysdeps/unix/__read.S: Likewise.
	* sysdeps/mach/hurd/__read.c: Likewise.
	* sysdeps/standalone/__read.c: Likewise.
	* sysdeps/stub/__readlink.c: Renamed to readlink.c; added weak
	alias readlink.
	* sysdeps/unix/common/__readlink.S: Likewise.
	* sysdeps/mach/hurd/__readlink.c: Likewise.
	* sysdeps/generic/__rint.c: Renamed to rint.c; added weak alias rint.
	* sysdeps/m68k/fpu/__rint.c: Likewise.
	* sysdeps/stub/__rmdir.c: Renamed to rmdir.c; added weak alias rmdir.
	* sysdeps/unix/sysv/__rmdir.c: Likewise.
	* sysdeps/unix/common/__rmdir.S: Likewise.
	* sysdeps/mach/hurd/__rmdir.c: Likewise.
	* sysdeps/generic/__sbrk.c: Renamed to sbrk.c; added weak alias sbrk.
	* sysdeps/stub/__sbrk.c: Likewise.
	* sysdeps/mach/hurd/__sbrk.c: Likewise.
	* math/__scalb.c: Renamed to scalb.c; added weak alias scalb.
	* sysdeps/stub/__select.c: Renamed to select.c; added weak alias
	select.
	* sysdeps/unix/common/__select.S: Likewise.
	* sysdeps/mach/hurd/__select.c: Likewise.
	* hurd/__setauth.c: Renamed to setauth.c; added weak alias setauth.
	* sysdeps/stub/__setgid.c: Renamed to setgid.c; added weak alias
	setgid.
	* sysdeps/unix/__setgid.S: Likewise.
	* sysdeps/unix/bsd/__setgid.c: Likewise.
	* sysdeps/mach/hurd/__setgid.c: Likewise.
	* sysdeps/stub/__setitmr.c: Renamed to setitmr.c; added weak alias
	setitmr 
	* sysdeps/unix/common/__setitmr.S: Likewise.
	* sysdeps/mach/hurd/__setitmr.c: Likewise.
	* sysdeps/stub/__setpgrp.c: Renamed to setpgrp.c; added weak alias
	setpgrp 
	* sysdeps/unix/sysv/sysv4/__setpgrp.c: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__setpgrp.c: Likewise.
	* sysdeps/unix/sysv/irix4/__setpgrp.S: Likewise.
	* sysdeps/unix/common/__setpgrp.S: Likewise.
	* sysdeps/mach/hurd/__setpgrp.c: Likewise.
	* sysdeps/stub/__setregid.c: Renamed to setregid.c; added weak
	alias setregid.
	* sysdeps/unix/common/__setregid.S: Likewise.
	* sysdeps/mach/hurd/__setregid.c: Likewise.
	* sysdeps/stub/__setreuid.c: Renamed to setreuid.c; added weak
	alias setreuid.
	* sysdeps/unix/common/__setreuid.S: Likewise.
	* sysdeps/mach/hurd/__setreuid.c: Likewise.
	* sysdeps/stub/__setsid.c: Renamed to setsid.c; added weak alias
	setsid.
	* sysdeps/unix/bsd/__setsid.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/__setsid.S: Likewise.
	* sysdeps/unix/bsd/ultrix4/__setsid.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__setsid.S: Likewise.
	* sysdeps/unix/sysv/linux/__setsid.S: Likewise.
	* sysdeps/unix/sysv/sysv4/__setsid.c: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__setsid.c: Likewise.
	* sysdeps/mach/hurd/__setsid.c: Likewise.
	* sysdeps/stub/__settod.c: Renamed to settod.c; added weak alias
	settimeofday.
	* sysdeps/unix/bsd/__settod.S: Likewise.
	* sysdeps/unix/sysv/__settod.c: Likewise.
	* sysdeps/mach/hurd/__settod.c: Likewise.
	* sysdeps/stub/__setuid.c: Renamed to setuid.c; added weak alias
	setuid.
	* sysdeps/unix/__setuid.S: Likewise.
	* sysdeps/unix/bsd/__setuid.c: Likewise.
	* sysdeps/mach/hurd/__setuid.c: Likewise.
	* sysdeps/posix/__sigblock.c: Renamed to sigblock.c; added weak
	alias sigblock.
	* sysdeps/stub/__sigblock.c: Likewise.
	* sysdeps/unix/bsd/__sigblock.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__sigblock.c: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigblock.S: Likewise.
	* sysdeps/posix/__sigpause.c: Renamed to sigpause.c; added weak
	alias sigpause.
	* sysdeps/stub/__sigpause.c: Likewise.
	* sysdeps/unix/bsd/__sigpause.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigpause.S: Likewise.
	* sysdeps/stub/__sigproc.c: Renamed to sigprocmask.c; added weak
	alias sigprocmask.
	* sysdeps/unix/bsd/__sigproc.c: Likewise.
	* sysdeps/unix/sysv/sysv4/__sigproc.S: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__sigproc.S: Likewise.
	* sysdeps/mach/hurd/__sigproc.c: Likewise.
	* sysdeps/stub/__sigret.c: Renamed to sigreturn.c; added weak
	alias sigreturn.
	* sysdeps/unix/bsd/sun/__sigret.S: Likewise.
	* sysdeps/unix/sysv/i386/__sigret.S: Likewise.
	* sysdeps/unix/sysv/irix4/__sigret.S: Likewise.
	* sysdeps/unix/i386/__sigret.S: Likewise.
	* sysdeps/unix/mips/__sigret.S: Likewise.
	* sysdeps/mach/hurd/i386/__sigret.c: Likewise.
	* sysdeps/mach/hurd/alpha/__sigret.c: Likewise.
	* sysdeps/mach/hurd/mips/__sigret.c: Likewise.
	* sysdeps/posix/__sigvec.c: Renamed to sigvec.c; added weak alias
	sigvec.
	* sysdeps/stub/__sigvec.c: Likewise.
	* sysdeps/unix/bsd/__sigvec.S: Likewise.
	* sysdeps/unix/bsd/sun/__sigvec.S: Likewise.
	* sysdeps/unix/bsd/sequent/i386/__sigvec.S: Likewise.
	* sysdeps/unix/bsd/ultrix4/mips/__sigvec.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__sigvec.c: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigvec.S: Likewise.
	* sysdeps/stub/__stat.c: Renamed to stat.c; added weak alias stat.
	* sysdeps/unix/__stat.S: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__stat.S: Likewise.
	* sysdeps/mach/hurd/__stat.c: Likewise.
	* sysdeps/generic/__stpncpy.c: Renamed to stpncpy.c; added weak
	alias stpncpy.
	* sysdeps/stub/__symlink.c: Renamed to symlink.c; added weak alias
	symlink.
	* sysdeps/unix/common/__symlink.S: Likewise.
	* sysdeps/mach/hurd/__symlink.c: Likewise.
	* sysdeps/posix/__sysconf.c: Renamed to sysconf.c; added weak
	alias sysconf.
	* sysdeps/stub/__sysconf.c: Likewise.
	* sysdeps/unix/bsd/ultrix4/__sysconf.c: Likewise.
	* sysdeps/unix/sysv/sysv4/__sysconf.c: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__sysconf.S: Likewise.
	* sysdeps/unix/sysv/irix4/__sysconf.c: Likewise.
	* hurd/__task2pid.c: Renamed to task2pid.c; added weak alias task2pid.
	* sysdeps/stub/__times.c: Renamed to times.c; added weak alias times.
	* sysdeps/unix/bsd/__times.c: Likewise.
	* sysdeps/unix/sysv/__times.S: Likewise.
	* time/__tzset.c: Renamed to tzset.c; added weak alias tzset.
	* sysdeps/stub/__umask.c: Renamed to umask.c; added weak alias umask.
	* sysdeps/unix/__umask.S: Likewise.
	* sysdeps/mach/hurd/__umask.c: Likewise.
	* sysdeps/stub/__unlink.c: Renamed to unlink.c; added weak alias
	unlink.
	* sysdeps/unix/__unlink.S: Likewise.
	* sysdeps/mach/hurd/__unlink.c: Likewise.
	* sysdeps/stub/__utimes.c: Renamed to utimes.c; added weak alias
	utimes.
	* sysdeps/unix/bsd/__utimes.S: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/__utimes.S: Likewise.
	* sysdeps/mach/hurd/__utimes.c: Likewise.
	* sysdeps/generic/__vfork.c: Renamed to vfork.c; added weak alias
	vfork.
	* sysdeps/unix/bsd/sun/m68k/__vfork.S: Likewise.
	* sysdeps/unix/bsd/vax/__vfork.S: Likewise.
	* sysdeps/unix/bsd/i386/__vfork.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/__vfork.S: Likewise.
	* sysdeps/unix/bsd/ultrix4/mips/__vfork.S: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__vfork.S: Likewise.
	* sysdeps/unix/sparc/__vfork.S: Likewise.
	* stdio/__vfscanf.c: Renamed to vfscanf.c; added weak alias vfscanf.
	* stdio/__vsscanf.c: Renamed to vsscanf.c; added weak alias vsscanf.
	* sysdeps/posix/__wait.c: Renamed to wait.c; added weak alias wait.
	* sysdeps/stub/__wait.c: Likewise.
	* sysdeps/unix/bsd/sony/newsos4/__wait.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/__wait.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos3/m68k/__wait.S: Likewise.
	* sysdeps/unix/bsd/vax/__wait.S: Likewise.
	* sysdeps/unix/bsd/m68k/__wait.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__wait.c: Likewise.
	* sysdeps/unix/sysv/i386/linux/__wait.S: Likewise.
	* sysdeps/unix/sysv/irix4/__wait.S: Likewise.
	* sysdeps/unix/i386/__wait.S: Likewise.
	* sysdeps/unix/mips/__wait.S: Likewise.
	* sysdeps/posix/__wait3.c: Renamed to wait3.c; added weak alias wait3.
	* sysdeps/stub/__wait3.c: Likewise.
	* sysdeps/unix/bsd/sony/newsos4/__wait3.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/__wait3.c: Likewise.
	* sysdeps/unix/bsd/vax/__wait3.S: Likewise.
	* sysdeps/unix/bsd/i386/__wait3.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/__wait3.S: Likewise.
	* sysdeps/unix/bsd/ultrix4/__wait3.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__wait3.c: Likewise.
	* sysdeps/unix/sysv/irix4/__wait3.S: Likewise.
	* sysdeps/stub/__wait4.c: Renamed to wait4.c; added weak alias wait4.
	* sysdeps/unix/bsd/sony/newsos4/__wait4.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/__wait4.c: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__wait4.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__wait4.S: Likewise.
	* sysdeps/unix/sysv/linux/__wait4.S: Likewise.
	* sysdeps/mach/hurd/__wait4.c: Likewise.
	* sysdeps/stub/__waitpid.c: Renamed to waitpid.c; added weak alias
	waitpid.
	* sysdeps/unix/bsd/sun/sunos4/__waitpid.c: Likewise.
	* sysdeps/unix/bsd/ultrix4/__waitpid.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__waitpid.c: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__waitpid.c: Likewise.
	* sysdeps/unix/sysv/linux/__waitpid.S: Likewise.
	* sysdeps/unix/sysv/sysv4/__waitpid.c: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__waitpid.S: Likewise.
	* sysdeps/unix/sysv/irix4/__waitpid.c: Likewise.
	* sysdeps/stub/__write.c: Renamed to write.c; added weak alias write.
	* sysdeps/unix/__write.S: Likewise.
	* sysdeps/mach/hurd/__write.c: Likewise.
	* sysdeps/standalone/__write.c: Likewise.
	* sysdeps/stub/__tcgetatr.c: Renamed to tcgetattr.c; added weak
	alias tcgetattr.
	* sysdeps/unix/bsd/__tcgetatr.c: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/__tcgetatr.c: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__tcgetatr.c: Likewise.
	* sysdeps/unix/sysv/__tcgetatr.c: Likewise.
	* sysdeps/stub/__sigact.c: Renamed to sigaction.c; added weak
	alias sigaction.
	* sysdeps/unix/bsd/__sigact.c: Likewise.
	* sysdeps/unix/sysv/__sigact.c: Likewise.
	* sysdeps/unix/sysv/sysv4/__sigact.c: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/__sigact.S: Likewise.
	* sysdeps/mach/hurd/__sigact.c: Likewise.
	* sysdeps/posix/__sigstmsk.c: Renamed to sigsetmask.c; added weak
	alias sigsetmask.
	* sysdeps/stub/__sigstmsk.c: Likewise.
	* sysdeps/unix/bsd/__sigstmsk.S: Likewise.
	* sysdeps/unix/bsd/bsd4.4/__sigstmsk.c: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigstmsk.S: Likewise.
	* sysdeps/stub/__getrusag.c: Renamed to getrusage.c; added weak
	alias getrusage.
	* sysdeps/unix/sysv/irix4/__getrusag.c: Likewise.
	* sysdeps/unix/common/__getrusag.S: Likewise.
	* hurd/task2pid.c: File removed.
	* hurd/setauth.c: File removed.
	* hurd/pid2task.c: File removed.
	* hurd/hurdsyms.c: File removed.
	* hurd/getdport.c: File removed.
	* hurd/fopenport.c: File removed.
	* mach/thread-sym.c: File removed.
	* mach/spin-syms.c: File removed.
	* mach/msgserver_t.c: File removed.
	* mach/msgserver.c: File removed.
	* mach/msg.c: File removed.
	* mach/mig_syms.c: File removed.
	* malloc/mcheck-init.c: File removed.
	* malloc/cfree.c: File removed.
	* io/flock.c: File removed.
	* io/write.c: File removed.
	* io/unlink.c: File removed.
	* io/umask.c: File removed.
	* io/symlink.c: File removed.
	* io/rmdir.c: File removed.
	* io/readlink.c: File removed.
	* io/read.c: File removed.
	* io/pipe.c: File removed.
	* io/open.c: File removed.
	* io/mkdir.c: File removed.
	* io/lstat.c: File removed.
	* io/lseek.c: File removed.
	* io/link.c: File removed.
	* io/isatty.c: File removed.
	* io/stat.c: File removed.
	* io/fstat.c: File removed.
	* io/fchown.c: File removed.
	* io/fchmod.c: File removed.
	* io/dup2.c: File removed.
	* io/dup.c: File removed.
	* io/close.c: File removed.
	* io/fcntl.c: File removed.
	* io/chmod.c: File removed.
	* io/chdir.c: File removed.
	* io/access.c: File removed.
	* io/chown.c: File removed.
	* time/tzset.c: File removed.
	* time/timelocal.c: File removed.
	* time/syms-time.c: File removed.
	* time/settod.c: File removed.
	* time/setitmr.c: File removed.
	* time/gettod.c: File removed.
	* time/getitmr.c: File removed.
	* time/adjtime.c: File removed.
	* termios/tcgetattr.c: File removed.
	* string/stpncpy.c: File removed.
	* string/rindex.c: File removed.
	* string/memccpy.c: File removed.
	* string/index.c: File removed.
	* string/bcmp.c: File removed.
	* stdlib/srand.c: File removed.
	* stdlib/random.c: File removed.
	* stdio/vsscanf.c: File removed.
	* stdio/vfscanf.c: File removed.
	* stdio/syms-stdio.c: File removed.
	* stdio/remove.c: File removed.
	* stdio/getline.c: File removed.
	* stdio/getdelim.c: File removed.
	* signal/ssignal.c: File removed.
	* signal/sigvec.c: File removed.
	* signal/sigsetmask.c: File removed.
	* signal/sigret.c: File removed.
	* signal/sigproc.c: File removed.
	* signal/sigpause.c: File removed.
	* signal/sigblock.c: File removed.
	* signal/sigaction.c: File removed.
	* signal/kill.c: File removed.
	* signal/gsignal.c: File removed.
	* setjmp/siglongjmp.c: File removed.
	* setjmp/_longjmp.c: File removed.
	* resource/getrusage.c: File removed.
	* posix/waitpid.c: File removed.
	* posix/wait4.c: File removed.
	* posix/wait3.c: File removed.
	* posix/wait.c: File removed.
	* posix/times.c: File removed.
	* posix/sysconf.c: File removed.
	* posix/setuid.c: File removed.
	* posix/setsid.c: File removed.
	* posix/setpgrp.c: File removed.
	* posix/setpgid.c: File removed.
	* posix/setgid.c: File removed.
	* posix/pathconf.c: File removed.
	* posix/getuid.c: File removed.
	* posix/getppid.c: File removed.
	* posix/getpid.c: File removed.
	* posix/getgrps.c: File removed.
	* posix/getgid.c: File removed.
	* posix/geteuid.c: File removed.
	* posix/getegid.c: File removed.
	* posix/fpathcon.c: File removed.
	* posix/fork.c: File removed.
	* posix/execve.c: File removed.
	* posix/environ.c: File removed.
	* misc/utimes.c: File removed.
	* misc/setreuid.c: File removed.
	* misc/setregid.c: File removed.
	* misc/select.c: File removed.
	* misc/sbrk.c: File removed.
	* misc/mknod.c: File removed.
	* misc/ioctl.c: File removed.
	* misc/getpgsz.c: File removed.
	* misc/gethstnm.c: File removed.
	* misc/getdtsz.c: File removed.
	* misc/data_start.c: File removed.
	* misc/brk.c: File removed.
	* math/scalb.c: File removed.
	* math/rint.c: File removed.
	* math/logb.c: File removed.
	* math/isnan.c: File removed.
	* math/isinf.c: File removed.
	* math/infnan.c: File removed.
	* math/finite.c: File removed.
	* math/expm1.c: File removed.
	* math/drem.c: File removed.
	* math/copysign.c: File removed.
	* math/__scalb.c: File removed.
	* dirent/getdents.c: File removed.

Fri Jan 20 16:11:06 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/morecore.c (__default_morecore): Use
	__malloc_ptrdiff_t; don't cast arg to int.

	* resolv/getnetnamadr.c: Include "conf/portability.h".

Thu Jan 19 02:20:04 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdlib/strtol.c: Include errno.h.
	[QUAD] (ULONG_MAX): Define to a static variable initialized to
	ULONG_LONG_MAX. This is to work around a GCC bug in using the
	constant in arithmetic.

	* posix/unistd.h (daemon): Declare it.

	* malloc/mcheck-init.c: Remove GNU ld hacks.
	(__malloc_initialize_hook): Initialize this hook to turn_on_mcheck.
	* malloc/malloc.c (__malloc_initialize_hook): New hook variable.
	(initialize): Call the hook if set.
	* malloc/malloc.h: Use __malloc_{size,ptrdiff}_t in prototypes.
	(__malloc_initialize_hook): Declare new hook variable.

Wed Jan 18 01:43:39 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdsig.c: Prepend `msg_' to server RPC names.
	* hurd/hurdpid.c: Likewise.
	* hurd/hurdauth.c: Likewise.

Tue Jan 17 03:16:47 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__select.c: If some replies are EINTR, succeed
        if any are successful.

	* hurd/hurdmsg.c: Prepend `msg_' to all RPC names.
	(_S_msg_get_exec_flags, _S_msg_set_exec_flags, 
	_S_msg_set_some_exec_flags, _S_msg_clear_some_exec_flags): New
        functions.
	(_S_io_select_done, _S_dir_changed, _S_file_changed): Stubs removed.

	* hurd/hurdkill.c: __sig_post renamed to __msg_sig_post.
	* hurd/hurd-raise.c: Likewise.
	* hurd/hurdsig.c (post_reply): Prepend `msg_' to RPC names.

	* sysdeps/mach/hurd/ptrace.c: New file.

	* sysdeps/mach/hurd/__select.c: Revamped to use new io_select
	interface, which has normal EINTR semantics.  Instead of waiting
	for io_select_done notification messages, send io_select messages
	with short reply timeout and then wait for io_select_reply
	messages.

	* hurd/hurdexec.c (_hurd_exec): Pass (_hurd_exec_flags &
        EXEC_INHERITED) to file_exec.

	* hurd/hurdsig.c (post_reply): Take new arg UNTRACED; if nonzero,
	use sig_post_untraced_reply.  All callers changed.
	(abort_thread, abort_rpcs): Take same new arg and pass it through.  
	All callers changed.
	(_hurd_internal_post_signal): Take new arg UNTRACED.
	If zero and process is traced, stop with SIGNO as stop signal.  If
	nonzero, resume process before delivering signal (unless
	ACT==stop).  Expand local fn sigwakeup into block at end taken iff
	SIGNO!=0.
	(signal_allowed): New function, broken out of _S_sig_post.
	(_S_sig_post): Call it.  Pass UNTRACED arg of false to
	_hurd_internal_post_signal.
	(_S_sig_post_untraced): New function.  Just like _S_sig_post, but
	pass true for UNTRACED.
	* hurd/hurd/signal.h (_hurd_internal_post_signal): Take new arg
        UNTRACED.
	* hurd/catch-exc.c (_S_catch_exception_raise): Pass UNTRACED arg
        to _hurd_internal_post_signal (value zero).

Mon Jan 16 16:40:01 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdinit.c (_hurd_exec_flags): New variable.
	(_hurd_init): Initialize it from FLAGS arg.
	(_hurd_proc_init): If EXEC_TRACED is set in _hurd_exec_flags,
	raise a SIGTRAP signal (with a sigcode of zero).
	* hurd/hurd.h (_hurd_exec_flags): Declare it.

	* Version 1.09.5.

Mon Jan 16 16:16:55 1995  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* malloc/malloc.c (malloc): Fix 1-off in previous change.

Mon Jan 16 15:49:07 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/Makefile.in: Remove config.h and config.log.

Sun Jan 15 06:56:47 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/configure.in: Add AC_CONST check.

	* conf/portability.h: #undef sun.
	* resolv/res_query.c: Updated from BIND-4.9.3-BETA17.
	* resolv/getnetnamadr.c: Likewise.

	* socket/Makefile (headers): Add sockaddrcom.h.
	* inet/netinet/in.h: Include <sockaddrcom.h>.
	(struct sockaddr_in): Use the __SOCKADDR_COMMON macro.
	* socket/sys/un.h (struct sockaddr_in): Likewise.
	* socket/sys/socket.h (struct sockaddr): Likewise.
	* sysdeps/unix/bsd/bsd4.4/sockaddrcom.h: New file.
	* sysdeps/generic/sockaddrcom.h: New file.

	* sysdeps/unix/sysv/sysv4/ftruncate.c: New file.
	* sysdeps/unix/common/fcntlbits.h [__USE_SVID] (F_ALLOCSP,
        F_FREESP): New macros.
	* sysdeps/posix/truncate.c: New file.

	* malloc/malloc.c (malloc): Fix typos in RMS's change.

	* malloc/Makefile (dist-routines): Add malloc-find.
	* malloc/malloc.h (malloc_find_object_address): Declare it.
	* malloc/malloc-find.c: New file.

	* malloc/malloc.h (__malloc_ptrdiff_t): New macro, defined a la
        __malloc_size_t.
	(malloc_info): Use that type for member `busy.info.size'.

	* stdlib/strtol.c: Change uses of `long' keyword throughout to use
        `LONG' macro.
	[! QUAD] (LONG): Define as long.
	[QUAD] (LONG): Define as long long.
	[QUAD] (LONG_MIN, LONG_MAX, ULONG_MAX): Redefine to long long
	versions.
	[QUAD] (strtoul, strtol): Define to strtouq, strtoq.
	* stdlib/Makefile (routines): Add strtoq and strtouq.
	* stdlib/strtoq.c, stdlib/strtouq.c: New files.
	* stdlib/stdlib.h [__GNUC__ && __USE_BSD] (strtoq, strtouq):
        Declare them.

	* stdio/vfprintf.c: If there was a precision specified, ignore the
	0 flag and always pad with spaces.

	* stdio/vfprintf.c: Don't use strchr to skip text until next %.
	Use a loop and also stop on first !isascii char.

Wed Jan 11 00:07:10 1995  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* malloc/malloc.h (malloc_info): Change usage of .busy.info.size.

	* malloc/malloc.c (malloc): For a multi-block object, store a
	negative number into the busy.info.size of all but the first block.

Tue Jan 10 13:45:20 1995  Brendan Kehoe  <brendan@zen.org>

	* sysdeps/unix/bsd/ultrix4/mips/start.S: Use s0, s1, and s2
	instead of t0, t1, and t2.

Tue Jan 10 05:53:50 1995  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* malloc/memalign.c (__memalign_hook): New variable.
	(memalign): Call it if set.
	* malloc/malloc.h (__memalign_hook): Declare new variable.

Wed Dec 28 03:27:21 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* conf/portability.h: Include string.h and stdlib.h.
	* inet/netdb.h (NETDB_INTERNAL, NETDB_SUCCESS): New macros.
	* resolv/resolv.h, resolv/arpa/nameser.h, resolv/gethnamaddr.c,
	resolv/getnetbyname.c, resolv/getnetent.c, resolv/herror.c,
	resolv/res_mkquery.c, resolv/res_send.c, resolv/res_comp.c,
	resolv/res_debug.c, resolv/res_init.c: Updated from BIND 4.9.3-BETA14.

	* sysdeps/m68k/fpu/__math.h (__m81_inline): New macro.  Replace
	all uses of `extern __inline' with `__m81_inline'.

	* sysdeps/unix/bsd/hp/m68k/__vfork.S: Use subl, not decl.
	* sysdeps/unix/__fork.S: Swap args in subl.

	* posix/sys/types.h [__USE_MISC] (ushort, uint): New typedefs, for
        compatibility.

Tue Dec 20 13:33:20 1994  Michael I Bushnell  <mib@geech.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__setpgrp.c (__setpgrp): Use __swtch_pri instead
        of swtch.
	* sysdeps/mach/hurd/__setsid.c (__setsid): Likewise.
	* mach/spin-solid.c (__spin_lock_solid): Likewise.

Thu Dec 15 12:01:07 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* inet/rcmd.c (iruserok): Use alloca instead of fixed-size buffer
        for PBUF.
	(__ivaliduser): Use getline instead of fgets with fixed-size buffer.

	* sysdeps/mach/hurd/Makefile (subdirs): Don't elide inet.

Wed Dec 14 18:20:56 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/alpha/bsd-setjmp.S: Reverse register and immediate args
	in `bis' insn; immediate must be second.

	* sysdeps/unix/__fork.S: Use subl instead of decl.
	* sysdeps/unix/i386/__fork.S: New file.

	* sysdeps/mach/hurd/alpha/trampoline.c (_hurd_setup_sighandler):
	Remove A macro; just use `asm volatile' with proper quotes in each
	line.
	* sysdeps/mach/alpha/sysdep.h (CALL_WITH_SP): Put parens around
        jmp target register.

	* time/africa, time/asia, time/australasia, time/emkdir.c,
	time/europe, time/ialloc.c, time/northamerica, time/private.h,
	time/scheck.c, time/yearistype, time/zdump.c, time/zic.c: New code
	and data from ADO 94h distribution.

	* sysdeps/sparc/setjmp.S: Use sethi and or to put address of
	__sigjmp_save in %g1 and jmp there.  jmp cannot contain a complete
	absolute pointer.  Put second store in jmp delay slot.

Tue Dec 13 15:47:52 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/sparc/bsd-_setjmp.S: Use sethi and or to put address of
	__sigsetjmp in %g1 and jmp there.  jmp cannot contain a complete
	absolute pointer.
	* sysdeps/sparc/bsd-setjmp.S: Likewise.

	* configure.in: Use ; before } in { ... } exprs.

Mon Dec 12 01:41:07 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.09.3.

	* sysdeps/mach/hurd/alpha/trampoline.c: Use `long int' for sigcode
	values.  Use _hurdsig_catch_fault.  Pass address of __sigreturn in
	$27, SCP value in $25.  In trampoline code, use those regs.

	* sysdeps/mach/hurd/alpha/__sigret.c: Use asms instead of global
	register vars to restore FP regs.  Fix typo in REI invocation.

Sun Dec 11 14:10:11 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd/fd.h (hurd_register_ioctl_handler,
	_HURD_HANDLE_IOCTLS): Third arg to handler is a void *, not a
	__gnuc_va_list.

	* stdio/memstream.c (enlarge_buffer): Always add one char into
	NEED for the char we are writing or the NUL terminator.

	* stdio/memstream.c (enlarge_buffer): If realloc fails, just set
	error flag and preserve old buffer state.

	* stdio/fwrite.c: In fill_buffer case, check for zero buffer space
	after fflush and write one char normally.

Sat Dec 10 00:02:21 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__fork.c: Use natural_t in place of int.

	* sysdeps/alpha/macros.m4: Use C comments instead of ! comments.

	* sysdeps/mach/hurd/mmap.c: Cast -1 to long int before casting to
        caddr_t.

	* sysdeps/mach/alpha/syscall.S: Include
        <mach/machine/alpha_instruction.h> to define op_chmk.

	* sysdeps/mach/hurd/__mknod.c: Include <string.h>.
	* sysdeps/mach/hurd/setegid.c: Likewise.
	* sysdeps/mach/hurd/seteuid.c: Likewise.
	* sysdeps/mach/hurd/__setregid.c: Likewise.
	* sysdeps/mach/hurd/__setreuid.c: Likewise.
	* sysdeps/mach/hurd/__ioctl.c: Likewise.

	* sysdeps/mach/hurd/recvfrom.c: Include <string.h>.  Use
	mach_msg_type_number_t in place of unsigned int.
	* sysdeps/mach/hurd/recv.c: Likewise.
	* sysdeps/mach/hurd/getsockopt.c: Likewise.
	* sysdeps/mach/hurd/getsocknam.c: Likewise.
	* sysdeps/mach/hurd/getpeernam.c: Likewise.
	* sysdeps/mach/hurd/accept.c: Likewise.
	* sysdeps/mach/hurd/__gethstnm.c: Likewise.

Fri Dec  9 00:01:21 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__readlink.c: Use mach_msg_type_number_t in
        place of unsigned int.
	* sysdeps/mach/hurd/__fork.c: Likewise.

	* sysdeps/mach/hurd/__setgid.c: Include <string.h>.
	* sysdeps/mach/hurd/__setuid.c: Likewise.
	* sysdeps/mach/hurd/__getgrps.c: Likewise.
	* hurd/getuids.c: Likewise.
	* sysdeps/mach/hurd/__getdents.c: Likewise.

	* sysdeps/mach/hurd/dirstream.h (DIR): Use unsigned long int for
        `__allocation' and `__size' members.

	* sysdeps/mach/hurd/alpha/exc2signal.c: Use `long int' for sigcode
        values.
	* sysdeps/mach/hurd/i386/exc2signal.c: Likewise.

	* mach/devstream.c (input): Use mach_msg_type_number_t for NREAD.

	* sysdeps/mach/hurd/__setitmr.c (preempt_sigalrm): Use `long int'
        for SIGCODE; take SIGERROR arg.

	* sysdeps/alpha/divrem.m4: Include <sysdep.h> instead of
	<regdef.h>.  Use C comments instead of ! comments.

	* sysdeps/alpha/memchr.c: Remove extra shift and OR of CHARMASK.
	* sysdeps/alpha/strchr.c: Likewise.

	* sysdeps/mach/hurd/sysd-stdio.c: Use mach_msg_type_number_t in
        place of unsigned int.

	* sysdeps/posix/tempname.c (__stdio_gen_tempname): Cast FD to long
        int before casting to pointer.

	* stdio/printf_fp.c: Include <string.h>.

	* sysdeps/alpha/setjmp_aux.c: Use ENV[0].__jmpbuf[0].

	* sysdeps/mach/alpha/sysdep.h (ENTRY): New macro.

	* hurd/hurdioctl.c (fioctl): Pass a mach_msg_type_number_t* to
        __io_readable.

	* hurd/hurd-raise.c: Use `long int' for sigcode values.

	* hurd/hurdfault.c: Use `long int' for sigcode values.
	* hurd/hurdfault.h: Likewise.

	* hurd/hurd/signal.h (struct hurd_signal_preempt): Handler takes
        new SIGERROR arg.
	* hurd/preempt-sig.c: Likewise.
	* hurd/hurdsig.c (_hurd_internal_post_signal): Pass SIGERROR to
        PREEMPT.

	* hurd/hurdlookup.c: Use mach_msg_type_number_t and natural_t in
        place of unsigned int and int.

	* hurd/hurd/id.h: Use mach_msg_type_number_t in place of unsigned int.

	* hurd/catch-exc.c: Use `long int' for sigcode values.
	* sysdeps/mach/hurd/i386/trampoline.c: Likewise.
	* hurd/preempt-sig.c: Likewise.

	* configure.in (machine): Don't recognize r[34]00.  
	Convert mips64* to mips/mips64/& and mips* to mips/&.
	* sysdeps/mips/mipsel/bytesex.h: New file.
	* sysdeps/mips/r4000: Directory renamed to sysdeps/mips/mips64.

	* sysdeps/mach/alpha/sysdep.h (START_MACHDEP): Add missing
        backslashes.
	(CALL_WITH_SP): Cast FN to long int.

	* sysdeps/mach/alpha/thread_state.h (struct machine_thread_all_state):
        New member `exc'.

	* hurd/fd-read.c: Include <string.h>.  Use mach_msg_type_number_t
	in place of mach_msg_type_size_t.

	* hurd/hurdfault.c: Use natural_t instead of int.

	* hurd/hurd/signal.h: Use `long int' for sigcode values.
	* hurd/hurdsig.c: Use mach_msg_type_number_t and natural_t in
	place of unsigned int and int.  Use `long int' for sigcode values.

	* hurd/vpprintf.c (pwrite): Cast &N to mach_msg_type_number_t *.

	* hurd/__fopenport.c: Include <string.h>.  Use
	mach_msg_type_number_t in place of unsigned int.

	* hurd/hurdauth.c: Include <string.h>.
	* hurd/hurdsock.c: Likewise.

	* sysdeps/mach/alpha/machine-lock.h: Remove ".set noreorder" et
	al; GCC already emits them.  Fix register constraints in asms.
	Set RTN in C, not asm.

	* hurd/hurdprio.c: Use mach_msg_type_number_t in place of unsigned
	int.

Thu Dec  8 04:00:11 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/alpha/__sigret.c: Remove ".set noreorder" et
        al; GCC already emits them.
	* sysdeps/mach/hurd/alpha/trampoline.c: Likewise.

	* sysdeps/mach/thread_state.h: Use mach_msg_type_number_t and
        natural_t in place of unsigned int and int.

	* sysdeps/mach/sysdep.h (ENTRY): Don't #error if undefined.

	* sysdeps/mach/syscall.h: New file.

	* sysdeps/mach/Makefile: Remove debugging printout.

	* sysdeps/mach/hurd/configure.in: Converted to an autoconf script
	from sysdeps/mach/hurd/configure, to work better with autoconf
	version 2.
	* sysdeps/mach/configure.in: Likewise, from sysdeps/mach/configure.

	* hurd/hurdmsg.c: Use mach_msg_type_number_t in place of unsigned
        int.

	* sysdeps/mach/alpha/sysdep.h: Rename variable `sp' to avoid
        conflict with #define in <mach/alpha/asm.h>.

	* sysdeps/mach/hurd/alpha/__sigret.c: Remove unused variable.

	* sysdeps/mach/hurd/__ioctl.c: Pass arg to
        __mig_dealloc_reply_port.

	* configure.in: Converted to Autoconf version 2.
	* sysdeps/generic/configure.in: Likewise.
	* sysdeps/unix/common/configure.in: Likewise.
	* sysdeps/unix/configure.in: New file, converted to a
	part-autoconf script from sysdeps/unix/configure, to work better
	with autoconf version 2.
	* aclocal.m4: Converted to Autoconf version 2.
	(AC_CHECK_SYMBOL): New macro.
	* config.make.in: New file.
	* config-name.in: New file.
	* Makefile (distribute): Rename install.sh to install-sh.
	Add config.make.in, config-name.in, Makefile.in.
	(distclean-1): Remove config-name.h and config.cache.
	* Makefile.in: New file.
	* Makeconfig (+gnu-stabs, gnu-as): Match -DHAVE_GNU_{AS,LD}=1 too.

Wed Dec  7 14:05:12 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/mips/cacheflush.c: New file.
	* sysdeps/mach/mips/Makefile: New file.
	* sysdeps/mach/mips/Dist: New file.

	* hurd/hurdmalloc.c (vm_allocate, vm_page_size): #define these to
        __ names at top.

	* posix/glob/Makefile.in (realclean): Remove config.status.

	* posix/glob/Makefile.in (DEFS): New variable, set from @DEFS@.
	(CPPFLAGS): Remove @DEFS@ from here.
	(.c.o): Use $(DEFS).

	* setjmp/siglongjmp.c: First arg is const.

Tue Dec  6 19:04:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/Makefile.in (CPPFLAGS): Include @DEFS@.

Mon Dec  5 12:05:10 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/configure.in: Add AC_PROG_CC.

	* sysdeps/mach/hurd/alpha/longjmp-ts.c: Use ENV[0].__jmpbuf[0].
	* sysdeps/mach/hurd/mips/longjmp-ts.c: Likewise.
	* sysdeps/mach/hurd/i386/longjmp-ts.c: Likewise.

	* Version 1.09.2.

	* sysdeps/mach/hurd/__select.c: Don't make TO const.

Sun Dec  4 12:06:36 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/configure (config_vars): Add missing backslash
        before a $.

	Revamp the `setjmp' interface to be cleaner: only one type
	`jmp_buf'/`sigjmp_buf', and only one `longjmp' function (with
	aliases `_longjmp', `siglongjmp').  Internal setjmp interface is
	now __sigsetjmp, which takes SAVEMASK flag and optionally saves
	the signal mask.  Add extern entry points `setjmp' and `_setjmp'
	for BSD compatiblity; they tail-call __sigsetjmp.
	* setjmp/setjmp.h: Include <sigset.h> for __sigset_t, not
        <signal.h>
	(jmp_buf): Define unconditionally with old `sigjmp_buf' defn.
	(__sigjmp_save): Declare to return int.
	(__setjmp): Remove declaration; this function no longer exists.
	(__sigsetjmp): Declare it; this is the new internal function.
	(setjmp): Define to call __sigsetjmp, second arg depending on
	__FAVOR_BSD.
	[__OPTIMIZE__] (longjmp): Remove #define.
	[__USE_BSD] (_longjmp): Declare it, another name for `longjmp'.
	[__USE_BSD] (_setjmp): Define macro to do __sigsetjmp (ENV, 0).	
	[__FAVOR_BSD]: Remove all these defns.
	[__USE_POSIX] (sigjmp_buf): Define as another name for `jmp_buf'.
	[__USE_POSIX] (sigsetjmp): Define to call __sigsetjmp.
	* setjmp/sigjmp.c (__sigjmp_save): Return an int, always zero, not
        void.
	* setjmp/Makefile (routines): Remove _setjmp, add bsd-setjmp and
        bsd-_setjmp.
	* setjmp/longjmp.c: Define as a real funciton, which restores
        signal mask and calls __longjmp.
	* setjmp/siglongjmp.c: Make this an alias to longjmp.
	* setjmp/_longjmp.c: Alias to longjmp, not siglongjmp.
	* sysdeps/stub/setjmp.c: Implement __sigsetjmp instead of
        __setjmp; call __sigjmp_save.
	* sysdeps/sparc/setjmp.S: Likewise.
	* sysdeps/m68k/setjmp.c: Likewise.
	* sysdeps/i386/setjmp.c: Likewise.
	* sysdeps/vax/setjmp.c: Likewise.
	* sysdeps/mips/setjmp.S: Implement __sigsetjmp instead of
	__setjmp; call __sigsetjmp_aux instead of __setjmp_aux.  Pass SP
	and FP as 3rd and 4th args, not 2nd and 3rd.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/mips/setjmp_aux.c: Implement __sigsetjmp_aux instead of
        __setjmp_aux; call __sigjmp_save.
	* sysdeps/alpha/setjmp_aux.c: Likewise.
	* sysdeps/mips/bsd-setjmp.S, sysdeps/mips/bsd-_setjmp.S: New files.
	* sysdeps/alpha/bsd-setjmp.S, sysdeps/alpha/bsd-_setjmp.S: New files.
	* sysdeps/vax/bsd-setjmp.S, sysdeps/vax/bsd-_setjmp.S: New files.
	* sysdeps/sparc/bsd-setjmp.S, sysdeps/sparc/bsd-_setjmp.S: New files.
	* sysdeps/i386/bsd-setjmp.S, sysdeps/i386/bsd-_setjmp.S: New files.
	* sysdeps/m68k/bsd-setjmp.S, sysdeps/m68k/bsd-_setjmp.S: New files.
	* sysdeps/stub/bsd-setjmp.c, sysdeps/stub/bsd-_setjmp.c: New files.
	* setjmp/_setjmp.c: File removed.
	* sysdeps/alpha/__longjmp.c: Take arg of type __jmp_buf, not
        jmp_buf.
	* sysdeps/vax/__longjmp.c: Likewise.
	* sysdeps/stub/__longjmp.c: Likewise.
	* sysdeps/i386/__longjmp.c: Likewise.
	* sysdeps/m68k/__longjmp.c: Likewise.

Sat Dec  3 09:00:17 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/alpha/__sigret.c: Set up frame for `rei' to
	restore on user stack, aligned to an 8-word boundary and with a PS
	value that restores user's stack alignment.

Fri Dec  2 19:31:24 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/readdir.c: Search one char more than D_NAMLEN(DP)
	for the null terminator.  Always set D->d_namlen, using
	D_NAMLEN(DP) if no null is found.

	* sysdeps/unix/sysv/sco3.2.4/__sigact.S: Fix typo `.global' to
        `.globl'.  Silly me, I used a vowel in a Unix program.

Mon Nov 28 16:11:39 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* io/fts.c (ALIGN, ALIGNBYTES): New macros, defined if not already
        defined.

Tue Nov 22 06:39:49 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/osf1/dirstream.h: File removed.

	* sysdeps/stub/sigcontext.h (struct sigcontext): Use `__sigset_t'
        instead of `sigset_t' for `sc_mask'.
	* sysdeps/mach/hurd/i386/sigcontext.h: Likewise.
	* sysdeps/mach/hurd/alpha/sigcontext.h: Likewise.
	* sysdeps/mach/hurd/mips/sigcontext.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/mips/sigcontext.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/sigcontext.h: Likewise.
	* sysdeps/unix/bsd/sun/sparc/sigcontext.h: Likewise.

	* hurd/hurdsig.c (_hurd_internal_post_signal: case handle): Call
	abort_thread always, first thing after thread_suspend.

Mon Nov 21 13:18:07 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__fcntl.c: Don't make this whole function a
        critical section.

	* sysdeps/generic/strpbrk.c: Don't call strchr; do it by hand for
        efficiency.

Wed Nov 16 12:47:22 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/m68k/sysdep.S [__motorola__]: Swap operands in
        cmp.l.

	* hurd/msgportdemux.c (_hurd_msgport_receive): Call
	_hurd_self_sigstate to get sigstate cached before running any
	signal thread code.

	* sysdeps/mach/hurd/__fork.c: Pass _hurd_msgport_thread to
	__thread_get_state, not _hurd_sigthread.  Don't do
	__thread_get_state on THREAD_SELF--the kernel does not allow it.

	* hurd/hurdsig.c (_hurd_internal_post_signal): In stopping orphan
	test, take sigmask of SIGNO, don't & its value with a mask.  In
	blocked signal test, be careful not to pass SIGNO=0 to __sigismember.

Tue Nov 15 01:39:36 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (stub-$(subdir)): Save absolute name of
	$(..)sysdeps/stub before cd'ing, transform gleaned file names to
	refer to saved name.

	* sysdeps/mach/hurd/socketpair.c: Include <fcntl.h>.

	* time/test_time.args: Add CST as a test case.

	* sysdeps/mach/hurd/socketpair.c: Rewritten (copying __pipe.c).

	* sysdeps/unix/bsd/dirstream.h [__USE_BSD] (dirfd): New macro.

	* posix/unistd.h: Declare fchdir.

	* io/fts.c (MAXPATHLEN): Define if not defined.

	* io/fts.c, io/fts.h: New files, from 4.4 BSD code by Keith Bostic.
	* io/Makefile (routines): Add fts.
	(headers): Add fts.h.

	Mostly ported the Hurd to the DEC Alpha.
	* sysdeps/mach/alpha/machine-sp.h: New file.
	* sysdeps/mach/alpha/thread_state.h: New file.
	* sysdeps/mach/alpha/sysdep.h: New file.
	* sysdeps/mach/alpha/machine-lock.h: New file.
	* sysdeps/mach/hurd/alpha/sigcontext.h: New file.
	* sysdeps/mach/hurd/alpha/longjmp-ts.c: New file.
	* sysdeps/mach/hurd/alpha/trampoline.c: New file.
	* sysdeps/mach/hurd/alpha/exc2signal.c: New file.
	* sysdeps/mach/hurd/alpha/__sigret.c: New file.

	* sysdeps/mach/hurd/Makefile (errlist.c, errnos.h): Make the
        output unwritable.
	* sysdeps/alpha/Makefile (divrem rule): Make the output
        unwritable, use mv -f.
	* sysdeps/sparc/Makefile (divrem rule): Likewise.

	* configure.in (sysnames): Put another loop on $mach inside $base
	loop but outside $vendor loop.  This should catch .../cpu/vendor.

Mon Nov 14 22:52:03 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/start.c: Add missing #endif.

Sun Nov 13 05:04:18 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__select.c: At end of receiving loop, clear TO
        instead of TIMEOUT.

	* malloc/mcheck-init.c (turn_on_mcheck): Add gratuitous self
        reference to silence compiler warning.
	(_hurd_preinit_hook): Add the function to this set too.

	* time/__tzset.c (__tzset): Give tz_rules coherent default when TZ
        value is short or malformed.

	* mach/devstream.c: Echo input after reading it.

	* Make-dist (generated): Mutate to add .S and .s variations for .c
        files.

Fri Nov 11 11:43:26 1994  Michael I Bushnell  <mib@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/i386/__sigret.c (__sigreturn): Don't actually
	abort here; at least let the user continue with bogus FP; that's
	better than a random crash until it's fixed.

Thu Nov 10 04:56:28 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/sun/sunos4/sys/mman.h (msync): Use __caddr_t
        instead of caddr_t in decl.

	* sysdeps/mach/start.c (START_ARGS): Define to void if undefined.
	[START_MACHDEP]: Reference this if defined.
	[START_MACHDEP] (_start): #define to _start0.
	(_start): Take args START_ARGS.
	* sysdeps/mach/hurd/start.c: Likewise.

Wed Nov  9 08:02:59 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/Makefile (sig): Remove longjmp-ctx (it is never called).

	* sysdeps/mach/hurd/__fork.c: Do thread_get_state on parent's
	threads to modify and thread_set_state new child threads.

Mon Nov  7 00:38:45 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob/configure.in: Converted to Autoconf v2.
	* posix/glob.c: Test HAVE_DIRENT_H, HAVE_SYS_DIR_H, HAVE_NDIR_H
	instead of DIRENT, SYSDIR, NDIR.
	* posix/glob/Makefile.in (CC): New variable, set from @CC@.
	(CPPFLAGS): Set from @CPPFLAGS@, not @DEFS@.

	* sysdeps/unix/__fork.S: Use decrement and AND instead of test and
        branch.
	* sysdeps/unix/sparc/__fork.S: Likewise.
	* sysdeps/unix/sparc/__vfork.S: Likewise.
	* sysdeps/unix/bsd/sun/m68k/__vfork.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/__vfork.S: Likewise.
	* sysdeps/unix/i386/__fork.S: File removed.

Sun Nov  6 19:26:28 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.09.

Fri Nov  4 16:52:05 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.14.

	* manual/Makefile (stamp-summary): Depend on $(chapters-incl) too.

Thu Nov  3 18:33:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/sigset.h (__sigemptyset): Cast to __sigset_t.
	(__sigfillset): Likewise.  Use ~(__sigset_t)0 in place of -1.
	(__SIGSETFN): Don't try to be clever.  Test bounds of SIG with <
	and >.

	* sysdeps/mach/hurd/__fork.c: Unlock signal state earlier, just
        after unlocking _hurd_ports locks.

	* sysdeps/unix/bsd/osf1/direct.h: File removed.
	* sysdeps/unix/bsd/direct.h (struct direct): Use `unsigned int'
	instead of `unsigned long int' for `d_fileno' member.

	* Makerules (common-mostlyclean): Remove $(tests:=.out) too.

	* assert/assert-perr.c (__assert_perror_fail): Add missing comma.

	* sysdeps/unix/ioctls-tmpl.c [__osf__ && __alpha__] (FIOPIPESTAT,
	SIOCSRREQR, SIOCSRREQW, SRVC_REQUEST): #undef these.

Wed Nov  2 23:00:19 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/setegid.c: Pass poly and count args for
	other_handles in correct order in call to auth_makeauth.
	* sysdeps/mach/hurd/__setregid.c: Likewise.
	* sysdeps/mach/hurd/__setreuid.c: Likewise.

	* Makerules (compile.S): Add -DASSEMBLER.
	* sysdeps/mach/sysdep.h [ASSEMBLER]: Don't include
        <mach/mig_support.h> if this is defined.

Wed Nov  2 22:39:55 1994  Michael I Bushnell  <mib@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/seteuid.c: Pass poly and count args for
	other_handles in correct order in call to auth_makeauth.

Wed Nov  2 15:03:51 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/internals.c (fillbuf): Make sure returned char doesn't get
        sign extended.

Tue Nov  1 01:25:28 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/common/Implies: File removed.
	* sysdeps/unix/bsd/Implies: Add unix/inet.

	* assert/assert-perror.c: Renamed to assert-perr.c.
	* assert/Makefile (routines): Rename assert-perror to assert-perr.

	* Version 1.08.13.

	* mach/Makefile (generated): Add __%.c for $(mach-shortcuts) too.

	* dirent/Makefile (tests): Add tst-seekdir.
	* dirent/tst-seekdir.c (main): New file.
	* sysdeps/unix/bsd/seekdir.c: New file.
	* sysdeps/unix/bsd/telldir.c: New file.
	* sysdeps/unix/bsd/dirstream.h (DIR): New member `__pos'.
	* sysdeps/unix/bsd/readdir.c: Update DIRP->__pos in getdirentries
        call.
	* sysdeps/unix/opendir.c: Use calloc in place of malloc, to zero
        fill new DIRs.

	* sysdeps/standalone/i386/force_cpu386/force_cpu386.ld: Renamed to
	target.ld.
	* sysdeps/standalone/i386/force_cpu386/Makefile: Install it from
	that name (still into $(libdir)/force_cpu386.ld).

	* mach/Makefile (headers, user-interfaces, server-interfaces):
        Don't add default_pager stuff.

Mon Oct 31 07:00:40 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/sun/sunos4/termbits.h (TCSASOFT): Macro
        removed.

	* malloc/malloc.h: Change #ifdef __STDC__ to #if defined
        (__STDC__) && __STDC__.

Fri Oct 28 00:09:24 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/sysdep.h: Include <mach/mig_support.h> for decls.
	(FATAL_PREPARE): Pass arg to __mig_dealloc_reply_port.

	* assert/Makefile (routines): Add assert-perror.

	* Makerules (stubs): cd into $(objdir) and use local file names,
	making the cmd shorter.

	* sysdeps/mach/hurd/getprio.c (getonepriority): Call
        proc_getprocinfo with proc port.

	* sysdeps/mach/hurd/errnos.awk: Grok "@comment errno %d" in
        errno.texi, instead of assigning sequentially.
	* sysdeps/mach/hurd/errlist.awk: Likewise.

	* stdio/fwrite.c: Reset BUFFER_SPACE after fflush in fill_buffer
        case.

	* sysdeps/generic/sigset.h (__SIGSETFN): When losing, punt to
        `raise (-1)'.  Old method looped.

	* hurd/hurd/resource.h: Include <hurd/process.h>.

Thu Oct 27 15:00:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/standalone/standalone.h: Fixed typo.

Wed Oct 26 00:21:16 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/i386/vfork.S: New file.

	* sysdeps/generic/strchr.c: Increment CP properly in check for 5th
        char of quadword hit.

	* sysdeps/mach/hurd/getprio.c (getonepriority): Always set ONERR.

Tue Oct 25 03:53:26 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd/resource.h: Include <errno.h>.

	* stdio/ftell.c: If STREAM->__pushed_back, calculate from
        pushback_bufp instead of bufp.

	* Makefile (format-me): New canned sequence; runs makeinfo
        --no-headers.
	(INSTALL): Use it.
	(NOTES): New file rule.

	* manual/intro.texi (Feature Test Macros): Node moved off to
        creature.texi.
	* manual/creature.texi: New file, broken out of intro.texi.

	* manual/Makefile (indices): New variable; include ky.
	(realclean): Use $(indices) to remove all index and sorted index
	files.

	* sysdeps/mach/hurd/fcntlbits.h (O_ASYNC, O_FSYNC, O_SYNC):
        Protect with [__USE_BSD].

Mon Oct 24 00:16:59 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/bsd/utime.c: Initialize tv_usec fields.
	Use __gettimeofday instead of time.

	* sunrpc/pmap_rmt.c: Include <sys/param.h> before <net/if.h>.
	Undef _POSIX_SOURCE before that.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.

	* misc/sys/cdefs.h: Undef __P first.

	* Version 1.08.12.

	* sysdeps/mach/hurd/getprio.c: Rewritten.
	* sysdeps/mach/hurd/setprio.c: New file.
	* hurd/hurdprio.c: New file.
	* hurd/Makefile (routines): Add hurdprio.
	* hurd/hurd/resource.h (_hurd_priority_which_map): Declare it.
	(NICE_TO_MACH_PRIORITY, MACH_PRIORITY_TO_NICE): New macros.

Sun Oct 23 19:39:18 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makerules (sources): Fix typo in last change.

Fri Oct 21 13:15:39 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/termbits.h (ECHOKE): Remove gratuitous leading
        space before #define.

	* Makerules (sources): Filter out $(elided-routines).

	* sysdeps/sparc/divrem.m4 (entry point): For OP=rem, set SIGN from
        dividend only, ignoring divisor.
	(Lgot_result): Test SIGN here for OP=rem too (as originally).

Wed Oct 19 02:40:02 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdsig.c: Use assert_perror.

	* assert/assert-perror.c (__assert_perror_fail): New file.
	* assert/assert.h (assert_perror): New macro.
 
	* Version 1.08.11.

	* hurd/hurdsig.c (abort_rpcs): Actually return a port instead of
        boolean, as the type says.

	* hurd/hurdsig.c (abort_all_rpcs): If waiting for reply from
	interrupted RPC returns error, print debugging msg with error
	test, don't assert.

Mon Oct 17 00:06:03 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdlib/strtol.c: Deansideclized.
	* sysdeps/generic/strcspn.c: Deansideclized.
	* sysdeps/generic/putenv.c: Deansideclized, added portability
        cruft.

Fri Oct 14 14:00:11 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/sysv/sysv4/solaris2/utsnamelen.h:
	Moved to sysdeps/unix/sysv/sysv4.

Thu Oct 13 22:06:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/common/glue-ctype.c [HAVE__LOCP]: Move this defn to
        first.  Include sys/types.h.

	* sysdeps/unix/bsd/readdir.c: Include direct.h.

	* socket/sys/socket.h (__SOCKADDR_ARG): Always use non-GCC defn,
        for now.
	* posix/sys/wait.h (__WAIT_STATUS): Likewise.

Tue Oct 11 00:42:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.10.

Mon Oct 10 00:33:47 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* malloc/malloc.h [_MALLOC_INTERNAL] (CHAR_BIT): Don't define if
        already defined.

	* stdio/__vfscanf.c: Grok %q modifier like %ll.

	* mach/__msgserver.c: Increase default MAX_SIZE to two pages.

	* misc/init-misc.c: Cast string constant to non-const type.

	* sysdeps/i386/ffs.c: Use %1 again instead of listing TMP as an
	input with constraint "1".  This avoids a warning that TMP may be
	used before set.

Sun Oct  9 22:41:20 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdsig.c (abort_all_rpcs): Declare SS.

Sun Oct 09 01:19:38 1994  Jim Meyering  (meyering@comco.com)

	* posix/fnmatch.c: Remove CONFIG_BROKETS conditional.

Fri Oct  7 15:28:07 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/__vfscanf.c: Properly grok %a modifier.

	* hurd/hurdsig.c (abort_rpcs): Return the reply port or null,
        instead of boolean.
	(abort_all_rpcs): Record the returns from abort_rpcs and wait for
	a message on each reply port.  Don't bother locking _hurd_siglock.

Thu Oct  6 18:57:44 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurd.h (_hurd_socket_server): Take new arg DEAD; explain
        its use in comment.
	* hurd/hurdsock.c (_hurd_socket_server): Take new arg DEAD; if
	nonzero, clear any old cached port and always do a fresh lookup.
	* sysdeps/mach/hurd/socket.c: Pass new arg to _hurd_socket_server,
        cope with dead server on socket_create.
	* sysdeps/mach/hurd/__pipe.c: Likewise.

Mon Oct  3 02:09:43 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/utsnamelen.h (_UTSNAME_LENGTH): Increase to
        1024.

Sun Oct  2 18:35:16 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/glob.h (__P): Change arg name to `protos', for congruence
        with 4.4 BSD.
	* posix/fnmatch.h (__P): Likewise.

Sat Oct  1 04:25:35 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* misc/Makefile (routines): Add daemon.

Fri Sep 30 16:49:09 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* misc/daemon.c: New file, incorporated from BSD 4.4-Lite.

	* sysdeps/mach/hurd/__setsid.c: Call _hurd_setcttyid with
        MACH_PORT_NULL after proc_setsid.

	* hurd/hurdioctl.c (_hurd_setcttyid): Don't do mod_refs if port is
        null.

	Always use fds' `port' cell for the generic port.
	For ctty fds, use the `ctty' cell for the ctty-special port.
	* hurd/dtable.c (get_dtable_port): Use port, never ctty.
	(fork_child_dtable): Reset D->ctty instead of D->port.
	(ctty_new_pgrp): Likewise. 
	* sysdeps/mach/hurd/__ioctl.c: Use ctty port for RPC if set and
        !NOCTTY.
	* hurd/port2fd.c (_hurd_port2fd): Install normal port in D->port
	cell, and ctty-special port in the D->ctty cell, not the reverse.
	* hurd/hurdioctl.c (tiocsctty): Don't assume MACH_PORT_NULL is
        zero.
	* hurd/hurdexec.c (_hurd_exec): Always pass fds' normal port,
        never its ctty port.
	* hurd/fd-write.c (_hurd_fd_write): Use ctty port for RPC if set
        and !NOCTTY.
	* hurd/fd-read.c (_hurd_fd_read): Use ctty port for RPC if set.

Thu Sep 29 18:28:01 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* mach/mig_syms.c (mig_put_reply_port): Add symbol alias to __
        name.

Thu Sep 29 12:23:07 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sysdep.h (ENTRY): Use
	poundfnc instead of \#function, to satisfy gcc-2.6.0 and higher.
	(cat, poundfnc): Define macros to pull it off.

	* sysdeps/unix/sysv/sysd-stdio.c: Include
	sysdeps/generic/sysd-stdio.h,
	not looking in sysdeps/posix.

Thu Sep 29 05:38:14 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/common/configure.in (ctype check): In test prog,
	just reference $ctype; we don't care what type it is.

	* sysdeps/unix/bsd/bsd4.4/direct.h: New file.
	(HAVE_D_TYPE): Define this macro.
	* dirent/dirent.h (struct dirent): New member `d_type'; shorten
        `d_namlen' to a byte.
	* sysdeps/unix/bsd/readdir.c [! HAVE_D_TYPE]: Shuffle d_namlen and
        clear d_type.

Wed Sep 28 17:23:26 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* posix/sys/utsname.h [__USE_SVID] (SYS_NMLN): New macro.

	* dirent/scandir.c: Free storage on error from readdir.

Mon Sep 26 00:55:34 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.9.

	* MakeTAGS (all-dist): Prepend the appropriate sysdep dir names.

	* hurd/hurdsig.c (_hurd_internal_post_signal: sigwakeup): Create a
        send right.

Sat Sep 24 13:44:51 1994  Jim Meyering  (meyering@comco.com)

	* sysdeps/generic/memcmp.c [CMP_LT_OR_GT]: New macro.
	(memcmp): Use it in place of each of ten 5-line #ifdef blocks.

Fri Sep 23 16:55:54 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/sigsuspend.c: Include <hurd/msg.h>.

	* sysdeps/mach/hurd/sigsuspend.c: Add missing & in __mach_msg
        call.

Thu Sep 15 14:22:56 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/standalone/i386/force_cpu386/Dist: New file.
	* sysdeps/standalone/m68k/m68020/mvme136/Dist: New file.
	* sysdeps/standalone/i960/Dist: New file.
	* sysdeps/standalone/m68k/m68020/Dist: New file.
	* sysdeps/standalone/i386/force_cpu386/force_cpu386.ld: New file.
	* sysdeps/standalone/m68k/m68020/mvme136/mvme136.ld: New file.
	* sysdeps/standalone/i960/i960ca.h: New file.
	* sysdeps/standalone/m68k/m68020/m68020.h: New file.

	* sysdeps/unix/common/configure.in: Use AC_COMPILE_CHECK instead
        of AC_HAVE_FUNCS.

	* sysdeps/generic/make_siglist.c (sys_siglist): Define as macro to
        my_siglist.

	* sysdeps/mach/i386/thread_state.h: Include from mach/machine, not
        mach/i386.
	* sysdeps/mach/hurd/i386/sigcontext.h: Likewise.

	* mach/mach/mig_support.h (__mig_put_reply_port): Declare.
	(__mig_dealloc_reply_port): Take arg.
	* sysdeps/mach/hurd/mig-reply.c (__mig_put_reply_port): New
        function.
	(__mig_dealloc_reply_port): Take arg, ignore it.

Wed Sep 14 18:16:07 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/Makefile (libc-name): Set to crt.
	[!subdir]: Install libc-ldscript as libc.a.
	* sysdeps/mach/hurd/Dist: Add libc-ldscript.

Tue Sep 13 19:57:09 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/sync.c: Don't be synchronous: pass WAIT=0 to
        file_syncfs.

	* Makerules (libc-name): New variable.
	(install, libc installation rule): Use $(libc-name) in place of `c'.

Sun Sep 11 23:28:20 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__readlink.c: Only decrement LEN to remove the
	null terminator when LEN is already large enough to include it.

	* hurd/hurdlookup.c (__hurd_file_name_lookup_retry): Add break
        after FS_RETRY_MAGICAL case.

Fri Sep  9 04:03:59 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* stdio/vfprintf.c: Grok q modifier like ll.

	* Make-dist (sysdep-Subdir-files, subdirs): Set these early on,
        before doing distinfo.
	[parent] (+distinfo): Set inhibit_interface_rules=t in sub-make.

Thu Sep  8 17:18:14 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/generic/morecore.c (__default_morecore) [! __STDC__]:
	Declare arg as `int' instead of `ptrdiff_t'.

Tue Sep  6 19:06:00 1994  Roland McGrath  <roland@geech.gnu.ai.mit.edu>

	* posix/glob.c (prefix_array, glob): Avoid const on initialized
	variables.  Some compiler generates bad code.

Mon Sep  5 13:24:26 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* malloc/Makefile (malloc/%: ../sysdeps/generic/%): New rule, to get
        morecore.c.

	* malloc/malloc.h (size_t, ptrdiff_t): Never define these as macros.
	(__malloc_size_t): Define this instead.
	Change all uses of size_t to __malloc_size_t.
	* malloc/valloc.c: Replace all uses of size_t with __malloc_size_t.
	* malloc/memalign.c: Likewise.
	* malloc/mcheck.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/free.c: Likewise.
	* malloc/realloc.c: Likewise.
	* malloc/calloc.c: Likewise.

	* MakeTAGS (TAGS): Define first so as to be default goal.
	(sysdep_dirs): Set this by running find, if it is not already set.
	(all-dirs): Include that value.
	(all-dist): Filter output of cat, not args to it.
	* Makerules (TAGS): Depend on distinfo, not distfile.

	* resolv/getnetnamadr.c (getnetbyname): Arg is always const,
        regardless of [sun].

Sun Sep  4 00:04:55 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.8.

	* Makerules (distinfo-vars): Double $s in final emitted sources defn.

	* inet/Makefile (headers): Add netdb.h.
	* resolv/Makefile (headers): Remove netdb.h.
	* resolv/netdb.h: Moved to inet.
	* inet/netdb.h: Incorporated from BSD 4.4-Lite.
	Add back h_errno declaration.

	* hurd/Makefile (faultexc.c): Change this to a pattern rule to
        build both faultexc.[ch].
	(hurdfault.o): Depend on faultexc.h and faultexc.c to get them built.

	* sysdeps/mach/hurd/i386/trampoline.c
        (_hurdsig_rcv_interrupted_p): Make PC volatile.
	(_hurd_setup_sighandler): Cast SS->context to int before comparing to
	_hurdsig_fault_sigcode.

	* sysdeps/mach/thread_state.h (MACHINE_THREAD_STATE_SET_{SP,PC}):
        Cast args to unsigned long int.

	* sysdeps/mach/hurd/i386/trampoline.c: Use _hurdsig_catch_fault.

	* Make-dist (subdirs): Use sed to remove comments from Subdirs files.
	* MakeTAGS (subdirs): Likewise.

	* sysdeps/mach/i386/thread_state.h: Include
        <mach/i386/thread_status.h> first thing.

	* hurd/Makefile (sig): Add faultexc.
	($(objpfx)faultexc.c): New target.
	(generated): Append faultexc.c.

	* hurd/Makefile (sig): Add hurdfault; remove init-fault.
	(distribute): Add hurdfault.h.
	* hurd/hurdfault.h: New file.
	* hurd/hurdfault.c: New file.
	* hurd/hurdsig.c (interrupted_reply_port_location): Use
	_hurdsig_catch_fault and _hurdsig_end_catch_fault.
	(_hurdsig_getenv): Likewise.
	* sysdeps/mach/hurd/i386/trampoline.c: Likewise.

	* hurd/catch-exc.c: Return EPERM if TASK is not right.

	* hurd/hurdsig.c (_hurd_sigthread_fault_env): Variable moved to
        hurdfault.c.
	(_hurdsig_fault_init): Function moved to hurdfault.c.

Sat Sep  3 12:22:53 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/thread_state.h (MACHINE_THREAD_STATE_SET_PC,
        MACHINE_THREAD_STATE_SET_SP): New macros.
	* mach/setup-thread.c: Use MACHINE_THREAD_STATE_SET_PC.
	* sysdeps/mach/hurd/__fork.c: Likewise.

	* string/test-ffs.c (main: try): Actually call ffs in the test.

Fri Sep  2 21:20:17 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/__sigret.c: Restore FPU state.  Code from
        kkojima.

	* sysdeps/mach/hurd/__mknod.c: Fixed copying of the translator
	name into buffer with major and minor numbers, and setting of LEN.

	* sysdeps/unix/configure (unix_syscall): In sed cmd, do = first to
	avoid clobbering produced assignments.

Thu Sep  1 03:25:17 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.7.

	* sysdeps/mach/hurd/connect.c (connect): Fix accidental renaming
        of sun_path to sun_file_name.

	* bare/Makefile (routines, elided-routines): Set these both to
        $(bare-routines).
	(distribute): Don't set this.

	* Makerules (distinfo-vars): Fix cmd to echo `sources' defn.

	* sysdeps/unix/configure: Handle dirs other than common.  Check
	for [gs]etdomainname.
	* misc/Makefile (routines): Add getdomain, setdomain.
	* sysdeps/unix/bsd/bsd4.4/setdomain.S: New file.
	* sysdeps/unix/bsd/bsd4.4/getdomain.S: New file.
	* sysdeps/stub/setdomain.c: New file.
	* sysdeps/stub/getdomain.c: New file.

Wed Aug 31 01:15:26 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdsig.c (_hurd_internal_post_signal: sigwakeup): Take no
	args; use parent SS variable.  Changed all calls.

	* hurd/hurd/signal.h (struct hurd_sigstate): Make `suspended' a
        port; remove `arrived'.
	* sysdeps/mach/hurd/sigsuspend.c (sigsuspend): Rewritten to set
	SS->suspended port and wait for msg on it.  Check for and deliver
	pending signals properly.
	* hurd/hurdsig.c (_hurd_internal_post_signal: sigwakeup): If
	SS->suspended is set, send an empty message on it and clear it.

	* math/test-math.c (print_trig_stuff): New function, tests many
        math functions.
	(main): Call it at end.

	* string/Makefile (tests): Added test-ffs.
	* string/test-ffs.c: New file.

Tue Aug 30 20:33:49 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* misc/fstab.c (error): Return void.
	(fstabscan): Return int.

	* sysdeps/i386/ffs.c: Use & modifier in constraint for CNT.

	* misc/fstab.c (EFTYPE): If not defined by errno.h, define this to
        EINVAL.
	(fstabscan): Return void.

Tue Aug 30 11:00:01 1994  Michael I Bushnell  <mib@geech.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__access.c (__access): Use a send right,
	not a send-once right, in the new auth protocol.
	* hurd/__setauth.c (_hurd_setauth): Likewise.
	* hurd/hurdsig.c (reauth_proc): Likewise.
	* hurd/dtable.c (reauth_dtable): Likewise.
	* hurd/hurdlookup.c (__hurd_file_name_lookup_retry): Likewise.

Tue Aug 30 03:59:38 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* socket/sys/socket.h (__SOCKADDR_ARG) [GCC>=2.6]: Use a typedef
	with the transparent_union attribute.

	* sysdeps/mach/hurd/__access.c: Use new authentication protocol:
	for each port, create a fresh receive right and pass send-once
	rights in the auth calls, then destroy the port.

	* sysdeps/mach/mips/syscall.S: New file.

	* stdio/Makefile (mpn-headers, mpn-sysdep): Change asm.h to
	asm-syntax.h.

	* misc/Makefile (headers): Added fstab.h.
	(routines): Added fstab.
	* misc/fstab.c: New file.
	* misc/fstab.h: New file.

	* hurd/Makefile (routines): Changed hurdpath to hurdlookup.
	* hurd/hurdpath.c: Renamed to hurd/hurdlookup.c.
	* hurd/hurdlookup.c: Globally replace `pathtrans' with `lookup' and
        `path' with `file_name'.
	(__hurd_file_name_split): Don't bother skipping leading slashes.
	* hurd/hurd.h: Rename likewise in decls.
	* hurd/fchroot.c: Globally replace `pathtrans' with `lookup' and
        `path' with `file_name'.
	* hurd/hurdsig.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/hurdsyms.c: Likewise.
	* hurd/invoke-trans.c: Likewise.
	* sysdeps/mach/hurd/__access.c: Likewise.
	* sysdeps/mach/hurd/__chmod.c: Likewise.
	* sysdeps/mach/hurd/__chown.c: Likewise.
	* sysdeps/mach/hurd/__execve.c: Likewise.
	* sysdeps/mach/hurd/__link.c: Likewise.
	* sysdeps/mach/hurd/__lstat.c: Likewise.
	* sysdeps/mach/hurd/__mkdir.c: Likewise.
	* sysdeps/mach/hurd/__mknod.c: Likewise.
	* sysdeps/mach/hurd/__open.c: Likewise.
	* sysdeps/mach/hurd/__rmdir.c: Likewise.
	* sysdeps/mach/hurd/__readlink.c: Likewise.
	* sysdeps/mach/hurd/__stat.c: Likewise.
	* sysdeps/mach/hurd/__symlink.c: Likewise.
	* sysdeps/mach/hurd/__unlink.c: Likewise.
	* sysdeps/mach/hurd/__utimes.c: Likewise.
	* sysdeps/mach/hurd/bind.c: Likewise.
	* sysdeps/mach/hurd/chflags.c: Likewise.
	* sysdeps/mach/hurd/connect.c: Likewise.
	* sysdeps/mach/hurd/fchdir.c: Likewise.
	* sysdeps/mach/hurd/opendir.c: Likewise.
	* sysdeps/mach/hurd/sysd-stdio.c: Likewise.
	* sysdeps/mach/hurd/truncate.c: Likewise.
	* sysdeps/mach/hurd/rename.c: Likewise.
	* sysdeps/mach/hurd/getcwd.c: Likewise.
	* sysdeps/mach/hurd/chroot.c: Likewise.
	* sysdeps/mach/hurd/__chdir.c: Likewise.

	* hurd/__setauth.c (_hurd_setauth): Use new authentication
	protocol: for each port, create a fresh receive right and pass
	send-once rights in the auth calls, then destroy the port.
	* hurd/hurdsig.c (reauth_proc): Likewise.
	* hurd/dtable.c (reauth_dtable): Likewise.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): Don't handle
	FS_RETRY_NONE (it's gone).  Use new authentication protocol:
	create a fresh receive right and pass send-once rights in the auth
	calls, then destroy the port.

Mon Aug 29 13:17:39 1994  Michael I Bushnell  <mib@geech.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__symlink.c (__symlink): Use new
	file_set_translator protocol.
	* sysdeps/mach/hurd/bind.c (bind): Likewise.
	* sysdeps/mach/hurd/__mknod.c (__mknod): Likewise.

	* sysdeps/mach/hurd/__pipe.c (__pipe): Use PF_LOCAL instead
	of AF_FILE.

Fri Aug 26 01:21:09 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Makefile ($(objpfx)sysd-dirs): Use sed to remove # comments from
        Subdirs files.

	Support for miscellaneous standalone boards (no OS), contributed
	by Joel Sherrill (jsherril@redstone-emh2.army.mil), On-Line
	Applications Research Corporation.
	* sysdeps/standalone: New directory.
	* sysdeps/standalone/standalone.h: New file.
	* sysdeps/standalone/stdio_lim.h: New file.
	* sysdeps/stub/strtsupp.c: New file.
	* sysdeps/standalone/filedesc.h: New file.
	* sysdeps/posix/{setenv,putenv}.c: Moved to sysdeps/generic.
	* sysdeps/unix/getenv.c: Moved to sysdeps/generic.
	* sysdeps/unix/morecore.c: Moved to sysdeps/generic.
	* sysdeps/posix/sysd-stdio.c: Moved to sysdeps/generic.
	* sysdeps/stub/errnos.h: Add ENFILE and EMFILE.
	* sysdeps/stub/errlist.c (_sys_errlist): Likewise.
	* sysdeps/stub/console.c: New file.
	* sysdeps/standalone/__open.c: New file.
	* sysdeps/standalone/__read.c: New file.
	* sysdeps/standalone/__write.c: New file.
	* sysdeps/standalone/__close.c: New file.
	* sysdeps/stub/brdinit.c: New file.
	* sysdeps/unix/__sbrk.c: Moved to sysdeps/generic.
	* sysdeps/standalone/__brk.c: New file.
	* sysdeps/standalone/Subdirs: New file
	* bare/Makefile: New file (and new directory).
	* sysdeps/i960/ffs.c: New file.
	* sysdeps/i960/Implies: New file.
	* configure.in (os=none): base_os=standalone

Thu Aug 25 23:56:32 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/stub/__sigret.c: Arg is not const.
	* signal/sigret.c: Likewise.

Tue Aug 23 14:43:19 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* socket/sys/socket.h (PF_FILE, AF_FILE): Removed (use LOCAL instead).
	(PF_XTP, PF_COIP, PF_CNT, PF_RTIP, PF_IPX, PF_SIP, PF_PIP): New
	macros.
	(PF_MAX): Increased to 26.
	(pseudo_AF_XTP, AF_COIP, AF_CNT, pseudo_AF_RTIP, AF_IPX, AF_SIP,
	pseudo_AF_PIP): New macros.
	(MSG_EOR, MSG_TRUNC, MSG_CTRUNC, MSG_WAITALL, MSG_DONTWAIT,
	SO_REUSEPORT): New enum constants.

	* hurd/hurdsig.c (_hurd_internal_post_signal): If not preempted,
	set ACT before checking for SIGCONT.  When continuing and
	ACT==handle, don't resume SS->thread; record that it is suspended
	and in handler-setup code, don't suspend it again.

	* sysdeps/mach/hurd/sys/param.h: Include <errno.h> (BSD does).

	* sysdeps/mach/hurd/__fork.c: When unchaining old sigstates, check
        for SS being head of chain.

Mon Aug 22 00:29:02 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* time/{asia,australasia,europe,northamerica}: New data from ADO.

	* hurd/hurdsig.c (abort_rpcs): After destroying MSGING_PORT,
	change the return value register in STATE to EINTR.
	* sysdeps/mach/mips/thread_state.h (SYSRETURN): New macro.
	* sysdeps/mach/i386/thread_state.h (SYSRETURN): New macro.

	* hurd/hurdsig.c (default_sigaction): New function.
	(_hurd_thread_sigstate): Use it to initialize SS->actions.
	Initialize rest of new sigstate by hand, don't just bzero it.

	* hurd/hurdsig.c (_hurd_internal_post_signal): Initialize
        THREAD_STATE.set to zero.

	* posix/execl.c: Use ARG instead of PATH in va_start.

	* sysdeps/mach/hurd/__fork.c: In child fork, unchain stale
	structures from _hurd_sigstates first, and only free them after
	other processing is complete.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): For malformed number
	in magic "fd/N", return ENOENT instead of treating it as bogus
	magic.

	* sysdeps/mach/hurd/__chdir.c: After __path_lookup on arg, use
	__hurd_path_lookup of empty file name on resultant port to check
	that it's a directory.
	* sysdeps/mach/hurd/chroot.c: Likewise.
	* sysdeps/mach/hurd/fchdir.c: Use __hurd_path_lookup of empty file
	name on FD port to check that it's a directory and acquire a
	reference at the same time.
	* hurd/fchroot.c: Likewise.

	* hurd/hurdpid.c (init_pids): Add gratuitous self reference to
        silence compiler.

	* hurd/hurdpath.c: Include <hurd/term.h> for cttyid opening rpc.
	(__hurd_path_lookup_retry): Fixed typo.

	* sysdeps/mach/hurd/i386/__sigret.c: Push state onto the user's
        stack, switch to it, pop and return.

	Major rewrite of Hurd signal delivery.
	* hurd/hurd/signal.h (struct hurd_sigstate): New member `context'.
	* sysdeps/mach/hurd/i386/trampoline.c: Include "thread_state.h"
        instead of <mach/thread_status.h>.
	(struct mach_msg_trap_args): New type.
	(trampoline): Function removed.
	(_hurd_setup_sighandler): Take struct hurd_sigstate * arg instead
	of FLAGS and SIGALTSTACK args; take new flag arg RPC_WAIT; use
	struct machine_thread_all_state * for STATE arg.  New declared
	labels `trampoline', `rpc_wait_trampoline' mark asm code at end of
	function (after return).  Add another struct sigcontext * to
	STACKFRAME after the first one, for the arg to __sigreturn.  If
	SS->context is set, fill registers in SCP from that instead of
	STATE, and reset SS->INTR_PORT from it.  Use memcpy to copy from
	STATE into SCP; the structures are congruent.  If RPC_WAIT is set,
	set up to use rpc_wait_trampoline and frob args to mach_msg_trap
	syscall in progress so that it will retry the receive operation
	(but not resend!).
	{rpc_wait_trampoline, trampoline}: New trampoline code.
	(_hurd_rcv_interrupted_p): New function.
	* sysdeps/mach/hurd/mips/trampoline.c: Likewise.
	* hurd/hurdsig.c (write_corefile): Take new arg SIGERROR.  Use
	_hurdsig_getenv instead of getenv.  Use dir_mkfile to create an
	unlinked node for the core file; then use dir_link to name it,
	only if core_dump_task succeeded.
	(post_reply): New function.
	(abort_thread): New function.
	(interrupted_reply_port_location): New function.
	(interrupted_reply_port): Function removed (replaced by above).
	(abort_all_rpcs): Take struct machine_thread_all_state * for STATE.
	(abort_rpcs): Likewise.
	Return int, nonzero iff interrupt_operation RPC was done.  Take
	args for reply port and its port type; call abort_thread instead
	of doing thread_abort and thread_get_state.  Call
	_hurdsig_rcv_interrupted_p instead of _hurd_thread_state_msging_p.
	Use __interrupt_operation mig stub instead of manual packing.  If
	we destroy the msging port, and it is the thread's mig reply port,
	clear its reply port slot.  Fix inverted SA_RESTART test.
	(_hurd_internal_post_signal): Take new arg SIGERROR.
	Remove `cont' from ACT enum; SIGCONT processing is independent of
	handling.  Removed local function `check_pending'; add `reply'.
	Use mask macro STOPSIGS instead of alternation to check for stop
	signals.  Process SIGCONT and do continuation before examining the
	handler.  Use SS->pending_data instead of SS->sigcodes.  When
	dying, don't lock _hurd_siglock around __proc_dostop call.  When
	dying, reply immediately after stopping user threads.  When
	handling, notice return from abort_rpcs and pass it to
	_hurd_setup_sighandler; also pass SS instead of its components.
	Set SCP->sc_error from SIGERROR; clear SS->intr_port after saving
	it in SCP->sc_intr_port.  For pending checks, use macro PENDING
	and goto pending if returns true.
	(_S_sig_post): Eliminate unnecessary variable WIN; pass SIGERROR
	value of zero to _hurd_internal_post_signal.
	(_hurdsig_getenv): New function.
	* sysdeps/mach/hurd/i386/__sigret.c (sp): New global register
        variable.
	(__sigreturn): Arg is not const.
	After restoring SCP->sc_mask, check for pending signals (newly
	unblocked); if any, set SS->context to SCP, clear SS->intr_port,
	and send sig_post to the signal thread to deliver the pending
	signals.  Point SP directly at &SCP->sc_gs and used popa;iret to
	restore.  (This does not actually work; iret is unhelpful.)
	* sysdeps/mach/hurd/mips/__sigret.c (__sigreturn): Arg is not
	const.  After restoring SCP->sc_mask, check for pending signals
	(newly unblocked); if any, set SS->context to SCP, clear
	SS->intr_port, and send sig_post to the signal thread to deliver
	the pending signals.  Don't write $1 value into the user stack.
	Instead, write it into the word just past SCP->sc_pc; then point
	$1 at SCP->sc_pc and use `op_sigreturn' pseudo-instruction to
	restore the PC and $1 from that.

Fri Aug 19 15:39:54 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* configure.in (machine): Grok i586 -> i386/i586.
	* sysdeps/i386/pentium: Directory renamed to sysdeps/i386/i586.

	* hurd/hurd.h (_hurd_pids_changed_stamp, _hurd_pids_changed_sync):
        New variables.
	* hurd/hurdpid.c (_S_proc_newids): Last thing, increment
	_hurd_pids_changed_stamp and broadcast on _hurd_pids_changed_sync.
	* sysdeps/mach/hurd/__setpgrp.c: After proc_setpgrp succeeds and
	PID is ourself, wait on _hurd_pids_changed_sync until
	_hurd_pids_changed_stamp increases from the value before the RPC.
	* sysdeps/mach/hurd/__setsid.c: After proc_setsid succeeds, wait
	on _hurd_pids_changed_sync until _hurd_pids_changed_stamp
	increases from the value before the RPC.

	* posix/sys/wait.h [GCC>=2.6] (__WAIT_STATUS): Define this with
	typedef as a union with the new (GCC 2.6.1) `transparent_union'
	attribute.

	* stdio/printf_fp.c (MPNSIZE): New macro, computed from DBL_MAX_EXP.
	(MPN_VAR): Use that for size of bignums.

	* sysdeps/mach/hurd/__kill.c: For pgrp, ignore ESRCH error from
	kill_pid of individual pids, unless from all of them.
	* hurd/hurdkill.c (_hurd_sig_post): Likewise.

Fri Aug 19 00:54:50 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* configure.in (INSTALL): Quote this shell goop from m4.

	* sysdeps/stub/start.c (errno, __environ): Define these variables.

	* sysdeps/stub/errnos.h (ENOMEM, EACCES): New macros.
	* sysdeps/stub/errlist.c (_sys_errlist): Add strings for all
        macros defined in stub/errnos.h.
	(_sys_nerr): Use value computed from sizeof (_sys_errlist).

Wed Aug 17 15:32:39 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/hurdmsg.c (_S_io_select_done): Take poly arg for notify
        port arg.

	* mach/mach_init.h (vm_page_size): Remove macro defn.

	* hurd/Makefile (distribute): Added STATUS.

	* sysdeps/mach/thread_state.h: Include <string.h> and
        <mach/mach_interface.h>.

	* sysdeps/mach/hurd/__select.c: Pass port-type arg to io_select.

	* sysdeps/mach/hurd/__fork.c: Include "hurdmalloc.h", so we use
        the right `free'.

	* sysdeps/mach/hurd/__select.c (SELECT_DONE_MSGID): Correct value
        to 23020.
	(__select): Don't set PORT until just before sending io_select calls.
	Pass proper send-size for io_select_done reply message.  Clear the
	reply port slot in io_select_done reply message header.

	* sysdeps/mach/hurd/__kill.c: Rename parameter to ARG_SIG, make
        SIG a local variable initialized to that (this to work around a
        GCC bug).
	Initialize PIDS and NPIDS properly for proc_getpgrppids call.

	* signal/signal.h (__sigreturn, sigreturn): Arg is not const.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): For REAUTH or NORMAL
	with empty retryname, treat like NONE (which is now obsolete)
	after reauthentication.  For magic "tty", use new
	termctty_open_terminal RPC on cttyid port.

Tue Aug 16 01:58:21 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/__kill.c (kill_pid): Make non-inline.  Treat
	null msgport like EPERM return from sig_post.
	* hurd/hurdkill.c (_hurd_sig_post): Treat null msgport like EPERM.

	* sysdeps/mach/thread_state.h (machine_get_state,
	machine_get_basic_state): Initialize count arg before calling
	thread_get_state.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): Initialize ERR to zero.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): Grok magic "tty".

	* hurd/hurd/signal.h (struct hurd_sigstate): Replace `sigcodes' with
        `pending_data'.
	(_hurd_raise_signal, _hurd_setup_sighandler): Update prototypes.
	(_hurd_thread_state_msging_p): Don't declare.
	(_hurdsig_rcv_interrupted_p): Declare this instead.
	(HURD_EINTR_RPC): Invert sense of restart test.

	* hurd/hurdrlimit.c (_hurd_rlimits): Add braces to initializer.

	* hurd/catch-exc.c: Unlock _hurd_siglock when done with it.  Use
	__spin_lock_locked on `held' member instead of __mutex_lock_locked.

	* sysdeps/mach/thread_state.h: New file.
	* sysdeps/mach/i386/thread_state.h: Don't #include
	<mach/thread_status.h>.  Add #include_next <thread_state.h> at end.
	* sysdeps/mach/mips/thread_state.h: Likewise.

	* sysdeps/mach/hurd/i386/sigcontext.h (struct sigcontext): Lay out
	corresponding to i386_thread_state and i386_float_state.
	* sysdeps/mach/hurd/mips/sigcontext.h (sc_mips_thread_state,
	sc_mips_exc_state, sc_mips_float_state): New macros, marking
	members that correspond to thread_state.h structs.

Mon Aug 15 17:21:20 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Rules [cross-compiling=yes] (tests): Depend on the binaries, not
	the output files.

	* Makerules: Replace uses of HOST_CC with BUILD_CC and
        native-CFLAGS with BUILD_CFLAGS.

	* sysdeps/unix/Makefile (mk-local_lim, make-ioctls): Replace uses
	of CC with BUILD_CC and native-CFLAGS with BUILD_CFLAGS.
	* sysdeps/unix/sysv/sysv4/solaris2/Makefile: Replace uses of
        HOST_CC with BUILD_CC and native-CFLAGS with BUILD_CFLAGS.
	* sysdeps/posix/Makefile: Likewise.

	* Makeconfig (+cc_version): Variable and associated code removed.
	(HOST_CC): Use BUILD_CC instead; all uses changed.
	(cross-compiling): Set to no if not the case.

	* sysdeps/m68k/fpu/__math.h: Replace all uses of __const with
        __CONSTVALUE.

	* Makerules (distinfo-vars): Remove $@.new first thing.  Write
	elided-routines instead of sysdep_routines.  After writing
	variables, append to sources from $(elided-routines).
	* sysdeps/vax/Makefile (elided-routines): New variable (append to
        it).
	(aux, routines): Don't set these.
	(sysdep_routines): Append things here instead.
	* sysdeps/generic/Makefile (elided-routines): New variable (append
        to it).
	(aux): Don't set this.
	* sysdeps/generic/Makefile (routines): Don't set this.
	(sysdep_routines): Append exp__E and log__L here instead.

	* time/test_time.c (main): Set TBUF.tm_isdst to -1 before calling
        mktime.

	* stdlib/stdlib.h (atof, atoi, atol, random, srandom, setstate,
	initstate, mblen): Never define as macros.
	[__OPTIMZE__ && __GNUC__ >= 2]: Define those functions as extern
	inlines.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): For magic "fd/%u",
	lose on random chars after number; for / after number, retry
	remainder properly.

	* hurd/hurdpath.c (pathtrans_error): New function; filters errors
	from dir_pathtrans: EOPNOTSUPP and MIG_BAD_ID become ENOTDIR.
	(__hurd_path_lookup, __hurd_path_lookup_retry): Call it.

Thu Aug 11 11:59:33 1994  Noel Cragg  (noel@churchy.gnu.ai.mit.edu)

	* time/mktime.c (_mktime_internal): Add code to normalize value of
	TM_ISDST to -1, 0, or 1 so code doesn't loop forever.

Thu Aug 11 02:26:37 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* resolv/Makefile (subdir): Set to resolv, not res.

	* sysdeps/mach/hurd/sysd-stdio.c (fd_fail): Pass ERR to
        _hurd_raise_signal.

	* sysdeps/mach/i386/thread_state.h (struct machine_thread_all_state):
	Add new member `fpu'.

Wed Aug 10 23:39:49 1994  Karl Heuer  <kwzh@hal.gnu.ai.mit.edu>

	* malloc/mcheck.c (mcheck): Remove obsolete extern declaration.

	* malloc/mcheck.c (flood): Add an arg.
	(freehook, mallochook, reallochook): Use different flood bytes to
	distinguish freed space from uninitialized allocated space.

	* malloc/mtrace.c (mtrace): Guard against being called twice.
	(muntrace): New function, to turn off tracing.
	* malloc/malloc.h: Declare it.

Wed Aug 10 02:47:24 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/sigcontext.h (struct sigcontext): Renamed
        member `sc_err' to `sc_error'.

	* hurd/hurd-raise.c: Take new arg SIGERROR.  Set
	SS->pending_data[SIGNO] from SIGCODE and SIGERROR instead of
	setting SS->sigcodes[SIGNO].

	* Makeconfig (+includes): Use text manipulation to avoid
	conditional for $(..).  Append $(last-includes).
	* sysdeps/mach/hurd/Makefile (last-includes): Append
        -I.../libthreads to this.
	(includes): Not to this.

	* hurd/hurd/fd.h (_hurd_fd_error): Pass ERR to _hurd_raise_signal.

	* stdlib/stdlib.h [__OPTIMIZE__] (cfree, rand, srand, random,
	srandom, initstate, setstate): Macros removed.

	* malloc/mcheck.c (reallochook): Fixed typo.
	(mabort) [! __GNU_LIBRARY__]: Use fprintf and abort instead of
	__libc_fatal.

	* hurd/Makefile (sig): Remove msging-p; that function will go in
        trampoline.c.
	* sysdeps/stub/msging-p.c: File removed.
	* sysdeps/mach/hurd/mips/msging-p.c: File removed.
	* sysdeps/mach/hurd/i386/msging-p.c: File removed.

Tue Aug  9 19:20:29 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* hurd/catch-exc.c: Get error code from _hurd_exception2signal and
	pass it to _hurd_internal_post_signal.  Search for SS manually
	rather than using _hurd_thread_sigstate, to avoid locks.

	* sysdeps/mach/hurd/mips/msging-p.c: Fetch port argument from
	register $8 (t0) instead of stack.  Change type of STATE arg to
	`struct machine_thread_all_state *'.

	* inet/inet_netof.c: Incorporated from BSD 4.4-Lite.
	* inet/inet_net.c: Incorporated from BSD 4.4-Lite.

Tue Aug  9 18:28:40 1994  Karl Heuer  <kwzh@hal.gnu.ai.mit.edu>

	* malloc/mtrace.c (tr_mallochook, tr_reallochook): Don't assume
	%lx format matches size_t arg.
	* malloc/mtrace.c: Enable file- and line-number tracing.
	* malloc/mtrace.awk: Postprocess that trace information.

	* malloc/mcheck.c (flood): New function.
	(freehook, mallochook, reallochook): Initialize new space and
	freed space to non-zero garbage, to help find code that makes
	unwarranted assumptions.

Mon Aug  8 01:20:56 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/exc2signal.c (_hurd_exception2signal): Take
        new arg `int *error'; set it.
	* sysdeps/mach/hurd/i386/exc2signal.c: Likewise.
	* sysdeps/stub/exc2signal.c: Likewise.
	* hurd/hurd/signal.h (_hurd_exception2signal): Take new arg
	`int *error'.
	(_hurd_internal_post_signal): Take new arg `int error'.

	* res: Directory renamed to resolv.
	* sysdeps/unix/inet/Subdirs: Change res to resolv.

	* Version 1.08.6.

	* sysdeps/sparc/divrem.m4 (DEVELOP_QUOTIENT_BITS): Use ** instead of
	^ for exponentiation.  Pinard says it is more portable.

	* sysdeps/mach/hurd/mips/sigcontext.h (struct sigcontext): Added
        member `sc_err'.
	* sysdeps/mach/hurd/i386/sigcontext.h (struct sigcontext): Move
	sc_err to front machine-independent section; change its comment.

	* sysdeps/stub/thread_state.h (struct machine_thread_all_state): New
	type.
	* sysdeps/mach/i386/thread_state.h: Likewise.
	* sysdeps/mach/mips/thread_state.h: Likewise.

	* sysdeps/mach/i386/Implies: File removed; it was superfluous.

	* sysdeps/sparc/divrem.m4 (Lgot_result): Add more quotes in ifelse.

	* configure.in (fpu_dirs): Fixed typo.

Sun Aug  7 01:13:04 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* inet/inet_lnaof.c: Incorporated from BSD 4.4-Lite.
	* inet/inet_mkadr.c: Incorporated from BSD 4.4-Lite.
	* inet/inet_addr.c: Incorporated from BSD 4.4-Lite.
	* res/Makefile (headers): Use only arpa/nameser.h, not arpa/*.h.
	* res/arpa/inet.h: Moved to inet/arpa/inet.h.
	* inet/arpa/inet.h: Incorporated from BSD 4.4-Lite.

	* misc/init-misc.c: New file.
	* misc/Makefile (aux): Added init-misc.

	* Makeconfig (localtime-file): Use $(sysconfdir) instead of
        $(etcdir).

	* Makerules (install-bin-nosubdir): Use $(install-bin) instead of
        $(install).
	(install-sbin-nosubdir): New target.
	(install-no-libc.a-nosubdir): Depend on that.

	* configure.in ($nfp check): Iterate through $mach and use all
        fpu/ dirs that exist.

Wed Aug  3 02:46:03 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/sigcontext.h: Rearranged structure so
	machine-dependent portion is laid out like `struct mips_thread_state;
	struct mips_exc_state; struct mips_float_state;'.

	* Version 1.08.5.

	* sysdeps/mach/hurd/mips/__sigret.c: Compare *reply_port to
        MACH_PORT_NULL, not implicit zero.
	(restore_gpr): Use N-1 as subscript into sc_gpr (sc_gpr[0] => $1).
	Before general regs, restore from sc_mdlo and sc_mdhi.  Don't
	treat sp, fp specially; use restore_gpr for them too.  For final
	return, store user $1 value beyond top of user stack ahead of
	time; then use $1 to hold the user PC, and restore it from the
	stack in the delay slot.

Tue Aug  2 21:03:51 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/trampoline.c (_hurd_setup_sighandler):
        Copy TS to SCP all at once.
	* sysdeps/mach/hurd/mips/sigcontext.h (struct sigcontext): sc_gpr
	has 31 elts; sc_gpr, sc_pc, sc_mdlo, sc_mdhi are arranged in that
	order to mimic struct mips_thread_state.

	* Make-dist (all-headers): Instead of removing rpcsvc/%, use
	$(wildcard) to remove all headers that don't exist at top level,
	but preserve top-level $(headers).

	* Make-dist (sysdep_dirs): Avoid directories called RCS.
	(%/configure): Pass -f to mv.

	* sysdeps/mips/setjmp.S [__sgi__]: Use `fp' instead of `$fp'.

Mon Aug  1 20:12:23 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mips/sigcontext.h (struct sigcontext): Add
        members sc_mdlo, sc_mdhi.
	* sysdeps/mach/hurd/mips/trampoline.c (_hurd_setup_sighandler):
        Save mdlo and mdhi.

Sun Jul 31 14:21:16 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* time/mktime.c: Remove errant comment end sequence.

	* termios/sys/ttydefaults.h: Incorporated from BSD 4.4-Lite.
	* sysdeps/vax/DEFS.h: Incorporated from BSD 4.4-Lite.
	* sysdeps/unix/bsd/sys/reboot.h: Incorporated from BSD 4.4-Lite.
	* sysdeps/unix/bsd/bsd4.4/errnos.h: Updated from 4.4-Lite sys/errno.h.
	[__USE_BSD] (EAUTH, ENEEDAUTH, ELAST): New macros.
	* sysdeps/ieee754/support.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/ieee754/cbrt.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/trig.h: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/tanh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/tan.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/sinh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/sincos.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/pow.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/mathimpl.h: Incorporated from BSD 4.4-Lite.
	Add back __izing #define's, except for exp__E and log__L, which
	have been renamed with __s in 4.4-Lite.
	* sysdeps/generic/log__L.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/log1p.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/log.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/fmod.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/exp__E.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/exp.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/cosh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/atanh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/atan2.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/asinh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/asincos.c: Incorporated from BSD 4.4-Lite.
	* misc/getusersh.c: Incorporated from BSD 4.4-Lite.
	(initshells): Reapply fix of 16 Nov 1992.
	* sysdeps/generic/acosh.c: Incorporated from BSD 4.4-Lite.
	* sysdeps/generic/__expm1.c: Incorporated from BSD 4.4-Lite.
	* misc/ttyslot.c: Incorporated from BSD 4.4-Lite.
	* misc/ttyent.h: Incorporated from BSD 4.4-Lite.
	* misc/syslog.c: Incorporated from BSD 4.4-Lite.
	* misc/paths.h: Incorporated from BSD 4.4-Lite.
	* misc/getttyent.c: Incorporated from BSD 4.4-Lite.
	* misc/sys/syslog.h: Incorporated from BSD 4.4-Lite.
	Don't include <machine/ansi>; define _BSD_VA_LIST_ to __gnuc_va_list.
	* inet/rexec.c: Incorporated from BSD 4.4-Lite.
	* inet/rcmd.c: Incorporated from BSD 4.4-Lite.
	(rcmd): Reapply select max fd fix of 3 Jun 1994.
	* inet/pathnames.h: File removed.
	* inet/inet_ntoa.c: Incorporated from BSD 4.4-Lite.
	* inet/getsrvbypt.c: Incorporated from BSD 4.4-Lite.
	* inet/getsrvbynm.c: Incorporated from BSD 4.4-Lite.
	* inet/getservent.c: Incorporated from BSD 4.4-Lite.
	* inet/getprtname.c: Incorporated from BSD 4.4-Lite.
	* inet/getprtent.c: Incorporated from BSD 4.4-Lite.
	* inet/getproto.c: Incorporated from BSD 4.4-Lite.
	* inet/protocols/timed.h: Incorporated from BSD 4.4-Lite.
	* inet/protocols/talkd.h: Incorporated from BSD 4.4-Lite.
	* inet/protocols/rwhod.h: Incorporated from BSD 4.4-Lite.
	* inet/protocols/routed.h: Incorporated from BSD 4.4-Lite.
	* inet/arpa/tftp.h: Incorporated from BSD 4.4-Lite.
	* inet/arpa/telnet.h: Incorporated from BSD 4.4-Lite.
	* inet/arpa/ftp.h: Incorporated from BSD 4.4-Lite.

Fri Jul 29 01:50:37 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* Version 1.08.4.

	* res/Makefile (routines): Add missing backslash.

	* sysdeps/mach/hurd/mips/__sigret.c: Rename variable AT (which is
	the register's name) to SCPREG.  Fix some SCP references in
	register loads to use SCPREG instead.  Load SCPREG->sc_pc into $24
	and jump to it, restoring $at in the delay slot.  This still
	leaves $24 clobbered.

	* sysdeps/mach/hurd/mips/sigcontext.h: Use `unsigned int'
        consistently for port names.

	* sysdeps/mach/hurd/mips/trampoline.c: Don't set up args on the
        stack; pass them in registers.

	* Makefile (%/configure, sysd-dirs, munch-init.c): Pass -f to mv.

	* misc/sys/cdefs.h (__NORETURN, __CONSTVALUE): Use the
	__attribute__ defn for GCC>=2.7, not >=2.6.  Use the keyword defn
	only for GCC<2.5.  Use __volatile__ and __const__ instead of
	noreturn and const for namespace safety.

	* sysdeps/mach/hurd/__readlink.c: If BUF is null, return the size
        of buffer required.

Thu Jul 28 17:17:11 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* res/netdb.h: Declare h_errno.

	* res: New directory, for all code incoporated from BIND.
	* inet/arpa/inet.h, inet/arpa/resolv.h: Moved to res/arpa.
	* inet/sys/bitypes.h: Moved to res/sys.
	* inet/gethstnamad.c: Renamed to res/gethnamaddr.c.
	* inet/getnetbyad.c: Renamed to res/getnetbyaddr.c.
	* inet/getnetbynm.c: Renamed to res/getnetbyname.c.
	* inet/res_mkqry.c: Renamed to res/res_mkquery.c.
	* inet/Makefile (headers): Removed netdb.h, resolv.h, and
        sys/bitypes.h.
	(routines): Removed res_comp res_debug res_init res_mkqry res_query
	res_send gethstnmad sethostent.
	(aux, distribute): Variables removed.
	* res/getnetnamadr.c, res/nsap_addr.c: New files.
	* All .c and .h in res/ updated from BIND-4.9.3-BETA9.
	* res/Makefile: New file.
	* sysdeps/unix/inet/Subdirs: Added res.

	* Makerules: Replace all uses of `.dep' suffix with `.d' suffix.
	(+make-deps): Replace `.dtm' suffix with `.T' suffix.

Wed Jul 27 06:13:30 1994  Noel Cragg  (noel@churchy.gnu.ai.mit.edu)

	* time/mktime.c: Add code to support tm_isdst flag in struct tm.
	Fixed bug with handling of DST sections.

Mon Jul 25 17:17:28 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/sparc/divrem.m4 (Lgot_result) [S=true]: Only test SIGN
        and negate for [OP=div].

	* socket/sys/socket.h (__SOCKADDR_ARG): New macro; for GCC 2.6 and
	later, a funky union similar to __WAIT_STATUS in <sys/wait.h>.
	(bind, getsockname, connect, getpeername, sendto, recvfrom,
	accept): Use __SOCKADDR_ARG in place of `struct sockaddr *' in
	declarations.

	* posix/glob/configure.bat: New file.
	* posix/Makefile (glob.tar): Add glob/configure.bat.

	* sysdeps/unix/opendir.c: Fail with ENOENT when passed "".
	Check STATBUF and fail with ENOTDIR if it's not a directory.

Mon Jul 25 15:44:18 1994  Noel Cragg  (noel@churchy.gnu.ai.mit.edu)

	* time/mktime.c: Fix range-checking bug in NORMALIZE macro.

Fri Jul 22 02:42:44 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* sysdeps/unix/readdir.c: Search for NUL character to limit
	d_namlen.  Some systems return very bogus values.

	* sysdeps/unix/sysv/sysv4/i386/sysdep.h (PSEUDO): Remove ret at end.

	* mach/Makefile (mach-shortcuts): Filter out device_writev_request.

	* limits.h (_LIBC_LIMITS_H_): Don't define if already defined.
	[__GNUC__ < 2]: Only protect this section from multiple inclusion.

	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler):
        Declare SIGSP volatile.

	* hurd/hurdinit.c (_hurd_setproc): Fixed arg in
        _hurd_pgrp_changed_hook decl.

	* hurd/hurd/signal.h (_hurd_self_sigstate_unlocked): New function.
	(HURD_EINTR_RPC): Use it instead of _hurd_self_sigstate followed by
	__mutex_unlock; this thread might already hold the lock.

Wed Jul 20 18:53:54 1994  Michael I Bushnell  <mib@geech.gnu.ai.mit.edu>

	* hurd/fd-read.c (_hurd_fd_read): Test for EBACKGROUND in
	do loop was reversed.

	* hurd/hurdpath.c (__hurd_path_lookup): Skip over initial slashes
	before calling __dir_pathtrans.

Tue Jul 19 15:28:39 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/Makefile (user-interfaces): Add mach/mach4.
	(mach-shortcuts): Match all syscall_% again; the missing ones are in
	mach4.defs.

	* mach/Machrules (%.ir): Match SimpleRoutine as well as Routine
        comments.

	* sysdeps/mach/hurd/Makefile ($(hurd)/errlist.c): Use -f flag to mv.

Sat Jul 16 00:42:30 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules [install]: Rewrite this rule to use install-bin.
	[install-sbin]: New rule parallel to that one, installs in $(sbindir).

	* time/Makefile (install-sbin): Set this instead of install.
	* sunrpc/Makefile (install-others): Use $(sysconfdir)/rpc instead
	of $(etcdir)/rpc.
	(install-bin): Set this instead of install; set it to just rpocgen.
	(install-sbin): Put rpcinfo and portmap here instead.
	($(sysconfdir)/rpc): Rule renamed from $(etcdir)/rpc.
	(defines): Rename it in _PATH_RPC defn here too.

	* posix/Makefile (install-bin): Set this instead of install.

	* Makeconfig (datadir): Default to $(prefix)/share, not $(prefix)/lib.
	(sbindir): New variable.
	(sysconfdir): Variable renamed from etcdir.

	* sysdeps/unix/bsd/sun/signum.h: New file; no SIGINFO, SIGLOST is 29.

	* sysdeps/unix/sysv/sco3.2.4/uname.S: New file from Scott Bartram.

	* sysdeps/unix/sysv/sco3.2.4/__getgrps.c: Include alloca.h.

	* configure.in (INSTALL): If it is $srcdir/install.sh after
	AC_PROG_INSTALL, reset it to '$(..)./install.sh'.

	* sysdeps/mach/hurd/__ioctl.c (io2mach_type): Move macro defn before
	first use.
	(__ioctl): Fix swapped args to __sigismember; remove unused variable.

	* sysdeps/mach/hurd/send.c: Fix portsPoly arg to __socket_send.
	* sysdeps/mach/hurd/sendto.c: Likewise.

	* sysdeps/mach/hurd/recv.c: Pass &BUFP, not BUFP.
	* sysdeps/mach/hurd/recvfrom.c: Likewise.

	* sysdeps/mach/hurd/connect.c: Include <hurd/ifsock.h>.

	* sysdeps/mips/dec/bytesex.h: New file.
	* sysdeps/mips/p40/bytesex.h: New file.

Fri Jul 15 23:12:06 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/sys/types.h (u_quad, quad): Renamed to &_t.
	* posix/gnu/types.h [__GNUC__] (__u_quad_t, __quad_t, __qaddr_t):
	New typedefs, using long long int and derivatives.
	[! __GNUC__] (__u_quad, __quad): Renamed to &_t.
	(__fsid_t): Make this always be __u_quad_t.

	* time/sys/time.h (struct timespec): New type.
	(TIMEVAL_TO_TIMEPSEC, TIMESPEC_TO_TIMEVAL): New macros.

Thu Jul 14 15:43:39 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/sysinfo.S: New file.
	* sysdeps/unix/sysv/sysv4/Dist: Add sysinfo.S.
	* sysdeps/unix/sysv/sysv4/Makefile: Add sysinfo to sysdep_routines
	if we're inside misc.
	* sysdeps/unix/sysv/sysv4/sethostnam.c: New file.
	* sysdeps/unix/sysv/sysv4/__gethstnm.c: New file.

	* sysdeps/unix/sysv/sysv4/solaris2/fsync.S: New file.

Tue Jul 12 00:57:08 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/Makefile (mach-shortcuts): Only match known Mach
	subsystems: vm, task, mach_port, and thread.

Mon Jul 11 20:18:29 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/intr-rpc.defs, hurd/intr-rpc.awk: New files.
	* hurd/Makefile (user-MIGFLAGS): Add -imacros intr-rpc.defs.
	(transform-user-stub): New canned sequence.
	(transform-user-stub-output): New variable.
	Make the .ustamp files depend on intr-rpc.awk.

	* mach/Machrules (%.ir): Cull the RPC names from the preceding
	comment rather than the definition, so we don't see any userprefix.
	(transform-user-stub-output): New variable.
	(%.ustamp: %.defs): Invoke $(transform-user-stub) inside for loop.
	Use $(transform-user-stub-output) in place of `tmp' in arg to
	move-if-change.

	* mach/Makefile [! mach-shortcuts] (user-interfaces): Also filter
	out device/device_request.

Mon Jul 11 17:50:14 1994  Brendan Kehoe  (brendan@mole.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sysv4/Makefile: Put the sys-sig.S stuff in
	here, rather than in .../sysv4/solaris2/sparc/Makefile.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/Makefile: Removed the
	sys-sig.S part.

Sun Jul 10 19:04:24 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/bind.c: Call __hurd_invoke_translator.

	* hurd/hurd.h (__hurd_invoke_translator, hurd_invoke_translator):
	Declare them.
	* hurd/Makefile (routines): Add invoke-trans.
	* hurd/invoke-trans.c (__hurd_invoke_translator): New file.
	* hurd/hurdsyms.c (hurd_invoke_translator): New alias.

	* hurd/hurdpath.c (__hurd_path_lookup_retry): New function.
	* hurd/hurdsyms.c (hurd_path_lookup_retry: New alias.
	* hurd/hurd.h (__hurd_path_lookup_retry, hurd_path_lookup_retry):
	Declare them.

	* hurd/hurd/fd.h (_hurd_fd_error_signal): Return SIGLOST for
	MIG_SERVER_DIED.

	* time/strftime.c: Make %j value 1-origin instead of 0-origin.

Sat Jul  9 02:31:23 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* gnu-stabs.h (__SYMBOL_PREFIX): New macro, based on NO_UNDERSCORES.
	Use it in all macros instead of explicit leading underscores.
	Removed all [! __STDC__] definitions.

	* sysdeps/mach/hurd/mips/trampoline.c: New file.
	* sysdeps/mach/hurd/mips/sigcontext.h: New file.
	* sysdeps/mach/hurd/mips/longjmp-ts.c: New file.
	* sysdeps/mach/hurd/mips/msging-p.c: New file.
	* sysdeps/mach/hurd/mips/longjmp-ctx.c: New file.
	* sysdeps/mach/hurd/mips/init-fault.c: New file.
	* hurd/mach/hurd/mips/__sigret.c: New file.
	* sysdeps/mach/hurd/mips/exc2signal.c: New file.
	* sysdeps/mach/mips/thread_state.h: New file.
	* sysdeps/mach/mips/machine-sp.h: New file.
	* sysdeps/mach/mips/machine-lock.h: New file.
	* sysdeps/mach/mips/sysdep.h: New file.

	* mach/Makefile (mach-syscalls.mk): Snarf 3rd arg from kernel_trap.
	($(mach-syscalls:%=__%.S): Emit kernel_trap instead of SYSCALL_TRAP.
	* mach/syscalls.awk: Print nargs-$1 = $3 for each line.
	* sysdeps/mach/sysdep.h: Include <mach/machine/syscall_sw.h>.
	* sysdeps/mach/i386/sysdep.h (ENTRY, SYSCALL_TRAP): Macros removed.

	* sysdeps/mach/i386/machine-lock.h: Use __volatile in place of
	volatile to work with -traditional.

Fri Jul  8 21:06:43 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdsig.c (_hurd_internal_post_signal): For stop signals,
	clear pending SIGCONT no matter what action we choose.
	Add new value `cont' to ACT enum; use it for default SIGCONT action.
	(_hurd_internal_post_signal: sigwakeup): New local inline.

Fri Jul  8 20:26:49 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/Makefile (sysdep-CFLAGS): Set
	this to include the -mhard-quad-float option.

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sys-sig.S: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/Makefile: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/Dist: New file.

Fri Jul  8 13:54:54 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdpath.c (__hurd_path_lookup): Don't treat leading /
	specially for FS_RETRY_NORMAL.  Handle FS_RETRY_MAGICAL; leading /
	here means use crdir.  In that case, deallocate *RESULT if nonnull.

	* sysdeps/unix/sysv/sysv4/i386/sysdep.h: Don't define _ERRNO_H if
	already defined.

	* posix/gnu/types.h (__ino_t): Make this unsigned int instead of
	unsigned long int (matters for Alpha).

	* Makeconfig (+gccopt): Variable removed.
	(+cflags): Don't use it.
	(CPPFLAGS): Append $(sysdep-CPPFLAGS).
	(CFLAGS): Append $(sysdep-CFLAGS).

	* sysdeps/mach/hurd/__ioctl.c: In MSGID calculation, skip blocks
	of 100 for request commands >= 100, to allow for the reply msgids.

Thu Jul  7 19:07:00 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/bsd/osf1/dirstream.h (DIR): Make __allocation
	member be int, not size_t (which is a long).

Thu Jul  7 15:21:15 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/__fopenport.c (readio, writeio, seekio, closeio): New
	functions.
	(funcsio): New const variable.
	(__fopenport): Make the new stream use that for its io functions, and
	the default room functions, and set its seen flag.

Tue Jul  5 11:32:38 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurd/signal.h (struct hurd_sigstate): Removed `intr_restart'.
	(HURD_EINTR_RPC): Uncommented.  Declare label
	`__do_call' so it has block instead of function scope.  Don't use
	SS->intr_restart; instead SS->intr_port being reset to
	MACH_PORT_NULL tells us to restart the call.

	* sysdeps/mach/hurd/__ioctl.c: Enable use of HURD_EINTR_RPC.
	Do ctty magic and check for EBACKGROUND to generate SIGTTOU.

	* mach/devstream.c (dealloc_ref): New function.
	(mach_open_devstream): Add a user reference to DEV, and set
	STREAM's close fn to dealloc_ref, which will release the reference.

	* hurd/fd-read.c (_hurd_fd_read): Enabled and rewrote SIGTTIN code.
	* hurd/fd-write.c (_hurd_fd_write): Enabled and rewrote SIGTTOU code.

	* hurd/hurdsyms.c: Add an alias hurd_sig_post -> _hurd_sig_post.
	* hurd/hurdkill.c (_hurd_sig_post): Renamed back from hurd_sig_post.
	* hurd/hurd.h: Declare _hurd_sig_post.

	* hurd/hurdsig.c (_S_sig_post): Add SIGTTIN and SIGTTOU cases,
	handled like SIGINT et al.

	* mach/devstream.c: Turn back on NL->CRNL translation.

	* stdio/xbug.c (main): Return instead of running off the end.

Mon Jul  4 16:57:13 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.08.3.

Sat Jul  2 00:15:37 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__ioctl.c: Account for three type fields in
	message buffer size.

	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler):
	Catch faults accessing user stack and return NULL.
	* hurd/hurdsig.c (_hurd_internal_post_signal): When it does, die
	with SIGILL and dump core.

	* hurd/hurdsig.c (_hurd_internal_post_signal): Use
	_hurd_msgport_thread instead of __mach_thread_self () to avoid the
	system call.  (Signals will now lose if _hurd_msgport_thread gets
	clobbered.)
	(abort_rpcs): Always do thread_abort and thread_get_state.

	* misc/getpass.c: Fix typo resulting in newline not being removed.

	* termios/sys/ttydefaults.h [TTYDEFCHARS] (ttydefchars): Cast
	_POSIX_VDISABLE to cc_t to avoid gcc warning.

Fri Jul  1 14:07:40 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/Makefile (user-interfaces): Add hurd/ifsock.

	* socket/sys/socket.h (AF_LOCAL): New macro.

	* sysdeps/mach/hurd/__kill.c: Fix SIGKILL loop condition.

Fri Jul  1 13:36:27 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/hurdkill.c (hurd_sig_post): New var PIDSBUF; initialize
	PIDS and NPIDS correctly; only free PIDS if the MiG stub
	changed it.

Thu Jun 30 18:47:48 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/hurdsock.c (_hurd_socket_server): Zero up to and *including*
	new[DOMAIN].

Thu Jun 30 08:12:28 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdsig.c (abort_all_rpcs): Just iterate over _hurd_sigstates.

	* hurd/dtable.c (fork_child_dtable): Skip empty descriptor slots.

	* sysdeps/mach/hurd/__ioctl.c: Fix MSG.data size calculation.

Wed Jun 29 19:06:54 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/bind.c: For AF_LOCAL, create a new node in the
	filesystem, put the ifsock translator on it, and fetch the
	address port.
	* sysdeps/mach/hurd/connect.c: For AF_LOCAL, look up the socket
	file and fetch the address port using the ifsock protocol.

Tue Jun 28 16:03:15 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/Makefile (routines): Add ports-get, ports-set, and hurdmsg.
	(aux): Remove msgstub.
	* hurd/hurdports.c (get): Just call _hurd_ports_get.
	(set): Just call _hurd_ports_set.
	(getcttyid, setcttyid): New functions.
	* hurd/ports-get.c (_hurd_ports_get): New file, new function.
	* hurd/ports-set.c (_hurd_ports_set): New file, new function.
	* hurd/hurd.h: Declare _hurd_ports_get and _hurd_ports_set.
	Declare getcttyid and setcttyid.
	* hurd/__setauth.c (__setauth): Just call _hurd_setauth.
	(_hurd_setauth): New function, code moved from __setauth.
	* hurd/hurdinit.c (_hurd_setproc): New function.
	* hurd/hurdioctl.c (_hurd_setcttyid): New function.

	* locale/C-ctype_ct.c (__ctype_tolower_C, __ctype_toupper_C): Use
	integer constants instead of character constants for octal values
	so they will not be sign extended.

	* sysdeps/mach/hurd/__setitmr.c (fork_itimer): New function, on
	_hurd_fork_child_hook.

	* sysdeps/stub/sysd-stdio.c (__stdio_reopen): Fix typo in arg type.
	* sysdeps/stub/__ioctl.c: Fix type of REQUEST arg.
	* sysdeps/stub/syscall.c: Include ansidecl.h.
	* sysdeps/stub/_exit.c: Add __NORETURN to defn.

	* sysdeps/unix/sysv/sysv4/sigset.h (_EXTERN_INLINE): Define to
	`extern __inline', not empty.

	* sysdeps/mach/hurd/ttyname.c: Don't bother searching /dev.

Sat Jun 25 15:41:29 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__fork.c: Moved proc_task2pid call to just
	before proc_child.  It is a waste to do it earlier.

Sat Jun 25 13:17:39 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__fork.c: Move proc_task2pid call to after
	_hurd_ports are unlocked.  Call proc_child nearly last thing.
	Ignore errors from thread_resume.

Fri Jun 24 20:21:11 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/getcwd.c: Remove empty `#define'.

Fri Jun 24 17:57:36 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__fork.c: Call proc_task2pid immediately after
	task_create.  Add comment explaining why thread_resume must be the
	last thing we do to the child.

Fri Jun 24 01:41:41 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdinit.c (_hurd_proc_init): Call __proc_set_arg_locations
	in place of __proc_setprocargs (it was renamed).

	* hurd/hurd.h: Rename _hurd_sig_post to hurd_sig_post.
	* hurd/hurdkill.c: Likewise.

	* hurd/port2fd.c (_hurd_port2fd): Call __term_open_ctty instead of
	__term_become_ctty, and don't pass the message port.
	* hurd/hurdioctl.c (rectty_dtable): Likewise.
	* hurd/dtable.c (fork_child_dtable, ctty_new_pgrp): Likewise.

	* sysdeps/mach/hurd/__fork.c: Use __proc_{get,set}_arg_locations
	to propagate argv and envp locations to the child.

	* stdio/freopen.c (freopen): If STREAM->__seen is clear, pass
	__stdio_close to __stdio_reopen.

	* misc/Makefile (install-lib): Add libg.a.
	($(objpfx)libg.a): New rule; use make-dummy-lib.
	(lib): Depend on $(objpfx)libg.a

Thu Jun 23 01:14:36 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* termios/termios.h (CCEQ): New macro.

	* sysdeps/unix/sysv/irix4/__getgrps.c: Add missing __ to fn name.

	Don't compile in absolute file names for localtime and posixrules
	files if they were specified relative to $(zonedir).
	* time/Makefile (installed-localtime-file,
	installed-posixrules-file): Set these instead of
	{localtime,posixrules}-file to the absolute file names.
	($(localtime-file), $(posixrules-file)): Change targets to
	$(installed-localtime-file) and $(installed-posixrules-file).

Wed Jun 22 15:52:26 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/Makefile (sig): Add hurdkill.

Sat Jun 18 12:57:54 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/_itoa.h (_itoa): Change type of VALUE to unsigned long long.
	* stdio/_itoa.c (_itoa): Likewise.

Thu Jun 16 01:10:41 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/dirstream.h (DIR): Replace `__filepos' member
	with `__entry_ptr' and `__entry_data'.  Remove `__block_size' member.
	Replace `__offset' member with `__ptr', a char *; no need to include
	<gnu/types.h>.
	* sysdeps/mach/hurd/readdir.c: Use those, new dir_readdir protocol.
	* sysdeps/mach/hurd/opendir.c: Initialize new members.
	Don't do io_stat to set __blocksize.
	* sysdeps/mach/hurd/telldir.c: Rewritten; return DIRP->__entry_ptr.
	* sysdeps/mach/hurd/seekdir.c: Rewritten; just set DIRP->__entry_ptr
	from arg, and zero DIRP->__size so a new block will be read.

	* sysdeps/mach/hurd/getcwd.c: Use new dir_readdir protocol.

	* hurd/msgstub.c: Add stubs for dir_changed, file_changed.

	* hurd/hurdsock.c (_hurd_socket_server): Removed unused label.

	* sysdeps/mach/hurd/__getdents.c: Use new dir_readdir protocol.

	* sysdeps/mach/hurd/__access.c: Open the file with 0 flags and
	then use file_check_access to discover what we are allowed.

Tue Jun 14 14:10:03 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/mips/setjmp.S: Refer to `$fp', not `fp'.

Tue Jun 14 00:50:54 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__pipe.c: Set FDS[1], not FDS[2].

Mon Jun 13 06:48:48 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sparc/sigtramp.c (trampoline): Use a
	comment instead of a pointless insn to reference %0 in final asm.

	* hurd/hurdsock.c (_hurd_socket_server): If realloc fails, don't
	fail; just don't cache the port.
	Look up the server node only if it is not in the cache.
	Translate errno only if path_lookup fails.
	(init): New function, on _hurd_preinit_hook.

	* sysdeps/mach/hurd/__symlink.c: Complement _hurd_umask before ANDing.

Sat Jun 11 12:52:28 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__fork.c: Can't insert dead name rights into
	child.

Sat Jun 11 05:19:47 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/i386/longjmp-ts.c: Set TS->uesp instead of
	TS->esp.  Set TS->eip.

	* gnu-stabs.h (bss_set_element): New macro.
	* hurd/dtable.c: Use bss_set_element instead of data_set_element
	to put _hurd_dtable_lock in the _hurd_fork_locks set.

Fri Jun 10 02:04:51 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__fork.c: Don't apply MACH_PORT_TYPE to result
	from __mach_port_names.  Unlock SS->lock before return.
	Check for KERN_NAME_EXISTS from mach_port_allocate_name when
	creating a receive right and possibly ignore it.

	* sysdeps/unix/sysv/sco3.2.4/Dist: Add sco_getgrp.S.

	* crypt/speeds.c: Include signal.h and stdio.h first thing.
	[! SIGVTALRM]: Define NO_ITIMER.

	* sysdeps/unix/sysv/isc3/direct.h: New file.

	* hurd/hurdinline.c: Include lock-intern.h before #define
	_EXTERN_INLINE.

	* sysdeps/mach/hurd/__fork.c (_hurd_fork_locks): Don't be const.
	(__fork): Set SS from _hurd_self_sigstate so it is never null.
	New local flag PORTS_LOCKED records when we have spin_locked all
	the _hurd_ports cells; unlock them if necessary on error.

	* hurd/hurdsig.c (_hurd_siglock): Don't initialize it.
	(_hurdsig_init): Initialize _hurd_siglock at runtime.

Wed Jun  8 12:22:27 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* hurd/hurdid.c (_hurd_check_ids): Zero P->nuids and P->ngids after
	deallocating P->uids and P->ngids.

	* hurd/hurdioctl.c (_hurd_ioctl_handler_lists): Make defn initialized.

	* sysdeps/mach/hurd/__ioctl.c: Only try to unpack if IOC_OUT is set.

	* hurd/Makefile (routines): Replace $(inlines) with hurdinline.
	(inlines): Variable and rule removed.
	(generate-inlines): Variable removed.
	* hurd/hurdinline.c: New file.

Tue Jun  7 01:58:20 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makerules: Add -f to all mv commands missing it.

	* hurd/Makefile (generate-inline): New canned sequence.
	(inline-%.c): Use it.

	* time/asia, time/europe, time/northamerica: New versions from ADO.

Mon Jun  6 21:36:04 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* hurd/hurdid.c (init_id): New function.

	* Makerules (+make-deps): Put first s cmd before $(sed-remove-objpfx).
	(sed-remove-objpfx): Replace occurrences at beginning of line too.

Sun Jun  5 14:34:12 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Version 1.08.1.

	* sysdeps/mach/hurd/ioctls.h (_IOR, _IOW): Swap IOC_IN and IOC_OUT.

	* sysdeps/mach/hurd/__ioctl.c: Only pack input for ioctls that
	take input.  Compute expected reply size for ioctls that take
	output and check it properly.

Sat Jun  4 00:35:42 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/ioctls.h (union __ioctl): Type removed.
	(enum __ioctl_datum): Name this enum.
	(_IOC_INOUT, _IOC_GROUP, _IOC_COMMAND, _IOC_TYPE): New macros.
	(_IOT_TYPE[012], _IOT_COUNT[012]): New macros.
	* sysdeps/mach/hurd/__ioctl.c: Use those macros instead of the union.

	* sysdeps/mach/hurd/__fork.c: Major rewrite.  Copy all ports
	present in the task, not just library-maintained ones.  Handle
	sigstate and signal thread setup explicitly here.
	* hurd/hurdsig.c (hurdsig_fork, hurdsig_fork_child): Functions
	removed.

	* hurd/hurdpid.c (init_pids): Don't put this on _hurd_fork_child_hook.

	* sysdeps/mach/hurd/__isatty.c: New file.

	* hurd/hurdsock.c (_hurd_socket_server): Pass NP to __path_lookup,
	not NAME (most of which is uninitialized).

	* hurd/hurdsig.c (_hurdsig_init): Don't check for _hurd_msgport
	being non-null; always initialize it.

Fri Jun  3 21:57:14 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* hurd/hurdrlimit.c (init_rlimit): Restore __mutex_init call.
	(_hurd_rlimit_lock): Set initializer to random value; run-time
	initialization is always required.

	* inet/rcmd.c (rcmd): Compute max fd + 1 for select instead of
	hardcoding 32.

Wed Jun  1 10:52:41 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/hurdrlimit.c (_hurd_rlimits, _hurd_rlimit_lock): Provide
	initializers so that the file is included in the link properly.
	(init_rlimit): Omit call to __mutex_init.

Tue May 31 18:15:33 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* hurd/hurdmalloc.c (more_memory): Do spin_lock_init on H->lock.
	(malloc_init): New function; put it on _hurd_preinit_hook.

	* sysdeps/mach/hurd/defs.c (init_stdio): If stream already
	allocated, don't allocate a new one.  Don't crash if _hurd_alloc_fd
	returns null if __newstream does.

	* sysdeps/mach/hurd/__brk.c (init_brk): If _hurd_brk is nonzero,
	leave it as it is.  Set PAGEND from _hurd_brk instead of &_end.

Mon May 30 18:37:47 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdrlimit.c (init_rlimit): Put this on _hurd_preinit_hook
	instead of _hurd_subinit.

	* sysdeps/mach/hurd/mig-reply.c (mig_fork_child): Function removed.
	* hurd/dtable.c (fork_parent_dtable): Function removed.

	* sysdeps/generic/resourcebits.h: Rename RLIM_NLIMITS to
	RLIMIT_NLIMITS, add alias for old name.

	* sysdeps/mach/hurd/Makefile (hurd-objpfx): New variable.
	(before-compile): Use that instead of $(common-objpfx).

	* sysdeps/mach/Makefile [! objpfx] (mach-objpfx): Add trailing slash.

Fri May 27 01:34:56 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdsig.c (_hurdsig_init): Always initialize _hurd_sigthread.

	* hurd/dtable.c: Use data_set_element instead of text_set_element
	for _hurd_fork_locks.
	* hurd/hurdsig.c: Likewise.

	* hurd/hurd.h (_hurd_set_data_limit): Declaration removed.

	* hurd/dtable.c (_hurd_dtable_rlimit): Variable removed.
	(init_dtable): Don't set it.

	* hurd/Makefile (headers): Add hurd/resource.h.
	(routines): Add hurdrlimit.
	* hurd/hurd/resource.h: New file.
	* hurd/hurdrlimit.c: New file.
	* sysdeps/mach/hurd/getrlimit.c: Rewritten to just fetch
	_hurd_rlimits.
	* sysdeps/mach/hurd/setrlimit.c: Rewritten to just set _hurd_rlimits.
	* sysdeps/mach/hurd/__brk.c (_hurd_data_limit): Variable removed.
	(_hurd_set_brk): Use _hurd_rlimits[RLIMIT_DATA].
	(_hurd_set_data_limit): Function removed.
	* hurd/alloc-fd.c (_hurd_dtable_rlimit): Variable removed.
	(_hurd_alloc_fd): Use _hurd_rlimits[RLIMIT_OFILE] instead.

	* sysdeps/generic/resourcebits.h: Add RLIMIT_NOFILE as an alias
	for RLIMIT_OFILE.

	* sysdeps/mach/hurd/mig-reply.c (__mig_init): Argument is stack
	on which to set the per-thread reply port variable.

	* sysdeps/mach/hurd/__brk.c (init_brk): Set _hurd_data_end to
	DATA_SIZE bytes past the beginning of data space, rather than to
	DATA_SIZE absolutely.  If vm_map fails, set it to PAGEND.

	* sysdeps/mach/hurd/start.c (_start): Run _hurd_preinit_hook right
	after __mach_init.

	* stdio/freopen.c (freopen): Rewritten using __stdio_reopen to
	preserve the old cookie value when possible.
	* sysdeps/posix/sysd-stdio.c (__stdio_reopen): New function.
	* sysdeps/stub/sysd-stdio.c (__stdio_reopen): New function.
	* sysdeps/mach/hurd/sysd-stdio.c (__stdio_reopen): New function.

	* stdio/freopen.c (freopen): Close the stream if MODE is invalid.

	* hurd/hurdsig.c (_hurd_core_limit): Define variable.

	* socket/sys/socket.h (PF_LOCAL): Define in preference to PF_FILE.

Thu May 26 12:09:51 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/alloc-fd.c (_hurd_alloc_fd): Don't return EINVAL when
	FIRST_FD is greater than _hurd_dtablesize and less than
	_hurd_dtable_rlimit.  If we want to grow _hurd_dtable, but
	_hurd_dtablesize is as big as _hurd_dtable_rlimit, then return
	EMFILE.  When growing _hurd_dtable, actually do something if
	_hurd_dtablesize is zero.
	
	* hurd/hurdmalloc.c (malloc_fork_prepare, malloc_fork_parent,
	malloc_fork_child): Declare as static so they don't conflict with
	the user's version of this file.

Wed May 25 20:55:16 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__brk.c: Include <cthreads.h> instead of
	<mutex.h>.

	* hurd/hurdmalloc.c, hurd/hurdmalloc.h: New files (temporary hack).
	* hurd/Makefile (routines): Append hurdmalloc.
	(distribute): Append hurdmalloc.h.
	* hurd/alloc-fd.c: Include "hurdmalloc.h" (temporary hack).
	* hurd/dtable.c: Likewise.
	* hurd/hurdinit.c: Likewise.
	* hurd/hurdsig.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/new-fd.c: Likewise.
	* sysdeps/mach/hurd/start.c: Likewise.

	* sysdeps/mach/hurd/start.c (start1): Use malloc and a for loop
	instead of calloc.
	* hurd/hurdsig.c (_hurd_thread_sigstate): Use malloc and memset
	instead of calloc.

	* sysdeps/mach/hurd/__brk.c (init_brk): Reference self to avoid
	compiler warning.  Add init_brk to _hurd_preinit_hook instead of
	__libc_subinit.

	* sysdeps/mach/hurd/start.c (_hurd_preinit_hook): New variable.
	(start1): Run _hurd_preinit_hook before threadvar setup.

Tue May 24 17:42:34 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/dtable.c (init_dtable): Initialize _hurd_dtablesize to
	_hurd_init_dtablesize.  Initialize _hurd_dtable_rlimit as
	_hurd_dtablesize used to be set, but don't let it be zero.
	(_hurd_dtable_rlimit): New variable.

Tue May 24 12:57:19 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/sleep.c (sleep): Timeout arg to mach_msg is
	in milliseconds, not microseconds; compute it accordingly.

	* sysdeps/mach/hurd/__select.c (__select): Deleted variables
	DTABLE and DTABLE_ULINK.  Use new vars _hurd_dtablesize and
	_hurd_dtable instead of old _hurd_dtable structure.  Use new
	locking protocol on _hurd_dtable.

Tue May 24 01:55:24 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__setitmr.c: Don't include mutex.h.

	* sysdeps/mach/hurd/defs.c (init_stdio): Reference self.

	* sysdeps/unix/sysv/sysv4/i386/sysdep.h: Include
	sysdeps/unix/sysv/i386/sysdep.h, not sysdeps/unix/i386/sysdep.h

Mon May 23 19:05:44 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/Makefile (mib_hacks, defines): Variables removed.

	* mach/devstream.c (mach_open_devstream): Set STREAM's seek and
	fileno io functions to null.

	* hurd/hurdexec.c (_hurd_exec): Fixed adding of dtable ports to
	PLEASE_DEALLOC array.

	* sysdeps/mach/hurd/defs.c (init_stdio): Unlock the descriptors
	after fetching them.  If a standard descriptor is not allocated,
	allocate the structure and store its pointer in the stream anyway.

	* stdio/gets.c: Only return null on P==S if feof (STREAM).

	* stdio/vfprintf.c: Make %Z a type modifier, not a format spec.

	* sysdeps/mach/hurd/fdopen.c: Return NULL rather than -1 for error.

Mon May 23 14:24:50 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__close.c (__close): Use new _hurd_fd_get
	protocol.
	* sysdeps/mach/hurd/__dup2.c (__dup2): Likewise.  Use
	_hurd_dtablesize and _hurd_dtable instead of old _hurd_dtable
	structure.

	* sysdeps/mach/hurd/sysd-stdio.c (__stdio_seek): Use
	HURD_FD_PORT_USE, not HURD_FD_USE.
	* sysdeps/mach/hurd/stdio_init.c (__stdio_init_stream): Variable
	is D, not FD.

	* hurd/alloc-fd.c (_hurd_alloc_fd): Arg FIRST_FD is not actually
	const. 
	* hurd/hurdsig.c (_hurd_internal_post_signal [case SIGINFO]): If
	we are not the process group leader, ignore the signal.
	(_S_sig_post [case SIGURG]): Declaration of D was out of place.

	* sysdeps/mach/hurd/fdopen.c: Include <hurd/io.h> for 
	io_get_openmodes prototype.

Sat May 21 16:03:23 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* assert/assert.c (__assert_fail): Put program name first in msg.

	* hurd/Makefile (dtable): Removed setdtsz.

	* hurd/hurdexec.c: Use _hurd_dtable and _hurd_dtablesize instead of
	old _hurd_dtable structure.
	* hurd/hurdsig.c: Likewise.
	* hurd/alloc-fd.c: Likewise.
	* hurd/hurdioctl.c (rectty_dtable): Likewise.

	* Version 1.08 released.

	* mach/mach_error_string.c: Renamed to errstring.c.
	* mach/Makefile (routines): Renamed mach_error_string to errstring.
	* mach/err_mach_ipc.sub: Renamed to err_mach.sub.
	* mach/err_bootstrap.sub: Renamed to err_boot.sub.

	* sysdeps/generic/sigset.h (__SIGSETFN): Take new arg CONST; use it
	for CONST qualifier on SET arg to generated function.
	Changed uses to pass it; sigismember passes __const, others empty.

	* sysdeps/mach/hurd/sysd-stdio.c: Rewritten to use `struct hurd_fd *'s
	for cookies.
	* sysdeps/mach/hurd/fdopen.c: Rewritten accordinly.
	* sysdeps/mach/hurd/defs.c (init_stdio): Rewritten accordingly.
	Add it to the _hurd_fd_subinit hook instead of the __libc_subinit
	hook.
	* sysdeps/mach/hurd/stdio_init.c: New file.
	* hurd/dtable.c (_hurd_fd_subinit): New hook variable.
	(init_dtable): Run the _hurd_fd_subinit hook.

	* hurd/hurd/fd.h (struct hurd_dtable): Type removed.
	(_hurd_dtable_users, _hurd_dtable_rlimit): Variables removed.
	(_hurd_dtable): Make this a struct hurd_fd **.
	(_hurd_dtablesize): New variable.
	(struct hurd_fd_user): Type removed.
	(_hurd_dtable_get, _hurd_dtable_free, _hurd_dtable_fd): Functions
	removed.
	(_hurd_fd_get): Rewritten.  Take just one arg, and look it up in
	_hurd_dtable; return a struct hurd_fd *.
	(HURD_FD_USE): Rewritten to use new _hurd_fd_get interface.
	* hurd/dtable.c	(_hurd_dtable_users, _hurd_dtable_rlimit):
	Variables removed.
	(_hurd_dtable): Make this a struct hurd_fd **.
	(_hurd_dtablesize): New variable.
	(init_dtable, fork_parent_dtable, fork_child_dtable,
	ctty_new_pgrp, reauth_dtable): Use new simpler _hurd_dtable format.
	* sysdeps/mach/hurd/__getdtsz.c: Use _hurd_dtablesize.
	* sysdeps/mach/hurd/__fcntl.c: Use new _hurd_fd_get protocol.

	* hurd/dtable.c (get_dtable_port): Return the ctty port if set.

	* hurd/hurd/fd.h (_hurd_fd_error_signal): New function, broken out
	of _hurd_fd_error.
	(_hurd_fd_error): Call it.

	* hurd/Makefile (dtable): Add fd-close.
	* hurd/fd-close.c: New file.
	* hurd/hurd/fd.h: Declare _hurd_fd_close.

	* sysdeps/mach/hurd/__close.c: Call _hurd_fd_close.

	* signal/Makefile (routines): Add sigsetops.
	* signal/sigsetops.c: New file.

	* sysdeps/unix/sysv/sysv4/sigset.h (_EXTERN_INLINE): New macro.
	Use it for all the inline functions.

	* signal/signal.h: Move #include <signum.h> inside #ifdef _SIGNAL_H.

	* sysdeps/generic/sigset.h: Protect types with #ifndef
	_SIGSET_H_types.  Protect rest with #if !defined (_SIGSET_H_fns)
	&& defined (_SIGNAL_H).
	(__SIGSETFN): Add extern declaration of NAME inside function.

	* sysdeps/unix/ioctls-tmpl.c: Add missing #endif.
	* sysdeps/unix/Makefile (make-ioctls-CFLAGS): Remember -D.

Fri May 20 20:42:33 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (sys/termios.h): Variable removed.
	(ioctl-includes): New variable.
	(make-ioctls-CFLAGS): Compute value generally from $(ioctl-includes).
	($(common-objpfx)ioctls): Depend on $(ioctl-includes), instead of
	$(sys/termios.h).

	* sysdeps/unix/sysv/sco3.2.4/sco_getgrp.S: New file.
	* sysdeps/unix/sysv/sco3.2.4/Makefile (sysdep_routines): Add
	sco_getgrp.
	* sysdeps/unix/sysv/sco3.2.4/__getgrps.c: New file.

	* sysdeps/generic/sigset.h (__sigismember, __sigaddset, __sigdelset):
	Rewritten as extern inline functions; check for bogus signal number.

	* configure.in (names): Put $implied before $* in new $sysnames
	list remaining to be processed; this ensures unix/common precedes
	unix/sysv4 for sysv4.

Thu May 19 18:35:02 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/defs.c (init_stdio): Make stdin and stdout
	line buffered and stderr unbuffered.

Thu May 19 16:14:36 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/getcwd.c: Remember to call io_stat on cwdir.

	* sysdeps/generic/configure.in: Use changequote around if expr
	to avoid [] elision.

Thu May 19 13:53:59 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* hurd/hurdsock.c (_hurd_socket_server): Return EPFNOSUPPORT
	rather than EPROTONOSUPPORT because it's the entire protocol
	family that isn't present, not just one protocol.

	* sysdeps/mach/hurd/__access.c (__access): Don't deallocate
	CRDIR or CWDIR; that's taken care of by the _hurd_port_get
	and _hurd_port_free system.

Thu May 19 04:14:57 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/libc_fatal.c: Include <errno.h>.

	* sysdeps/unix/sysv/sysv4/__sigact.c: Include <stddef.h> for NULL.

	* sysdeps/mach/hurd/__access.c: Fix swapped poly and count args in
	__auth_makeauth call.

	* sysdeps/mach/hurd/ioctls.h (_IOC, _IOT): Rewritten using bitwise
	operations, so the result is always technically a constant (the
	old method of using a union constructor expression was not good
	enough for initializers).

	* hurd/hurdsock.c (_hurd_socket_server): If path_lookup returns
	ENOENT, we return EPROTONOSUPPORT.

	* hurd/Makefile (dtable): Add hurdioctl.
	* hurd/dtable.c (rectty_dtable, tiocsctty, tiocnotty): Functions
	moved:
	* hurd/hurdioctl.c: New file.
	(fioctl, fioclex): New functions.
	* sysdeps/mach/hurd/__ioctl.c (_hurd_ioctl_handler_lists): Don't
	define it, just declare it.

	* sysdeps/mach/hurd/getcwd.c: Use MACH_PORT_RIGHT_SEND, not
	MACH_PORT_TYPE_SEND, in mach_port_mod_refs call.

	* sysdeps/mach/hurd/__getpgrp.c: Don't lock _hurd_pid_lock.

	* sysdeps/unix/common/glue-ctype.c: Don't include <ctype.h>.
	Instead, add explicit extern declaration of TABLE in main.

Wed May 18 17:54:00 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/Makefile (asm-CPPFLAGS): Append $(m68k-syntax-flag).

	* Version 1.07.6.

	* sunrpc/Makefile (+gccwarn): Set to -w.

	* sysdeps/unix/Makefile (ifeq testing sys/param.h): Use patsubst
	instead of dir to remove directory name from .../sys/param.h but
	preserve "sys/".

	* inet/sys/bitypes.h: Replaced with just #include <sys/types.h>.

	* posix/sys/utsname.h (_UTSNAME_NODENAME_LENGTH): If undefined,
	define to _UTSNAME_LENGTH.
	(struct utsname): Use _UTSNAME_NODENAME_LENGTH for `nodename' member.
	* sysdeps/unix/bsd/sun/sunos4/utsnamelen.h (_UTSNAME_NODENAME_LENGTH):
	Define it.

	* resource/sys/resource.h (enum __rlimit_resource): Removed.
	Just include <resourcebits.h> instead.
	* resource/Makefile (headers): Add resourcebits.h.
	* sysdeps/generic/resourcebits.h: New file.
	* sysdeps/unix/bsd/sun/sunos4/resourcebits.h: New file.

	* stdio/test-popen.c (main): Use popen to read the file back, too.

	* sysdeps/unix/sysv/sysv4/i386/sysdep.h: New file.

	* sysdeps/unix/sysv/sysv4/i386/sys-sig.S: Fixed typo: movel->movl.

Tue May 17 12:46:31 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* mach/mach/mach_traps.h (__mach_reply_port, __mach_thread_self,
	__mach_task_self, __mach_host_self): New declarations of __ 
	versions of syscall traps.
	(swtch, __swtch, swtch_pri, __swtch_pri, thread_switch,
	__thread_switch, evc_wait, __evc_wait): New prototypes.
	* mach/Makefile (headers): Added mach/mach_traps.h so that the
	GNU version is installed instead of the Mach version.
	
Mon May 16 15:34:12 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/sys/param.h: New file.

	* mach/lock-intern.h (__mutex_lock, __mutex_unlock): Real definitions.
	(__mutex_lock_solid, __mutex_unlock_solid, __mutex_init): Declare
	them.
	* mach/mutex-solid.c: New file.
	* mach/Makefile (lock): Add mutex-solid.
	(lock-headers): Remove mutex.h.
	* mach/mutex.h: File removed.
	* hurd/hurd/id.h: Include <cthreads.h> instead of <mutex.h>.
	* hurd/hurd/signal.h: Likewise.
	* hurd/hurdsig.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/dtable.c: Likewise.
	* hurd/__setauth.c: Likewise.
	* sysdeps/mach/hurd/Makefile (includes): Also append
	-I$(hurd-srcdir)/libthreads.

	* sysdeps/posix/system.c [WAITPID_CANNOT_BLOCK_SIGCHLD]: Don't
	block SIGCHLD.
	* sysdeps/unix/sysv/sco3.2.4/system.c
	(WAITPID_CANNOT_BLOCK_SIGCHLD): Define this macro.

	* sysdeps/posix/sigintr.c (siginterrupt) [! SA_RESTART]: Always
	fail with ENOSYS.

	* sysdeps/posix/__sigvec.c [! SA_ONSTACK]: Fail with ENOSYS if
	SV_ONSTACK is set in VEC->sv_flags.
	[SA_RESTART]: Protect SV_INTERRUPT check with this.

	* sysdeps/mach/sysdep.h (FATAL_PREPARE): New macro.
	* sysdeps/posix/libc_fatal.c: Include <sysdep.h>.
	[FATAL_PREPARE]: Invoke the macro.
	* assert/assert.c: Likewise.

	* sysdeps/generic/memmem.c: Start BEGIN at HAYSTACK, not partway
	into it.  Loop until BEGIN passes the location in HAYSTACK with
	NEEDLE_LEN bytes remaining to the end.
	Compare first byte manually before calling memcmp.

	* sysdeps/unix/sysv/sco3.2.4/__sigact.S: Fix typo.

	* posix/sys/types.h [__USE_BSD] (int32_t, int16_t, int8_t,
	u_int32_t, u_int16_t, u_int8_t): New typedefs.

	* assert/assert.c (__assert_program_name): New variable.
	(__assert_fail): Print that in the msg too.
	[HAVE_GNU_LD] (set_progname): New function to set it up at startup.

Thu May 12 01:10:52 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/__setauth.c: Do critical section locking.
	* hurd/hurdexec.c: Likewise.
	* hurd/hurdauth.c (_S_del_auth): Likewise.
	* hurd/getuids.c: Likewise.
	* hurd/dtable.c: Likewise.
	* hurd/alloc-fd.c: Likewise.
	* hurd/hurd/port.h: Likewise.
	* hurd/hurd/fd.h: Likewise.
	* hurd/setuids.c: Likewise.
	* hurd/intern-fd.c: Likewise.
	* hurd/hurdsock.c (_hurd_socket_server): Likewise.
	* sysdeps/mach/hurd/setrlimit.c: Likewise.
	* sysdeps/mach/hurd/setgroups.c: Likewise.
	* sysdeps/mach/hurd/seteuid.c: Likewise.
	* sysdeps/mach/hurd/setegid.c: Likewise.
	* sysdeps/mach/hurd/getrlimit.c: Likewise.
	* sysdeps/mach/hurd/__setuid.c: Likewise.
	* sysdeps/mach/hurd/__setreuid.c: Likewise.
	* sysdeps/mach/hurd/__setregid.c: Likewise.
	* sysdeps/mach/hurd/__setitmr.c: Likewise.
	* sysdeps/mach/hurd/__setgid.c: Likewise.
	* sysdeps/mach/hurd/__select.c: Likewise.
	* sysdeps/mach/hurd/__sbrk.c: Likewise.
	* sysdeps/mach/hurd/__getuid.c: Likewise.
	* sysdeps/mach/hurd/__getpgrp.c: Likewise.
	* sysdeps/mach/hurd/__getitmr.c: Likewise.
	* sysdeps/mach/hurd/__getgrps.c: Likewise.
	* sysdeps/mach/hurd/__getgid.c: Likewise.
	* sysdeps/mach/hurd/__geteuid.c: Likewise.
	* sysdeps/mach/hurd/__getegid.c: Likewise.
	* sysdeps/mach/hurd/__getdtsz.c: Likewise.
	* sysdeps/mach/hurd/__fork.c: Likewise.
	* sysdeps/mach/hurd/__fcntl.c: Likewise.
	* sysdeps/mach/hurd/__dup2.c: Likewise.
	* sysdeps/mach/hurd/__close.c: Likewise.
	* sysdeps/mach/hurd/__brk.c: Likewise.
	* sysdeps/mach/hurd/__access.c: Likewise.

	* sysdeps/mach/hurd/reboot.c (reboot): Use the host priv port to
	prove authority.

	* sysdeps/mach/hurd/__readlink.c: Don't request O_READ access.

	* sysdeps/mach/hurd/__ioctl.c: Don't expect result data	unless
	return code is zero.  Translate MIG_BAD_ID or EOPNOTSUPP to ENOTTY.

	* mach/devstream.c (output): Use device_write instead of
	device_write_inband.

Wed May 11 18:49:31 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/hurdinit.c (_hurd_init): Finsih loop of _hurd_port_init on
	_hurd_ports elts before doing _hurd_proc_init or
	__task_set_special_port.

	* hurd/hurd/signal.h (struct hurd_sigstate): Add new
	`critical_section' member.  Remove #if 0'd out vfork crap.
	(_hurd_critical_section_lock, _hurd_critical_section_unlock): New
	functions. 
	(HURD_CRITICAL_BEGIN, HURD_CRITICAL_END): New macros.

	* io/Makefile (headers): Add poll.h and sys/poll.h.
	(routines): Add poll.
	* sysdeps/unix/bsd/sun/sunos4/poll.S: New file.
	* sysdeps/unix/sysv/poll.S: New file.
	* sysdeps/unix/bsd/poll.c: New file.
	* sysdeps/stub/poll.c: New file.
	* io/poll.h, io/sys/poll.h: New files.

	* misc/bsd-compat.c (setjmp): New function.

	* sysdeps/unix/Makefile (sysdep_headers): Remove sys/param.h.
	* misc/Makefile (headers): Add it here instead.

	* io/test-utime.c (main): New file.
	* io/Makefile (tests): New variable.

Wed May 11 13:44:33 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* hurd/hurd/threadvar.h (__hurd_errno_location): Remove 
	__volatile keyword.  `volatile int errno' is not the same
	as `int errno'; user programs often mention the latter.
	* errno.h: Remove __volatile keyword; same reason.

Tue May 10 17:21:41 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/zdump.c: New code from ADO.

	* time/difftime.c (difftime): Use hairy rounding algorithm from
	eggert@twinsun.com when sizeof (time_t) >= sizeof (double).

	* Makerules (native-CFLAGS): Remove -I$(sysincludedir).  RMS says
	people with bogons in /usr/local/include deserve to lose.

	* stdio/printf_fp.c (__printf_fp): If IS_NEG gets set, negate
	FPNUM before testing it for %g format choice.

	* sysdeps/unix/sysv/irix4/fcntlbits.h: New file.
	* sysdeps/unix/sysv/irix4/Dist: New file.
	* sysdeps/unix/sysv/irix4/readv.c: New file.
	* sysdeps/unix/sysv/irix4/writev.c: New file.
	* sysdeps/unix/sysv/irix4/__dup2.c: New file.

	* sunrpc/xdr_float.c (xdr_float): Change [mc68000 || sparc] to [!
	vax].

	* sysdeps/mips/setjmp.S: Remove spurious $.

	* sysdeps/generic/ftime.c: Include <errno.h>.

	* sysdeps/unix/mips/sysdep.S: Add .set noreorder.

Tue May 10 16:27:13 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/generic/termbits.h (NCCS): Doc fix.

Mon May  9 18:07:44 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/uname.c (uname): System uname information
	has moved from init to proc.

	* sysdeps/mach/usleep.c (usleep): Return correct value.  Destroy
	RECV when we're done with it.

Thu May  5 17:03:56 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__lstat.c: Use O_NOLINK instead of O_NOTRANS.

Thu May  5 04:20:54 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/spin-lock.h (spin_lock_init): Define.

	* sysdeps/mach/hurd/sigsuspend.c: New local variable NEWMASK, set
	it to *SET if SET is not null, before taking SS->lock; don't
	dereference SET while holding the lock.  Restore SS->blocked to
	OLDMASK before unlocking and returning.

	* hurd/hurdsig.c (hurdsig_fork_child): Return zero.

	* sysdeps/mach/hurd/__fork.c (_hurd_fork_parent_hook,
	_hurd_fork_prepare_hook)): Define variables (symbol sets).
	(__fork): Run _hurd_fork_prepare_hook and _hurd_fork_parent_hook.

	* sysdeps/mach/hurd/sigsuspend.c: Don't test SS->pending; instead
	wait until SS->suspended is cleared.
	* hurd/hurdsig.c (_hurd_internal_post_signal): Clear SS->suspended
	before signalling on SS->arrived.

	* mach/Makefile (headers): Added mach/default_pager_helper.defs.

	* sysdeps/sparc/Dist: Added alloca.S.

Wed May  4 14:02:29 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/hurdexec.c (_hurd_exec): Unlock _hurd_dtable_lock when
	all through.

	* sysdeps/mach/hurd/__setitmr.c: Changed _hurd_itimer_lock
	to be a spin_lock; changed mutex_lock and mutex_unlock
	accordingly throughout.
	* sysdeps/mach/hurd/__getitmr.c: Corresponding changes from
	mutex calls to spin lock calls here too.

	* sysdeps/mach/hurd/__setitmr.c (setitimer_locked): Fixed syntax 
	of declaration of PREEMPT.
	(setitimer_locked): Declare variables ERR and ELAPSED.
	(setitimer_locked): Fix some references to REMAINING that 
	were using it as an itimerval instead of a timeval.
	(setitimer_locked): Deleted unused label STILLBORN.

Wed May  4 00:17:32 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/__getitmr.c: Fix arg name __WHICH to WHICH.

	* sysdeps/unix/bsd/alarm.c: Round tv_usec with arithmetic rather
	than a test.

	* hurd/Makefile (user-interfaces): Add hurd/msg_request.

	* sysdeps/stub/__setitmr.c: Fix arg name __WHICH to WHICH.

	* Makeconfig (cross-compiling): Define if $(HOST_CC) and $(CC) differ.
	* time/Makefile (install-others): Omit defn ifdef cross-compiling.

Tue May  3 23:12:48 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/Makefile (lock-headers): Add spin-lock.h.

	* misc/Makefile (routines): Add madvise.

	* malloc/Makefile (non-lib.a): Define.
	* misc/Makefile (non-lib.a): Define.
	* Makerules (install-lib.a): Filter out $(non-lib.a).
	(install-lib-non.a): Append $(non-lib.a).

	* mach/Makefile (mach-headers): Rename sys/version.h to
	mach/version.h.

	* hurd/Makefile (headers): Added hurd/threadvar.h.

	* Version 1.07.5.

	* hurd/port2fd.c (_hurd_port2fd): Use logic copied from
	_hurd_port_locked_set to install PORT in D->port, but leave it locked.

	* sunrpc/Makefile (generated): Don't add $(objpfx).

	* sysdeps/stub/machine-lock.h: New file.
	* sysdeps/stub/machine-sp.h: New file.

Tue May  3 22:31:15 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/usleep.c (usleep): Specify MACH_RCV_MSG so that
	mach_msg actually waits.

Tue May  3 19:24:48 1994  Karl Heuer  (kwzh@hal.gnu.ai.mit.edu)

	* malloc/malloc.h (enum mcheck_status): Delete trailing
	comma in enum list; some compilers don't like it.

Tue May  3 15:18:15 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__symlink.c (__symlink): Pass port type arg to
	__file_set_translator.

Mon May  2 17:56:47 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* hurd/Makefile (generated): Add $(inlines) .c files.

	* sysdeps/mach/hurd/__mknod.c: Pass port type arg to
	__file_set_translator.

Sun May  1 16:03:13 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/mig_syms.c: Add de-__ing aliases for mig_init,
	mig_get_reply_port, and mig_dealloc_reply_port.

	* sysdeps/mach/hurd/errnos.awk: Handle copying errors from
	mach/mig_errors.h and device/device_types.h.  Omit E*_SUCCESS.
	Omit MACH_MSG_MASK and other special bit macros.

	* sysdeps/mach/hurd/i386/sigcontext.h (struct sigcontext): Added
	sc_reply_port member.
	* hurd/hurdsig.c (fetch_reply_port): New function.
	(_hurd_internal_post_signal): When setting up to run handler, set
	SCP->sc_reply_port to the receiving thread's value for
	_HURD_THREADVAR_MIG_REPLY.
	* sysdeps/mach/hurd/i386/__sigret.c: Destroy the MiG reply port
	used by the signal handler, and restore from SCP->sc_reply_port.
	* hurd/hurd/threadvar.h (__hurd_threadvar_location_from_sp): New
	function; guts from __hurd_threadvar_location.
	(__hurd_threadvar_location): Call that.

	* hurd/hurdsig.c (check_pending): New function, broken out of:
	(_hurd_internal_post_signal): Call that for pending signal check.
	If SIGNO is zero, call check_pending on each thread's sigstate.

	* sysdeps/mach/hurd/start.c (start1): Use calloc to get
	zero-filled space for __hurd_threadvar_stack_offset when
	__hurd_threadvar_stack_mask is zero.

Thu Apr 28 21:29:47 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Merged gmp-1.99.3+ mpn code from tege for printf_fp.
	* stdio/printf_fp.c: Include "longlong.h"; gmp-impl.h no longer does.
	
	* Makerules (+depfiles): Filter $(extra-objs) to get only .o files.

Wed Apr 27 00:20:41 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (depend-$(subdir)): Put output in tmp file and use mv -f.
	Always use $(+depfiles), since sources is no longer exported.

Tue Apr 26 20:05:55 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/bsd4.4/tcdrain.c: Don't include <termios.h> to 
	avoid <sys/ioctl.h> conflicts.
	* sysdeps/unix/bsd/bsd4.4/tcsetattr.c: Undefine ECHO, MDMBUF,
	TOSTOP, FLUSHO, PENDIN, and NOFLSH after including <termios.h> and
	before including <sys/ioctl.h>.
	* sysdeps/unix/bsd/bsd4.4/__tcgetatr.c: Likewise.

Tue Apr 26 14:42:43 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/sleep.c (sleep): Specify MACH_RCV_MSG or else
	mach_msg won't do anything but return immediately.
	(sleep): Compute return value correctly.

Tue Apr 26 04:49:56 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/i386/setjmp.c: Put global register decls first thing.
	* sysdeps/i386/__longjmp.c: Likewise.

Fri Apr 22 18:10:36 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/irix4/__wait3.S: New file.
	* sysdeps/unix/sysv/irix4/time.S: New file.
	* sysdeps/unix/sysv/irix4/__waitpid.c: New file.

Thu Apr 21 16:54:11 1994  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/malloc.c (initialize, morecore): When allocating the
	_heapinfo block itself, account for it in the statistics.

Tue Apr 19 20:17:06 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/pipestream.c: New file.

	* malloc/malloc.c (morecore): Only zero the new part of NEWINFO,
	not the part we will copy _heapinfo into.

	* sysdeps/unix/bsd/signum.h (SIGLOST): Define.
	(_NSIG): Increase to 33.

Mon Apr 18 16:56:11 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (config.status): Use $configure_args instead of
	$ac_configure_args.
	(after AC_PREPARE): Call AC_LANG_C.

	* time/Makefile (routines): Add sys/timeb.h.
	(routines): Add ftime.
	* time/sys/timeb.h: New file.
	* sysdeps/unix/bsd/ftime.c: New file.
	* sysdeps/generic/ftime.c: New file.

	* sysdeps/posix/getenv.c (getenv): Return NULL if __environ is null.

	* malloc/malloc.h [_MALLOC_INTERNAL] [HAVE_UNISTD_H]: Include
	unistd.h.

	* malloc/Makefile (gmalloc-routines): Put valloc first.

Wed Apr 13 14:03:02 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__symlink.c (__symlink): Set the target of the
	link to FROM, not TO.

	* sysdeps/mach/hurd/__readlink.c (__readlink): Copy just the
	target into the user's buffer, not the entire translator spec.

Tue Apr 12 00:13:19 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* hurd/fd-write.c (_hurd_fd_write): Set noctty for now rather
	than depending on what happens to be on the stack.

	* sysdeps/mach/hurd/readdir.c (readdir): Notice when hitting
	end-of-file and return NULL.

Mon Apr 11 17:36:59 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/start.c (start1): Bother to set __environ.

	* sysdeps/mach/hurd/__ioctl.c (__ioctl): Comment out use of 
	HURD_EINTR_RPC until signals work.

Mon Apr 11 14:16:40 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/__ioctl.c (__ioctl): Call __mig_get_reply_port
	rather than __mig_reply_port (which doesn't exist).

	* sysdeps/mach/hurd/__mknod.c: Added temporary declarations
	of major and minor.

	* (This change occurred on April 4, 1994) mach/setup-thread.c
	(__mach_setup_thread): The March 31 change had an error; the stack
	needs to be allocated with ANYWHERE cleared.

	* (This change occurred on April 8, 1994) hurd/hurdexec.c
	(_hurd_exec): The arguments to exec_exec had the length and 
	type parameters transposed.  In addition, fetch the correct
	procserver port for the new task.

	* (This change occurred on April 8, 1994)
	sysdeps/mach/hurd/__wait.c (__wait4): Deal properly with a null
	USAGE argument.

	* (This change occurred on April 8, 1994)
	sysdeps/mach/hurd/_exit.c (_exit): Changed commented-out call to
	__proc_exit into a correct call to __proc_mark_exit.

Fri Apr  8 14:58:24 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* string/strsignal.c (strsignal): Store of NUL into unknown_signal
	was off by one.

Tue Apr  5 21:26:25 1994  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/__sigact.c (__sigaction): Declare member
	`oact' in lower case, to match its use in the rest of the function.

Tue Apr  5 03:07:04 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (install-lib.a rule): Run ranlib on the target.

	* Makerules (library member rule): Tighten up pattern rule to
	match only libc.a, not other libraries.

Mon Apr  4 21:49:57 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* set-hooks.h: New file.
	* Makefile (distribute): Add it.
	* set-init.c: Include it and use its macro DEFINE_HOOK_RUNNER.

	* Makerules (sysd-Makefile): Put `sysd-Makefile-done=t' in output.
	(sysd-rules): Don't include it unless sysd-Makefile-done is defined.

Mon Apr  4 18:33:54 1994  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* mach/setup-thread.c (__mach_setup_thread): Oops; the vm_allocate
	call should have ANYWHERE cleared so that the change of the 31st
	has any effect at all.

Thu Mar 31 13:46:13 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* mach/setup-thread.c (__mach_setup_thread): Create a red zone
	beneath the stack; also, work around a bug in cthreads by
	forcing the stack into high memory.  FIXME--this routine
	depends on the direction of stack growth; that should be fixed.

Mon Mar 28 12:55:51 1994  Roland McGrath  (roland@mole.gnu.ai.mit.edu)

	* Rules (make-dummy-lib): Use `$(AR)' instead of literal `ar'.

	* configure.in (arg parsing): Don't take --os-release or --os-version.
	(switches): Variable removed; don't write it into config.status.
	(config.status): Write release and version values directly.

	* sysdeps/unix/common/configure.in: Use changequote around if expr
	to avoid [] elision.

Sat Mar 26 18:36:27 1994  Roland McGrath  (roland@mole.gnu.ai.mit.edu)

	* malloc/mcheck.c [! _MALLOC_INTERNAL]: #include <stdio.h>

Fri Mar 25 02:17:55 1994  Roland McGrath  (roland@mole.gnu.ai.mit.edu)

	* malloc/mcheck.c (mprobe): New function.
	(abortfunc): Take enum mcheck_status arg.
	(checkhdr): Return an enum mcheck_status, and pass it to abortfunc.
	(mabort): New function.
	(mcheck): Use mabort as default abortfunc.
	* malloc/malloc.h (enum mcheck_status): New type.
	(mprobe): Declare new function.
	(mcheck): ABORTFUNC takes an `enum mcheck_status' arg.

	* posix/unistd.h [__USE_GNU] (TEMP_FAILURE_RETRY): New macro.

	* stdio/stdio.h [__USE_GNU && !_LIBC] (cookie_io_functions_t):
	Define instead of __io_functions (and make that a typedef for
	this); omit __ from member names.

Thu Mar 24 14:59:23 1994  Roland McGrath  (roland@mole.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/sigaction.h: New file.

	* sysdeps/unix/sysv/sco3.2.4/__sigact.S: Put address of
	__sigreturn in %ecx before doing syscall trap.

	* sysdeps/stub/setegid.c: Fix arg type to __gid_t (was int).

Wed Mar 23 17:33:09 1994  Roland McGrath  (roland@mole.gnu.ai.mit.edu)

	* Makefile (headers): Remove $(stdarg.h).
	* Makeconfig (stdarg.h): Variable removed.
	* configure.in: Remove check for __gnuc_va_list in stdarg.h.
	It is not safe to replace the compiler's stdarg.h with our own.

Tue Mar 22 12:46:08 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Rules (dist): Rule removed.
	* Makefile (dist): Likewise.
	* Makerules (dist, distinfo): New rules.
	(TAGS): Depend on distfile, pass -f distfile to submake.

	* math/Makefile: Remove if-ed out old bsdmath copying rules.

	* Makerules (sources, headers, sysdep_routines): Don't export these.
	* Rules (others, tests): Likewise.

	* io/lockf.c: Include fcntl.h and errno.h.

Mon Mar 21 20:27:32 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sony/newsos4/fchdir.S: New file.
	* sysdeps/unix/bsd/sony/newsos4/{__wait4.c,__wait3.c,__wait.c,
	sys_wait4.S,Makefile,Dist}: New files.

	* sysdeps/unix/Makefile (syscall.h): De-SYS_ify `kerncall_basenum'.

	* sysdeps/unix/bsd/m68k/sysdep.S [! __motorola__]: Rename label 0
	to `store'; a user reports gas 1.38 bombs on numbered labels.

	* sysdeps/posix/Makefile (mk-stdiolim): Use $(HOST_CC).

	* Rules (distribute, dont_distribute, generated): Don't export them.
	(dist): Pass those vars down to sub-make on cmd line.
	* Makefile (distribute, generated): Don't export them.
	(dist): Pass distribute and generated values to sub-make on cmd line.

	* Makerules (install-lib-nosubdir): Insert $(libprefix) appropriately.

Fri Mar 18 01:02:52 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sony/newsos/m68k/sysdep.h (DO_CALL): Use a6 in
	place of fp.  A user reports gas 1.38 doesn't grok fp.

Tue Mar  8 18:35:02 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (common-clean): Prepend $(objpfx) to $(generated).
	* Makefile (parent-clean): Prepend $(common-objpfx) to
	$(common-generated).
	* Makefile (generated): Don't prepend $(objpfx).
	* Rules (generated): Likewise.
	* sysdeps/unix/common/Makefile (generated): Likewise.
	* sysdeps/unix/sysv/Makefile (generated): Likewise.
	* sysdeps/unix/Makefile (common-generated): Don't prepend
	$(common-objpfx).
	* sysdeps/posix/Makefile (common-generated): Likewise.
	* sysdeps/generic/Makefile (common-generated): Likewise.
	(generated): Don't prepend $(objpfx).

	* sysdeps/generic/Makefile (common-generated): Set this instead of
	generated for bytesex.h and det_endian.

	* sysdeps/stub/fexecve.c: New file.
	* posix/Makefile (routines): Add fexecve.
	* posix/unistd.h [__USE_GNU]: Declare fexecve.

	* sysdeps/unix/common/configure.in: Protect siglist and ctype
	checks with if [ ! "$inhibit_glue" ].
	* sysdeps/generic/configure.in: Likewise for psignal check.
	* sysdeps/unix/common/Makefile: Protect body with ifndef inhibit-glue.

Mon Mar  7 17:46:46 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/osf1/alpha/__sigblock.S: New file from brendan.

Fri Mar  4 01:56:26 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (native-compile, common-objdir-compile): Use
	$(HOST_CC) in place of $(CC).

	* malloc/cfree.c: Move #undef cfree inside #ifdef _LIBC.

	* misc/sys/ioctl.h (struct ttysize): If TIOCGSIZE != TIOCGWINSZ,
	use two int elts instead of four shorts.

Thu Mar  3 17:35:54 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/realloc.c (realloc): When shrinking a block by splitting
	and then freeing one, bump the _chunks_used counter.

	* sysdeps/unix/sysv/sysv4/i386/__mknod.S: New file.

Tue Mar  1 11:42:41 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/__waitpid.S: Get first argument from
	stack at 8(%esp), not 4(%esp).

	* sysdeps/unix/sysv/isc2.2/rename.S: Get unix/common, not unix/bsd.

Thu Feb 24 14:40:43 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* io/lockf.c: New file.
	* io/Makefile (routines): Add lockf.
	* io/fcntl.h [__USE_MISC] (F_ULOCK, F_LOCK, F_TLOCK, F_TEST): New
	macros.
	[__USE_MISC] (lockf): Declare it.
	* posix/unistd.h: Copy those new macros and declaration.

	* time/backward, time/etcetera, time/zic.c: New code and data from ADO.
	* Makeconfig (posixrules): Default to America/New_York.

	* sysdeps/unix/mips/sysdep.S: Store -1 in v0 in the delay slot after
	the return, rather than before (leaving the delay slot unfilled and
	without a nop!).

	* sysdeps/unix/sysv/irix4: New directory; mips-sgi-irix4 port
	courtesy Tom Quinn.

	* sysdeps/unix/sysv/sysv4/direct.h: Moved to unix/common; it is right
	for irix4 as well as sysv4.
	* sysdeps/unix/bsd/ultrix4/__wait.S: Moved to unix/mips.
	(noerror): Store register v1 in location pointed to by first arg (if
	not NULL).
	* sysdeps/unix/bsd/ultrix4/__sigret.S: Moved to unix/mips.

	* sysdeps/unix/bsd/bsd4.4/{mmap,munmap,mprotect,msync,madvise}.S:
	Moved to sysdeps/unix/mman (new directory).
	* sysdeps/unix/bsd/bsd4.4/Implies: New file; imply unix/mman.
	* sysdeps/unix/bsd/sunos4/Implies: Likewise.
	* sysdeps/unix/bsd/ultrix4/Implies: Likewise.
	* sysdeps/unix/bsd/osf1/Implies: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/munmap.S,
	sysdeps/unix/bsd/sun/sunos4/mprotect.S,
	sysdeps/unix/bsd/sun/sunos4/madvise.S,
	sysdeps/unix/bsd/ultrix4/mmap.S,
	sysdeps/unix/bsd/ultrix4/munmap.S,
	sysdeps/unix/bsd/ultrix4/mprotect.S,
	sysdeps/unix/bsd/osf1/mmap.S,
	sysdeps/unix/bsd/osf1/munmap.S,
	sysdeps/unix/bsd/osf1/mprotect.S: Files removed.

	* sysdeps/unix/sysv/sysv4/fcntlbits.h: Moved to sysdeps/unix/common.

	* stdio/printf_fp.c: Add many assertions to make sure no mpn size
	variable is ever zero.

	* Makerules (native-CFLAGS): Add -I$(sysincludedir).

	* Makerules (depend-$(subdir)) [omit-deps]: Use $(+depfiles) value
	instead of shell hackery.

Wed Feb 23 00:09:08 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/sparc/alloca.S [! NO_UNDERSCORES]: Call it ___builtin_alloca.

Tue Feb 22 18:47:10 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sunos4/sys/mman.h: Use __off_t in mmap
	prototype.

	* time/setitmr.c: Swap args OLD and NEW.
	* time/sys/time.h (setitimer): Likewise.
	* sysdeps/stub/__setitmr.c: Likewise.

Mon Feb 21 20:47:55 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/sparc/Makefile [gnulib] (routines): Add alloca.
	* sysdeps/sparc/alloca.S: New file; support for SunOS libc's
	`__builtin_alloca' function (never needed with GCC).

	* sysdeps/unix/sysv/sysv4/__sigact.c (trampoline): Cast handler to
	three-arg type.

Sun Feb 20 00:46:15 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sunos4/mmap.c: Add missing semicolon.

	* sysdeps/unix/sparc/start.c [! NO_SHLIB]: Include <sys/types.h>
	before <sys/mman.h>.

	* sysdeps/unix/bsd/ultrix4/mips/{sysdep.h,sysdep.S,__pipe.S,
	__fork.S,__brk.S}: Moved to sysdeps/unix/mips (new directory).

	* sysdeps/unix/bsd/ultrix4/mips/__sigret.S: Use SYS_sigreturn
	instead of literal 103; #define to 103 if not already defined.

Sat Feb 19 17:39:13 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sysv4/i386/Dist: New file; list sys-sig.S.

Fri Feb 18 18:07:34 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/configure.in: New file; check for psignal.

	* sysdeps/unix/common/glue-ctype.c: Check for table named _ctype,
	before checking for _ctype_.
	* sysdeps/unix/common/configure.in: Check for _ctype.

	* sysdeps/unix/Makefile (syscall.h): Look for sys.s before syscall.h.
	* sysdeps/unix/configure (unix_syscall_h): Likewise.

	* configure.in (os = irix4*): Set base_os=unix/sysv.

	* sunrpc/rpc/auth.h (u_int32): Always define, no #ifdefs.
	* sunrpc/xdr_float.c: Change [mc68000 || sparc] to [! vax].

Thu Feb 17 18:42:29 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.07.4.

	* sysdeps/unix/bsd/sun/sunos4/Dist: Add sys_mmap.S.

	* Makerules (sysdep_dir): Remove defn.
	* Makeconfig (sysdep_dir): Define it here instead.

Wed Feb 16 16:54:00 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sysv4/__sigact.c: New file.
	* sysdeps/unix/sysv/sysv4/i386/Makefile: New file.
	* sysdeps/unix/sysv/sysv4/i386/sys-sig.S: New file.

	* time/sys/time.h (timerisset, timercmp, timerclear): New macros.

	* misc/Makefile (headers): Add sys/mman.h.
	(routines): Add mmap, munmap, mprotect, msync.
	* sysdeps/unix/bsd/sun/sunos4/sys_mmap.S: New file.
	* sysdeps/unix/bsd/sun/sunos4/mmap.c: New file.
	* sysdeps/unix/bsd/sun/sunos4/Makefile [$(subdir) == misc]
	(sysdep_routines): Add sys_mmap.
	* sysdeps/unix/bsd/bsd4.4/mprotect.S: New file.
	* sysdeps/unix/bsd/bsd4.4/munmap.S: New file.
	* sysdeps/unix/bsd/bsd4.4/msync.S: New file.
	* sysdeps/unix/bsd/bsd4.4/mmap.S: New file.
	* sysdeps/unix/bsd/bsd4.4/madvise.S: New file.
	* sysdeps/unix/bsd/sun/sunos4/mprotect.S: New file.
	* sysdeps/unix/bsd/sun/sunos4/munmap.S: New file.
	* sysdeps/unix/bsd/sun/sunos4/msync.S: New file.
	* sysdeps/unix/bsd/sun/sunos4/madvise.S: New file.
	* sysdeps/unix/bsd/ultrix4/sys/mman.h: New file.
	* sysdeps/unix/bsd/ultrix4/mmap.S: New file.
	* sysdeps/unix/bsd/ultrix4/munmap.S: New file.
	* sysdeps/unix/bsd/ultrix4/mprotect.S: New file.
	* sysdeps/stub/mprotect.c: New file.
	* sysdeps/stub/munmap.c: New file.
	* sysdeps/stub/msync.c: New file.
	* sysdeps/stub/mmap.c: New file.
	* sysdeps/stub/madvise.c: New file.
	* sysdeps/generic/sys/mman.h: New file.
	* sysdeps/unix/bsd/sun/sunos4/sys/mman.h: New file.
	* sysdeps/unix/bsd/osf1/msync.S: New file.
	* sysdeps/unix/bsd/osf1/mmap.S: New file.
	* sysdeps/unix/bsd/osf1/munmap.S: New file.
	* sysdeps/unix/bsd/osf1/mprotect.S: New file.
	* sysdeps/unix/bsd/osf1/sys/mman.h: New file.

Tue Feb 15 16:47:45 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/unistd.h: Declare truncate, ftruncate.

	* misc/Makefile (headers): Add syslog.h.
	* misc/syslog.h: New file; just includes <sys/syslog.h>.

	* posix/unistd.h: Change duplicate seteuid decl to setegid.

	* io/Makefile (headers): Add sys/fcntl.h.
	* io/sys/fcntl.h: New file; just includes <fcntl.h>.

Mon Feb 14 10:36:57 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (library pattern rule): Depend on
	$(objpfx)stamp-$(subdir) and have empty commands.
	($(objpfx)stamp-$(subdir)): Move dep on $(objects) and ar cmds here.
	(common-mostlyclean): Remove $(objpfx)stamp-$(subdir).

	* Makerules (+depfiles): Filter out deps for modules in $(omit-deps).

	* sunrpc/Makefile (omit-deps): Define new variable.

	* Makerules ($(libc.a)(__.SYMDEF)): Depend on $(+libobjs), not
	lib-noranlib.
	* Makefile ($(libc.a)(__.SYMDEF)): Depend on subdir_lib.

	* Makerules (+depfiles): Include deps for $(extra-objs).

	* sunrpc/rpcsvc/klm_prot.x: Move program definition to end.

	* sunrpc/Makefile (lib): Depend on $(objpfx)librpcsvc.a.

	* time/zic.c: Set CP to NAME before dereferencing.

	* sunrpc/Makefile ($(objpfx)x%.c): Target fixed from $(objpfx)x%.c.
	($(objpfx)rpcsvc/%.h): Target renamed from $(includedir)rpcsvc/%.h.
	Make each x%.o file depend on the corresponding rpcsvc/%.h file.
	(headers): Add rpcsvc/%.h.
	(install-others): Remove generated rpcsvc headers.
	(generated): Define to include generated rpcsvc headers and sources.

	* sysdeps/m68k/fpu/acos.c: Add __CONSTVALUE to defn.
	* sysdeps/m68k/fpu/ldexp.c: Likewise.
	* sysdeps/m68k/fpu/pow.c: Likewise.
	* sysdeps/m68k/fpu/fmod.c: Likewise.
	* sysdeps/m68k/fpu/atan2.c: Likewise.
	* sysdeps/m68k/fpu/__drem.c: Likewise.
	* sysdeps/m68k/fpu/__isinf.c: Likewise.
	* sysdeps/generic/hypot.c: Likewise.
	* sysdeps/m68k/fpu/__logb.c: Likewise.

	* sysdeps/unix/bsd/m68k/sysdep.S: Swap operands in cmpl.

Sun Feb 13 19:49:24 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/Makefile (compile-command.S): Remove definition
	that did kludgey # hackery.
	* sysdeps/unix/bsd/hp/m68k/sysdep.h (PSEUDO): Add missing close paren.
	(POUND): Define (no arg) to just `#' (a single pound sign).
	(PSEUDO, DO_CALL): Use `POUND foo' in place of `POUND(foo)'.
	* sysdeps/unix/bsd/sony/newsos/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/__brk.S: Use #0, not POUND(0).
	* sysdeps/unix/bsd/hp/m68k/__brk.S: Use #__end instead of POUND(__end).

Fri Feb 11 00:29:45 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (Makefile): Set objdir instead of ARCH in submake cmd.

	* time/mktime.c: Define __P if undefined.

	* assert/assert.h (__ASSERT_FUNCTION): Check __GNUC_MINOR__<6 if
	defined(__cplusplus).

Thu Feb 10 00:52:31 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/__sigact.c: Use __sigismember and
	__sigemptyset on sa_mask instead of assuming it's an int.

	* sysdeps/unix/sysv/sysv4/sigset.h (__sigismember): Declare arg
	SET to be a pointer to const.

	* sysdeps/posix/__sigpause.c: Convert MASK to a sigset_t with a loop.

	* sysdeps/posix/__sigblock.c: When sigset_t==mask, take address of
	SET or OSET, cast to int *, and dereference.
	* sysdeps/posix/__sigstmsk.c: Likewise.
	* sysdeps/posix/__sigvec.c: Likewise.

	Add the -lrpcsvc library of XDR routines for standard SunRPC protocols.
	* sunrpc/Makefile (install-lib): Define to include librpcsvc.a.
	(rpcsvc-objs): New variable.
	(extra-objs): Add $(rpcsvc-objs).
	($(objpfxlibrpcsvc.a): New target.
	($(objpfx)x%.o): New rule to rpcgen XDR routines.

Wed Feb  9 11:59:33 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/zic.c (mkdirs): Reapply fix to avoid writing into passed ptr.

	* sunrpc/Makefile (distribute): Add etc.rpc.
	($(includedir)/bootparam_prot.h): Change target to
	$(includedir)/rpcsvc/bootparam_prot.h and dep to
	$(includedir)/rpcsvc/bootparam.h.
	(install-others): Change reference.

	* sunrpc/rpc_util.h: Comment out bogus decl of sprintf.

	* Makerules ($(libc.a)(__.SYMDEF)): Depend on lib-noranlib instead
	of $(+libobjs); this way makes the parent do subdir_lib.

	* sysdeps/unix/sysv/sysv4/sigset.h: Protect types with #ifndef
	_SIGSET_H_types.  Protect rest with #if !defined (_SIGSET_H_fns)
	&& defined (_SIGNAL_H).

Tue Feb  8 19:00:42 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.07.3.

	* sysdeps/unix/sysv/sysv4/sigset.h: Fix typos (omitted __s).

Mon Feb  7 14:31:00 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules ($(libc.a)): Depend on $(libc.a)(__.SYMDEF); no commands.
	($(+libobjs)): Remove static pattern rule.
	(ar-it): Target removed.
	Replace with pattern rule to catch %(*.o) for all $(objects).
	($(libc.a)(__.SYMDEF)): New target.
	(lib-noranlib, $(libdir)/lib$(libprefix)c.a): Don't depend on ar-it.

	* sysdeps/unix/sparc/sysdep.h (PSEUDO): Add nop after jmp; the
	next insn is most likely a retl, which causes interesting behavior.

	* stdio/vfprintf.c: Pass WORKEND+1 to _itoa, not WORKEND.
	Subtract one from result of _itoa when setting W.

	* time/{africa,asia,australasia,backward,europe,leapseconds,
	northamerica,southamerica,zic.c}: New code and data from ADO.

Sun Feb  6 13:55:27 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sunrpc: New directory; code from Sun's RPCSRC-4.0.
	* sysdeps/unix/inet/Subdirs: Add sunrpc.
	* inet/netdb.h: #include <rpc/netdb.h> at end.

	* Make-dist ($(tardir).tar): Use -v when extracting from dist.tar
	and pipe output to doschk.

	* Makeconfig (etcdir): New variable.
	(localtime-file): Use that in default value.

	* Makerules (depend-$(subdir)): Include dep files for all .o files
	listed in $(extra-objs).

	* posix/sys/types.h (NFDBITS): #define to __NFDBITS.

	* inet/netinet/in.h (INADDR_LOOPBACK): Don't define if already
	defined; avoids changing source which defines it before including this.
	(struct sockaddr_in): Rename `__pad' member to `sin_zero'; some
	code wants to bzero the area just for paranoia.

	Make cleaning targets only remove common (not specific to one
	subdir) generated files if run from the parent directory.
	* Makefile (parent-clean): Remove $(common-generated) also.
	* sysdeps/unix/Makefile (local_lim.h, sys/param.h, errnos.h,
	ioctls.h, syscall.h): Append to $(common-generated), not $(generated).
	* sysdeps/posix/Makefile (stdio_lim.h): Likewise.

	* signal/signal.h: Declare psignal here.
	* stdio/stdio.h: Not here.

	* stdio/stdio.h [__OPTIMIZE__] (vprintf, vfscanf, vscanf,
	vsscanf): Define as extern inline functions instead of macros.

	* configure.in (names): Check existence of implied dirs and warn
	for absentees.

Sat Feb  5 13:38:26 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.07.2.

	* resource/sys/resource.h (RUSAGE_SELF, RUSAGE_CHILDREN): #define
	to self for things that test #ifdef.

	* sysdeps/unix/common/Dist: Remove bsd_getgrp.S.

	* sysdeps/unix/Makefile: Don't include param.h.dep ifdef no_deps.

	* Makerules (vpath %.h): Use $(common-objpfx) in place of $(objpfx).

	* sysdeps/unix/bsd/i386/__vfork.S: Decrement R1 and AND it with R0
	to avoid the test and branch.

	* sysdeps/unix/bsd/getprio.S, sysdeps/unix/bsd/setprio.S,
	sysdeps/unix/bsd/__setreuid.S, sysdeps/unix/bsd/__setregid.S: Moved to
	sysdeps/unix/common.

	* sysdeps/unix/reboot.S: New file.

	* sysdeps/unix/sysv/sysv4/solaris2/signum.h: New file.
	* sysdeps/unix/sysv/sysv4/signum.h: New file.
	* sysdeps/unix/sysv/sysv4/sigset.h: New file.
	* sysdeps/unix/sysv/sysv4/sigaction.h (struct sigaction): Swap
	positions of sa_flags and sa_mask members (sa_flags is first now).
	(SA_NOCLDWAIT): Renamed from SA_NOSCLDWAIT.

	* sysdeps/unix/bsd/init-posix.c (_posix_start_time): Initialize it.

	* Makerules (open-check-inhibit-asm): Use : for empty commands in case.

	* time/leapseconds: New version from ADO, adds 1994 leap second.

Thu Feb  3 02:15:30 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/ulimit.c: Define ulimit instead of __ulimit.

Wed Feb  2 16:56:29 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/sigsuspend.S: Moved to unix/sysv/sysv4.
	Replaced with #include of that file.

	* sysdeps/unix/sysv/sysv4/solaris2/sigaltstack.S: Moved to 
	sysdeps/unix/sysv/sysv4/sigaltstk.S.

	* sysdeps/unix/sysv/sysv4/i386/__lstat.S: Syscall lxstat, not xlstat.
	* sysdeps/unix/sysv/sysv4/i386/__fstat.S: Syscall fxstat, not xfstat.

Tue Feb  1 18:22:21 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/_itoa.c, stdio/_itoa.h: New files.
	* stdio/Makefile (routines): Add _itoa.
	(distribute): Add _itoa.h.
	* stdio/vfprintf.c: Use _itoa instead of doing it by hand.

	* sysdeps/unix/sparc/vfork.S: Add nop after jmp.  Bad delay slot,
	no pipeline.
	* sysdeps/unix/bsd/ultrix4/mips/vfork.S: Likewise.

Mon Jan 31 19:33:04 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* assert/assert.c (__assert_fail): Take 4th arg FUNCTION; if it is
	not null, print it in the message.  Also declare __NORETURN.
	* assert/assert.h (__assert_fail): Update decl; also add __NORETURN.
	(__ASSERT_FUNCTION): #define to be __PRETTY_FUNCTION__ for GCC>=2.4.
	(assert): Pass __ASSERT_FUNCTION to __assert_fail.

	* sysdeps/unix/bsd/sun/sparc/vfork.S: Moved to sysdeps/unix/sparc.
	Use C_SYMBOL_NAME on __vfork instead of prepending an underscore.

	* sysdeps/unix/sysv/sysv4/solaris2/{start.c,sysdep.S,sysdep.h}: Moved
	to sysdeps/unix/sysv/sysv4/solaris2/sparc.

	* sysdeps/unix/{i386,sysv/sysv4/solaris2,sysv/i386/linux,bsd/m68k,
	bsd/ultrix4/mips,bsd/vax}/sysdep.S: Don't do EWOULDBLOCK_sys->EAGAIN
	mapping #if EWOULDBLOCK_sys == EAGAIN.

	* sysdeps/unix/sparc/sysdep.h [NO_UNDERSCORES]: #define syscall_error
	to C_SYMBOL_NAME(__syscall_error).
	(PSEUDO): On error, jump to syscall_error instead of setting errno.
	* sysdeps/unix/sparc/sysdep.S: New file.

	* sysdeps/unix/sysv/sysv4/i386/__vfork.S: New file, just #include
	unix/bsd/i386 version. 

	* sysdeps/unix/bsd/i386/__vfork.S: Use `scratch' in place of %edx.

Thu Jan 27 16:46:03 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (asm-CPPFLAGS): Add new check to see if assembling
	a .S file loses without -P.  If so, set asm-CPPFLAGS=-P in config.make.

	* configure.in (stddef.h): Print msg under --verbose.

	* manual/Makefile (subdir): Define outside of `export' directive,
	for old make.

	* time/mktime.c (search): Take new arg PRODUCER, fn to call
	instead of `localtime'.
	(_mktime_internal): New function; all code from old `mktime', but
	take 2nd arg PRODUCER and pass along to `search'.
	(mktime): Rewrite to call _mktime_internal with localtime.
	* time/Makefile (routines): Add dysize, timegm, timelocal.
	* time/time.h (_mktime_internal): Declare it.
	[__USE_MISC]: Declare timegm, timelocal, dysize.
	* time/dysize.c: New file.
	* time/timegm.c: New file.
	* time/timelocal.c: New file.

Wed Jan 26 20:06:23 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	Remove the hackery on getgroups for most systems.  It is no longer
	necessary because gid_t is now the same size as int.
	* sysdeps/unix/common/Makefile (sysdep_routines): Don't add bsd_getgrp.
	* sysdeps/unix/common/bsd_getgrp.S: File removed.
	* sysdeps/unix/common/__getgrps.S: New file.
	* sysdeps/unix/bsd/sequent/i386/__getgrps.S: New file.

	Clean up the rules for cleaning up.
	* Makerules (common-mostlyclean): New target; remove object files.
	(common-clean): New target; depend on common-mostlyclean, and
	remove dep files and generated files.
	(clean): Depend on common-clean.
	(mostlyclean): Depend on common-mostlyclean.
	* Rules (mostlyclean): Target removed.
	(clean): Target removed.
	(distclean): New target; depend on clean.
	(realclean): New target; depend on distclean.
	(subdir_distclean): New target; depend on distclean.
	(subdir_realclean): New target; depend on realclean.
	(subdir_mostlyclean): New target; depend on mostlyclean.
	* Makefile (+subdir_targets): Add subdir_distclean,
	subdir_realclean; change mostlyclean to subdir_mostlyclean.
	(parent-mostlyclean): New target; depend on common-mostlyclean and
	remove libc.a and $(install-lib).
	(parent-clean): New target; depend on parent-mostlyclean and
	common-clean, and remove sysdirs sysd-dirs sysd-Makefile.
	(clean): Depend on parent-clean and just do submake for subdirs.
	(mostlyclean): Depend on parent-clean and just do submake for subdirs.
	(distclean, realclean): Depend on parent-clean and do submake
	distclean-1 passing it variable assignment distclean-1=$@.
	(distclean-1): Depend on subdir_$(distclean-1) and remove
	$(config-generated), config.status, config.make, Makefile (if not
	in srcdir).
	* manual/Makefile (subdir_clean): Target removed.
	(subdir_%): New rule to handle all such targets.
	(distclean): Depend on clean, not mostlyclean.
	(realclean): Depend on distclean, not clean.

	* sysdeps/unix/configure (unix_generated_dirpfx): New variable.
	Use it to put created .S files in sysdeps/unix if configured in
	srcdir, else in current directory.
	(unix_generated): Prepend $unix_generated_dirpfx.
	Have generated config.make fragment prepend $(objpfx).
	* sysdeps/unix/Makefile (generated): Don't set it.
	(config-generated): Set this instead; don't prepend any directory
	prefix to $(unix-generated).

	Fixes for SVR4 wait from jmc@ksu.ksu.edu (James Michael Chacon):
	* sysdeps/unix/sysv/sysv4/siginfo.h (__siginfo_t): Add `__code'
	and `__pid' fields.
	(EXITED, KILLED, CORED, TRAPPED, STOPPED, CONTINUED): New macros.
	* sysdeps/unix/sysv/sysv4/__waitpid.c: Switch on INFOP.__code and
	construct *STAT_LOC from INFOP.__status accordingly.

	* stdlib/testsort.c (main): Use puts to add newlines to printed lines.

Tue Jan 25 14:32:01 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.07.1.

	* manual/Makefile (%.z): Change target pattern to %.gz.
	(dist): Comment out dep.  Don't really need the separate doc dist.

	* stdio/stdio.h [__OPTIMIZE__] (getchar, putchar, getdelim,
	getline, __getline): Use extern inlines instead of macros.

	* sysdeps/unix/sysv/sco3.2.4/__waitpid.S: Fix typo ($eax for %eax).

	* sysdeps/unix/siglist.c [! HAVE_GNU_LD] (_sys_siglist): #define
	to sys_siglist.
	* sysdeps/posix/__gettod.c [! HAVE_GNU_LD] (__daylight,
	__timezone, __tzname): #define to non-__ names.

	* math/math.h [__USE_BSD] (M_E, M_LOG2E, M_LOG10E, M_LN2, M-LN10,
	M_PI, M_PI_2, M_PI_4, M_1_PI, M_2_PI, M_2_SQRTPI, M_SQRT2,
	M_SQRT1_2): New macros.

Tue Jan 25 14:01:28 1994  Michael I. Bushnell  (mib at ernst.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/start.c (start1): Decide separately whether to
	split argv and whether to split envp.

	* sysdeps/mach/hurd/i386/sysdep.h: File deleted.
	sysdeps/mach/i386/sysdep.h: Delete SET_SP macro.
	sysdeps/mach/hurd/start.c (_start): Don't call GET_SP; set globals
	instead of locals from exec_startup message.

	* misc/progname.c: Don't try to set
	program_invocation_name or program_invocation_short_name if argv
	or argv[0] is invalid.

Mon Jan 24 16:51:43 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sysv4/__waitpid.c: Return INFOP.__pid instead of
	the PID we were called with.

	* sysdeps/unix/sysv/__mkdir.c (__mkdir): Restore errno before
	returning, not after (lot of good that did).

	* sysdeps/unix/bsd/ultrix4/system.c, sysdeps/unix/bsd/bsd4.4/system.c,
	sysdeps/unix/bsd/osf1/system.c, sysdeps/unix/sysv/sco3.2.4/system.c,
	sysdeps/unix/bsd/sun/sunos4/system.c, sysdeps/unix/sysv/sysv4/system.c:
	New files.  Avoid sysdeps/unix/system.c, which defines NO_WAITPID.

	* set-init.c (__libc_init): Use `n' count field instead of
	checking for null terminator.  The latter loses when there are no
	set elts at all, and only one word is allocated for __libc_subinit.

	* sysdeps/generic/waitstatus.h (__WCOREFLAG): New macro.
	* posix/sys/wait.h [__USE_BSD] (WCOREFLAG): New; define to __WCOREFLAG.

	* stdio/fileno.c (fileno): Call __stdio_check_funcs.

	* stdio/tst-fileno.c: New file.

Fri Jan 21 16:56:50 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Rules (dep-dummy-lib, make-dummy-lib): New variables.
	($(objpfx)dummy.o): New file rule.
	* posix/Makefile ($(objpfx)libposix.a): Depend on
	$(dep-dummy-lib), and use $(make-dummy-lib) for commands.
	* math/Makefile ($(objpfx)libm.a): Likewise.

	* sysdeps/unix/sysv/sysv4/i386/__stat.S: New file.
	* sysdeps/unix/sysv/sysv4/i386/__lstat.S: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/__fstat.S: Likewise.

	* sysdeps/sparc/bytesex.h: New file.

Thu Jan 20 12:45:35 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/syscall.c (syscall): Declare arg type as int.

Wed Jan 19 18:18:15 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules ($(before-compile) rule): Protect w/`ifdef before-compile'.

	* manual/Makefile: Change all `mv' uses to `mv -f'.
	(subdir_install): Depend on stubs.

	* Makerules ($(objpfx)%.dep: %.s): Depend also on $(objpfx)dummy.dep.

Tue Jan 18 19:12:57 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/testsort.c (main): Swap dimensions of BUFS array.

Mon Jan 17 17:31:28 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.07 released.

	* Makerules (install-lib rules): Fix typos: missing / after $(libdir).

	* posix/Makefile (lib): Depend on $(objpfx)libposix.a
	* malloc/Makefile (lib): Depend on $(objpfx)libmcheck.a.
	* math/Makefile (lib): Depend on $(objpfx)libm.a.
	* misc/Makefile (lib): Depend on $(objpfx)libbsd-compat.a.

	* sysdeps/unix/sysv/sco3.2.4/__setpgid.c: New file.

	* stdio/internals.c (flushbuf): Don't try aligned-block writing
	calculation when FP->__buffer is nil.

Mon Jan 17 17:27:56 1994  Jim Meyering  (meyering@comco.com)

	* sysdeps/generic/memcmp.c [!_LIBC]: Include <sys/types.h> for
	definition of size_t.

Mon Jan 17 17:13:11 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/syscall.h:	Add SYS_[gs]etitimer and
	SYS_pgrpsys (from scottb).

	* sysdeps/unix/configure: Check for getitimer and setitimer syscalls.

	* sysdeps/unix/bsd/sequent/i386/syscall.S: New file from jason.

Sun Jan 16 00:41:03 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* string/strerror.c (strerror): Declare BUF to be array of char.

	* Version 1.06.13.

Sat Jan 15 17:27:26 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/testsort.c (main): Rewrite not to read any input; instead
	generate some random alphabetic strings.

	* stdlib/Makefile (testsort.input): Rules removed.

	* sysdeps/unix/sysv/i386/__sigret.S: New file.

	* stdio/Makefile (distribute): Add mpn-copy.mk.
	Remove 68k rules; include mpn-copy.mk for dir names needing
	translation, and rewrite no-68k rules to be generic for the rest.
	(mpn-copy-sysdep): New variable.
	(mpn-stuff): Include $(mpn-copy-sysdep).
	(clean-mpn): Use rm -f.

	* configure.in (machine): Match m68... and m88..., not mc[68]8....

	* stdio/printf_fp.c: For length arg to __mpn_extract_double, pass
	actual number of limbs allocated for F, not LDBL_MANT_DIG.

Fri Jan 14 19:09:29 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/i386/sysdep.S: Fixed typo: `movl', not `move'.

	* sysdeps/unix/sysv/sco3.2.4/__sysconf.S: Swap args in cmpl insn.

Thu Jan 13 17:09:19 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.12.

	* sysdeps/mips/sqrt.c: File removed.  Ian says only the r[46]00
	have `sqrt.d' and GCC open codes it anyway.  Perhaps someday
	Brendan will be able to explain his rationale for writing this. :(

Tue Jan 11 18:10:17 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/sys/wait.h (__WAIT_STATUS, __WAIT_STATUS_DEFN): Use snazzy
	version only for GCC >= 2.6 (was 2.4); 2.5.7 produces bad code on
	sparc when the union arg type is used.

	* Makeconfig (libprefix): New variable.
	* Makerules ($(libdir)/libc.a, install): Insert $(libprefix)
	between `lib' and `c' in the file name.
	[install-lib] (install-lib.a, install-lib-non.a): New variables
	separate out $(install-lib) elts which do or don't match lib%.a.
	($(libdir)/...): Split into two rules for above two cases.  Put
	$(libprefix) on installed files; for lib%.a insert it before %
	rather than at beginning of file name.

	* Version 1.06.11.

	* Makerules (compilation rules): Move directoryless rules (for
	finding sources in .) before include sysd-rules.  Omit rules to
	compile from sources in $(objpfx) if not using $(objdir).

	* sysdeps/stub/errlist.c [! HAVE_GNU_LD]: #define _sys_errlist to
	sys_errlist and _sys_nerr to sys_nerr.

Mon Jan 10 15:01:32 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/Makefile (z.%): In generated rules, depend on yearistype.
	(tzcompile): Pass -y flag with file name of yearistype.

Sun Jan  9 17:51:43 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/bsd-compat.c (longjmp): Use __NORETURN in type.

	* sysdeps/ieee754/dbl2mpn.c [N == 2]: For denormal, when
	RES_PTR[1] is zero, return 1 instead of 2.

Sun Jan  9 13:10:25 1994  Torbjorn Granlund  (tege@adder.cygnus.com)

	* stdio/printf_fp.c: Solve 10+ problems.
	* ieee754/dbl2mpn.c: Correctly detect denorms.  Get the denom
	exponent right.

Sun Jan  9 00:40:48 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/ieee754/dbl2mpn.c: Test BITS_PER_MP_LIMB and handle
	either 32 or 64; #error if not one of those.

	* sysdeps/stub/udiv_qrnnd.c: Renamed from udiv_qrnnd.S.

Sat Jan  8 00:25:15 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.10.

	* Makerules ($(libdir)/libc.a): Depend on subdir_install.

Thu Jan  6 02:17:07 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules ($(bindir)/$(install)): Use $(INSTALL_PROGRAM), not
	$(INSTALL).
	($(libdir)/libc.a): Don't depend on lib-noranlib; on libobjs and
	ar-it instead.  Run ranlib on target after installing.
	(installdirs): Target removed; deps on it removed.
	(install-{bin,lib,data,headers,others,no-libc.a}): Renamed to
	`install-*-nosubdir'.
	(install-%): New pattern rule.
	(install): Depend only on install-no-libc.a-nosubdir.
	* Rules (subdir_install): Depend on lib-noranlib and stubs.
	* Makefile (headers): Remove stubs.h.
	(install-others): Define to include $(includedir)/stubs.h.
	($(includedir)/stubs.h): New target for $(objpfx)stubs.h rule.
	Depend only on subdir_install, and install directly.

	* Makerules (sed-remove-objpfx): Require SPC before $(objpfx) to match.

	* time/zic.c (mkdirs): Duplicate passed string in allocated memory
	and free it when done.

	* dirent/dirent.h [__USE_BSD || __USE_MISC]: Get size_t from stddef.h.

	* sysdeps/ieee754/dbl2mpn.c: For zero value, return 1 limb not 0.

	* Makerules (make-dummy-dep): Use filter-out to invert sense of
	wildcard match, so we produce a command if $@ does *not* exist.c

	* stdio/Makefile (routines): Add dbl2mpn.

Wed Jan  5 17:52:43 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/i386/sysdep.S (syscall_error): Reverse args in
	`cmpl' insn; non-GNU assembler is feeble-minded.

Mon Jan  3 18:53:45 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (sysnames): Remove / before $mach; it is prepended
	already by the loop constructing $mach from $machine.

Tue Dec 28 07:38:23 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/Makefile [gmp-srcdir] (clean-mpn): New target.

	* configure.in (machine): Turn i[34]86 into i386/&, sparc* into
	sparc/&, m68k into m68k/mc68020, mc680?0 into m68k/&, mips or
	r2000 into mips/r3000, r[34]000 into mips/&.
	(mach): New variable; processed from $machine as $base from $base_os.
	Use that in place of $machine in loop finding sysdep directories.

	* stdio/Makefile (aux): Add mp_clz_tab.
	(mpn-copy): Add mp_clz_tab.c.
	(mpn-routines): Add udiv_qrnnd.
	(mpn-sysdep): Look for .s files too.
	* sysdeps/stub/udiv_qrnnd.S: New file.

Sat Dec 25 00:20:07 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.9.

	* Makefile (distribute): Add install.sh.
	* install.sh: New file.

	* sysdeps/i386/Makefile: New file.
	(asm-CPPFLAGS): Add -DGAS_SYNTAX.

	* stdio/printf_fp.c: Major rewrite of sysdeps/generic/printf_fp.c,
	working with the fractional parts as multiprecision integers
	instead of doubles, using mpn functions from GNU MP.  Done with
	much help from tege@cygnus.com.
	* sysdeps/generic/printf_fp.c, sysdeps/ieee754/printf_fp.c,
	sysdeps/m68k/fpu/printf_fp.c: Files removed.

Fri Dec 24 23:09:44 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/dbl2mpn.c, sysdeps/iee754/dbl2mpn.c: New files.
	* sysdeps/stub/asm.h: New file.
	* sysdeps/m68k/add_n.S, sysdeps/m68k/addmul_1.S,
	sysdeps/m68k/mul_1.S, sysdeps/m68k/sub_n.S,
	sysdeps/m68k/submul_1.S, sysdeps/m68k/asm.h,
	sysdeps/generic/add_1.c, sysdeps/generic/add_n.c,
	sysdeps/generic/addmul_1.c, sysdeps/generic/cmp.c,
	sysdeps/generic/divmod.c, sysdeps/generic/divmod_1.c,
	sysdeps/generic/lshift.c, sysdeps/generic/rshift.c,
	sysdeps/generic/mod_1.c, sysdeps/generic/mul.c,
	sysdeps/generic/mul_1.c, sysdeps/generic/mul_n.c,
	sysdeps/generic/sub_n.c, sysdeps/generic/submul_1.c,
	sysdeps/generic/get_str.c, sysdeps/i386/addmul_1.S,
	sysdeps/i386/mul_1.S, sysdeps/i386/submul_1.S,
	sysdeps/alpha/gmp-mparam.h, sysdeps/generic/gmp-mparam.h,
	sysdeps/i386/asm.h, stdio/longlong.h, stdio/gmp.h,
	stdio/gmp-impl.h: New files, taken from GNU MP.
	* stdio/Makefile (mpn-headers, mpn-routines): New variables.
	(routines): Include $(mpn-routines).
	(distribute): Include $(mpn-headers).
	[gmp-srcdir]: Much code to copy mpn source from $(gmp-srcdir).
	* configure.in: Check for a --with-gmp argument and set gmp-srcdir
	in config.make to its value (error if no arg given).  Move
	config_vars initialization before this (right after arg parsing).

Thu Dec 23 01:44:12 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/Makefile (m68k-syntax-flag): New variable.
	(compile-command.S): Include $(m68k-syntax-flag) in cpp flags.

	* manual/Makefile (install-data): New target.
	(install-%): New pattern rule.

	* Makerules ($(bindir)/...): Do $(make-target-directory) first.

Thu Dec 23 01:03:19 1993  Brendan Kehoe  (brendan@zen.org)

	Port to the DEC Alpha running OSF/1. (75% done)
	* sysdeps/unix/bsd/osf1/alpha/start.S: New file.
	* sysdeps/unix/bsd/osf1/alpha/sysdep.h: New file.
	* sysdeps/unix/bsd/osf1/alpha/sysdep.S: New file.
	* sysdeps/unix/bsd/osf1/alpha/__brk.S: New file (incomplete).
	* sysdeps/unix/bsd/osf1/alpha/__fork.S: New file.
	* sysdeps/unix/bsd/osf1/alpha/__pipe.S: New file.
	* sysdeps/unix/bsd/osf1/alpha/__getdents.S: New file.
	* sysdeps/unix/bsd/osf1/alpha/__waitpid.c: New file.
	* sysdeps/unix/bsd/osf1/alpha/__wait4.S: New file.
	* sysdeps/unix/bsd/osf1/dirstream.h: New file.
	* sysdeps/unix/bsd/osf1/alpha/statbuf.h: New file.
	* sysdeps/unix/bsd/osf1/direct.h: New file.
	* sysdeps/unix/bsd/osf1/dirstream.h: New file.
	* sysdeps/unix/bsd/osf1/Makefile: New file, defining LDFLAGS.

	* sysdeps/unix/ioctls-tmpl.c [__osf1__ && __alpha__]: Clean up the
	ioctls that we get for an Alpha running OSF/1.

	* sysdeps/unix/common/glue-ctype.c: Add code for HAVE__LOCP.
	(main): If new macro TABLE_NAME is defined, use that for the name
	of the array we're writing out, rather than what's defined in TABLE.
	* sysdeps/unix/common/configure.in (AC_HAVE_FUNCS): Add `_locp'.

	* sysdeps/unix/bsd/osf1/sigaction.h: Add SA_ONSTACK, SA_RESTART,
	and SA_DISABLE.
	* sysdeps/alpha/setjmp.S: Add .end directive.

	* time/sys/time.h (struct timeval): Make members TV_SEC and
	TV_USEC be `int', not `long', since it won't hurt other hosts, but
	kills the Alpha.
	* resource/sys/resource.h (struct rusage): Make all non-timeval
	members be `long', not `int'.

	* sysdeps/alpha/strlen.c (strlen): Go from 0 to 7, not 3, since
	there are 8 bytes in a long on the Alpha.  Check for '\0' after
	checking for C in initial byte-by-byte loop.
	* sysdeps/alpha/strchr.c (strchr): Likewise. Shift out to 64 when
	setting CHARMASK.
	* sysdeps/alpha/memchr.c (memchr): Likewise.  Return NULL if we
	didn't find it in N characters, or N == 0.  Declare CP to be an
	unsigned char*.

	* sysdeps/alpha/Makefile: Add divrem stuff.
	* sysdeps/alpha/DEFS.h: New file.
	* sysdeps/alpha/divrem.m4: New file.
	* sysdeps/alpha/macros.m4: New file.
	* sysdeps/alpha/Dist: Add .S files, divrem.m4, macros.m4, and DEFS.h.

	* sysdeps/unix/bsd/osf1/alpha/vhangup.S: New file.  (Only a
	temporary workaround, until we figure out how to deal with the
	SYS_ult syscalls better.)
	* sysdeps/unix/bsd/osf1/alpha/killpg.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigvec.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigpause.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/__sigstmsk.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/recv.S: Likewise.
	* sysdeps/unix/bsd/osf1/alpha/send.S: Likewise.

	* sysdeps/alpha/__math.h (__copysign): Add __CONSTVALUE.
	* sysdeps/alpha/__copysign.c: Define __NO_MATH_INLINES.
	* sysdeps/alpha/fabs.c: Likewise.

Wed Dec 22 17:55:49 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* crypt/*: New version from glad.

	* sysdeps/unix/sysv/sysv4/Dist: Add __getpgid.c and __setpgid.c.

	* dirent/Makefile (headers): Define; include dirent.h & dirstream.h.

Tue Dec 21 14:24:38 1993  Brendan Kehoe  (brendan@zen.org)

        * sysdeps/unix/sysv/sysv4/i386/statbuf.h (struct stat): Add
        missing member ST_FSTYPE.  Fixup types on various members to make
        this properly reflect what the system has.

	* misc/ioctl.c (ioctl): Declare 2nd arg to be unsigned long int to
	match the change in ioctl.h.

Tue Dec 21 00:01:01 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.8.

	* dirent/dirent.h (struct dirent): Add `d_reclen'; make `d_namlen'
	an `unsigned short int' instead of `size_t'.
	(DIR): Move typedef to sysdep file dirstream.h.
	* sysdeps/unix/dirstream.h: New file, broken out of dirent.h.
	* sysdeps/stub/dirstream.h: New file.
	* sysdeps/unix/bsd/dirstream.h: New file.
	* sysdeps/unix/bsd/readdir.c: New file.

Mon Dec 20 23:29:07 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/start.c: Include <sysdep.h>.
	* sysdeps/unix/sysv/sysv4/i386/start.c: File removed.

Sat Dec 18 01:37:25 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/i386/start.c: New file.  Same as
	sysdeps/unix/i386/start.c, but defines NO_UNDERSCORES.

	* sysdeps/unix/sysv/sysv4/waitflags.h: New file, with non-standard
	WEXITED and WTRAPPED macros defined.
	* sysdeps/unix/sysv/sysv4/__waitpid.c: New file.
	* sysdeps/unix/sysv/sysv4/siginfo.h: New file.
	* sysdeps/unix/sysv/sysv4/__waitid.S: New file.
	* sysdeps/unix/sysv/sysv4/Makefile (sysdep_routines): Mention __waitid.
	* sysdeps/unix/sysv/sysv4/pipestream.c: New file, to avoid having
	NO_WAITPID set.
	* sysdeps/unix/sysv/sysv4/Dist: Added __waitid.S and siginfo.h.

	* sysdeps/unix/sysv/sysv4/__getpgid.c: New file.
	* sysdeps/unix/sysv/sysv4/__setpgid.c: New file.
	* sysdeps/unix/sysv/sysv4/Makefile (sysdep_routines): Add them.

	* sysdeps/unix/sysv/sysv4/__getpgrp.c (__getpgrp): It's the 0th
	subcall for getpgrp, not 4th.
	* sysdeps/unix/sysv/sysv4/__setpgrp.c (__setpgrp): Likewise, it's
	the 1st, not the 5th.

Fri Dec 17 15:05:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/sys/ioctl.h (__ioctl, ioctl): Make second arg `unsigned
	long int' instead of `int' (4.4 uses unsigned long).

	* string/string.h (strcat): Parameters names were swapped.

Fri Dec 17 01:18:27 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* Made the Hurd error system 0x10 again; this undid many
	of the changes of Nov 23.  Affected all the err_ files in
	mach; recreated sysdeps/hurd/err_hurd.sub; changed back
	err_kern.sub to have the Unix error codes. 

Thu Dec 16 15:40:25 1993  Brendan Kehoe  (brendan@zen.org)

	* stdio/temptest.c (main): Remove the files we created once we're
	done.  Make return type int, and exit with 0 status.

	* sysdeps/posix/tempname.c (__stdio_gen_tempname): Fix typo of
	extra comma in sprintf call.

Tue Dec 14 13:08:35 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/tempname.c (__stdio_gen_tempname): Rewrote main
	logic.  Removed INFOS structure array and replaced it with
	INDICES, an array of size_t.  Removed INFO ptr and replaced it
	with IDX, which points to either elt of INDICES.  Rewrite main
	loop to increment *IDX until it hits 62*62*62.  Construct file
	name by dividing out two powers of 62 from *IDX and using the
	modulus as an index into `letters'.

	* sysdeps/unix/common/Makefile (sysdep_routines): Only add
	bsd_getgrp here if the sysdep __getgrps.? chosen is unix/common's.

	* posix/fnmatch.h: #undef FNM_PATHNAME, FNM_NOESCAPE, and
	FNM_PERIOD before defining them.

	* time/__tzset.c (compute_change): In M case when tallying time in
	months before specified month, count to RULE->m - 1, not ...+1.

	* manual/Makefile (realclean): Remove index, aux, and toc files
	created by TeX.

Mon Dec 13 19:33:33 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/__wait3.c: Use __WAIT_STATUS_DEFN in place of
	__WAIT_STATUS in arg type.

Wed Dec  8 15:59:45 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/memalign.c: Set L->next and _aligned_blocks only when L
	is newly allocated, not when we reuse an old one.

Tue Dec  7 16:04:22 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* io/fcntl.c: Replace function_alias use with:
	[HAVE_GNU_LD]: Use symbol_alias.
	[! HAVE_GNU_LD]: Define fcntl to use stdarg and call __fcntl.

Mon Dec  6 17:50:05 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/i386/sysdep.S (syscall_error): Fix labels so
	they'll compile.

	Make the Solaris port work dammit.
	* sysdeps/unix/sysv/sysv4/solaris2/statbuf.h (struct stat): Make
	ST_DEV member be unsigned long, not short.

	* sysdeps/unix/sysv/sysv4/solaris2/direct.h: New file, same as
	sysv4/direct.h but uses strlen instead of the offset-based
	computation of the name length, since that doesn't reliably work
	for Solaris.

        * sysdeps/unix/sysv/sysv4/solaris2/sysdep.h (PSEUDO): Don't move
        %g0 into %o0, since that will clobber the real return value. Take
        out the retl at the end, why in the world did I put it in there?

Mon Dec  6 17:27:26 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile ($(objpfx)crt1.o): Add target to $(objpfx)Mcrt1.o
	rule; generalize commands.
	(install-lib): Add crt1.o.

	* sysdeps/unix/Makefile ($(common-objpfx)ioctls): Use -x flag to
	fgrep to match only entire lines.

Sun Dec  5 01:53:43 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/bsd/ultrix4/mips/start.S: New file.
	* sysdeps/unix/bsd/ultrix4/mips/start.c: Deleted.

Thu Dec  2 18:29:01 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/bsd/ultrix4/mips/sysdep.S: Don't use dollar signs
	with the errnos.

	* sysdeps/stub/{__wait, __wait3, __wait4}.c,
	sysdeps/unix/bsd/bsd4.4/{__wait, __wait3}.c,
	sysdeps/unix/bsd/sun/sunos4/__wait4.c,
	sysdeps/posix/{__wait, __wait3}.c, posix/{wait, wait3, wait4}.c: Use
	__WAIT_STATUS_DEFN, not __WAIT_STATUS.

	* sysdeps/posix/killpg.c (killpg): Make arg PGRP __pid_t, not pid_t.
	* sysdeps/stub/killpg.c (killpg): Likewise.

	* setjmp/longjmp.c (longjmp): Only use __NORETURN if !HAVE_GNU_LD.
	* setjmp/_longjmp.c (_longjmp): Likewise.

Thu Dec  2 17:31:19 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/sys/wait.h (__WAIT_STATUS_DEFN): Define new macro.

	* Makerules (+install): Variable removed.
	(install-bin, install-lib, install-data, install-headers,
	install-others): New targets.
	(install-no-libc.a): Depend on them instead of $(+install).

	* Makefile (+subdir_targets): Add
	install-{no-libc.a,bin,lib,data,headers,others}.
	(install-no-libc.a): Don't depend on subdir_install.

Thu Dec  2 17:14:39 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/ieee754/__isnan.c (__isnan): Return __CONSTVALUE, to
	match declaration in math/math.h.

Thu Dec  2 15:48:19 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/africa, time/antarctica, time/asia, time/australasia,
	time/emkdir.c, time/europe, time/ialloc.c, time/northamerica,
	time/pacificnew, time/private.h, time/solar87, time/solar88,
	time/southamerica time/systemv, time/tzfile.h, time/zdump.c,
	time/zic.c: New data and code from ADO.
	* time/Makefile (tzfiles): Added backward.
	* time/backward: New file from ADO.

	* locale/C-ctype_ct.c: Remove _ISspace bit from BS (8).

Wed Dec  1 00:01:30 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* mach/err_kern.sub: Frob around lack of GNU ld.

	* mach/errsystems.awk: The declaration of __mach_error_systems
	should not be static, but it should be const.

	* sysdeps/mach/hurd/errlist.awk (BEGIN): Deal with the case
	where you don't have GNU ld.

	* sysdeps/mach/hurd/Makefile: Define mib_hacks to make.

Tue Nov 30 23:24:07 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* Makefile: install-no-libc.a needs to depend on subdir_install.

Mon Nov 29 16:21:38 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* sysdeps/mach/_strerror.c: Include <mach/errorlib.h>.

	* hurd/setuids.c: Put entire file inside #ifndef MIB_HACKS; 
	it uses the old auth_makeauth call.

	* hurd/__setauth.c: Put entire file inside #ifndef MIB_HACKS;
	it depends on cthreads to compile, which is not yet integrated.

	* hurd/hurdpath.c (__hurd_path_lookup): cast to avoid GCC warning.

Wed Nov 24 00:59:15 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* hurd/Makefile: Commented out hurdauth; recent changes to
	auth.defs prevent it from working now.

	* mach/mach_error_string.c (do_compat): Change name to
	__mach_error_map_compat; make it no longer static.
	(mach_error_type, mach_error_string_int): Use 
	__mach_error_map_compat instead of do_compat.
	* sysdeps/mach/_strerror.c: Use __mach_error_map_compat.

	* mach/devstream (output/write_some): Cast fourth argument to
	device_write_inband to char * to avoid warning.
	(output): Call to write_some mentioned variable `start' from
	a previous version of the function; changed this to f->__buffer.

Tue Nov 23 23:16:13 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	[ The net effect of the following change is to eliminate error
	systems which are specific to single-server Mach systems, and
	to put the Hurd errors where the Unix errors were. ]
	* mach/{err_bootstrap.sub,err_ipc.sub,err_server.sub,err_us.sub}:
	None of these are used for the Hurd; we shouldn't pretend that
	they are meaningful in our environment.  The files have been
	renamed to equivalent names with an equal sign prepended; this
	will inhibit distribution and prevent the Makefile from looking at
	them. 
	* mach/err_kern.sub: Deleted the definitios of err_codes_unix;
	get the strings from _sys_errlist.  Rename `unix' to `hurd'.
	Rename err_os_sub to be err_kern_sub to match what errsystems.awk
	expects.
	* sysdeps/mach/hurd/err_hurd.sub: Deleted this file.
	* sysdeps/mach/hurd/errnos.awk: Changed definition of _HURD_ERRNO
	to be correct.

	* sysdeps/mach/hurd/Makefile: use gawk, not awk.

	* mach/errsystems.awk: Generally rewrote the printf.  It's now
	closer to Roland's original, but without the $i mistake at all,
	in any form.

Tue Nov 23 20:21:06 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/{i386,sysv/sysv4/solaris2,sysv/i386/linux,bsd/m68k,
	bsd/ultrix4/mips,bsd/vax}/sysdep.S: Define _ERRNO_H before
	including <errnos.h>; otherwise <errnos.h> does not define most
	macros (importantly, EAGAIN!).

Tue Nov 23 12:43:38 1993  Michael I. Bushnell  (mib at ernst.gnu.ai.mit.edu)

	* mach/errsystems.awk: $i is not an index; make i a variable and
	increment it properly.  Don't call `err_get_system'; use the
	system number as the index in the array directly. 

        * mach/errorlib.h: Added `const' in all the right places.
        * sysdeps/mach/hurd/err_hurd.sub: Cast _sys_errlist to
	the right type.  Better to declare it right in stdio/stdio.h, but
	I don't dare change that file lest Roland call me a twit.
	* mach/err_us.sub: Add more brackets to initializer to shut GCC up.

	* sysdeps/mach/hurd/err_hurd.sub: Delete keyword `const'; this
	is taken care of by the `#define static static const' found in
	errsystems.c as created by mach/errsystems.awk.
	* mach/errsystems.awk: Ditto for declaration of __mach_error_systems.

	* sysdeps/mach/hurd/err_hurd.sub: Change <errnos.h> to <errno.h>;
	errnos.h doesn't define most stuff unless it is included from errno.h.

	* mach/mach_error_string.c (mach_error_string_int): Delete unused
	variable `err_str'.

	* mach/mach_error_string.c (do_compat): Declare to be void.
	(mach_error_string,mach_error_type, mach_error_string_int):
	Declare return type as const char *.
	* mach/mach_error.h: Change declarations to match.

	* mach/errsystems.awk: The array that split creates is origin 1,
	not origin 0; fixed loop to match.

	* sysdeps/mach/hurd/errnos.awk: Ernst's awk doesn't grok 
	backslash-newline inside strings.  

Sat Nov 20 19:02:25 1993  Brendan Kehoe  (brendan@zen.org)

	* math/__finite.c (__finite): Return __CONSTVALUE, to match math.h.
	* math/__scalb.c (__scalb): Likewise.
	* math/copysign.c (copysign): Likewise.
	* math/drem.c (drem): Likewise.
	* math/expm1.c (expm1): Likewise.
	* math/finite.c (finite): Likewise.
	* math/infnan.c (infnan): Likewise.
	* math/isinf.c (isinf): Likewise.
	* math/isnan.c (isnan): Likewise.
	* math/logb.c (logb): Likewise.
	* math/rint.c (rint): Likewise.
	* math/scalb.c (scalb): Likewise.
	* sysdeps/generic/atan.c (atan): Likewise.
	* sysdeps/ieee754/__copysign.c (__copysign): Likewise.
	* sysdeps/ieee754/__drem.c (__drem): Likewise.
	* sysdeps/ieee754/__isinf.c (__isinf): Likewise.
	* sysdeps/ieee754/__logb.c (__logb): Likewise.
	* sysdeps/ieee754/ldexp.c (ldexp): Likewise.
	* sysdeps/ieee754/log10.c (log10): Likewise.

        * setjmp/_longjmp (_longjmp): Add __NORETURN.
	* setjmp/longjmp (longjmp): Likewise.

Thu Nov 18 04:16:34 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* string/strerror.c (strerror): Call _strerror_internal to do the
	work, passing it a scratch buffer.
	* stdio/perror.c: Likewise.
	* string/Makefile (routines): Add _strerror.
	* sysdeps/generic/_strerror.c (_strerror_internal): New file.

	* configure.in (config.status): Make it pass its args to configure.

Thu Nov 18 03:52:32 1993  Michael I Bushnell  (mib@geech.gnu.ai.mit.edu)

	* stdio/__vfscanf.c (__vfscanf): Put the floating point cases
	(e,E,f,g,G) inside #ifndef MIB_HACKS; roland thikgs strtod crashes
	the compiler.  Wheee.

Thu Nov 18 03:21:51 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* errno.h [__USE_GNU__]: Declare program_invocation_name and
	program_invocation_short_name.

Thu Nov 18 00:07:37 1993  Michael I. Bushnell  (mib at ernst.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/start.c (start1): Don't add one to
	the return value of split_args; it counts them just fine by
	itself.  Do add one when sizing the arrays.

Mon Nov 15 00:19:48 1993  Noel Cragg  (noel@geech.gnu.ai.mit.edu)

	* time/mktime.c: add TIMES_THROUGH_SEARCH variable to make sure
	that we don't get caught in an infinite loop (would be bad,
	indeed, for a library routine).

Sun Nov 14 18:48:28 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/sys/cdefs.h (__NORETURN, __CONSTVALUE): Use
	`__attribute__', not `__attributes__'.
	Test __GNUC_MINOR__ < 6, not < 5.

Wed Nov 10 05:39:15 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/morecore.c: Only declare sbrk #ifdef __GNU_LIBRARY__.
	Cast its return value.

	* sysdeps/unix/bsd/m68k/syscall.S: Use movel in place of moveal.

	* configure.in (signed size_t check): Don't use AC_DEFINE; do it
	by hand and insert -U__SIZE_TYPE__ before -D.

	* posix/unistd.h: Declare syscall.

	* sysdeps/m68k/fpu/__math.h (__isnan, __isinf): Use __CONSTVALUE
	in prototypes.

	* configure.in (Makefile): Write ARCH=`pwd`, rather than
	substituting in the directory name at configure time.

	* sysdeps/mach/i386/syscall.S: New file.

Tue Nov  9 06:29:15 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (os = netbsd* | 386bsd*): base_os=unix/bsd/bsd4.4.
	Set --with-gnu-{ld,as} implicitly when base_os is bsd4.4.

	* Version 1.06.7.

	* misc/Makefile (routines): Add syscall.
	* sysdeps/unix/syscall.S, sysdeps/stub/syscall.c,
	sysdeps/unix/bsd/sun/m68k/syscall.S, sysdeps/unix/bsd/m68k/syscall.S,
	sysdeps/unix/i386/syscall.S: New files.
	* sysdeps/unix/bsd/hp/m68k/sysdep.h (DO_CALL): First arg
	is syscall number, not name.
	(PSEUDO): Pass POUND (SYS_ify (syscall_name)) to DO_CALL.
	* sysdeps/unix/bsd/sony/newsos/m68k/sysdep.h (DO_CALL, PSEUDO):
	Likewise.  Also, do movel into d0 before linkw, so the argument
	could conceivably pop the stack.
	* sysdeps/unix/bsd/hp/m68k/__brk.S: Pass complete number to DO_CALL.

	* sysdeps/unix/sysv/Dist: sys_getdents.S was renamed s_getdents.S.

Thu Nov  4 01:23:59 1993  Michael I. Bushnell  (mib at ernst.gnu.ai.mit.edu)

	* string/stpncpy: Fix typo; according to gnu-stabs.h the name
	inside the DEFUN should be the *non* __ version.
	* sysdeps/generic/__stpncpy.c: Missing declaration of s.

Wed Nov  3 09:35:30 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile ($(objpfx)errlist.c): Conditionalize these
	rules to be used only when errlist.c is otherwise a stub.

Fri Oct 29 17:29:20 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* string/stpncpy.c: New file.
	* sysdeps/generic/__stpncpy.c: New file.
	* string/Makefile (routines): Add stpncpy and __stpncpy.
	* string/string.h [__USE_GNU__]: Declare them.

Thu Oct 28 17:13:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/errnos-tmpl.c (DO): If NAME is "EWOULDBLOCK",
	write "#define EWOULDBLOCK EAGAIN" and change NAME to
	"EWOULDBLOCK_sys".
	* sysdeps/unix/{i386,sysv/sysv4/solaris2,sysv/i386/linux,bsd/m68k,
	bsd/ultrix4/mips,bsd/vax}/sysdep.S [EWOULDBLOCK_sys]: Translate
	EWOULDBLOCK_sys into EAGAIN.
	* Makefile (distribute): Add move-if-change.
	* move-if-change: New file.

Tue Oct 26 18:19:34 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/sys/cdefs.h: Define __NORETURN and __CONSTVALUE.
	For GCC 2.5 and later, use __attributes__ (({volatile,const})).
	* stdlib/stdlib.h: Don't define either here.
	* math/math.h: Likewise.
	* posix/unistd.h: Likewise.
	* time/time.h: Likewise.
	* stdio/stdio.h: Likewise.
	* setjmp/setjmp.h: Likewise.

	* posix/sys/wait.h (__WAIT_STATUS): Use union hack defn for GCC
	2.4 and up (testing __GNUC__ and __GNUC_MINOR__).

	* sysdeps/unix/sysv/sco3.2.4/__sysconf.S: Don't include <limits.h>.

	* Makerules [inhibit-sysdep-asm] 
	(open-check-inhibit-asm, close-check-inhibit-asm): New variables.
	($(+sysdir_pfx)sysd-rules): Use them around .s and .S rules.
	Depend on existing sysdep makefiles.

Mon Oct 25 15:56:41 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/mach/hurd/killpg.c: Include <sys/types.h> for pid_t.

	* sysdeps/posix/tempname.c (__stdio_gen_tempname): Take new arg
	STREAMPTR.  When non-nil, use __open with O_EXCL to test for
	existence, and set *STREAMPTR to new stream on returned fd.
	* stdio/stdio.h: Update prototype.
	* sysdeps/stub/tempname.c: Here too.
	* stdio/tmpfile.c: Pass &F to __stdio_gen_tempname instead of
	using fopen.
	* stdio/tmpnam.c: Pass extra NULL arg.
	* stdio/tempnam.c: Likewise.

	* configure.in (switches): Only put --os-{release,version} here.
	(config.status): Write $configure_args in place of $config $switches.

	* signal/Makefile (routines): Renamed sigaltstack to sigaltstk.
	* sysdeps/stub/sigaltstack.c: Renamed to sigaltstk.c.
	* sysdeps/unix/bsd/bsd4.4/sigaltstack.S: Renamed to sigaltstk.S.
	* sysdeps/unix/sysv/sys_getdents.S: Renamed to s_getdents.S.
	* sysdeps/unix/sysv/Makefile (sysdep_routines): Changed reference.

Fri Oct 22 03:47:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/realloc.c [MEMMOVE_MISSING]: Test this to use safe_bcopy.
	[emacs]: Don't define safe_bcopy.

	* time/zdump.c, time/europe: New versions from ADO.

	* Rules (dont_distribute): Export this variable.
	(subdir_echo-distinfo): Echo its value for +nodist+.

Thu Oct 21 15:58:08 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/__dup2.c: Include <limits.h>.
	[OPEN_MAX]: Fail with EBADF if FD2>=OPEN_MAX.

	* sysdeps/unix/Makefile (sys/param.h): Conditionalize all this
	code to happen only when there is no sysdep sys/param.h.

Wed Oct 20 03:35:41 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (make-dummy-dep): Change to `ln $(objpfx)dummy.dep $@'.
	($(objpfx)dummy.dep): Create new file containing comment.
	($(objpfx)%.dep: $(objpfx)%.s): Depend on $(objpfx)dummy.dep.
	($(+sysdir_pfx)sysd-rules): Likewise in generated rule.

Mon Oct 18 04:22:42 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* signal/signal.h (killpg): Make PGRP arg pid_t.
	* sysdeps/posix/killpg.c (killpg): Likewise.
	* sysdeps/stub/killpg.c (killpg): Here too.

	* posix/glob/configure.in: Use AC_HAVE_HEADERS instead of
	AC_MEMORY_H and AC_UNISTD_H; omit AC_USG (not needed).

	* Rules (generated): New target.

	* Makefile (subdirs): Use filters to put mach and hurd first in
	the list if they are in it at all.
	* Makerules (before-compile): Reorder similarly, matching any
	generated mach or hurd files.

Fri Oct 15 17:57:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/mk-stdiolim.c [! OPEN_MAX]: Use _POSIX_OPEN_MAX
	for FOPEN_MAX value.
	[! PATH_MAX]: Use 1024 (twice _POSIX_PATH_MAX) for FILENAME_MAX value.

	* Makerules (in-Makerules): Define this variable before including
	sysd-Makefile.

Sun Oct 10 14:31:35 1993  Jim Meyering  (meyering@comco.com)

	* posix/fnmatch.c [CONFIG_BROKETS]: Include <config.h> only under
	this condition, else "config.h".

Tue Oct 05 16:08:39 1993  Jim Meyering  (meyering@comco.com)

	* time/mktime.c [CONFIG_BROKETS]: Include <config.h> only under
	this condition, else "config.h".

Thu Sep 23 15:14:08 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/__dup2.c: New file.

Wed Sep 22 16:58:29 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/solaris2/statbuf.h: New file.
	* sysdeps/unix/sysv/sysv4/i386: New directory.
	* sysdeps/unix/sysv/sysv4/i386/statbuf.h: New file.

Fri Sep 17 04:03:26 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (+make-deps): Put output in temp file and use atomic mv.

	* Makerules ($(+sysdir_pfx)sysd-rules): New target, the rule part
	of what was in sysd-Makefile.  Include it.
	($(+sysdir_pfx)sysd-Makefile): Do just includes here.  Move the
	generated implicit rules to sysd-rules.  Put the output into a
	temp file and use atomic mv to final target.
	(before-compile): Filter out existing files from value, after
	sysd-Makefile but before sysd-rules.

Thu Sep  9 22:28:13 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile (%/configure): Copy rule from Make-dist.

Mon Sep  6 19:57:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (sources, objects): Move override definitions to
	before +depfiles calculation.

	* time/{asia,australasia,europe,zdump.c}: New versions from ADO (93e).

Mon Aug 30 13:40:34 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* string/string.h (memmem): Reverse argument order, to be like strstr.
	* sysdeps/generic/memmem.c: Here too.

	* dirent/scandir.c: For error return, save errno around closedir.
	Call closedir (DP) before returning successfully.

Thu Aug 26 19:26:06 1993  Brendan Kehoe  (brendan@zen.org)

	* sysdeps/unix/sysv/sysv4/solaris2/sysdep.h: Rewritten to not use
	the generic sparc sysdep.h.
	(PSEUDO): Use trap 8, not 0. Also just put %g0 in %o0, without
	subtracting 1.
	(ENTRY): Align on 4, and add a `.type' directive.
	* sysdeps/unix/sysv/sysv4/solaris2/sysdep.S: New file.

Fri Aug 20 19:37:55 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/abort.c: Remove unused variable ABORTING.

Thu Aug 19 17:45:34 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makeconfig [!objdir] [!..] (common-objdir): Set to `.'.

Wed Aug 18 15:10:13 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/__vfscanf.c (__vfscanf: number): Reverse sense of
	NUMBER_SIGNED conditional in assignment code.

Mon Aug 16 15:49:13 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (syscall.h): Add sed
	s/SYS_syscall_basenum/syscall_basenum/g.  SYSCALL_BASENUM is a
	macro both defined and used in <syscall.h>; we must undo our
	prependation of `SYS_'.

	* Version 1.06.6.

Fri Aug 13 16:53:02 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/__vfscanf.c: New local variable NUMBER_SIGNED.
	(%x, %X, %o, %u): Set it to zero.
	(%d, %i): Set it to one.
	(number): If NUMBER_SIGNED is set, use strtol and store in ...int*.
	If clear, use strtoul an store value in unsigned ...int*.

	* malloc/malloc.h: Undo last change (_AIX32).
	(memory_warnings): Use const instead of __const in prototype.

Fri Aug 13 00:22:01 1993  John Grabowski  (johng@whiskey.media.mit.edu)

	* configure.in (os = osf1*): base_os=unix/bsd.

Thu Aug 12 16:37:13 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/valloc.c [__GNU_LIBRARY__ || _LIBC]: Include <stddef.h>
	before trying to use size_t to declare __getpagesize.
	Include <sys/cdefs.h> before trying to use __P.

	* posix/{fnmatch,glob}.c, malloc/malloc.h [HAVE_CONFIG_H]: Include
	<config.h> instead of "config.h".  This is so that a compilation
	using -I. -I$srcdir will use ./config.h rather than
	$srcdir/config.h (which it would do when glob.c was found in $srcdir).

	* malloc/malloc.h [_AIX32]: Use !__STDC__ defns of __P, const, __ptr_t.

Mon Aug  9 16:56:31 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (-e check): Don't rely on $(findstring e,$(MAKEFLAGS))
	since that also trips for --no-print-directory.
	Instead actually see if -e's functionality is taking place.

	* malloc/realloc.c: Call _free_internal instead of free in most places.

	* configure.in (arg parsing): No spaces around = in eval.

	* sysdeps/i386/abort.c: New file.
	* stdlib/abort.c: Moved to sysdeps/generic/abort.c.
	(abort): Don't try to do stdio cleanup, since we can't guarantee
	it anyway.

Fri Aug  6 17:59:56 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules ($(+install)): Don't depend on installdirs.
	(make-target-directory): New define.
	(do-install): Do $(make-target-directory) beforehand.

Tue Aug  3 02:22:41 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/sys/reboot.h: New file.
	* sysdeps/unix/bsd/sys/reboot.h: New file, snarfed from 4.4.
	* misc/Makefile (headers): Add sys/reboot.h.

	* stdio/stdio.h (__io_{read,write,seek,close,fileno}): Renamed to
	__io_*_fn, so as not to conflict with the Hurd mig stubs.
	* internals.c: Changed uses.

	* sysdeps/unix/bsd/signum.h (SIGINFO): Define as 29.

	* Makerules (+includes): Don't set this here.
	* Makeconfig (+includes): Put $(+sysdep-includes) in the value here.

	* posix/unistd.h [__USE_MISC]: Declare mktemp and mkstemp.

Mon Aug  2 16:59:12 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/valloc.c: Move getpagesize goop to before malloc.h.
	[_LIBC]: Test this as well as __GNU_LIBRARY__ (either one) to use
	__getpagesize instead of "getpagesize.h".

Sun Aug  1 16:55:18 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (arg parsing): For `--with-foo=bar', do
	"with_foo='bar'".  For `--with-fnord', do "with_fnord=yes".
	* sysdeps/mach/configure: New file, groks `--with-mach=DIR'.

Fri Jul 30 00:01:00 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (os = gnu*): Set $base_os, not $os, to mach/hurd.

Thu Jul 29 17:46:02 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* ctype/ctype.h (__isctype): Don't test !=0, to avoid possible
	extra test insn.

Sun Jul 25 22:19:04 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* setjmp/setjmp.h [! __FAVOR_BSD] (_longjmp): Define as longjmp.

Thu Jul 22 14:57:15 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/osf1/sigaction.h: New file.

	* sysdeps/stub/signum.h: Deansideclized.
	* sysdeps/stub/pipestream.c (pclose): Test STREAM->__ispipe
	instead of __ispipe (STREAM).
	* sysdeps/stub/__wait3.c: Fix arg types.
	* sysdeps/stub/__ioctl.c: Add missing close paren.
	* sysdeps/stub/__getpgsz.c: Include <stddef.h> for size_t.
	* sysdeps/stub/__get[gu]id.c: Include <sys/types.h>; fix return type.
	* sysdeps/stub/__set[gu]id.c: Include <sys/types.h>; fix arg type.
	* sysdeps/stub/__mknod.c: Include <sys/types.h>; fix arg types.

	* sysdeps/generic/termbits.h (INLCR, ISTRIP): Fixed typo'd values.

	* stdio/stdio.h (vprintf): Fix last arg type to __gnuc_va_list.
	* stdio/vprintf.c (vprintf): Here too.

	* malloc/malloc.c (malloc) [SUNOS_LOCALTIME_BUG]: Put this crap
	after hook and initialization.

	* stdio/stdio.h (__validfp): Use a little anonymous struct to find
	the real stream ptr from in glue stream.  It used to rely on using
	`((int *) STREAM)[1]'; but that assumes no struct padding, and
	there will be some when int is 32 bits and pointers are 64.

	* malloc/mtrace.c: Use %lx instead of %x for `size_t' formats.

Wed Jul 21 18:20:41 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* malloc/malloc.c (malloc): Handle SUNOS_LOCALTIME_BUG.

Wed Jul 21 16:42:14 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/Makefile (extra-objs): Remove gratuitous - in `z.%'.

	* Makefile [+gnu-stabs] (generated): Add $(objpfx)munch-init.c.
	(distclean): Also remove sysd-Makefile and sysd-dirs in $(objpfx).
	(distclean) [objdir]: Also remove $(objpfx)Makefile.

	* sysdeps/posix/Makefile (generated): Add $(common-objpfx)mk-stdiolim.
	(generated, before-compile): Take defns out of ifeq ($(subdir),posix).

	* sysdeps/unix/common/Makefile (generated): Include ctype-glue.c,
	not glue-ctype.c.

	* sysdeps/unix/configure (unix_generated): New variable; collect
	names of created files in it.
	(config_vars): Write an assignment for `unix-generated' to that list.
	* sysdeps/unix/Makefile (generated): Append $(unix-generated)
	(with either $(objpfx) or $(sysdep_dir)/unix/ prepended to each file).

	* Makefile (clean): Pass no_deps=t to subdir_clean make.

Sun Jul 18 21:42:05 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/malloc.c (malloc): After getting more core, recompute
	BLOCK before adding to _heapinfo[BLOCK].free.size.

Fri Jul 16 16:32:40 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/Makefile (generated): Prepend $(objpfx).
	* sysdeps/unix/sysv/Makefile (generated): Likewise.

	* sysdeps/posix/mktemp.c: Return when stat fails with ENOENT, not
	when it succeeds.

Wed Jul 14 14:51:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* locale/localeconv.c: Fix copying notice to LGPL.

Mon Jul 12 21:58:27 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/mcheck.c (reallochook): Set HDR->magic to MAGICWORD.

Mon Jul  5 15:55:08 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* malloc/realloc.c (memmove): Swap the args when calling safe_bcopy.

Thu Jul  1 16:26:56 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/malloc.c [_LIBC] (_malloc, _free, _realloc): Define these
	functions to just call malloc, free, and realloc, respectively.

Wed Jun 30 16:42:10 1993  Torbjorn Granlund  (tege@gnu.ai.mit.edu)

	* sysdeps/generic/memcmp.c (memcmp_bytes): New function for
	little endian machines.
	(memcmp_common_alignment, memcmp_not_common_alignment): Rework
	code computing return values.

Wed Jun 30 14:42:00 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (local_lim.h): Only generate local_lim.h
	if the sysdep version would be stub.

	* sysdeps/unix/mk-local_lim.c: #include <stdio.h> before all else.

	* configure.in (config_{machine,vendor,os}): Store config.sub's
	output in these new variables.
	(machine, vendor, os): Set these from those.
	(config-name.h, config.make): Write $config_* (the original values
	from config.sub).

	* sysdeps/unix/sysv/sysv4/pgrpsys.S: Add arg count (3).

Tue Jun 29 02:47:46 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.4.

Mon Jun 28 00:37:12 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/internals.c (__stdio_check_funcs): New function, broken out
	of init_stream.
	(init_stream): Call it.
	* sysdeps/posix/pipestream.c (popen): Call __stdio_check_funcs
	before frobnicating STREAM's functions.

	* sysdeps/posix/pipestream.c (pclose): Free C, our data structure,
	not STREAM->__cookie after it's been restored.

	* sysdeps/generic/strchr.c: Check for '\0' as well as C, in initial
	byte-by-byte loop.

	* conf/portability.h: #undef BSD.

Sun Jun 27 23:46:05 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/m68k/__wait.S [__motorola__]: Use Motorola syntax.
	* sysdeps/unix/bsd/m68k/sysdep.S: Likewise.
	* sysdeps/unix/bsd/m68k/__pipe.S: Likewise.
	* sysdeps/m68k/__longjmp.c (__longjmp) [__motorola__]: Use
	Motorola syntax in jmp insn.

Fri Jun 25 16:17:07 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/{stub,posix,unix/sysv/sysv4}/__sysconf.c (__sysconf):
	For _SC_TZNAME_MAX, just return __tzname_max ().
	* sysdeps/unix/sysv/sco3.2.4/__sysconf.S: Define __sysconf, not
	sysconf.  For _SC_TZNAME_MAX, just jump to __tzname_max.

	Undo June 21 change that made __tzname_max a variable
	and expected TZNAME_MAX to sometimes be defined.
	POSIX.1 does not require that it be defined; sysconf is enough.
	* time/time.h (__tzname_max): Declare as a function.
	* posix/posix1_lim.h: Don't include <tzname_max.h>.
	* sysdeps/stub/tzname_max.h: File removed.
	* time/Makefile (headers): Remove tzname_max.h.
	(distribute): Remove make-tzlim.c.
	(extra-objs): Remove make-tzlim.o and make-tzlim.
	($(common-objpfx)tzname_max.h): Target removed.
	* time/make-tzlim.c: File removed.
	* time/__tzset.c (__tzname_cur_max): Define this variable instead
	of __tzname_max.
	(__tz_compute): Set __tzname_cur_max, not __tzname_max.
	(__tzname_max): New function.
	* time/tzfile.c (compute_tzname_max): Set __tzname_cur_max, not
	__tzname_max.

	* malloc/malloc.h [_MALLOC_INTERNAL] [! (_LIBC || STDC_HEADERS || USG)]
	(memmove): Don't define.
	* malloc/realloc.c [!_LIBC && !STDC_HEADERS && !USG] (safe_bcopy):
	New static function.
	(memmove): Define to safe_bcopy.

Wed Jun 23 15:10:51 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/pgrpsys.S: New file, #include sysv4 file.
	* sysdeps/unix/sysv/sco3.2.4/Dist: New file, list pgrpsys.S.

Tue Jun 22 02:44:16 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/Makefile (sysdep_routines): Use
	pgrpsys instead of sco_pgrp.
	* sysdeps/unix/sysv/sco3.2.4/{Dist,sco_pgrp.S}: Files removed.
	* sysdeps/unix/sysv/sco3.2.4/__{getpgrp,setpgrp,setsid}.c: Just
	include the respective unix/sysv/sysv4 files.

	* sysdeps/unix/sysv/sysv4/pgrpsys.S: New file.
	* sysdeps/unix/sysv/sysv4/__getpgrp.c: New file.
	* sysdeps/unix/sysv/sysv4/__setpgrp.c: New file.
	* sysdeps/unix/sysv/sysv4/__setsid.c: New file.
	* sysdeps/unix/sysv/sysv4/Dist: Add pgrpsys.S.
	* sysdeps/unix/sysv/sysv4/Makefile (sysdep_routines): Add pgrpsys.

	* sysdeps/unix/bsd/bsd4.4/__setsid.S: Moved from unix/sysv/sysv4.
	* sysdeps/unix/{bsd/sun/sunos4,bsd/ultrix4,sysv/linux}/__setsid.S:
	Include bsd4.4 instead of sysv4 file.

Mon Jun 21 19:08:04 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/posix1_lim.h: #include <tzname_max.h>.
	* sysdeps/stub/tzname_max.h: New file (no-op).
	* time/make-tzlim.c: New file.
	* time/Makefile (headers): Add tzname_max.h.
	(distribute): Add make-tzlim.c.
	(extra-objs): Add make-tzlim.o and make-tzlim.
	($(common-objpfx)tzname_max.h): New target.

	* sysdeps/unix/sysv/sco3.2.4/confname.h (_SC_TZNAME_MAX): Define.
	* sysdeps/unix/sysv/sco3.2.4/__sysconf.S: Detect arg being
	_SC_TZNAME_MAX, and return max of TZNAME_MAX and __tzname_max.

	* sysdeps/stub/__sysconf.c: Include <time.h> and <limits.h>.
	Handle _SC_TZNAME_MAX and return max of TZNAME_MAX and __tzname_max.
	* sysdeps/posix/__sysconf.c: Change _SC_TZNAME_MAX code to that.
	* sysdeps/unix/sysv/sysv4/__sysconf.c: Likewise.

	* time/time.h (__tzname_max): Declare as variable, not function.
	* time/__tzset.c (__tzname_max): Function removed.
	(__tz_compute): Set the __tzname_max variable.
	* time/tzfile.c (compute_tzname_max): New function.
	(__tzfile_{read,default}): Call it.

Sun Jun 20 18:32:49 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/zic.c, time/asia: New versions from ADO.

Wed Jun 16 17:24:28 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.3.

Fri Jun 11 15:44:53 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/m68k/__pipe.S: Use `movel' instead of `moveal',
	which sun3 as does not appear to grok.
	* sysdeps/unix/bsd/sun/m68k/__vfork.S: Likewise.

Thu Jun 10 20:23:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/Makefile (as-pipe-ok): Define if -pipe is used in
	compiler invocations, or if using GNU as.
	(compile-command.S): Define using a pipe if `as-pipe-ok' is defined,
	otherwise with a temporary file.

	* Makeconfig (gnu-as): Define if -DHAVE_GNU_AS appears in $(CPPFLAGS).

Wed Jun  9 15:14:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (os frobnication): Turn underscores as well as
	lowercase Vs into dots in os name.

	* sysdeps/unix/start.c [__GNUC__] (_start): Use asm name "start"
	only if [! NO_UNDERSCORES].

Tue Jun  8 14:51:00 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* sysdeps/unix/bsd/ultrix4/mips/__handler.S: Don't save the stack
	pointer.

Mon Jun  7 21:01:24 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/Makefile (tzcompile): Remove -d switch, since zic-cmd has one.

	* time/{private.h,zic.c}: New versions from ADO.

	* sysdeps/unix/bsd/hp/m68k/__brk.S (error): Renamed label from `1',
	(__brk): Use DO_CALL instead of movel and trap.

	* sysdeps/unix/bsd/sony/newsos4: Renamed sysdeps/unix/bsd/sony/newsos.
	* sysdeps/unix/bsd/sony/m68k/{Implies,sysdep.h}: Moved there.

	* sysdeps/unix/bsd/hp/m68k/sysdep.h (DO_CALL): New macro, broken
	out of PSEUDO.
	(PSEUDO): Use it.
	* sysdeps/unix/bsd/sony/newsos4/m68k/sysdep.h
	(DO_CALL, PSEUDO): Likewise.

	* configure.in: Set --with-gnu-{ld,as} for os=bsd4.4.

Fri Jun  4 14:11:00 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/i386/{strlen,memchr}.c: Use `repnz' instead of `repne'.

	* time/Makefile (zonenames): Rename zones-* to z.* so they all fit
	in 14 chars.
	(extra-objs): Here too.

	* sysdeps/unix/sysv/direct.h (D_RECLEN): New macro.
	* sysdeps/unix/readdir.c (D_RECLEN): If not defined, define to use
	`d_reclen' member.
	(readdir): Use D_RECLEN (DP) in place of DP->d_reclen.

Thu Jun  3 16:54:29 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/bytesex.h: New file.

	* sysdeps/unix/ioctls-tmpl.c [sony_news]: Define KANJI before
	including <sys/ioctl.h>.

Wed Jun  2 17:45:38 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/Makefile (%.gz): Renamed target from %.z; use -v flag.
	(malloc/ChangeLog): Use mv -f.

Mon May 31 21:49:04 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.2 released.

	* manual/Makefile: Remove all uses of $(objpfx).  Since the
	generated files are distributed, they reside in the source
	directory.

	* malloc/mtrace.c: #include <stdio.h>; malloc.h no longer does.

	* sysdeps/posix/sleep.c: Restore signal mask to OSET before
	returning.  Save errno on entry and restore it before returning.

	* Makeconfig (zonedir): New variable.
	* time/Makefile (localtime-file, posixrules-file, install-others,
	$(localtime-file), $(posixrules-file), tz-cc): Use $(zonedir) in
	place of $(datadir)/zoneinfo.
	(tzcompile): Omit -d switch.
	(zic-cmd): Add `-d $(zonedir)'.

Sun May 30 20:04:50 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/stdio_init.c: (int)cookie is FD, not *(int*)cookie. 

	* time/Makefile ($({localtime,posixrules}-file)): Don't pass -d
	switch (no need, since directory is compiled into zic).  Don't use
	$(<F) to find arg for -{l,p}; just use $({localtime,posixrules}).

	* Makerules ($(libdir)/libc.a): Depend on installdirs.

	* malloc/malloc.c (malloc): #if 0 out ``if (SIZE == 0) return NULL''.

	* malloc/malloc.h [_MALLOC_INTERNAL]: Don't include <stdio.h>.
	[_MALLOC_INTERNAL]: Move config.h, limits.h, and mem* to front of file.
	(NULL): Move after stddef.h.

	* malloc/valloc.c: Don't include config.h; malloc.h already did.

	* malloc/malloc.c: Undo rms's change.

	* malloc/mcheck.c, malloc/malloc.h: Undo rms's change.

Sat May 29 13:04:38 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* malloc/malloc.c (malloc) [emacs]: If size is 0, make it 1.

	* malloc/malloc.h (CONST): Define this always,
	rather than `const' sometimes.
	(memory_warnings): Use CONST, not __const, in decl.
	* malloc/mcheck.c (checkhdr): Use CONST, not const.

Fri May 28 18:29:26 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (ioctls): Use fgrep instead of egrep to
	omit unwanted symbols.  Filter the list of them through sort|uniq
	to remove duplicates first.

	* sysdeps/unix/Makefile (errlist.c): Use dir and notdir
	functions to guarantee qualified path name for make_errlist.

Thu May 27 17:05:04 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06.1.

	* sysdeps/sparc/Dist: Include sdiv.S, not div.S.

	* sysdeps/unix/common/Dist: Remove make_siglist.c.

	* stdio/internals.c: Declare __stdio_fileno before reference.

	* sysdeps/generic/{memchr,strchr,strlen}.c: Abort if words are
	bigger than 64 bits.

Wed May 26 14:44:19 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules [objects] (install-others): Don't add libc.a to this.
	(install): Depend on $(libdir)/libc.a.
	(intall-no-libc.a): New target, depends on $(+install).
	(install): Don't depend on $(+install), just on install-no-libc.a.
	* Rules (subdir_install): Depend on install-no-libc.a, not install.

	* Makefile ($(libc.a)): Don't depend on subdir_lib.
	(lib-noranlib): Depend on subdir_lib.

	Make `fileno' a per-FILE io operation.
	* stdio/stdio.h (__io_fileno): New typedef.
	(__io_functions): Add `__fileno' member.
	(struct __stdio_file): Remove `__fileno' member.
	[__USE_POSIX] [__OPTIMIZE__]: Remove fileno macro defn.
	[__USE_POSIX] (fileno): Remove `const' from arg in prototype.
	* stdio/fileno.c (fileno): Rewritten to call STREAM's __fileno fn.
	* sysdeps/stub/sysd-stdio.c (__stdio_fileno): New function.
	(__stdio_open): Return an int (zero for win, nonzero for lose),
	and make third arg PTR * (filled in with cookie).
	* stdio/stdio.h (__stdio_open): Changed prototype.
	* sysdeps/posix/sysd-stdio.c (__stdio_open): Likewise.
	(__stdio_{read,write,seek,close}): Use (int) COOKIE as the fd, rather
	than *(int *) COOKIE.
	(__stdio_fileno): New function; just returns (int) COOKIE.
	* sysdeps/posix/fdopen.c: Set cookie to (PTR) FD; don't set fileno.
	* stdio/vdprintf.c: Likewise.
	* stdio/fmemopen.c: Set STREAM->__io_funcs.__fileno to NULL.
	Set STREAM->__cookie to NULL and don't use STREAM->__fileno.
	* stdio/internals.c (__default_io_functions): Add __stdio_fileno.
	* sysdeps/posix/defs.c (stdstream): Initialize __cookie to (PTR) FD
	Remove __fileno initializer.
	Add NULL initializer for __io_funcs.__fileno.
	* sysdeps/posix/pipestream.c (struct child): Remove `fd' member.
	Add `cookie' and `funcs' members.
	(FUNC): Macro to define child io_funcs.
	(child_funcs): New variable, __io_functions struct of them.
	(popen): Store STREAM's original cookie and io_funcs in CHILD, and
	then set STREAM->__cookie to CHILD and stream->__io_funcs to
	child_funcs.
	(pclose): Restore STREAM's original cookie and io_funcs before
	calling fclose.

	* configure.in (autoconf checks): Add new check for a
	libc-friendly stddef.h.

	* sysdeps/unix/configure: Remove __getpgrp from list of syscalls.

	* sysdeps/generic/memchr.c: Handle 64-bit longwords.
	* sysdeps/generic/strlen.c: Likewise.
	* sysdeps/generic/strchr.c: Likewise.

	* sysdeps/unix/sysv/sco3.2.4/Makefile: Remove gratuitous `.c'.

	* Makerules [objects] (install-others): Add $(libdir)/libc.a to
	this, instead of adding $(libc.a) to install-lib.
	($(libdir)/libc.a): New target to install from $(libc.a).

	* sysdeps/unix/sysv/sco3.2.4/__setsid.S: New file.
	* sysdeps/unix/bsd/bsd4.4/__setsid.S: New file.

Mon May 24 16:49:54 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/linux/__setsid.S: Moved to unix/sysv/sysv4,
	and replaced with #include of that.
	* sysdeps/unix/bsd/sun/sunos4/__setsid.S: New file.
	* sysdeps/unix/bsd/ultrix4/__setsid.S: New file.

	* posix/Makefile (install): Define to getconf.

	* crypt: New version from glad.

	* sysdeps/unix/sysv/sysv4/__sysconfig.S: Renamed to sysconfig.S.
	* sysdeps/unix/sysv/sysv4/Makefile (sysdep_routines): Change reference.
	* sysdeps/unix/sysv/sysv4/Dist: Add sysconfig.S.

	* sysdeps/generic/Makefile (siglist.c): Use dir and notdir
	functions to guarantee qualified path name for make_siglist.

	* time/Makefile (tzcompile): Use $(@D) for target directory, not
	reference to nonexistent 4th dep.
	(localtime-file, posixrules-file): Turn these into absolute names.
	(install-others): Simply refer to them.
	($(datadir)/zoneinfo/{localtime,posixrules}): Change targets of
	these rules to $(localtime-file) and $(posixrules-file), respectively.
	Use $(<D) for directory to pass zic.

	* Makerules (installdirs): Use `sort' function to uniquize list of
	directories. 

	* time/Makefile (install-others): Use $(datadir)/zoneinfo, not
	$(datadir)zoneinfo (missing /).

	* Makerules (install-lib): Refer to `$(libc.a)' instead of `libc.a'.

	* setjmp/sigjmp_save.c: Renamed to sigjmp.c.
	* setjmp/Makefile (routines): Change reference.

	* sysdeps/unix/common/Makefile (siglist.c, make_siglist): Targets
	removed.
	* sysdeps/unix/common/make_siglist.c: File removed.

Sun May 23 01:00:00 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* manual/Makefile (minimal-dist): Remove COPYING.LIB.
	(doc-only-dist): Put it here.

Sun May 23 00:12:24 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Version 1.06 released.

	* sysdeps/sparc/Dist: Add {u,}{div,rem}.S.

Sat May 22 18:17:08 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/make_siglist.c (main): Call signame_init, not
	init_sigs.

	* Makerules (native-compile): Compile $^, not just $<.

	* sysdeps/unix/i386/sysdep.h (PSEUDO): Omit `.text'.  Some
	assemblers don't like `.text; ...'.

	* Rules (all): Mention as target first, so it is the default goal.

	* sysdeps/unix/i386/sysdep.S: #undef syscall_error before using it
	as a label.
	[NO_UNDERSCORES]: Define __syscall_error instead of syscall_error.

	* sysdeps/unix/readdir.c: Decrement d_namlen until it no longer
	includes any nulls.

	* Makerules (+install-dirs): Variable removed.
	(install): Don't depend on $(+install-dirs).
	(installdirs): New target, to make $(dir $(+install)) using
	mkinstalldirs.  Make $(+install) depend on it.
	* Makefile (distribute): Add mkinstalldirs.
	* mkinstalldirs: New file.

	* manual/Makefile (installdirs):
	New target, using mkinstalldirs to create $(infodir).
	($(infodir)/libc.info): Depend on installdirs.
	(minimal-dist): Remove Makefile.
	(doc-only-dist): New variable, containing Makefile and mkinstalldirs.
	(*.tar): Depend on $(doc-only-dist).

Sat May 22 16:31:54 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	Compile zoneinfo files directly into $(datadir)/zoneinfo, rather
	than compiling them into the source directory and then copying.
	* time/Makefile (zones-%): Put targets of generated rule in
	$(datadir)/zoneinfo, not zoneinfo.
	Don't make generated rules depend on zoneinfo/.
	(zonenames, zones-%): Write into $@.new and then use atomic mv.
	(zones, zoneinfo): Targets removed.
	(zoneinfo/localtime, zoneinfo/posixrules): Change targets to be in
	$(datadir)/zoneinfo; find $(localtime) and $(posixrules) there as well.
	($(localtime-file), $(posixrules-file)): Targets removed.
	(install-data): Definition removed.
	(install-others): Include $(zonenames) from $(datadir)/zoneinfo; and
	$(localtime-file) and $(posixrules-file), from $(datadir)/zoneinfo
	if they are not absolute file names.

	* time/zic.c (dolink): If FROMFILE or TOFILE begins with a slash,
	just set {FROM,TO}NAME to it, instead of prepending DIRECTORY.
	Don't free {FROM,TO}NAME if it is {FROM,TO}FILE.

Fri May 21 13:23:32 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/i386/sysdep.S: Paste : onto syscall_error.

	* sysdeps/unix/configure: Use grep -i when looking for syscalls.
	(unix_syscall_h): Ignore syscall.h found in sysdeps/stub.
	Remove __setpgrp from list of syscalls.

	* sysdeps/unix/Makefile ($(common-objpfx)sys/param.h): Write defn
	for MAXHOSTNAMELEN.  The kludgemeister strikes again.

	* posix/Makefile (glob/ChangeLog): Use mv -f.

	* configure.in (os frobnication): Translate numbers separated by
	`v's into numbers separated by dots.

	* sysdeps/unix/sysv/sco3.2.4/syscall.h: New file.

	* sysdeps/unix/sysv/sco3.2.4/__waitpid.S: Rewritten to do the
	canonical wait3-style magic.

	* sysdeps/unix/sysv/sco3.2.4/{Makefile,Dist,sco_pgrp.S,
	__getpgrp.c,__setpgrp.c,__setsid.c}: New files.

	* Makerules ($(common-objpfx)stub-$(subdir)): Add /dev/null to
	inner sed command.

	* manual/Makefile ($(objpfx)%.info, $(objpfx)%.dvi): New rules.
	($(infodir)/libc.info): Take basename of each $<* before using it.
	(glibc-targets): Add stubs.
	(stubs, $(common-objpfx)stub-manual): New targets.

	* time/Makefile (distribute): Add yearistype.
	* time/yearistype: New file.

	* sysdeps/unix/bsd/sequent/i386/__sigvec.S: Don't use ARGS_4
	macro; just set %ecx to %esp instead.  Pop the stack before doing
	the system call, so the add doesn't clear the condition codes.

	* sysdeps/unix/start.c [HAVE_GNU_LD]: Put `start' symbol alias
	under [! NO_UNDERSCORES && ! __GNUC__].

	* sysdeps/unix/sysdep.h (C_LABEL): Use ## to paste NAME and : together.

	* sysdeps/unix/i386/sysdep.h (DO_CALL): Add missing backslash.

Thu May 20 18:01:15 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile ($(+subdir_targets)): Remove old rule.  Replace with
	static pattern rule to depend on DIR/TARGET for each subdir and target.
	(all-subdirs-targets): Define variable to contain names of all
	those targets.
	($(all-subdir-targets)): Define rule for these to do sub-make.

	* sysdeps/unix/sysv/sysv4/direct.h (D_NAMLEN): Subtract one for
	the terminating null character.
	* sysdeps/unix/sysv/sco3.2.4/direct.h (D_NAMLEN): Copy defn from
	that file.

Thu May 20 11:02:59 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* sysdeps/posix/__getpgsz.c: New file.
	* sysdeps/unix/sysv/sysv4/__getpgsz.c: New file, include the posix one.
	* sysdeps/posix/__getdtsz.c: New file.
	* sysdeps/unix/sysv/sysv4/__getdtsz.c: New file, include the posix one.

	* sysdeps/unix/sysv/sysv4/{__sysconf.c, __sysconfig.S,
	sysconfig.h, Makefile, Dist}: New files.

	* sysdeps/generic/confname.h (enum for sysconf): Add _SC_PAGESIZE.
	* sysdeps/posix/__sysconf.c: Include stddef.h.
	(__getpagesize): Declare.
	(__sysconf, case _SC_PAGESIZE): Call __getpagesize.

Wed May 19 14:03:07 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* manual/Makefile (routines, aux, sources, objects, headers):
	Define empty.

	* Makeconfig (infodir): Define.
	* Makefile (+other_dirs): Add manual.
	* manual/Makefile: Include ../Makeconfig if it exists.
	(subdir): Export it.
	(find-includes): Output variable name is $(@F), not $@.
	(distribute): Export it.
	(mostlyclean, distclean, realclean, clean, subdir_clean): New targets.
	(install, subdir_install): New targets.
	(infodir, prefix, INSTALL_DATA, INSTALL): Define vars if undefined.
	($(infodir)/libc.info): New target.
	(dist): Use ../Make-dist if it exists.
	(glibc-targets): New variable.
	($(glibc-targets)): Make no-op targets.

	* config.guess: New file, maintained by Cygnus.
	* configure.in: Move AC_PREPARE before arg lossage check.
	If $target is unset, try setting it from config.guess.
	* Makefile (distribute): Add config.guess.

	* inet/getnetbyad.c: Change first arg type to int32_t.
	* inet/inet_mkadr.c: Change arg types to u_int32_t.
	* inet/inet_lnaof.c: Change return type to u_int32_t.
	* inet/inet_net.c: Likewise.
	* inet/inet_netof.c: Likewise.
	* inet/res_send.c, inet/res_query.c, inet/res_mkqry.c,
	inet/res_init.c, inet/res_debug.c, inet/res_comp.c,
	inet/inet_addr.c, inet/herror.c, inet/gethstnmad.c, inet/resolv.h,
	inet/netdb.h, inet/arpa/nameser.h, inet/arpa/inet.h:
	Snarfed latest code from BIND 4.9.1.
	* inet/sys/bitypes.h: New file.
	* conf/portability.h: New file.
	* inet/Makefile (headers): Add sys/bitypes.h.
	(distribute): Define to ../conf/portability.h.

	* mach/__msg_destroy.c: Renamed to __msg_dest.c.
	* mach/mig_syms.c: Renamed from mig_support_syms.c.
	Added symbol alias for mig_strncpy.
	* mach/__mig_strncpy.c: Renamed to mig_strncpy.c.
	* mach/mig_strncpy.c: File removed.
	* mach/Makefile (routines): Remove __mig_strncpy; change
	mig_support_syms to mig_syms; change __msg_destroy to __msg_dest.

	* sysdeps/posix/Makefile: Replace instances of `objpfx' and
	`objdir' with `common-objpfx' and `common-objdir'.

Mon May 17 16:29:29 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/asctime.c: Replace ` %2d' with `%3d' in FORMAT.
	(asctime): Check return from sprintf being <0, not <25.

	* sysdeps/unix/opendir.c: Include <stdio.h> for BUFSIZ.

	* sysdeps/unix/i386/sysdep.h (PSEUDO): Put ; after DO_CALL use.

	* sysdeps/i386/ffs.c: Use `nonzero' for asm label, instead of `1f'.

Sun May 16 17:59:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sequent/i386/__sigvec.S: Don't get fancy with
	xchg; just push $trampoline and then push our args again, pop them
	after the system call.

	* time/tzfile.c (__tzfile_default): Don't assume TYPES[0] is
	standard and TYPES[1] is DST.  Instead, loop through all types:
	if a type's isdst flag is set, set its idx to STDLEN and its
	offset to DSTOFF; if isdst is clear, set its idx to 0 and its
	offset to STDOFF.

	* time/__tzset.c: When __tzfile_default returns having set
	__use_tzfile, set __tzset_run before returning.

	* sysdeps/posix/sleep.c: Block SIGALRM with sigprocmask before
	changing its handler.  Use sigaction instead of signal to set the
	handler.  Use sigsuspend to restore the blocked signals and pause
	atomically, instead of using pause.  Be sure to disable the alarm
	when a signal other than SIGALRM wakes sigsuspend.

	* time/Makefile (zic-cmd): Put the directory before the nondirectory.

	* Makerules (stubs): Remove surrounding `ifdef +depfiles'...`endif'.

	* time/Makefile: Include ../Makeconfig before trying to use $(objpfx).

	* time/tzfile.c (__tzfile_compute): When there are transitions and
	TIMER is not before the first one, find the first transition after
	TIMER, and then set I to the type of the transition before it.
	Set INFO from types[I], not types[type_idxs[I]].

	* posix/Makefile (glob/configure): cd to glob before running autoconf.

	* time/__tzset.c (compute_change): Don't add 1900 to YEAR.
	(__tz_compute): Add 1900 to the year we pass to compute_change.

	* time/gmtime.c: After calling __offtime, zero tm_gmtoff and set
	tm_zone to "GMT".

	* time/time.h [__OPTIMIZE__]: Remove gmtime macro version.

	* time/tzfile.c (__tzfile_default): Fail if NUM_TYPES < 2, not if
	NUM_TYPES != 2.

	* time/tzfile.c (__tzfile_compute): Don't take arg TM.
	Instead take new args long int *LEAP_CORRECT and int *LEAP_HIT.
	Don't apply leap second correction to __timezone; instead set
	*LEAP_CORRECT and *LEAP_HIT.
	* time/__tzset.c (tzset_run): Renamed to __tzset_run, made global.
	(__tzset): Change uses.
	(__tz_compute): Change use here as well.
	Make second arg be a `const struct tm *'.  Don't call __tzfile_compute.
	* time/localtime.c: Call __tzset if __tzset_run is clear.
	New local vars LEAP_CORRECTION and LEAP_EXTRA_SECS.
	If __use_tzfile is set, call __tzfile_compute and pass it their
	addresses.  Only need to call gmtime if __use_tzfile is clear.  If
	it is clear, pass result of gmtime to __tz_compute, instead of
	dereferencing it first; and zero LEAP_CORRECTION and LEAP_EXTRA_SECS.
	Subtract LEAP_CORRECTION from __timezone in __offtime call.
	After __offtime, add LEAP_EXTRA_SECS to TP->tm_sec.

	* sysdeps/generic/strsep.c: Increment END when writing a null to
	it, and set *STRINGP to END rather than END+1, so *STRINGP never
	points past the null.

Sat May 15 17:10:02 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* time/strftime.c: Alphabetize switch cases.
	Add GNU extensions %h, %C, %k, %l.

	* time/asctime.c: Make RESULT big enough for each %d to be 2^64.
	Protect against tm_wday and tm_mon being out of bounds; use "???"
	if they are.

	* time/{emkdir,ialloc,scheck,zic,zdump}.c: New versions from ADO.

	* time/africa, time/antarctica, time/asia, time/australasia,
	time/europe, time/northamerica, time/southamerica,
	time/pacificnew, time/etcetera, time/factory, time/systemv,
	time/solar87, time/solar88, time/solar89, time/leapseconds:
	Updated from Arthur David Olsen's latest.

	* sysdeps/generic/__expm1.c, sysdeps/generic/asinh.c,
	sysdeps/generic/exp__E.c, sysdeps/generic/log.c,
	sysdeps/generic/log1p.c, sysdeps/generic/mathimpl.h,
	sysdeps/generic/pow.c, sysdeps/mach/hurd/__ioctl.c,
	sysdeps/mach/hurd/stdio_init.c, sysdeps/unix/bsd/clock.c: Put
	`const' qualifier always after storage classes.

	* sysdeps/unix/bsd/sequent/i386/__sigvec.S (trampoline): Use
	`call', not `jsr'.
	(__sigvec): Exchange the scratch reg with 16(%esp) (fourth arg
	slot), not 0(%esp) (return PC slot).  Use ARGS_4 to point the
	syscall at the args.

	* sysdeps/unix/common/__getgrps.c: When gid_t==int, and SIZE!=0,
	return N from __bsd_getgroups.

	* posix/unistd.h (__need_NULL): Define before including <stddef.h>.
	1003.1-1990 2.7.1 says it should be here.

Sat May 15 14:54:25 1993  Noah Friedman  (friedman@nutrimat.gnu.ai.mit.edu)

        * time/__tzset.c (compute_change): Add 1900 to YEAR, not 1970.

Fri May 14 21:24:19 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* sysdeps/unix/sysv/sysv4/solaris2/start.c: Define NO_EXPLICIT_START.
	* sysdeps/unix/sparc/start.c [NO_EXPLICIT_START]: Don't asm
	`_start' into `start' (e.g., for Solaris).

	* sysdeps/unix/sysv/sysv4/solaris2/sysdep.h: New file.

Fri May 14 19:34:54 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/Makefile: Remove depend-malloc dependency on malloc/gmalloc.c.

	* posix/Makefile (headers): Add sys/unistd.h.
	* posix/sys/unistd.h: New file, just includes <unistd.h>.

	* sysdeps/unix/common/glue-ctype.c (main): Define generated array
	as `unsigned char' rather than `char'.

	* sysdeps/unix/start.c [__GNUC__]: Use asm frob to make `start'
	asm name of _start.

	* sysdeps/unix/opendir.c [! _STATBUF_ST_BLKSIZE]: Don't fstat and
	use st_blksize; try BUFSIZ instead.

	* sysdeps/unix/Makefile (ioctls): Don't use sed to remove final |
	from snarf-ioctls output; just append a dummy alternative instead.

	* sysdeps/posix/__wait3.c: Fix arg types.

	* Makerules ($(common-objpfx)stub-$(subdir)): Use @ for sed
	separator char.  Pass extra file /dev/null in case `...` gets empty.

	* sysdeps/unix/sysdep.h (C_LABEL): Define new macro.
	* sysdeps/unix/i386/sysdep.h (ENTRY): Use it.
	* sysdeps/unix/sparc/sysdep.h (ENTRY): Likewise.
	* sysdeps/unix/sparc/__brk.S: Use C_LABEL and ENTRY instead of
	C_SYMBOL_NAME.
	* sysdeps/unix/i386/__brk.S: Use C_LABEL instead of C_SYMBOL_NAME.

Fri May 14 17:41:42 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* sysdeps/mips/sqrt.c [HAVE_GNU_AS]: Use the IEEE 754 version of
	sqrt since gas can't handle the `sqrt.d' synthetic instruction.

Fri May 14 16:33:47 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/Makefile (routines): Add tempname.

	* sysdeps/unix/common/make_siglist.c: #define const to empty
	around #include of <signal.h>.

	* sysdeps/unix/errnos.awk: Surround generated `DO' macro calls
	with #ifdef on the E* symbol.

	* sysdeps/unix/common/make_siglist.c [! HAVE_SYS_SIGLIST &&
	HAVE__SYS_SIGLIST]: Define sys_siglist to _sys_siglist.

	* termios/Makefile (headers): Add termbits.h.

	* posix/Makefile (headers): Add waitflags.h and waitstatus.h.

	* math/math.h (struct __complex): Rename to struct __cabs_complex.
	__complex is now a reserved word in GCC.
	* sysdeps/generic/cabs.c (cabs): Likewise.
	* sysdeps/ieee754/cabs.c (cabs, z_abs): Likewise.

	* sysdeps/unix/common/glue-ctype.c: Test for _ctype__ before _ctype_.

	* posix/Makefile (headers): Add confname.h.

Thu May 13 00:25:53 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* ctype/Makefile (tags_sources): Don't define.
	* MakeTAGS [subdir==ctype] (tags_sources): Put headers before sources.

	* time/__tzset.c (compute_change): Add 1970 to YEAR before using it.

	* sysdeps/unix/readdir.c: Pass a BASEP arg to __getdirentries.

Wed May 12 20:36:51 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makefile (distribute): Add aclocal.m4.

	* dirent/list.c (test): Clear errno before readdir loop.  Complain
	if errno is set thereafter.

	* sysdeps/unix/sysv/sysv4/solaris2/utsnamelen.h: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/__utimes.S: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/sigaltstack.S: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/Makefile: New file.

	* sysdeps/unix/bsd/sun/sparc/start.c: Moved to sysdeps/unix/sparc.
	* sysdeps/unix/sparc/start.c: Moved from sysdeps/unix/bsd/sun/sparc.
	Surround all shared library frobnication code with #ifndef NO_SHLIB.
	* sysdeps/unix/sysv/sysv4/solaris2/start.c: New file.

	* configure.in (os = solaris[2-9]*): base_os=unix/sysv/sysv4.

	* sysdeps/sparc/setjmp.S: Include <sysdep.h>, not "DEFS.h".
	Use ENTRY(__setjmp) instead of FUNC(___setjmp).

	* sysdeps/sparc/divrem.m4: [__svr4__]: Include <sys/trap.h>
	instead of <machine/trap.h>.

	* sysdeps/sparc/__longjmp.S: Include <sysdep.h>, not "DEFS.h".
	Use ENTRY(__longjmp) instead of FUNC(___longjmp).
	[__svr4__]: Use <sys/trap.h> instead of <machine/trap.h>.

	* sysdeps/unix/i386/sysdep.h (C_SYMBOL_NAME, SYS_ify): Moved to
	sysdeps/unix/sysdep.h.
	* sysdeps/unix/sparc/sysdep.h: New file.
	* sysdeps/unix/bsd/sun/sparc/sysdep.h: File removed.

	* sysdeps/unix/sparc/__brk.S: New file.
	* sysdeps/unix/sparc/__brk.c: File removed.

Wed May 12 19:43:37 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* malloc/cfree.c: Put malloc.h include in _MALLOC_INTERNAL conditional.

Wed May 12 16:24:23 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makeconfig (+link): Put $(LDFLAGS) in the value.
	* sysdeps/unix/bsd/sun/sparc/Makefile (LDFLAGS): Set it.

	* posix/glob.c: Move include <unistd.h> before dir includes.
	[HAVE_UNISTD_H] [! POSIX] [_POSIX_SOURCE]: Define POSIX.

	* grp/initgroups.c [! NGROUPS_MAX || NGROUPS_MAX == 0]: Just
	return 0 and do nothing.

	* sysdeps/unix/sysv/sco3.2.4/__{sys,path}conf.S: New files.
	* posix/unistd.h: Include <confname.h>; remove _{SC,CS,PC}_* defns.
	* sysdeps/generic/confname.h: New file.
	* sysdeps/unix/sysv/sco3.2.4/confname.h: New file.

	* malloc/cfree.c: Include <malloc.h> instead of <stdlib.h>.
	[_LIBC]: Use function_alias only under this conditional.
	[! _LIBC] (cfree): Define a function that just calls free.

	* posix/Makefile (glob.tar): Depend on glob/ChangeLog.
	(glob/configure): Just run autoconf, don't do a sub-make.
	(glob/ChangeLog): New target.
	(%.Z, %.z): New rules.

Mon May 10 16:56:09 1993  Jim Blandy  (jimb@geech.gnu.ai.mit.edu)

	* malloc/cfree.c: Put the meat of the file inside a "#if
	defined(__GNU_LIBRARY__)" clause, so that gmalloc.c, which
	incorporates this file, can be used outside of the C library.

Sun May  9 16:57:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/fseek.c: Don't call __flshfp unless STREAM is writable.

	* string/tester.c (main): Remove unused variable.

	* sysdeps/unix/bsd/set[er][gu]id.c: New files.

	* sysdeps/unix/mk-local_lim.c (NAME_MAX): Define to 255 if undefined.

	* malloc/Makefile (malloc-dist): Add ChangeLog and mem-limits.h.
	(malloc/ChangeLog): New rule using Noah's changelog-extract.
	(malloc.tar): Use o flag to tar to make compatible archives.
	(gmalloc-routines): Add calloc, valloc, and cfree.
	(dist-routines): Remove [cv]alloc from here.
	(routines): Remove cfree from here.

Fri May  7 16:45:54 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/ttyname.c: Replace fixed-sized NAME array with
	static char *NAME and static size_t NAMELEN.
	Don't check S_ISCHR.
	Don't hack NAME before the loop.
	If need more than NAMELEN chars to hold the name, increase NAMELEN
	to more than big enough and malloc NAME.
	Save errno in local var SAVE before doing anything; restore it
	when returning non-error.

	* Makefile (generated): Add $(objpfx)stubs.h.
	(README): New rule to call Make-dist to do the work.

	* mach/Makefile: Don't include mach-syscalls.mk if no_deps=t.

	* crypt/GNUmakefile (%.z): New rule for gzipping.
	(crypt.tar): Use o flag to tar to make compatible archives.

	* Makeconfig: Find config.make in $(common-objpfx), not $(objpfx).

	* io/Makefile (headers): Remove filebits.h.

	* sysdeps/unix/sysv/sysv4/Dist: File removed.

	* Makefile (README): Move from here.
	* Make-dist (README): To here.

	* sysdeps/unix/Makefile (sys/param.h): Don't depend on sys/.  It
	was causing sys/param.h to be remade all the time.

	* aclocal.m4 (GLIBC_PROVIDES): Add shell comment about configure
	being generated and not to be editted.

	* sysdeps/unix/swapon.S: Moved to sysdeps/unix/common.
	* sysdeps/unix/configure: Add swapon to list of syscalls to check for.

	* sysdeps/unix/mk-local_lim.c: New file, modified from
	sysdeps/unix/common/mk-local_lim.c.
	* sysdeps/unix/common/Makefile: Move local_lim.h rules from here.
	* sysdeps/unix/Makefile: Put them there.
	(local_lim-CFLAGS): Define new variable.
	(mk-local_lim): Replace $(native-compile) with its value plus
	$(local_lim-CFLAGS).
	* sysdeps/unix/common/Dist: Remove mk-local_lim.c.
	* sysdeps/unix/Dist: Add it here.

	* Makerules (make-dummy-dep): New variable; canned command.
	($(objpfx)%.dep: {$(objpfx),}%.s): New rules using $(make-dummy-dep).
	(sysd-Makefile): Write a $(objpfx)%.dep: $dir/%.s rule using it.

	* misc/ioctl.c: Replace function_alias with:
	[HAVE_GNU_LD]: Use symbol_alias.
	[! HAVE_GNU_LD]: Write out the function; it must fetch its third arg
	with va_arg and then call __ioctl.

Thu May  6 14:56:16 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/sys/ioctl.h (__ioctl, ioctl): Changed prototype to take 2
	args and ... rather than a 3rd __ptr_t arg.
	* sysdeps/stub/__ioctl.c: Changed defn.

	* sysdeps/unix/bsd/sun/sunos4/tcflow.c: Include <sys/ioctl.h>.

	* sysdeps/unix/Makefile (make-ioctls-CFLAGS): Define as
	-DHAVE_SYS_TERMIOS_H if $(sysincludedir)/sys/termios.h exists.
	(make-ioctls): Replace command `$(common-objdir-compile)' with
	that var's contents from Makerules, plus $(make-ioctls-CFLAGS).
	* sysdeps/unix/ioctls-tmpl.c [HAVE_SYS_TERMIOS_H]: Get <sys/termios.h>.

	* misc/sys/ioctl.h: Include <sys/ttydefaults.h> after <ioctls.h>.

	* sysdeps/unix/bsd/sun/sunos4/speed.c (cfget[io]speed): Return the
	raw speed, rather than using it as an index into `speeds'.
	(cfset[io]speed): Treat SPEED being an index into `speeds' just as
	if it were the value of that element.

	* termios/termios.h: Remove definitions of B[0-9]+ and EXT[AB].
	* sysdeps/generic/termbits.h: Put them here instead.
	* sysdeps/unix/bsd/sun/sunos4/termbits.h: Add new defns for those.

	* sysdeps/unix/Makefile (termbits-edit): If termbits.h is not the
	generic version, set this to an | egrep command which filters out
	symbols appearing in termbits.h.
	(ioctls): Depend on $(sysincludedir)sys/termios.h if it exists.
	Pass all deps after first to snarf-ioctls.
	Put $(termbits-edit) in cmd line; it may be empty or a pipe.
	Pipe through sort|uniq before tr (just to cut down on duplicates).

	* sysdeps/generic/Makefile, sysdeps/unix/Makefile: When deciding
	whether to generate files whose stub versions are chosen, also
	include the generation rules when the chosen directory is
	$(common-objpfx), so they continue to be defined after running once.

	* sysdeps/posix/Makefile: Use patsubst instead of substition
	references when the substitution or replacement contains a $.
	Make has a bug (which I just fixed) with such substitution references.

	* posix/wait3.c: Fixed arg types in fn alias.
	* posix/wait4.c: Likewise.

	* sysdeps/posix/Makefile: Remove vpath %.h line.
	* Makerules: Add vpath %.h directive.

	* sysdeps/posix/Makefile (generated, before-compile): Add
	$(common-objpfx)stdio_lim.h, not just plain stdio_lim.h.

	* Makerules (depend-$(subdir)): Put $(objpfx) in the output, not
	its expansion.
	(+make-deps): Add sed clause to translate the expansion of
	$(objpfx) back into the variable reference.

Wed May  5 15:59:40 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2/local_lim.h: New file.

	* sysdeps/unix/sysv/sco3.2/Makefile: New file
	* sysdeps/unix/sysv/sco3.2/Dist: New file.
	* sysdeps/unix/sysv/sco3.2/__fltused.c: New file.

	* sysdeps/unix/configure: New file.
	* sysdeps/unix/inet/__select.S: Moved to sysdeps/unix/common.
	This is because select is a call sysdeps/unix/configure wants to
	check for, and it simplifies life for all those to be in unix/common.

	* sysdeps/tahoe/Implies: Remove $(bsdmath)tahoe line.

	* sysdeps/unix/sysv/sco3.2.4/{__sigact,__sigproc,
	sigpending,sigsuspend}.S: New files.

	* Makefile (INSTALL): Depend on manual/maint.texi, not
	manual/maint.texinfo.  Use -- instead of + for long options.

	* configure.in: After setting $sysnames initially and adding the
	FPU directory, expand and uniquize the list with code that used to
	be in find-sysdirs.  Make $sysnames blank-separated rather than
	newline-separated.  Generalize loop iterating over $sysnames, so
	it sets $uname and sources sysdep configure scripts.  Move
	sys_siglist and ctype checks to sysdeps/unix/common/configure.in.
	Set Make variable `config-sysdirs' to $sysnames in config.make,
	and don't frob Sysnames or sysdirs files at all.
	* find-sysdirs: File removed.
	* Makefile (distribute): Remove find-sysdirs.
	(sysd-dirs): Depend on config.make instead of config.make.
	Use $(sysdirs) in place of `cat $<`.
	* aclocal.m4: New file.
	* sysdeps/unix/common/configure.in: New file, contains checks for
	sys_siglist and ctype glue moved from top-level configure.in.
	* Makerules (sysdirs, Sysnames): Rules removed.
	Don't include sysdirs.
	(sysdirs): Define variable from $(config-sysdirs).
	(sysd-Makefile): Depend on config.make instead of sysdirs.
	Use $(sysdirs) instead of filtering the sysdirs file.
	* Make-dist (+sysdep-tsrcs): Include configure and configure.in
	from sysdep dirs.
	(dist.tar): Use o flag to tar for compatible archives.
	(dist): Depend on foo.z instead of foo.Z.
	($(tardir){-crypt,}.tar.z): Renamed from .Z.
	(%.z: %): New rule.
	(%/configure: %/configure.in): New rule.

Mon May  3 17:45:06 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/sco3.2.4/__waitpid.S: New file.

	* sysdeps/unix/sysv/sco3.2.4/direct.h: New file.

	* sysdeps/unix/readdir.c: Moved from unix/bsd, rewritten to always
	use __getdirentries and D_NAMLEN macro, no #ifdefs.
	* sysdeps/unix/sysv/readdir.c, sysdeps/unix/bsd/bsd4.4/readdir.c,
	sysdeps/unix/bsd/ultrix4/readdir.c,
	sysdeps/unix/bsd/hp/m68k/readdir.c,
	sysdeps/unix/bsd/sun/readdir.c: Files removed.
	* sysdeps/unix/common/{close,open,rewind,seek,tell}dir.c: Moved to
	sysdeps/unix.
	* sysdeps/unix/sysv/direct.h: New file.
	* sysdeps/unix/bsd/direct.h (D_NAMLEN): Define to use d_namlen.
	* sysdeps/unix/sysv/sysv4/direct.h (D_NAMLEN): Define to calculate
	from d_reclen.
	* sysdeps/unix/__getdents.c: New file.
	* sysdeps/stub/direct.h: New file.
	* sysdeps/unix/bsd/Dist: Remove bsddir.h.
	* sysdeps/unix/sysv/sysv4/readdir.c: Moved to unix/sysv.
	* sysdeps/unix/sysv/sysv4/bsddir.h: Renamed to direct.h.
	* sysdeps/unix/bsd/bsddir.h: Likewise.
	* sysdeps/unix/common/opendir.c: Include "direct.h", not "bsddir.h".
	* sysdeps/unix/sysv/sysv4/readdir.c: Likewise.
	* dirent/Makefile (distribute): Define to include direct.h.

	* sysdeps/unix/common/opendir.c: Be sure to close FD if fcntl fails.

	* sysdeps/generic/memcopy.h: #include <sys/cdefs.h> and use __P
	prototypes instead of EXFUN.

	* sysdeps/generic/memcmp.c (__ptr_t, const): Define as appropriate
	conditional on [__cplusplus || __STDC__].

Thu Apr 29 21:48:37 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile ($(libc.a)): Make this, not lib, depend on subdir_lib.

	* Makerules ($(objpfx)%.{o,dep} rules): Remove spurious / after
	$(objpfx) in dependency patterns.

	* sysdeps/unix/bsd/sun/sparc/start.c (_start): Define with
	`asm ("start")', so its asm name is `start' rather than `__start'.
	Remove asm that did a `.set' pseudo-op, which Sun as seems not to grok.

Wed Apr 28 12:59:46 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/system.c: Return 0 if LINE is nil.

	* sysdeps/unix/__execve.S [!SYS_execve && SYS_exec]: Define
	SYS_execve to be SYS_exec.

	* time/mktime.c: Include <sys/types.h>.

Mon Apr 26 17:10:21 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/generic/memcmp.c: Deansideclized.
	[HAVE_CONFIG_H]: Include "config.h".
	[HAVE_STRING_H || _LIBC]: Put #include <string.h> under this.
	[_LIBC]: Put #include <memcopy.h> under this conditional.
	[! _LIBC]: Define op_t, OPSIZ, byte, and MERGE.

	* time/mktime.c: Define __isleap if not defined.

Fri Apr 23 18:08:33 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/__getdents.c: New file.
	* sysdeps/unix/sysv/sysv4/sys_getdents.S: Moved to unix/sysv.
	* sysdeps/unix/sysv/Makefile [subdir==dirent]: Add sys_getdents to
	sysdep_routines.
	* sysdeps/unix/sysv/Dist: Add sys_getdents.S.
	* sysdeps/unix/sysv/sysv4/Dist: Remove it from here.
	* sysdeps/unix/sysv/sysv4/Makefile: File removed.

Thu Apr 22 17:40:28 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sony/newsos4/m68k/sysdep.h: New file.

	* sysdeps/generic/strsep.c: Set *STRINGP to END+1, not END.

	* configure.in (arg parsing): Grok --verbose and set verbose=yes.

	* sysdeps/sparc/{umul,mul}.S: Remove ' from ! comment.

	* sysdeps/sparc/Makefile (*.S): Find divrem.m4 in this sysdeps dir.

	* sysdeps/unix/bsd/sun/sunos4/speed.c (cfset[io]speed): Typo fix.

	* sysdeps/unix/bsd/sun/sparc/vfork.S: Use a sethi insn and %g1 as
	a temporary, rather than expecting the address to fit into a short
	jump.

	* sysdeps/unix/bsd/__fork.S: Moved to sysdeps/unix/__fork.S; we
	want unix/MACHINE/__fork.S to come first.

	* sysdeps/unix/bsd/bsd4.4/__wait3.c: Make STAT_LOC type
	`__WAIT_STATUS' (defined in <sys/wait.h>).
	* sysdeps/unix/bsd/sun/sunos4/__wait4.c: Likewise.

	* signal/sigvec.c: Change args from `struct __sigvec *' to
	`struct sigvec *' in function alias.

	* signal/sigproc.c: Make arg SET `const sigset_t *' in fn alias.

	* signal/sigaction.c: Change args from `struct __sigaction *' to
	`struct sigaction *' in function alias.

	* sysdeps/unix/common/glue-ctype.c (main) [! TABLE]: Write just a
	comment saying we don't know the table name, rather than barfing
	with `TABLE' an undefined variable.

	* sysdeps/generic/printf_fp.c: Fixed test to chose %e format.
	Make loop condition --J > 0; break out of loop when FPNUM < F.
	After loop, use %e format iff J <= 0.

	* posix/glob/Makefile.in (.c.o): Put $(CFLAGS) last.
	(glob.o): Depend on glob.c.
	(fnmatch.o): Depend on fnmatch.c.

Wed Apr 21 12:40:03 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/Makefile (before-compile): Add stdio_lim.h.

	* configure.in (signed size_t test): Remove 's from rhs of AC_DEFINE.

	* stdio/internals.c (seek_to_target): If __stdio_check_offset
	fails with ESPIPE, do nothing.

	* sysdeps/generic/printf_fp.c: For %e type, add K-1 to CUTOFF,
	rather than K.
	When there are no post-decimal digits, never write a decimal point
	for a %g spec unless it had a # modifier.
	Move K==-1 test to write decimal point before K==CUTOFF test to
	round and write last digit.
	Merge code for first post-decimal digit with code for remaining digits.
	Move code to write leading fractional zeros inside K<0 test which
	determines if any will be needed.
	In decimal fraction notation code, use R10 temporary instead of
	repeating (R * 10) twice.

	* stdio/fwrite.c: Only fail when __stdio_check_offset fails if it
	failed with ESPIPE.  If offset==-1, don't change it or target.

	* sysdeps/posix/defs.c (stdstream): Rearrange initializers, as
	FILE has been rearranged.  Set offset and target to -1, not 0.

	* sysdeps/posix/stdio_init.c: If STREAM isatty, set its seek
	function to NULL.  Unix bites.

	* stdio/ungetc.c: Call __flshfp if linebuf_active or put_limit>buffer.

	* sysdeps/unix/bsd/sun/sparc/start.c [__GNUC__ < 2]: #error.

	* time/mktime.c: Deansideclized.
	Don't include <errno.h> or <limits.h>; we don't need them.
	[DEBUG] (printtm): Made static.
	[HAVE_CONFIG_H]: Include "config.h".
	[__GNU_LIBRARY__ || HAVE_LIMITS_H]: Surround #include <limits.h>
	with these conditionals.

	* time/offtime.c (__mon_lengths): Move defn to mktime.c; replace
	with extern decl.
	* time/mktime.c (__mon_lengths): Define here; remove extern decl.

Mon Apr 19 18:42:59 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/tempname.c: New file.
	* sysdeps/stub/sysd-stdio.c (__stdio_gen_tempname): Moved there.
	* sysdeps/posix/tempname.c: New file.
	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Moved there.

	* stdio/fopen.c: Don't set the offset to zero.  That can falsely
	give the impression that an unseekable object is seekable.

	* stdio/internals.c (__flshfp): Discard any pushed back character
	first thing after sanity checks.
	(__flshfp): Deconditionalize code to call the output-room
	function; we always want to give it a chance to prime the stream.
	Remove code that reset bufp if put_limit==buffer.  We want to let
	the output-room function do that--that is priming the stream.

Fri Apr 16 12:24:21 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules ($(libc.a)): Depend on lib-noranlib and have ranlib
	command line.
	(lib): Just depend on $(libc.a).

	* sysdeps/unix/bsd/sun/sparc/start.c (init_shlib): Use __environ,
	not environ.

	* stdio/internals.c (__flshfp): Don't check that the buffer
	actually contains anything when setting the put_limit to the end of
	the buffer if linebuf_active.
	(__flshfp): To write C into the buffer !FLUSH_ONLY, don't check
	that bufp > buffer and get_limit == buffer.  Check against
	put_limit unless linebuf_active (in which case check against the
	real put_limit, fp->__buffer + fp->__bufsize).
	(__flshfp): Bother to call the output-room function if !FLUSH_ONLY
	or bufp > buffer and get_limit <= linebuf-corrected put_limit.
	(__flshfp): Check for a NULL output-room function before checking
	if C will fit in the buffer.
	(flushbuf): After putting C into the buffer,
	set BUFFER_WRITTEN to zero and goto end instead of returning.

	* stdio/ungetc.c: Test STREAM->__pushed_back before flushing the
	STREAM if it's writable.

	* posix/glob.c, posix/fnmatch.c: Surround code with 
	#if defined (_LIBC) || !defined (__GNU_LIBRARY__)

Thu Apr 15 19:35:59 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* string/tester.c (main): Added tests for strsep.

	* sysdeps/ieee754/frexp.c: New file.

Wed Apr 14 12:49:10 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (ar-it): Add c flag to ar commands.

	* posix/glob.c [USG, NeXT]: Don't test these.
	[HAVE_STRING_H]: Test this to include string.h and define ANSI_STRING.
	[HAVE_MEMORY_H]: Test this instead of NEED_MEMORY_H.
	[! ANSI_STRING]: Put decls of bcopy and #define of memcpy et al here.

	* posix/fnmatch.c [HAVE_CONFIG_H]: #include "config.h".

Mon Apr 12 16:34:53 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob.c: Rationalize directory header conditionals.

Sun Apr 11 18:53:50 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/internals.c: Remove __libc_fatal.
	* sysdeps/stub/sysd-stdio.c: Remove __stdio_errmsg.
	* sysdeps/posix/sysd-stdio.c: Likewise.
	* sysdeps/stub/libc_fatal.c, sysdeps/posix/libc_fatal.c: New files.
	* stdio/Makefile (routines): Add libc_fatal.

	* stdio/stdio.h (FILE): Add new member `__linebuf_active' (flag).
	Rearranged order of members slightly.
	* stdio/setvbuf.c: Clear the linebuf_active flag.
	* stdio/fseek.c: Likewise.
	* stdio/internals.c (__flshfp): Test linebuf_active, not linebuf,
	to decide to reset put_limit before calling the output-room function.
	After calling it, if line-buffered, set put_limit to the
	beginning of the buffer and set the linebuf_active flag.
	(__fillbf): If linebuf_active is set, reset put_limit to the end
	of the buffer, and clear the flag.

	* stdio/ungetc.c: If STREAM is writable and has something in its
	buffer, flush it.

	* stdio/internals.c (__fillbf): When flushing all line-buffered
	streams, don't test for their put_limits being > than their
	buffers.  We should let __flshfp figure it out.

	* stdio/setvbuf.c: Always set the put_limit to the beginning of
	the buffer.

	* stdio/stdio.h	(__putc): Rewritten to remove all knowledge of
	magic for line-buffered streams.  It now always calls __flshfp when
	the bufp hits the put_limit.

	* stdio/fwrite.c: When recalculating BUFFER_SPACE after calling
	__flshfp, ignore the put_limit for the sake of line-buffered streams.

	* stdio/fseek.c (fseek): Call __flshfp on STREAM unconditionally.
	We don't want to try to put the conditions for when it is
	necessary here as well.

	* sysdeps/generic/printf_fp.c: When deciding whether to use %e
	format for %g, break out of the loop on J as soon as F reaches
	FPNUM; after the loop, set TYPE to 'e' if J<0, meaning we went all
	the way through.

	* misc/getpass.c (TCSASOFT): Define to 0 if undefined.
	(getpass): Use a variable OUT to store the stream where output goes.
	Use a variable NREAD to notice how much was read; if the last char
	in the buffer is a newline, clobber it to a null terminator.

	* posix/fnmatch.h [__cplusplus || __STDC__]: Don't #define const.

Thu Apr  8 19:29:37 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/tst-printf.c (main): Added some floating-point tests.

	* sysdeps/unix/bsd/sequent/i386/__sigvec.S: New file.

	* sysdeps/unix/sysv/i386/__sigret.S: Moved to sysdeps/unix/i386.
	Use DO_CALL instead of magic.

	* sysdeps/unix/bsd/i386/__wait3.S: Use DO_CALL instead of magic.
	Use scratch instead of %ecx and r1 instead of %edx.

	* sysdeps/unix/bsd/i386/__vfork.S: Rewritten to not use SYSCALL__.
	Use DO_CALL instead, and save the return PC in a register around
	the trap.

	* sysdeps/unix/i386/sysdep.h (DO_CALL): New macro to do syscall trap.
	(PSEUDO): Use it instead of putting the code here.

	* stdio/vfprintf.c (number): Write "0x" before padding, not after.

	* sysdeps/unix/bsd/sequent/i386/sysdep.h: New file.

	* sysdeps/unix/bsd/__setuid.c: #include <sys/types.h>.
	Change argument type to uid_t.
	* sysdeps/unix/bsd/__setgid.c: #include <sys/types.h>.
	Change argument type to gid_t.

	* sysdeps/unix/common/__getgrps.c: Restore errno after erroneous
	syscall failure.

	* stdio/tst-printf.c (fp_test): New function, batch of tests from
	a bug report.
	(main): Call it.

Wed Apr  7 17:17:17 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/pow.c (pow_p): Don't initialize K; was a dead store.

Mon Apr  5 21:17:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/common/__getgrps.c: If __bsd_getgroups returns an
	error and SIZE==0, alloc temp space for NGROUPS_MAX elts and call
	it again on that, so we can find the number of groups.

	* stdio/__vfscanf.c (input_error): If DONE is nonzero, return it;
	else return EOF.
	(%c): Don't check for C==EOF at the end; let the following spec get it.
	(%[eEfgG]): EOF after sign is conv_error, not input error.

	* sysdeps/unix/common/__getgrps.c: If gid_t==int, pass LIST to
	__bsd_getgroups, not NULL.
	No error for SIZE > NGROUPS_MAX.

Sun Apr  4 18:52:34 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/{bsd,sysv}/i386/Implies: Files removed.
	They should no longer be necessary, since configure now tries more
	sysdeps directory permutations.

	* sysdeps/unix/bsd/{i386,sun/sparc,hp/m68k,ultrix4/mips}/__set[ug]id.S:
	Files removed.  They should no longer be necessary, since the new
	sysdeps scheme should find unix/bsd/__set[gu]id.c before
	unix/__set[gu]id.S.

	* sysdeps/unix/i386/__pipe.S: Use r1 in place of %edx and scratch
	in place of %ecx.
	* sysdeps/unix/i386/__wait.S: Likewise.
	* sysdeps/unix/i386/__fork.S: Use r1 in place of %edx and r0 in
	place of %eax.
	* sysdeps/unix/i386/__vfork.S: Likewise.
	* sysdeps/unix/i386/sysdep.h (scratch): #define as %ecx.
	* sysdeps/unix/sysv/i386/linux/sysdep.h: Likewise.

	* configure.in ($uname = generic): Set kernel_{version,release} to
	empty before all else.
	If /vmunix doesn't exist, try grovelling over /dynix instead.

	* sysdeps/unix/Makefile (syscall.h): Double $ in sed cmd.

Fri Apr  2 15:15:44 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (config_vars): New variable; text to go in config.make.
	Use AC_HEADER_EGREP to grovel stdarg.h for __gnuc_va_list and set
	stdarg.h in config_vars if we find it.

	* sysdeps/unix/bsd/sun/sunos4/tcsendbrk.c,
	sysdeps/unix/bsd/sun/sunos4/tcflow.c,
	sysdeps/unix/bsd/sun/sunos4/tcflush.c,
	sysdeps/unix/bsd/sun/sunos4/tcsetattr.c,
	sysdeps/unix/bsd/sun/sunos4/__tcgetatr.c: New files.

	* sysdeps/unix/Makefile (syscall.h): Add sed cmd to terminate
	unterminated comments at the ends of lines.

	* sysdeps/posix/getcwd.c: Deansideclized and added four tons of
	portability goop.

Mon Mar 29 13:18:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sunos4/speed.c: New file.

	* sysdeps/generic/termbits.h: New file, contents taken from termios.h.
	* termios/termios.h: Remove type & macro defns; #include <termbits.h>.
	[__OPTIMIZE__] (cf[gs]et[io]speed): Remove macro versions.  They
	just cause trouble because they want to be in termbits.h (since
	they are sysdep) and also to come after the prototypes (which must
	come after termbits.h to get speed_t and struct termios defined).
	The optimization was insignificant anyway.
	* termios/speed.c: Moved to sysdeps/generic.

	* termios/cfsetspeed.c: Call cfset[io]speed, rather than doing it
	ourselves.

	* time/__tzset.c (tz_rule): Make member `secs' not a bitfield.
	(compute_change): Complete rewrite; code basically stolen from
	localtime3/localtime.c:transtime.
	#include "tzfile.h" for SECSPERDAY; #define NOID first.

	* sysdeps/unix/bsd/i386/__vfork.S: Don't try to #include __fork.S.
	Instead, copy that code here and change `fork' to `vfork'.

	* Makeconfig (+default_cflags): Rename to default_cflags.
	(+cflags): Use that name.

	* Makefile (configure): New rule.

Sun Mar 28 16:12:33 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/fnmatch.c (case '*'): Before final loop, fold C1, rather
	than foling *P before it goes into C1.  C might need folding instead.

	* posix/Makefile (tests): Add testfnm.
	* posix/testfnm.{c,args}: New files.

Fri Mar 26 15:04:27 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/mktime.c: Wholly new implementation from Noel Cragg.

	* sysdeps/unix/bsd/sun/__sigret.S: New file.
	* sysdeps/unix/bsd/sun/m68k/{Makefile,Dist}: New files.
	* sysdeps/unix/bsd/sun/m68k/{sigcontext.h,sigtramp.c}: New files.
	* sysdeps/unix/bsd/sun/sparc/__sigvec.S: Moved to sysdeps/unix/bsd/sun.

	* Makefile (clean): Remove sysd-Makefile, sysd-dirs, sysdirs
	(distclean): New target.
	* sysdeps/unix/common/Makefile (generated): Add local_lim.h,
	mk-local_lim, glue-ctype, glue-ctype.c, siglist.c, make_siglist.
	* sysdeps/generic/Makefile (generated): Add bytesex.h,
	det_endian, siglist.c, make_siglist.
	* sysdeps/unix/Makefile (generated): Add errnos.h, errnos,
	make-errnos, make-errnos.c, ioctls.h, ioctls, make-ioctls,
	make-ioctls.c, errlist.c, make_errlist, syscall.h, sys/param.h,
	param.h.c, param.h.dep, $(sys/param.h-includes).

	* misc/Makefile (extra-objs): Define new var to include bsd-compat.o.

Fri Mar 26 14:53:30 1993  Michael John Haertel  (mike@skinner.cs.uoregon.edu)

	* malloc/malloc.c (malloc): Start searching at _heapindex, not
	MALLOC_SEARCH_START.
	* malloc/malloc.h (MALLOC_SEARCH_START): Macro removed.
	* malloc/realloc.c (realloc): When malloc returns NULL, handle the
	case of the block we need to unfree (which was just freed) having
	been coalesced with its neighbors.

Thu Mar 25 13:40:17 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Rules (all): Depend on others.

	* time/Makefile (zonenames): Change target to $(objpfx)zonenames.
	Make the generated file prepend $(objpfx) to 
	Include that instead of zonenames.
	(zones-%): Change target to $(objpfx)zones-%.

	* Makefile ($(objpfx)Mcrt1.o): Put temporary Mcrt1.c file in
	$(objdir), rather than the current directory.

	* configure.in (arg parsing): Recognize `--exec-prefix' rather
	than `--exec_prefix'.

	* Rules (mostlyclean): Remove the .o files for $(tests) and $(others).
	Remove $(objpfx)depend-$(subdir).
	(clean): Remove $(extra-objs).
	* Makefile (clean): Remove $(install-lib) from $(objdir).
	Don't try to remove ansi/ and trad/ or dist.tar or lint.out.
	Remove $(objpfx)depend-.
	* time/Makefile (extra-objs): Define new var.
	* malloc/Makefile (extra-objs): Likewise.

	* Rules (+objs): Variable removed.
	(clean): Use $(objects) in place of $(+objs).

	* sysdeps/unix/Makefile (sys/param.h-includes): Move all this
	outside of ifeq ($(subdir),misc).
	Fixed sed command to filter out [hn]to[nh][sl].
	(sys/param.h-includes): New target; dep on $(sys/param.h-includes).

	* posix/fnmatch.h [!_POSIX_C_SOURCE || ...]: Make this test
	_GNU_SOURCE, not _BSD_SOURCE; these are our extensions, not theirs.
	(FNM_CASEFOLD): New bit.
	(__FNM_FLAGS): Removed macro.
	* posix/fnmatch.c (fnmatch): Don't test for bogus flag bits; who cares?
	(FOLD): New macro to casefold a char if FNM_CASEFOLD.
	Use it to fold all chars before comparison.

Wed Mar 24 16:09:26 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/Makefile (malloc/%.c, malloc/%.h): Rules removed.

	* stdio/stdio.h (fopencookie): Rename parameter IO_FUNCTIONS to
	IO_FUNCS.  The former conflicted with a typedef name, which ist
	verboten.

	* time/sys/time.h (enum __itimer_which): Remove trailing comma.

Mon Mar 22 15:35:54 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/malloc.h [_MALLOC_INTERNAL]
	[__GNU_LIBRARY__ || STDC_HEADERS || USG] (memmove): Define in
	terms of bcopy.
	* malloc/malloc/gmalloc-head.c: Redo previously undone change.

Thu Mar 18 04:59:21 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* malloc/malloc/gmalloc-head.c: Undo previous change.

Wed Mar 17 12:22:21 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* mach/mach.h: New file.

	* Rules (clean): Remove $(generated), not $(clean-extras).
	(subdir_echo-distinfo): Use $(generated) instead of $(dont_distribute).
	(generated): Export this instead of dont_distribute.
	* stdlib/Makefile (generated): Set this, not dont_distribute.
	* sysdeps/posix/Makefile: Likewise.
	* sysdeps/unix/sysv/Makefile: Likewise.
	* sysdeps/unix/Makefile: Likewise.
	* Makefile (generated): Export this instead of dont_distribute.
	(parent_echo-distinfo): Use $(generated) instead of $(dont_distribute).
	* Make-dist (+tsrcs): Filter out $(generated), not $(dont_distribute).

	* mach/mach_init.h (__mach_task_self): Define so as not an lvalue.
	(mach_task_self): Surround defn with parens.

	* sysdeps/unix/Makefile (sys/param.h): Put "#include <endian.h>" in.
	($(sys/param.h-includes)): Edit out #define's of *_ENDIAN and
	BYTE_ORDER.

	* stdlib/tst-strtol.c (tests): Fully bracket initializers.

	* stdio/bug4.c: Change #ifdef LIBC to #ifdef _LIBC.

	* misc/progname.c (set_progname): Make a useless reference to
	set_progname to avoid a `defined but not used' warning.

	* sysdeps/mach/i386/start.c (_cthread_{init,exit}_routine): Remove
	`extern'; these want to be uninitialized common defns.

Mon Mar 15 18:41:05 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/__times.c (timeval_to_clock_t): Put __inline
	before storage class in defn.

	* sysdeps/unix/sysv/signum.h (SIG_ERR, SIG_DFL, SIG_IGN): Cast
	values to __sighandler_t, rather than obsolete ansidecl magic.

	* sysdeps/unix/__execve.S [!SYS_execve && SYS_exece]: Define
	SYS_execve to be SYS_exece.

	* sysvipc: New directory.
	* sysvipc/Makefile: New file.
	* sysvipc/sys/ipc.h: New file.

Fri Mar 12 15:31:44 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/execlp.c (execlp): Remove spurious second declared parameter.
	Don't fill ARGV[0] specially; just let the loop do it.
	* posix/unistd.h (execlp): Remove spurious second declared parameter.

Thu Mar 11 13:58:47 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makerules (sysd-Makefile): Write %.dep: %.S and %.dep: %.c rules.
	Depend on Makerules.
	($(objpfx)%.{o,dep}: $(objpfx)/%.{S,c,s}): New rules to find
	sources in $(objpfx) before sysdep directories.

	* configure.in (signed size_t check): Use eval on $CPP, since it
	contains unexpanded variable refs.
	Send grep output to /dev/null.
	Put quotes around 'unsigned long int'.

Wed Mar 10 18:32:11 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* features.h [! _LIBC]: #include <stubs.h>.
	* Makerules (stubs): New phony target.
	($(common-objpfx)stub-$(subdir)): New target.
	* Makefile (headers): Add stubs.h.
	($(objpfx)stubs.h): New target.

	* Makeconfig (CPPFLAGS): Define _LIBC, not LIBC.

	* Makerules (.SUFFIXES): Remove .m4; we no longer have any such files.

	* inet/netinet/in.h: Don't #include <inet-cvt.h>.
	(ntohl, ntohs, htonl, htons): Declare.
	#include <endian.h>.
	[__BYTE_ORDER == __BIG_ENDIAN] (ntohl, ntohs, htonl, htons):
	Define no-op macros.
	* inet/Makefile (headers): Remove inet-cvt.h.
	* sysdeps/vax/inet-cvt.h, sysdeps/generic/inet-cvt.h: Files removed.
	* sysdeps/generic/{ntohl,ntohs,htonl,htons}.c
	[BYTE_ORDER == LITTLE_ENDIAN]: Byte-swap X before returning it.

Tue Mar  9 11:32:35 1993  Jim Blandy  (jimb@wookumz.gnu.ai.mit.edu)

	* malloc/malloc/gmalloc-head.c: Remove #definitions of memset,
	memcpy, and memmove; this is taken care of by malloc.h anyway.

Mon Mar  8 15:12:32 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/mips/jmp_buf.h (JB_PC): Protect with #ifdef __USE_MISC.

	* sysdeps/unix/sysv/sysv4/sigaction.h: Put SA_* except for
	SA_NOCLDSTOP inside #ifdef __USE_MISC.

Mon Mar  8 15:05:13 1993  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* sysdeps/mips/jmp_buf.h (jmp_buf): Use `__ptr_t', not `PTR', for
	member types.
	(JB_PC): New define, for backwards compatability with Ultrix.

	* sysdeps/unix/sysv/sysv4/sigaction.h: New file.

Mon Mar  8 13:20:02 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/glob/Makefile.in (VPATH): Set this to @srcdir@.
	(srcdir): Set this to $(VPATH).

	* posix/glob.c (glob): In no matches with GLOB_NOCHECK set case,
	add NULL terminator to PGLOB->gl_pathv.
	(prefix_array): Renamed arg PREFIX to DIRNAME, local var PRELEN to
	DIRLEN.  If DIRNAME is just "/", don't prepend it, so we get
	"/foo" instead of "//foo".
	(glob): Move qsort call outside of the else clause of the
	glob_pattern_p test; it should always be done.

Thu Feb 25 14:49:52 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* malloc/malloc.h [_MALLOC_INTERNAL]: Move #include <stdio.h> to
	front of file; it needs to come before size_t/ptrdiff_t frobnication.

Wed Feb 24 16:34:58 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (compile-command.[Ssc]): New variables; define them if
	they are not already defined.
	(sysd-Makefile): For each directory, write three rules:
		%.o: $dir/%.[Ssc]; $(compile-command.[Ssc]).
	(sysdep_path): Remove definition and vpath directives.
	* sysdeps/m68k/Makefile (compile-command.S): Define our own version.
	($(objpfx)%.o: %.S): Rule removed.

	* sysdeps/unix/sysv/linux/{__dup2,__mkdir,__rmdir,__setpgrp}.S:
	Removed.
	* sysdeps/unix/sysv/linux/Implies: Created; implies unix/common.

	* sysdeps/unix/sysv/sysv4/{sete[gu]id.S,fchdir.S,signum.h,__sigproc.S}:
	New files.

	* sysdeps/unix/sysv/sysv4/time.S: New file.

	* sysdeps/unix/common/Dist: New file; everything from
	sysdeps/unix/bsd/Dist except for bsdtty.h and bsddir.h.
	* sysdeps/unix/bsd/Dist: Remove things now in sysdeps/unix/common/Dist.

	* sysdeps/unix/bsd/sun/sparc/{__brk.c,__fork.S,__pipe.S,__vfork.S}:
	Moved to new directory sysdeps/unix/sparc.

	* sysdeps/unix/common/Implies: New file, in new directory; implies
	unix/inet only.
	* sysdeps/unix/bsd/Implies, sysdeps/unix/sysv/sysv4/Implies: New
	files; both imply unix/common.
	* sysdeps/unix/common/Makefile: Moved from sysdeps/unix/bsd.
	Changed references to unix/bsd to unix/common.
	* unix/bsd/{__access.S,__adjtime.S,__fchmod.S,__fchown.S,__getgrps.c,
	__getitmr.S,__getpgrp.S,__getrusag.S,__gettod.S,__lstat.S,__mkdir.S,
	__readlink.S,__rmdir.S,__setitmr.S,__setpgrp.S,__symlink.S,
	bsd_getgrp.S,closedir.c,ftruncate.S,getrlimit.S,glue-ctype.c,
	make_siglist.c,mk-local_lim.c,opendir.c,readv.S,rename.S,rewinddir.c,
	seekdir.c,setgroups.S,setrlimit.S,telldir.c,truncate.S,vhangup.S,
	writev.S,__dup2.S}: Moved to sysdeps/unix/common.
	* sysdeps/unix/sysv/sysv4/{__access.S,closedir.c,opendir.c,
	rewinddir.c,seekdir.c,telldir.c}: Removed.

Mon Feb 22 12:19:19 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/pow.c (pow): Use __isnan to test for NaN rather
	than expecting "x!=x" to work.
	(pow_p): When testing if Y is an integer, use long int rather than
	int; they are different on some systems.  Compare against
	LONG_MIN+1, not LONG_MIN; (long int) (double) LONG_MIN might overflow.

	* malloc/dist-Makefile (gmalloc.c): Depend on Makefile.

	* malloc/Makefile (gmalloc-routines): New variable.
	(dist-routines): Use it.
	(malloc/Makefile): Also replace <GMALLOC-SOURCES> with
	$(gmalloc-routines).
	(malloc/Makefile): Make it unwritable to avoid accidental lossage.
	Depend on Makefile.

	* malloc/dist-Makefile (gmalloc): New variable: <GMALLOC-SOURCES>.
	(gmalloc.c): Use $(gmalloc), not $(sources).
	Make the file unwritable to avoid accidental lossage.

	* malloc/mtrace.c: Don't #include <stdio.h> because <malloc.h> did
	it for us.

	* malloc/valloc.c [! __GNU_LIBRARY__]: Replace hairy conditionals
	with #include "getpagesize.h".
	* malloc/Makefile (distribute, malloc-dist): Add getpagesize.h.

Sun Feb 21 18:29:30 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/sparc/Makefile (nodist-routines): Don't define.
	We want to distribute the generated divrem files; otherwise anyone
	building the library must have an m4 that works.
	($(divrem).S): Put these in sysdeps/sparc, not in $(objdir).
	(routines): Only put this inside ifeq ($(subdir),gnulib).

	* sysdeps/unix/bsd/sun/m68k/Makefile: File removed.

Sat Feb 20 16:43:55 1993  Torbjorn Granlund  (tege@sics.se)

	* sysdeps/i386/memset.c: Move adjustment of LEN before first stosb.
	* sysdeps/i386/bzero.c: Likewise.

Thu Feb 18 14:34:00 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/mcheck.c (checkhdr): Use `const', not `__const'.

Mon Feb  1 19:19:13 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/m68k/fpu/__logb.c: Use two-operand forms of 68881 insns
	rather than the one-operand source==dest form.  Sun's sun3
	assembler apparently doesn't grok the one-operand form.

	* sysdeps/posix/getcwd.c: Call __lstat instead of stat.
	We should not lose on nonexistent symlink targets.

Thu Jan 21 20:12:25 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/glob.c: Put #includes of <glob.h> and <fnmatch.h> after
	all system includes, in case one of them has conflicting defns of
	FNM_* or GLOB_*, so we will redefine.  #undef FNM_* and GLOB_*
	before including our headers.

Tue Jan 19 16:16:05 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* mach/Makefile (routines): Removed __bcopy.
	* mach/__bcopy.c: File removed.

	* posix/glob.c (my_realloc): Cast result of malloc/realloc to (char *).

Sat Jan 16 14:19:07 1993  Richard Stallman  (rms@mole.gnu.ai.mit.edu)

	* manual/summary.awk: Handle single word in braces.

Thu Jan 14 13:52:43 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob/Makefile.in (realclean): Remove Makefile.

Mon Jan 11 18:32:56 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sony/m68k/Implies: Imply unix/bsd/hp/m68k, not
	unix/hp/m68k.

	* sysdeps/unix/bsd/tcsetattr.c: Use cbreak mode if ISIG is set,
	not if OPOST is set.
	Fixed typo in TOSTOP frobbing.

Tue Jan  5 15:11:31 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/Makefile (glob.tar): Include glob/configure.in.

Mon Jan  4 17:05:44 1993  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/glob/Makefile.in (RANLIB): Define to @RANLIB@.
	(RANLIB_TEST): Removed.
	(libglob.a): Don't use it.

Thu Dec 31 13:08:20 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/bsd4.4/{chflags,fchflags,setlogin}.S: Fix arg count.

	* sysdeps/posix/Makefile (mk-stdiolim): Use $(cded-objdir-CPPFLAGS).
	(cded-objdir-CPPFLAGS): Define new var.

	* sysdeps/unix/Makefile ($(sys/param.h-includes)): Strip trailing
	slash from directory name for mkdir.

Tue Dec 29 18:18:58 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/posix/sysd-stdio.c (exists): Return true if stat fails
	with other than ENOENT.

	* sysdeps/posix/__flock.c: New file.

	* malloc/Makefile (dist-headers): Define to malloc.h.
	(headers): Replace malloc.h with $(dist-headers).
	(malloc/Makefile): Use $(dist-headers) in place of $(headers).
	(malloc-dist, distribute): Replace ChangeLog with OChangeLog.

	* malloc/dist-Makefile (malloc.tar{,.Z}): Depend on FORCE.
	(FORCE): Define empty target.

Tue Dec 29 16:45:01 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/sparc/{umul,mul}.S: Use tege's shift+mask hack to avoid
	a test and branch for sign fixup.

	* limits.h [__GNUC__ >= 2]: #ifndef _GCC_LIMITS_H_, not _LIMITS_H_,
	to #include_next <limits.h>.

	* sysdeps/posix/getcwd.c: Call closedir after copying from the
	`struct dirent' buffer, not before.  That buffer is freed by closedir.

	* posix/gnu/types.h (__fd_set): Renamed member to `fds_bits' for
	compatibility with braindead extant code.

	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Check for BUF
	being too small before doing sprintf.

	* malloc/malloc.h [_MALLOC_INTERNAL], malloc/valloc.c
	[HAVE_CONFIG_H]: #include "config.h".

	* Makefile (doc): Removed rule.
	(dvi, info): New rule.

Mon Dec 28 15:50:31 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob.c [HAVE_CONFIG_H]: Test this, not SHELL, to decide
	whether or not we want to #include "config.h".

Wed Dec 16 12:01:09 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* inet/Makefile (routines): Removed ruserpass.  Why did it get
	included in the first place?  That version does not match the one
	in the NET2 ftp source; whence came it?

Sat Dec 12 16:41:03 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sparc/start.c: Use .set, not GNU ld magic,
	to alias asm symbol `start' to `__start'.

Fri Nov 20 18:20:50 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/vfprintf.c (%p): Tests of LEFT for "(nil)" were inverted.

	* stdio/tst-printf.c (main): Add `printf ("%#03x\n", 1);'.
	Add a width to %p test.

	* stdio/vfprintf.c (unsigned_integer): Clear SHOWSIGN and SPACE
	flags before falling into `number:'.  The `+' and ` ' flags are
	only meaningful for signed numbers.

	* string/tester.c (main): For strstr #11, correct return is first
	arg, not end of first arg.

	* stdlib/mbtowc.c: If S is "", return 0.  How was I convinced
	before that this is not what ANSI says?

	* stdio/__vfscanf.c: Initialize MALLOC_STRING to zero on each
	iteration (when we zero is_short et al).

	* sysdeps/posix/mkstemp.c (mkstemp): New file.
	* sysdeps/stub/mkstemp.c (mkstemp): New file.
	* misc/Makefile (routines): Add mkstemp.

	* sysdeps/posix/mktemp.c: Use `getpid ()' in place of undefined
	variable PID.
	#include <sys/stat.h>.

	* dirent/scandir.c: If SELECT is nil, don't try to call it.
	If CMP is nil, don't sort.

Wed Nov 18 13:42:09 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/__wait4.c: Changed type of 2nd arg to __WAIT_STATUS.

	* posix/sys/wait.h (__WAIT_STATUS): #if 0 out gcc2 magic defn.
	GCC is broken as of 2.3.1.

	* signal/signal.h (__sigaction, sigaction): Fixed type in
	prototype from `struct __sigaction' to `struct sigaction'.

	* sysdeps/m68k/fpu/atan2.c (PI, PIo4, PIo2): Removed static vars.
	(atan2): Declare PIo4 and PIo2 locally, and compute them from pi.

	* Makerules (native-CFLAGS): Define as $(config-defines).

	* sysdeps/unix/bsd/glue-ctype.c: Upcased all HAVE_* names in #ifdef's.

	* posix/fnmatch.h (FNM_LEADING_DIR): New flag.
	* posix/fnmatch.c (fnmatch): Support it.

	* sysdeps/i386/bytesex.h: New file.
	* sysdeps/i386/endian.h: Removed.
	* sysdeps/stub/bytesex.h: New file.
	* sysdeps/stub/endian.h: Removed.
	* sysdeps/generic/Makefile (bytesex.h): Create with det_endian.
	(endian.h): Removed old rule.
	(before-compile): Replace endian.h with bytesex.h.
	* string/Makefile (headers): Add bytesex.h.
	* string/endian.h: New file.
	* sysdeps/generic/det_endian.c: Rewritten to output just one line,
	a #define of __BYTE_ORDER to 1234, or 4321, etc.
	* inet/arpa/nameser.h: #include <endian.h>, rather than #ifdef'ing
	on misc. things to #define BYTE_ORDER.
	* sysdeps/generic/waitstatus.h: Test value of __BYTE_ORDER, not
	whether __LITTLE_ENDIAN is #define'd.
	* sysdeps/generic/mathimpl.h: Likewise.
	* sysdeps/generic/memcopy.h: Likewise.
	* sysdeps/ieee754/huge_val.h: Likewise.
	* sysdeps/ieee754/nan.h: Likewise.
	* sysdeps/ieee754/ieee754.h: Likewise.

Mon Nov 16 12:19:10 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makeconfig (ARCH): Define to empty if $(..)config.make exists.

	* misc/getusersh.c (initshells): malloc (STATB.st_size + 1), to
	contain the terminating NUL.  Pass fgets the real amount of space
	left in the buffer, instead of the random number (MAXPATHLEN + 1).

	* configure.in (minix*): base_os=unix/sysv.
	* sysdeps/unix/sysv/minix/sigaction.h: New file.

	* sysdeps/generic/sigaction.h (__SA_*): Renamed to SA_*.
	[__USE_BSD]: Put all but SA_NOCLDSTOP under this #ifdef.
	* signal/signal.h (SA_*): Remove #define's.
	(SIG_*): Moved #define's to sigaction.h.

	* sysdeps/generic/sigset.h (__sigmask): Shift ((sigset_t) 1), not
	just 1.

	* signal/signal.h (kill): Fix type of first arg to __pid_t, not int.

	* sysdeps/unix/Makefile (errnos): Changed regexp to disallow
	E[^A-Z0-9], and not to require that the defn be numeric only.

	* stdlib/stdlib.h: Don't #include <huge_val.h>; ANSI doesn't say
	<stdlib.h> defines HUGE_VAL.

	* stdlib/stdlib.h (__compar_fn_t): Use __P around prototype.

	* posix/Makefile (headers): Add utsnamelen.h, so it gets installed.
	(distribute): Remove it from here.

	* setjmp/setjmp.h (sigjmp_buf): Rename `__savemask' to
	`__mask_was_saved' and `__sigmask' to `__saved_mask'.
	* setjmp/sigjmp_save.c (__sigjmp_save): Change use.
	* setjmp/siglongjmp.c (siglongjmp): Likewise.

Fri Nov 13 17:34:00 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure.in (config.make): Write assignments for INSTALL,
	INSTALL_PROGRAM, INSTALL_DATA, and RANLIB.

Thu Nov 12 17:11:18 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/stime.c: #include <stddef.h> for NULL.

	* sysdeps/stub/morecore.c: Fixed arg type to ptrdiff_t.

	* sysdeps/stub/ptrace.c: Fixed `va_start' uses to pass 2nd arg.

	* sysdeps/unix/sysv/sysv4/fcntlbits.h: New file, modified from
	unix/bsd/sun/sunos4 version.

	* sysdeps/unix/bsd/bsd4.4/fcntlbits.h: New file, modified from
	unix/bsd version.

	* sysdeps/unix/bsd/ultrix4/fcntlbits.h: New file, modified from
	unix/bsd version.

	* sysdeps/unix/bsd/sun/sunos4/fcntlbits.h: New file, modified from
	unix/bsd version.

	* sysdeps/unix/sysv/fcntlbits.h: Rewritten from stub version.
	* sysdeps/unix/sysv/filebits.h: File removed.

	* sysdeps/unix/bsd/fcntlbits.h: Rewritten from stub version.
	* sysdeps/unix/bsd/filebits.h: File removed.

	* io/fcntl.h: Don't #include <filebits.h>.
	Removed all #define's of foo to __foo; <fcntlbits.h> now defines
	the unmarked cases.

	* sysdeps/stub/fcntlbits.h: Remove leading __ from all symbols.

	* misc/sys/file.h (L_SET, L_INCR, L_XTND): Define to literal
	values, not to __ versions.  These are not system-dependent.
	(LOCK_SH, LOCK_EX, LOCK_UN, LOCK_NB): Define to literal values,
	not to __ versions.  These are not actually system-dependent,
	because no system has `flock' except for BSD compatibility, and
	then they use the same numbers.
	* sysdeps/stub/fcntlbits.h (__L_SET, __L_INCR, __L_XTND): Removed.
	(__LOCK_SH, __LOCK_EX, __LOCK_UN, __LOCK_NB): Removed.

Tue Nov 10 17:01:11 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/stub/fcntlbits.h: Merged in contents of filebits.h.
	(struct __flock): Renamed to `struct flock'.
	* sysdeps/stub/filebits.h: File removed.

	* posix/unistd.h (access, lseek, close, read, write, pipe, chown,
	fchown, chdir, dup, dup2, execve, pathconf, fpathconf, sysconf,
	getpid, getppid, setpgrp, setpgid, setsid, getuid, getgid,
	geteuid, getegid, setuid, setreuid, setgid, setregid, fork, vfork,
	isatty, link, symlink, readlink, unlink, rmdir, gethostname,
	getpagesize, getdtablesize): Remove #define's to __ versions.

	* posix/sys/types.h: Don't #include <gnu/time.h>.
	Instead, use forward decl `struct timeval;'.
	(__select): Use `struct timeval', not `struct __timeval', in prototype.
	Move into #ifdef __USE_BSD.
	(select): Removed #define to __select; added real prototype.

	* sysdeps/generic/waitstatus.h: New file.
	* sysdeps/stub/waitflags.h: New file.
	* sysdeps/unix/bsd/waitflags.h: New file.
	* posix/sys/wait.h: Don't #include <gnu/wait.h>.
	Do #include <waitflags.h> and <waitstatus.h>.
	(WHOHANG, WUNTRACED): Don't #define to __ versions; <waitflags.h>
	will define the unmarked cases.
	(union __wait): Remove type decl and associated #define's for w_*;
	`union wait' (no __) is now defined in <waitstatus.h>.
	[__USE_BSD && __GNUC__ >= 2] (__WAIT_STATUS): Define as funky union.
	(waitpid, wait3, wait4, wait): Removed #define's to __ versions;
	added real prototypes.
	* posix/gnu/wait.h: File removed.
	* posix/Makefile (headers): Remove gnu/wait.h.

	* posix/sys/times.h [__OPTIMIZE__] (times): Removed #define to __times.

	* posix/sys/utsname.h: Removed decl of __uname_getnode.

	* time/sys/time.h: Don't #include <gnu/time.h>.
	Don't support __need_timeval.
	(struct timeval, struct timezone, struct itimerval,
	enum __itimer_which): Declare these types here.
	(gettimeofday, settimeofday, adjtime, getitimer, setitimer,
	utimes): Removed #define's to __ versions.  Added real prototypes.
	Use `struct timeval' instead of `struct __timeval', etc.
	* time/gnu/time.h: File removed.
	* time/Makefile (headers): Removed gnu/time.h.

	* resource/sys/resource.h: Don't #include <gnu/time.h>.

Mon Nov  9 18:41:03 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* socket/sys/socket.h (SO_STYLE): Define instead of SO_TYPE.
	(SO_TYPE): Define as SO_STYLE.

	* inet/netinet/in.h (struct ip_opts): New type.
	(IP_*): New constants snarfed from 4.4's in.h.

Fri Nov  6 15:34:41 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* resource/sys/resource.h (struct rusage): #include <sys/time.h>
	before struct defn.  Use `struct timeval', not `struct __timeval'
	for `ru_utime' and `ru_stime' members.

	* resource/sys/resource.h [__OPTIMIZE__] (getrusage, ulimit),
	misc/sys/ioctl.h [__OPTIMIZE__] (ioctl): Remove #define's to __
	versions.

	* string/strings.h: Protect against multiple inclusion.
	* termios/sys/termios.h: Ditto.

	* string/string.h [__GNUC__ && __OPTIMIZE__] (ffs): Remove #define
	to __builtin_ffs.

	* stdlib/stdlib.h (comparison_fn_t): Use a typedef, not a #define.
	Define this #ifdef __USE_GNU, not #ifdef __GNUC__.
	[__GNUC__ && __OPTIMIZE__] (abs, labs): Remove #define's to __builtin_.

Thu Nov  5 20:01:25 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* signal/Makefile (headers): Remove gnu/signal.h;
	add sigaction.h, sigset.h.
	* sysdeps/generic/sigaction.h: New file.
	* sysdeps/generic/sigset.h: New file.
	* signal/gnu/signal.h: Removed.
	* signal/signal.h: Move __{BEGIN,END}_DECLS outside all the #if's
	(except the outermost one that protects against multiple inclusion).
	Don't #include <gnu/signal.h>.  Instead #include <sigset.h>
	outside of #if's, and #include <sigaction.h> inside #ifdef __USE_POSIX.
	(__sighandler_t): Define here; it is not system-specific.
	(kill, ssignal, gsignal, sigblock, sigsetmask, sigpause, sigvec,
	sigreturn): Remove #define's to __ versions.
	(sighandler_t, sigset_t): Use a typedef, not a #define.
	[__OPTIMIZE__] (sig{empty,fill,add,del}set, sigismember): Make
	these macros take args.
	(sigaction): Remove #define.
	(struct __sigvec): Renamed `struct sigvec'.
	(__sigvec): Use `struct sigvec', not `struct __sigvec', in prototype.

Fri Oct 30 19:45:26 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* configure.in (sco*): base_os=unix/sysv.

Thu Oct 29 16:29:26 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* configure.in: New file; mostly contents of old file `configure'.
	(srcdir guessing): Removed this code.
	Instead, call AC_PREPARE.
	Call AC_PROG_INSTALL and AC_PROG_RANLIB to find those programs.
	Use AC_HAVE_FUNCS to find what sys_siglist and _ctype_ are called.
	(config.make): Write new var `config-defines' with what autoconf
	put in $DEFS.
	Append -DHAVE_GNU_LD and -DHAVE_GNU_AS to DEFS if appropriate;
	don't write gnu_ld and gnu_as variables.
	* configure: Removed.
	* Makefile (distribute): Add configure.in.
	* Makeconfig (+defines): Include $(config-defines) before $(defines);
	don't include $(gnu_as) and $(gnu_ld).

	* sysdeps/unix/bsd/glue-ctype.c (TABLE): Test HAVE_* for several
	different names and #define this.
	(STRINGIFY): Define macro.
	(main): Use TABLE instead of hardcoded name.

	* configure (sysnames): Try successively less specific base os's.

	* Makerules (ar-it): Define commands only ifdef objects.

	* sysdeps/mips/setjmp.S: Jump to __setjmp_aux, not ___setjmp_aux.
	We are NO_UNDERSCORES.

Tue Oct 27 18:11:19 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/posix/pipestream.c, sysdeps/posix/system.c: Always use
	__vfork instead of expecting FORK to be defined.
	* sysdeps/unix/bsd/system.c, sysdeps/unix/bsd/pipestream.c:
	Removed.  sysdeps/unix versions are now what we want.

	* sysdeps/unix/bsd/sun/sunos3/m68k/__wait.S: Removed.
	* sysdeps/unix/bsd/hp/m68k/__wait.S: Moved to unix/bsd/m68k.

	* sysdeps/unix/bsd/hp/m68k/{__pipe,sysdep}.S: Moved to unix/bsd/m68k.
	* sysdeps/unix/bsd/sun/m68k/{__pipe,sysdep}.S: Removed.

	* sysdeps/unix/bsd/sun/m68k/start.c: Moved to unix/bsd/m68k.
	* sysdeps/unix/bsd/sony/m68k/start.c: Removed.

	* sysdeps/unix/bsd/bsd4.4/__sigstmsk.c: Correct file name in #include.

	* sysdeps/unix/bsd/sun/m68k/__fork.S: Removed.
	* sysdeps/unix/bsd/hp/m68k/__fork.S: Removed.
	* sysdeps/unix/bsd/vax/__fork.S: Moved to unix/bsd.

	* sysdeps/generic/__vfork.c: New file; fn alias to __fork.
	* sysdeps/stub/__vfork.c: Removed.

	* limits.h: Only do #include_next #ifndef _LIMITS_H_.

	* malloc/mcheck.c (mcheck): Set abortfunc to either FUNC or abort;
	never leave it unchanged.
	Return 0 if mcheck_used; -1 if not.
	* malloc/malloc.h (mcheck): Change return type in decl.

	* Makerules (+depfiles): Don't include them if there are none.

Mon Oct 26 16:30:52 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/fdopen.c: Use fcntl to check that FD is valid and
	allows the access MODE specifies.

	* sysdeps/stub/getcwd.c: #include <stddef.h>.

	* sysdeps/stub/sleep.c: #include <errno.h>.

Sun Oct 25 02:24:47 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (+includes): Add $(+sysdep-includes) to this, leaving
	CPPFLAGS alone.

	* sysdeps/stub/stime.c: #include <time.h>.

Thu Oct 22 13:36:48 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Rules (clean): Also remove $(clean-extras).

Tue Oct 20 18:36:40 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* configure: Write error message and lose for option with missing arg.

	* stdio/__vfscanf.c: Add `a' modifier, which makes %s and %[ fill
	in a char ** with a malloc'd string.
	(STRING_ADD_CHAR, STRING_ARG): New macros to deal with this hair.
	(%s, %[): Use them.

	* posix/gnu/types.h [__GNUC__] (__fsid_t): Define as long long.

	* stdio/vfprintf.c: Add %m, which is %s of strerror (errno).

Mon Oct 19 14:19:36 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* socket/sys/socket.h (PF_FILE, AF_FILE): Define new macros.
	(PF_UNIX, AF_UNIX): Make aliases for [PA]F_FILE.

	* sysdeps/ieee754/huge_val.h: #include <sys/cdefs.h>.
	[!__GNUC__]: Use __const, not CONST.

	* posix/wordexp.h: Fix indentation and syntax errors.

	* stdio/vasprintf.c (vasprintf): Set seen bit.

Fri Oct 16 17:18:34 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makefile (Mcrt1.o): Create an empty .c file and compile it,
	rather than creating an empty .o file.

	* sysdeps/unix/Makefile (sys/param.h): Strip / from name for mkdir.

	* sysdeps/m68k/fpu/atan2.c [! __GNUC__]: Include generic, not iee754.

	* sysdeps/sparc/Makefile ({divrem}.S): Use $(M4) for m4 in cmds.
	* Makeconfig (M4): Define it.

	* stdio/newstream.c (__newstream): Link STREAM onto __stdio_head
	after malloc'ing it.

	* time/emkdir.c: #define unix if not already defined.

Thu Oct 15 19:55:45 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdlib/wctomb.c: When passed 0, store a '\0' and return 1.
	* stdlib/mbtowc.c: When passed "", store a 0 and return 1.

	* sysdeps/generic/strstr.c: When NEEDLE is "", return HAYSTACK.

Thu Oct 15 19:25:46 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/malloc.h (__after_morecore_hook): Declare new var.
	* malloc/malloc.c (__after_morecore_hook): Define it.
	(align): Call it.

Mon Oct 12 15:56:07 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/malloc.h (r_alloc, r_alloc_free, r_re_alloc): Declare.

	* Makerules (native-compile, common-objdir-compile): Pass
	$(native-CFLAGS) to the compiler.

	* Makeconfig (+gccwarn): Removed -Wstrict-prototypes and
	-Wpointer-arith.  They were not really helping, and caused extra
	warnings for harmless code.

	* malloc/Makefile (dist-routines): Add ralloc.
	(gpl2lgpl): Add ralloc.c.

	* time/zic.c: #define unix if not already defined.

	* Makerules ($(gpl2lgpl)): Make output unwritable; use mv -f.

Mon Oct 12 15:27:40 1992  Brendan Kehoe  (brendan@mole.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/ultrix4/mips/__set[gu]id.S: Handle returning to
	the proper caller ourselves, since setre[gu]id won't be doing it.

Mon Oct 12 13:37:16 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/malloc.h: Declare memory_warnings.
	* malloc/Makefile (dist-routines): Add vm-limit.
	(distribute): Add mem-limits.h.
	(gpl2lgpl): Add vm-limit.c, mem-limits.h.

	* gpl2lgpl.sed: Remove "This file is part of ..." lines.
	Changed regexp to match "foo is free software", not just "This
	program ...".

	* Makerules (+make-deps): Put file name before options on command line.

	* Makefile (install-lib): Remove libc.a from here.
	* Makerules [objects] (install-lib): Append it here instead.

	* io/sys/stat.h (S_IRWXO): Fixed typo.

Sun Oct 11 16:58:36 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob.c (__glob_{open,read,close}dir_hook): New vars.
	(glob_in_dir): Use them.
	* posix/glob.h: Declare them.

Thu Oct  8 20:03:30 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* configure (config.make): Write comment to edit configparms instead.

Wed Oct  7 17:15:05 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/stub/__chown.c: Fixed arg types (int -> [ug]id_t).

	* sysdeps/stub/__geteuid.c: Fixed return type (int -> __uid_t).

	* sysdeps/stub/__getegid.c: Fixed return type (int -> __gid_t).

	* configure: Write defns in config.make for vars config-machine,
	config-vendor, and config-os.

	* ctype/ctype.h (__isctype, __tolower, __toupper): Cast argument
	and return value to `int'.

	* ctype/ctype.h (__ctype_tolower, __ctype_toupper): Changed type
	to `short int *'.
	(toupper, tolower): Removed inline functions; restored macros.
	* ctype/ctype.c (tolower, toupper): Just call the __ macros.
	* ctype/ctype-info.c: Change types here too.
	* locale/localeinfo.h: And here.
	* locale/C-ctype_ct.c: Ditto.

	* crypt: New code from Michael Glad.

	* Makefile (munch-init.c), sysdeps/unix/Makefile
	($(sys/param.h-includes), make-errnos.c, make-ioctls.c),
	sysdeps/unix/bsd/Makefile (local_lim.h, ctype-glue.c),
	sysdeps/posix/Makefile (stdio_lim.h): Changed rules to use a
	shorter suffix than `-tmp', to avoid exceeding 14 char limit.

Tue Oct  6 15:13:57 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile (README, INSTALL): Moved rules here.
	* Make-dist: From here.

	* sysdeps/unix/bsd/sun/m68k/{__pipe,__fork,sysdep}.S: Change uses
	of sysdeps/unix/bsd/hp9k3bsd to sysdeps/unix/bsd/hp/m68k.

	* sysdeps/m68k/Makefile: Put .S rule here.
	* sysdeps/unix/bsd/hp/m68k/Makefile: Removed file.

Mon Oct  5 19:40:22 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/pow.c (pow_p): Changed code to KY jelly.

	* sysdeps/unix/bsd/ultrix4/utsnamelen.h: New file.
	* sysdeps/unix/bsd/ultrix4/uname.S: New file.

Fri Oct  2 17:43:32 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/posix/mktemp.c: Don't use a static index and increment
	it on each call.  Instead, always start at the beginning and
	iterate until we find a file that does not exist.

	* sysdeps/unix/sysv/i386/signal.S: Use C_SYMBOL_NAME for __sigreturn.
	Added comment about gas bug with `lcall' insn.

	* sysdeps/unix/i386/__brk.S: Use C_SYMBOL_NAME for __curbrk and _end.

	* sysdeps/unix/i386/sysdep.S: #include <sysdep.h>.
	Use C_SYMBOL_NAME(errno) in place of _errno.

	* sysdeps/unix/sysdep.h (___errno): Removed #define to _errno.
	`errno' is an ANSI name; it doesn't need to be aliased.
	* sysdeps/unix/bsd/sun/m68k/sethostid.S,
	sysdeps/unix/bsd/sun/m68k/__vfork.S,
	sysdeps/unix/bsd/sun/sparc/sysdep.h,
	sysdeps/unix/bsd/sun/sparc/sethostid.S,
	sysdeps/unix/bsd/vax/sysdep.S,
	sysdeps/unix/bsd/vax/__vfork.S: Use _errno, not ___errno.

	* sysdeps/unix/sysv/sysdep.h: File removed.
	* sysdeps/unix/sysv/i386/sysdep.h: Don't #include it.
	#define NO_UNDERSCORES before #include <sysdeps/unix/i386/sysdep.h>.

	* sysdeps/unix/i386/sysdep.h (C_SYMBOL_NAME): Define new macro.
	[NO_UNDERSCORES]: #define syscall_error to __syscall_error, so we
	stay name space tidy.

	* sysdeps/unix/sysv/sysv4/sys_getdents.S: Added missing arg count (3).

	* sysdeps/unix/sysv/i386/time.S: Fixed to not use bogus addressing
	mode `4(%esp,1)'; use `4(%esp)' instead.  Added comments.

	* sysdeps/stub/__fchmod.c (__fchmod): Fixed arg type to mode_t.

	* sysdeps/posix/__wait3.c: #include <stddef.h> for NULL.

	* sysdeps/unix/i386/__wait.S: Use asm label `null' instead of
	`1f', and actually define the label!  Added comments.

	* sysdeps/i386/memchr.c: Renamed asm label to `done'; not all
	assemblers support numbered labels like `1f' or `1b'.

	* stdio/fseek.c (fseek): Discard char pushed back by ungetc.
	* stdio/ftell.c (ftell): If we have a pushed-back char, decrement
	the file position we return.

	* sysdeps/unix/bsd/sun/sparc/vfork.S: New file.

Wed Sep 30 18:48:38 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* limits.h (_LIBC_LIMITS_H_): Define today's name for this.
	RMS said it was to be `_LIBC_LIMITS_H', but that is not what
	gcc actually uses.

Tue Sep 29 18:17:12 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* time/Makefile (zic-cmd): Define variable.
	(tzcompile, zoneinfo/localtime, zoneinfo/posixrules): Use it for
	name of `zic' command.

	* sysdeps/unix/bsd/Makefile (ctype-glue.c): Make sure the command
	is not an unqualified name.

	* sysdeps/stub/statbuf.h (struct stat): Contain only POSIX.1
	members, with the POSIX.1 types.
	(_STATBUF_ST_BLKSIZE): #undef and comment.
	* sysdeps/unix/bsd/statbuf.h (_STATBUF_ST_BLKSIZE): Define it.
	* sysdeps/posix/stdio_init.c (__stdio_init_stream): Only try to
	use st_blksize #ifdef _STATBUF_ST_BLKSIZE.

	* sysdeps/unix/__getpgsz.c: #include <stddef.h> for size_t.

	* sysdeps/stub/__fchown.c: Fixed arg types ([ug]id_t, not int).

	* io/sys/stat.h: #include <gnu/types.h> for __mode_t et al.

	* sysdeps/unix/__gete[ug]id.S [SYS_gete[ug]id]: Add arg count of 0.
	[! SYS_gete[ug]id]: Fixed arg count to be 0.

	* sysdeps/unix/__get[ug]id.S: Fixed arg count to be 0.

	* sysdeps/unix/sysv/linux/syscall.h: #if 0'd out 2nd defn of SYS_brk.

Sun Sep 27 21:56:56 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (sys/param.h): Depend on $(common-objpfx)sys/.

Fri Sep 25 12:47:01 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makeconfig (INSTALL_DATA): Pass -m 644.

Thu Sep 24 16:13:47 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/linux/getpeername.S: Renamed to getpeernam.S.
	* sysdeps/unix/sysv/linux/getsockname.S: Renamed to getsocknam.S.
	* sysdeps/unix/sysv/linux/setsid.S: Renamed to __setsid.S;
	function renamed to __setsid.

	* Version 1.05.

	* Makefile (dist): Depend on $(distribute).

	* stdio/__vfscanf.c (%c): Fixed DO_ASSIGN case loop condition to
	not write one char too many.

Wed Sep 23 16:32:18 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/qsort.c (_quicksort): Return immediately if TOTAL_ELEMS==0.

Tue Sep 22 19:10:59 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makerules [! OUTPUT_OPTION && objpfx]: Define OUTPUT_OPTION.

Mon Sep 21 22:40:55 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/mk-local_lim.c: Use MAXNAMLEN for NAME_MAX,
	rather than hard-wiring 255.
	[! MAXNAMLEN]: Define it to 255.
	[LINK_MAX && ! MAXLINK]: #define MAXLINK LINK_MAX.

	* sysdeps/unix/bsd/glue-ctype.c [ultrix]: #define _ctype_ _ctype__.

	* configure: Rename var `gas' to `gnu_as' and use consistently.

Fri Sep 18 16:32:16 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sys/errno.h: New file.
	* Makefile (headers): Add it.

	* Makeconfig (+make-deps): Use = not define.

	* time/Makefile (zones-%): Don't clobber zonenames; append to it.
	Depend on Makefile so we rebuild when the rule changes.
	Changed implicit rule from zoneinfo/%/... to zone%/... so it will
	actually match.

	* sysdeps/unix/Makefile (syscall.h): Filter out "#ident" lines.

	* Makeconfig (+link): Use $(gnulib) instead of -lgcc.
	(gnulib): Define to -lgcc.

	* posix/glob/Makefile.in (AR, ARFLAGS): Define.
	(libglob.a): Use those vars instead of hardcoding.

	* Makeconfig (ARCH) [machine]: Don't define if $(..)config.make exists.

	* Makerules (compile.S): Include $(asm-CPPFLAGS).
	(S-CPPFLAGS): Define = $(asm-CPPFLAGS).
	(+make-deps): Include $(sfx-CPPFLAGS), where `sfx' is S or c.
	* Makeconfig (asm-CPPFLAGS): Define (empty) and comment.

	* sysdeps/unix/Makefile ($(sys/param.h-includes)): Filter out
	decls or macros for host<->net conversion (htonl et al).

Thu Sep 17 17:33:51 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/statbuf.h: Define __S_*.

	* misc/Makefile (headers): syslog.h -> sys/syslog.h.
	* misc/syslog.h: Moved to misc/sys/syslog.h.

	* limits.h [__GNUC__ >= 2]: #define _LIBC_LIMITS_H before
	#include_next <limits.h>.
	Define _LIMITS_H unconditionally.

Wed Sep 16 17:43:59 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (syscall.h): Don't use \< in sed commands.
	Some seds don't seem to grok it.

	* Makerules (+install-dirs): Sort them.

	* Makeconfig (stdarg.h): Use $(wildcard va-*.h) instead of va-*.h,
	and := instead of =.

	* Makeconfig (prefix): Default to $(exec_prefix), not /usr/local.

	* Makeconfig (+link): Use $(common-objpfx) rather than $(objpfx)
	to find start.o; use $(libc.a) instead of $(objpfx)libc.a.

	* sysdeps/sparc/Makefile: crypt subdir is not called uf-crypt.

	* sysdeps/unix/Makefile (sys/param.h-includes): Fixed filtering
	out of existent glibc headers to remove $(..) pfx after wildcard.

	* misc/paths.h: New file, snarfed from 4.4 BSD.
	* misc/Makefile (headers): Add paths.h.

Tue Sep 15 14:55:11 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (+sysdir_pfx): Define as $(common-objpfx).

	* MakeTAGS (TAGS) [subdir && ! tags_sources]: Create an empty
	file, rather than no commands at all.

	* string/string.h [__GNUC__ && __OPTIMIZE__] (ffs): Take arg.

	* sysdeps/unix/sysv/linux/__wait4.S: New file.

	* sysdeps/unix/sysv/linux/syscall.h: New version from hlu.

	* sysdeps/unix/Makefile (syscall.h): Upcase `sys_' in input.

	* sysdeps/unix/bsd/ultrix4/mips/sysdep.h (MOVE): Insn is `move',
	not `movl'.

	* sysdeps/unix/bsd/ultrix4/mips/sigcontext.h: Deansideclized.

	* sysdeps/unix/ioctls-tmpl.c [DIOCGETPT, DEVGETGEOM]: Include
	headers for these.
	[ultrix]: Mondo cruft.

Sat Sep 12 12:08:29 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* misc/Makefile (routines): Add ttyslot, syslog.
	* misc/ttyslot.c, misc/syslog.[ch]: New, snarfed from 4.4 BSD.
	(headers): Add syslog.h

	* misc/getttyent.c (getttyent): Parse _TTYS_TRUSTED keyword and
	set TTY_TRUSTED bit.
	* misc/ttyent.h (TTY_TRUSTED): New bit in ty_status.
	(_TTYS_TRUSTED): New keyword.
	(_TTYS_CONSOLE): New keyword.
	(TTY_CONSOLE): New bit in ty_status.

	* dirent/scandir.c (scandir): Don't keep using V after realloc'ing
	it.  Use the returned new ptr instead.

Thu Sep 10 18:59:23 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/div.c, stdlib/ldiv.c: Rewritten from Berkeley code that works.

	* Makeconfig (stdarg.h): Add va-*.h.

	* stdlib/Makefile (dont_distribute): Define: testsort.input.

	* sysdeps/mach/hurd/i386/_hurd_start_sigthread.c,
	sysdeps/stub/_hurd_start_sigthread.c: Renamed to .../startsig.c.
	* sysdeps/mach/hurd/sys_errlist.awk: Renamed to .../errlist.awk.
	* sysdeps/mach/hurd/Makefile (sys_errlist.c): Change dep.
	* sysdeps/unix/bsd/make-local_lim.c: Renamed to .../mk-local_lim.c.
	* sysdeps/unix/bsd/Makefile (local_lim.h): Change dep.
	(make-local_lim): Change target and dep.
	* hurd/_hurd_dead_recv.c: Renamed to hurd/dead_recv.c.
	* hurd/setdtablesize.c: Renamed to hurd/setdtsz.c.
	* hurd/Makefile (routines): Change references.
	* stdio/tstgetline.c: Renamed to stdio/tstgetln.c.
	* stdio/tstgetline.input: Renamed to stdio/tstgetln.input.
	* stdio/Makefile (tests): Change ref.
	* README.template: Remove note about long file names.

	* sysdeps/unix/bsd/sun/sunos4/utsnamelen.h (_UTSNAME_LENGTH):
	Define here, rather than #include'ing sysv/utsnamelen.h.
	This file gets installed.

Wed Sep  9 17:06:14 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makeconfig (localtime-file): Put in $(prefix)/etc, not /etc.

	* setjmp/Makefile (routines): Remove sigsetjmp.

	* sysdeps/posix/Makefile (objdir-CPPFLAGS) [! subdir]: Rewrote
	totally broken defn.

	* sysdeps/unix/Makefile (syscall.h): Keep lines starting
	with #, not only those starting with #define.
	We want to preserve any #ifdef in the original.

	* Makerules (install): Dep $(+install-dirs), not $(dir $(+install)).
	(+install-dirs): Define to get two levels of dirs.

	* time/Makefile (tz-cc): Use = instead of define directive.

	* sysdeps/unix/bsd/sun/sparc/start.c (_start): Give ARGC, ARGV,
	and ENVP `register' storage class; can then clear the FP early.

Sat Sep  5 13:14:09 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* Makerules (sysdirs): Pass sysdep_dir in child's environment.

Fri Sep  4 15:37:23 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* Makeconfig (common-objpfx): Add trailing slash.
	Move comment to prev line to avoid extra whitespace.

Thu Sep  3 17:31:13 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/setgroups.S: New file.  How did this manage not
	to exist already??

	* Version 1.04.

	* sysdeps/generic/memmem.c (memmem): Fixed loop condition not to
	use nonexistent variable.

	* string/string.h (memmem): Put const qualifier on args.

	* sysdeps/stub/sigaltstack.c (sigaltstack): Fix arg type.

	* setjmp/sigsetjmp.c: #undef sigsetjmp before defining the function.

Wed Sep  2 16:43:58 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* misc/Makefile (headers): Add syscall.h.
	* sysdeps/unix/Makefile: Only generate syscall.h if it would
	otherwise come from stub.
	* sysdeps/stub/syscall.h: New file.

	* time/Makefile (routines): Add stime.

	* io/Makefile (routines): Add fchdir.

	* signal/Makefile (routines): Add sigaltstack.

	* string/Makefile (routines): Add memmem.

	* setjmp/Makefile (routines): Add sigsetjmp, _setjmp.

	* misc/Makefile (routines): Add getpass.

	* Makefile (distribute): Add NEWS.

	* Makerules (ar-it) [! objdir]: Pass `ru' instead of `u' to ar.
	Use $(..)libc.a instead of $(libc.a).

	* sysdeps/unix/sysv/i386/linux/sysdep.h (PSEUDO): Call numbers are
	SYS_*, not __NR_*.

	* sysdeps/unix/sysv/i386/linux/__wait.S: Prepend extra _ to
	`__waitpid' for jmp.

	* Makerules (check): New rule; alias for `tests'.

	* sysdeps/stub/__setregid.c: Args are gid_t, not int.

	* sysdeps/posix/readv.c: #include <string.h>.

	* sysdeps/generic/printf_fp.c: If LDBL_DIG or LDBL_MAX_10_EXP is
	defined by float.h, #define each to DBL_*.

Tue Sep  1 16:29:07 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/Makefile (syscall.h): Add missing backslashes.

	* Makeconfig [!objdir && !..] (common-objpfx): Define as
	`sysdeps/..'; The Almighty KludgeMeister 2000 wins again.

	* Makerules (sysdep-Makefile): Rename to sysd-Makefile.

	* Makeconfig (CC): Don't use -pipe by default.

	* configure (switches): Put quotes around os-release and
	os-version values.

Mon Aug 31 19:33:15 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/stub/cbrt.c: New file.

	* sysdeps/generic/cabs.c: New file.

	* sysdeps/generic/ceil.c: New file, split from floor.c.
	* sysdeps/generic/__rint.c: Replaced with code split from floor.c.
	* sysdeps/generic/Makefile (routines): Don't remove ceil, __rint.

Thu Aug 27 15:58:13 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* malloc/malloc.h [! __STDC__] (ptrdiff_t): #define.

Wed Aug 26 18:15:47 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/free.c (__free): Rename to _free_internal.
	(free), malloc/malloc.c (morecore): Change callers.
	* malloc/malloc.h: Change decl.

Tue Aug 18 17:38:13 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/generic/__copysign.c: New file.

	* sysdeps/unix/sysv/sysdep.h: #include <syscall.h>, not
	<sys/syscall.h>.  Don't #define _SYS_SYS_S; should no longer be
	necessary.

	* sysdeps/unix/Makefile (syscall.h): Replaced simple code to just
	find the file in any of several places, with hairier code to find
	it and massage it.

	* malloc/Makefile (obstack.%): Remove rule.
	(gpl2lgpl): Define this instead.
	* posix/Makefile (gpl2lgpl): Define to include getopt source files.
	* Makerules ($(gpl2lgpl)): New rule to snarf code and frob its
	copying notices.

Fri Aug 14 13:28:39 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makeconfig (common-objdir, common-objpfx): Define new vars.
	(libc.a): Define in terms of $(common-objpfx).
	Find config.make with $(common-objpfx), not $(objpfx).
	* Makerules (common-objdir-compile): Define canned sequence.
	(native-compile): Use $(@D)/$(@F) instead of stripping off $(objpfx).
	* sysdeps/unix/Makefile, sysdeps/unix/bsd/Makefile,
	sysdeps/generic/Makefile: Use it.
	Use $(common-objpfx) for generated things not specific to one subdir.

	* sysdeps/unix/Makefile (sysdep_headers): Add
	$(sys/param.h-includes) to this instead of to headers.

Thu Aug 13 18:30:58 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob.c: Always #include <sys/types.h>.
	[! USG]: Don't do it here.
	[STDC_HEADERS]: Test this instead of __STDC__ for size_t.
	[HAVE_STRCOLL]: Test this instead of ANSI_STRING for strcoll.

	* posix/glob/Makefile.in (Makefile): Remove rule.

Wed Aug 12 16:12:52 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/sparc/jmp_buf.h: Deansideclized.

	* sysdeps/generic/make_siglist.c: #undef HAVE_SYS_SIGLIST, not
	SYS_SIGLIST_MISSING.
	* sysdeps/generic/signame.[ch]: Re-symlinked from /gd/gnu/lib.
	Who's been removing random things from my source tree??

Tue Aug 11 15:01:50 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/getconf.c (main): Cast printf field with arg to int.

	* Makefile (distribute): Remove ansidecl, ansidecl.m4.

	* posix/glob.c [_AIX]: Don't declare alloca.

Mon Aug 10 17:09:40 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/m68k/fpu/__math.h (__expm1): Define just like expm1.

	* sysdeps/unix/ioctls-tmpl.c [SMIOSTATS, SMIOGETREBOOT0,
	ZIOCBCMD]: Include headers for these.

Fri Aug  7 16:01:43 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* string/tester.c (main): Use sys_nerr and sys_errlist, not _sys_*.

	* stdio/stdio.h [__USE_GNU] (_sys_nerr, _sys_errlist): Declare.

	* string/strerror.c, stdio/perror.c
	[HAVE_GNU_LD] (_sys_errlist, _sys_nerr): Remove decls.

	* stdio/memstream.c (enlarge_buffer): Notice when target is -1 and
	don't treat it as a huge value.

	* stdio/tst-printf.c: #if 0 code that tickles printf_fp bugs.

	* grp/testgrp.c: Don't bomb if uid not in passwd file.

	* stdlib/tst-strtol.c (tests): C-t on LONG_MIN and LONG_MIN-1 elts.

	* stdlib/strtol.c: Use int flag NEGATIVE instead of char 1/-1 SIGN.
	Fixed checking for overflow of long int that fits in unsigned long
	int--must cast LONG_MIN before negating!

Thu Aug  6 18:46:24 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/bug3.c (main): Define ansideclifily.

	* sysdeps/unix/bsd/sun/sparc/__pipe.S: Define __pipe, not ___pipe.

	* math/test-math.c (main): Remove unused vars.

	* io/flock.c: #include <sys/file.h>, and not fcntl.h or sys/types.h.

	* sysdeps/m68k/fpu/__math.h (__rint): Define just like rint.

	* math/math.h (__rint): Declare.

	* configure (esix*): base_os=unix/sysv.

	* dirent/getdents.c: #include <dirent.h>.

	* Rules (subdir): Avoid TAB before # at end of defn.

	* sysdeps/unix/bsd/bsd4.4/__wait3.c: Last arg type is struct rusage *.

Tue Aug  4 18:19:43 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/ieee754/Makefile: Removed.

	* math/math.h: Declare __expm1.

Mon Aug  3 13:02:05 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/ieee754/cabs.c (cabs, z_abs): Members of structure have __.

	* sysdeps/unix/bsd/seq386: Remove directory.

Thu Jul 30 15:42:01 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sparc/sigcontext.h: Deansideclized.

	* sysdeps/unix/bsd/sun/sunos4/__wait4.c: Make last arg struct rusage
	instead of PTR.

	* sysdeps/unix/morecore.c (__default_morecore): Make arg ptrdiff_t.

	* sysdeps/ieee754/cabs.c (cabs, z_abs): Use `struct __complex' for arg.

	* sysdeps/generic/pow.c: #include <limits.h>.

	* sysdeps/generic/mathimpl.c: #include <math.h> before frobnication.

	* misc/getusersh.c (okshells): Make const.
	(initshells): Properly declare static.

	* sysdeps/unix/bsd/__tcgetatr.c: Cast sg_[io]speed to (unsigned char) 
	to avoid gcc warnings.

	* math/bsd/common/atan2.c, math/bsd/common/tan.c,
	math/bsd/common/sincos.c, math/bsd/common/trig.h,
	math/bsd/common_source/__expm1.c, math/bsd/common_source/fmod.c,
	math/bsd/common_source/acosh.c, math/bsd/common_source/log.c,
	math/bsd/common_source/asincos.c, math/bsd/common_source/asinh.c,
	math/bsd/common_source/log1p.c, math/bsd/common_source/atan.c,
	math/bsd/common_source/log__L.c, math/bsd/common_source/atanh.c,
	math/bsd/common_source/mathimpl.h, math/bsd/common_source/cosh.c,
	math/bsd/common_source/exp.c, math/bsd/common_source/sinh.c,
	math/bsd/common_source/exp__E.c, math/bsd/common_source/tanh.c,
	math/bsd/common_source/floor.c: Moved to sysdeps/generic.
	* math/bsd/ieee/{cabs,cbrt,support}.c: Moved to sysdeps/ieee754.
	* All above + sysdeps/generic/mathimpl.h, sysdeps/generic/pow.c: New
	code from 4.4/net2.

	* sysdeps/generic/ffs.c: #include <string.h>, not <bstring.h>.

	* posix/glob/Makefile.in (Makefile): Depend on config.status; invoke
	it directly instead of using $(SHELL).

	* posix/glob.c [! USG]: #include <sys/types.h> before <sys/dir.h>.

Tue Jul 28 17:54:23 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/ultrix42: Renamed to ultrix4.

	* sysdeps/unix/sysv/isc2.2/__rename.S: New.
	* configure (isc*): base_os=unix/sysv.

	* Makefile, Makerules, Rules, math/Makefile, ctype/Makefile: Use
	"export foo := $(foo)" instead of ifdef have_export_directive.
	* Makeconfig (have_export_directive): Remove; move .NOEXPORT down.

Mon Jul 27 18:01:30 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure: Remove redundant test to set os_used.

Sun Jul 26 17:03:31 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* README.template: Don't mention Q+A.
	* Makefile (distribute): Remove Q+A.

	* Makefile, Makerules, Rules, math/Makefile, ctype/Makefile: Put
	"ifdef have_export_directive" around uses of `export' directive.
	They are only needed for dist and tags anyway.
	* Makeconfig (have_export_directive): Add commented-out defn, and
	comment to explain.
	(.NOEXPORT): Add special target for old versions of GNU make.

	* posix/glob.c [_AIX]: #pragma alloca first thing.
	[ANSI_STRING]: Remove #define's for index et al.

Thu Jul 23 21:49:53 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/getpass.c: New.
	* posix/unistd.h (getpass): Declare.

	* posix/unistd.h (getusershell, setusershell, endusershell): Declare.
	* misc/Makefile (routines): Add getusersh.
	* misc/getusersh.c: New.

Tue Jul 14 20:03:57 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/Makefile (tests): Add testdiv.
	* stdlib/testdiv.c: New.

	* sysdeps/unix/sysv/i386/linux/{rename,__mkdir,__rmdir,__dup2,
	getpgrp,__setpgrp,setsid}.S: New files.

	* sysdeps/unix/__getppid.S: If SYS_getppid is defined, use it rather
	than alternate value of getpid.
	* __gete[ug]id.S: Similar.

	* sysdeps/unix/sysv/i386/linux/__waitpid.S: New file.
	* sysdeps/unix/sysv/i386/linux/__wait.S: New file.
	* sysdeps/posix/__wait3.c: New file.

	* sysdeps/unix/sysv/i386/linux/socket.S: New file.
	* bind.S, connect.S, listen.S, accept.S, getsockname.S,
	getpeername.S, socketpair.S: Also new (and trivial).

Mon Jul 13 17:41:46 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/i386/linux/sysdep.[hS]: New files.

	* configure (linux*): base_os=unix/sysv
	(gnu*, linux*): Always set --with-gnu-ld and --with-gnu-as.

	* stdio/obstream.c: #include <string.h>
	(obstack_vprintf): Use bzero rather than memset.

	* stdio/glue.c (unix_FILE.glue): Add two members, which will overlap
	get_limit and put_limit in GNU stdio.
	(_iob): Initialize them to same as `streamp'.

Thu Jul  9 21:27:39 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/stdio.h (open_obstack_stream, obstack_printf,
	obstack_vprintf): Declare.

	* posix/glob.c [STDC_STRINGS]: Don't test this.
	[! ANSI_STRING]: Put memcpy, strrchr, memset defns here instead.

	* posix/glob/Makefile.in (glob.o, fnmatch.o): / after $(srcdir).

Tue Jul  7 03:11:23 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/Makefile (routines): Add obstream.

	* Makerules (%.o: %.S, %.o: %.c): If using gcc, put the file name
	before the options on the command line.

	* malloc/Makefile (dist-routines): Define with routines for malloc.tar.
	(routines): Define with that plus the rest.
	(nodist): Remove.
	(routines): Add obstack.
	(headers): Add obstack.h.
	(obstack.%): New rule.

	* stdio/glue.c: Add comments.

	* stdio/printf.h (struct printf_info.spec): Make unsigned char.

	* stdio/stdio.h (__validfp): Fixed glued-stream snarfing.

Mon Jul  6 20:00:47 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/i386/jmp_buf.h: Deansideclized.

	* sysdeps/posix/Makefile (objdir-CPPFLAGS): Define; if in parent
	dir, add ..s to -Is.
	(mk-stdiolim): Use it in place of $(CPPFLAGS).

Sat Jul  4 20:44:42 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob/Makefile.in (glob.o, fnmatch.o): Put $(srcdir) on deps.

Wed Jul  1 00:13:40 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/strstr.c: If NEEDLE is "", return end of HAYSTACK.

	* string/tester.c (main): Remove decls of sys_nerr and sys_errlist.

	* configure: Accept --prefix=*, --exec_prefix=* options.
	Set values in config.make and config.status.

	* io/umask.c: Fixed return type in fn alias.

	* posix/glob.c [! ANSI_STRING]: #define strcoll to strcmp.
	Remove extra decls of free, qsort, malloc, and realloc.

	* dirent/alphasort.c: #include <string.h>, and not <stdlib.h>.

	* sysdeps/unix/bsd/i386/__wait3.S: Load SYS_wait into %eax before
	trapping.  Use literal .byte instead of lcall to avoid gas bug.
	Use 0(REG), not (REG), for register-indirect addressing.

	* configure: Make config.status executable.

Tue Jun 30 21:14:53 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* configure: Add --os-release=* and --os-version=* options.  Record
	settings (which might be automagically guessed) in config.status.

	* misc/mknod.c: Use __mode_t for arg in fn alias.

	* posix/unistd.h (setregid): Declare to take __gid_t args.

	* sysdeps/unix/bsd/i386/__wait3.S: Don't use lcall insn gas barfs on.

	* posix/vfork.c: Move to sysdeps/generic/.

	* Rules (others, tests): Export them.

	* io/umask.c, io/mkdir.c, io/chmod.c: Use mode_t not int in arg decls.

	* sysdeps/i386/ffs.c: #include <string.h>, not <bstring.h>.

	* stdio/vfscanf.c: Use function_alias.

	* stdio/vsscanf.c: Use va_list, not PTR, in arg decl in fn alias.

	* sysdeps/unix/i386/sysdep.h (PSEUDO): Enough backslashes and
	semicolons.

	* stdio/stdio.h: For __gnuc_va_list, #test __GNUC_VA_LIST, not
	__va_list_defined.

	* stdio/fmemopen.c: Use memchr to find NUL for append mode.

	* stdio/memstream.c (enlarge_buffer): Double the buffer size, rather
	than adding 100.  Don't clobber *INFO->bufsize when called with the
	put limit reset.  If the target has been set, extend and zero-fill
	the buffer.
	(seek): New function.
	(open_memstream): Use it for seek io fn.  Call fmemopen with "w+" mode.

Sun Jun 28 19:01:01 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/fseek.c: Fail with EINVAL for a negative file pos.

Fri Jun 26 00:07:53 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makeconfig (stdarg.h): New variable.
	* Makefile (headers): Add $(stdarg.h).

	* stdio/stdio.h: Change __va_list to __gnuc_va_list in decls.

	* sysdeps/unix/morecore.c: Include malloc.h #ifndef _MALLOC_INTERNAL.
	Don't include <stdio.h>.
	(NULL): Define to 0 if not defined.

	* sysdeps/i386/bzero.c: Include string.h, not bstring.h.

Thu Jun 25 21:01:40 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/perror.c, string/strerror.c (_sys_errlist, _sys_nerr): Don't
	declare #ifndef HAVE_GNU_LD.

	* stdio/fwrite.c: Cast arg to write io func to const char * (from uns).

	* sysdeps/unix/Makefile: If syscall.h doesn't exist in
	$(sysincludedir), look for sys/syscall.h and create $(objpfx)syscall.h
	to #include it.

	* sysdeps/unix/morecore.c (__default_morecore): Deansideclized.
	* malloc/*.c: Only #include <malloc.h> #ifndef _MALLOC_INTERNAL.

Wed Jun 24 19:09:04 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/snarf-ioctls: Avoid looking at a few particular
	headers which tend to mislead us.

	* Makefile (distribute): Add COPYING.

	* configure (Makefile): When invoking make in srcdir, set ARCH
	rather than objdir on the cmd line.

	* posix/glob.c [DIRENT] (direct): Don't define to dirent.
	[! DIRENT] (direct): Define to dirent.

	* Make-dist [!subdir] (+tsrcs): Don't include $(distribute).  It was
	already included above.

Mon Jun 22 16:58:34 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makerules (sysdep_routines): Export it.

Wed Jun 17 17:58:05 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/glob.c (my_realloc): Test only __GNU_LIBRARY__.  Can't trust
	STDC_HEADERS.

Tue Jun 16 20:20:01 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* resource/sys/resource.h (enum __rlimit_resource): Added MEMLOCK,
	NPROC, OFILE.

	* posix/Makefile (glob.tar): Include Makefile.in & configure, and not
	Makefile.
	(glob/configure): New rule.

	* posix/glob/Makefile: Moved to posix/glob/Makefile.in.
	(VPATH, srcdir, CPPFLAGS): Define to be replaced by autoconf.

	* posix/glob.c: Rearranged conditionals for use with autoconf.

Thu Jun 11 15:47:43 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sparc/start.c: Added alias for start -> __start.

Tue Jun  9 20:15:12 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/posix/rename.c: Return failure and don't remove the old
	link if the link failed with other than EEXIST.

	* posix/glob/Makefile: Fixed copyright notice.
	(realclean): Don't remove ~ backup files.

Thu Jun  4 16:41:56 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* time/Makefile (install-data): Don't include zoneinfo/.
	Makerules already makes sure the necessary directories exist.

	* setjmp/setjmp.h (sigsetjmp) [__GNUC__]: Use typeof hackery to
	construct the type of the temporary var for the arg.
	(_setjmp) [__FAVOR_BSD]: Make same as setjmp.

	* malloc/malloc.h (mtrace): Declare.

	* malloc/malloc.h, malloc/calloc.c, malloc/free.c, malloc/malloc.c,
	malloc/mcheck.c, malloc/memalign.c, malloc/mstats.c,
	malloc/mtrace.c, malloc/realloc.c, malloc/valloc.c: Deansideclized;
	changed copyright notices to be independent of libc.
	* malloc/Makefile (glob/%.c, glob/%.h): Don't need to ansideclificate.

	* io/ftw.h, io/ftw.c: New.
	* io/Makefile (headers): Added ftw.h.
	(routines): Added ftw.

Tue Jun  2 21:49:22 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/signum.h (SIG_ERR, SIG_DFL, SIG_IGN): Use
	__sighandler_t.

	* posix/glob.c (__ptr_t): Define.

Thu May 28 06:57:14 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/m68k/jmp_buf.h: Don't use PTR.

Wed May 27 18:09:40 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/{glob,fnmatch}.[ch]: Deansideclized; changed copyright
	notice to be independent of libc.
	* posix/Makefile (glob/%.c, glob/%.h): Don't need to ansideclificate.

	* posix/unistd.h (_SC_2_FORT_RUN, _SC_2_LOCALDEF): Define.

	* posix/unistd.h: Define _POSIX2_* without #ifdef __USE_POSIX2.

	* posix/unistd.h (_POSIX2_FORT_DEV): Removed.

	* posix/fnmatch.h (FNM_FILE_NAME): Alias for FNM_PATHNAME.

Tue May 26 00:39:39 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* time/Makefile (install-data): Include zoneinfo/, so the directory
	gets made.

	* Makeconfig (+gcc-nowarn): Define to -w if using gcc.
	* time/Makefile (tz-cc): Use it to suppress warnings for grody code.

	* posix/Makefile (libposix.a), math/Makefile (libm.a): Make archive
	containing /dev/null instead of nothing; ar won't create an empty
	archive.

	* Makerules (%/): Added generic mkdir rule.

	* posix/Makefile (install-lib): Define to libposix.a.
	(libposix.a): Create empty archive.

	* posix/Makefile (distribute): Added utsnamelen.h.

	* ctype/ctype.c (tolower, toupper): If the arg doesn't fit in a
	char, return it unchanged.
	* ctype/ctype.h (tolower, toupper): Don't define as macros.
	[__GNUC__]: Define as extern inline functions.

	* sysdeps/unix/bsd/sun/sunos4/utsnamelen.h,
	sysdeps/unix/bsd/sun/sunos4/uname.S: New.

	* configure: Only do hacking to snarf uname info if the config uses
	the generic uname implementation.

	* Makeconfig (+defines): Define to include $(gnu_ld), rather than
	-DHAVE_GNU_LD.
	* configure: Write config.make with gnu_ld/gnu_as defns.

	* sysdeps/unix/bsd/sun/sunos411: Renamed back to .../sunos4.
	* sysdeps/unix/bsd/bsd44: Renamed to .../bsd4.4.

	* Makeconfig: include $(objpfx)configparms instead of
	$(objdir)/Makeconfig.
	Define objpfx as soon as objdir is defined, so we can use it.

	* sysdeps/generic/uname.c: Use UNAME_* from config-name.h.

Mon May 25 19:33:07 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* configure: Accept all standard GNU configure options.
	Expect to be run in object directory, and find source directory
	elsewhere.
	Write config.status as a shell script that can be run to recreate
	the configuration.
	Grok os names containing dots by trying each successively
	less-precise substring.
	Write Sysnames and config-name.h in current directory.
	Write #define's for uname sysname, release, version, and machine
	elts in config-name.h.  Hackery to intuit release and version info.

	* stdio/vsnprintf.c, stdio/vsprintf.c, stdio/vasprintf.c,
	stdio/vdprintf.c, stdio/vfscanf.c, stdio/vscanf.c,
	stdio/__vsscanf.c: Take arg list as va_list, not PTR.

	* stdio/stdio.h: Replaced #include <stdarg.h> with magic.
	Properly use __va_list in prototypes.

	* Makeconfig (exec_prefix): Define.
	(libdir, includedir, bindir): Use it.

	* sysdeps/unix/sysv/Makefile [subdir==io] (sysdep-routines): Removed
	__utssys.
	* sysdeps/unix/sysv/Dist: Removed __utssys.S.
	* sysdeps/unix/sysv/__utssys.S, sysdeps/unix/sysv/uname.c: Removed.
	* sysdeps/unix/sysv/uname.S, sysdeps/unix/sysv/utsnamelen.h: New.

	* posix/sys/utsname.h (_UTSNAME_LENGTH): Don't define; instead,
	#include <utsnamelen.h> to define it.
	* sysdeps/generic/utsnamelen.h: New.

Sun May 24 00:07:45 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/generic/inet-cvt.h: Deansideclized.

	* string/string.h (memfrob): First arg is __ptr_t, not char *.

	* misc/sys/cdefs.h (__ptr_t): Made #define rather than a typedef.

Fri May 22 01:52:04 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makefile, Rules, Makerules: Remove all rules for ansideclificating
	headers.

	* posix/glob.h, posix/fnmatch.h: Use explicit cruft for C++.
	Define __P and const for C++/ANSI vs old C ourselves, to avoid
	dependence on <sys/cdefs.h>.

	* inet/Makefile: Remove cruft to snarf things from bsd/.
	* inet/bsd/*.c: Moved to inet/.

	* Makerules: Install headers from source directories into
	$(includedir), rather than ansidecl madness.
	* Makeconfig (ansi-incldir, trad-incldir): Removed.
	(includedir): Define instead.

	* assert/assert.h, ctype/ctype.h, dirent/dirent.h, grp/grp.h,
	  locale/locale.h, locale/localeinfo.h, math/math.h,
	  misc/sys/file.h, misc/sys/ioctl.h, misc/sys/ptrace.h,
	  misc/sys/uio.h, misc/sgtty.h, misc/nlist.h, posix/gnu/types.h,
	  posix/sys/wait.h, posix/sys/types.h, posix/sys/times.h,
	  posix/sys/utsname.h, posix/unistd.h, posix/tar.h, posix/utime.h,
	  posix/wordexp.h, posix/glob.h, posix/fnmatch.h, pwd/pwd.h,
	  resource/sys/resource.h, resource/sys/vlimit.h,
	  resource/sys/vtimes.h, setjmp/setjmp.h, signal/signal.h,
	  signal/gnu/signal.h, socket/sys/socket.h, stdio/stdio.h,
	  stdio/printf.h, stdlib/alloca.h, stdlib/stdlib.h, string/string.h,
	  termios/termios.h, time/sys/time.h, time/time.h, io/sys/stat.h,
	  io/fcntl.h, errno.h, stddef.h, malloc/malloc.h:
	Deansideclized.  Use <sys/cdefs.h> macros instead of ansidecl and
	C++ cruft.
	* features.h: #include <sys/cdefs.h>.

	* string/string.h (strfry, memfrob): Declare.
	* string/Makefile (routines): Added strfry and memfrob.
	* string/strfry.c, string/memfrob.c: New.

	* locale/C-ctype_ct.c: Made BS be isspace.

	* sysdeps/generic/strstr.c: Return HAYSTACK, not its end, if NEEDLE
	is the empty string.

	* sysdeps/generic/strncase.c: Fixed for case of empty string.

Wed May 20 02:36:09 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* io/sys/stat.h (fchmod): Declare, rather than two __fchmod decls.

	* configure (sysv, bsd): Don't make base_os=unix; unix/{sysv,bsd}
	instead.
	Set os_used if base_os is used.

Tue May 19 21:00:11 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* crypt/*: New files from glad.

	* stdio/stdio.h (sys_nerr, sys_errlist): Don't declare const.

Sun May 17 15:50:00 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* io/Makefile (headers): Remove gnu/stat.h; add sys/stat.h.

	* posix/glob.c (glob): Don't let us fall off the end without returning.

	* sysdeps/stub/setenv.c, sysdeps/posix/setenv.c: New.
	* stdlib/stdlib.h [__USE_BSD] (setenv): Declare.
	* stdlib/Makefile (routines): Add setenv.

	* malloc/mtrace.c (old_{free,malloc,realloc}_hook): Renamed to tr_&
	to not conflict with mcheck.c when combined into gmalloc.c.

Fri May 15 19:07:54 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* socket/sys/socket.h (PF_NBS, AF_NBS): Removed.
	(PF_ISO, PF_OSI, PF_APPLETALK, PF_ROUTE, PF_LINK): Define.
	(PF_MAX): Increase accordingly.

	* inet/bsd/*.c: Snarfed latest code from 4.4.

	* misc/sys/cdefs.h (__BEGIN_DECLS, __END_DECLS): Define cruft for C++.

Thu May 14 01:45:12 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/glob.h (GLOB_MAGCHAR): Check user feature-test macros,
	rather than __USE_BSD, so we don't depend on features.h.

	* sysdeps/stub/__wait4.c: Last arg is struct rusage *, not PTR.

	* math/bsd/common_source/mathimpl.h: Don't #define const.
	#include <sys/cdefs.h> instead.

	* Makefile (+other_dirs): Add crypt, but only if it exists at run time.
	* crypt/GNUmakefile: New file.
	* sysdeps/sparc/Makefile, sysdeps/m68k/Makefile (crypt):
	Define to use machine-dependent assembly code in crypt/crypt.*.S.
	* crypt: New directory.

	* find-sysdirs: Don't lose if there are no sysnames.

	* termios/Makefile (headers): Added sys/termios.h.
	* termios/sys/termios.h: New file; just #include <termios.h>.

	* stdlib/qsort.c: Define _quicksort rather than qsort.
	* stdlib/msort.c: New file; defines qsort function that does merge
	sort.  Falls back to _quicksort if it fails to allocate a temp array.
	* stdlib/Makefile (routines): Added msort.

	* string/string.h (memccpy, strdup): Also declare #ifdef __USE_BSD.
	[__USE_BSD] (index, rindex, bcmp, bzero, ffs): Declare.
	* string/strings.h: Just #include <string.h>.
	* string/Makefile (headers): Removed bstring.h.

	* misc/Makefile (routines): Removed swab.
	* string/Makefile (routines): Put it here instead.
	* misc/swab.c: Moved to string/swab.c.

	* stdio/stdio.h [__USE_BSD] (sys_nerr, sys_errlist): Declare.

	* grp/grp.h (setgrent, endgrent, getgrent): Also do #ifdef __USE_BSD.

	* posix/glob.h [__USE_BSD] (GLOB_MAGCHAR): Declare.
	(glob_t): Added member `gl_flags'.
	* posix/glob.c (glob, glob_in_dir): Set gl_flags member to FLAGS;
	or in GLOB_MAGCHAR if any metachars are seen.

	* sysdeps/unix/bsd/bsd44/readdir.c: New.

	* sysdeps/unix/bsd/sun/readdir.c: Don't need to declare
	__getdirentries here.  Use off_t and ssize_t.

	* misc/Makefile (routines): Removed getdents and __getdents.
	* dirent/Makefile (routines): Put them here instead.
	* misc/getdents.c: Moved to dirent/getdents.c.
	* dirent/dirent.h [__USE_BSD] (__getdirentries, getdirentries):
	Declare.

	* dirent/Makefile (routines): Added scandir and alphasort.
	* dirent/scandir.c, dirent/alphasort.c: New.
	* dirent/dirent.h [__USE_BSD] (scandir, alphasort): Declare.

	* sysdeps/unix/bsd/nice.c, sysdeps/unix/sysv/nice.S,
	sysdeps/stub/nice.c: New.
	* resource/Makefile (routines): Added nice.

	* misc/sys/cdefs.h [__USE_BSD] (const, signed, volatile): #define to
	__ versions, for the sake of 4.4 header files.

Wed May 13 00:35:12 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* stdlib/tst-strtol.c: Fixed typo in test table.

	* stdlib/strtol.c: Fixed checking for overflow of long int that fits
	in unsigned long int.

	* misc/Makefile (headers): Added ttyent.h.
	(routines): Added getttyent.
	* misc/ttyent.h, misc/getttyent.h: New; snarfed from 4.4.

	* posix/sys/wait.h [__USE_BSD]: Added forward decl for struct rusage.
	(__wait4, __wait3): Declare arg as struct rusage, not PTR.

	* inet/arpa/*.h, inet/protocols/*.h, inet/netdb.h, inet/resolv.h:
	New files from 4.4.
	* inet/Makefile (headers): Snarf *.h from arpa/ and protocols/.

	* sysdeps/m68k/fpu/__math.h, assert/assert.h: #include <sys/cdefs.h>
	and use its macros rather than rolling our own.

	* misc/sys/cdefs.h: New file.
	* misc/Makefile (headers): Add it.

	* Makerules: Moved check for headers coming from env to Rules.

Tue May 12 01:04:10 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/generic/strsep.c: New.
	* string/string.h [__USE_BSD] (strsep): Declare.
	* string/Makefile (routines): Added strsep.

	* sysdeps/unix/sysv/__settod.c, sysdeps/unix/sysv/stime.S,
	sysdeps/unix/bsd/stime.c, sysdeps/stub/stime.c: New.
	* time/time.h [__USE_SVID] (stime): Declare it.

	* sysdeps/unix/bsd/bsd44/__getdents.S: New.

	* posix/wordexp.h, posix/utime.h, posix/unistd.h, time/time.h,
	termios/termios.h, posix/tar.h, string/strings.h, string/string.h,
	stdlib/stdlib.h, signal/signal.h, stdio/stdio.h, misc/sgtty.h,
	setjmp/setjmp.h, inet/resolv.h, pwd/pwd.h, stdio/printf.h,
	misc/nlist.h, inet/netdb.h, math/math.h, malloc/malloc.h,
	locale/locale.h, grp/grp.h, posix/glob.h, posix/getopt.h,
	posix/fnmatch.h, io/fcntl.h, errno.h, dirent/dirent.h,
	ctype/ctype.h, string/bstring.h, assert/assert.h, stdlib/alloca.h,
	misc/a.out.h [__cplusplus]: Added stupid cruft for losing C++.

Mon May 11 01:40:49 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* math/Makefile (headers): Added huge_val.h and nan.h.

	* io/Makefile (headers): Changed gnu/stat.h to statbuf.h.

	* time/Makefile (install-data): Include $(localtime-file) and
	$(posixrules-file) if they are relative.
	(install-others): Include them if absolute.
	($(posixrules-file), $(localtime-file)): Define rules to install if
	absolute file names.
	* Makerules (+install): Include $(install-others) verbatim.
	* Makeconfig (localtime-file): Made default /etc/localtime.

	* sysdeps/generic/Makefile (endian.h): Only generate if would
	otherwise use stub version.
	* sysdeps/stub/endian.h, sysdeps/i386/endian.h: New.

	* Rules, Makefile: Export distribute and dont_distribute.
	* Make-dist: Export sysdep_dirs.  Unexport things rather than
	clobbering their values.

	* misc/sys/ptrace.h: Fixed typo.

	* stdio/stdio.h (__io_read, __io_write, __io_seek, __io_close):
	Added comments.

	* stdio/internals.c (flushbuf): If in append mode, don't do aligned
	writing, seek to the target, or update the offset.

	* posix/unistd.h (lseek): Doc fix.

	* misc/swab.c: New.
	* misc/Makefile (routines): Added swab.

Wed May  6 12:32:18 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* math/Makefile, inet/Makefile (source_dirs): Export it.
	* MakeTAGS (all-dirs): Include $(source_dirs).

	* Makefile (TAGS): Removed dep on subdir_TAGS.
	(+subdir_targets): Removed subdir_TAGS.
	* MakeTAGS [! subdir] (TAGS): Depend on subdir_TAGS.
	[! subdir] (subdir_TAGS): Recurse on subdirectories.

	* Makerules (headers): Don't take value from the environment.

	* Makerules (sysdirs, sysdep_dir): Export them.

	* MakeTAGS: New makefile.
	* Makefile (distribute): Include it.
	* Makefile (TAGS), Rules (TAGS): Removed rules.
	* Makerules (TAGS): New rule that uses MakeTAGS.
	* Makefile (TAGS): Depend on subdir_TAGS.

	* Makerules (install, install-lib, install-data, routines, aux):
	Don't bother removing these if they come from the environment, since
	they won't with make >= 3.62.8.
	* Rules (distribute, headers): Ditto.
	(subdir): Export it.
	* Makerules (sources, headers): Export these.
	* Makefile (subdirs): Export it.

	* Rules (+tags_sources): Removed.
	* Makerules (tags-sources): Define here.
	* ctype/Makefile (tags-sources): Redefine to give headers precedence
	over sources.
	* Rules (TAGS), Makefile (TAGS): Rewrote rules.
	* Makeconfig (+ctags): Removed.
	(ETAGS): Define.

	* sysdeps/posix/getcwd.c: Don't closedir twice.

	* sysdeps/unix/bsd/hp/m68k/__wait3.S: Define __wait3, not ___wait3.

	* posix/sys/types.h [__USE_BSD] (fsid_t): Define.
	* posix/gnu/types.h (__fsid_t): Define.

	* io/fcntl.h (F_GETLK): Define.

Tue May  5 18:36:46 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* misc/Makefile (routines): Added seteuid and setegid.
	* sysdeps/stub/sete[ug]id.c, sysdeps/unix/bsd/bsd44/sete[ug]id.S: New.
	* posix/unistd.h [__USE_BSD] (seteuid, setegid): Declare.

	* sysdeps/unix/bsd/tcsendbrk.c: #include <sys/types.h>

	* Makerules: Strip whitespace from $(headers) so ifdef wins.

	* sysdeps/unix/bsd/bsdtty.h: #undef a bunch more things.

	* sysdeps/unix/bsd/bsd44/errnos.h: New, hacked from 4.4 <sys/errno.h>.

	* sysdeps/unix/Makefile (ioctls.h, errnos.h): Only generate if
	the files that would be used otherwise are the stub versions.

	* sysdeps/unix/bsd/tcflow.c: Don't write VSTOP or VSTART if it is
	_POSIX_VDISABLE.

	* sysdeps/unix/bsd/tcflush.c: Use FREAD|FWRITE for TCIOFLUSH.

	* sysdeps/unix/bsd/usleep.c: Use select rather than itimers to wait.

	* sysdeps/unix/bsd/tcsendbrk.c: Use select rather than itimers to wait.

	* termios/cfmakeraw.c: New.
	* termios/Makefile (routines): Added cfmakeraw.

	* sysdeps/unix/bsd/bsd44/ioctls.h: New file, hacked from 4.4
	<sys/ioctl.h>.
	* sysdeps/unix/bsd/bsd44/__tcgetatr.c: New.
	* sysdeps/unix/bsd/bsd44/tcsetattr.c: New.
	* sysdeps/unix/bsd/bsd44/tcdrain.c: New.

	* termios/sys/ttydefaults.h: New, snarfed from 4.4.
	* termios/Makefile (headers): Define.
	* termios/termios.h [__USE_BSD]: #include <sys/ttydefaults.h>

	* sysdeps/posix/getcwd.c: Removed unused variable.

	* time/__tzset.c: Cast string literal to (char *).

	* setjmp/sigjmp_save.c: Declare properly to return void.

	* sysdeps/ieee754/nan.h: Created; somehow it disappeared.

Mon May  4 18:30:52 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/bsd44/__wait4.S: New.

	* sysdeps/unix/bsd/4.4: Renamed to sysdeps/unix/bsd/bsd44.

	* signal/gnu/signal.h (__SA_DISABLE, __SA_NOCLDSTOP): Use same bits
	4.4 uses.

Sun May  3 13:57:25 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/fwrite.c: Use unsigned char to avoid sign extension.

	* stdlib/__random.c (randtbl): Replaced default constants so they
	match the state produced by "srandom (1)".

	* stdlib/mbtowc.c: Test for S == "" before testing for no mbchars.

	* stdlib/Makefile (tests): Added testrand.
	* stdlib/testrand.c: New test for rand.

	* stdlib/testmb.c: Added 2 mblen tests.

	* stdlib/wcstombs.c: Don't do anything strange for EOF.
	Copy non-MB characters as they are.
	Properly increment S after writing.

	* stdlib/testmb.c: Added test case for wcstombs.

	* signal/signal.h (SA_DISABLE): Define.
	* signal/gnu/signal.h (__SA_DISABLE): Define.

	* signal/signal.h (struct sigaltstack): Define new type.
	(sigaltstack): Declare new fn.
	* sysdeps/stub/sigaltstack.c: New.
	* sysdeps/unix/bsd/4.4/sigaltstack.S: New.

	* misc/Makefile (routines): Added reboot.
	* posix/unistd.h (reboot): Declare.
	* sysdeps/stub/reboot.c: New.

	* sysdeps/unix/bsd/ulimit.c [! HAVE_GNU_LD]: #define _etext -> etext.

	* sysdeps/unix/bsd/sun/sparc/sethostid.S: #define _ERRNO_H before
	#include <errnos.h>.

	* configure (newos*): base_os=unix/bsd.

Fri May  1 12:21:47 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* io/gnu/stat.h: Moved to sysdeps/unix/bsd/statbuf.h.
	* sysdeps/unix/bsd/statbuf.h: Define struct stat, not struct __stat.
	* io/stat.c: Use struct stat, not struct __stat.
	* sysdeps/stub/statbuf.h: New.
	* io/sys/stat.h: #include <statbuf.h> instead of gnu/stat.h.
	(stat, fstat, lstat, chmod, fchmod, umask, mkdir, mknod): Don't
	#define; declare as fns instead.
	* sysdeps/unix/sysv/stat.h: New.
	* sysdeps/unix/sysv/sysv_stat.h, sysdeps/unix/sysv/sys_stat.S,
	sysdeps/unix/sysv/sys_fstat.S: Removed.
	* sysdeps/unix/sysv/Makefile (sysdep_routines): Removed sys_stat,
	sys_fstat.
	* sysdeps/unix/sysv/Dist: Removed sys_stat.S, sys_fstat.S.
	* sysdeps/unix/bsd/__stat.S, sysdeps/unix/bsd/__fstat.S: Moved to
	sysdeps/unix.

	* sysdeps/m68k/fpu/switch/Makefile: Refer to dirs fpu and
	fpu/switch, not 68881 and 68881-switch.

	* sysdeps/m68k/fpu/switch/switch.c: #include <68881-sw.h>, not
	  68881-switch.h.

	* sysdeps/m68k/fpu/__expm1.c, sysdeps/m68k/fpu/__rint.c,
	sysdeps/m68k/fpu/asin.c, sysdeps/m68k/fpu/atan.c,
	sysdeps/m68k/fpu/atanh.c, sysdeps/m68k/fpu/ceil.c,
	sysdeps/m68k/fpu/cos.c, sysdeps/m68k/fpu/cosh.c,
	sysdeps/m68k/fpu/exp.c, sysdeps/m68k/fpu/fabs.c,
	sysdeps/m68k/fpu/floor.c, sysdeps/m68k/fpu/log.c,
	sysdeps/m68k/fpu/log10.c, sysdeps/m68k/fpu/log1p.c,
	sysdeps/m68k/fpu/sin.c, sysdeps/m68k/fpu/sinh.c,
	sysdeps/m68k/fpu/sqrt.c, sysdeps/m68k/fpu/tan.c,
	sysdeps/m68k/fpu/tanh.c: #include <acos.c> without explicit path
	(which has changed).

	* sysdeps/unix/bsd/sun/sparc/start.c: #include <syscall.h>.
	(syscall): Removed C function; define all inside asm instead.
	(init_shlib): Cast return value of syscall to right types.

Thu Apr 30 01:15:33 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sparc/start.c: Added code to use dynamic
	linker from trq@dionysos.thphys.ox.ac.uk.

	* sysdeps/unix/bsd/sun/sunos4: Renamed to sunos411.

	* setjmp/setjmp.h (sigsetjmp): Don't declare as a function.
	Define as a macro instead.
	(__sigjmp_save): Declare; internal fn used by sigsetjmp macro.
	(_setjmp), [__FAVOR_BSD] (setjmp): Always define as a macro.
	* setjmp/sigjmp_save.c: New file.
	* setjmp/_setjmp.c, setjmp/sigsetjmp.c: Removed.
	* Makefile (routines): Removed _setjmp, sigsetjmp; added sigjmp_save.
	* misc/bsd-compat.c (setjmp): Don't define.

	* configure (sysv, bsd): base_os=unix

	* configure: Fatal error if the machine or os did not generate any
	sysdep dirs.

	* configure: No error message after config.sub fails.

	* sysdeps/mips, sysdeps/unix/bsd/ultrix42: New port from
	brendan@cs.widener.edu.

	* Reorganized sysdeps:
	  unix/bsd/
	      hp9k3bsd -> hp/m68k
	      news -> sony/m68k
	      sun/
	          sun3/os3 -> sunos3/m68k
	          sun3 -> m68k
	          sun4 -> sparc
	  unix/sysv/
	      r4 -> sysv4
	  m68k/
	      68881 -> fpu
	      68881/68881-switch -> fpu/switch
	* sysdeps/unix/bsd/sony/m68k/start.c: Changed #include.
	* configure: Use config.sub to canonicalize name.
	Then use combinations of machine, vendor, and os (with special
	hacks for os flavors) for sysdep dirs to try.
	* Makefile (distribute): Added config.sub.

Wed Apr 29 23:06:06 1992  Brendan Kehoe  (brendan@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/hp9k3bsd/sysdep.h,
	sysdeps/unix/bsd/sun/sun3/sysdep.h, sysdeps/unix/bsd/sun/sun4/sysdep.h,
	sysdeps/unix/bsd/vax/sysdep.h,sysdeps/unix/i386/sysdep.h,
	sysdeps/mach/i386/sysdep.h: Change all definitions of movl/mov to
	MOVE(s, d), for insn sets with d,s instead of s,d move insns.
	* sysdeps/unix/__getegid.S, sysdeps/unix/__geteuid.S,
	sysdeps/unix/__getppid.S: Use that in each of these.

Wed Apr 29 17:58:21 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* io/getwd.c: Default PATH_MAX if not defined.

	* sysdeps/unix/getlogin.c, sysdeps/posix/ttyname.c: Make buffers
	only as big as needed, avoiding PATH_MAX.

	* sysdeps/posix/getcwd.c: Dynamically extend the buffer as we go,
	not afterwards; default PATH_MAX if not defined.

	* posix/execvp.c: Dynamically allocate an array on the stack for the
	path name, rather than using a fixed-size array.

	* pwd/putpwent.c: Print pw_dir field.

	* sysdeps/posix/mktemp.c: If the pid has changed, update OLDPID.

Tue Apr 28 19:25:21 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* malloc/valloc.c [emacs]: #include "config.h"

Thu Apr 23 13:55:34 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/m68k/68881/__drem.c: Define __drem, not drem.
	Call ____drem, not __drem.

	* malloc/realloc.c, malloc/malloc.c: Don't #define memcpy or memset
	if already #define'd.

Tue Apr 21 04:16:56 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* malloc/Makefile: Moved include ../Rules after malloc.tar rules.
	They need $(routines), which Rules clears.

	* malloc/realloc.c (MIN): Renamed to min.  Conflicted with HPUX
	system header files.

	* Makefile (sysdep-subdirs): Is not called +sysdep-subdirs.

	* configure: Don't try to create config.status if . is not writable.

	* sysdeps/generic/printf_fp.c: Fixed padding loop condition for zero
	case.

	* math/math.h: Don't #include <float.h> for HUGE_VAL.
	Instead, #include <huge_val.h>.
	* stdlib/stdlib.h: Ditto.
	* math/math.h [__USE_GNU]: #include <nan.h> to get NAN value.
	* float.h: Removed.
	* Makefile (headers): Removed float.h and fl.h.
	* sysdeps/ieee754/huge_val.h, sysdeps/ieee754/nan.h,
	sysdeps/stub/huge_val.h, sysdeps/stub/nan.h, sysdeps/vax/huge_val.h:
	Created (from old fl.h files).

	* math/bsd/common_source/pow.c (pow_p): When checking if Y is an
	integer, don't let it overflow a `long int'.
	(pow): Check for NaN with __isnan, not (X != X).

Tue Apr 21 02:26:19 1992  Brendan Kehoe  (brendan@cs.widener.edu)

	* sysdeps/unix/bsd/sun/sun4/__pipe.S,
	sysdeps/unix/bsd/vax/__wait3.S, sysdeps/unix/bsd/hp9k3bsd/__wait3.S:
	Use the ENTRY macro for each beginning

	* sysdeps/unix/sysdep.h, sysdeps/unix/bsd/hp9k3bsd/sysdep.h,
	sysdeps/unix/bsd/sun/sun3/sysdep.h,
	sysdeps/unix/bsd/sun/sun4/sysdep.h, sysdeps/unix/bsd/vax/sysdep.h,
	sysdeps/unix/i386/sysdep.h, sysdeps/unix/sysdep.h,
	sysdeps/unix/sysv/sysdep.h [SYSCALL, SYSCALL__, PSEUDO]: Modify to
	also receive the number of args the syscall takes; added for future
	ports that will require this information.

	* sysdeps/unix/i386/__pipe.S, sysdeps/unix/bsd/vax/__pipe.S,
	sysdeps/unix/bsd/sun/sun4/__pipe.S,
	sysdeps/unix/bsd/hp9k3bsd/__pipe.S, sysdeps/unix/i386/__brk.S,
	sysdeps/unix/bsd/sun/__getdents.S, sysdeps/unix/i386/__fork.S,
	sysdeps/unix/bsd/vax/__fork.S, sysdeps/unix/bsd/sun/sun4/__fork.S,
	sysdeps/unix/__setgid.S, sysdeps/unix/__setuid.S,
	sysdeps/unix/bsd/sun/sun3/__vfork.S,
	sysdeps/unix/bsd/sun/sun4/__vfork.S,
	sysdeps/unix/bsd/vax/__wait.S, sysdeps/unix/bsd/hp9k3bsd/__wait.S,
	sysdeps/unix/i386/__wait.S,
	sysdeps/unix/bsd/sun/sunos4/sys_wait4.S,
	sysdeps/unix/bsd/sun/sun3/sethostid.S,
	sysdeps/unix/bsd/sun/sun4/sethostid.S,
	sysdeps/unix/bsd/__sigvec.S, sysdeps/unix/bsd/sun/sun4/__sigvec.S,
	sysdeps/unix/sysv/i386/__sigret.S, sysdeps/unix/__getppid.S,
	sysdeps/unix/bsd/__access.S, sysdeps/unix/sysv/signal.S,
	sysdeps/unix/__getegid.S, sysdeps/unix/__geteuid.S,
	sysdeps/unix/bsd/bsd_getgrp.S, sysdeps/unix/bsd/__dup2.S,
	sysdeps/unix/bsd/__fchmod.S, sysdeps/unix/bsd/__fchown.S,
	sysdeps/unix/bsd/__flock.S, sysdeps/unix/bsd/__fstat.S,
	sysdeps/unix/bsd/__lstat.S, sysdeps/unix/bsd/__mkdir.S,
	sysdeps/unix/bsd/__readlink.S, sysdeps/unix/bsd/__rmdir.S,
	sysdeps/unix/bsd/__stat.S, sysdeps/unix/bsd/__symlink.S,
	sysdeps/unix/bsd/4.4/chflags.S, sysdeps/unix/bsd/4.4/fchflags.S,
	sysdeps/unix/bsd/4.4/sstk.S, sysdeps/unix/bsd/4.4/setlogin.S,
	sysdeps/unix/bsd/__getdtsz.S, sysdeps/unix/bsd/__getpgsz.S,
	sysdeps/unix/bsd/__setregid.S, sysdeps/unix/bsd/__setreuid.S,
	sysdeps/unix/bsd/__utimes.S, sysdeps/unix/bsd/ftruncate.S,
	sysdeps/unix/bsd/readv.S, sysdeps/unix/bsd/truncate.S,
	sysdeps/unix/bsd/vhangup.S, sysdeps/unix/bsd/writev.S,
	sysdeps/unix/bsd/__getpgrp.S, sysdeps/unix/bsd/__setpgrp.S,
	sysdeps/unix/bsd/__getrusag.S, sysdeps/unix/bsd/getprio.S,
	sysdeps/unix/bsd/getrlimit.S, sysdeps/unix/bsd/setprio.S,
	sysdeps/unix/bsd/__sigblock.S,
	sysdeps/unix/bsd/__sigpause.S, sysdeps/unix/bsd/__sigstmsk.S,
	sysdeps/unix/bsd/killpg.S, sysdeps/unix/bsd/sigstack.S,
	sysdeps/unix/bsd/rename.S, sysdeps/unix/bsd/__adjtime.S,
	sysdeps/unix/bsd/__setitmr.S, sysdeps/unix/bsd/__settod.S,
	sysdeps/unix/sysv/sys_stat.S, sysdeps/unix/sysv/sys_fstat.S,
	sysdeps/unix/sysv/__utssys.S, sysdeps/unix/sysv/utime.S,
	sysdeps/unix/sysv/__times.S, sysdeps/unix/sysv/i386/time.S,
	sysdeps/unix/sysv/alarm.S, sysdeps/unix/sysv/pause.S,
	sysdeps/unix/sysv/ulimit.S, sysdeps/unix/__chdir.S,
	sysdeps/unix/__chmod.S, sysdeps/unix/__chown.S,
	sysdeps/unix/__close.S, sysdeps/unix/__dup.S,
	sysdeps/unix/__fcntl.S, sysdeps/unix/__link.S,
	sysdeps/unix/__lseek.S, sysdeps/unix/__open.S,
	sysdeps/unix/__read.S, sysdeps/unix/__umask.S,
	sysdeps/unix/__unlink.S, sysdeps/unix/__write.S,
	sysdeps/unix/__ioctl.S, sysdeps/unix/__mknod.S,
	sysdeps/unix/acct.S, sysdeps/unix/chroot.S, sysdeps/unix/fsync.S,
	sysdeps/unix/ptrace.S, sysdeps/unix/swapon.S, sysdeps/unix/sync.S,
	sysdeps/unix/__execve.S, sysdeps/unix/__getgid.S,
	sysdeps/unix/__getpid.S, sysdeps/unix/__getuid.S,
	sysdeps/unix/_exit.S, sysdeps/unix/__kill.S,
	sysdeps/unix/inet/__gethstnm.S, sysdeps/unix/inet/__select.S,
	sysdeps/unix/inet/gethostid.S, sysdeps/unix/inet/sethostid.S,
	sysdeps/unix/inet/sethostnam.S, sysdeps/unix/inet/accept.S,
	sysdeps/unix/inet/bind.S, sysdeps/unix/inet/connect.S,
	sysdeps/unix/inet/getpeernam.S, sysdeps/unix/inet/getsocknam.S,
	sysdeps/unix/inet/getsockopt.S, sysdeps/unix/inet/listen.S,
	sysdeps/unix/inet/recv.S, sysdeps/unix/inet/recvfrom.S,
	sysdeps/unix/inet/recvmsg.S, sysdeps/unix/inet/send.S,
	sysdeps/unix/inet/sendmsg.S, sysdeps/unix/inet/sendto.S,
	sysdeps/unix/bsd/vax/__wait3.S, sysdeps/unix/bsd/hp9k3bsd/__wait3.S,
	sysdeps/unix/inet/setsockopt.S, sysdeps/unix/inet/shutdown.S,
	sysdeps/unix/inet/socket.S, sysdeps/unix/inet/socketpair.S: Added the
	argument count to every use of SYSCALL, SYSCALL__ or PSEUDO.

Tue Apr 21 00:06:52 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* limits.h [__GNUC__ >= 2]: Use #include_next to get GCC's <limits.h>.

	* sysdeps/posix/sysd-stdio.c (__stdio_read, __stdio_write,
	__stdio_errmsg) [EINTR && EINTR_REPEAT]: Do EINTR looping.
	* sysdeps/unix/sysv/sysd-stdio.c: New.
	#define EINTR_REPEAT and #include posix/sysd-stdio.c.

	* stdlib/mbstowcs.c: Copy non-MB chars verbatim, instead of error.

	* sysdeps/generic/printf_fp.c: Note sign of exponent and take its
	absolute value for arithmetic.

	* stdlib/testmb.c: New.
	* stdlib/Makefile (tests): Added testmb.

	* sysdeps/generic/frexp.c [NAN]: If VALUE is infinite, return NAN.
	If VALUE is NAN, set errno to EDOM and return VALUE.
	If VALUE is zero, return it.  In all special cases, clear *EXP.

	* stdio/test-fseek.c: New.
	* stdio/Makefile (tests): Added test-fseek.

	* stdio/fseek.c: Position returned from io_funcs.seek is absolute,
	not EOF-relative when using SEEK_END.

	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Set errno to
	EEXIST when we run out.

	* sysdeps/posix/sysd-stdio.c (exists): Use stat rather than open, so
	we don't need read access.

	* sysdeps/posix/mk-stdiolim.c (TMP_NAM): is 62 ** 3.

Mon Apr 20 23:08:02 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Don't return
	the same name twice when the file doesn't exist.

	* stdio/vfprintf.c (%c format): Tests of LEFT for padding were
	reversed.

	* sysdeps/generic/printf_fp.c: If we have written some fractional
	digits, write zeros up to the precision.

	* sysdeps/unix/bsd/sun/sun4/start.c: Don't clear the FP until just
	before calling main.

Wed Apr 15 01:43:38 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makerules (libc.a): Don't depend on libc.a(...); only on lib.
	(lib-noranlib): Depend on libobjs.
	(+libobjs): New var.
	(libobjs): Depend on $(+libobjs).
	* Rules (others, tests): Don't depend on lib; on libc.a instead.

	* locale/C-numeric.c: grouping is "".

	* locale/localeconv.c: Set int_frac_digits.

	* locale/setlocale.c: Accept "" to mean "C".

	* sysdeps/unix/sysv/r4/bsddir.h: Protect against multiple inclusion.

	* sysdeps/unix/sysv/r4/Dist: Created; includes bsddir.h and
	sys_getdents.S.

	* sysdeps/unix/i386/sysdep.h [! HAVE_SYSCALLS]: Don't #inlcude
	unix/sysdep.h.
	* sysdeps/unix/sysv/sysdep.h, sysdeps/unix/sysdep.h
	(HAVE_SYSCALLS): #define.
	* sysdeps/unix/sysv/i386/sysdep.h: #include unix/sysv/sysdep.h, then
	unix/i386/sysdep.h.

	* sysdeps/unix/sysv/Makefile: Fixed typos.

	* sysdeps/unix/sysv/Dist: Add utmp.h.

	* sysdeps/posix/Makefile (mk-stdiolim): Explicit commands, to
	compile it without normal gcc flags.

	* configure (i386-sysv): unix/i386/sysv -> unix/sysv/i386.
	(i386-sysvr4): New configuration.

Tue Apr 14 16:47:47 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* setjmp/setjmp.h: Put sigjmp_buf before typedef for jmp_buf, which
	needs sigjmp_buf #ifdef __FAVOR_BSD.

	* posix/unistd.h (getgroups): Don't #define.

	* sysdeps/stub/ptrace.c: #include <stdarg.h>; declare AP in fn.
	Avoid "PTR a, b".

	* sysdeps/posix/sigintr.c: New; sets global sigset_t `_sigintr'.
	* sysdeps/posix/signal.c: Use SA_RESTART unless SIG is in _sigintr.
	* signal/sigintr.c: Removed.
	* sysdeps/stub/sigintr.c: New.

	* sysdeps/posix/sysd-stdio.c (__stdio_read, __stdio_write,
	__stdio_errmsg): Don't treat EINTR specially.

	* sysdeps/unix/Makefile (sys/param.h): Touch the target after mv'ing
	from the tmp file, so the file is newer than the directory.

	* sysdeps/generic/strcasecmp.c: Simplified loop; fixed returning
	wrong value on equal comparison.

	* stdlib/bsearch.c: Don't lose if NMEMB is zero.

	* sysdeps/unix/bsd/__times.c (timeval_to_clock_t): Microseconds are
	not milliseconds.

Mon Apr 13 18:25:17 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/strncase.c: New.
	* string/Makefile (routines): Add strncase.
	* string/string.h [__USE_GNU]: Declare strncasecmp.

	* time/__tzset.c: Correctly default DST offset to one hour later
	than standard offset.

	* time/__tzset.c (tz_rule): Made `name' not be const.

	* string/tester.c [! HAVE_GNU_LD]: #define _sys_nerr and
	_sys_errlist to sys_nerr and sys_errlist.

	* stdio/test_rdwr.c: Fixed printf call missing arg.

	* posix/getgrps.c: #undef getgroups first.

	* misc/brk.c: Declare __brk.
	* misc/sbrk.c: Declare __sbrk.
	* misc/setreuid.c, misc/setregid.c: #include <unistd.h>.
	Fixed types in DEFUN in fn alias.
	* misc/getpgsz.c, misc/getdtsz.c, misc/gethstnm.c: #include <unistd.h>.
	* misc/getdents.c: Declare __getdirentries.
	* misc/mknod.c: #include <sys/stat.h>.
	* posix/unistd.h: Declare many __ versions of things.
	[__OPTIMIZE__]: Many #define foo(...) -> __foo(...).

	* io/fcntl.c: #include <sys/file.h>.

	* sysdeps/unix/Makefile: New hair to install other headers the
	system sys/param.h #includes.

	* time/__tzset.c (__tzfile_default): Declare.

	* time/sys/time.h (timezone): #define to __timezone.

	* sysdeps/ieee754/printf_fp.c: #undef outchar before #including
	generic/printf_fp.c.

	* stdio/__vfscanf.c: For %c, don't lose the first char.
	For %s, properly consume the last char when we hit max width.

	* posix/gnu/types.h (__dev_t, __mode_t): Made int rather than short.
	* io/gnu/stat.h (struct stat): Made st_dev, st_rdev, and st_mode use
	{,unsigned} short int instead of __dev_t/__mode_t.

Fri Apr 10 13:55:07 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* setjmp/setjmp.h: Rearranged so that jmp_buf is defined before any
	prototypes are used.
	(longjmp): Declare with jmp_buf, not __jmp_buf, to win in BSD mode.
	(_longjmp): #define as __longjmp, not longjmp.
	(_longjmp, _setjmp): Take jmp_buf args, not __jmp_buf.
	Call sig{set,long}jmp with SAVEMASK==0, rather than __{set,long}jmp.
	* _longjmp.c, _setjmp.c: #define _BSD_SOURCE before all else.
	(_setjmp): Call sigsetjmp, not __setjmp.

	* io/sys/stat.h (__fchmod, __mknod): Fixed arg types.

	* io/fchmod.c: Fixed typo.

	* time/Makefile (\n): Renamed to nl.

	* Makerules (native-compile): New variable.
	* sysdeps/generic/Makefile, sysdeps/unix/Makefile,
	sysdeps/unix/bsd/Makefile: Use it in cmds for generator progs.

	* sysdeps/unix/sysv/sysv_termio.h (_SYSV_TAB3): New; same as XTABS.

	* sysdeps/unix/sysv/setrlimit.c: Removed extern decl of etext (unused).

	* sysdeps/unix/sysv/__tcgetatr.c, sysdeps/unix/sysv/tcdrain.c,
	sysdeps/unix/sysv/tcflow.c, sysdeps/unix/sysv/tcflush.c,
	sysdeps/unix/sysv/tcgetpgrp.c, sysdeps/unix/sysv/tcsendbrk.c,
	sysdeps/unix/sysv/tcsetattr.c, sysdeps/unix/sysv/tcsetpgrp.c:
	#include <sys/ioctl.h>

	* sysdeps/unix/sysv/__rmdir.c, sysdeps/unix/sysv/__mkdir.c,
	sysdeps/posix/writev.c: #include <string.h>.

	* sysdeps/posix/clock.c: Removed unused variable.

Thu Apr  9 01:49:39 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Version 1.03.

	* grp/testgrp.c: Print members correctly.

	* stdio/test-popen.c: Pipe to cat rather than more, and then check
	output file.  Better error checking.

	* setjmp/tst-setjmp.c: Notice if we didn't jump the right number of
	times.

	* signal/tst-signal.c, string/testcopy.c, stdio/bug[12345].c: Print
	msgs that more clearly say whether we won or lost.  Better error
	checking.

	* sysdeps/generic/printf_fp.c: Completely rewritten from scratch.
	Now uses Steele & White's "Dragon4" algorithm to do things right.

Wed Apr  8 01:08:41 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/i386/__longjmp.c: Test for VAL==0 before clobbering regs.
	Wire V to AX, rather than DX.  Use "a" constraint on unused operand
	in jmp asm, rather than global reg var, to force value into AX.

Tue Apr  7 17:51:25 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/Makefile (headers): Added tar.h.
	* posix/tar.h: New file, from djm.

Mon Apr  6 01:39:07 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* time/tzfile.c (struct ttinfo): Made `isstd' member be unsigned
	char instead of 1-bit bitfield.

	* time/tzfile.c (__tzfile_default): New function.
	* time/__tzset.c: Call it when no rule is given.
	* time/Makefile: Install posixrules just like localtime.
	* time/Makeconfig (posixrules, posixrules-file): New config vars.

	* time/time.h (struct tm): Add `tz_gmtoff', `tz_zone'.
	* time/localtime.c: Set those members.

	* sysdeps/ieee754/__drem.c: XOR the signs of X and the result,
	rather than setting the sign of the result to that of X.

	* sysdeps/unix/bsd/make-local_lim.c: Don't do MAXUPRC or MAXLINK if
	<sys/param.h> didn't define them.

	* sysdeps/posix/__sigvec.c: Fixed braino: SA_ONSTACK should be
	SA_RESTART.

	* pwd/getpw.c, pwd/putpwent.c: Use %u fmt for uid and gid (which are
	unsigned).

	* time/time.h (tzname, daylight, timezone): Don't #define to __.
	* time/tzfile.c, time/__tzset.c, time/localtime.c, time/strftime.c
	[! HAVE_GNU_LD]: #define __ to plain for above three vars.

Thu Apr  2 03:39:04 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* locale/Makefile (routines): Add localeconv.

	* sysdeps/i386/jmp_buf.h: Removed `__dx' elt; replaced with `__pc'.
	__bp and __sp are PTRs.
	* sysdeps/i386/setjmp.c: Rewritten.  Use global reg vars to save regs.
	Use arithmetic on address of arg to get caller's PC, BP, and SP.
	* sysdeps/i386/__longjmp.c: Rewritten.  Use global reg vars to
	restore regs.

Wed Apr  1 23:13:57 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Moved sysdeps/unix/i386/{bsd,sysv} to
	sysdeps/unix/{bsd,sysv}/i386, and updated Implies files.
	Implied dirs come before parents, and we want unix/i386 before
	unix/{sysv,bsd}.

	* io/chown.c: Fixed types in fn alias.

Wed Apr  1 14:18:58 1992  Torbjorn Granlund  (tege@mole.gnu.ai.mit.edu)

	* sysdeps/generic/memcmp.c
	(memcmp_common_alignment, memcmp_not_common_alignment):
	Move back do0 label to its original position, after the loop.
	Add comment before do0 labels.
	* sysdeps/generic/wordcopy.c (_wordcopy_fwd_aligned): Indentation.
	Add comment before do0 labels.

Wed Apr  1 02:16:19 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/Makefile [subdir==misc]: Generate sysdep header
	termio.h from sysv_termio.h.

	* sysdeps/generic/make_siglist.c: New file.
	* sysdeps/generic/signame.[ch]: Symlink'd from /gd/gnu/lib.
	* sysdeps/generic/Makefile: Generate siglist.c with above.
	* sysdeps/generic/Dist: Add make_siglist.c, signame.[ch].

	* sysdeps/unix/bsd/Makefile (before-compile): Define properly as a
	variable.

	* sysdeps/unix/bsd/make_siglist.c: Generate #define _sys_siglist
	sys_siglist #ifndef HAVE_GNU_LD.
	* stdio/psignal.h, string/strsignal.h [! HAVE_GNU_LD]:
	#define _sys_siglist sys_siglist.

	* sysdeps/unix/sysv/signum.h (SIGCHLD): Changed #.
	(SIGUSR1, SIGUSR2, SIGPWR): Added.
	(_NSIG): Updated.

	* sysdeps/unix/sysv/utmp.h: New.

	* sysdeps/unix/bsd/getlogin.c: Moved to sysdeps/unix/getlogin.c.

	* sysdeps/unix/sysv/r4/bsddir.h, sysdeps/unix/sysv/r4/readdir.c,
	sysdeps/unix/sysv/r4/closedir.c, sysdeps/unix/sysv/r4/rewinddir.c,
	sysdeps/unix/sysv/r4/opendir.c, sysdeps/unix/sysv/r4/sys_getdents.S,
	sysdeps/unix/sysv/r4/Makefile: New.

	* sysdeps/unix/sysv/tcflow.c: New.

	* sysdeps/unix/sysv/sysv_termio.h: Add lots of bits; VMIN and VTIME
	elts of c_cc.
	* sysdeps/unix/sysv/__tcgetatr.c, sysdeps/unix/sysv/tcsetattr.c: Use
	VMIN and VTIME elts from sysv termio struct.

	* sysdeps/unix/sysv/__gethstnm.c: New.

	* sysdeps/unix/sysv/local_lim.h (NGROUPS_MAX): Define as 0.

	* sysdeps/unix/sysv/fcntlbits.h (struct __flock): Changed l_pid to
	short; added l_sysid.

	* sysdeps/unix/sysv/__sigact.c: New.

	* sysdeps/unix/sysv/r4/__access.S: New; just #include bsd/__access.S.

	* sysdeps/unix/sysv/Makefile: Fixed typo: sysdep-routines =>
	sysdep_routines.

	* sysdeps/unix/i386/sysv/__sigret.S,
	sysdeps/unix/i386/sysv/signal.S: New.

	* signal/Makefile (routines): Added sigret, __sigret.
	* signal/sigret.c: New; fn alias to __sigreturn.
	* sysdeps/stub/__sigret.c: New.

	* sysdeps/unix/i386/sysdep.h (PSEUDO): Use hard-coded numbers for
	lcalls insn--GAS bug.

	* sysdeps/unix/bsd/readdir.c (D_NAMLEN): New macro; define if not
	already defined, to return length of a direct elt.

	* sysdeps/stub/__getgrps.c: #include <limits.h>; if NGROUPS_MAX is
	defined as 0, always return 0, and no stub warning.

	* sysdeps/posix/system.c: Don't fail if sigprocmask fails with ENOSYS.

	* sysdeps/posix/sysd-stdio.c, sysdeps/stub/sysd-stdio.c: Doc fix.

	* sysdeps/posix/__gettod.c: Use CONST where appropriate and not
	where not.

	* sysdeps/i386/memchr.c, sysdeps/i386/strlen.c: Changed `repnz' to
	`repne'.

	* stdio/fgets.c: Notice returned char from __fillbf in length calc.

	* misc/sys/ioctl.h: Always define `struct sgttyb'.

	* stdlib/alloca.h: #undef __alloca, too.
	Always #define alloca == __alloca.

	* signal/signal.h (__kill): Fixed type in decl.
	* posix/unistd.h (setgid): Fixed type in decl.
	* posix/setpgid.c, posix/setgid.c, signal/kill.c, posix/fork.c,
	  posix/vfork.c, posix/getpid.c, posix/getppid.c, posix/setsid.c:
	Fixed DEFUNs in fn aliases.
	* pwd/getpw.c: Fixed type in defn.

Mon Mar 30 17:06:54 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/generic/printf_fp.c: In %f, decrement PREC for each
	leading zero in the fractional part.

	* sysdeps/ieee754/ieee754.h: Made all elts unsigned.
	* sysdeps/ieee754/__drem.c: Return NAN if Y is zero.
	* sysdeps/ieee754/ldexp.c: Rewritten.
	* sysdeps/ieee754/__logb.c: Handle denormalized numbers.

	* posix/sys/wait.h: #include <endian.h>

	* sysdeps/ieee754/fl.h: Fixed NAN and HUGE_VAL bit patterns; added
	code for little endian.

	* sysdeps/generic/frexp.c: Add one to exponent to give the result a
	digit before the point.  Use negative exponent rather than division.

	* math/__finite.c: Return zero for NaN.
	* math/math.h: Doc fix for same.

	* stdio/__getdelim.c: Correctly notice when the buffer is full.

	* sysdeps/unix/bsd/opendir.c: Pass arg to fcntl F_SETFD by value,
	not by reference.

	* time/__tzset.c: Correct default rule: M4.1.0,M10.5.0.

	* time/__tzset.c: Move ptr past Mfoobar syntax after parsing it.

	* time/__tzset.c: Properly parse the DST offset (or its absence).

	* sysdeps/unix/make_errlist.c: Write an #ifdef HAVE_GNU_LD, rather
	than testing it when compiling make_errlist.

	* time/tzfile.c (__tzfile_read): Convert transitions to host byte
	order.

	* Makeconfig (localtime-file): New config var.
	* time/Makefile (tzfile.o, zic.o): Use it for TZDEFAULT.

	* stdio/Makefile (tests): Added tstgetline.
	* stdio/tstgetline.c: New; test for getline.

	* Makeconfig (sysincludedir): Define and document.
	* sysdeps/unix/snarf-ioctls, sysdeps/unix/Makefile: Use
	${sysincludedirs} in place of hard-coded /usr/include.

Fri Mar 27 13:33:37 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* string/Makefile (headers): Added endian.h.

	* sysdeps/ieee754/__drem.c: Fixed typo which made X and Y be the
	same location.

	* sysdeps/generic/__lstat.c: #include <gnu-stabs.h>

	* stdio/internals.c (flushbuf): Increment target as well as offset
	when we write out the single char.

	* grp/Makefile (tests): Add testgrp (formerly bug1).

Thu Mar 26 14:59:45 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* stdio/fread.c: Don't read directly when we need to seek first.

Wed Mar 25 02:34:49 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/alarm.c: There are 1000000 usecs in a sec.

	* sysdeps/unix/bsd/sun/ptrace.c: Removed.

	* stdio/fgets.c: For unbuffered stream, don't return EOF after
	reading some data.
	Added missing parens.

Tue Mar 24 18:31:07 1992  Torbjorn Granlund  (tege@hal)

	* sysdeps/i386/memset.c: Move code that puts C in all four nibbles of
	X inside `if' statement.  Include sysdeps/i386/memset.c (not bzero).
	* sysdeps/i386/memchr.c: Rewrite to be faster.  Include
	sysdeps/generic/memchr.c (not bzero).

Tue Mar 24 01:21:32 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* io/Makefile (routines): Add getdirname.
	* posix/unistd.h [__USE_GNU]: Declare getdirname.
	* io/getdirname.c: New.

	* Makeconfig (stddef.h): Define and document.
	* Makefile (headers): Use $(stddef.h) for stddef.h.

Mon Mar 23 18:04:56 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/posix/mktemp.c: Do PID % 100000 for 5 digits.

	* time/Makefile (tzfiles): Remove pacificnew; it won't compile.
	(distribute): Put it here instead.

	* stdio/printf-prs.c [HAVE_LONGLONG]: Fixed missed var name change
	from code snarf.

	* stdio/fgets.c: Return NULL when we get EOF.

	* posix/execvp.c, sysdeps/posix/putenv.c [! HAVE_GNU_LD]: Define
	__environ as environ.

	* sysdeps/unix/bsd/Makefile, sysdeps/unix/Makefile: In rules to
	compile generator programs, cd into $(objdir) first to avoid
	braindead cc clobbering foo.o in cwdir.

	* sysdeps/m68k/setjmp.c: Deref fpregs array in asm.

	* time/Makefile (zones-%): Fixed generated rules.

	* math/Makefile (libm.a): Use r cmd to ar.

	* time/Makefile (zones-%): In echo commands, put \\\\n outside of
	quotes instead of \\n inside single quotes.  SysV echo is braindead.

	* io/fchown.c, io/fchmod.c, misc/bsd-compat.c: Fixed DEFUNs in fn
	aliases.

	* time/Makefile (echo-zonenames): New target; tell user what all
	timezones defined in all zone files are.
	* Makeconfig (localtime): Comment about using above.

Sun Mar 22 18:34:02 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* time/australasia (NZ): Updated rules.

Sat Mar 21 01:00:49 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* stdio/printf-prs.c [__GNUC__]: Define HAVE_LONGLONG.

Fri Mar 20 00:35:36 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Version 1.02.

	* stdio/Makefile (routines): Add __getdelim, __getline.

	* sysdeps/unix/i386/start.c: No ../ in #include file name.

	* sysdeps/posix/sysd-stdio.c, sysdeps/stub/sysd-stdio.c
	(__stdio_seek): Doc fix.

	* sysdeps/posix/mk-stdiolim.c: Add one to L_tmpnam, for the null
	terminator.

	* sysdeps/posix/__dup2.c: Use an extra fcntl call to check that the
	first fd is valid.  Close the second fd before doing the dup.

	* pwd/pwdread.c, grp/grpread.c: Use __getline.  Ignore lines
	beginning with #.

	* Makeconfig (objdir): If $(ARCH) starts with a slash, don't prepend
	$(..).

Thu Mar 19 21:36:57 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makefile (install-lib): Add Mcrt1.o.
	(Mcrt1.o): Create empty file.

Wed Mar 18 16:00:18 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Makeconfig (+link): Use $(libdir) for gnulib.

Tue Mar 17 20:12:35 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* math/bsd/common_source/mathimpl.h: Include <endian.h>.
	[__LITTLE_ENDIAN]: #define national.

	* stdio/__vfscanf.c: EOF at end of string is not
	an error.

	* stdio/tstscanf.c: Added new sscanf test.

	* stdio/vfprintf.c: For %#x, print 0x after padding 0s, not before.

	* stdio/fputs.c: Reverse size args to fwrite and test for returning
	LEN, rather than 1, so 0-length wins.

	* io/gnu/fcntl.h: Moved to sysdeps/unix/bsd/fcntlbits.h.
	* io/Makefile (headers), io/fcntl.h: gnu/fcntl.h -> fcntlbits.h.
	* sysdeps/stub/fcntlbits.h, sysdeps/unix/sysv/fcntlbits.h: New.

	* stdio/fopen.c (__getmode): Don't fall through in switch after 'a'
	case.

	* locale/C-ctype_ct.c (__ctype_b_C): Use symbolic constants.
	9..12 are not _NOgraph.

Tue Mar 17 19:04:01 1992  Torbjorn Granlund  (tege@hal.gnu.ai.mit.edu)

	* string/testcopy.c: Fix typo in comment.

Tue Mar 17 19:57:49 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/generic/strstr.c, string/string.h, string/tester.c
	(strstr): Arguments were reversed.

Tue Mar 17 18:52:39 1992  Torbjorn Granlund  (tege@hal.gnu.ai.mit.edu)

	* sysdeps/i386/memcopy.h (WORD_COPY_BWD): Divide nbytes by 4.
	* sysdeps/i386/memchr.c: Rewrite.  Handle zero length correctly.
	Don't ask gcc to allocate eax to two regs.

Tue Mar 17 17:31:06 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/unistd.h (getpagesize): Declare as size_t.

	* Makeconfig (CC): Define unless origin is default.

	* stdio/__getdelim.c: Be sure to leave room for the terminating null.

	* string/testcopy.c: New version from tege.

	* malloc/dist-README: Changed mailing list addr to bug-glibc.

	* sysdeps/unix/bsd/__sigproc.c: Use right mask for SIG_UNBLOCK.

	* Makefile, Rules (clean, mostlyclean): Put - before rm commands.

Tue Mar 17 11:14:40 1992  Torbjorn Granlund  (tege@hal.gnu.ai.mit.edu)

	* sysdeps/rs6000/memcopy.h (BYTE_COPY_BWD): Assign __nbytes.
	* sysdeps/m68k/memcopy.h (WORD_COPY_BWD): Copy memory, not just
	pointers.  Clean up switch expression.

Mon Mar 16 05:09:23 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* posix/wordexp.c: New.

	* time/tzfile.c (__tzfile_read): Don't die if some of the sections
	of the datafile are empty.

	* stdio/getline.c, stdio/getdelim.c: Moved to
	__getline.c/__getdelim.c.
	New files with fn aliases.
	* stdio/stdio.h (__getline, __getdelim): Declare.

	* time/Makefile (zonenames): Hair to find the names of zones
	described by $(tzfiles).
	(install-data): Install zoneinfo/$(zonenames).
	Rules to make zones from tzfiles.
	[localtime] (zoneinfo/localtime): Make from zoneinfo/$(localtime).
	* Makeconfig (localtime): New user-frobbable variable.

Sun Mar 15 00:01:05 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* Makerules (sysdep-Makefile): Do if ... else true to avoid bogus
	nonzero status.

	* Makefile: Denewlinify +sysdep-subdirs after including sysd-dirs.

	* sysdeps/vax/__infnan.c [!__GNUC__]: Error.

	* zic.c, scheck.c, emkdir.c, ialloc.c, private.h, tzfile.h: Snarfed
	from localtime3 dist.
	* time/Makefile (others): Added zic.
	(distribute): Added private.h, emkdir.c, ialloc.c, scheck.c.
	(install): Defined: zic, zdump.

	* Makeconfig (bindir): Define.
	* Makerules: Add rule to install $(install) in $(bindir).
	(+install): Include $(install) in $(bindir).

	* sysdeps/unix/Makefile: Moved siglist.c rules to unix/bsd/Makefile.
	* sysdeps/unix/make_siglist.c: Moved to bsd/.
	* sysdeps/unix/Dist: Remove it.
	* sysdeps/unix/bsd/Dist: Add it.

	* malloc/Makefile (malloc/gmalloc.c): Depend on headers and sources.

	* sysdeps/unix/bsd/sun/sun4/__sigvec.S: Doc fix.

	* sysdeps/stub/stty.c, sysdeps/stub/gtty.c: Include <stddef.h>.

	* sysdeps/unix/sysv/__fstat.c: Include sysv_stat.h.

	* misc/bsd-compat.c: Define _BSD_SOURCE rather than __FAVOR_BSD.
	(longjmp): Use function_alias_void.

	* time/Makefile (tzfile.o): Compile with
	-DTZDIR='"$(datadir)/zoneinfo"'.d

Sat Mar 14 23:26:46 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* Makeconfig (INSTALL_DATA, INSTALL_PROGRAM, INSTALL): Don't define
	if already defined.

	* setjmp/longjmp.c: Use function_alias_void.

	* gnu-stabs.h (function_alias_void): New macro.

	* gnu-stabs.h [!HAVE_GNU_LD] (function_alias): Fixed not to loop.

Fri Mar 13 17:20:19 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Include null
	terminator in length calculation.

	* stdio/fgets.c: Be sure to return NULL on error/eof for unbuffered
	stream.  If N==1, don't write the first char if !seen.
	When the buffer is empty, notice the effect of __fillbf after
	calling it, avoiding a (costly) no-op iteration.
	Don't return NULL for reading no chars; only for EOF or error.
	Don't write terminator at beginning of S if eof on first char.

	* malloc/Makefile (libmcheck.a), Makefile (crt0.o): Remove target
	first; don't use -f to ln.

	* posix/execl.c, posix/execv.c, sysdeps/posix/getenv.c,
	sysdeps/posix/system.c [HAVE_GNU_LD]: #define __environ environ

	* posix/unistd.h [__OPTIMIZE__] (execv): Removed defn.  Can't know
	whether to use __environ or environ.

	* io/fchown.c, io/chown.c, io/open.c, misc/select.c,
	signal/sigvec.c, time/adjtime.c: Fixed DEFUNs in fn aliases.

	* time/__tzset.c: Don't dereference NULL if getenv returns it.

Thu Mar 12 16:01:33 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/ieee754/sqrt.c: Replaced undefined var ref `k' with constant.

	* sysdeps/i386/__longjmp.c: #include <stdlib.h>.

	* time/tzfile.c (__tzfile_compute): Use types[0] if TIMER falls
	between transitions[0] and transitions[1].
	Always set __tzname[INFO->isdst] to the name for INFO.

	* sysdeps/i386/__longjmp.c: Changed register names for gcc; eax/%eax
	-> ax.

	* sysdeps/unix/snarf-ioctls: Avoid infinite recursion.

Wed Mar 11 00:16:18 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* Version 1.01.

	* Makefile (munch-init.c): Made $(objpfx)munch-init.c.

	* signal/sigvec.c, signal/sigaction.c, stdio/vsscanf.c: Fixed DEFUNs
	in fn aliases.

	* sysdeps/m68k/68881/68881-switch/switch.c: Merged vars have_fpu and
	test_fpu into one.

	* sysdeps/mach/i386/start.c, sysdeps/vax/setjmp.c,
	sysdeps/vax/__longjmp.c, sysdeps/vax/__infnan.c,
	sysdeps/unix/start.c, sysdeps/unix/bsd/sun/sun4/sigtramp.c,
	sysdeps/unix/bsd/sun/sun4/start.c,
	sysdeps/unix/bsd/hp9k3bsd/start.c, sysdeps/sparc/sqrt.c,
	sysdeps/rs6000/ffs.c, sysdeps/m88k/ffs.c, sysdeps/m68k/setjmp.c,
	sysdeps/m68k/__longjmp.c, sysdeps/m68k/68881/printf_fp.c,
	sysdeps/m68k/68881/atan2.c, sysdeps/m68k/68881/__logb.c,
	sysdeps/m68k/68881/68881-switch/switch.c, sysdeps/m68k/ffs.c,
	sysdeps/i386/memset.c, sysdeps/i386/memchr.c, sysdeps/i386/ffs.c,
	sysdeps/i386/bzero.c, sysdeps/i386/__longjmp.c, sysdeps/am29k/ffs.c
	[! __GNUC__]: Either include the generic (or in some cases, ieee754)
	version, or do a #error.

	* Rules: Null out `objects' at end to shrink environment some.
	(+objs): Define with := from $(objects).
	(clean): Use that instead of $(objects).

	* sysdeps/i386/setjmp.c: Doubled % where it wanted to be literal.

	* posix/getgrps.c, io/flock.c, io/mkdir.c, io/read.c, io/write.c,
	io/stat.c, misc/getdents.c, misc/mknod.c, misc/utimes.c: Fixed
	DEFUNs in fn aliases.

	* sysdeps/unix/bsd/hp9k3bsd/sysdep.S: Use # instead of kludge cookie.

	* posix/getegid.c: Fixed type in DEFUN.

	* time/tzfile.c (__tzfile_compute): If TIMER is before any
	transition in the file, use the first non-DST type, rather than the
	type of the first transition in the file.

Tue Mar 10 20:01:55 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* configure: Take optional -nfp arg.
	(news, sun3, hp300): Prepend m68k/68881 unless -nfp is given.
	* sysdeps/unix/bsd/hp9k3bsd/Implies: Don't specify 68881.

	* stdio/getdelim.c: When the buffer is empty, notice the effect of
	__fillbf after calling it, avoiding a (costly) no-op iteration.

	* sysdeps/vax/__memccpy.c: Fixed comments.

	* stdio/fmemopen.c: Set all fns and seen bit before we might call
	something that would care (fclose).

	* configure (sun3, sun-3): Mean sun3os4, not sun3os3.
	(sun3os3): Use just unix/bsd/sun/sun3/os3.
	* sysdeps/unix/bsd/sun/sun3/os3: New directory.
	(sysdeps/unix/bsd/sun/sunos3/__wait.S): Moved to there.
	* sysdeps/unix/bsd/sun/sun3/sysdep.h: Fixed; took hp9k3bsd/sysdep.h
	and changed movel foo, d0 to pea foo for syscall no.
	* sysdeps/unix/bsd/sun/sun3/__brk.S: Fixed pea addr mode.
	* sysdeps/unix/bsd/sun/sun3/sethostid.S: errnos.h, not gnu/errno.h.
	Use .stabs directly, not gnu-stabs.h (which uses `asm').
	* sysdeps/m68k/setjmp.c: Changed asm for first moveml, so it works
	on sun3.
	* sysdeps/unix/bsd/sun/sun3/start.c: Removed ../ from #include path.

Sun Mar  8 16:33:33 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* misc/makefile (headers): Added stab.h, stab.def.
	* Many files: Changed __GNU_STAB__ to HAVE_GNU_LD.

Sat Mar  7 21:21:10 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* time/mktime.c: Normalize the struct values before checking for out
	of range values.

Fri Mar  6 11:43:35 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/ieee754/ldexp.c: New.

	* stdio/internals.c (flushbuf): When priming the stream for writing,
	advance the target pos to account for chars gotten from the buffer.

	* sysdeps/generic/Makefile: For math routines, don't filter out
	__finite.

	* sysdeps/posix/sysd-stdio.c (__stdio_gen_tempname): Fixed bugs.

	* misc/Makefile (routines): Remove flock.

	* stdlib/strtod.c: Fixed typo in checking for exponent overflow.
	Do set *ENDPTR on overflow or underflow.

	* sysdeps/sparc/fl.h: Removed.  Should use ieee754 version.

	* sysdeps/generic/Makefile: For math routines, don't filter out
	__copysign, __scalb, __drem and __logb; and don't add support.

	* sysdeps/ieee754/__drem.c: New.
	* sysdeps/ieee754/sqrt.c: New.
	* sysdeps/stub/__drem.c: New.
	* sysdeps/stub/sqrt.c: New.
	* sysdeps/stub/__logb.c: New.
	* sysdeps/ieee754/__logb.c: New.

	* sysdeps/ieee754/__infnan.c: Include <float.h> and use NAN macro
	rather than cooking one up by hand.

	* sysdeps/unix/bsd/getlogin.c: Open /dev/tty, rather than using stdin.
	Make sure the name is always null-terminated.

Thu Mar  5 17:11:46 1992  Roland McGrath  (roland@geech.gnu.ai.mit.edu)

	* sysdeps/m68k/68881/__scalb.c: Removed.
	* sysdeps/m68k/68881/__math.h: Removed defn of __scalb.
	* math/math.h [__OPTIMIZE__]: Define __scalb to be ldexp.
	* math/__scalb.c: New; fn alias for ldexp.

	* stdio/Makefile (tests): Added bug4 and bug5.
	* stdio/bug4.c, stdio/bug5.c: Test cases from reported bugs just fixed.

	* stdio/internals.c (flushbuf): If nothing was written by the user,
	but there is previously gotten data, don't write anything out.

	* stdio/internals.c (seek_to_target): Call __stdio_check_offset first.

	* sysdeps/unix/sysv/sysv_termio.h: New file.
	* sysdeps/unix/sysv/Dist: Include it.
	* sysdeps/unix/sysv/tcsetattr.c, sysdeps/unix/sysv/tcsetpgrp.c,
	sysdeps/unix/sysv/tcsendbrk.c, sysdeps/unix/sysv/tcgetpgrp.c,
	sysdeps/unix/sysv/tcflush.c, sysdeps/unix/sysv/tcdrain.c,
	sysdeps/unix/sysv/__tcgetatr.c: New files.

	* stdio/internals.c (fillbuf): Don't set the put_limit on writable
	streams.  Wait for first write attempt to prime them, so we don't
	flush the unchanged data unnecessarily.

	* stdlib/exit.c: Look for NULL terminator on ld set, rather than
	using length word.

	* Makefile (headers): Remove stdarg.h and varargs.h.
	Users will get them from GCC.
	* stdio/printf.h: Include <stdarg.h> to use va_list.
	* stdio/stdio.h: Don't include <stdarg.h> with magic.
	Use PTR in place of __va_list in prototypes.
	* stdio/__vsscanf.c, stdio/vscanf.c, stdio/vfscanf.c,
	stdio/__vfscanf.c, stdio/vdprintf.c, stdio/vasprintf.c,
	stdio/vsprintf.c, stdio/vsnprintf.c, stdio/vprintf.c,
	stdio/vfprintf.c: Fixed DEFUNs.

	* sysdeps/ieee754/ieee754.h: New file; declares union ieee754_double.
	* sysdeps/ieee754/Dist: Add it.
	* sysdeps/ieee754/__copysign.c, sysdeps/ieee754/__infnan.c,
	sysdeps/ieee754/__isinf.c, sysdeps/ieee754/__isnan.c,
	sysdeps/ieee754/__printf_fp.c: Use it.

	* sysdeps/unix/sysv/uname.c: New.
	* sysdeps/unix/sysv/__utssys.S: New.
	* sysdeps/unix/sysv/Makefile (routines): Add __utssys.
	* sysdeps/unix/sysv/Dist: Add __utssys.S.

	* sysdeps/unix/sysv/__rmdir.c: New; runs `rmdir' shell command.

	* sysdeps/unix/sysv/__mkdir.c: New; runs `mkdir' shell command.

	* sysdeps/generic/__lstat.c: New; fn alias for __stat.

	* sysdeps/unix/sysv/__gethostname.c: New; uses uname.

	* sysdeps/unix/Makefile (sys/params.h): Protect with
	_GNU_SYS_PARAM_H, in case the system's file uses _SYS_PARAM_H itself.

	* stdio/internals.c (__stdio_check_offset): Call init_stream to make
	sure we have fns.

	* stdio/fread.c: Don't call __fillbf if the put_limit is past the
	beginning of the buffer; only if !seen, no buffer, or pushed back.

	* stdio/fopen.c (__getmode): Set create bit for "a" mode.

	* io/mkdir.c: #undef mkdir before fn alias.

	* time/tzfile.c (__tzfile_compute): Don't decrement I if it's zero.

	* Makefile (crt0.o): Use ln -f.

	* math/Makefile (install): Install libm.a.
	(libm.a): Make an empty archive.

Wed Mar  4 19:54:50 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* README.template: Added note about long filenames in dist.

	* io/Makefile (routines): flock -> __flock
	* flock.c: New file, fn alias.
	* sysdeps/unix/bsd/flock.S: Renamed to sysdeps/unix/bsd/__flock.S;
	made __flock.
	* sysdeps/mach/hurd/flock.c: Renamed to sysdeps/mach/hurd/__flock.c;
	made __flock.
	* sysdeps/stub/flock.c: Renamed to sysdeps/stub/__flock.c; made
	__flock.

	* time/time.h (__isleap): Fixed; every 400th year is not a leap
	year, not every 1000th.

	* stdio/internals.c (flushbuf): Increment the target position the
	amount the user wrote into the buffer, not the amount we wrote out
	to the file (which is greater if we read a block and modified it
	in the middle).

	* stdio/internals.c (flushbuf): Set get_limit to the beginning of
	the buffer for all streams, except when we have just read in a block.

Sat Feb 29 15:56:22 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* posix/Makefile (others): Removed logname, id.
	* time/Makefile (others): Removed date.

	* sysdeps/unix/bsd/sun/sun4/start.c: Make an alias called `start'
	(no leading underscore, so it can't conflict with C symbols) for
	`_start'.

Thu Feb 27 14:32:20 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* set-init.c: Look for NULL terminator on set.  ld is broken and
	doesn't set the length word correctly.

	* setjmp/_longjmp.c, signal/sigaction.c, signal/sigvec.c,
	signal/ssignal.c, string/bcmp.c, time/setitmr.c, posix/execve.c,
	posix/getegid.c, posix/geteuid.c, posix/getgid.c, posix/getuid.c,
	posix/getgrps.c, posix/setuid.c, posix/wait3.c, posix/wait4.c,
	posix/waitpid.c, io/lseek.c, io/open.c, io/read.c, io/write.c,
	resource/getrusage.c, misc/getpgsz.c, misc/gethstnm.c,
	misc/select.c: Fixed DEFUNs in fn aliases.

Wed Feb 26 00:20:25 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/generic/Makefile (routines): Add asincos.

	* time/tzfile.c (__tzfile_compute): Set __tzname properly, so isdst
	is the right index into it.

Tue Feb 25 01:42:16 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/unix/bsd/sun/sun4/sysdep.h (ENTRY): .align 2, not .align 4.
	This one is powers of two.

	* time/__tzset.c: If TZ is :FILE, try FILE and if __tzfile_read
	fails, then use defaults.

	* sysdeps/generic/Makefile (routines): Add sincos.

	* sysdeps/posix/cuserid.c: Set the result to the empty string on
	failure.

	* string/string.h, string/strings.h, sysdeps/i386/memchr.c: Fixed
	spelling in comment.

	* string/makefile (tests): Include (uncomment) testcopy.  We do have
	papers for it from tege.

	* malloc/dist-README: Fixed mailing list addr.

	* resource/sys/vtimes.h (struct vtimes): Renamed vm_outblk to
	vm_oublk; fixed comment.
	* sysdeps/generic/vtimes.c: Renamed here too.

	* Make-dist (README): Depend on version.c.

Tue Feb 18 18:14:50 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* Version 1.00.

	* time/tzfile.c (__tzfile_compute): Fixed transition comparison.

	* sysdeps/unix/bsd/sun/sun3/Makefile: Fixed typo.

Mon Feb 17 05:04:00 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* Version 0.6.

	* Makefile (distribute): Add Q+A.
	* Q+A: New doc file from rich@cygnus.com.

	* malloc/Makefile (distribute): Add mcheck-init.c.

Mon Feb 17 00:39:38 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/unix/sysv/utime.c: Removed.
	* sysdeps/unix/sysv/utime.S: New file.

	* sysdeps/unix/sysv/signum.h: New file.

	* sysdeps/unix/sysv/local_lim.h: New file.

	* sysdeps/unix/sysv/sysv_stat.h: New file.
	* sysdeps/unix/sysv/__stat.c, sysdeps/unix/sysv/__fstat.c: New files.
	* sysdeps/unix/sysv/Makefile: New file.
	(+sysdep-routines): Define to sys_stat and sys_fstat.
	* sysdeps/unix/sysv/sys_stat.S, sysdeps/unix/sysv/sys_fstat.S: New
	files.
	* sysdeps/unix/sysv/Dist: Created to include sysv_stat.h,
	sys_stat.S, and sys_fstat.S.

	* sysdeps/stub/__setreuid.c: Include <sys/types.h>.

	* sysdeps/posix/__sigblock.c: Fixed typo.

	* stdio/internals.c (__flshfp): Don't return EOF if at EOF; only
	for errors.

	* signal/gnu/signal.h: Move #include <signum.h> outside repeat #ifdef.

	* sysdeps/unix/sysv/filebits.h: Created.

	* misc/Makefile (distribute): Define to bsd-compat.c.

	* misc/Makefile (headers): Remove filebits.h.
	* io/Makefile (headers): Put it here.

	* Makefile (+posix_dirs): Add io.
	* io/Makefile: New file for new subdir.
	Contains many headers and routines moved from posix.
	* posix/Makefile: Remove many headers and routines now in io.
	* Moved many files from posix to io.

	* stdlib/alloca.h: Get size_t from stddef.h.

	* misc/bsd-compat.c (getgroups): Removed.  Not needed, because gid_t
	is now the same size as int.

	* Makefile (distribute): Include NOTES.
	* NOTES: New file, infoized node from intro.texinfo about the
	feature-test macros.
	* README.template: Mention NOTES.

	* sysdeps/unix/bsd/sun/sun3/Makefile: include hp9k3bsd version.

	* Makeconfig: Use $(..) for config.status.

	* configure (i386-sysv): unix/i386/sysv, not unix/sysv/i386.
	* unix/i386/sysv/Implies: unix/sysv, not unix/i386.

Sun Feb 16 00:42:53 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* Version 0.5.

	* posix/Makefile (headers): Remove confstr.h.
	(distribute): Define this instead to contain it.

	* ansidecl: Added copyright notice.

	* stdio/getdelim.c: New file.
	* stdio/getline.c (getsome): Renamed to getdelim and moved there.
	* stdio/Makefile (routines): Add getdelim.
	* stdio/stdio.h: Declare getdelim.

	* misc/gnu/file.h: Moved to sysdeps/unix/bsd/filebits.h.
	* sysdeps/stub/filebits.h: New file.
	* misc/Makefile: gnu/file.h is now filebits.h.
	* posix/fcntl.h: Changed #include.

	* stdio/getline.c (getsome): If MAX_CANON isn't defined, use a default.
	Don't leak old *LINEPTR storage if *N < 2.
	Don't bang *LINEPTR to NULL if realloc fails.

	* Makerules: Don't use override when nulling out sources, routines,
	and aux if they came from the environment.  Better not make with -e.

	* Makefile (sysdirs, Sysnames): Put outside of ifndef sysdirs.

	* string/Makefile (tests): No testcopy, pending papers.

	* Makefile (headers): No sysdep.h.
	(distribute): Here instead.
	(no-install): No longer needed.

Sat Feb 15 17:10:38 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* Makefile (distribute): Add INSTALL.
	* Make-dist (INSTALL): Make from manual/maint.texinfo.
	(README): Make from README.template.

	* Makefile (+other-dirs): Removed inet.
	* sysdeps/unix/inet/Subdirs: Created, adding inet.

	* sysdeps/unix/sysv/setrlimit.c: Include stddef and errno.h.

	* math/drem.c, setjmp/longjmp.c, malloc/cfree.c, string/bcmp.c,
	time/getitmr.c, misc/ioctl.c: Fixed defuns in function_alias.

	* Makefile (headers): Put sysdep.h back.
	(no-install): And define this to it.
	* Makerules (+install): Filter out $(no-install) from the list.

	* string/testcopy.c: New test program for bcopy from tege.
	* string/Makefile (tests): Add it.

	* Makefile (sysdep-subdirs): Renamed to sysd-dirs.

	* Make-dist (tardir): Omit the release name; it made names too long.

Sat Feb 15 12:53:02 1992  Torbjorn Granlund  (tege at mole.gnu.ai.mit.edu)

	* sysdeps/rs6000/memcopy.h (WORD_COPY_FWD, WORD_COPY_BWD):
	Use CTR register for looping (speed enhancement).  Don't emit
	labels, jump relative from `$' instead (makes multiple expansions
	possible).  Clean up indentation of asm code (were different in each
	macro).
	* sysdeps/rs6000/memcopy.h (WORD_COPY_BWD):
	Add asm output specs (were missing completely).

	* sysdeps/generic/{memcpy.c,memmove.c}: Make DSTP and SRCP unsigned
	(safer with non-ANSI compilers).

Fri Feb 14 01:52:12 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* Version 0.4.1.

	* Makefile, Rules: Changed clean and clobber targets into
	mostlyclean, clean, and realclean.

	* Makeconfig: Added comments describing objdir/Makeconfig and
	editting Makeconfig.
	(prefix, libdir, INSTALL, INSTALL_DATA): New variables for installing.
	* Makerules (install): New target.
	* Makefile (+subdir_targets): Add subdir_install.
	(install): Depend on subdir_install.
	(install-lib): Define variable to install libc.a and crt0.o.
	* misc/Makefile (install-lib): Install bsd-compat.
	* malloc/Makefile (install-lib): Install mcheck-init.

	* Version 0.4.

Thu Feb 13 21:39:31 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/unix/glue-ctype.c: Moved to unix/bsd.
	* sysdeps/unix/Makefile: Moved glue-ctype stuff to unix/bsd/Makefile.
	* sysdeps/unix/Dist: No glue-ctype.
	* sysdeps/unix/bsd/Dist: Here instead.

	* sysdeps/sparc/divrem.m4: Don't use insn aliases Sun as doesn't grok.

Wed Feb 12 12:12:12 1992  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* sysdeps/m68k/setjmp.c: Use m, rather than g, constraint when
	saving fp regs.

	* Renamed oodles of files, changed all the relevant Makefiles (I
	think).  File names now fit in 14 chars for losing System V.  Gag me
	with a death star.
	See =longnames for translations, and =shorten.el for method.

	* grp/initgroups.c: Removed redundant test.

	* malloc/mtrace.c: Use %p fmt for pointers.

Tue Feb 11 02:04:39 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/alloca.h: New file.
	* stdlib/stdlib.h: Moved alloca decls there; #include <alloca.h>
	instead.
	* stdlib/Makefile (headers): Added alloca.h.

	* stdio/getline.c (getsome): Fixed bugs.

	* math/bsd/common_source/mathimpl.h: #define expm1 __expm1.
	* math/bsd/common_source/expm1.c: Renamed to __expm1.c
	* math/bsd/mc68881/expm1.s: Renamed to __expm1.s; renamed fn too.
	* math/expm1.c: New file, fn alias expm1 -> __expm1.

	* math/Makefile (routines): Add __rint.
	* math/rint.c: New file, fn alias rint -> __rint.
	* math/bsd/common_source/floor.c (rint): Renamed to __rint.
	* sysdeps/generic/Makefile: Remove __rint, not rint.

	* math/Makefile (BSDmath-files): Always include it, and don't depend
	on undependable things.

	* Makerules (sysdep-Makefile): Always include it, and make it
	without depending on make vars that might not be right yet.

Mon Feb 10 00:55:58 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdlib/stdlib.h: #undef alloca before declaring it.

	* sysdeps/sparc/__longjmp.S: Use be instead of bz.

	* sysdeps/unix/bsd/Dist: Add bsdtty.h.

	* tzfile.c (__tzfile_read): Don't allocate space for 0 leaps.
	Don't loop infinitely.

	* sysdeps/unix/Makefile (make-errnos.c): Use tr to eat newlines in
	errnos file.

	* sysdeps/unix/bsd/sun/sun4/__brk.S: Fix andn arg order.

	* posix/Makefile: Don't get getopt by vpath.  Turns out to be too
	much hassle for dist.  Just made symlinks in posix/ instead.

	* manual/Makefile: Renamed summary.out to summary.texinfo.

	* manual/summary.awk: New file, to make summary.out.
	Replaces `process-definitions.el'.
	* manual/Makefile (summary.out): Create using summary.awk.

	* manual/Makefile: Created.
	* Makefile, Make-dist: Use it to format and distribute the manual.

Mon Feb 10 00:32:17 1992  Jim Meyering  (meyering@churchy.gnu.ai.mit.edu)

	* All Makefiles:
	Whenever using shell redirection to create a target,
	do not create the target directly like this

	    foo: bar
		    process $< > $@

	That loses when `process' fails (interrupt, disk full, ...)
	and bar exists and looks up-to-date, but isn't.
	This sort of failure is particularly insidious when
	the initial error message is obscured by lots of subsequent
	output (echoed commands etc).

	Instead use rules like this

	    foo: bar
		    process $< > $@-tmp
		    mv $@-tmp $@

	Using this paradigm, as long as process returns non-zero
	whenever it fails, the target won't be touched.

Sun Feb  9 22:58:51 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/unistd.h (getopt): Fixed prototype.
	* sysdeps/generic/memset.c, stdio/vdprintf.c: Fixed DEFUNs.

	* Makerules (lib): Use $(RANLIB) for ranlib.
	* Makeconfig: Define it.

	* configure: Create config.status to set ARCH, if successful.
	* Makeconfig: include config.status ifndef ARCH.

Thu Feb  6 20:57:10 1992  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* ansidecl.h (INCLUDE, STARTCOMMENT, ENDCOMMENT): New magic words.
	* sysdeps/m68k/68881/fl.h: Use new magic to snarf ieee754/fl.h during
	ansideclification.

	* sysdeps/ieee754/fl.h: New file, taken mostly from the old
	68881 file.  HUGE_VAL redone to be machine independent.
	(NAN): New macro for an IEEE NaN, done like HUGE_VAL.
	* sysdeps/m68k/68881/fl.h: Now #includes ieee754/fl.h, and overrides
	FLT_ROUNDS for 68881 magic.  NB: the #include is a prob. for install.

Wed Jan 29 17:11:25 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/posix/getcwd.c: Don't use chdir; use a long ../../../...
	path name instead.

Fri Jan 17 02:51:10 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* posix/Makefile (headers): Added getopt.h.
	(routines): Added getopt1.
	Get getopt* from /home/gd/gnu/lib by vpath.

	* Makerules (+ansideclificate): Don't assume . is in PATH.

Thu Jan 16 18:43:05 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* posix/glob.c [sgi]: No alloca.h, after all.

Wed Jan 15 14:17:37 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* termios/termios.h: Reworked to be compatible with 4.4BSD.
	* termios/speed.c, sysdeps/unix/bsd/{__tcgetattr,tcsetattr}.c: Store
	speeds as their own values (B9600==9600, etc.) and translate to BSD
	values only for ioctl.
	* termios/cfsetpseed.c: New fn to set both speeds at once (from 4.4).

Tue Jan 14 21:18:10 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/unix/i386/__brk.S: __end, not ___end.
	Get the arg off the stack correctly.

	* sysdeps/unix/Makefile: Allow errnos like EL3HLT.

	* sysdeps/posix/{readv,writev}.c: Typos.

	* sysdeps/posix/__sigpause.c: Rewritten to know that sigset_t is a
	mask, and to pass a (sigset_t *) instead of sigset_t to sigsuspend.

	* sysdeps/i386/memset.c: Include <memcopy.h>.

	* sysdeps/generic/uname.c (uname): Save and restore errno if
	gethostname gets ENOSYS.

	* stdio/perror.c (perror): Check correctly for S == "".
	Check correctly for ERRNUM being in range.

	* find-sysdirs: Don't use fgrep -s, since USG apparently doesn't
	have that flag.  Just >/dev/null instead.

Mon Jan 13 17:00:15 1992  Torbjorn Granlund  (tege at mole.gnu.ai.mit.edu)

	* sysdeps/generic/wordcopy.c (all four functions): Move do0 label to
	the ultimate store statement at the end of each function.  (Used to
	be in the loop.)

Tue Jan  7 18:40:18 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* resource/sys/resource.h (struct rusage): Change `ru_outblock' to
	`ru_oublock'.

	* sysdeps/generic/stpcpy.c: Fixed off-by-one bug.

Thu Jan  2 15:19:01 1992  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* sysdeps/sparc/Dist: Add umul.S and mul.S.

Tue Dec 31 15:33:39 1991  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* signal/signal.h [__USE_GNU]: Add user-visible `sighandler_t' ==
	__sighandler_t.

	* termios/speed.c (speedtab): Made const.

	* posix/Makefile (routines): Add flock.

Tue Dec 31 03:38:30 1991  Richard Stallman  (rms at mole.gnu.ai.mit.edu)

	* termios/speed.c: Accept and return speeds as actual baud rates.
	* termios/termios.h (B110, etc.): Define B110 as 110, etc.
	Likewise for _B110, etc.

Thu Oct 24 16:19:49 1991  Roland McGrath  (roland@wookumz.gnu.ai.mit.edu)

	* ansidecl: Put `M4OPTS=+quiet' in the environment make GNU m4 quiet.

Sun Oct 20 19:31:28 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Make-dist (tardir): Define as `libc-RELEASE-VERSION', strings
	snarfed from version.c.
	($(..)$(tardir)): Add rule to make as symlink to . (parent dir).
	[subdir] (dist), [parent] (dist.tar): Depend on that.
	[subdir] (tarsources), [parent] (+tsrcs): Add $(tardir)/ to files.

	* sysdeps/sparc/Makefile (distribute): Move data into Dist file.

Fri Oct 18 15:27:58 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* Makefile (subdirs): Add $(sysdep-subdirs), so sysdep makefiles can
	add subdirs.

	* posix/glob.c [sgi]: Use <sys/dir.h>.

	* stdio/fopen.c: If not appending, initialize the offset to 0.

	* sysdeps/generic/strcasecmp.c: Fixed losing braindead code.

Tue Oct  8 15:27:54 1991  Roland McGrath  (roland@albert.gnu.ai.mit.edu)

	* Version 0.1.
	* This ChangeLog is lacking much information.
	* After this release, I hope to maintain the log well. 

Fri Jul 26 18:02:57 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/Makefile (routines): Remove _cleanup.

Thu Jul 25 23:12:45 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* stdio/memstream.c (close_memstream): Removed.
	(trim_buffer): New fn to be io_funcs->__close for memstreams.
	(open_memstream): Take arg char **BUFLOC.  Stuff it in
	stream->__fd, and store the location of the initial buffer in
	*BUFLOC.
	(enlarge_buffer): Keep *(char **) stream->__fd updated to be the
	location of the buffer.

Tue Jul 23 14:11:29 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* posix/glob.c: Don't #include <stddef.h> #ifdef sun.
	Is there anyone on the face of the planet other than me capable of
	implementing the ANSI C standard to spec????

	* posix/glob.c [DIRENT]: #include <sys/types.h> before <dirent.h>
	#ifdef USG.

Mon Jul 22 17:06:24 1991  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* sysdeps/posix/make-stdio_limits.c: #include <posix1_limits.h>,
	not <posix_limits.h>.

	* README: Refer to COPYING.LIB, not COPYING.

	* config.libc: Renamed to `configure'.

Local Variables:
mode: change-log
End:
