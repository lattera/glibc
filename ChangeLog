2015-02-06  Carlos O'Donell  <carlos@systemhalted.org>

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to "2.21"
	* include/features.h (__GLIBC_MINOR__): Set to 21.

	* sysdeps/unix/sysv/linux/hppa/pthread.h: Sync with pthread.h.

2015-02-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16618]
	* stdio-common/tst-sscanf.c (main): Test for buffer overflow.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Compute needed
	size in bytes. Store needed elements in wpmax. Use needed size
	in bytes for extend_alloca.

2015-02-05  Carlos O'Donell  <carlos@systemhalted.org>

	* manual/install.texi: Latest tested versions are GCC 4.9.2,
	binutls 2.25, and texinfo 5.2.
	* INSTALL: Regenerate.
	* sysdeps/nios2/configure: Regenerate.
	* sysdeps/unix/sysv/linux/nios2/configure: Regenerate.
	* manual/contrib.texi: Update.
	* po/be.po: Update.
	* po/bg.po: Update.
	* po/ca.po: Update.
	* po/cs.po: Update.
	* po/da.po: Update.
	* po/de.po: Update.
	* po/el.po: Update.
	* po/eo.po: Update.
	* po/es.po: Update.
	* po/fi.po: Update.
	* po/fr.po: Update.
	* po/gl.po: Update.
	* po/hr.po: Update.
	* po/hu.po: Update.
	* po/ia.po: Update.
	* po/id.po: Update.
	* po/it.po: Update.
	* po/ja.po: Update.
	* po/ko.po: Update.
	* po/lt.po: Update.
	* po/nb.po: Update.
	* po/nl.po: Update.
	* po/pl.po: Update.
	* po/pt_BR.po: Update.
	* po/ru.po: Update.
	* po/rw.po: Update.
	* po/sk.po: Update.
	* po/sl.po: Update.
	* po/sv.po: Update.
	* po/tr.po: Update.
	* po/uk.po: Update.
	* po/vi.po: Update.
	* po/zh_CN.po: Update.
	* po/zh_TW.po: Update.

	* sysdeps/hppa/Makefile (CFLAGS-dl-fptr.c): Add -Wno-error.
	* sysdeps/hppa/bits/setjmp.h: Union is named __jmp_buf_internal_tag.
	* sysdeps/hppa/dl-irel.h: Remove #warning.
	* sysdeps/hppa/entry.h: Provide prototype for
	__canonicalize_funcptr_for_compare and cast argument.
	* sysdeps/hppa/fpu/fegetexcept.c (fegetexcept): Add semicolon.
	* sysdeps/hppa/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/hppa/sotruss-lib.c: New file.
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h
	(atomic_compare_and_exchange_val_acq): Use __typeof__.
	(atomic_compare_and_exchange_bool_acq): Likewise.
	* sysdeps/unix/sysv/linux/hppa/mmap.c: Use weak alias.
	* sysdeps/unix/sysv/linux/hppa/pthread.h: Include pthread.h.

	* sysdeps/unix/sysv/linux/hppa/syscall.S: Delete file.
	* sysdeps/unix/sysv/linux/hppa/sysdep.c: Move syscall from here...
	* sysdeps/unix/sysv/linux/hppa/syscall.c: ... to here.

2015-02-05  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/machine-gmon.h (NIOS2_MCOUNT_CALL): Correct name of
	called function in non-PIC case.

2015-01-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/bits/atomic.h
	(__sparc32_atomic_do_unlock24): Put the memory barrier before the
	unlock not after it.
	(__v9_compare_and_exchange_val_32_acq): Use unions to avoid getting
	volatile register usage warnings from the compiler.

	* sysdeps/sparc/nptl/sem_init.c: Delete.
	* sysdeps/sparc/nptl/sem_post.c: Delete.
	* sysdeps/sparc/nptl/sem_timedwait.c: Delete.
	* sysdeps/sparc/nptl/sem_wait.c: Delete.
	* sysdeps/sparc/sparc32/sem_init.c: New file.
	* sysdeps/sparc/sparc32/sem_waitcommon.c: New file.
	* sysdeps/sparc/sparc32/sem_open.c: Generic nptl version with
	padding explicitly initialized.
	* sysdeps/sparc/sparc32/sem_post.c: Generic nptl version using
	padding for in-semaphore spinlock.
	* sysdeps/sparc/sparc32/sem_wait.c: Likewise.
	* sysdeps/sparc/sparc32/sem_trywait.c: Delete.
	* sysdeps/sparc/sparc32/sem_timedwait.c: Delete.
	* sysdeps/sparc/sparc32/sparcv9/sem_init.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_open.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_post.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_waitcommon.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_wait.c: Redirect to nptl
	version.
	* sysdeps/sparc/sparc32/sparcv9/sem_timedwait.c: Delete.
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: Delete.

2015-01-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17801]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set the bit_AVX_Fast_Unaligned_Load bit for AVX2.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_AVX_Fast_Unaligned_Load):
	New.
	(index_AVX_Fast_Unaligned_Load): Likewise.
	(HAS_AVX_FAST_UNALIGNED_LOAD): Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Check the
	bit_AVX_Fast_Unaligned_Load bit instead of the bit_AVX_Usable bit.
	* sysdeps/x86_64/multiarch/memcpy_chk.S (__memcpy_chk): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S (__mempcpy_chk): Likewise.
	* sysdeps/x86_64/multiarch/memmove.c (__libc_memmove): Replace
	HAS_AVX with HAS_AVX_FAST_UNALIGNED_LOAD.
	* sysdeps/x86_64/multiarch/memmove_chk.c (__memmove_chk): Likewise.

2015-01-29  Andreas Schwab  <schwab@suse.de>

	* sysdeps/nptl/allocrtsig.c: Include <signal.h>.

2015-01-29  Siddhesh Poyarekar <siddhesh@redhat.com>

	[BZ #17892]
	* nscd/nscd_stat.c (send_stats): Initialize DATA.

2015-01-28  Martin Sebor  <msebor@redhat.com>

	* math/README.libm-test: Clarify. Add "How to read the test output."

2015-01-28  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/bits/atomic.h [!_LP64] (__HAVE_64B_ATOMICS):
	Define to 0.

2015-01-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/bits/atomic.h [_MIPS_SIM == _ABIN32]
	(__HAVE_64B_ATOMICS): Define to 0.

2015-01-28  Adhemerval Zanellla  <azanella@linux.vnet.ibm.com>

	[BZ #17885]
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Fix correct
	value to set as new flag.

	[BZ #16576]
	* sysdeps/powerpc/fpu/math_private.h [__CPU_HAS_FSQRT]: Remove define
	and use _ARCH_PPCSQ instead.
	(__ieee754_sqrt): Likewise.
	(__ieee754_sqrtf): Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Build only if
	_ARCH_PPCSQ is defined.
	(__ieee754_sqrt): Use _ARCH_PPCSQ to select wheter to use hardware
	fsqrt instruction.
	* sysdeps/powerpc/fpu/e_sqrtf.c (__ieee754_sqrtf): Build only if
	_ARCH_PPCSQ is defined.
	(__ieee754_sqrtf): Use _ARCH_PPCSQ to select wheter to use hardware
	fsqrts instruction.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Remove file.

2015-01-27  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* iconv/loop.c: Suppress array out of bound warning caused by GCC
	bug (GCC BZ #64739).

2015-01-25  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h (lll_futex_requeue):
	Mark _retval as used.
	(lll_futex_wake_unlock): Likewise.
	(lll_futex_timed_wait_requeue_pi): Likewise.

	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h
	(atomic_compare_and_exchange_val_acq): Use uint32_t for the
	register variables.

	* sysdeps/m68k/m680x0/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.

	* sysdeps/m68k/bits/byteswap.h (__bswap_16, __bswap_32)
	(__bswap_64): Mark as __always_inline.

2015-01-25  Bram  <bug_rh@spam.wizbit.be>

	[BZ #15378]
	* elf/dl-load.c (open_path): Avoid writing to 'env_path_list'
	when none of the search directories exist.

2015-01-24  Adhemerval Zanellla  <azanella@linux.vnet.ibm.com>

	[BZ #17869]
	* sysdeps/powerpc/powerpc64/power8/memset.S: Use power7 instead of
	power8 in .machine directive.

	[BZ #17868]
	* sysdeps/powerpc/powerpc64/dl-machine.h (resolve_ifunc): Force value
	set dependency from opd value.

2015-01-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Treat model numbers 0x4a/0x4d/0x5a/0x5d as Intel Silvermont
	architecture.

2015-01-23  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17870]
	* nptl/sem_post.c (__new_sem_post): Replace unsigned long int
	with uint64_t.
	* nptl/sem_waitcommon.c (__sem_wait_cleanup): Replace 1UL with
	(uint64_t) 1.
	(__new_sem_wait_fast): Replace unsigned long with uint64_t.
	(__new_sem_wait_slow): Replace unsigned long int with uint64_t.
	Replace 1UL with (uint64_t) 1.
	* sysdeps/nptl/internaltypes.h (new_sem): Replace unsigned long
	int with uint64_t.

2015-01-23  Roland McGrath  <roland@hack.frob.com>

	* inet/if_index.c (if_nameindex): Add missing libc_hidden_weak.
	(if_freenameindex): Likewise.

	* resource/getrlimit64.c: Add missing libc_hidden_def.

2015-01-22  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-common.h (_FP_ADD_INTERNAL): Declare labels with
	__label__.
	(_FP_FMA): Likewise.
	(_FP_TO_INT_ROUND): Likewise.
	(_FP_FROM_INT): Likewise.

2015-01-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16418]
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c (__get_clockfreq):
	Make code racy and cancel safe.

2015-01-21  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/arm/unwind-resume.h: Fix copyright year.
	* dlfcn/tst-rec-dlopen.c: Fix incorrect copyright year and
	attribution.

	* pwd/tst-getpw.c: Rewrite.

	[BZ #17702]
	* dlfcn/Makefile (tests): Add tst-rec-dlopen.
	(modules-names): Add moddummy1 and moddummy2.
	($(objpfx)tst-rec-dlopen): Define.
	* dlfcn/moddummy1.c: New file.
	* dlfcn/moddummy2.c: New file.
	* dlfcn/tst-rec-dlopen.c: New file.
	* elf/dl-cache.c (_dl_load_cache_lookup):
	Return char*. Copy result with alloca/strcpy/strdup.
	* elf/dl-load.c (_dl_map_object): _dl_load_cached_lookup
	returns char*. Free cached. If not saving realname
	free cached.
	* elf/dl-open.c (dl_open_worker): Do not assert that
	_r_debug->r_state is RT_CONSISTENT.
	* sysdeps/generic/ldsodefs.h: _dl_load_cache_lookup
	returns char*.

2015-01-21  Torvald Riegel  <triegel@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #12674]
	* nptl/sem_waitcommon.c: New file.
	* nptl/sem_wait.c: Include sem_waitcommon.c.
	(__sem_wait_cleanup, do_futex_wait): Remove.
	(__new_sem_wait): Adapt.
	(__new_sem_trywait): New function.
	(__old_sem_trywait): Moved here from nptl/sem_trywait.c.
	* nptl/sem_timedwait.c: Include sem_waitcommon.c.
	(__sem_wait_cleanup, do_futex_timed_wait): Remove.
	(sem_timedwait): Adapt.
	* nptl/sem_post.c (__new_sem_post): Adapt.
	(futex_wake): New function.
	(__old_sem_post): Add release MO fence.
	* nptl/sem_open.c (sem_open): Adapt.
	* nptl/sem_init.c (__new_sem_init): Adapt.
	(futex_private_if_supported): New function.
	* nptl/sem_getvalue.c (__new_sem_getvalue): Adapt.
	(__old_sem_getvalue): Add using previous code.
	* sysdeps/nptl/internaltypes.h: Adapt.
	* nptl/tst-sem13.c (do_test): Adapt.
	* nptl/tst-sem11.c (main): Adapt.
	* nptl/sem_trywait.c: Remove.
	* nptl/DESIGN-sem.txt: Remove.
	* nptl/Makefile (libpthread-routines): Remove sem_trywait.
	(gen-as-const-headers): Remove structsem.sym.
	* nptl/structsem.sym: Remove.
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_wait.S: Remove.

2015-01-20  Carlos O'Donell  <carlos@redhat.com>

	* INSTALL: Regenerated.

	* po/libc.pot: Regenerated.

2015-01-18  Chung-Lin Tang  <cltang@codesourcery.com>
	    Sandra Loosemore  <sandra@codesourcery.com>
	    Andrew Jenner  <andrew@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Nathan Sidwell  <nathan@codesourcery.com>

	* NEWS: Mention new Nios II port.
	* sysdeps/nios2/Implies: New file.
	* sysdeps/nios2/Makefile: New file.
	* sysdeps/nios2/Subdirs: New file.
	* sysdeps/nios2/Versions: New file.
	* sysdeps/nios2/__longjmp.S: New file.
	* sysdeps/nios2/abort-instr.h: New file.
	* sysdeps/nios2/backtrace.c: New file.
	* sysdeps/nios2/bits/endian.h: New file.
	* sysdeps/nios2/bits/fenv.h: New file.
	* sysdeps/nios2/bits/link.h: New file.
	* sysdeps/nios2/bits/setjmp.h: New file.
	* sysdeps/nios2/bsd-_setjmp.S: New file.
	* sysdeps/nios2/bsd-setjmp.S: New file.
	* sysdeps/nios2/configure: New generated file.
	* sysdeps/nios2/configure.ac: New file.
	* sysdeps/nios2/crti.S: New file.
	* sysdeps/nios2/crtn.S: New file.
	* sysdeps/nios2/dl-init.c: New file.
	* sysdeps/nios2/dl-machine.h: New file.
	* sysdeps/nios2/dl-sysdep.h: New file.
	* sysdeps/nios2/dl-tls.h: New file.
	* sysdeps/nios2/dl-trampoline.S: New file.
	* sysdeps/nios2/gccframe.h: New file.
	* sysdeps/nios2/gmp-mparam.h: New file.
	* sysdeps/nios2/jmpbuf-offsets.h: New file.
	* sysdeps/nios2/jmpbuf-unwind.h: New file.
	* sysdeps/nios2/ldsodefs.h: New file.
	* sysdeps/nios2/libc-tls.c: New file.
	* sysdeps/nios2/libm-test-ulps: New file.
	* sysdeps/nios2/machine-gmon.h: New file.
	* sysdeps/nios2/math-tests.h: New file.
	* sysdeps/nios2/math_private.h: New file.
	* sysdeps/nios2/memusage.h: New file.
	* sysdeps/nios2/nptl/Makefile: New file.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h: New file.
	* sysdeps/nios2/nptl/bits/semaphore.h: New file.
	* sysdeps/nios2/nptl/pthread_spin_lock.c: New file.
	* sysdeps/nios2/nptl/pthreaddef.h: New file.
	* sysdeps/nios2/nptl/tcb-offsets.sym: New file.
	* sysdeps/nios2/nptl/tls.h: New file.
	* sysdeps/nios2/preconfigure: New file.
	* sysdeps/nios2/s_fma.c: New file.
	* sysdeps/nios2/s_fmaf.c: New file.
	* sysdeps/nios2/setjmp.S: New file.
	* sysdeps/nios2/sfp-machine.h: New file.
	* sysdeps/nios2/sotruss-lib.c: New file.
	* sysdeps/nios2/stackguard-macros.h: New file.
	* sysdeps/nios2/stackinfo.h: New file.
	* sysdeps/nios2/start.S: New file.
	* sysdeps/nios2/sysdep.h: New file.
	* sysdeps/nios2/tls-macros.h: New file.
	* sysdeps/nios2/tst-audit.h: New file.
	* sysdeps/unix/sysv/linux/nios2/Implies: New file.
	* sysdeps/unix/sysv/linux/nios2/Makefile: New file.
	* sysdeps/unix/sysv/linux/nios2/Versions: New file.
	* sysdeps/unix/sysv/linux/nios2/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/nios2/bits/atomic.h: New file.
	* sysdeps/unix/sysv/linux/nios2/bits/mman.h: New file.
	* sysdeps/unix/sysv/linux/nios2/cacheflush.c: New file.
	* sysdeps/unix/sysv/linux/nios2/clone.S: New file.
	* sysdeps/unix/sysv/linux/nios2/configure: New generated file.
	* sysdeps/unix/sysv/linux/nios2/configure.ac: New file.
	* sysdeps/unix/sysv/linux/nios2/getcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/nios2/kernel_rt_sigframe.h: New file.
	* sysdeps/unix/sysv/linux/nios2/makecontext.c: New file.
	* sysdeps/unix/sysv/linux/nios2/profil-counter.h: New file.
	* sysdeps/unix/sysv/linux/nios2/setcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/nios2/sigcontextinfo.h: New file.
	* sysdeps/unix/sysv/linux/nios2/swapcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/cachectl.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/procfs.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/user.h: New file.
	* sysdeps/unix/sysv/linux/nios2/syscall.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep-cancel.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep.h: New file.
	* sysdeps/unix/sysv/linux/nios2/ucontext_i.sym: New file.
	* sysdeps/unix/sysv/linux/nios2/vfork.S: New file.
	* sysdeps/unix/sysv/linux/nios2/c++-types.data: New file.
	* sysdeps/unix/sysv/linux/nios2/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libBrokenLocale.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/localplt.data: New file.

2015-01-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #17844]
	* sysdeps/unix/sysv/linux/s390/s390-32/getutent.c
	(getutent): Use weak_alias in non SHARED case
	and default_symbol_version in SHARED case.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutent_r.c
	(getutent_r, pututline): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutid.c
	(getutid): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutid_r.c
	(getutid_r): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutline.c
	(getutline): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutline_r.c
	(getutline_r): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/updwtmp.c
	(updwtmp): Likewise.

2015-01-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #17848]
	* sysdeps/s390/s390-32/memcmp.S
	(memcmp_g5): Rename to __memcmp_g5.
	* sysdeps/s390/s390-32/memcpy.S
	(memcpy_g5): Rename to __memcpy_g5.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_mvcle) Rename to __memcpy_mvcle.
	* sysdeps/s390/s390-32/memset.S
	(memset_g5): Rename to __memset_g5.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Prefix ifunc-resolve function
	and use prefixed functions.
	* sysdeps/s390/s390-32/multiarch/memcmp.S
	(memcmp_z196): Rename to __memcmp_z196.
	(memcmp_z10): Rename to __memcmp_z10.
	(memcmp): Set alias to __memcmp_g5.
	(bcmp): Set alias to __memcmp_g5.
	* sysdeps/s390/s390-32/multiarch/memcpy.S
	(memcpy_z196): Rename to __memcpy_z196.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_z10): Rename to __memcpy_z10.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy): Set alias to __memcpy_g5.
	* sysdeps/s390/s390-32/multiarch/memset.S
	(memset_z196): Rename to __memset_z196.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_z10): Rename to __memset_z10.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_mvcle) Rename to __memset_mvcle.
	(memset): Set alias to __memset_g5.
	* sysdeps/s390/s390-64/memcmp.S
	(memcmp_z900): Rename to __memcmp_z900.
	* sysdeps/s390/s390-64/memcpy.S
	(memcpy_z900): Rename to __memcpy_z900.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_mvcle) Rename to __memcpy_mvcle.
	* sysdeps/s390/s390-64/memset.S
	(memset_z900): Rename to __memset_z900.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Prefix ifunc-resolve function
	and use prefixed functions.
	* sysdeps/s390/s390-64/multiarch/memcmp.S
	(memcmp_z196): Rename to __memcmp_z196.
	(memcmp_z10): Rename to __memcmp_z10.
	(memcmp): Set alias to __memcmp_z900.
	(bcmp): Set alias to __memcmp_z900.
	* sysdeps/s390/s390-64/multiarch/memcpy.S
	(memcpy_z196): Rename to __memcpy_z196.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_z10): Rename to __memcpy_z10.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy): Set alias to __memcpy_z900.
	* sysdeps/s390/s390-64/multiarch/memset.S
	(memset_z196): Rename to __memset_z196.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_z10): Rename to __memset_z10.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_mvcle) Rename to __memset_mvcle.
	(memset): Set alias to __memset_z900.

2015-01-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* sysdeps/powerpc/nofpu/feholdexcpt.c (__feholdexcept): Call
	__fesetenv instead of fesetenv.

2015-01-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/dl-tls.h [IS_IN (rtld)]: Define __tls_get_addr
	macro.

2015-01-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memcmp.S (memcmp): Fix performance
	regression on LE.

	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power8.S: New file.
	* sysdeps/powerpc/powerpc64/power8/strncmp.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strncmp-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strncmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c (strncmp): Likewise.
	* NEWS: Update.

2015-01-13  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcmp.S (strcmp): Optimize
	trailing byte check.

2015-01-13  David S. Miller  <davem@davemloft.net>

	* include/signal.h (__sigreturn): Guard with __USE_MISC.

2015-01-13  Roland McGrath  <roland@hack.frob.com>

	* login/logout.c (logout): Use memset rather than bzero.
	* nis/nss_compat/compat-pwd.c (getpwent_next_file): Likewise.
	* nis/nss_compat/compat-spwd.c (getspent_next_file): Likewise.
	* resolv/gethnamaddr.c (gethostbyaddr): Use memcmp rather than bcmp.
	(_gethtbyaddr): Likewise.
	* locale/programs/simple-hash.c (bcopy): Macro removed.

2015-01-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add strcmp-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c (strcmp): Add
	__strcmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/power8/strcmp.S: New file.
	* NEWS: Update.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add strncpy-power8 and stpncpy-power8 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strncpy_power8 and stpncpy_power8
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c (__stpncpy): Add
	__stpncpy_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c (strncpy): Add
	__strncpy_power8 implementation.
	* sysdeps/powerpc/powerpc64/power8/stpncpy.S: New file.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: New file.
	* NEWS: Update.

	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.S: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strncat.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strncat-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c (strcat): Add
	__strcat_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcat_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power8.c: New file:
	optimized strcat for power8.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strcpy-power8 and stpcpy-power8 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcpy_power8 and __stpcpy_power8
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power8.S: New file:
	multiarch stpcpy implementation for POWER8.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power8.S: New file;
	multiarch strcpy implementation for POWER8.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c (strcpy): Add
	__strcpy_power8 function.
	* sysdeps/powerpc/powerpc64/power8/stpcpy.S: New file: optimized
	stpcpy for POWER8.
	* sysdeps/powerpc/powerpc64/power8/strcpy.S: New file: optimized
	strcpy for POWER8.
	* NEWS: Update.

2015-01-13  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #16009]
	* string/strxfrm_l.c (STRXFRM): Allocate fixed size cache for
	weights and rules. Use do_xfrm_cached if data fits in cache,
	do_xfrm otherwise.  Moved former main loop to...
	* (do_xfrm_cached): New function.
	* (do_xfrm): Non-caching version of do_xfrm_cached. Uses
	find_idx, find_position and stack_push.
	* (find_idx): New function.
	* (find_position): Likewise.
	* localedata/sort-test.sh: Added test run for do_xfrm.
	* localedata/xfrm-test.c (main): Added command line option
	-nocache to run the test with strings that are too large for
	the STRXFRM cache.

2015-01-13  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/nptl/fork.c (__libc_fork): Provide address of futex
	variable to lll_futex_wake call, not the value itself.

2015-01-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17803]
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (twom63): Rename to
	twom64.  Adjust value to 0x1p-64L.
	(__scalblnl): Only return standard underflowing result for K <=
	-64 not K <= -63; adjust exponent for underflowing result by 64
	not 63.
	* math/libm-test.inc (scalbn_test_data): Add more tests.
	(scalbln_test_data): Likewise.

	[BZ #17834]
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (two63): Change value to
	0x1p63L.
	(__scalblnl): Get new exponent of adjusted subnormal value from ES
	not HX.
	* math/libm-test.inc (scalbn_test_data): Add more tests.
	(scalbln_test_data): Likewise.

2015-01-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>
	    Stefani Seibold  <stefani@seibold.net>

	* sysdeps/unix/sysv/linux/x86_64/Makefile [$(subdir) = elf]
	(sysdep_routines): Add dl-vdso here, ...
	* sysdeps/unix/sysv/linux/x86/Makefile [$(subdir) = elf]
	(sysdep_routines): ... not here.
	* sysdeps/unix/sysv/linux/i386/gettimeofday.c: New file: set syscall
	fallback when vDSO is not presented.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_clock_gettime):
	Define with libc_hidden_proto/libc_hidden_data_def definitions.
	(_libc_vdso_platform_setup): Rename to __vdso_platform_setup.
	* sysdeps/unix/sysv/linux/i386/init-first.c: New file: likewise.
	* sysdeps/unix/sysv/linux/i386/time.c: New file: likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/libc-vdso.h: Moved to ...
	* sysdeps/unix/sysv/linux/x86/libc-vdso.h: ... here.
	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/clock_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/gettimeofday.c: ... here.  Also added
	fallback configurable symbol when vDSO is not available.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/time.c: ... here.  Also refactored to
	be able to redefine fallback symbol when vDSO is not available.
	* sysdeps/unix/sysv/linux/x86_64/timespec_get.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/timespec_get.c: ... here.

2015-01-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/nptl/tls.h (tcbhead_t): Add tm_capable field.
	(TLS_INIT_TP): Add tm_capable initialization.
	(TLS_DEFINE_INIT_TP): Likewise.
	(THREAD_GET_TM_CAPABLE): New file: get tm_capable field value from
	TCB.
	(THREAD_SET_TM_CAPABLE): New file: set tm_capable field value in TCB.
	* sysdeps/powerpc/nptl/tcb-offsets.sym (TM_CAPABLE): Add field offset
	calculation.
	* sysdeps/powerpc/powerpc32/sysdep.h (DO_CALL): Abort hardware
	transactoion is lock elision is built and TCB tm_capable is set.
	* sysdeps/powerpc/powerpc64/sysdep.h (DO_CALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_SYSCALL_NCS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INTERNAL_SYSCALL_NCS): Likewise.
	* sysdeps/powerpc/sysdep.h (ABORT_TRANSACTION): New define.

	* sysdeps/powerpc/nptl/elide.h: New file: generic lock elision support
	for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	[pthread_rwlock_t] (__pad1): Change size to 7 bytes in 64 bits case
	and remove it for 32 bits case.
	[pthread_rwlock_t] (__rwelision): New field for lock elision.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Adjust for new lock elision field
	initialization.
	* sysdeps/unix/sysv/linux/powerpc/elision-conf.c (elision_init):
	Disable lock elision with rdlocks if elision is not available.

	* sysdeps/unix/sysv/linux/powerpc/Makefile [nptl]
	(sysdep_routines): Add lock elision objects.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	[pthread_mutex_t] (__spins): Rework to add lock elision field.
	[pthread_mutex_t] (__elision): Add field.
	[__PTHREAD_SPINS]: Adjust to init lock elision field.
	* sysdeps/unix/sysv/linux/powerpc/elision-conf.c: New file: lock
	elision definitions for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c: New file:
	implementation of lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-timed.c: New file:
	implementation of timed lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c: New file:
	implementation of trylock with lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c: New file:
	implementaion of unlock for lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/force-elision.h: New file:
	automatic enable lock elision for mutexes.
	* sysdeps/unix/sysv/linux/powerpc/htm.h: New file: hardware
	transaction execution definitions for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: New file: add TLE
	definitions.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_cond_lock.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_lock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_timedlock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_trylock.c: Likewise.
	* NEWS: Update.

2015-01-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.c: Use <> rather than ""
	for #include of <shm-directory.h>.

2015-01-09  Chung-Lin Tang  <cltang@codesourcery.com>

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Remove MIN() and
	assign raw DT_REL[A]COUNT value to ranges[0].nrelative.

2015-01-09  Matthew Fortune <matthew.fortune@imgtec.com>

	[BZ #17791]
	* NEWS: Mention bug fix.
	* sysdepsysdeps/unix/sysv/linux/microblaze/sys/user.h
	(PAGE_SHIFT, PAGE_SIZE, PAGE_MASK, NBPG, UPAGES): Remove.
	(HOST_TEXT_START_ADDR, HOST_STACK_END_ADDR): Remove.

2015-01-09  Torvald Riegel <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Delete file.

2015-01-09  Torvald Riegel <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/microblaze/pthread_once.c: Delete file.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/jmpbuf-unwind.h (_jmpbuf_sp): Declare SP as void
	pointer and cast to uintptr_t.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/nptl/tls.h (__microblaze_get_thread_area): Function
	removed.
	(READ_THREAD_POINTER): Use __microblaze_thread_area instead.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/nptl/tls.h (TLS_INIT_TP): Use NULL instead
	of 0.

2015-01-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/pthread/timer_routines.c: Fix <pthreadP.h> include to use
	<nptl/pthreadP.h> instead.
	* sysdeps/pthread/aio_notify.c: Include <signal.h> for raise decl.

	* signal/allocrtsig.c (RESERVED_SIGRT): New macro, defined to 0 if not
	already defined.
	[__SIGRTMIN] (init): Function removed.
	[__SIGRTMIN] (initialized): Variable removed.
	[!__SIGRTMIN] (current_rtmin, current_rtmax): Variables removed.
	[__SIGRTMIN] (current_rtmin, current_rtmax): Initialize to
	__SIGRTMIN + RESERVED_SIGRT and __SIGRTMAX, respectively.
	(__libc_current_sigrtmin) [__SIGRTMIN]: Don't call init.
	(__libc_current_sigrtmin) [!__SIGRTMIN]: Just return -1.
	(__libc_current_sigrtmin): Add __libc_current_sigrtmin_private alias.
	(__libc_current_sigrtmax) [__SIGRTMIN]: Don't call init.
	(__libc_current_sigrtmax) [!__SIGRTMIN]: Just return -1.
	(__libc_current_sigrtmax): Add __libc_current_sigrtmax_private alias.
	(__libc_allocate_rtsig) [__SIGRTMIN]: Don't call init.
	(__libc_allocate_rtsig): Add __libc_allocate_rtsig_private alias.
	* sysdeps/nptl/allocrtsig.c: New file.
	* sysdeps/unix/sysv/linux/allocrtsig.c: File removed.
	* sysdeps/unix/sysv/linux/testrtsig.h: File removed.
	* sysdeps/generic/testrtsig.h: File removed.

	* nptl/pthread_sigmask.c [SIGCANCEL || SIGTIMER || SIGSETXID]: #error.
	(pthread_sigmask): Call sigprocmask, not __sigprocmask.

	* nptl/nptl-init.c (pthread_functions): Conditionalize
	.ptr__nptl_setxid initialization on [SIGSETXID].

	* sysdeps/nptl/sys/procfs.h: New file.
	* nptl_db/Makefile (headers): Add it.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Don't add it.

	* nptl/pthreadP.h (check_cpuset_attr): Moved ...
	* sysdeps/unix/sysv/linux/check-cpuset.h: ... to this new file.
	* nptl/pthread_attr_setaffinity.c: Include it.
	* nptl/pthread_setattr_default_np.c: Likewise.
	* nptl/check-cpuset.h: New file.

2015-01-08  Richard Henderson  <rth@redhat.com>

	* elf/Makefile (CFLAGS-tst-execstack-mod.c): Add -Wno-trampolines
	(CFLAGS-tst-execstack-prog.c): Likewise.
	* nptl/Makefile (CFLAGS-tst-execstack-mod.c): Likewise.

2015-01-08  Chung-Lin Tang  <cltang@codesourcery.com>
	    Sandra Loosemore  <sandra@codesourcery.com>
	    Andrew Jenner  <andrew@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Nathan Sidwell  <nathan@codesourcery.com>

	* elf/elf.h (EM_ALTERA_NIOS2): New machine number for Altera Nios II.
	(DT_NIOS2_GP): New dynamic entry type for Nios II _gp address.
	(R_NIOS2_NONE,R_NIOS2_S16,R_NIOS2_U16): Define Nios II relocations.
	(R_NIOS2_PCREL16,R_NIOS2_CALL26,R_NIOS2_IMM5): Likewise.
	(R_NIOS2_CACHE_OPX,R_NIOS2_IMM6,R_NIOS2_IMM8,R_NIOS2_HI16): Likewise.
	(R_NIOS2_LO16,R_NIOS2_HIADJ16,R_NIOS2_BFD_RELOC_32): Likewise.
	(R_NIOS2_BFD_RELOC_16,R_NIOS2_BFD_RELOC_8,R_NIOS2_GPREL): Likewise.
	(R_NIOS2_GNU_VTINHERIT,R_NIOS2_GNU_VTENTRY,R_NIOS2_UJMP): Likewise.
	(R_NIOS2_CJMP,R_NIOS2_CALLR,R_NIOS2_ALIGN,R_NIOS2_GOT16): Likewise.
	(R_NIOS2_CALL16,R_NIOS2_GOTOFF_LO,R_NIOS2_GOTOFF_HA): Likewise.
	(R_NIOS2_PCREL_LO,R_NIOS2_PCREL_HA,R_NIOS2_TLS_GD16): Likewise.
	(R_NIOS2_TLS_LDM16,R_NIOS2_TLS_LDO16,R_NIOS2_TLS_IE16): Likewise.
	(R_NIOS2_TLS_LE16,R_NIOS2_TLS_DTPMOD,R_NIOS2_TLS_DTPREL): Likewise.
	(R_NIOS2_TLS_TPREL,R_NIOS2_COPY,R_NIOS2_GLOB_DAT): Likewise.
	(R_NIOS2_JUMP_SLOT,R_NIOS2_RELATIVE,R_NIOS2_GOTOFF): Likewise.
	(R_NIOS2_CALL26_NOAT,R_NIOS2_GOT_LO,R_NIOS2_GOT_HA): Likewise.
	(R_NIOS2_CALL_LO,R_NIOS2_CALL_HA): Likewise.

2015-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/futimens.c (futimens): Use address of first
	timespec struct member in syscall macro.
	* sysdeps/unix/sysv/linux/utimensat.c (utimensat): Likewise.
	* sysdeps/unix/sysv/linux/futimesat.c (futimesat): Use address of
	first timeval struct member in syscall macro.
	* sysdeps/unix/sysv/linux/utimes.c (__utimeS): Likewise.

2015-01-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__feupdateenv): Use libm_hidden_proto.
	* math/feupdateenv.c (__feupdateenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/arm/feupdateenv.c (feupdateenv): Rename to __feupdateenv
	and define as weak alias of __feupdateenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c
	(__feupdateenv): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/tile/math_private.h (__feupdateenv): New inline
	function.
	* sysdeps/x86_64/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/generic/math_private.h (default_libc_feupdateenv): Call
	__feupdateenv instead of feupdateenv.
	(default_libc_feupdateenv_test): Likewise.
	(libc_feresetround_ctx): Likewise.

2015-01-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/mips/pread.c (__libc_pread): Fix function
	prototype.

2015-01-07  Chris Metcalf  <cmetcalf@ezchip.com>

	* posix/regcomp.c (parse_bracket_exp): Initialize type to
	COLL_SYM in a couple of places to avoid uninitialized variable
	wanings on tilegx gcc 4.8.2.

2015-01-07  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strcpy.S: New file.
	* sysdeps/aarch64/stpcpy.S: New file.
	* NEWS: Updated.

2015-01-07  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strrchr.S: New file.
	* NEWS: Updated.

2015-01-07  Eric Biggers  <ebiggers3@gmail.com>

	[BZ #17658]
	* stdlib/setenv.c: Fix memory leak when setting large,
	duplicate string.

2015-01-06  Vladimir A. Nazarenko  <naszar@ya.ru>

	[BZ #17273]
	* misc/mntent_r.c (__getmntent_r): Cut off trailing spaces
	and tabs from buffer before parsing fstab entry.
	* misc/tst-mntent.c (main): Add test for mount entry with
	trailing spaces and tabs.

2015-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fesetround): Declare.  Use libm_hidden_proto.
	* math/fesetround.c (fesetround): Rename to __fesetround and
	define as weak alias of __fesetround.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/alpha/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/arm/fesetround.c (fesetround): Likewise.
	* sysdeps/hppa/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/i386/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/ia64/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/m68k/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/mips/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fesetround): Rename to
	__fesetround_inline.
	* sysdeps/powerpc/fpu/fenv_private.h (libc_fesetround_ppc): Call
	__fesetround_inline instead of __fesetround.
	* sysdeps/powerpc/fpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.  Call __fesetround_inline instead of
	__fesetround.
	* sysdeps/powerpc/nofpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetround.c (fesetround):
	Likewise.
	* sysdeps/s390/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sparc/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/tile/math_private.h (__fesetround): New inline function.
	* sysdeps/x86_64/fpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.
	* sysdeps/generic/math_private.h (default_libc_fesetround): Call
	__fesetround instead of fesetround.
	(default_libc_feholdexcept_setround): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feholdsetround_noex_ctx): Likewise.

	[BZ #17748]
	* include/fenv.h (__fesetenv): Use libm_hidden_proto.
	* math/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv
	and define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/alpha/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/arm/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/i386/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/ia64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/m68k/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/mips/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetenv.c (__fesetenv):
	Likewise.
	* sysdeps/s390/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/sparc/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/tile/math_private.h (__fesetenv): New inline function.
	* sysdeps/x86_64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv
	and define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/generic/math_private.h (default_libc_fesetenv): Use
	__fesetenv instead of fesetenv.
	(libc_feresetround_noex_ctx): Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/hppa/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c
	(__feupdateenv): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/x86_64/fpu/feupdateenv.c (__feupdateenv): Likewise.

2015-01-06  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #17806]
	* resolv/res_init.c (__res_iclose): Only clear nsinit if the
	addresses have been freed.

2015-01-06  Aurelien Jarno  <aurelien@aurel32.net>

	* resolv/res_init.c (__res_vinit): Improve comments about nserv
	and nservall.

2015-01-06  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request):
	Clean up check_pf allocation pattern. addresses

2015-01-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/pthread_cancel.c (pthread_cancel): Use ANSI prototype.
	* nptl/pthread_cond_timedwait.c (__pthread_cond_timedwait): Likewise.
	* nptl/pthread_cond_wait.c (__pthread_cond_wait): Likewise.
	* nptl/pthread_exit.c (__pthread_exit): Likewise.
	* nptl/pthread_join.c (pthread_join): Likewise.
	* nptl/pthread_timedjoin.c (pthread_timedjoin_np): Likewise.
	* sysdeps/posix/waitid.c (__waitid): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c
	(__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c
	(__libc_pwrite64): Likewsie.
	* sysdeps/unix/sysv/linux/mips/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c (__libc_msgrcv): Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c (__libc_msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c (__libc_pwrite):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c
	(__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/preadv.c (PREADV): Likewise.
	* sysdeps/unix/sysv/linux/pthread_kill.c (__pthread_kill): Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c (__libc_pwritev): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c (__libc_write64): Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/unix/sysv/linux/sigtimedwait.c (__sigtimedwait): Likewise.
	* sysdeps/unix/sysv/linux/sigwait.c (__sigwait): Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c (__sigwaitinfo): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c (__libc_msgrcv):
	Likewise.

2015-01-06  Andrew Senkevich  <andrew.n.senkevich@gmail.com>

	* math/Makefile (CFLAGS-test-float.c): Remove -frounding-math.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CPPFLAGS-test-ifloat.c): Likewise.
	(CPPFLAGS-test-idouble.c): Likewise.
	(CPPFLAGS-test-ildoubl.c): Likewise.
	(CFLAGS-test-test-fenv.c): Remove variable.
	(CFLAGS-test-misc.c): Likewise.

2015-01-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17797]
	* bits/time.h (CLOCKS_PER_SEC): Changed to ((clock_t) 1000000).
	* sysdeps/unix/sysv/linux/bits/time.h (CLOCKS_PER_SEC): Likewise.
	* sysdeps/unix/sysv/linux/clock.c (clock): _Static_assert
	CLOCKS_PER_SEC == 1000000.
	* time/clocktest.c (main): Replace %ld with %jd and cast to
	intmax_t.

2015-01-05  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/unwind-resume.h: New file.
	* sysdeps/gnu/unwind-resume.c: Include it.
	(libgcc_s_personality): Use PERSONALITY_PROTO macro for the prototype.
	(__gcc_personality_v0): Likewise, and PERSONALITY_ARGS for the callee
	argument list.
	(libgcc_s_resume): Variable renamed to __libgcc_s_resume, made hidden
	global rather than static.
	(_Unwind_Resume): Update user.
	Conditionalize definition on [!HAVE_ARCH_UNWIND_RESUME].
	(init): Likewise.  Renamed to __libgcc_s_init, made hidden global
	rather than static.  Add __attribute__ ((cold)).
	(_Unwind_Resume, __gcc_personality_v0): Update callers.
	* sysdeps/nptl/unwind-forcedunwind.c: Likewise.
	* sysdeps/arm/arm-unwind-resume.S: New file.
	* sysdeps/arm/rt-arm-unwind-resume.S: New file.
	* sysdeps/arm/pt-arm-unwind-resume.S: New file.
	* sysdeps/arm/Makefile [$(subdir) = csu]
	(sysdep_routines, shared-only-routines): Add arm-unwind-resume.
	[$(subdir) = rt] (librt-sysdep_routines, librt-shared-only-routines):
	Add rt-arm-unwind-resume.
	[$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines):
	Add pt-arm-unwind-resume.
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c: File removed.
	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c: File removed.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__feholdexcept): Declare.  Use
	libm_hidden_proto.
	* math/feholdexcpt.c (feholdexcept): Rename to __feholdexcept and
	define as weak alias of __feholdexcept.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/alpha/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/arm/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/hppa/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/ia64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/m68k/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/mips/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/nofpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feholdexcpt.c
	(feholdexcept): Likewise.
	* sysdeps/s390/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sparc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/x86_64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/generic/math_private.h (default_libc_feholdexcept): Use
	__feholdexcept instead of feholdexcept.
	(default_libc_feholdexcept_setround): Likewise.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memset.S (memset): Modify for mips32r6/mips64r6
	to avoid using stl/str to align destination.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S: Add support for mips32r6/mips64r6.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17796]
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise.c
	[!SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3)] (posix_fadvise64):
	Define as weak alias not strong alias.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/dl-machine.h (elf_machine_load_address): Replace
	bltzal with addiupc.
	(RTLD_START): Ditto.

2015-01-05  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/bits/libc-vdso.h: Fix return type
	for __vdso_* functions in declarations.
	* sysdeps/unix/sysv/linux/tile/init-first.c: Likewise for
	definitions.
	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_VSYSCALL,
	INTERNAL_VSYSCALL): Use struct return types to check for error.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c [!defined _LP64
	&& REGISTER_CAST_INT32_TO_INT64]: Provide explicit lround()
	function with cast from llround().
	* sysdeps/tile/sysdep.h (REGISTER_CAST_INT32_TO_INT64): Define.
	* sysdeps/x86_64/x32/sysdep.h (REGISTER_CAST_INT32_TO_INT64):
	Define.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17793]
	* sysdeps/unix/sysv/linux/arm/posix_fadvise64.c (posix_fadvise64):
	Define as weak alias not strong alias.

	[BZ #17635]
	* ctype/ctype-c99.c: New file.  isblank implementation moved from
	...
	* ctype/ctype-extn.c: ... here.
	(__isblank_l): Move to ...
	* ctype/ctype-c99_l.c: ... here.  New file.
	* ctype/Makefile (routines): Add ctype-c99 and ctype-c99_l.
	* conform/Makefile (test-xfail-ISO99/ctype.h/linknamespace):
	Remove variable.
	(test-xfail-ISO11/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG3/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG4/ctype.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ctype.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/ctype.h/linknamespace): Likewise.

	[BZ #17777]
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fadvise.c
	(posix_fadvise64): Define as weak alias not strong alias.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate64): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/fcntl.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/fcntl.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/mqueue.h/linknamespace): Likewise.

2015-01-05  Matthew Fortune  <matthew.fortune@imgtec.com>

	[BZ #16191]
	* NEWS: Mention bug fix.
	* sysdeps/unix/sysv/linux/mips/sys/user.h (PAGE_SHIFT): Remove.
	(PAGE_SIZE, PAGE_MASK, NBPG, UPAGES): Likewise.
	(HOST_TEXT_START_ADDR, HOST_DATA_START_ADDR): Likewise.
	(HOST_STACK_END_ADDR): Likewise.

2015-01-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fegetround): Declare.  Use libm_hidden_proto.
	* math/fegetround.c (fegetround): Rename to __fegetround and
	define as weak alias of __fegetround.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/alpha/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/arm/fegetround.c (fegetround): Likewise.
	* sysdeps/hppa/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/i386/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/ia64/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/m68k/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/mips/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/fpu/fegetround.c (fegetround): Likewise.
	Undefine after rather than before function definition; use
	parentheses around function name in definition.
	(__fegetround): Also undefine macro after function definition.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.  Do not undefine as macro.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c (fegetround):
	Likewise.
	* sysdeps/s390/fpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sparc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/tile/math_private.h (__fegetround): New inline function.
	* sysdeps/x86_64/fpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Use
	__fegetround instead of fegetround.

	[BZ #17782]
	* sysdeps/unix/sysv/linux/mips/bits/termios.h (TIOCSER_TEMT):
	Condition macro definition on [__USE_MISC].

	[BZ #17781]
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h
	(struct sigaction): Change type of sa_flags field to int.

	[BZ #17780]
	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h (struct flock)
	[!__USE_FILE_OFFSET64 && _MIPS_SIM != _ABI64]: Rename pad field to
	__glibc_reserved0.

	* nptl/version.c (banner): Use single year in copyright notice.

	* NEWS: Update copyright dates.
	* catgets/gencat.c (print_version): Likewise.
	* csu/version.c (banner): Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c (print_version): Likewise.
	* debug/xtrace.sh (do_version): Likewise.
	* elf/ldconfig.c (print_version): Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c (print_version): Likewise.
	* elf/sotruss.sh: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c (print_version): Likewise.
	* iconv/iconvconfig.c (print_version): Likewise.
	* locale/programs/locale.c (print_version): Likewise.
	* locale/programs/localedef.c (print_version): Likewise.
	* login/programs/pt_chown.c (print_version): Likewise.
	* malloc/memusage.sh (do_version): Likewise.
	* malloc/memusagestat.c (print_version): Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nptl/version.c (banner): Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c (print_version): Likewise.
	* nss/makedb.c (print_version): Likewise.
	* posix/getconf.c (main): Likewise.
	* scripts/test-installation.pl: Likewise.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Likewise.

2015-01-02  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/armv7/configure: Removed.
	* sysdeps/arm/armv7/configure.ac: Likewise.

2015-01-02  Joseph Myers  <joseph@codesourcery.com>

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2015-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/gen-posix-conf-vars.awk (END): Don't use sprintf.

2014-12-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fegetenv): Use libm_hidden_proto.
	* math/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv
	and define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/alpha/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/arm/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/i386/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/ia64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/m68k/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/mips/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/powerpc/fpu/fegetenv.c (__fegetenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fegetenv.c (__fegetenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c (__fegetenv):
	Likewise.
	* sysdeps/s390/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/sparc/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/tile/math_private.h (__fegetenv): New inline function.
	* sysdeps/x86_64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv
	and define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/generic/math_private.h (libc_feholdsetround_ctx): Use
	__fegetenv instead of fegetenv.
	(libc_feholdsetround_noex_ctx): Likewise.

2014-12-31  Matthew Fortune  <matthew.fortune@imgtec.com>

	* elf/elf.h (PT_MIPS_ABIFLAGS): Define.
	(Elf_MIPS_ABIFlags_v0): New structure.
	(EF_MIPS_FP64): Define.
	(MIPS_AFL_REG_NONE, MIPS_AFL_REG_32, MIPS_AFL_REG_64): Likewise.
	(MIPS_AFL_REG_128, MIPS_AFL_ASE_DSP, MIPS_AFL_ASE_DSP64): Likewise.
	(MIPS_AFL_ASE_DSPR2, MIPS_AFL_ASE_EVA, MIPS_AFL_ASE_MCU): Likewise.
	(MIPS_AFL_ASE_MDMX, MIPS_AFL_ASE_MIPS3D, MIPS_AFL_ASE_MT): Likewise.
	(MIPS_AFL_ASE_SMARTMIPS, MIPS_AFL_ASE_VIRT): Likewise.
	(MIPS_AFL_ASE_VIRT64, MIPS_AFL_ASE_MSA, MIPS_AFL_ASE_MSA64): Likewise.
	(MIPS_AFL_ASE_MIPS16, MIPS_AFL_ASE_MICROMIPS): Likewise.
	(MIPS_AFL_ASE_XPA, MIPS_AFL_EXT_XLR, MIPS_AFL_EXT_OCTEON2): Likewise.
	(MIPS_AFL_EXT_OCTEONP, MIPS_AFL_EXT_LOONGSON_3A): Likewise.
	(MIPS_AFL_EXT_OCTEON, MIPS_AFL_EXT_5900, MIPS_AFL_EXT_4010): Likewise.
	(MIPS_AFL_EXT_4100, MIPS_AFL_EXT_3900, MIPS_AFL_EXT_10000): Likewise.
	(MIPS_AFL_EXT_SB1, MIPS_AFL_EXT_4111, MIPS_AFL_EXT_4120): Likewise.
	(MIPS_AFL_EXT_5400, MIPS_AFL_EXT_5500): Likewise.
	(MIPS_AFL_EXT_LOONGSON_2E, MIPS_AFL_EXT_LOONGSON_2F): Likewise.
	(Val_GNU_MIPS_ABI_FP_ANY, Val_GNU_MIPS_ABI_FP_DOUBLE): New enum values.
	(Val_GNU_MIPS_ABI_FP_SINGLE, Val_GNU_MIPS_ABI_FP_SOFT): Likewise.
	(Val_GNU_MIPS_ABI_FP_OLD_64, Val_GNU_MIPS_ABI_FP_XX): Likewise.
	(Val_GNU_MIPS_ABI_FP_64, Val_GNU_MIPS_ABI_FP_64A): Likewise.
	(Val_GNU_MIPS_ABI_FP_MAX): Likewise.
	* sysdeps/mips/Makefile [subdir=elf]: Add tst-abi-interlink,
	tst-mode-switch-1, tst-mode-switch-2, tst-mode-switch-3 tests.
	* sysdeps/mips/bits/linkmap.h (struct link_map_machine): Add fpmode
	field.
	* sysdeps/mips/dl-machine.h (elf_machine_matches_host): Reject
	EF_MIPS_FP64.
	* sysdeps/mips/dl-machine-reject-phdr.h: New file.
	* sysdeps/mips/tst-abi-fp32mod.c: Likewise.
	* sysdeps/mips/tst-abi-fpxxmod.c: Likewise.
	* sysdeps/mips/tst-abi-fpxxomod.c: Likewise.
	* sysdeps/mips/tst-abi-fp64mod.c: Likewise.
	* sysdeps/mips/tst-abi-fp64amod.c: Likewise.
	* sysdeps/mips/tst-abi-interlink.c: Likewise.
	* sysdeps/mips/tst-mode-switch-1.c: Likewise.
	* sysdeps/mips/tst-mode-switch-2.c: Likewise.
	* sysdeps/mips/tst-mode-switch-3.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/configure.ac (o32-fpabi): Define to
	record the current FP ABI extension.
	(mips-mode-switch): Define to show if kernel headers support mode
	switching.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerate.
	* sysdeps/unix/sysv/linux/mips/ldsodefs.h: Increase maximum
	supported SYSV ABI version to 3.
	* sysdeps/unix/sysv/linux/mips/libc-abis: Add new MIPS_O32_FP64
	feature.

2014-12-31  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcpy.S (strcpy): Optimize unaligned
	path.
	* benchtests/bench-strcpy.c (test_main): Add more unaligned inputs.

2014-12-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/fenvinline.h (fegetround): Rename macro to
	__fegetround and redefine to call __fegetround.  Remove condition
	on [!__NO_MATH_INLINES].
	* sysdeps/powerpc/fpu/fenv_libc.h (__fegetround): Remove inline
	function.
	* sysdeps/powerpc/nofpu/fenv_libc.h: Remove file.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h (__fegetround):
	Remove macro.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	(__llrintl): Call fegetround instead of __fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c: Likewise.
	(__lrintl): Call fegetround instead of __fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c: Likewise.
	(__rintl): Call fegetround instead of __fegetround.

2014-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/gen-posix-conf-vars.awk: Don't use multi-dimensional
	arrays.

2014-12-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17775]
	* sysdeps/i386/dl-machine.h (PI_STATIC_AND_HIDDEN): Removed.
	(elf_machine_dynamic) [!PI_STATIC_AND_HIDDEN]: Likewise.
	(elf_machine_load_address) [!PI_STATIC_AND_HIDDEN]: Likewise.

2014-12-30  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/i386/tls-macros.h: Include <features.h>.
	(TLS_LE): Use non-PIC version for GCC >= 5.0.
	(TLS_IE): Likewise.
	(TLS_LD): Likewise.
	(TLS_GD): Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (check_consistency): Don't
	define for GCC >= 5.0.

2014-12-30  Chris Metcalf  <cmetcalf@ezchip.com>

	* math/test-fenv.c (test_single_exception, set_single_exc,
	feenv_nomask_test, feenv_mask_test, feexcp_nomask_test,
	feexcp_mask_test, feenable_test, fe_single_test): Add
	[!FE_ALL_EXCEPT] test so these routines are not compiled in the
	case where they are not used.
	* math/libm-test.inc: Likewise.
	* setjmp/test-setjmp-fp.c: Mark attribute ((unused)) on variable
	unused in the absence of FP rounding/exception support.
	* stdio-common/tst-printf-round.c: Likewise.
	* stdlib/tst-strtod-round.c: Likewise.
	* stdlib/tst-strtod-underflow.c: Likewise.

2014-12-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17723]
	* include/fenv.h (__feraiseexcept): Use libm_hidden_proto.
	* math/fraiseexcpt.c (__feraiseexcept): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/arm/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/hppa/fpu/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/ia64/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/m68k/coldfire/fpu/fraiseexcpt.c (feraiseexcept):
	Likewise.
	* sysdeps/microblaze/math_private.h (__feraiseexcept): New macro.
	* sysdeps/mips/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fraiseexcpt.c (__feraiseexcept): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcpt.c
	(__feraiseexcept): Likewise.
	* sysdeps/s390/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/tile/math_private.h (__feraiseexcept): New macro.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S (__feraiseexcept):
	Use libm_hidden_def.
	* sysdeps/x86_64/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	(feraiseexcept): Define as weak not strong alias.  Use
	libm_hidden_weak.
	* sysdeps/x86/fpu/bits/fenv.h (__feraiseexcept_invalid_divbyzero):
	New inline function.  Factored out of ...
	(feraiseexcept): ... here.  Use __feraiseexcept_invalid_divbyzero.
	* sysdeps/x86/fpu/include/bits/fenv.h: New file.
	* math/e_scalb.c (invalid_fn): Call __feraiseexcept instead of
	feraiseexcept.
	* math/w_acos.c (__acos): Likewise.
	* math/w_asin.c (__asin): Likewise.
	* math/w_ilogb.c (__ilogb): Likewise.
	* math/w_j0.c (y0): Likewise.
	* math/w_j1.c (y1): Likewise.
	* math/w_jn.c (yn): Likewise.
	* math/w_log.c (__log): Likewise.
	* math/w_log10.c (__log10): Likewise.
	* sysdeps/aarch64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/aarch64/fpu/math_private.h
	(libc_feupdateenv_test_aarch64): Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/arm/fenv_private.h (libc_feupdateenv_test_vfp): Likewise.
	* sysdeps/arm/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Likewise.

2014-12-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17732]
	* io/test-utime.c (main): Replace %ld with %jd and cast to
	intmax_t.
	* libio/tst-ftell-active-handler.c (do_append_test): Likewise.
	* nptl/tst-mutex5.c: Include <stdint.h>.
	(do_test): Replace %ld with %jd and cast to intmax_t.
	* posix/tst-regex.c (run_test): Likewise.
	(run_test_backwards): Likewise.
	* rt/tst-clock.c: Include <stdint.h>.
	(clock_test): Replace %ld with %jd and cast to intmax_t.
	* rt/tst-cpuclock1.c: Include <stdint.h>.
	(do_test): Replace %lu with %ju and cast to uintmax_t.
	* rt/tst-cpuclock2.c: Include <stdint.h>.
	(do_test): Replace %lu with %ju and cast to uintmax_t.
	* rt/tst-mqueue1.c: Include <stdint.h>.
	(check_attrs): Replace %ld with %jd and cast to intmax_t.
	* rt/tst-mqueue3.c (fct): Replace %ld with %jd and cast to
	intmax_t.
	* rt/tst-mqueue4.c (do_test): Likewise.
	* rt/tst-timer4.c: Include <stdint.h>.
	(check_ts): Replace %ld with %jd and cast to intmax_t.
	(do_test): Likewise.
	* stdio-common/tst-fmemopen2.c (do_test): Replace %ld with %jd
	and cast to intmax_t.
	* sysdeps/pthread/tst-timer.c (main): Likewise.
	* time/clocktest.c (main): Likewise.
	* time/tst-posixtz.c (do_test): Likewise.
	* timezone/tst-timezone.c (main): Likewise.

2014-12-30  Andrew Senkevich  <andrew.senkevich@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/bcopy-sse2-unaligned.S: New file.
	* sysdeps/i386/i686/multiarch/memcpy-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Select the sse2_unaligned
	version if bit_Fast_Unaligned_Load is set.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	bcopy-sse2-unaligned, memcpy-sse2-unaligned,
	memmove-sse2-unaligned and mempcpy-sse2-unaligned.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c (MAX_IFUNC): Set
	to 4.
	(__libc_ifunc_impl_list): Test __bcopy_sse2_unaligned,
	__memmove_chk_sse2_unaligned, __memmove_sse2_unaligned,
	__memcpy_chk_sse2_unaligned, __memcpy_sse2_unaligned,
	__mempcpy_chk_sse2_unaligned, and __mempcpy_sse2_unaligned.

2014-12-29  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tst-setgetname.c (do_test): Use #ifndef
	instead of #if to avoid a Wundef warning.
	* stdlib/tst-limits.c (do_test): Likewise.

	* sysdeps/tile/math_private.h (fetestexcept): Add macro to
	parallel other exception macros.
	(fegetenv): Convert from macro to extern inline so that it applies
	retroactively to inline functions already seen by the compiler.
	(fesetenv, feupdateenv, fegetround, fesetround): Likewise.

	* posix/Makefile (before-compile): Use $(objpfx) for
	posix-conf-vars-def.h.

2014-12-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* posix/getconf.c (main): Use size_t for type of I.
	* scripts-gen-posix-conf-vars.awk (END): Use size_t for type of
	NSPEC.

	* posix/posix-conf-vars.list (SPEC:XBS5): Add sysconf prefix.
	* posix/confstr.c: Define NEED_SPEC_ARRAY to 0.
	* posix/posix-envs.def: Likewise.
	* sysdeps/posix/sysconf.c: Likewise.
	* posix/getconf.c: Define NEED_SPEC_ARRAY to 1.
	(specs): Remove array.
	* scripts/gen-posix-conf-vars.awk: Support generation of specs
	array.

	* posix/posix-conf-vars.list: Add _POSIX sysconf namespace.
	* sysdeps/posix/sysconf.c: Include posix-conf-vars.h.
	(__sysconf): Use CONF_IS_* macros.

	* posix/Makefile (before-compile): Add posix-conf-vars-def.h.
	($(objpfx)posix-conf-vars-def.h): New target.
	* posix/posix-conf-vars.list: New file.
	* posix/posix-conf-vars.h: New file.
	* posix/confstr.c: Include posix-conf-vars.h.
	(confstr): Use CONF_IS_* macros.
	* posix/posix-envs.def: Include posix-conf-vars.h.  Use
	CONF_IS_* macros.
	* scripts/gen-posix-conf-vars.awk: New file.

2014-12-26  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/math_private.h (fegetenv, fesetenv, feupdateenv,
	fegetround): Add no-op macros to avoid linknamespace issues.

	* sysdeps/unix/sysv/linux/clock_settime.c (SYSDEP_SETTIME): Remove
	definitions of INTERNAL_VSYSCALL and INLINE_VSYSCALL.

	* sysdeps/unix/sysv/linux/tile/sysdep.h
	(HAVE_CLOCK_GETTIME_VSYSCALL): Move definition out of
	assembly-specific section to avoid a redefinition warning.

	* sysdeps/tile/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Cast to
	long before casting to pointer to avoid a cast warning.

2014-12-23  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/Implies: New file.

2014-12-23  Richard Earnshaw  <rearnsha@arm.com>

	* string/stpcpy.c (__stpcpy): Rewrite using strlen and memcpy.

2014-12-23  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/run-iconv-test.sh: Actually test iconv modules.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMES): Do
	not define.
	* sysdeps/unix/sysv/linux/utimes.c: Do not include
	<kernel-features.h>.
	(__utimes) [__NR_utimes]: Make code unconditional.
	(__utimes) [!__ASSUME_UTIMES]: Remove conditional code.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_UTIMES): Do not undefine.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_UTIMES): Define for [__LINUX_KERNEL_VERSION >= 0x030e00]
	instead of undefining for [__LINUX_KERNEL_VERSION < 0x030e00].
	* sysdeps/unix/sysv/linux/hppa/utimes.c: New file.

2014-12-22  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S: Fix preprocessor indentation.

2014-12-22  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17747]
	* math/w_j0.c [defined NO_LONG_DOUBLE] (j0, y0): Convert strong
	alias to weak alias for j0l, y0l.
	* math/w_j1.c [defined NO_LONG_DOUBLE] (j1, y1): Likewise.
	* math/w_jn.c [defined NO_LONG_DOUBLE] (jn, yn): Likewise.

	[BZ #17746]
	* sysdeps/tile/tilegx/strstr.c (STRSTR2): Remove implicit boolean
	conversion.

2014-12-22  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/unix/mips/sysdep.h (__mips_isa_rev): Set
	to zero if not already defined.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17724]
	* sysdeps/ieee754/k_standard.c: Don't include <float.h>.
	(__kernel_standard_f): Remove.  Moved to k_standardf.c.
	(__kernel_standard_l): Remove.  Moved to k_standardl.c with
	(char *) casts added.
	* sysdeps/ieee754/k_standardf.c: New file.
	* sysdeps/ieee754/k_standardl.c: Likewise.
	* math/Makefile (libm-support): Remove k_standard.
	(libm-calls): Add k_standard.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept):
	Optimize to avoid an unnecessary FPCR read.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv):
	Optimize to reduce FPCR/FPSR accesses.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/ftestexcept.c (fetestexcept):
	Call libc_fetestexcept_aarch64.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fesetround.c (fesetround):
	Call libc_fesetround_aarch64.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17733]
	* sysdeps/unix/sysv/linux/bind.S (NO_WEAK_ALIAS): Do not define.
	(__bind): Do not define as weak alias.
	* sysdeps/unix/sysv/linux/getsockname.S (NO_WEAK_ALIAS): Do not
	define.
	(__getsockname): Do not define as weak alias.

2014-12-22  Will Newton  <will.newton@linaro.org>

	* manual/install.texi: Document that we require bison 2.7
	or above.
	* INSTALL: Regenerate.
	* configure.ac: Use AC_CHECK_PROG_VER instead of
	AC_PATH_PROG when checking for bison and check for
	version 2.7 or above.
	* configure: Regenerate.

2014-12-21  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17745]
	* sysdeps/tile/ffs.c (__ffs): Moved ffsll definition...
	* sysdeps/tile/ffsll.c (ffsll): To here.

	* sysdeps/unix/sysv/linux/tile/localplt.data: Removed.

2014-12-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tls.c (__tls_get_addr): Provide the hidden definition
	if not defined.
	* sysdeps/i386/dl-tls.h (___tls_get_addr): Provide the hidden
	definition.
	* sysdeps/i386/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Call the
	hidden ___tls_get_addr.
	* sysdeps/x86_64/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Call the
	hidden __tls_get_addr.
	* sysdeps/generic/localplt.data (__tls_get_addr): Removed.
	* sysdeps/unix/sysv/linux/i386/localplt.data (___tls_get_addr):
	Likewise.

2014-12-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/dl-machine.h (RTLD_START): Remove @PLTPC from
	_dl_init call.

2014-12-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/dl-machine.h (_dl_start_user): Remove @PLT
	from "call _dl_init@PLT".
	* sysdeps/x86_64/dl-machine.h (_dl_start_user): Likewise.

2014-12-21  Anders Kaseorg  <andersk@mit.edu>

	* manual/search.texi: (Array Sort Function): Clarify stable sorting
	guarantees.

2014-12-20  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/localplt.data: New file.

2014-12-19  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17744]
	* sysdeps/tile/tilegx/strstr.c (STRSTR): Call __strnlen, not
	strnlen.

2014-12-19  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/addmul_1.S (__mpn_addmul_1): Use mulu/muhu instead
	of multu on MIPSr6.
	* sysdeps/mips/mul_1.S (__mpn_mul_1): Ditto.
	* sysdeps/mips/submul_1.S (__mpn_submul_1): Ditto.
	* sysdeps/mips/mips64/addmul_1.S (__mpn_addmul_1): Ditto.
	* sysdeps/mips/mips64/mul_1.S (__mpn_mul_1): Ditto.
	* sysdeps/mips/mips64/submul_1.S (__mpn_submul_1): Ditto.

2014-12-19  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/sys/asm.h (PTR_ADDU): Use addu on mips32r6/mips64r6.
	(PTR_ADDIU): Use addiu for mips32r6/mips64r6.
	(PTR_SUBU): Use subu for mips32r6/mips64r6.
	(PTR_SUBIU): Use subu for mips32r6/mips64r6 (subiu does not exist).
	* sysdeps/mips/machine-gmon.h (PTR_ADDU_STRING) Use addu for
	mips32r6/mips64r6.
	(PTR_SUBU_STRING) Use subu for mips32r6/mips64r6.

2014-12-19  Ondřej Bílka  <neleai@seznam.cz>

	* string/strncat.c (STRNCAT): Simplify implementation.

2014-12-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_neg.c (_Q_neg): Use a union to
	access the quad as both a long double and as a series of 4 words.

	* get-dynamic-info.h (elf_get_dynamic_info): Ignore -Warray-bounds for a
	link_map->l_info array access.

2014-12-19  Chris Metcalf  <cmetcalf@ezchip.com>

	* iconvdata/tst-loading.c (TIMEOUT): Increase timeout 10 sec.

	* math/atest-exp.c (TIMEOUT): Increase timeout to 10 sec.
	* math/atest-exp2.c (TIMEOUT): Likewise.
	* math/atest-sincos.c (TIMEOUT): Likewise.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/Makefile (CFLAGS-s_llround.c): Replace
	-Wno-error with -fno-builtin-lround.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/i386/lowlevellock-futex.h: New file.
	Contains futex constants and functions moved over from ...
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: ... here.  Include
	<lowlevellock-futex.h>.
	(lll_wait_tid): Use lll_futex_wait instead of assembly code.
	(lll_timedwait_tid): Add comments and parentheses around macro
	arguments.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Include
	<lowlevellock-futex.h>.  Remove FUTEX_* constants defined there.
	(__lll_private_flag): Remove.
	(lll_futex_wait): Likewise.
	(lll_futex_timed_wait): Likewise.
	(lll_futex_wake): Likewise.
	(lll_futex_requeue): Likewise.
	(lll_wait_tid): Use lll_futex_wait instead of assembly code.
	(__lll_timedwait_tid): Spell out argument names.
	(lll_timedwait_tid): Add comments and parentheses around macro
	arguments.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Make FUTEX_* constants,
	LLL_SHARED and LLL_PRIVATE usable from assembly code.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: Remove file.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_post.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: Likewise.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/Makefile: New file.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/ldbl2mpn.c (__mpn_extract_long_double): Replace
	1L with (mp_limb_t) 1.

2014-12-17  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nptl/fork.c (__fork_generation_pointer): Variable moved ...
	* nptl/libc_pthread_init.c: ... here.
	* sysdeps/nptl/fork.c (__fork_handlers): Variable moved ...
	* nptl/register-atfork.c: ... here.

	* sysdeps/nptl/gai_misc.h (__gai_start_notify_thread):
	Use pthread_sigmask rather than INTERNAL_SYSCALL.
	Use assert_perror to check its return value.
	(__gai_create_helper_thread): Likewise.

	* inet/if_index.c (__if_freenameindex): Add libc_hidden_def.

	* malloc/malloc.c (alloc_perturb, free_perturb): Remove inline keyword.

2014-12-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17725]
	* sysdeps/generic/profil-counter.h (profil_counter): Rename to
	__profil_counter.
	* sysdeps/unix/sysv/linux/hppa/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/sh/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/arm/profil-counter.h (profil_counter):
	Likewise.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/unix/sysv/linux/sparc/sparc32/profil-counter.h
	(profil_counter): Rename to __profil_counter.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/unix/sysv/linux/sparc/sparc64/profil-counter.h
	(profil_counter): Rename to __profil_counter.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/posix/profil.c: Update comment referring to
	profil_counter.
	(__profil): Use __profil_counter instead of profil_counter.
	* sysdeps/posix/sprofil.c (profil_counter): Rename to
	__profil_counter.  Use __profil_counter_ushort and
	__profil_counter_uint in definitions.
	(__sprofil): Use __profil_counter_uint and __profil_counter_ushort
	instead of profil_counter_uint and profil_counter_ushort.

	[BZ #17722]
	* inet/inet_mkadr.c (inet_makeaddr): Rename to __inet_makeaddr and
	define as weak alias of __inet_makeaddr.
	* resolv/inet_addr.c (inet_addr): Rename to __inet_addr and define
	as weak alias of __inet_addr.
	* resolv/inet_pton.c (inet_pton): Rename to __inet_pton and define
	as weak alias of __inet_pton.  Use libc_hidden_weak.
	* include/arpa/inet.h (__inet_pton): Declare.  Use
	libc_hidden_proto.
	(inet_makeaddr): Don't use libc_hidden_proto.
	(__inet_makeaddr): Declare.  Use libc_hidden_proto.
	* resolv/res_init.c (__res_vinit): Use __inet_pton instead of
	inet_pton.  Use __inet_makeaddr instead of inet_makeaddr.
	* conform/Makefile (test-xfail-POSIX/pthread.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX/sched.h/linknamespace): Likewise.
	(test-xfail-POSIX/time.h/linknamespace): Likewise.

2014-12-17  Steve Ellcey  <sellcey@imgtec.com>

	* inet/getnetgrent_r.c: Move while loop to be inside if statement.

2014-12-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* stdio-common/bug-vfprintf-nargs.c (do_test):
	Cast value to intptr_t to avoid format warning
	for usage with PRIdPTR printing macro.

2014-12-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* libio/tst-widetext.c (do_test):
	Use format type %td instead of %Zd for ptrdiff_t
	in order to avoid format warning.

2014-12-17  Andreas Schwab  <schwab@suse.de>

	* nscd/mem.c (gc): Add size_t cast to match printf format.

2014-12-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/gnu/unwind-resume.c: #include <sysdep.h>.
	(init): Apply PTR_MANGLE to pointers before storing them.
	(_Unwind_Resume, __gcc_personality_v0): Apply PTR_DEMANGLE to pointers
	before using them.

2014-12-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17719]
	* sysdeps/x86_64/memrchr.S (memrchr): Rename to __memrchr and
	define as weak alias of __memrchr.
	(__memrchr): Do not define as strong alias of memrchr.
	* conform/Makefile (test-xfail-XPG4/libgen.h/linknamespace):
	Remove variable.
	(test-xfail-UNIX98/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/libgen.h/linknamespace): Likewise.

	[BZ #17717]
	* inet/if_index.c (if_nametoindex): Rename to __if_nametoindex and
	define as weak alias of __if_nametoindex.  Use libc_hidden_weak.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.
	* sysdeps/mach/hurd/if_index.c (if_nametoindex): Rename to
	__if_nametoindex and define as weak alias of __if_nametoindex.
	Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/if_index.c (if_nametoindex): Rename to
	__if_nametoindex and define as weak alias of __if_nametoindex.
	Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.  Use libc_hidden_weak.
	(if_nameindex_netlink): Use __if_freenameindex instead of
	if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.  Use libc_hidden_weak.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	* include/net/if.h [!_ISOMAC] (__if_nametoindex): Declare and use
	libc_hidden_proto.
	[!_ISOMAC] (__if_freenameindex): Likewise.
	* resolv/res_init.c (__res_vinit): Use __if_nametoindex instead of
	if_nametoindex.
	* conform/Makefile (test-xfail-XPG4/grp.h/linknamespace): Remove
	variable.
	(test-xfail-XPG4/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/aio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/grp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pthread.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sched.h/linknamespace): Likewise.
	(test-xfail-UNIX98/time.h/linknamespace): Likewise.

	* conform/Makefile (test-xfail-UNIX98/semaphore.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/semaphore.h/linknamespace): Likewise.

2014-12-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/res_send.c (__libc_res_nsend): Disable warning 'array
	subscript above bounds'

	* resolv/res_send.c (__libc_res_nsend): Fix check for nsmap
	bounds.

2014-12-16  Arjun Shankar  <arjun.is@lostca.se>

	* libio/tst-fopenloc.c: Use test-skeleton.c.

	* stdlib/tst-bsearch.c: Use test-skeleton.c.
	(entry): Rename to ITEM.
	(do_test, comp): Adjust.

	* stdio-common/tst-fseek.c: Use test-skeleton.c.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* string/tester.c: Include <libc-internal.h>.
	(test_memset): Ignore -Wmemset-transposed-args.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* misc/tst-mntent2.c (do_test): Fix warning.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* elf/tst-unique4lib.cc(a): Mark as used.

2014-12-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #17630]
	* resolv/nss_dns/dns-network.c (getanswer_r): Iterate over alias
	names.

2014-12-16  Allan McRae  <allan@archlinux.org>

	* stdio-common/Makefile (tests): Re-add bug26.

2014-12-15  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #17657]
	* locale/programs/ld-ctype.c (find_translit2, read_widestring): Return
	static array.

2014-12-15  Bernard Ogden  <bernie.ogden@linaro.org>

	* nptl/lowlevellock.c (__lll_lock_wait_private): Add comments.
	(__lll_lock_wait): Likewise.
	(__lll_timedlock_wait): Likewise.
	(__lll_timedwait_tid): Likewise.
	* nptl/lowlevelrobustlock.c (__lll_robust_lock_wait): Likewise.
	(__lll_robust_timedlock_wait): Likewise.
	* sysdeps/nptl/lowlevellock.h (lll_trylock): Likewise.
	(lll_cond_trylock): Likewise.
	(__lll_lock): Likewise.
	(__lll_robust_lock): Likewise.
	(__lll_cond_lock): Likewise.
	(lll_robust_cond_lock): Likewise.
	(__lll_timedlock): Likewise.
	(__lll_robust_timedlock): Likewise.
	(__lll_unlock): Likewise.
	(__lll_robust_unlock): Likewise.
	(lll_wait_tid): Likewise.
	(lll_timedwait_tid): Likewise.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-sem4.c (do_test): Start with a fresh semaphore state.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-mutex5.c (do_test): Do not skip tests if elision is enabled.

2014-12-15  Adhemerval Zanella  <Azanella@linux.vnet.ibm.com>

	* stdio-common/test-vfprintf.c: Include <libc-internal.h>.
	* stdio-common/tst-sprintf.c: Likewise.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/s390/pthread_once.c: Remove file.

2014-12-15  Jeff Law  <law@redhat.com>

	[BZ #16617]
	* stdio-common/vfprintf.c (vfprintf): Allocate large specs array
	on the heap.  (CVE-2012-3406)
	* stdio-common/bug23-2.c, stdio-common/bug23-3.c: New file.
	* stdio-common/bug23-4.c: New file.  Test case by Joseph Myers.
	* stdio-common/Makefile (tests): Add bug23-2, bug23-3, bug23-4.

2014-12-15  Will Newton  <will.newton@linaro.org>

	* manual/install.texi: Bump required version of texinfo
	to 4.7 from 4.5.
	* INSTALL: Regenerated.
	* configure.ac: Check for makeinfo version 4.7 and above.
	* configure: Regenerated.

2014-12-12  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.h (SHM_GET_NAME): Take new argument
	PREFIX, string constant to insert between directory and name.
	* sysdeps/posix/shm_open.c: Update caller.
	* sysdeps/posix/shm_unlink.c: Likewise.
	* nptl/semaphoreP.h (struct mountpoint_info): Type removed.
	(__where_is_shmfs, mountpoint, __namedsem_once): Declarations removed.
	(SEM_SHM_PREFIX): New macro.
	* sysdeps/posix/Makefile (librt-routines): Add shm-directory only if
	[$(have-thread-library) = no].
	* nptl/Makefile (libpthread-routines): Add shm-directory.
	* nptl/Versions (GLIBC_PRIVATE): Add __shm_directory.
	* sysdeps/nptl/shm-directory.h: New file.
	* sysdeps/posix/shm-directory.c
	[IS_IN (libpthread)] (__shm_directory): Add hidden_def.
	* sysdeps/unix/sysv/linux/shm-directory.c: Likewise.
	* nptl/sem_open.c (check_add_mapping): Use munmap function rather than
	INTERNAL_SYSCALL.
	(__where_is_shmfs): Function removed.
	(mountpoint, defaultmount, defaultdir, __namedsem_once):
	Variables removed.
	(sem_open): Use __libc_close function rather than INTERNAL_SYSCALL.
	Use SHM_GET_NAME.
	* nptl/sem_unlink.c: Prototypify.  Use SHM_GET_NAME.

	* sysdeps/nptl/bits/libc-lockP.h [IS_IN (libpthread)]
	(PTFAVAIL, __libc_ptf_call, __libc_ptf_call_always): Define as
	unconditional for use inside libpthread.
	[IS_IN (libpthread)]: Include <nptl/pthreadP.h>.

2014-12-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_getaffinity.c: New file.
	* nptl/pthread_setaffinity.c: New file.
	* nptl/pthread_getname.c: New file.
	* nptl/pthread_setname.c: New file.

	* nptl/pthread_create.c (START_THREAD_DEFN)
	[! __ASSUME_SET_ROBUST_LIST]: Add missing & in lll_futex_wake argument.

2014-12-12  Stefan Liebler  <stli@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* resolv/res_send.c (send_vc): Disable warning resplen may
	be used uninitialized.

2014-12-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/tst-mutex6.c
	(ATTR_NULL): New define checks ATTR against NULL.
	(do_test): Use !ATTR_NULL instead of ATTR != NULL.
	* nptl/tst-mutexpp6.c (ATTR_NULL): New define.

2014-12-11  James Lemke  <jwlemke@codesourcery.com>

	[BZ #17581]
	* malloc/hooks.c
	(mem2mem_check): Revert my previous change.
	(malloc_check_get_size): Revert my previous change.
	(mem2chunk_check): Revert my previous change.

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.c: New file.
	* sysdeps/posix/shm-directory.h: New file.
	* sysdeps/posix/Makefile [($(subdir) = rt] (librt-routines): Add it.
	* sysdeps/posix/shm_open.c: Use SHM_GET_NAME.
	Use O_NOFOLLOW and O_CLOEXEC if available.  Transmute EISDIR to EINVAL.
	* sysdeps/posix/shm_unlink.c: Use SHM_GET_NAME.
	Transmute EPERM to EACCES.
	* sysdeps/unix/sysv/linux/shm-directory.c: New file, most code taken
	from ...
	* sysdeps/unix/sysv/linux/shm_open.c: ... here.  File removed.
	* sysdeps/unix/sysv/linux/shm_unlink.c: File removed.

2014-12-11  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/jmpbuf_unwind.h (_jmpbuf_sp): Declare SP as void
	pointer and cast to uintptr_t.
	* sysdeps/sh/nptl/tls.h (TLS_INIT_TP): Use NULL instead of 0.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h (lll_futex_timed_wait):
	Add cast to avoid warning.
	* sysdeps/unix/sysv/linux/sh/register-dump.h: Use 0 instead of NULL.

2014-12-11  Joseph Myers  <joseph@codesourcery.com>

	* nptl/semaphore.h: Move to ...
	* sysdeps/pthread/semaphore.h: ... here.
	* Makefile (installed-headers): Change nptl/semaphore.h to
	sysdeps/pthread/semaphore.h.

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* misc/tst-error1.c (do_test): Ignore -Wformat-security for
	generated error format strings.

	* stdio-common/tstdiomisc.c (t2): Ignore -Wformat and
	-Wformat-extra-args warnings for scanf formats.
	* stdio-common/scanf4.c (main): Ignore -Wformat-zero-length around
	test of zero-length format (duh).
	* stdio-common/scanf7.c (main): Ignore -Wformat warnings for
	corner-case scanf format test.
	* stdio-common/test-vfprintf.c (do_test): Ignore -Wformat-security for
	generated fprintf format string.
	* stdio-common/tst-sprintf.c (do_test): Ignore -Wformat warnings for
	corner-case sprintf format tests.
	* stdio-common/tst-printf.c: Ignore -Wformat throughout.
	* stdio-common/tst-printfsz.c (main): Ignore -Wformat and
	-Wformat-extra-args warnings throughout.
	* stdio-common/Makefile (CFLAGS-tstdiomisc.c): Variable removed.
	(CFLAGS-scanf4.c): Likewise.
	(CFLAGS-scanf7.c): Likewise.
	(CFLAGS-tst-sprintf.c): Likewise.
	(CFLAGS-tst-printf.c): Likewise.
	(CFLAGS-tst-printfsz.c): Likewise.

2014-12-11  Joseph Myers  <joseph@codesourcery.com>

	* include/cpio.h: New file.
	* include/fmtmsg.h: Likewise.

	* tst-mbswcs1.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-mbswcs2.c (show): Likewise.  Use %td format for ptrdiff_t
	arguments.
	* tst-mbswcs3.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-mbswcs4.c (show): Likewise.  Use %td format for ptrdiff_t
	arguments.
	* tst-mbswcs5.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-trans.c (do_test): Use %lc format for wint_t arguments.
	* Makefile (CFLAGS-tst-mbswcs1.c): Remove variable.
	(CFLAGS-tst-mbswcs2.c): Likewise.
	(CFLAGS-tst-mbswcs3.c): Likewise.
	(CFLAGS-tst-mbswcs4.c): Likewise.
	(CFLAGS-tst-mbswcs5.c): Likewise.
	(CFLAGS-tst-trans.c): Likewise

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* posix/regexbug1.c (main): Use "%s" format with regerror results,
	rather than assuming they won't contain any '%'s.

2014-12-11  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/memset.c (__memcpy): Add
	inhibit_loop_to_libcall to avoid recursive calls.
	* sysdeps/tile/tilegx/memcpy.c (__memcpy): Likewise.
	* sysdeps/tile/tilepro/memcpy.c (__memcpy): Likewise.

2014-12-11  Adhemerval Zanella  <Azanella@linux.vnet.ibm.com>

	* include/sys/socket.h (__sendmmsg): Add __USE_GNU guards on function
	prototype.

2014-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/dl-trampoline.c: Modify switch expression to have
	integer value instead of boolean.

2014-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* malloc/malloc.c: Fix powerof2 check.

2014-12-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* locale/programs/locfile.h (maybe_swap_uint32):
	Remove inline and add unused attribute.

2014-12-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_load_address):
	Truncating assembler expression to a .long expression.

2014-12-11  Andreas Schwab  <schwab@suse.de>

	* elf/rtld.c (struct map_args): Constify str member.
	(do_preload): Constify fname argument.

2014-12-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Remove overflow warnings for
	constants definition.

2014-12-11  Andreas Schwab  <schwab@suse.de>

	[BZ #16657]
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock): Use
	FORCE_ELISION instead of DO_ELISION.
	* sysdeps/unix/sysv/linux/x86/force-elision.h (DO_ELISION):
	Remove.
	* sysdeps/unix/sysv/linux/s390/force-elision.h (DO_ELISION):
	Likewise.

	* iconvdata/gconv-modules: Remove duplicate entry.

2014-12-11  Will Newton  <will.newton@linaro.org>

	Merge gettext 0.19.3 into intl/.

	This involves a number of cosmetic changes to comments
	and ANSI function definitions and prototypes throughout
	all the files. The gettext copyright header is used but
	with the date ranges taken from the glibc copy.

	* NEWS: Add gettext merge to 2.21.
	* intl/bindtextdom.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	Use __builtin_expect rather than __glibc_likely/unlikely.
	* intl/dcgettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/dcigettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(INTDIV0_RAISES_SIGFPE): New define.
	Use gl_* locking primitives rather than __libc_* ones.
	Include eval-plural.h instead of plural-eval.c.
	Use __builtin_expect rather than __glibc_likely/unlikely.
	* intl/dcngettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/dgettext.c: Likewise.
	* intl/dngettext.c: Likewise.
	* intl/plural-eval.c: Renamed to...
	* intl/eval-plural.h: ...this.
	* intl/explodename.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_explode_name): Use strchr instead of __rawmemchr.
	* intl/finddomain.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	(_nl_find_domain): Use malloc rather than alloca for
	allocation of temporary locale name.
	* intl/gettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/gettextP.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	* intl/gmo.h: Switch to gettext copyright.
	(struct sysdep_string): Move struct segment_pair outside of
	struct definition.
	* intl/hash-string.c: Use ANSI definitions and prototypes.
	* intl/hash-string.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/l10nflist.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_normalize_codeset): Avoid integer overflow.
	* intl/loadinfo.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(LIBINTL_DLL_EXPORTED): New define.
	(PATH_SEPARATOR): New define.
	* intl/loadmsgcat.c: Switch to gettext copyright.
	* intl/localealias.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_expand_alias): Use PATH_SEPARATOR.
	* intl/ngettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/plural-exp.c: Likewise.
	* intl/plural-exp.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(struct expression): Move definition of enum operator outside
	of struct definition.
	* intl/plural.c: Regenerate.
	* intl/plural.y: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Port to bison 3.0.
	* intl/textdomain.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.

2014-12-10  Steve Ellcey  <sellcey@imgtec.com>

	* debug/warning-nop.c: Add used atrribute.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips32/waitid.c: New file.

	* sysdeps/unix/sysv/linux/mips/mips64/Makefile
	[$(subdir) == signal] (CFLAGS-sigaction.c): New variable.
	[$(subdir) == nptl] (CFLAGS-sigaction.c): Likewise.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17634]
	* wcsmbs/wcschr.c [!WCSCHR] (wcschr): Define as __wcschr.
	Undefine after defining function.  Define as weak alias of
	__wcschr.  Use libc_hidden_weak.
	* include/wchar.h (__wcschr): Declare.  Use libc_hidden_proto.
	* sysdeps/i386/i686/multiarch/wcschr-c.c [IS_IN (libc) && SHARED]
	(libc_hidden_def): Also define __GI___wcschr alias.
	* sysdeps/i386/i686/multiarch/wcschr.S (wcschr): Rename to
	__wcschr and define as weak alias of __wcschr.
	* sysdeps/powerpc/power6/wcschr.c [!WCSCHR] (WCSCHR): Define as
	__wcschr.
	[!WCSCHR] (DEFAULT_WCSCHR): Define.
	[DEFAULT_WCSCHR] (__wcschr): Use libc_hidden_def.
	[DEFAULT_WCSCHR] (wcschr): Define as weak alias of __wcschr.  Use
	libc_hidden_weak.  Do not use libc_hidden_def.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c
	[IS_IN (libc) && SHARED] (libc_hidden_def): Also define
	__GI___wcschr alias.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c
	[IS_IN (libc)] (wcschr): Define as macro expanding to
	__redirect_wcschr.
	[IS_IN (libc)] (__wcschr_ppc): Use __redirect_wcschr in typeof.
	[IS_IN (libc)] (__wcschr_power6): Likewise.
	[IS_IN (libc)] (__wcschr_power7): Likewise.
	[IS_IN (libc)] (__libc_wcschr): New.  Define with libc_ifunc
	instead of wcschr.
	[IS_IN (libc)] (wcschr): Undefine and define as weak alias of
	__libc_wcschr.
	[!IS_IN (libc)] (libc_hidden_def): Do not undefine and redefine.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c (wcschr): Rename to
	__wcschr and define as weak alias of __wcschr.  Use
	libc_hidden_builtin_def.
	* sysdeps/x86_64/wcschr.S (wcschr): Rename to __wcschr and define
	as weak alias of __wcschr.  Use libc_hidden_weak.
	* time/alt_digit.c (_nl_get_walt_digit): Use __wcschr instead of
	wcschr.
	* time/era.c (_nl_init_era_entries): Likewise.
	* conform/Makefile (test-xfail-ISO/time.h/linknamespace): Remove
	variable.
	(test-xfail-XPG3/time.h/linknamespace): Likewise.
	(test-xfail-XPG4/time.h/linknamespace): Likewise.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* libio/tst-ftell-active-handler.c (do_ftruncate_test): Use %ld
	format for long int variable.

2014-12-10  Anders Kaseorg  <andersk@MIT.EDU>

	[BZ #10672]
	* manual/search.texi: (Array Sort Function): Remove claim how to make
	qsort stable.

2014-12-10  Andreas Schwab  <schwab@suse.de>

	[BZ #12847]
	* sysdeps/nptl/fork.c (fresetlockfiles): Skip files with
	user-controlled locks.

2014-12-10  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchrnul.S (vrepmask): Use a call-clobbered
	register.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (--disable-werror): New configure option.
	(enable_werror): New AC_SUBST.
	* configure: Regenerated.
	* config.make.in (enable-werror): New variable.
	* Makeconfig [$(enable-werror) = yes] (+gccwarn): Add -Werror
	-Wno-error=undef.
	(+gccwarn-c): Do not use -Werror=implicit-function-declaration.
	* manual/install.texi (Configuring and compiling): Document
	--disable-werror.
	* INSTALL: Regenerated.
	* debug/Makefile (CFLAGS-tst-chk1.c): Add -Wno-error.
	(CFLAGS-tst-chk2.c): Likewise.
	(CFLAGS-tst-chk3.c): Likewise.
	(CFLAGS-tst-chk4.cc): Likewise.
	(CFLAGS-tst-chk5.cc): Likewise.
	(CFLAGS-tst-chk6.cc): Likewise.
	(CFLAGS-tst-lfschk1.c): Likewise.
	(CFLAGS-tst-lfschk2.c): Likewise.
	(CFLAGS-tst-lfschk3.c): Likewise.
	(CFLAGS-tst-lfschk4.cc): Likewise.
	(CFLAGS-tst-lfschk5.cc): Likewise.
	(CFLAGS-tst-lfschk6.cc): Likewise.

	* stdio-common/tst-printfsz.c: Include <libc-internal.h>.
	(main): Disable -Wdeprecated-declarations around calls to
	register_printf_function.

	* stdio-common/tst-unlockedio.c: Include <libc-internal.h>.
	(do_test): Disable -Wdiv-by-zero around some calls to
	fwrite_unlocked and fread_unlocked.

	* include/libc-internal.h (DIAG_PUSH_NEEDS_COMMENT): New macro.
	(DIAG_POP_NEEDS_COMMENT): Likewise.
	(_DIAG_STR1): Likewise.
	(_DIAG_STR): Likewise.
	(DIAG_IGNORE_NEEDS_COMMENT): Likewise.
	* stdio-common/bug21.c: Include <libc-internal.h>.
	(do_test): Disable -Wformat around call to sscanf.
	* stdio-common/scanf14.c: Include <libc-internal.h>.
	(main): Disable -Wformat around some calls to scanf functions.

2014-12-09  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/sh/pthread_once.S: Remove file.

2014-12-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* libio/tst-ftell-active-handler.c (do_ftell_test): Fix wide-character
	stack variable alignment.

2014-12-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17682]
	* resource/Versions (libc): Add __getrlimit at GLIBC_PRIVATE.
	* resource/getrlimit.c (__getrlimit): Use libc_hidden_def.
	* sysdeps/mach/hurd/getrlimit.c (__getrlimit): Likewise.
	* include/sys/resource.h (__getrlimit): Use libc_hidden_proto.
	* nptl/nptl-init.c (__pthread_initialize_minimal_internal): Use
	__getrlimit instead of getrlimit.
	* nptl/pthread_cond_timedwait.c (__pthread_cond_timedwait): Use
	__gettimeofday instead of gettimeofday.
	* nptl/pthread_rwlock_timedrdlock.c (pthread_rwlock_timedrdlock):
	Likewise.
	* nptl/pthread_rwlock_timedwrlock.c (pthread_rwlock_timedwrlock):
	Likewise.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Likewise.
	* conform/Makefile (test-xfail-POSIX2008/aio.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/time.h/linknamespace): Likewise.

2014-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* libio/tst-ftell-active-handler.c (do_ftell_test): Fix buffer overrun
	for wide-character tests.

2014-12-04  Roland McGrath  <roland@hack.frob.com>

	* io/openat64.c: #include <libc-internal.h>
	(__openat64): Prototypify.  Use ignore_value on MODE.
	* io/openat.c: Likewise.
	* misc/reboot.c: #include <libc-internal.h>
	(reboot): Prototypify.  Use ignore_value on HOWTO.
	* misc/ptrace.c: #include <libc-internal.h>
	(ptrace): Prototypify.  Use ignore_value for va_arg'd parameters.

2014-12-04  Joseph Myers  <joseph@codesourcery.com>

	* conform/list-header-symbols.pl (%extra_syms): Add h_errno for
	XPG4, UNIX98 and XOPEN2K.
	* conform/Makefile (test-xfail-XOPEN2K/grp.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/pwd.h/linknamespace): Likewise.

2014-12-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c: Use ISO C style for function definitions.
	* libio/iofopen.c: Likewise.
	* libio/wfileops.c: Likewise.

	[BZ #17653]
	* libio/fileops.c (_IO_new_file_underflow): Unset cached
	offset on EOF.
	* libio/wfileops.c (_IO_wfile_underflow): Likewise.
	* libio/tst-ftell-active-handler.c (fgets_func_t): New type.
	(fgets_func): Function pointer to fgets and fgetws.
	(do_ftell_test): Add test to verify ftell value after read
	EOF.
	(do_test): Set fgets_func.

	* libio/tst-ftell-active-handler.c (do_ftruncate_test): Add
	O_TRUNC flag for w and w+ modes.
	(do_rewind_test): Likewise.
	(do_ftell_test): Likewise.
	(do_write_test): Likewise.

	[BZ #17647]
	* libio/fileops.c (do_ftell): Seek only when there are
	unflushed writes.
	* libio/wfileops.c (do_ftell_wide): Likewise.
	* libio/tst-ftell-active-handler.c (do_ftruncate_test): New
	test case.
	(do_one_test): Call it.

2014-12-03  Joseph Myers  <joseph@codesourcery.com>

	* conform/list-header-symbols.pl (%extra_syms): Add getdate_err
	for XPG4, UNIX98, XOPEN2K and XOPEN2K8.
	* conform/Makefile (test-xfail-XOPEN2K/pthread.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/time.h/linknamespace): Likewise.

2014-12-02  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (test-xfail-XOPEN2K/aio.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K8/aio.h/linknamespace): Likewise.

	[BZ #17668]
	* inet/ifaddrs.c (getifaddrs): Rename to __getifaddrs and define
	as weak alias of __getifaddrs.  Use libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* sysdeps/gnu/ifaddrs.c (getifaddrs): Rename to __getifaddrs and
	define as weak alias of __getifaddrs.  Use libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs): Rename to
	__getifaddrs and define as weak alias of __getifaddrs.  Use
	libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* conform/Makefile (test-xfail-XOPEN2K/net/if.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/net/if.h/linknamespace): Likewise.

2014-12-02  Petar Jovanovic  <petar.jovanovic@rt-rk.com>

	[BZ #17601]
	* sysdeps/mips/start.S (__start): Use indirect jump to call
	__libc_start_main.

2014-12-02  Joseph Myers  <joseph@codesourcery.com>

	* nptl/tst-stack4.c (dso_process): Use int not uintptr_t for t.

	* nptl/tst-mutex1.c: Include <stdbool.h>.
	[!ATTR] (ATTR_NULL): New macro.
	(do_test): Test !ATTR_NULL instead of ATTR != NULL.
	* nptl/tst-mutexpi1.c (ATTR_NULL): New macro.
	* nptl/tst-mutexpp1.c (ATTR_NULL): New macro.

	* posix/tst-getopt_long1.c (do_test): Cast elements of argv array
	to char *.

	[BZ #17665]
	* posix/unistd.h [__USE_MISC || (__USE_XOPEN && !__USE_UNIX98)]:
	Change conditional to [__USE_MISC].

	[BZ #17664]
	* misc/mntent_r.c (__getmntent_r): Use __fgets_unlocked instead of
	fgets_unlocked.
	* resolv/res_hconf.c [IS_IN (libc)] (fgets_unlocked): Define to
	__fgets_unlocked.
	* resolv/res_init.c (__res_vinit): Use __fgets_unlocked instead of
	fgets_unlocked.
	* conform/Makefile (test-xfail-XPG4/sys/statvfs.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/statvfs.h/linknamespace): Likewise.

	* elf/tst-unique4lib.cc (b): Mark with __attribute__ ((used)).

2014-12-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strpbrk objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strpbrk implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-ppc64.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strpbrk.S: Remove file.
	* sysdeps/powerpc/powerpc64/strpbrk.S: New file.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strcspn objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strcspn implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-ppc64.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strcspn.S: Remove file.
	* sysdeps/powerpc/powerpc64/strcspn.S: New file.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strspn objetcs.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strspn implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power7.S: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strspn.S: Remove file.
	* sysdeps/powerpc/powerpc64/strspn.S: New file.

2014-12-01  James Lemke  <jwlemke@codesourcery.com>

	[BZ #17581]
	* malloc/hooks.c
	(mem2mem_check): Add a terminator to the chain of checking blocks.
	(malloc_check_get_size): Use it here.
	(mem2chunk_check): Ditto.

2014-12-01  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/strtok.S: New file.
	* sysdeps/powerpc/powerpc64/strtok_r.S: New file.

2014-11-29  Carlos O'Donell  <carlos@redhat.com>

	* bits/ioctl-types.h: Indent preprocessor directives correctly.

	* nptl/nptl-init.c: Include libc-internal.h.
	(__pthread_initialize_minimal_internal): Use ROUND_UP.

	* elf/ldconfig.c (search_dir): Expand comment.

2014-11-29  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (linknamespace-symlist-stdlibs-base): New
	variable.
	(linknamespace-symlist-stdlibs-tests): Likewise.
	(tests-special): Append $(linknamespace-symlist-stdlibs-tests)
	instead of $(objpfx)symlist-stdlibs.
	(linknamespace-libs-isoc): New variable.
	(linknamespace-libs): Use $(linknamespace-libs-isoc).
	(linknamespace-libs-ISO): New variable.
	(linknamespace-libs-ISO99): Likewise.
	(linknamespace-libs-ISO11): Likewise.
	(linknamespace-libs-XPG3): Likewise.
	(linknamespace-libs-XPG4): Likewise.
	(linknamespace-libs-POSIX): Likewise.
	(linknamespace-libs-UNIX98): Likewise.
	(linknamespace-libs-XOPEN2K): Likewise.
	(linknamespace-libs-POSIX2008): Likewise.
	(linknamespace-libs-XOPEN2K8): Likewise.
	($(objpfx)symlist-stdlibs): Replace by
	$(linknamespace-symlist-stdlibs-tests).  Use
	$(linknamespace-libs-$*) as set of libraries.
	($(linknamespace-header-tests)): Update dependencies.  Use
	$(objpfx)symlist-stdlibs-$$std for --libsyms argument.
	(test-xfail-XPG4/sys/mman.h/linknamespace): Remove.
	* conform/linknamespace.pl: Remove comment about considering
	definitions of symbols from irrelevant libraries.

2014-11-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13862]
	* elf/dl-tls.c: Include <atomic.h>.
	(oom): Remove #ifdef SHARED/#endif.
	(_dl_static_dtv, _dl_initial_dtv): Moved before ...
	(_dl_resize_dtv): This.  Extracted from _dl_update_slotinfo.
	(_dl_allocate_tls_init): Resize DTV if the current DTV isn't
	big enough.
	(_dl_update_slotinfo): Call _dl_resize_dtv to resize DTV.
	* nptl/Makefile (tests): Add tst-stack4.
	(modules-names): Add tst-stack4mod.
	($(objpfx)tst-stack4): New.
	(tst-stack4mod.sos): Likewise.
	($(objpfx)tst-stack4.out): Likewise.
	($(tst-stack4mod.sos)): Likewise.
	(clean): Likewise.
	* nptl/tst-stack4.c: New file.
	* nptl/tst-stack4mod.c: Likewise.

2014-11-27  J. Brown  <jb999@gmx.de>

	* sysdeps/x86/bits/string.h: Add recent CPUs.

2014-11-27  Joseph Myers  <joseph@codesourcery.com>

	* misc/tst-pselect.c (do_test): Use sigprocmask instead of
	sigblock.

	* libio/bug-ungetwc1.c (do_test): Verify results of getwc and
	feof.

	* dlfcn/failtestmod.c (constr): Do not store result of dlsym in a
	variable.

2014-11-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nscd/connections.c: Include libc-internal.h because of macro
	usage ignore_value.

2014-11-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/bits/string3.h (__warn_memset_zero_len): Don't
	declare for gcc newer than 5.0.
	(memset): Don't test for zero-length __LEN for gcc newer than
	5.0.

2014-11-27  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/tst-fmemopen.c (do_test): Cast st_size values to
	size_t for %zu format.

	* nss/tst-nss-test1.c (do_test): Use %td printf format for pointer
	difference, not %ju.

2014-11-26  Joseph Myers  <joseph@codesourcery.com>

	* include/libc-internal.h (ignore_value): New macro.
	* nscd/connections.c (restart): Wrap calls to setuid and setgid
	with ignore_value.

	* sysdeps/mips/__longjmp.c (____longjmp): Use prototype
	definition.

	* nptl/tst-cancel-self-cancelstate.c (do_test): Cast argument of
	pthread_cleanup_push to void *.

	* sysdeps/unix/sysv/linux/arm/libc-do-syscall.S (_FORTIFY_SOURCE):
	Undefine.

	[BZ #16619]
	[BZ #16740]
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Use 1LL << 52
	instead of 1L << 52.

	* libio/bug-rewind.c (do_test): Check fwscanf return values.
	* libio/bug-rewind2.c (do_test): Likewise.

	* debug/test-stpcpy_chk-ifunc.c: Remove file.
	* debug/test-strcpy_chk-ifunc.c: Likewise.
	* wcsmbs/test-wcschr-ifunc.c: Likewise.
	* wcsmbs/test-wcscmp-ifunc.c: Likewise.
	* wcsmbs/test-wcscpy-ifunc.c: Likewise.
	* wcsmbs/test-wcslen-ifunc.c: Likewise.
	* wcsmbs/test-wcsrchr-ifunc.c: Likewise.
	* wcsmbs/test-wmemcmp-ifunc.c: Likewise.
	* Rules [$(multi-arch) = no] (tests): Do not filter out
	$(tests-ifunc).
	[$(multi-arch) = no] (xtests): Do not filter out $(xtests-ifunc).
	* debug/Makefile (tests-ifunc): Remove variable.
	(tests): Do not add $(tests-ifunc).
	* wcsmbs/Makefile (tests-ifunc): Remove variable.
	(tests): Do not add $(tests-ifunc).
	* benchtests/bench-string.h (TEST_IFUNC): Remove macro.
	[TEST_IFUNC]: Remove conditionals.
	* string/test-string.h (TEST_IFUNC): Remove macro.
	[TEST_IFUNC]: Remove conditionals.

	* string/test-strchr.c [!WIDE] (L): New macro.
	[WIDE] (L): Likewise.
	(check1): Use CHAR instead of char.  Use L on string and character
	constants.

2014-11-26  Adhemerval Zanella  <azanella@linux.ibm.com>

	* csu/tst-atomic.c (do_test): Add atomic_exchange_and_add_{acq,rel}
	tests.
	* sysdeps/powerpc/bits/atomic.h
	(__arch_atomic_exchange_and_add_32_acq): Add definition.
	(__arch_atomic_exchange_and_add_32_rel): Likewise.
	(atomic_exchange_and_add_acq): Likewise.
	(atomic_exchange_and_add_rel): Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h
	(__arch_atomic_exchange_and_add_64_acq): Add definition.
	(__arch_atomic_exchange_and_add_64_rel): Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h
	(__arch_atomic_exchange_and_add_64_acq): Add definition.
	(__arch_atomic_exchange_and_add_64_rel): Likewise.

2014-11-26  Torvald Riegel  <triegel@redhat.com>

	* nptl/tpp.c (__init_sched_fifo_prio, __pthread_tpp_change_priority):
	Change synchronization of __sched_fifo_min_prio and
	__sched_fifo_max_prio.
	* nptl/pthread_mutexattr_getprioceiling.c
	(pthread_mutexattr_getprioceiling): Likewise.
	* nptl/pthread_mutexattr_setprioceiling.c
	(pthread_mutexattr_setprioceiling): Likewise.
	* nptl/pthread_mutex_init.c (__pthread_mutex_init): Likewise.
	* nptl/pthread_mutex_setprioceiling.c (pthread_mutex_setprioceiling):
	Likewise.

2014-11-26  Joseph Myers  <joseph@codesourcery.com>

	* setjmp/jmpbug.c (test): Make foo volatile and cast it to
	void.

2014-11-25  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/tst-printf-round.c (test_hex_in_one_mode): Make
	third argument const.

2014-11-25  Paul Eggert  <eggert@cs.ucla.edu>

	fnmatch: work around GCC compiler warning bug with uninit var
	* posix/fnmatch_loop.c (FCT): Use a scalar not a one-item array.
	This works around a bug with x86-64 GCC 4.9.2 and earlier
	where 'gcc -O2 -Wmaybe-uninitialized' incorrectly complains
	"../locale/weightwc.h:93:7: warning: '*((void *)&str+4)' may be
	used uninitialized in this function [-Wmaybe-uninitialized]".

2014-11-25  Joseph Myers  <joseph@codesourcery.com>

	* posix/bug-regex31.c (main): Return RES not 0.

2014-11-25  Anton Blanchard <anton@samba.org>

	* sysdeps/powerpc/bits/atomic.h
	(__arch_compare_and_exchange_bool_64_rel): Load from mem.

2014-11-24  Sterling Augustine  <saugustine@google.com>

	* sysdeps/x86_64/start.S (_start): Use ENTRY and END macros.

2014-11-24  Ryan Cumming  <etaoins@gmail.com>

	[BZ #17608]
	* sysdeps/unix/sysv/linux/bits/time.h: Define CLOCK_TAI.

2014-11-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17633]
	* stdio-common/perror.c (perror): Call __fileno instead of fileno.
	* conform/Makefile (test-xfail-ISO/stdio.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO11/stdio.h/linknamespace): Likewise.

2014-11-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strncpy.c (strncpy): Improve performance by using memset.

2014-11-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strcpy.c (strcpy):
	Improve performance by using strlen and memcpy.

2014-11-24  Leonhard Holz  <leonhard.holz@web.de>

	* string/strcoll_l.c (get_next_seq): __always_inline.
	* string/strcoll_l.c (do_compare): __always_inline.

2014-11-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/bits/stdlib-float.h: Use IS_IN only if _ISOMAC is
	defined.
	* include/mqueue.h: Likewise.
	* include/stdlib.h: Likewise.

	* stdlib/isomac.c (fmt): Replace NOT_IN_libc with IN_MODULE.
	(get_null_defines): Adjust.
	* sunrpc/Makefile: Adjust comment.
	* Makerules (CPPFLAGS-nonlib): Remove NOT_IN_libc.
	* elf/Makefile (CPPFLAGS-sotruss-lib): Likewise.
	(CFLAGS-interp.c): Likewise.
	(CFLAGS-ldconfig.c): Likewise.
	(CPPFLAGS-.os): Likewise.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.
	* extra-lib.mk (CPPFLAGS-$(lib)): Likewise.
	* extra-modules.mk (extra-modules.mk): Likewise.
	* iconv/Makefile (CPPFLAGS-iconvprogs): Likewise.
	* locale/Makefile (CPPFLAGS-locale_programs): Likewise.
	* malloc/Makefile (CPPFLAGS-memusagestat): Likewise.
	* nscd/Makefile (CPPFLAGS-nscd): Likewise.
	* nss/Makefile (CPPFLAGS-nss_test1): Likewise.
	* stdlib/Makefile (CFLAGS-tst-putenvmod.c): Likewise.
	* sysdeps/gnu/Makefile ($(objpfx)errlist-compat.c): Likewise.
	* sysdeps/unix/sysv/linux/Makefile (CPPFLAGS-lddlibc4): Likewise.
	* iconvdata/Makefile (CPPFLAGS): Likewise.
	(cpp-srcs-left): Add libof for all iconvdata routines.
	* bits/stdio-lock.h: Replace NOT_IN_libc with IS_IN.
	* include/assert.h: Likewise.
	* include/ctype.h: Likewise.
	* include/errno.h: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/math.h: Likewise.
	* include/netdb.h: Likewise.
	* include/resolv.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/wctype.h: Likewise.
	* intl/l10nflist.c: Likewise.
	* libidn/idn-stub.c: Likewise.
	* libio/libioP.h: Likewise.
	* nptl/libc_multiple_threads.c: Likewise.
	* nptl/pthreadP.h: Likewise.
	* posix/regex_internal.h: Likewise.
	* resolv/res_hconf.c: Likewise.
	* sysdeps/arm/armv7/multiarch/memcpy.S: Likewise.
	* sysdeps/arm/memmove.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/generic/_itoa.h: Likewise.
	* sysdeps/generic/symbol-hacks.h: Likewise.
	* sysdeps/gnu/errlist.awk: Likewise.
	* sysdeps/gnu/errlist.c: Likewise.
	* sysdeps/i386/i586/memcpy.S: Likewise.
	* sysdeps/i386/i586/memset.S: Likewise.
	* sysdeps/i386/i686/memcpy.S: Likewise.
	* sysdeps/i386/i686/memmove.S: Likewise.
	* sysdeps/i386/i686/mempcpy.S: Likewise.
	* sysdeps/i386/i686/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Likewise.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.
	* sysdeps/ia64/fpu/libm-symbols.h: Likewise.
	* sysdeps/nptl/bits/libc-lock.h: Likewise.
	* sysdeps/nptl/bits/libc-lockP.h: Likewise.
	* sysdeps/nptl/bits/stdio-lock.h: Likewise.
	* sysdeps/posix/closedir.c: Likewise.
	* sysdeps/posix/opendir.c: Likewise.
	* sysdeps/posix/readdir.c: Likewise.
	* sysdeps/posix/rewinddir.c: Likewise.
	* sysdeps/powerpc/novmx-sigjmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strspn.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-ultra3.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset-niagara4.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/unix/alpha/sysdep.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/make-syscalls.sh: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/getpid.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/m68k-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/wordsize-32/symbol-hacks.h: Likewise.
	* sysdeps/x86_64/memcpy.S: Likewise.
	* sysdeps/x86_64/memmove.c: Likewise.
	* sysdeps/x86_64/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/init-arch.h: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.
	* sysdeps/x86_64/strcmp.S: Likewise.

	* extra-lib.mk (CPPFLAGS-$(lib)): Remove IS_IN_$(lib).

	* elf/Makefile (CPPFLAGS-.os): Remove IS_IN_rtld.
	* elf/dl-open.c: Use IS_IN (rtld) instead if IS_IN_rtld.
	* elf/rtld-Rules: Likewise.
	* elf/setup-vdso.h: Likewise.
	* include/assert.h: Likewise.
	* include/bits/stdlib-float.h: Likewise.
	* include/errno.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/unistd.h: Likewise.
	* sysdeps/aarch64/setjmp.S: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/arm/__longjmp.S: Likewise.
	* sysdeps/arm/aeabi_unwind_cpp_pr1.c: Likewise.
	* sysdeps/arm/setjmp.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/generic/_itoa.h: Likewise.
	* sysdeps/generic/dl-sysdep.h: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/i386/dl-tls.h: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/m68k/setjmp.c: Likewise.
	* sysdeps/mach/hurd/dl-execstack.c: Likewise.
	* sysdeps/mach/hurd/opendir.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* sysdeps/posix/opendir.c: Likewise.
	* sysdeps/posix/profil.c: Likewise.
	* sysdeps/powerpc/dl-procinfo.h: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/s390/s390-32/setjmp.S: Likewise.
	* sysdeps/s390/s390-64/setjmp.S: Likewise.
	* sysdeps/sh/sh3/setjmp.S: Likewise.
	* sysdeps/sh/sh4/setjmp.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/arm/sysdep.S: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/m68k-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m68k-helpers.S: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/setjmp.S: Likewise.

	* include/math.h: Use IS_IN instead of IS_IN_libm.
	* sysdeps/alpha/fpu/s_copysign.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/w_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_copysign.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_finite.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_frexp.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_isinf.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_isnan.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_ldexp.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_ldexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_modf.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_scalbln.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_scalbn.c: Likewise.
	* sysdeps/powerpc/power5+/fpu/s_modf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/s_signbitl.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S: Likewise.

	* nptl/lowlevellock.c: Use IS_IN instead of IS_IN_libpthread.
	* nptl/pthreadP.h: Likewise.
	* nptl_db/structs.def: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/nptl/bits/libc-lock.h: Likewise.
	* sysdeps/nptl/bits/libc-lockP.h: Likewise.
	* sysdeps/sparc/sparc32/lowlevellock.c: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/cancellation.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.

	* include/mqueue.h: Use IS_IN instead of IS_IN_librt.
	* nptl/pthreadP.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.

	* dlfcn/dladdr.c: Use IS_IN.
	* dlfcn/dladdr1.c: Likewise.
	* dlfcn/dlclose.c: Likewise.
	* dlfcn/dlerror.c: Likewise.
	* dlfcn/dlinfo.c: Likewise.
	* dlfcn/dlmopen.c: Likewise.
	* dlfcn/dlopen.c: Likewise.
	* dlfcn/dlsym.c: Likewise.
	* dlfcn/dlvsym.c: Likewise.

	* include/ifaddrs.h: Use IS_IN.
	* inet/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* nscd/Makefile (CPPFLAGS-nscd): Remove IS_IN_nscd.

	* elf/Makefile (CFLAGS-ldconfig.c): Remove definition of
	IS_IN_ldconfig.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.c: Use IS_IN.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.h: Likewise.

	* include/shlib-compat.h [!NOT_IN_libc]: Remove.
	* nss/nss_files/files-parse.c (IS_IN_libc): Replace with
	IS_IN (libc).

	* elf/Makefile (libof-sotruss-lib): Set as extramodules.

	* elf/Makefile (CPPFLAGS-.os): Remove IN_LIB.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.
	* extra-lib.mk (CPPFLAGS-$(lib)): Likewise.
	* include/libc-symbols.h (IS_IN_LIB): New macro.
	* include/errno.h: Use IS_IN_LIB instead of IN_LIB.
	* include/netdb.h: Likewise.
	* include/stap-probe.h: Remove all uses of IN_LIB.

	* Makeconfig (module-cppflags-real): Define MODULE_NAME
	instead of IN_MODULE.
	* include/libc-symbols.h (IN_MODULE): Define using
	MODULE_NAME.
	(PASTE_NAME, PASTE_NAME1): New macros.
	* include/stap-probe.h (LIBC_PROBE_1): Use MODULE_NAME instead
	of IN_LIB.
	(STAP_PROBE_ASM): Likewise.

2014-11-23  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/init-first.c (posixland_init): Call
	__mach_init in dlopened libc.

2014-11-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/arm/preconfigure.ac: Delete EABI check.
	* sysdeps/arm/preconfigure: Regenerate.

2014-11-21  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Set
	ATTR_FLAG_POLICY_SET and/or ATTR_FLAG_SCHED_SET in PD->flags
	when copying values from IATTR into PD.

2014-11-21  Will Newton  <will.newton@linaro.org>
	    Andrew Pinski  <andrew.pinski@caviumnetworks.com>

	* sysdeps/aarch64/dl-machine.h (elf_machine_load_address):
	Refactor inline-asm.  Also add comment.

	* sysdeps/aarch64/bits/link.h (la_aarch64_gnu_pltenter): Use
	ElfW macro instead of hardcoded Elf64 types.
	(la_aarch64_gnu_pltenter): Likewise.
	* sysdeps/aarch64/dl-machine.h
	(elf_machine_runtime_setup): Use ElfW(Addr).

	* elf/elf.h (R_AARCH64_P32_ABS32, R_AARCH64_P32_COPY,
	R_AARCH64_P32_GLOB_DAT, R_AARCH64_P32_JUMP_SLOT,
	R_AARCH64_P32_RELATIVE, R_AARCH64_P32_TLS_DTPMOD,
	R_AARCH64_P32_TLS_DTPREL, R_AARCH64_P32_TLS_TPREL,
	R_AARCH64_P32_TLSDESC, R_AARCH64_P32_IRELATIVE): Define.
	(R_AARCH64_TLS_DTPMOD64): Rename to ..
	(R_AARCH64_TLS_DTPMOD): This.
	(R_AARCH64_TLS_DTPREL64): Rename to ...
	(R_AARCH64_TLS_DTPREL): This.
	(R_AARCH64_TLS_TPREL64): Rename to ...
	(R_AARCH64_TLS_TPREL): This.
	* sysdeps/aarch64/dl-machine.h (elf_machine_type_class): Update
	R_AARCH64_TLS_DTPMOD64, R_AARCH64_TLS_DTPREL64, and
	R_AARCH64_TLS_TPREL64.
	(elf_machine_rela): Likewise.

2014-11-21  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/microblaze/bits/atomic.h (__HAVE_64B_ATOMICS): Fix value
	by setting it to 0.  64b atomics are not supported currently.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #16469]
	* resolv/res_query.c (__libc_res_nsearch): Skip leading dot in
	search domain names.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #16469]
	* NEWS: Update.
	* resolv/res_query.c (__libc_res_nquerydomain): Retain
	trailing dot.
	* posix/tst-getaddrinfo5.c: New.
	* posix/Makefile (tests): Add it.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #14498]
	* NEWS: Fixed.
	* nss/nss_db/db-XXX.c (_nss_db_get##name##_r): Update hidx
	after parsing line but before break_if_match.
	* nss/nss_files/files-service (DB_LOOKUP): Don't "continue;"
	if there is a protocol mismatch.

2014-11-21  Ma Shimiao <mashimiao.fnst@cn.fujitsu.com>

	* manual/sysinfo.texi (addmntent): It is actually MT-Safe,
	because the potential race is on the user-supplied stream.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* sysdeps/posix/ctermid.c (ctermid): Return a pointer to a
	string literal if not passed a buffer.
	* manual/job.texi (ctermid): Update reasoning, note deviation
	from posix, suggest mtasurace when not passed a buffer, for
	future non-preliminary safety notes.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* manual/users.texi (cuserid): Fix MT-Safety note for the case
	of not passing it a buffer.
	Reported by Peng Haitao.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* manual/Makefile ($(objpfx)stamp-summary): Require
	check-safety.sh to pass.
	* manual/check-safety.sh: Wish for verification that every
	@deftypefn and @deftypefun is followed by a @safety remark.

2014-11-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/unwind.c (unwind_cleanup): Use __libc_fatal.

	* nptl/pthread_setcanceltype.c [!SIGCANCEL]: Return ENOTSUP early for
	PTHREAD_CANCEL_ASYNCHRONOUS.
	* nptl/pthread_cancel.c [!SIGCANCEL]: Just abort rather than trying to
	send SIGCANCEL.

	* nptl/default-sched.h: New file.
	* sysdeps/unix/sysv/linux/default-sched.h: New file.
	* nptl/pthread_create.c: Include it.
	(__pthread_create_2_1): Use collect_default_sched instead of making
	Linux syscalls here directly.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* nptl/pthread_once.c (clear_once_control, __pthread_once_slow,
	__pthread_once): Use C11 atomics.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* csu/tst-atomic.c (do_test): Add tests for C11-like atomics.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* include/atomic.h (__atomic_link_error, __atomic_check_size,
	atomic_thread_fence_acquire, atomic_thread_fence_release,
	atomic_thread_fence_seq_cst, atomic_load_relaxed,
	atomic_load_acquire, atomic_store_relaxed, atomic_store_release,
	atomic_compare_exchange_weak_relaxed,
	atomic_compare_exchange_weak_acquire,
	atomic_compare_exchange_weak_release,
	atomic_exchange_acquire, atomic_exchange_release,
	atomic_fetch_add_relaxed, atomic_fetch_add_acquire,
	atomic_fetch_add_release, atomic_fetch_add_acq_rel,
	atomic_fetch_and_acquire,
	atomic_fetch_or_relaxed, atomic_fetch_or_acquire): New.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/aarch64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Define.
	* sysdeps/alpha/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/arm/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/i386/i486/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/ia64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/m68k/coldfire/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/m68k/m680x0/m68020/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/microblaze/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/mips/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/s390/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc32/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/tile/tilegx/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/tile/tilepro/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h
	(__HAVE_64B_ATOMICS, USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/x86_64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.

2014-11-19  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Don't try to validate
	the sched_priority value here.  It was already checked when the user
	called pthread_attr_setschedparam.

	* nptl/tst-bad-schedattr.c: New file.
	* nptl/Makefile (tests): Add it.

2014-11-19  Carlos O'Donell  <carlos@redhat.com>
	    Florian Weimer  <fweimer@redhat.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Adam Conrad  <adconrad@0c3.net>
	    Andreas Schwab  <schwab@suse.de>
	    Brooks  <bmoses@google.com>

	[BZ #17625]
	* wordexp-test.c (__dso_handle): Add prototype.
	(__register_atfork): Likewise.
	(__app_register_atfork): New function.
	(registered_forks): New global.
	(register_fork): New function.
	(test_case): Add 3 new tests for WRDE_CMDSUB.
	(main): Call __app_register_atfork.
	(testit): If WRDE_NOCMD set registered_forks to zero, run test, and if
	fork count is non-zero fail the test.
	* posix/wordexp.c (exec_comm): Return WRDE_CMDSUB if WRDE_NOCMD flag
	is set.
	(parse_dollars): Remove check for WRDE_NOCMD.
	(parse_dquote): Likewise.

2014-11-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Makeconfig (built-modules): List non-library modules to be
	built.
	(module-cppflags): Include libc-modules.h for
	everything except shlib-versions.v.i.
	(CPPFLAGS): Use it.
	(before-compile): Add libc-modules.h.
	($(common-objpfx)libc-modules.h,
	$(common-objpfx)libc-modules.stmp): New targets.
	(common-generated): Add libc-modules.h and libc-modules.stmp.
	($(common-objpfx)Versions.v.i): Depend on libc-modules.h.
	* include/libc-symbols.h: Don't include libc-modules.h.
	* include/libc-modules.h: Remove file.
	* scripts/gen-libc-modules.awk: New script to generate
	libc-modules.h.
	* sysdeps/unix/Makefile ($(common-objpfx)sysd-syscalls):
	Depend on libc-modules.stmp.

	* include/shlib-compat.h (_SHLIB_COMPAT): Use IS_IN.

	* Makeconfig (in-module): Get value of libof set for the
	translation unit.
	(CPPFLAGS): Use $(in-module).
	* Makerules: Don't suffix routine names for nonlib.
	* include/libc-modules.h: New file.
	* include/libc-symbols.h: Include libc-modules.h
	(IS_IN): New macro to replace IS_IN_* macros.
	* elf/Makefile: Set libof-* for each routine.
	* elf/rtld-Rules: Likewise.
	* extra-modules.mk: Likewise.
	* iconv/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/Makefile: Likewise.
	* sysdeps/s390/s390-64/Makefile: Likewise.
	* nscd/Makefile: Set libof-* for each routine.  Set CFLAGS and
	CPPFLAGS for nscd instead of nonlib.

2014-11-18  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c: New file.

	* nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/createthread.c: ... here.

	* nptl/createthread.c: Add proper top-line comment.
	(do_clone): Folded into ...
	(create_thread): ... here.  Take new arguments STOPPED_START and
	THREAD_RAN.  Always set PD->stopped_start to something here.  Don't
	increment __nptl_threads, do event-reporting logic, do
	CHECK_THREAD_SYSINFO, or set THREAD_SELF->header.multiple_threads
	here.  Set *THREAD_RAN after ARCH_CLONE call succeeds.  Don't do any
	resource cleanup if sched_setaffinity or sched_setscheduler fails,
	just send SIGCANCEL.
	* nptl/pthread_create.c: Forward-declare create_thread before
	including createthread.c.
	(start_thread): Use new macro START_THREAD_DEFN to replace defining
	declaration, and new macro START_THREAD_SELF to replace argument.
	Remove return statement.
	(report_thread_creation): New function.
	(__pthread_create_2_1): Use it.  Do TD_CREATE reporting,
	synchronization logic, and __nptl_nthreads increment here, around
	calling create_thread.  Do CHECK_THREAD_SYSINFO and initialize
	PD->parent_cancelhandling here, before create_thread.  When
	create_thread fails, do __nptl_nthreads decrement, setxid_futex wake,
	__deallocate_stack, and ENOMEM translation here.

2014-11-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17616]
	* sysdeps/ieee754/dbl-64/mpa.c (mpone): Rename to __mpone.
	(mptwo): Rename to __mptwo.
	(__inv): Use __mptwo instead of mptwo.
	* sysdeps/ieee754/dbl-64/mpa.h (mpone): Rename to __mpone.
	(mptwo): Rename to __mptwo.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Use __mpone instead
	of mpone and __mptwo instead of mptwo.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Use __mpone
	instead of mpone.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c (__mplog): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (__c32): Use __mpone instead
	of mpone and __mptwo instead of mptwo.
	(__mpranred): Use __mpone instead of mpone.
	* conform/Makefile (test-xfail-ISO/math.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/complex.h/linknamespace): Likewise.
	(test-xfail-ISO99/math.h/linknamespace): Likewise.
	(test-xfail-ISO99/tgmath.h/linknamespace): Likewise.
	(test-xfail-ISO11/complex.h/linknamespace): Likewise.
	(test-xfail-ISO11/math.h/linknamespace): Likewise.
	(test-xfail-ISO11/tgmath.h/linknamespace): Likewise.
	(test-xfail-XPG3/math.h/linknamespace): Likewise.
	(test-xfail-XPG4/math.h/linknamespace): Likewise.
	(test-xfail-POSIX/math.h/linknamespace): Likewise.
	(test-xfail-UNIX98/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/complex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/math.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/linknamespace): Likewise.

2014-11-18  Tom de Vries  <tom@codesoucery.com>

	* manual/signal.texi (Primitives Interrupted by Signals): In section,
	replace BSD Handler xref with BSD Signal Handling.

2014-11-17  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/soft-fp/local-soft-fp.h (_FP_UNPACK_RAW_2): Remove.
	(_FP_PACK_RAW_2): Remove.
	(AXP_DECL_RETURN_Q): Rename from FP_DECL_RETURN, use _FP_UNION_Q.
	(AXP_RETURN_Q): Rename from FP_RETURN, use _FP_UNION_Q.
	(AXP_UNPACK_RAW_Q, AXP_UNPACK_SEMIRAW_Q, AXP_UNPACK_Q): New.
	(AXP_PACK_RAW_Q, AXP_PACK_SEMIRAW_Q, AXP_PACK_Q): New.
	* sysdeps/alpha/soft-fp/ots_add.c (_OtsAddX): Update to match.
	* sysdeps/alpha/soft-fp/ots_cmp.c (internal_equality): Likewise.
	* sysdeps/alpha/soft-fp/ots_cmpe.c (internal_compare): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtqux.c (_OtsCvtQUX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtqx.c (_OtsCvtQX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvttx.c (_OtsConvertFloatTX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtxq.c (_OtsCvtXQ): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtxt.c (_OtsConvertFloatXT): Likewise.
	* sysdeps/alpha/soft-fp/ots_div.c (_OtsDivX): Likewise.
	* sysdeps/alpha/soft-fp/ots_mul.c (_OtsMulX): Likewise.
	* sysdeps/alpha/soft-fp/ots_nintxq.c (_OtsNintXQ): Likewise.
	* sysdeps/alpha/soft-fp/ots_sub.c (_OtsSubX): Likewise.

2014-11-14  Roland McGrath  <roland@hack.frob.com>

	* signal/signal.h [__USE_MISC]
	(struct sigvec): Remove type.
	(SV_ONSTACK, SV_INTERRUPT, SV_RESETHAND): Remove macros.
	(sigvec): Remove declaration.
	* sysdeps/posix/sigvec.c: Moved ...
	* signal/sigvec.c: ... here, replacing old file.
	(struct sigvec): New type, copied from old signal.h definition.
	(SV_ONSTACK, SV_INTERRUPT, SV_RESETHAND): New macros, likewise copied.
	(__sigvec): Convert definition to prototype.
	(sigvec): Replace weak_alias with compat_symbol.
	* signal/Versions (libc: GLIBC_2.21): New version set.
	* include/signal.h: Remove __sigvec declaration.
	* sysdeps/unix/bsd/sigvec.c: Remove file.
	* sysdeps/unix/bsd/syscalls.list: Remove sigvec.
	* manual/signal.texi (BSD Handler): Remove subsection.
	Move siginterrupt up to ...
	(BSD Signal Handling): ... here.  Mark it as XPG rather than BSD.
	(Blocking in BSD): Fold subsection into its parent.
	* NEWS: Mention sigvec removal.

2014-11-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/fpu/dla.h [__FMA4__ && __GNUC_PREREQ (4, 6)]
	(DLA_FMS): Make definition conditional only on [__FMA4__].
	[__FMA4__ && !__GNUC_PREREQ (4, 6)] (DLA_FMS): Remove conditional
	definition.

	* sysdeps/arm/sysdep.h [PROF && __GNUC_PREREQ(4,4)] (CALL_MCOUNT):
	Make definition conditional only on [PROF].
	[PROF && !__GNUC_PREREQ(4,4)] (CALL_MCOUNT): Remove conditional
	definition.
	[__GNUC_PREREQ(4,4)] (mcount): Make definition unconditional.
	[!__GNUC_PREREQ(4,4)] (mcount): Remove conditional definition.

	* signal/signal.h (__sigpause): Only declare if [__USE_XOPEN &&
	!__GNUC__].
	* include/signal.h (__sigpause): Move declaration above call to
	libc_hidden_proto.
	* conform/Makefile (test-xfail-ISO/signal.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/signal.h/linknamespace): Likewise.
	(test-xfail-ISO11/signal.h/linknamespace): Likewise.

2014-11-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/rtld-memcpy.c (NO_MEMPCPY_STPCPY_REDIRECT):
	Define before including <string/memcpy.c> and <string/mempcpy.c>.

2014-11-14  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_compiler_ok): Require GCC 4.6 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Document a
	requirement of GCC 4.6 or later and that GCC 4.9 is the newest
	compiler verified to work.
	* INSTALL: Regenerated.

	* include/string.h [NO_MEMPCPY_STPCPY_REDIRECT] (mempcpy): Do not
	redeclare with asm name.
	[NO_MEMPCPY_STPCPY_REDIRECT] (stpcpy): Likewise.
	* string/mempcpy.c (NO_MEMPCPY_STPCPY_REDIRECT): Define before
	including <string.h>.
	* string/stpcpy.c (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c
	[!NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c
	[!NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c
	[SHARED && !NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.

2014-11-13  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/strtol.c (__strtol): Use prototype definition.

	[BZ #17594]
	* stdlib/strtol.c (SYM__): New macro.
	(SYM__1): Likewise.
	(__strtol): Likewise.
	(strtol): Rename to __strtol and define as weak alias of
	__strtol.  Use libc_hidden_weak.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h (RTLD_START):
	Use numbered labels in inline assembly.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/setjmp.S (__sigsetjmp):
	Add setjmp LIBC_PROBE.
	* sysdeps/s390/s390-64/setjmp.S (__sigsetjmp):
	Likewise.
	* sysdeps/s390/s390-32/__longjmp.c (__longjmp):
	Add longjmp, longjmp_target LIBC_PROBE.
	* sysdeps/s390/s390-64/__longjmp.c (__longjmp):
	Likewise.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela):
	Gate the definition of refsym additionally with !RTLD_BOOTSTRAP
	to get rid of unused variable warning.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/backtrace.c (__backtrace):
	Check for unwind_backtrace ==  NULL only in SHARED case.
	(__backchain_backtrace): Compile only in SHARED case.
	* sysdeps/s390/s390-64/backtrace.c (__backtrace):
	Likewise.
	(__backchain_backtrace): Declare as static.

2014-11-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c [!TLS_MULTIPLE_THREADS_IN_TCB]
	(__libc_multiple_threads_ptr): Variable moved ...
	* nptl/nptl-init.c [!TLS_MULTIPLE_THREADS_IN_TCB]: ... here.

2014-11-12  Joseph Myers  <joseph@codesourcery.com>

	* conform/GlibcConform.pm: New file.
	* conform/conformtest.pl: Use GlibcConform module.
	* conform/linknamespace.pl: New file.
	* conform/list-header-symbols.pl: Likewise.
	* conform/Makefile (linknamespace-symlists-base): New variable.
	(linknamespace-symlists-tests): Likewise.
	(linknamespace-header-base): Likewise.
	(linknamespace-header-tests): Likewise.
	(tests-special): Add new tests.
	($(linknamespace-symlists-tests)): New rule.
	(linknamespace-libs): New variable.
	($(objpfx)symlist-stdlibs): New rule.
	($(linknamespace-header-tests)): Likewise.
	(test-xfail-XPG3/varargs.h/linknamespace): New variable.
	(test-xfail-XPG4/varargs.h/linknamespace): Likewise.
	(test-xfail-UNIX98/varargs.h/linknamespace): Likewise.
	(test-xfail-XPG4/ndbm.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ndbm.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/ndbm.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/ndbm.h/linknamespace): Likewise.
	(test-xfail-ISO/math.h/linknamespace): Likewise.
	(test-xfail-ISO/signal.h/linknamespace): Likewise.
	(test-xfail-ISO/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO/time.h/linknamespace): Likewise.
	(test-xfail-ISO99/complex.h/linknamespace): Likewise.
	(test-xfail-ISO99/ctype.h/linknamespace): Likewise.
	(test-xfail-ISO99/math.h/linknamespace): Likewise.
	(test-xfail-ISO99/signal.h/linknamespace): Likewise.
	(test-xfail-ISO99/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO99/tgmath.h/linknamespace): Likewise.
	(test-xfail-ISO11/complex.h/linknamespace): Likewise.
	(test-xfail-ISO11/ctype.h/linknamespace): Likewise.
	(test-xfail-ISO11/math.h/linknamespace): Likewise.
	(test-xfail-ISO11/signal.h/linknamespace): Likewise.
	(test-xfail-ISO11/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO11/tgmath.h/linknamespace): Likewise.
	(test-xfail-XPG3/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG3/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XPG3/glob.h/linknamespace): Likewise.
	(test-xfail-XPG3/math.h/linknamespace): Likewise.
	(test-xfail-XPG3/regex.h/linknamespace): Likewise.
	(test-xfail-XPG3/search.h/linknamespace): Likewise.
	(test-xfail-XPG3/stdio.h/linknamespace): Likewise.
	(test-xfail-XPG3/time.h/linknamespace): Likewise.
	(test-xfail-XPG3/unistd.h/linknamespace): Likewise.
	(test-xfail-XPG3/wordexp.h/linknamespace): Likewise.
	(test-xfail-XPG4/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG4/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XPG4/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XPG4/glob.h/linknamespace): Likewise.
	(test-xfail-XPG4/grp.h/linknamespace): Likewise.
	(test-xfail-XPG4/libgen.h/linknamespace): Likewise.
	(test-xfail-XPG4/math.h/linknamespace): Likewise.
	(test-xfail-XPG4/netdb.h/linknamespace): Likewise.
	(test-xfail-XPG4/pwd.h/linknamespace): Likewise.
	(test-xfail-XPG4/regex.h/linknamespace): Likewise.
	(test-xfail-XPG4/search.h/linknamespace): Likewise.
	(test-xfail-XPG4/stdio.h/linknamespace): Likewise.
	(test-xfail-XPG4/stdlib.h/linknamespace): Likewise.
	(test-xfail-XPG4/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XPG4/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XPG4/syslog.h/linknamespace): Likewise.
	(test-xfail-XPG4/time.h/linknamespace): Likewise.
	(test-xfail-XPG4/unistd.h/linknamespace): Likewise.
	(test-xfail-XPG4/wordexp.h/linknamespace): Likewise.
	(test-xfail-POSIX/aio.h/linknamespace): Likewise.
	(test-xfail-POSIX/fnmatch.h/linknamespace): Likewise.
	(test-xfail-POSIX/glob.h/linknamespace): Likewise.
	(test-xfail-POSIX/math.h/linknamespace): Likewise.
	(test-xfail-POSIX/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX/sched.h/linknamespace): Likewise.
	(test-xfail-POSIX/semaphore.h/linknamespace): Likewise.
	(test-xfail-POSIX/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX/time.h/linknamespace): Likewise.
	(test-xfail-POSIX/unistd.h/linknamespace): Likewise.
	(test-xfail-POSIX/wordexp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/aio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ctype.h/linknamespace): Likewise.
	(test-xfail-UNIX98/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-UNIX98/fnmatch.h/linknamespace): Likewise.
	(test-xfail-UNIX98/glob.h/linknamespace): Likewise.
	(test-xfail-UNIX98/grp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/libgen.h/linknamespace): Likewise.
	(test-xfail-UNIX98/math.h/linknamespace): Likewise.
	(test-xfail-UNIX98/mqueue.h/linknamespace): Likewise.
	(test-xfail-UNIX98/netdb.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pthread.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/regex.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sched.h/linknamespace): Likewise.
	(test-xfail-UNIX98/search.h/linknamespace): Likewise.
	(test-xfail-UNIX98/semaphore.h/linknamespace): Likewise.
	(test-xfail-UNIX98/stdio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/stdlib.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-UNIX98/syslog.h/linknamespace): Likewise.
	(test-xfail-UNIX98/time.h/linknamespace): Likewise.
	(test-xfail-UNIX98/unistd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/wchar.h/linknamespace): Likewise.
	(test-xfail-UNIX98/wordexp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/aio.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/glob.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/grp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/netdb.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/pwd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/regex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/signal.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/spawn.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/stdlib.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/wait.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/syslog.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/ucontext.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/unistd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/wordexp.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/aio.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/complex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/ctype.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/dirent.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/fcntl.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/grp.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/math.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/net/if.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/netdb.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/semaphore.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/spawn.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/tgmath.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/time.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/unistd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/aio.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/dirent.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/grp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pwd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/regex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/spawn.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/syslog.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/unistd.h/linknamespace): Likewise.

	[BZ #17589]
	* intl/localealias.c [_LIBC] (FGETS): Use __fgets_unlocked instead
	of fgets_unlocked.

	[BZ #17585]
	* string/memmem.c [!_LIBC] (__memmem): Define to memmem.
	(memmem): Rename to __memmem and define as weak alias of
	__memmem.  Use libc_hidden_weak.
	(__memmem): Use libc_hidden_def.
	* include/string.h (__memmem): Declare.  Use libc_hidden_proto.
	* locale/findlocale.c (valid_locale_name): Use __memmem instead of
	memmem.

	[BZ #17582]
	* libio/iofgets.c [weak_alias && !_IO_MTSAFE_IO]
	(__fgets_unlocked): Add alias of _IO_fgets.  Use libc_hidden_def.
	* libio/iofgets_u.c (fgets_unlocked): Rename to __fgets_unlocked
	and define as weak alias of __fgets_unlocked.  Use
	libc_hidden_weak.
	(__fgets_unlocked): Use libc_hidden_def.
	* include/stdio.h (__fgets_unlocked): Declare.  Use
	libc_hidden_proto.
	* sysdeps/unix/sysv/linux/getsysstats.c (phys_pages_info): Use
	__fgets_unlocked instead of fgets_unlocked.
	* sysdeps/unix/sysv/linux/alpha/getsysstats.c
	(GET_NPROCS_CONF_PARSER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/getsysstats.c
	(GET_NPROCS_CONF_PARSER): Likewise.

	[BZ #17574]
	* wcsmbs/wmemset.c (wmemset): Rename to __wmemset and define as
	weak alias of __wmemset.  Use libc_hidden_weak.
	(__wmemset): Use libc_hidden_def.
	* include/wchar.h (__wmemset): Declare.  Use libc_hidden_proto.
	* stdio-common/printf_fp.c (___printf_fp): Call __wmemset instead
	of wmemset.

	[BZ #17573]
	* include/string.h [NOT_IN_libc || !SHARED] (mempcpy): Declare
	with asm name __mempcpy.
	[NOT_IN_libc || !SHARED] (stpcpy): Declare with asm name __stpcpy.

	[BZ #17572]
	* sysdeps/x86_64/rawmemchr.S (rawmemchr): Rename to __rawmemchr
	and define as weak alias of __rawmemchr.
	(__rawmemchr): Do not define as strong alias of rawmemchr.

	[BZ #17571]
	* stdlib/msort.c (qsort_r): Rename to __qsort_r and define as weak
	alias of __qsort_r.
	(qsort): Call __qsort_r instead of qsort_r.
	* include/stdlib.h (qsort_r): Do not call libc_hidden_proto.
	(__qsort_r): Declare.  Call libc_hidden_proto.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Call __qsort_r
	instead of qsort_r.
	* nscd/gai.c (__qsort_r): Define to qsort_r.
	* posix/tst-rfc3484.c (__qsort_r): Likewise.
	* posix/tst-rfc3484-2.c (__qsort_r): Likewise.
	* posix/tst-rfc3484-3.c (__qsort_r): Likewise.

	[BZ #17570]
	* malloc/malloc.c (malloc_info): Rename to __malloc_info and
	define as weak alias of __malloc_info.

	[BZ #17584]
	* dirent/rewinddir.c (rewinddir): Rename to __rewinddir and define
	as weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* sysdeps/mach/hurd/rewinddir.c: Rename to __rewinddir and define
	as weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* sysdeps/posix/rewinddir.c: Rename to __rewinddir and define as
	weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* include/dirent.h (rewinddir): Don't use libc_hidden_proto.
	(__rewinddir): Use libc_hidden_proto.
	* sysdeps/posix/getcwd.c [!_LIBC] (__rewinddir): Define to
	rewinddir.
	(__getcwd): Use __rewinddir instead of rewinddir.

	[BZ #17583]
	* libio/fileno.c (fileno): Rename to __fileno and define as weak
	alias of __fileno.  Use libc_hidden_weak.
	(__fileno): Use libc_hidden_def.
	[weak_alias] (fileno_unlocked): Define as weak alias of __fileno.
	* libio/ftello.c (ftello): Rename to __ftello and define as weak
	alias of __ftello.
	[__OFF_T_MATCHES_OFF64_T] (ftello64): Define as weak alias of
	__ftello.
	* libio/iofread.c [weak_alias && !_IO_MTSAFE_IO]
	(__fread_unlocked): Define as strong alias of _IO_fread.  Use
	libc_hidden_def.
	(fread_unlocked): Don't use libc_hidden_ver.
	* libio/iofread_u.c (fread_unlocked): Rename to __fread_unlocked
	and define as weak alias of __fread_unlocked.  Don't use
	libc_hidden_def.
	(__fread_unlocked): Use libc_hidden_def.
	* include/stdio.h (__fileno): Declare.  Use libc_hidden_proto.
	(ftello): Don't use libc_hidden_proto.
	(__ftello): Declare.  Use libc_hidden_proto.
	(fread_unlocked): Don't use libc_hidden_proto.
	(__fread_unlocked): Declare.  Use libc_hidden_proto.
	* time/tzfile.c (__tzfile_read): Use __fileno, __fread_unlocked
	and __ftello instead of fileno, fread_unlocked and ftello.

2012-11-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/s390-32/bcopy.S (__bcopy): Use GOT instead of
	GOT12.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_load_address):
	Likewise.
	(_dl_start_user): Likewise.
	* sysdeps/s390/s390-32/setjmp.S (__sigsetjmp): Likewise.

2014-11-12  Carlos O'Donell  <carlos@redhat.com>
	    Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/s390-32/dl-machine.h (_dl_start_user):
	Move argv and envp down instead of moving argc up.
	* sysdeps/s390/s390-32/dl-sysdep.h: New file.

2014-11-12  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #17506]
	* test-skeleton.c (main): Return successful if one of
	EXPECTED_SIGNAL or EXPECTED_STATUS is met when both given.
	* string/tst-strcoll-overflow.c: Define expected status.

2014-11-12  Tatiana Udalova  <t.udalova@samsung.com>

	[BZ #17475]
	* locale/iso-639.def: Define Bhili and Tulu language codes.

2014-11-11  Alan Hayward  <alan.hayward@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/bits/ipc.h: New file.

2014-11-10  Renlin Li  <Renlin.Li@arm.com>

	[BZ #17555]
	* sysdeps/aarch64/start.S (_start): Delete x29 overwritten assignment.

2014-11-10  Andrew Senkevich  <andrew.n.senkevich@gmail.com>

	* configure.ac: Updated check of minimal required version to
	2.22.
	* manual/install.texi (Tools for Compilation): Updated version
	number.
	* configure: Regenerated.
	* INSTALL: Likewise.

2014-11-07  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/localplt.data (ld.so): Remove
	__tls_get_addr.

2014-11-07  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/wait.h (__libc_waitpid): Remove declaration.
	* posix/waitpid.c (__libc_waitpid): Rename to __waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.
	* sysdeps/unix/bsd/waitpid.c (__libc_waitpid): Rename to
	__waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (waitpid): Remove
	__libc_waitpid alias.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list (waitpid):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/sparc/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S (__libc_waitpid): Remove
	alias.
	* sysdeps/unix/sysv/linux/waitpid.c (__libc_waitpid): Rename to
	__waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.

2014-11-06  Carlos O'Donell  <carlos@redhat.com>

	* manual/llio.texi: Add comment that write safety has been
	fixed in Linux.

	* elf/Makefile (all-built-dso): Add $(common-objpfx)elf/ld.so.
	(localplt-build-dso): Add elf/ld.so.
	* sysdeps/unix/sysv/linux/i386/localplt.data: Add ___tls_get_addr
	i.e. 3 underscore version, __libc_memalign, malloc, calloc, realloc,
	and free for ld.so.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data: Add
	__libc_memalign, malloc, calloc, realloc, and free for ld.so.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/localplt.data: Likewise.
	* sysdeps/generic/localplt.data: Add __tls_get_addr i.e. 2 underscore
	version, __libc_memalign, malloc, calloc, realloc and free for ld.so.
	* sysdeps/unix/sysv/linux/aarch64/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/arm/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/alpha/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/ia64/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/m68k/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: Likewise.

2014-11-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* include/libc-symbols.h (INTUSE): Remove macro.
	(INTDEF): Likewise.
	(INTVARDEF): Likewise.
	(_INTVARDEF): Likewise.
	(INTDEF2): Likewise.
	(INTVARDEF2): Likewise.
	* elf/rtld.c [!HAVE_INLINED_SYSCALLS] (_dl_starting_up): Use
	rtld_hidden_def instead of INTVARDEF.
	* sysdeps/generic/ldsodefs.h [IS_IN_rtld]
	(_dl_starting_up_internal): Remove declaration.
	(_dl_starting_up): Use rtld_hidden_proto.
	* elf/dl-init.c [!HAVE_INLINED_SYSCALLS] (_dl_starting_up): Remove
	declaration.
	[!HAVE_INLINED_SYSCALLS] (_dl_starting_up_internal): Likewise.
	(_dl_init) [!HAVE_INLINED_SYSCALLS]: Don't use INTUSE with
	_dl_starting_up.
	* elf/dl-writev.h (_dl_writev): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h [!HAVE_INLINED_SYSCALLS]
	(DL_STARTING_UP_DEF): Use __GI__dl_starting_up instead of
	_dl_starting_up_internal.

2014-11-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* stdio-common/tst-fmemopen.c (do_test): Refactor to use
	test-skeleton.c.

2014-11-05  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile: (bench-malloc): Add malloc thread
	scalability benchmark.
	* benchtests/bench-malloc-threads.c: New file.

2014-11-05  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchrnul.S: New file.

2014-11-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/memset.S (MTVSRD_V1_R4): Simplify
	definition.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S (MFVSRD_R3_V1):
	Likwise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S (MFVSRD_R3_V1):
	Likewise.

2014-11-05  Arjun Shankar  <arjun.is@lostca.se>

	* catgets/test-gencat.c: Use test-skeleton.c.
	* catgets/tst-catgets.c: Likewise.
	* csu/tst-empty.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-global1.c: Likewise.
	* elf/tst-pathopt.c: Likewise.
	* elf/tst-piemod1.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* gnulib/tst-gcc.c: Likewise.
	* iconvdata/tst-e2big.c: Likewise.
	* iconvdata/tst-loading.c: Likewise.
	* iconv/tst-iconv1.c: Likewise.
	* iconv/tst-iconv2.c: Likewise.
	* inet/test-inet6_opt.c: Likewise.
	* inet/tst-gethnm.c: Likewise.
	* inet/tst-network.c: Likewise.
	* inet/tst-ntoa.c: Likewise.
	* intl/tst-codeset.c: Likewise.
	* intl/tst-gettext2.c: Likewise.
	* intl/tst-gettext3.c: Likewise.
	* intl/tst-ngettext.c: Likewise.
	* intl/tst-translit.c: Likewise.
	* io/test-stat.c: Likewise.
	* libio/test-fmemopen.c: Likewise.
	* libio/tst-freopen.c: Likewise.
	* libio/tst-sscanf.c: Likewise.
	* libio/tst-ungetwc1.c: Likewise.
	* libio/tst-ungetwc2.c: Likewise.
	* libio/tst-widetext.c: Likewise.
	* localedata/tst-ctype.c: Likewise.
	* localedata/tst-digits.c: Likewise.
	* localedata/tst-leaks.c: Likewise.
	* localedata/tst-mbswcs1.c: Likewise.
	* localedata/tst-mbswcs2.c: Likewise.
	* localedata/tst-mbswcs3.c: Likewise.
	* localedata/tst-mbswcs4.c: Likewise.
	* localedata/tst-mbswcs5.c: Likewise.
	* localedata/tst-setlocale.c: Likewise.
	* localedata/tst-trans.c: Likewise.
	* localedata/tst-wctype.c: Likewise.
	* localedata/tst-xlocale1.c: Likewise.
	* login/tst-grantpt.c: Likewise.
	* malloc/tst-calloc.c: Likewise.
	* malloc/tst-malloc.c: Likewise.
	* malloc/tst-mallocstate.c: Likewise.
	* malloc/tst-mcheck.c: Likewise.
	* malloc/tst-mtrace.c: Likewise.
	* malloc/tst-obstack.c: Likewise.
	* math/atest-exp2.c: Likewise.
	* math/atest-exp.c: Likewise.
	* math/atest-sincos.c: Likewise.
	* math/test-matherr.c: Likewise.
	* math/test-misc.c: Likewise.
	* math/test-powl.c: Likewise.
	* math/tst-definitions.c: Likewise.
	* misc/tst-dirname.c: Likewise.
	* misc/tst-efgcvt.c: Likewise.
	* misc/tst-fdset.c: Likewise.
	* misc/tst-hsearch.c: Likewise.
	* misc/tst-mntent2.c: Likewise.
	* nptl/tst-sem7.c: Likewise.
	* nptl/tst-sem8.c: Likewise.
	* nptl/tst-sem9.c: Likewise.
	* nss/test-netdb.c: Likewise.
	* posix/tst-fnmatch.c: Likewise.
	* posix/tst-getlogin.c: Likewise.
	* posix/tst-gnuglob.c: Likewise.
	* posix/tst-mmap.c: Likewise.
	* pwd/tst-getpw.c: Likewise.
	* resolv/tst-inet_ntop.c: Likewise.
	* rt/tst-timer.c: Likewise.
	* stdio-common/test-fseek.c: Likewise.
	* stdio-common/test-popen.c: Likewise.
	* stdio-common/test-vfprintf.c: Likewise.
	* stdio-common/tst-cookie.c: Likewise.
	* stdio-common/tst-fileno.c: Likewise.
	* stdio-common/tst-gets.c: Likewise.
	* stdio-common/tst-obprintf.c: Likewise.
	* stdio-common/tst-perror.c: Likewise.
	* stdio-common/tst-sprintf2.c: Likewise.
	* stdio-common/tst-sprintf3.c: Likewise.
	* stdio-common/tst-sprintf.c: Likewise.
	* stdio-common/tst-swprintf.c: Likewise.
	* stdio-common/tst-tmpnam.c: Likewise.
	* stdio-common/tst-unbputc.c: Likewise.
	* stdio-common/tst-wc-printf.c: Likewise.
	* stdlib/tst-environ.c: Likewise.
	* stdlib/tst-fmtmsg.c: Likewise.
	* stdlib/tst-limits.c: Likewise.
	* stdlib/tst-rand48-2.c: Likewise.
	* stdlib/tst-rand48.c: Likewise.
	* stdlib/tst-random2.c: Likewise.
	* stdlib/tst-random.c: Likewise.
	* stdlib/tst-strtol.c: Likewise.
	* stdlib/tst-strtoll.c: Likewise.
	* stdlib/tst-tls-atexit.c: Likewise.
	* stdlib/tst-xpg-basename.c: Likewise.
	* string/test-ffs.c: Likewise.
	* string/tst-bswap.c: Likewise.
	* string/tst-inlcall.c: Likewise.
	* string/tst-strtok.c: Likewise.
	* string/tst-strxfrm.c: Likewise.
	* sysdeps/x86_64/tst-audit10.c: Likewise.
	* sysdeps/x86_64/tst-audit3.c: Likewise.
	* sysdeps/x86_64/tst-audit4.c: Likewise.
	* sysdeps/x86_64/tst-audit5.c: Likewise.
	* time/tst-ftime_l.c: Likewise.
	* time/tst-getdate.c: Likewise.
	* time/tst-mktime3.c: Likewise.
	* time/tst-mktime.c: Likewise.
	* time/tst-posixtz.c: Likewise.
	* time/tst-strptime2.c: Likewise.
	* time/tst-strptime3.c: Likewise.
	* wcsmbs/tst-btowc.c: Likewise.
	* wcsmbs/tst-mbrtowc.c: Likewise.
	* wcsmbs/tst-mbsrtowcs.c: Likewise.
	* wcsmbs/tst-wchar-h.c: Likewise.
	* wcsmbs/tst-wcpncpy.c: Likewise.
	* wcsmbs/tst-wcrtomb.c: Likewise.
	* wcsmbs/tst-wcsnlen.c: Likewise.
	* wcsmbs/tst-wcstof.c: Likewise.

2014-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* elf/dl-profile.c (_dl_mcount): Use rtld_hidden_def instead of
	INTDEF.
	* sysdeps/generic/ldsodefs.h (_dl_mcount_internal): Remove
	declaration.
	(_dl_mcount): Use rtld_hidden_proto.
	* elf/dl-runtime.c (_dl_profile_fixup): Don't use INTUSE with
	_dl_mcount.
	* elf/rtld.c (_rtld_global_ro): Likewise.

	[BZ #14132]
	* elf/dl-init.c (_dl_init): Don't use INTDEF.
	* sysdeps/aarch64/dl-machine.h (RTLD_START): Use _dl_init instead
	of _dl_init_internal.
	* sysdeps/alpha/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/arm/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/hppa/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/i386/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/ia64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/m68k/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/microblaze/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/mips/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/powerpc/powerpc32/dl-start.S (_start): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sh/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/tile/dl-start.S (_start): Likewise.
	* sysdeps/x86_64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/x86_64/x32/dl-machine.h (RTLD_START): Likewise.

	[BZ #14132]
	* sysdeps/generic/ldsodefs.h (_dl_argv): Use rtld_hidden_proto.
	[IS_IN_rtld] (_dl_argv_internal): Do not declare.
	(rtld_progname): Make macro definition unconditional.
	* elf/rtld.c (_dl_argv): Use rtld_hidden_data_def instead of
	INTDEF.
	(dlmopen_doit): Do not use INTUSE with _dl_argv.
	(dl_main): Likewise.
	* elf/dl-sysdep.c (_dl_sysdep_start): Likewise.
	* sysdeps/alpha/dl-machine.h (RTLD_START): Use __GI__dl_argv
	instead of _dl_argv_internal.
	* sysdeps/powerpc/powerpc32/dl-start.S (_dl_start_user): Use
	__GI__dl_argv instead of INTUSE(_dl_argv).
	* sysdeps/powerpc/powerpc64/dl-machine.h (RTLD_START): Use
	__GI__dl_argv instead of _dl_argv_internal.

	* soft-fp/op-common.h (_FP_TO_INT_ROUND): New macro.
	* soft-fp/double.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_D): New
	macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_D): Likewise.
	* soft-fp/extended.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_E):
	New macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_E): Likewise.
	* soft-fp/quad.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_Q): New
	macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_Q): Likewise.
	* soft-fp/single.h (FP_TO_INT_ROUND_S): New macro.

2014-11-04  Andreas Schwab  <schwab@suse.de>

	* posix/regex_internal.h: Don't include <locale/elem-hash.h>.

2014-11-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/memset.S (MTVSRD_V1_R4): Encode
	mtvsrd instruction in binary form.

2014-11-03  Andreas Schwab  <schwab@suse.de>

	[BZ #17522]
	* libio/wfileops.c (_IO_wdo_write): If the file buffer has room
	for less than MB_LEN_MAX use a local buffer of that size.
	* libio/tst-fputws.c: New file.
	* libio/Makefile (tests): Add tst-fputws.

2014-11-01  Jose E. Marchesi  <jose.marchesi@oracle.com>

	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (struct fpu): fix
	the size of the fpu_fr.fpu_dregs[] array.

2014-11-01  Joseph Myers  <joseph@codesourcery.com>

	* posix/nanosleep.c (__libc_nanosleep): Rename to __nanosleep.
	(__nanosleep): Do not define as alias.
	(nanosleep): Define as alias of __nanosleep.
	* sysdeps/unix/sysv/linux/syscalls.list (nanosleep): Remove
	__libc_nanosleep name.

2014-10-31  Joseph Myers  <joseph@codesourcery.com>

	* aclocal.m4 (GLIBC_AUTOCONF_VERSION): Mention need to update
	install.texi in comment.

2014-10-31  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/powerpc/bits/atomic.h (atomic_write_barrier): Remove and...
	* sysdeps/powerpc/powerpc32/bits/atomic.h (atomic_write_barrier):
	... add here and use lwsync or sync ...
	* sysdeps/powerpc/powerpc64/bits/atomic.h (atomic_write_barrier):
	... and add here using lwsync.

2014-10-31  Matthew Fortune  <matthew.fortune@imgtec.com>

	* elf/dl-machine-reject-phdr.h: New file.
	* elf/dl-load.c: #include that.
	(open_verify): Call elf_machine_reject_phdr_p and ignore the file
	if that returned true.

2014-10-31  Roland McGrath  <roland@hack.frob.com>

	[BZ #17496]
	* Makerules: Move gnu/lib-names.h generation chunk up, to right after
	gen-as-const-headers chunk.  Add a big scare comment after the last
	safe place to touch before-compile.

2014-10-31  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (Tools for Compilation): Update autoconf
	version requirements.
	* INSTALL: Regenerated.

	* misc/pselect.c [!__pselect] (__libc_pselect): Remove alias.
	* sysdeps/unix/sysv/linux/pselect.c [__NR_pselect6]
	(__libc_pselect): Likewise.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Remove file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.

2014-10-31  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/sparc/sparc32/bits/atomic.h (atomic_write_barrier): Use
	correct barrier instruction.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (atomic_write_barrier):
	Likewise.
	* sysdeps/sparc/sparc64/bits/atomic.h (atomic_write_barrier):
	Likewise.

2014-10-30  Roland McGrath  <roland@hack.frob.com>

	* include/ctype.h: Include <ctype/ctype.h> first thing rather than
	after defining inlines.  Instead, just use parens to defeat macro
	expansion of __isctype in its declaration.

2014-10-30  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/uio.h (__libc_readv): Remove declaration.
	(__libc_writev): Likewise.
	* misc/readv.c (__libc_readv): Rename to __readv.
	(__readv): Do not define as alias.
	(readv): Define as alias of __readv.
	* misc/writev.c (__libc_writev): Rename to __writev.
	(__writev): Do not define as alias.
	(writev): Define as alias of __writev.
	* sysdeps/posix/readv.c (__libc_readv): Rename to __readv.
	(__readv): Do not define as alias.
	(readv): Define unconditionally as alias of __readv.
	* sysdeps/posix/writev.c (__libc_writev): Rename to __writev.
	(__writev): Do not define as alias.
	(writev): Define unconditionally as alias of __writev.
	* sysdeps/unix/syscalls.list (readv): Do not define __libc_readv
	name.
	(writev): Do not define __libc_writev name.

2014-10-30  Roland McGrath  <roland@hack.frob.com>

	* iconv/iconv_charmap.c (add_bytes): Make IN argument pointer to const.
	(convert_charseq): New function, broken out of ...
	(use_from_charmap): ... here.  Call it.
	(use_to_charmap): Use convert_charseq and free instead of duplicating
	its code with a variable-length stack struct.

2014-10-30  Joseph Myers  <joseph@codesourcery.com>

	* include/fcntl.h (__libc_creat): Remove declaration.
	* io/creat.c (__libc_creat): Rename to creat.
	(creat): Do not define as alias.
	* sysdeps/unix/sysv/linux/alpha/creat.c (creat64): Define as alias
	of creat instead of __libc_creat.
	* sysdeps/unix/sysv/linux/generic/creat.c (__libc_creat): Rename
	to creat.
	(creat): Do not define as alias.
	[__WORDSIZE == 64] (creat64): Define as alias of creat instead of
	__libc_creat.
	* sysdeps/unix/sysv/linux/syscalls.list (creat): Do not define
	__libc_creat name.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (creat):
	Likewise.

2014-10-29  Carlos O'Donell  <carlos@redhat.com>

	* manual/llio.texi: Add comments discussing why write() may be
	considered MT-unsafe on Linux.

2014-10-28  Carlos O'Donell  <carlos@redhat.com>

	* dl-load.c (local_strdup): Remove.
	(expand_dynamic_string_token): Use __strdup.
	(decompose_rpath): Likewise.
	(_dl_map_object): Likewise.

2014-10-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/generic/unwind-dw2-fde.c
	(__register_frame_info_bases_internal): Do not declare.
	(__register_frame_info_table_bases_internal): Likewise.
	(__deregister_frame_info_bases_internal): Likewise.
	(__register_frame_info_bases): Declare and use hidden_proto before
	definition.  Use hidden_def instead of INTDEF.
	(__register_frame_info_table_bases): Likewise.
	(__deregister_frame_info_bases): Likewise.
	(__register_frame_info): Do not use INTUSE.
	(__register_frame): Likewise.
	(__register_frame_info_table): Likewise.
	(__register_frame_table): Likewise.
	(__deregister_frame_info): Likewise.
	(__deregister_frame): Likewise.

2014-10-27  Gratian Crisan  <gratian.crisan@ni.com>

	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_FUTEX_LOCK_PI): Do
	not undefine.
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_REQUEUE_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_SET_ROBUST_LIST):
	Likewise.

2014-10-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/setfsgid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (setfsgid): Add
	syscall.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (setfsgid):
	Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (setfsgid):
	Likewise.
	(setfsuid): Likewise.

2014-10-27  Andreas Schwab  <schwab@suse.de>

	[BZ #17501]
	* sysdeps/i386/i686/multiarch/strcasecmp.S (__strcasecmp): Fix
	check for Slow_SSE4_2 feature bit.
	* sysdeps/i386/i686/multiarch/strcmp.S (STRCMP): Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S (__strncasecmp): Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S (STRCMP, __strcascmp):
	Likewise.  Fix check for Fast_Unaligned_Load feature bit.

2014-10-24  Roland McGrath  <roland@hack.frob.com>

	* configure.ac: Validate compiler version with a empirical test of
	__GNUC__ and __GNUC_MINOR__ predefined values, rather than by grepping
	$CC -v output.
	* configure: Regenerated.

	* inet/htons.c (htons): Prototypify.
	* inet/htonl.c (htonl): Likewise.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strncat.c (strncat): Improve performance by using strlen.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strcat.c (strcat): Improve performance by using strlen/strcpy.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fgetexcptflg.c (fegetexceptflag):
	Call libc_fetestexcept_aarch64.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept):
	Call libc_feholdexcept_aarch64.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fegetround.c (fegetround):
	Call get_rounding_mode.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept):
	Simplify logic.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fedisblxcpt.c (fedisableexcept):
	Simplify logic.

2014-10-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/getegid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (getegid): Add
	syscall.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (getegid):
	Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (getegid):
	Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getgroups): Likewise.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/i386/chown.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/fchown.c: Remove file.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Versions (GLIBC_2.1): Add
	__chown.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (chown): Add syscall.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (chown):
	Likewise.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (chown): Likewise.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (chown):
	Likewise.
	(lchown): Likewise.
	(fchown): Likewise.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fclrexcpt.c (feclearexcept):
	Simplify logic.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fsetexcptflg.c (fsetexceptflag):
	Cleanup logic.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fsetexcptflg.c (fsetexceptflag):
	Remove unused include.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Remove spaces.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Remove spaces.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Remove spaces.
	* sysdeps/aarch64/fpu/fraiseexcpt.c (feraiseexcept): Remove spaces.

2014-10-23  Carlos O'Donell  <carlos@systemhalted.org>
	    Helge Deller <deller@gmx.de>

	[BZ #17508]
	* sysdeps/unix/sysv/linux/hppa/bits/signum.h: Remove SIGEMT.
	Define SIGSTKFLT as 7. Define SIGSYS as 31. Define SIGXCPU as 12.
	Remove SIGLOST. Define SIGXFSZ as 30. Define __SIGRTMIN as 32.

2014-10-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/powerpc/powerpc32/libgcc-compat.S (__ashldi3_v_glibc20):
	Remove macro definition.
	(__ashrdi3_v_glibc20): Likewise.
	(__lshrdi3_v_glibc20): Likewise.
	(__cmpdi2_v_glibc20): Likewise.
	(__ucmpdi2_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixdfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixsfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixunsdfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixunssfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__floatdidf_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__floatdisf_v_glibc20): Likewise.

2014-10-22  Roland McGrath  <roland@hack.frob.com>

	* inet/netgroup.h (struct name_list): Use C99 [] syntax rather than
	old GNU extension [0] syntax.
	* nscd/nscd_helper.c (open_socket): Use a flexible array member and
	alloca rather than an array member with variable length.
	* nscd/netgroupcache.c (addgetnetgrentX): Likewise.
	* nscd/nscd.c (invalidate_db): New function, broken out of ...
	(parse_opt): ... here.  Likewise use alloca there.
	Validate the -i argument before checking for rootness.
	(send_shutdown): New function, broken out of ...
	(parse_opt): ... here.

2014-10-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/__longjmp.S [NEED_HWCAP] [IS_IN_rtld]: Use LDST_PCREL
	macro to get at the _rt_local_ro field.
	[NEED_HWCAP] [!IS_IN_rtld]: Use LDR_GLOBAL to get at _rtld_global_ro
	([PIC] case) or _dl_hwcap ([!PIC] case).
	* sysdeps/arm/setjmp.S: Likewise.

	* config.h.in (ARM_PCREL_MOVW_OK): New macro.
	* sysdeps/arm/configure.ac: New check to define it.
	* sysdeps/arm/configure: Regenerated.
	* sysdeps/arm/sysdep.h [__ASSEMBLER__]: Include <arm-features.h>.
	(LDST_INDEXED_NOINDEX, LDST_INDEXED_INDEX): New macros.
	(LDST_INDEXED, LDST_PC_INDEXED): New macros, differing definitions
	depending on [ARM_NO_INDEX_REGISTER] and [__thumb2__].
	(LDST_PCREL) [!__thumb2__ && ARCH_HAS_T2 && ARM_PCREL_MOVW_OK]:
	Use move/movt pair instead of a load.
	(LDST_GLOBAL): Macro removed.
	(LDR_GLOBAL): New macro replaces it.
	(LDR_HIDDEN): New macro.
	(PTR_MANGLE_LOAD): Use LDR_GLOBAL rather than LDST_GLOBAL.
	Use LDR_HIDDEN instead for __pointer_chk_guard_local.

	* setjmp/tst-setjmp-static.c: New file.
	* setjmp/Makefile (tests): Add it.
	(tests-static): New variable.

2014-10-22  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17485]
	* sysdeps/unix/sysv/linux/mips/vfork.S (__libc_vfork): Define.

2014-10-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* math/s_ldexpf.c (__ldexpf): Do not use INTDEF.

2014-10-21  Roland McGrath  <roland@hack.frob.com>

	* nptl/version.c (__nptl_main): Call __libc_write, not __write.

2014-10-20  Roland McGrath  <roland@hack.frob.com>

	* io/fts.c (dirent_not_directory): New function.
	(fts_build): Call it.

2014-10-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/version.c (__nptl_main): Use normal __write rather than
	INTERNAL_SYSCALL.
	(banner): Update copyright years.

	* nptl/pthread_rwlock_timedrdlock.c: #include <sys/time.h> before using
	gettimeofday.
	* nptl/pthread_rwlock_timedwrlock.c: Likewise.
	* nptl/pthread_cond_timedwait.c: Likewise.
	* nptl/pthread_mutex_timedlock.c: Likewise.
	* nptl/sem_timedwait.c: Likewise.

	* sysdeps/nptl/bits/libc-lock.h
	[_LIBC && (!NOT_IN_libc || IS_IN_libpthread)]
	(__libc_lock_init_recursive): Return void, not 0.
	* sysdeps/nptl/bits/libc-lockP.h (__libc_lock_init): Likewise.
	(__libc_rwlock_init): Likewise.
	* sysdeps/nptl/bits/stdio-lock.h (_IO_lock_init): Likewise.

2014-10-20  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/pthread_once.c (__pthread_once): Split out fast path to ...
	(__pthread_once_slow): ... here.
	* sysdeps/unix/sysv/linux/i386/pthread_once.S: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/pthread_once.S: Remove file.

2014-10-20  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/pthreadP.h (__PTHREAD_ONCE_INPROGRESS, __PTHREAD_ONCE_DONE,
	__PTHREAD_ONCE_FORK_GEN_INCR): New.
	* sysdeps/nptl/fork.c (__libc_fork): Use them.
	* nptl/pthread_once.c (__pthread_once): Likewise.
	Update comments.

2014-10-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/syscalls.list (readv): Use __libc_readv as strong
	name.
	(writev): Use __libc_writev as strong name.
	* sysdeps/unix/sysv/linux/readv.c: Remove file.
	* sysdeps/unix/sysv/linux/writev.c: Likewise.

2014-10-17  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c (TLS_DEFINE_INIT_TP, TLS_VALUE): Macros removed.

	* sysdeps/i386/nptl/tls.h
	(THREAD_SELF_SYSINFO, THREAD_SYSINFO): Macros removed.
	[NEED_DL_SYSINFO] (SETUP_THREAD_SYSINFO, CHECK_THREAD_SYSINFO):
	New macros.
	* sysdeps/ia64/nptl/tls.h [NEED_DL_SYSINFO]
	(SETUP_THREAD_SYSINFO, CHECK_THREAD_SYSINFO): New macros.
	* nptl/allocatestack.c (allocate_stack) [NEED_DL_SYSINFO]:
	Call SETUP_THREAD_SYSINFO instead of doing an assignment.
	* nptl/createthread.c (create_thread) [NEED_DL_SYSINFO]:
	Call CHECK_THREAD_SYSINFO instead of doing an assert.

	* nptl/nptl-init.c (__pthread_initialize_minimal_internal):
	Conditionalize FUTEX_PRIVATE_FLAG and FUTEX_CLOCK_REALTIME probes
	on [__NR_futex].
	* nptl/pthread_mutex_init.c (prio_inherit_missing): New function,
	broken out of ...
	(__pthread_mutex_init): ... here.  Call it.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock_full):
	Conditionalize PI cases on [__NR_futex].
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Likewise.
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock): Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.

	* nptl/nptl-init.c (sighandler_setxid, __xidcmd): Make definitions
	conditional on [SIGSETXID].
	(sigcancel_handler): Make definition conditional on [SIGCANCEL].
	(__pthread_initialize_minimal_internal): Set up SIGCANCEL only if it
	is defined.  Likewise for SIGSETXID.
	* nptl/allocatestack.c (setxid_mark_thread, setxid_unmark_thread):
	Conditionalize definitions on [SIGSETXID].
	(setxid_signal_thread, __nptl_setxid_error, __nptl_setxid): Likewise.
	* nptl/pthread_create.c (start_thread): Conditionalize SIGCANCEL
	unblocking on [SIGCANCEL].

	* nptl/nptl-init.c (__nptl_set_robust): Conditionalize body on
	[__NR_set_robust_list].

2014-10-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/strcoll_l.c (get_next_seq): Fix up formatting.
	(do_compare): Likewise.

2014-10-17  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #15884]
	* string/strcoll_l.c: Don't include stdio.h.
	(coll_seq): Remove members idxarr and rulearr.
	(get_next_seq_cached): Remove function.
	(get_next_seq): Likewise.
	(get_next_seq_nocache): Rename to get_next_seq.
	(do_compare): Remove function.
	(do_compare_nocache): Rename to do_compare.
	(STRCOLL): Remove weight and rules cache.

2014-10-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/soft-fp/sfp-machine.h: Filed moved ...
	* sysdeps/arm/sfp-machine.h: ... to here.
	* sysdeps/arm/Implies: Remove arm/soft-fp.

2014-10-14  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/utsname.h-data (*_t): Allow.
	* conform/data/sys/wait.h-data [POSIX] (uid_t): Do not define.
	[POSIX] (WEXITED): Do not expect constant.
	[POSIX] (WSTOPPED): Likewise.
	[POSIX] (WNOHANG): Likewise.
	[POSIX] (WNOWAIT): Likewise.
	[POSIX] (siginfo_t): Do not expect type or elements.
	[POSIX] (pid_t): Do not expect type.
	[POSIX] (signal.h): Do not allow header.
	[POSIX] (sys/resource.h): Likewise.
	[POSIX] (si_*): Do not allow pattern.
	[POSIX] (W*): Likewise.
	[POSIX] (P_*): Likewise.
	[POSIX] (BUS_*): Likewise.
	[POSIX] (CLD_*): Likewise.
	[POSIX] (FPE_*): Likewise.
	[POSIX] (ILL_*): Likewise.
	[POSIX] (POLL_*): Likewise.
	[POSIX] (SEGV_*): Likewise.
	[POSIX] (SI_*): Likewise.
	[POSIX] (TRAP_*): Likewise.
	* conform/Makefile (test-xfail-POSIX/sys/wait.h/conform): New
	variable.

2014-10-14  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #12926]
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Avoid
	infinite loop when __recvmsg returns 0.

2014-10-10  Joseph Myers  <joseph@codesourcery.com>

	* CANCEL-FCT-WAIVE: Remove file.
	* CANCEL-FILE-WAIVE: Likewise.

	[BZ #14132]
	* elf/dl-sysdep.c (__libc_enable_secure): Use rtld_hidden_data_def
	instead of INTVARDEF.
	(_dl_sysdep_start): Do not use INTUSE with __libc_enable_secure.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_enable_secure): Use
	rtld_hidden_data_def instead of INTVARDEF.
	(_dl_sysdep_start): Do not use INTUSE with __libc_enable_secure.
	* elf/dl-deps.c (expand_dst): Likewise.
	* elf/dl-load.c (_dl_dst_count): Likewise.
	(_dl_dst_substitute): Likewise.
	(decompose_rpath): Likewise.
	(_dl_init_paths): Likewise.
	(open_path): Likewise.
	(_dl_map_object): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	(process_dl_audit): Likewise.
	(process_envvars): Likewise.
	* include/unistd.h [IS_IN_rtld] (__libc_enable_secure_internal):
	Remove declaration.
	(__libc_enable_secure): Use rtld_hidden_proto.

2014-10-09  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* elf/dl-load.c
	(add_path): New function broken out of _dl_rtld_di_serinfo.
	(_dl_rtld_di_serinfo): Remove that nested function.  Update call sites.

2014-10-09  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/double.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_D): Use
	parentheses around macro arguments.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_D): Likewise.
	* soft-fp/extended.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_E):
	Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_E): Likewise.
	* soft-fp/op-1.h (_FP_FRAC_SRST_1): Likewise.
	(_FP_FRAC_SRS_1): Likewise.
	(_FP_FRAC_CLZ_1): Likewise.
	(_FP_MUL_MEAT_1_imm): Likewise.
	(_FP_MUL_MEAT_1_wide): Likewise.
	(_FP_MUL_MEAT_1_hard): Likewise.
	(_FP_SQRT_MEAT_1): Likewise.
	(_FP_FRAC_ASSEMBLE_1): Likewise.
	(_FP_FRAC_DISASSEMBLE_1): Likewise.
	* soft-fp/op-2.h (_FP_FRAC_CLZ_2): Likewise.
	(__FP_CLZ_2): Likewise.
	(_FP_MUL_MEAT_2_wide): Likewise.
	(_FP_MUL_MEAT_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_2_gmp): Likewise.
	(_FP_MUL_MEAT_2_120_240_double): Likewise.
	(_FP_SQRT_MEAT_2): Likewise.
	(_FP_FRAC_ASSEMBLE_2): Likewise.
	(_FP_FRAC_DISASSEMBLE_2): Likewise.
	* soft-fp/op-4.h (_FP_FRAC_SRS_4): Likewise.
	(_FP_FRAC_CLZ_4): Likewise.
	(_FP_MUL_MEAT_4_wide): Likewise.
	(_FP_MUL_MEAT_4_gmp): Likewise.
	(_FP_SQRT_MEAT_4): Likewise.
	(_FP_FRAC_ASSEMBLE_4): Likewise.
	(_FP_FRAC_DISASSEMBLE_4): Likewise.
	* soft-fp/op-common.h (_FP_CMP): Likewise.
	(_FP_CMP_EQ): Likewise.
	(_FP_CMP_UNORD): Likewise.
	(_FP_TO_INT): Likewise.
	(_FP_FROM_INT): Likewise.
	[!__FP_CLZ] (__FP_CLZ): Likewise.
	(_FP_DIV_HELP_imm): Likewise.
	* soft-fp/quad.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_Q):
	Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_Q): Likewise.
	* soft-fp/single.h (FP_UNPACK_RAW_S): Likewise.
	(FP_UNPACK_RAW_SP): Likewise.
	(FP_PACK_RAW_S): Likewise.
	(FP_PACK_RAW_SP): Likewise.
	(FP_UNPACK_S): Likewise.
	(FP_UNPACK_SP): Likewise.
	(FP_UNPACK_SEMIRAW_S): Likewise.
	(FP_UNPACK_SEMIRAW_SP): Likewise.
	(FP_PACK_S): Likewise.
	(FP_PACK_SP): Likewise.
	(FP_PACK_SEMIRAW_S): Likewise.
	(FP_PACK_SEMIRAW_SP): Likewise.
	(_FP_SQRT_MEAT_S): Likewise.
	(FP_CMP_S): Likewise.
	(FP_CMP_EQ_S): Likewise.
	(FP_CMP_UNORD_S): Likewise.
	(FP_TO_INT_S): Likewise.
	(FP_FROM_INT_S): Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Handle rsigned == 2.

	* soft-fp/soft-fp.h (FP_EX_INVALID_SNAN): New macro.
	(FP_EX_INVALID_IMZ): Likewise.
	(FP_EX_INVALID_IMZ_FMA): Likewise.
	(FP_EX_INVALID_ISI): Likewise.
	(FP_EX_INVALID_ZDZ): Likewise.
	(FP_EX_INVALID_IDI): Likewise.
	(FP_EX_INVALID_SQRT): Likewise.
	(FP_EX_INVALID_CVI): Likewise.
	(FP_EX_INVALID_VC): Likewise.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Specify more precise
	"invalid" exceptions.
	(_FP_CHECK_SIGNAN_SEMIRAW): Likewise.
	(_FP_ADD_INTERNAL): Likewise.
	(_FP_MUL): Likewise.
	(_FP_FMA): Likewise.
	(_FP_DIV): Likewise.
	(_FP_CMP_CHECK_NAN): Likewise.
	(_FP_SQRT): Likewise.
	(_FP_TO_INT): Likewise.
	(FP_EXTEND): Likewise.

2014-10-09  Allan McRae  <allan@archlinux.org>

	* po/fr.po: Update French translation from translation project.

2014-10-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* stdlib/cxa_atexit.c (__cxa_atexit): Use libc_hidden_def instead
	of INTDEF.
	* include/stdlib.h (__cxa_atexit_internal): Remove declaration.
	(__cxa_atexit): Use libc_hidden_proto.
	[!NOT_IN_libc] (__cxa_atexit): Remove macro definition.

	[BZ #14132]
	* include/wctype.h [!_ISOMAC] (__iswalpha_l_internal): Remove
	declaration.
	[!_ISOMAC] (__iswdigit_l_internal): Likewise.
	[!_ISOMAC] (__iswspace_l_internal): Likewise.
	[!_ISOMAC] (__iswxdigit_l_internal): Likewise.
	[!_ISOMAC] (__iswctype_internal): Likewise.
	* stdio-common/siglist.c (_sys_siglist_internal): Remove alias.
	* sysdeps/unix/syscalls.list (chown): Remove __chown_internal
	alias.
	(fcntl): Remove __fcntl_internal alias.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (connect): Remove
	__connect_internal alias.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list (connect):
	Likewise.

	* soft-fp/soft-fp.h (FP_DENORM_ZERO): New macro.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Check
	FP_DENORM_ZERO.
	(_FP_CHECK_FLUSH_ZERO): New macro.
	(_FP_ADD_INTERNAL): Call _FP_CHECK_FLUSH_ZERO.
	(_FP_CMP): Likewise.
	(_FP_CMP_EQ): Likewise.
	(_FP_TO_INT): Do not set inexact for subnormal arguments if
	FP_DENORM_ZERO.
	(FP_EXTEND): Call _FP_CHECK_FLUSH_ZERO.
	(FP_TRUNC): Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Ensure maximum exponent is
	treated as invalid conversion, not as normal exponent.

	* soft-fp/op-common.h (_FP_CMP_CHECK_NAN): New macro.
	(_FP_CMP): Add extra argument EX.  Call _FP_CMP_CHECK_NAN.
	(_FP_CMP_EQ): Likewise.
	(_FP_CMP_UNORD): Likewise.
	* soft-fp/double.h (FP_CMP_D): Add extra argument EX.
	(FP_CMP_EQ_D): Likewise.
	(FP_CMP_UNORD_D): Likewise.
	* soft-fp/extended.h (FP_CMP_E): Likewise.
	(FP_CMP_EQ_E): Likewise.
	(FP_CMP_UNORD_E): Likewise.
	* soft-fp/quad.h (FP_CMP_Q): Likewise.
	(FP_CMP_EQ_Q): Likewise.
	(FP_CMP_UNORD_Q): Likewise.
	* soft-fp/single.h (FP_CMP_S): Likewise.
	(FP_CMP_EQ_S): Likewise.
	(FP_CMP_UNORD_S): Likewise.
	* soft-fp/eqdf2.c (__eqdf2): Update call to FP_CMP_EQ_D.
	* soft-fp/eqsf2.c (__eqsf2): Update call to FP_CMP_EQ_S.
	* soft-fp/eqtf2.c (__eqtf2): Update call to FP_CMP_EQ_Q.
	* soft-fp/gedf2.c (__gedf2): Update call to FP_CMP_D.
	* soft-fp/gesf2.c (__gesf2): Update call to FP_CMP_S.
	* soft-fp/getf2.c (__getf2): Update call to FP_CMP_Q.
	* soft-fp/ledf2.c (__ledf2): Update call to FP_CMP_D.
	* soft-fp/lesf2.c (__lesf2): Update call to FP_CMP_S.
	* soft-fp/letf2.c (__letf2): Update call to FP_CMP_Q.
	* soft-fp/unorddf2.c (__unorddf2): Update call to FP_CMP_UNORD_D.
	* soft-fp/unordsf2.c (__unordsf2): Update call to FP_CMP_UNORD_S.
	* soft-fp/unordtf2.c (__unordtf2): Update call to FP_CMP_UNORD_Q.
	* sysdeps/alpha/soft-fp/ots_cmpe.c (internal_compare): Update call
	to FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_cmp.c (_Q_cmp): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_cmpe.c (_Q_cmpe): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_feq.c (_Q_feq): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_fge.c (_Q_fge): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_fgt.c (_Q_fgt): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_fle.c (_Q_fle): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_flt.c (_Q_flt): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_fne.c (_Q_fne): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmp.c (_Qp_cmp): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmpe.c (_Qp_cmpe): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_feq.c (_Qp_feq): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_fge.c (_Qp_fge): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_fgt.c (_Qp_fgt): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fle.c (_Qp_fle): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_flt.c (_Qp_flt): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fne.c (_Qp_fne): Update call to
	FP_CMP_EQ_Q.

	* soft-fp/op-common.h (FP_EXTEND): When a subnormal input produces
	a subnormal result, set the underflow exception if trapping on
	underflow is enabled.
	* soft-fp/soft-fp.h (FP_INIT_TRAPPING_EXCEPTIONS): New macro.
	(FP_INIT_EXCEPTIONS): Default to FP_INIT_TRAPPING_EXCEPTIONS.
	[FP_NO_EXACT_UNDERFLOW] (FP_TRAPPING_EXCEPTIONS): Undefine and
	redefine to 0.
	* soft-fp/extenddftf2.c (FP_NO_EXACT_UNDERFLOW): Define.
	* soft-fp/extendsfdf2.c (FP_NO_EXACT_UNDERFLOW): Likewise.
	* soft-fp/extendsftf2.c (FP_NO_EXACT_UNDERFLOW): Likewise.
	* soft-fp/extendxftf2.c (__extendxftf2): Use
	FP_INIT_TRAPPING_EXCEPTIONS instead of FP_INIT_ROUNDMODE.

	* soft-fp/soft-fp.h (FP_CLEAR_EXCEPTIONS): Remove macro.
	* sysdeps/sparc/sparc32/soft-fp/q_itoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_itoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_lltoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_lltoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_ulltoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_ulltoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_utoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_utoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.

2014-10-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/unix/sysv/linux/include/sys/timex.h: New file.
	* sysdeps/unix/sysv/linux/adjtime.c [!ADJTIMEX] (ADJTIMEX): Do not
	use INTUSE.
	[!ADJTIMEX] (INTUSE(__adjtimex)): Remove declaration.
	* sysdeps/unix/sysv/linux/alpha/adjtime.c (__adjtimex_internal):
	Remove alias.
	(__adjtimex): Define using libc_hidden_ver.
	* sysdeps/unix/sysv/linux/ntp_gettime.c (INTUSE(__adjtimex)):
	Remove declaration.
	(ntp_gettime): Call __adjtimex directly.
	* sysdeps/unix/sysv/linux/ntp_gettimex.c (INTUSE(__adjtimex)):
	Remove declaration.
	(ntp_gettimex): Call __adjtimex directly.
	* sysdeps/unix/sysv/linux/syscalls.list (adjtimex): Remove
	__adjtimex_internal alias.

2014-10-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #17460]
	* nscd/nscd.c (more_help): Rewrite list of tables collection
	using xstrdup and asprintf.

	* nscd/nscd_conf.c: Remove local xstrdup declaration.

2014-10-08  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>
	    Roland McGrath  <roland@hack.frob.com>

	* elf/dl-lookup.c (enter_unique_sym): New function, broken out of ...
	(do_lookup_unique): ... local function 'enter' here; update callers.

2014-10-06  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/make-syscalls.sh (emit_weak_aliases): Condition
	compat_symbol calls on [SHARED].
	* sysdeps/unix/sysv/linux/powerpc/lchown.S: Remove file.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (oldsetrlimit):
	Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/m68k/m680x0/syscalls.list
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list
	(lchown): New syscall entry.
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/fchown.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (lchown): Add syscall.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list (chown):
	Likewise.

2014-10-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Remove file.
	* sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c
	(pthread_spin_unlock): Use __ARCH_REL_INSTR instead of
	__lll_rel_instr and __ARCH_ACQ_INSTR instead of __lll_acq_instr.
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c (__new_sem_post):
	Likewise.
	(__old_sem_post): Likewise.

2014-10-06  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_VSYSCALL): Define
	INLINE_VSYSCALL, INTERNAL_VSYSCALL, and
	HAVE_CLOCK_GETTIME_VSYSCALL macros.
	* sysdeps/unix/sysv/linux/tile/gettimeofday.c (__gettimeofday):
	Use INLINE_VSYSCALL macro.
	* sysdeps/unix/sysv/linux/tile/bits/libc-vdso: Add declaration of
	__vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/tile/init-first.c
	(_libc_vdso_platform_setup): Set new __vdso_clock_gettime global.
	* sysdeps/unix/sysv/linux/tile/Versions (GLIBC_PRIVATE): Add
	__vdso_clock_gettime.

	* sysdeps/unix/sysv/linux/tile/clone.S (__clone): Fix code
	to set up frame more cleanly.

	* sysdeps/tile/memcmp.c: New file.

	* sysdeps/unix/sysv/linux/tile/sysconf.c: New file.

	* sysdeps/tile/tilegx/string-endian.h (STRSHIFT): New macro.
	* sysdeps/tile/tilegx/strcasestr.c: New file.
	* sysdeps/tile/tilegx/strnlen.c: New file.
	* sysdeps/tile/tilegx/strstr.c: New file.

	* sysdeps/tile/tilegx/string-endian.h (copy_byte): Optimize.

2014-10-06  Arjun Shankar  <arjun.is@lostca.se>

	* nptl/tst-setuid3.c: Write errors to stdout.

2014-10-01  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* elf/dl-deps.c
	(preload): New functions broken out of _dl_map_object_deps.
	(_dl_map_object_deps):  Remove a nested function. Update call sites.

2014-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/execve.c: Remove file.
	* sysdeps/unix/sysv/linux/syscalls.list (execve): Add syscall.

2014-10-01  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/strcmp.S: New.

2014-09-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/syscalls.list (fchownat): New syscall.
	(linkat): Likewise.
	(mkdirat): Likewise.
	(readlinkat): Likewise.
	(renameat): Likewise.
	(symlinkat): Likewise.
	(unlinkat): Likewise.
	* sysdeps/unix/sysv/linux/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/linkat.c: Likewise.
	* sysdeps/unix/sysv/linux/mkdirat.c: Likewise.
	* sysdeps/unix/sysv/linux/readlinkat.c: Likewise.
	* sysdeps/unix/sysv/linux/renameat.c: Likewise.
	* sysdeps/unix/sysv/linux/symlinkat.c: Likewise.
	* sysdeps/unix/sysv/linux/unlinkat.c: Likewise.

2014-09-30  Will Newton  <will.newton@linaro.org>

	* math/math.h: Define long double math functions if
	_LIBC_TEST is defined.
	* stdlib/tst-strtod-round.c: Define _LIBC_TEST.

	* localedata/Makefile: Move assignment to tests-special
	into an ifdef testing run-built-tests.
	* timezone/Makefile: Likewise.

2014-09-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/Makefile ($(objpfx)tst-ld-sse-use.out): Run script
	with $(BASH) not $(SHELL).

2014-09-29  Carlos O'Donell  <carlos@redhat.com>
	    Matthew LeGendre  <legendre1@llnl.gov>

	[BZ #17411]
	* elf/dl-reloc.c (_dl_relocate_object): Allocate correct amount for
	l_reloc_result.

2014-09-29  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* stdio-common/printf_fp.c
	(hack_digit): New function, broken out of ...
	(__printf_fp): ... local function here.  Update call sites.
	hack_digit now takes an additional parameter that is a pointer
	to a struct of the referenced locals.  Those locals moved inside
	the struct and references updated.

2014-09-29  H.J. Lu  <hongjiu.lu@intel.com>

	* aclocal.m4: Require autoconf 2.69.
	* configure: Regenerated.
	* sysdeps/aarch64/configure: Likewise.
	* sysdeps/alpha/configure: Likewise.
	* sysdeps/arm/armv7/configure: Likewise.
	* sysdeps/arm/configure: Likewise.
	* sysdeps/ia64/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/mips/configure: Likewise.
	* sysdeps/s390/configure: Likewise.
	* sysdeps/unix/sysv/linux/mips/configure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Likewise.

	* sysdeps/alpha/configure.ac: Avoid empty lines at the end of
	file.
	* sysdeps/ia64/configure.ac: Likewise.

2014-09-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: Do not
	specify symbol version for ld.so.  Do not include entry for
	libpthread.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

	[BZ #14171]
	* Makeconfig [$(build-shared) = yes]
	($(common-objpfx)soversions.mk): Don't handle SONAMEs specified in
	makefiles.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)gnu/lib-names.h): Remove rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)gnu/lib-names.stmp): Likewise.  Split and moved
	to Makerules.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(before-compile): Don't append $(common-objpfx)gnu/lib-names.h
	here.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(common-generated): Don't append gnu/lib-names.h and
	gnu/lib-names.stmp here.
	* Makerules [$(build-shared) = yes && $(soversions.mk-done) = t]
	(lib-names-h-abi): New variable.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(lib-names-stmp-abi): Likewise.
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (before-compile): Append
	$(common-objpfx)$(lib-names-h-abi).
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (common-generated): Append gnu/lib-names.h.
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (install-others-nosubdir): Depend on
	$(inst_includedir)/$(lib-names-h-abi).
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] ($(common-objpfx)gnu/lib-names.h): New rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)$(lib-names-h-abi)): New rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)$(lib-names-stmp-abi)): Likewise.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(common-generated): Append $(lib-names-h-abi) and
	$(lib-names-stmp-abi).
	* scripts/lib-names.awk: Do not handle multi being set.
	* sysdeps/unix/sysv/linux/aarch64/Makefile (abi-lp64-ld-soname):
	Remove variable.
	(abi-lp64_be-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/arm/Makefile (abi-soft-ld-soname):
	Likewise.
	(abi-hard-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/i386/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/mips/Makefile (abi-o32_soft-ld-soname):
	Remove variable.
	(abi-o32_hard-ld-soname): Likewise.
	(abi-o32_soft_2008-ld-soname): Likewise.
	(abi-o32_hard_2008-ld-soname): Likewise.
	(abi-n32_soft-ld-soname): Likewise.
	(abi-n32_hard-ld-soname): Likewise.
	(abi-n32_soft_2008-ld-soname): Likewise.
	(abi-n32_hard_2008-ld-soname): Likewise.
	(abi-n64_soft-ld-soname): Likewise.
	(abi-n64_hard-ld-soname): Likewise.
	(abi-n64_soft_2008-ld-soname): Likewise.
	(abi-n64_hard_2008-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (abi-64-v1-ld-soname):
	Likewise.
	(abi-64-v2-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: Add
	ld.so entries.
	* sysdeps/unix/sysv/linux/s390/Makefile (abi-64-ld-soname): Remove
	variable.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Add ld.so
	entry.
	* sysdeps/unix/sysv/linux/x86/Makefile (abi-32-ld-soname): Remove
	variable.
	(abi-64-ld-soname): Likewise.
	(abi-x32-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Add ld.so
	entry.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

2014-09-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/setrlimit.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (setrlimit): Add
	syscall entry for GLIBC_2.2 symbol version.
	* sysdeps/unix/sysv/linux/m68k/m680x0/syscalls.list (setrlimit):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list
	(setrlimit): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (setrlimit):
	Likewise.

2014-09-23  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/arm/bits/hwcap.h: Check for
	_LINUX_ARM_SYSDEP_H include guard too.
	* sysdeps/unix/sysv/linux/arm/sysdep.h (_SYS_AUXV_H): Remove
	define.

2014-09-20  Rasmus Villemoes  <rv@rasmusvillemoes.dk>

	* sysdeps/unix/sysv/linux/eventfd.c:
	Make first argument unsigned.
	* sysdeps/unix/sysv/linux/hppa/sys/eventfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/eventfd.h: Likewise.

2014-09-20  Ondřej Bílka  <neleai@seznam.cz>

	* socket/recvmmsg.c (recvmmsg): Drop const argument.
	* socket/sys/socket.h: Likewise
	* sysdeps/unix/sysv/linux/recvmmsg.c: Likewise.

2014-09-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Add __udiv_w_sdiv prototype.

2014-09-17  Arjun Shankar  <arjun.is@lostca.se>

	* time/tst-ftime.c: New test.
	* time/Makefile (tests): Add tst-ftime.

2014-09-17  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/extended.h: Fix comment formatting.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Correct formatting.

2014-09-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6652]
	* Makeconfig (soversions-default-setname): Remove variable.
	($(common-objpfx)soversions.i): Don't pass default_setname to
	soversions.awk.
	* Makerules ($(common-objpfx)abi-versions.h): Don't pass
	oldest_abi to abi-versions.awk.
	* config.h.in (GLIBC_OLDEST_ABI): Remove macro undefine.
	* config.make.in (oldest-abi): Remove variable.
	* configure.ac (--enable-oldest-abi): Remove configure option.
	* configure: Regenerated.
	* csu/version.c (banner) [GLIBC_OLDEST_ABI]: Remove conditional
	text.
	* scripts/abi-versions.awk: Do not handle oldest_abi variable.
	* scripts/soversions.awk: Do not handle default_setname variable.
	* sysdeps/mach/hurd/configure.ac: Do not handle oldest_abi
	variable.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Do not handle oldest_abi
	variable.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2014-09-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/Makefile (CFLAGS-interp.c): Remove.
	($(elf-objpfx)runtime-linker.h): Generate header with linker
	path string.
	* elf/interp.c: Include generated runtime-linker.h

	* Makerules (lib%.so): Don't include $(+interp) in
	prerequisites.
	* elf/Makefile (CFLAGS-interp.c): Don't define NOT_IN_libc.
	* dlfcn/eval.c: Remove file.

	* posix/getconf.c (vars): Don't check for _[SP]C_* and _CS
	macros.

	[BZ #17266]
	* misc/sys/cdefs.h: Define __extern_always_inline for clang
	4.2 and newer.

	[BZ #17370]
	* libio/wfileops.c (do_ftell_wide): Free OUT on error path.

2014-09-16  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	[BZ #17266]
	* libio/stdio.h: Check definition of __fortify_function
	instead of __extern_always_inline to include bits/stdio2.h.
	* math/bits/math-finite.h [__USE_XOPEN || __USE_ISOC99]: Also
	check if __extern_always_inline is defined.
	[__USE_MISC || __USE_XOPEN]: Likewise.
	[__USE_ISOC99] Likewise.
	* misc/sys/cdefs.h (__fortify_function): Define only if
	__extern_always_inline is defined.
	[!__cplusplus || __GNUC_PREREQ (4,3)]: Revert to defining
	__extern_always_inline and __extern_inline only for g++-4.3
	and newer or a compatible gcc.

2014-09-15  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17371]
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs_internal): Fix
	last change to handle zero prefix length.

2014-09-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/sysconf.c (__sysconf): Return -1 for
	_SC_REGEX_VERSION.

	* posix/getconf.c (vars): Add _POSIX_IPV6 and
	_POSIX_RAW_SOCKETS.

2014-09-13  Allan McRae  <allan@archlinux.org>

	* po/ru.po: Update Russian translation from translation project.

2014-09-12  Roland McGrath  <roland@hack.frob.com>

	* locale/programs/locale.c (show_locale_vars): Inline local function
	into its sole call site.  Clean up some style nits.
	(print_item): New function, broken out of ...
	(show_info): ... local function here.  Clean up style nits.

	* locale/programs/ld-ctype.c (set_one_default): New function, broken
	out of ...
	(set_class_defaults): ... local function set_default here.
	Define set_default as a macro locally to pass constant parameters.
	(allocate_arrays, set_class_defaults): Use C99 for scope for each CNT,
	rather than a shared local.

	* stdlib/rpmatch.c (try): New function, broken out of ...
	(rpmatch): ... local function here.  Also, prototypify definition.

2014-09-12  Joseph Myers  <joseph@codesourcery.com>

	* scripts/soversions.awk: Do not handle configuration names.
	* Makeconfig ($(common-objpfx)soversions.i): Do not pass cpu,
	vendor and os variables to soversions.awk.
	* configure.ac: Do not modify gnu-* host_os.
	* configure: Regenerated
	* shlib-versions: Remove first column with configuration names.
	* nptl/shlib-versions: Likewise.
	* nptl_db/shlib-versions: Likewise.
	* sysdeps/hppa/shlib-versions: Likewise.
	* sysdeps/m68k/shlib-versions: Likewise.
	* sysdeps/mach/hurd/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/alpha/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/arm/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/hppa/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/ia64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/mips/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sh/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/tile/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac
	(HAVE_ELFV2_ABI): AC_DEFINE in ELFv2 case.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure:
	Regenerated.
	* config.h.in (HAVE_ELFV2_ABI): New macro undefine.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions:
	Condition symbol version definitions on [HAVE_ELFV2_ABI].

	* shlib-versions: Remove OS-specific entries.  Moved to files in
	sysdeps.
	* sysdeps/mach/hurd/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/shlib-versions: Likewise.

	* nptl/shlib-versions: Remove architecture-specific entries.
	Moved to files in sysdeps.
	* shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sh/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shlib-versions: Likewise.

	* sysdeps/gnu/netinet/udp.h (UDP_NO_CHECK6_TX): New macro.
	(UDP_NO_CHECK6_RX): Likewise.

2014-09-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/sysconf.c (__sysconf): Spell
	_POSIX_DEVICE_SPECIFIC and _POSIX_DEVICE_SPECIFIC_R correctly.

2014-08-12  Florian Weimer  <fweimer@redhat.com>

	* iconv/gconv_open.c (__gconv_open): Remove transliteration module
	loading.
	* iconv/Versions (__gconv_transliterate): Export for use from
	gconv modules.
	* iconv/gconv.h (__GCONV_TRANSLIT): New flag.
	(struct __gconv_trans_data, __gconv_trans_fct,
	__gconv_trans_context_fct, __gconv_trans_query_fct,
	__gconv_trans_init_fct, __gconv_trans_end_fct): Remove type
	definitions.
	(struct __gconv_step_data): Remove __trans member.
	(__gconv_transliterate): Declaration moved from gconv_int.h.  No
	longer hidden.  Remove unused trans_data argument.
	* iconv/gconv_int.h (struct trans_struct): Remove definition.
	(__gconv_translit_find): Remove declaration.
	(__gconv_transliterate): Declaration moved to gconv.h.  Add hidden
	prototype.
	* iconv/gconv_close.c (__gconv_close): Remove __trans cleanup.
	* iconv/gconv_trans.c (__gconv_transliterate): Remove unused
	trans_data argument.  Add hidden definition.
	(__gconv_translit_find): Remove.
	* iconv/loop.c (STANDARD_TO_LOOP_ERR_HANDLER): Call
	__gconv_transliterate directly if __GCONV_TRANSLIT is set.
	* iconv/skeleton.c: Remove transliteration initialization.
	* libio/fileops.c (_IO_new_file_fopen): Adjust struct
	__gconv_step_data initialization.
	* libio/iofwide.c (__libio_translit_): Remove.
	(_IO_fwide): Adjust struct __gconv_step_data initialization.
	* wcsmbs/btowc.c (__btowc): Likewise.
	* wcsmbs/mbrtoc16.c (mbrtoc16): Likewise.
	* wcsmbs/mbrtowc.c (__mbrtowc): Likewise.
	* wcsmbs/mbsnrtowcs.c (__mbsnrtowcs): Likewise.
	* wcsmbs/mbsrtowcs_l.c (__mbsrtowcs_l): Likewise.
	* wcsmbs/wcrtomb.c (__wcrtomb): Likewise.
	* wcsmbs/wcsnrtombs.c (__wcsnrtombs): Likewise.
	* wcsmbs/wcsrtombs.c (__wcsrtombs): Likewise.
	* wcsmbs/wctob.c (wctob): Likewise.

2014-09-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16194]
	* sysdeps/x86/tst-xmmymm.sh: Rename file to...
	* sysdeps/x86/tst-ld-sse-use.sh: ... this.  Check for zmm
	register usage.
	* sysdeps/x86/Makefile: Adjust.

2014-09-11  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>
	    Roland McGrath  <roland@hack.frob.com>

	* locale/weight.h: Add include guard.
	(findidx): Make static rather than auto; take new parameters
	TABLE, INDIRECT, and EXTRA instead of getting them as outer locals.
	* locale/weightwc.h: Likewise.
	* posix/fnmatch_loop.c
	(FCT): Change type of EXTRA from int32_t to wint_t.
	Don't include either header inside the function.
	Call FINDIDX rather than findidx, and pass new arguments.
	#undef FINDIDX at the end of the file.
	* posix/fnmatch.c [_LIBC]: #include <locale/weight.h> and define
	FINDIDX before including fnmatch_loop.c for the non-wide version.
	[_LIBC] [HANDLE_MULTIBYTE]: #define findidx to findidxwc around
	#include <locale/weightwc.h>, and define FINDIDX to findidxwc
	for the wide version.
	* posix/regcomp.c [_LIBC]: #include <locale/weight.h>.
	(build_equiv_class) [_LIBC]: Don't #include it inside the function.
	Pass new arguments to findidx.
	* posix/regexec.c [RE_ENABLE_I18N] [_LIBC]: #include <locale/weight.h>.
	[RE_ENABLE_I18N] (check_node_accept_bytes) [_LIBC]:
	Don't #include it inside the function.  Pass new arguments to findidx.
	* posix/regex_internal.h
	[!NOT_IN_libc] [_LIBC]: #include <locale/weight.h>.
	(re_string_elem_size_at): Don't #include it inside the function.
	Pass new arguments to findidx.
	* string/strcoll_l.c: #include WEIGHT_H at top level.
	(get_next_seq): Don't #include it inside the function.
	Pass new arguments to findidx.
	(get_next_seq_nocache): Likewise.
	* string/strxfrm_l.c: #include WEIGHT_H at top level.
	(STRXFRM): Don't #include it inside the function.
	Pass new arguments to findidx.

2014-09-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #17344]
	* malloc/malloc.c (unlink): Turn asserts into a call to
	malloc_printerr.

2014-09-11  Tim Lammens  <tim.lammens@gmail.com>

	[BZ #17370]
	* libio/wfileops (do_ftell_wide): Free OUT.

2014-09-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Remove file.

2014-09-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17363]
	* inet/getnetgrent_r.c (__internal_getnetgrent_r): Try next
	group if the current group is empty.

2014-09-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/bench-memset.c (test_main): Add more test from size
	from 32 to 512 bytes.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add POWER8 memset object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add POWER8 memset and bzero implementations.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c (__bzero): Add POWER8
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c (__libc_memset):
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power8.S: New file:
	multiarch POWER8 memset optimization.
	* sysdeps/powerpc/powerpc64/power8/memset.S: New file: optimized
	POWER8 memset optimization.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove bzero multiarch objects.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power4.S: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power4.S [NO_BZERO_IMPL]:
	Remove define.
	[__bzero]: Redefine to specific name.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memset.S [NO_BZERO_IMPL]: Remove
	define.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.

2014-09-10  Florian Weimer  <fweimer@redhat.com>

	* Makeconfig (gccwarn-c): Turn implicit-function-declaration
	warnings into errors.

	* stdlib/tst-tls-atexit-lib.c: Include <stdlib.h>, for the
	__cxa_thread_atexit_impl prototype.

2014-09-09  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/preconfigure: Put code inside mips* case statement.
	Fix capitalization of error message.

2014-09-09  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/preconfigure: Modify ABI tests.

2014-09-07  Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/unix/sysv/linux/hppa/c++-types.data: New file.

2014-09-07  Roland McGrath  <roland@hack.frob.com>
	    Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/unix/sysv/linux/hppa/nptl/libc-lowlevellock.c: File removed.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthreadP.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthreadP.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_broadcast.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_broadcast.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_destroy.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_destroy.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_init.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_init.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_signal.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_signal.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_timedwait.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_timedwait.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_wait.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_wait.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/hppa/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/semaphore.h: Moved ...
	* sysdeps/hppa/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/clone.S: Include <tcb-offsets.h>.
	Deconditionalize the code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/hppa/nptl/clone.S: File removed.
	* sysdeps/unix/sysv/linux/hppa/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/hppa/nptl/fork.c: File removed.
	* sysdeps/hppa/nptl/tcb-offsets.sym: Include pthread.h and don't
	include sysdep.h.

2014-09-08  Allan McRae  <allan@archlinux.org>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.20.90"

2014-09-07  Allan McRae  <allan@archlinux.org

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to "2.20"
	* include/features.h (__GLIBC_MINOR__): Set to 20.

	* manual/contrib.texi: Add entries for Wilco Dijkstra and Stefan
	Liebler.

	* po/ko.po: Update Korean translation from translation project.

2014-09-06  Chris Metcalf  <cmetcalf@tilera.com>

	[BZ #17354]
	* sysdeps/tile/dl-machine.h (elf_machine_rela): Add a MUNGE_SIGNED
	macro for handling signed relocations.

2014-09-03  Florian Weimer  <fweimer@redhat.com>

	[BZ #17325]
	* iconvdata/ibm1364.c (BODY): Fix check for sentinel.
	* iconvdata/ibm932.c (BODY): Replace invalid sentinel check with
	assert.
	* iconvdata/ibm933.c (BODY): Fix check for sentinel.
	* iconvdata/ibm935.c (BODY): Likewise.
	* iconvdata/ibm937.c (BODY): Likewise.
	* iconvdata/ibm939.c (BODY): Likewise.
	* iconvdata/ibm943.c (BODY): Replace invalid sentinel check with
	assert.
	* iconvdata/Makefile (iconv-test.out): Pass module list to test
	script.
	* iconvdata/run-iconv-test.sh: New test loop for checking for
	decoder crashers.

2014-09-02  Khem Raj  <raj.khem@gmail.com>

	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c (fegetenv): Add
	libm_hidden_ver.

2014-09-01  Allan McRae  <allan@archlinux.org>

	* po/eo.po: Update Esperanto translation from translation project.

	* po/ca.po: Update Catalan translation from translation project.

2014-08-28  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/fork.c (__fork): Lock SS->lock around
	__proc_dostop call.

2014-08-27  Mark Wielaard  <mjw@redhat.com>

	[BZ #17319]
	* sysdeps/i386/nptl/tls.h (TLS_INIT_TP): Use INTERNAL_SYSCALL
	to call set_thread_area instead of hand written asm.
	(__NR_set_thread_area): Removed define.
	(TLS_FLAG_WRITABLE): Likewise.
	(__ASSUME_SET_THREAD_AREA): Remove check.
	(TLS_EBX_ARG): Remove define.
	(TLS_LOAD_EBX): Likewise.

2014-08-27  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Simplify atomicity of socket creation in bind.

	* sysdeps/mach/hurd/bind.c (__bind): Use dir_lookup(node, "") instead of
	looking up the name after linking the file.

2014-08-27  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2014-08-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #17187]
	* iconv/gconv_trans.c (struct known_trans, search_tree, lock,
	trans_compare, open_translit, __gconv_translit_find):
	Remove module loading code.

2014-08-26  Allan McRae  <allan@archlinux.org>

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/uk.po: Update Ukrainian translation from translation project.

	* po/fr.po: Update French translation from translation project.

	* po/ru.po: Update Russian translation from translation project.

	* po/pl.po: Update Polish translation from translation project.

	* po/cs.po: Update Czech translation from translation project.

	* po/de.po: Update German translation from translation project.

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/sv.po: Update Sweedish translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.

	* po/es.po: Update Spanish translation from translation project.

2014-08-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/Makefile (CFLAGS-pthread_atfork.c): Remove.

	* catgets/Makefile (CPPFLAGS-gencat): Remove.
	* iconv/Makefile (CPPFLAGS-iconv_prog): Likewise.
	(CPPFLAGS-iconvconfig): Likewise.
	* timezone/Makefile (CPPFLAGS-zic): Likewise.

	* include/libc-symbols.h: Remove unnecessary check for
	NOT_IN_libc.
	* nptl/pthreadP.h: Likewise.
	* sysdeps/aarch64/setjmp.S: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/m68k/setjmp.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise.
	* sysdeps/s390/s390-32/setjmp.S: Likewise.
	* sysdeps/s390/s390-64/setjmp.S: Likewise.
	* sysdeps/sh/sh3/setjmp.S: Likewise.
	* sysdeps/sh/sh4/setjmp.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/x86_64/setjmp.S: Likewise.

2014-08-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17263]
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Include
	<stdint.h>.
	(__get_clockfreq): Use uint64_t instead of hp_timing_t in
	INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK call.

2014-08-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/x86/fpu/bits/mathinline.h: Fix typo in comment.

	[BZ #17262]
	* sysdeps/x86/fpu/bits/mathinline.h: Check both __SSE2_MATH__
	and __x86_64__ when disabling x87 inline functions.

2014-08-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17259]
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Replace cpuid
	asm statement with __cpuid_count.

2014-08-12  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac: Change __ehdr_start code to dereference the struct.
	Run readelf on the output to look for relocations.
	* configure: Regenerated.

2014-08-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17261]
	* sysdeps/powerpc/nofpu/fenv_const.c (__fe_enabled_env): Change
	value to 0.
	(__fe_nonieee_env): Define as an alias for __fe_dfl_env.

2014-08-12  Roland McGrath  <roland@hack.frob.com>

	* NEWS: Mention x86-64 ld.so use of Intel MPX instructions.

2014-08-12  Bernard Ogden  <bernie.ogden@linaro.org>

	[BZ #16892]
	* sysdeps/nptl/lowlevellock.h (__lll_timedlock): Use
	atomic_compare_and_exchange_bool_acq rather than atomic_exchange_acq.

2014-08-12  Sean Anderson  <seanga2@gmail.com>

	* malloc/malloc.c: Fix typo in comment.

2014-08-09  Allan McRae  <allan@archlinux.org>

	* Regenerate libc.po.

2014-08-08  Mike Frysinger  <vapier@gentoo.org>

	* intl/tst-gettext2.sh: Check every lang file for creation.

2014-08-07  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h
	(libc_feholdsetround_noex_aarch64_ctx): New function.

2014-08-07  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/arm/armv6/strcpy.S (strcpy):
	Fix performance issue in misaligned cases.

2014-08-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/ioctl-types.h (struct winsize):
	Move definition from termios.h.
	(struct termio): Likewise.
	(NCC, TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI, N_TTY, N_SLIP,
	N_MOUSE, N_PPP, N_STRIP, N_AX25, N_X25, N_6PACK, N_MASC, N_R3964,
	N_PROFIBUS_FDL, N_IRDA, N_SMSBLOCK, N_HDLC, N_SYNC_PPP, N_HCI):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h (struct winsize):
	Move definition to ioctl-types.h
	(struct termio): Likewise.
	(NCC, TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI, N_TTY, N_SLIP,
	N_MOUSE, N_PPP, N_STRIP, N_AX25, N_X25, N_6PACK, N_MASC, N_R3964,
	N_PROFIBUS_FDL, N_IRDA, N_SMSBLOCK, N_HDLC, N_SYNC_PPP, N_HCI):
	Likewise.

2014-08-05  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/soft-fp/ots_cvtxq.c (_OtsCvtXQ): Always raise
	exceptions.
	* sysdeps/alpha/soft-fp/Makefile [soft-fp] (sysdep_routines):
	Add fraiseexcpt.
	* sysdeps/alpha/soft-fp/sfp-machine.h (FP_HANDLE_EXCEPTIONS):
	Use __feraiseexcept.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S (feraiseexcept):
	Protect libm symbols with IS_IN_libm.

	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Remove file.

2014-08-04  Bernard Ogden  <bernie.ogden@linaro.org>

	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Remove file.

2014-08-04  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: Remove
	file.

2014-08-04  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h (PSEUDO): Add nocancel
	variants for each function.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/Makefile: File removed, contents
	appended ...
	* sysdeps/unix/sysv/linux/ia64/Makefile: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/Versions: File removed, contents
	appended ...
	* sysdeps/unix/sysv/linux/ia64/Versions: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/__ia64_longjmp.S: Moved ...
	* sysdeps/unix/sysv/linux/ia64/__ia64_longjmp.S: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/__sigstack_longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/__sigstack_longjmp.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/ia64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/dl-sysdep.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/ia64/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_create.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_delete.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_getoverr.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_settime.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/unwind-forcedunwind.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/unwind-forcedunwind.c: ... here.
	Update #include.
	* sysdeps/unix/sysv/linux/ia64/nptl/unwind_longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/unwind_longjmp.c: ... here.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/ia64/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/semaphore.h: Moved ...
	* sysdeps/ia64/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/bits/local_lim.h: ... here.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/pthread/createthread.c: Include <arch-fork.h>.
	* sysdeps/unix/sysv/linux/ia64/arch-fork.h (ARCH_CLONE): New macro.
	* sysdeps/ia64/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/ia64/nptl/createthread.c: File removed.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/ia64/vfork.S: ... here.
	(__libc_vfork): Define function under this name.
	(__vfork): Define as an alias.
	* sysdeps/unix/sysv/linux/ia64/pt-vfork.S: New file.
	* sysdeps/unix/sysv/linux/ia64/nptl/pt-vfork.S: File removed.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/clone2.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/ia64/nptl/clone2.S: File removed.

2014-08-04  Andreas Schwab  <schwab@suse.de>

	* sysdeps/ieee754/ldbl-96/s_fma.c: Include <math_private.h>.

2014-08-03  Mike Frysinger  <vapier@gentoo.org>

	* stdlib/tst-setcontext.c (test_stack): Fix coding style.
	(main): Likewise.

2014-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: File removed.

2014-08-01  Richard Henderon  <rth@redhat.com>

	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use math_force_eval before
	feclearexcept; use math_opt_barrier instead of open-coded asm; fix
	typo in exact zero test.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.

2014-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/sysdep.h (PTR_MANGLE_LOAD, PTR_MANGLE)
	(PTR_MANGLE2, PTR_DEMANGLE, PTR_DEMANGLE2): Move these macros...
	* sysdeps/arm/sysdep.h: ... here.
	[!__ASSEMBLER__]: Include <stdint.h>.

2014-08-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/libc-symbols.h (HAVE_LIBINTL_H): Define macro.
	(HAVE_WCTYPE_H): Likewise.
	(HAVE_ISWCTYPE): Likewise.
	(ENABLE_NLS): Likewise.
	* posix/regex_internal.h [(defined MB_CUR_MAX && HAVE_WCTYPE_H
	&& HAVE_ISWCTYPE) || _LIBC]: Sync up with gnulib.

	* posix/regex_internal.c: Check if DEBUG is defined and is
	set.

	* include/libc-symbols.h (HAVE_MBSTATE_T): Define macro.
	(HAVE_MBSRTOWCS): Likewise.
	* posix/fnmatch.c: Include string.h unconditionally.

2014-08-01  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* NEWS: Explain the s390 jmp_buf / ucontext_t ABI change
	reversal.

2014-07-31  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/safe-fatal.h: New file.
	* sysdeps/unix/sysv/linux/safe-fatal.h: New file.
	* nptl/forward.c: Include it.
	(__pthread_unwind): Use __safe_fatal as default action, rather
	than a bogus use of INTERNAL_SYSCALL that could never work.

	* config.h.in (HAVE_BUILTIN_TRAP): New #define to 0.
	* configure.ac (libc_cv_builtin_trap): New test.
	* configure: Regenerated.
	* sysdeps/generic/abort-instr.h [HAVE_BUILTIN_TRAP]
	(ABORT_INSTRUCTION): Define using __builtin_trap.

	* nptl/pthreadP.h (SIGCANCEL, SIGTIMER, SIGSETXID, __xidcmd): Moved ...
	* sysdeps/unix/sysv/linux/nptl-signals.h: ... to this new file.
	* sysdeps/nptl/nptl-signals.h: New file.
	* nptl/pthreadP.h: Include <nptl-signals.h>.

2014-07-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c
	(ONE_DIRECTION): Define.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c
	(ONE_DIRECTION): Define.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c
	(ONE_DIRECTION): Define.

2014-07-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/Makefile: Delete file.
	* sysdeps/s390/Versions (GLIBC_2.19): Remove __setjmp.
	* sysdeps/s390/__longjmp.c: Delete file.
	* sysdeps/s390/bits/setjmp.h (__s390_jmp_buf):
	Remove fields __flags and __reserved.
	* sysdeps/s390/longjmp.c: Include setjmp/longjmp.c
	and add versioning.
	* sysdeps/s390/rtld-__longjmp.c: Delete file.
	* sysdeps/s390/rtld-global-offsets.sym: Likewise.
	* sysdeps/s390/rtld-setjmp.S: Likewise.
	* sysdeps/s390/s390-32/__longjmp-common.c: Move to ...
	* sysdeps/s390/s390-32/__longjmp.c: ... here.
	* sysdeps/s390/s390-32/setjmp-common.S: Move to ...
	* sysdeps/s390/s390-32/setjmp.S: ... here.
	Add versioning.
	(__sigsetjmp): Remove setting __flags field.
	* sysdeps/s390/s390-64/__longjmp-common.c:Move to ...
	* sysdeps/s390/s390-64/__longjmp.c: ... here.
	* sysdeps/s390/s390-64/setjmp-common.S: Move to ...
	* sysdeps/s390/s390-64/setjmp.S: ... here.
	Add versioning.
	(__sigsetjmp): Remove setting __flags field.
	* sysdeps/s390/setjmp.S: Delete file.
	* sysdeps/s390/sigjmp.c: Likewise.
	* sysdeps/s390/v1-longjmp.c: Likewise.
	* sysdeps/s390/v1-setjmp.h: Likewise.
	* sysdeps/s390/v1-sigjmp.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/Makefile (sysdep_routines):
	Remove v1-longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/getcontext.S: Delete file.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c:
	Include debug/longjmp_chk.c and add versioning.
	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c:
	Include nptl/pt-longjmp.c and add versioning.
	* sysdeps/unix/sysv/linux/s390/rtld-getcontext.S: Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-32/____longjmp_chk.c:
	Include __longjmp.c.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext-common.S:
	Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: ... here.
	(__getcontext): Remove setting __flags field.
	Add versioning.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S:
	Don't restore upper high grps.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S:
	Likewise.
	(__swapcontext): Remove setting uc_flags field.
	* sysdeps/unix/sysv/linux/s390/s390-32/ucontext_i.sym:
	Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-64/____longjmp_chk.c:
	Include __longjmp.c.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext-common.S:
	Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: ... here.
	(__getcontext): Remove setting __flags field.
	Add versioning.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S:
	(__swapcontext): Remove setting uc_flags field.
	* unix/sysv/linux/s390/s390-64/ucontext_i.sym: Delete file.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (ucontext):
	Remove fields uc_high_gprs and __reserved.
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym:
	New file with reverted content.
	* sysdeps/unix/sysv/linux/s390/v1-longjmp_chk.c: Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist:
	Regenerated.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist:
	Regenerated.

2014-07-31  Andreas Schwab  <schwab@suse.de>

	* config.h.in (HAVE_IFUNC): Define to 0.
	* rt/clock-compat.c [HAVE_IFUNC]: Check for value, not
	definedness.

2014-07-30  Ling Ma  <ling.ml@alibaba-inc.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memmove-avx-unaligned, memcpy-avx-unaligned and
	mempcpy-avx-unaligned.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add tests for AVX memcpy functions.
	* sysdeps/x86_64/multiarch/memcpy.S: Add support for AVX memcpy.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Add support for AVX
	memcpy_chk.
	* sysdeps/x86_64/multiarch/memmove.c: Add support for AVX memmove.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Add support for AVX
	memmove_chk.
	* sysdeps/x86_64/multiarch/mempcpy.S: Add support for AVX mempcpy.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Add support for AVX
	mempcpy_chk.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-avx-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/memmove-avx-unaligned.S: New file.

2013-07-29  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17213]
	* sysdeps/powerpc/powerpc64/entry.h: Fix TEXT_START definition for
	powerpc64le.

2014-07-29  Jeff Layton  <jlayton@poochiereds.net>

	[BZ #16839]
	* manual/llio.texi: Add section about open file description locks.
	* manual/examples/ofdlocks.c: Example of open file description
	lock usage.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: Define F_OFD_GETLK,
	F_OFD_SETLK, and F_OFD_SETLKW.

2014-07-23  Allan McRae  <allan@archlinux.org>

	* po/es.po: Update Spanish translation from translation project.

2014-07-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Removed.

2014-07-17  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17078]
	* sysdeps/arm/dl-machine.h (elf_machine_rela)
	[RESOLVE_CONFLICT_FIND_MAP]: Handle R_ARM_TLS_DESC relocation.
	(elf_machine_lazy_rel): Handle prelinked R_ARM_TLS_DESC entries.

2014-07-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17088]
	* math/fesetenv.c (__fesetenv)
	[FE_NOMASK_ENV && FE_ALL_EXCEPT != 0]: Return 1 for FE_NOMASK_ENV.
	* math/feupdateenv.c (__feupdateenv)
	[FE_NOMASK_ENV && FE_ALL_EXCEPT != 0]: Likewise.

	* sysdeps/unix/sysv/linux/s390/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__]
	(__ASSUME_SOCKETCALL): Do not define.

	* sysdeps/unix/sysv/linux/sh/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__sh__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_ST_INO_64_BIT): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __sh__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __sh__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __sh__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__sh__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__powerpc__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_IPC64): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __powerpc__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __powerpc__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __powerpc__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__powerpc__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL):
	Likewise.

	* sysdeps/unix/sysv/linux/sparc/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__sparc__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_SET_ROBUST_LIST): Define unconditionally.
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL): Likewise.
	(__ASSUME_REQUEUE_PI): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __sparc__]
	(__ASSUME_RECVMMSG_SYSCALL): Do not define.
	[__sparc__] (__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __sparc__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__sparc__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/i386/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__i386__]
	(__ASSUME_SOCKETCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __i386__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__i386__] (__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __i386__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__i386__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__x86_64__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __x86_64__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __x86_64__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__x86_64__ && __LINUX_KERNEL_VERSION >= 0x030100]
	(__ASSUME_GETCPU_SYSCALL): Likewise.

	* aclocal.m4 (LIBC_SLIBDIR_RTLDDIR): New macro.
	* sysdeps/gnu/configure.ac: Use LIBC_SLIBDIR_RTLDDIR.  Remove
	cases for individual architectures.
	* sysdeps/gnu/configure: Regenerated.
	* sysdeps/unix/sysv/linux/aarch64/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/aarch64/configure: Regenerated.
	* sysdeps/unix/sysv/linux/mips/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure:
	Regenerated.
	* sysdeps/unix/sysv/linux/s390/s390-64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/configure: New generated
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/configure: New generated
	file.
	* sysdeps/unix/sysv/linux/x86_64/64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/64/configure: New generated file.
	* sysdeps/unix/sysv/linux/x86_64/x32/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/configure: Generate.

	* sysdeps/aarch64/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/aarch64/shlib-versions: ... here.
	* sysdeps/alpha/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/alpha/shlib-versions: ... here.
	* sysdeps/arm/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/arm/shlib-versions: ... here.
	* sysdeps/hppa/shlib-versions: Move all contents except for
	libgcc_s entry to ...
	* sysdeps/unix/sysv/linux/hppa/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/hppa/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/ia64/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/ia64/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/ia64/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/m68k/coldfire/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/shlib-versions: ... here.
	* sysdeps/microblaze/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/microblaze/shlib-versions: ... here.
	* sysdeps/mips/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/mips/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/mips/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/tile/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/tile/shlib-versions: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Merge in entry
	from ...
	* sysdeps/x86_64/64/shlib-versions: ... here.  Remove file.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Merge in
	entry from ...
	* sysdeps/x86_64/x32/shlib-versions: ... here.  Remove file.

2014-07-17  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/bits/atomic.h
	(__arch_compare_and_exchange_bool_8_int): Evaluate to zero.
	(__arch_compare_and_exchange_bool_16_int): Likewise.
	(__arch_compare_and_exchange_bool_64_int): Likewise.

	* iconv/loop.c: Move definition of LOOPFCT and gconv_btowc
	into an #else block.

2014-07-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/preconfigure.ac: Apply EABI sanity check to arm*, not
	just Linux configurations.  Test empirically that the compiler sets
	__ARM_EABI__, rather than using the tuple to decide.
	* sysdeps/arm/preconfigure: Regenerated.
	* sysdeps/unix/sysv/linux/arm/configure: File removed.
	* sysdeps/unix/sysv/linux/arm/configure.ac: File removed,
	contents appended ...
	* sysdeps/arm/configure.ac: ... here.
	* sysdeps/arm/configure: Regenerated.

2014-07-15  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_kill.c: New file.
	* nptl/pthread_sigmask.c: New file.
	* nptl/pthread_sigqueue.c: New file.

	* sysdeps/nptl/lowlevellock.h: New file.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: New file.
	* sysdeps/nptl/lowlevellock-futex.h: New file.

	* nptl/pthreadP.h (__current_sigrtmin, __current_sigrtmax):
	Remove dead declarations.

2014-07-14  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (HAVE_AVX2_SUPPORT): New #undef.
	* sysdeps/i386/configure.ac: Set HAVE_AVX2_SUPPORT and
	config-cflags-avx2.
	* sysdeps/x86_64/configure.ac: Likewise.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-avx2 only if config-cflags-avx2 is yes.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Tests for memset_chk and memset only if HAVE_AVX2_SUPPORT is
	defined.
	* sysdeps/x86_64/multiarch/memset.S: Define multiple versions
	only if HAVE_AVX2_SUPPORT is defined.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.

2014-07-14  Alan Modra  <amodra@gmail.com>

	[BZ #17153]
	* elf/elf.h (DT_PPC64_NUM): Correct value.
	* NEWS: Add to fixed bug list.

2014-07-13  Jim Meyering  <meyering@fb.com>

	[BZ 17150]
	regex: don't deref NULL upon heap allocation failure
	* posix/regcomp.c: (parse_dup_op): Handle duplicate_tree
	failure in one more place.
	To trigger the segfault, configure grep -with-included-regex,
	build it, and run these commands:
	( ulimit -v 300000; echo a|src/grep -E a+++++++++++++++++++++ )

2014-07-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Update.

2014-07-11  Richard Henderson  <rth@redhat.com>

	* sysdeps/aarch64/libm-test-ulps: Update.

2014-07-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #17135]
	* nptl/pthreadP.h (__nptl_setxid_error): Declare function.
	* nptl/allocatestack.c (__nptl_setxid_error): New function.
	(__nptl_setxid): Initialize error member.  Call
	__nptl_setxid_error.
	* nptl/nptl-init.c (sighandler_setxid): Call __nptl_setxid_error.
	* nptl/descr.h (struct xid_command): Add error member.
	* nptl/tst-setuid3.c: New file.
	* nptl/Makefile (tests): Add it.

2014-07-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h (__lll_base_trylock):
	New define.
	(__lll_trylock): Use __lll_base_trylock.
	(__lll_cond_trylock): Likewise.

2014-07-10  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (start_thread): Use atomic_or and
	lll_futex_wake directly rather than lll_robust_dead.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h
	(lll_robust_dead): Macro removed.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.

	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock):
	Use atomic_compare_and_exchange_val_acq directly rather than
	lll_robust_trylock.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h
	(__lll_robust_trylock, lll_robust_trylock): Removed.
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	* manual/locale.texi (Locale Names): New section documenting
	locale name syntax.  Adjust menu and node chaining accordingly.
	(Choosing Locale): Reference Locale Names, Locale Categories.
	Mention setting LC_ALL=C.  Reflect that name syntax is now
	documented.
	(Locale Categories): New section title.  Reference Locale Names.
	LC_ALL is an environment variable, but not a category.
	(Setting the Locale): Remove "locale -a" invocation and LOCPATH
	description, now in Locale Name.  Reference that section.  Locale
	name syntax is now documented.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #17137]
	* locale/findlocale.c (name_present, valid_locale_name): New
	functions.
	(_nl_find_locale): Use the loc_name variable to store name
	candidates.  Call name_present and valid_locale_name to check and
	validate locale names.  Return an error if the locale is invalid.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	* locale/setlocale.c (setlocale): Use strdup for allocating
	composite name copy.

2014-07-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	Sync up with gnulib.
	* misc/error.c: Use !_LIBC instead of HAVE_CONFIG_H.
	[!_LIBC && ENABLE_NLS]: Include gettext.h.
	[_LIBC]: Define USE_UNLOCKED_IO, _GL_ATTRIBUTE_FORMAT_PRINTF
	and _GL_ARG_NONNULL.
	[USE_UNLOCKED_IO]: Include unlocked-io.h.
	[!_LIBC]: Include code for Windows and Cygwin.
	[!_LIBC && !HAVE_DECL_STRERROR_R && !STRERROR_R_CHAR_P]:
	Include prototype for int strerror_r.
	[!_LIBC] (is_open): New function.
	(flush_stdout): New function.
	(print_errno_message): Use it.
	(error): Likewise.
	(error_at_line): Likewise.
	(error_tail) Add function attribute macros.  Use
	__builtin_expect.

	* time/strptime_l.c [_LIBC]: Define HAVE_LOCALTIME_R.

	* time/strftime_l.c [_LIBC]: Define HAVE_STRFTIME.

	* io/ftw.c: Include sys/param.h unconditionally.

	* locale/programs/simple-hash.c [!HAVE_OBSTACK]: Remove code.

	[BZ #17125]
	* sysdeps/unix/sysv/linux/check_pf.c (cache): Don't use
	libc_freeres_ptr.
	(freecache): New function to free CACHE on exit.

	* sunrpc/xdr.c (xdr_string): Add comment about SIZE
	initialization.

2014-07-09  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/nptl/internaltypes.h: Delete.
	* sysdeps/sparc/nptl/sparc-nptl.h: New file.
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c: Include it.
	* sysdeps/sparc/nptl/pthread_barrier_init.c: Likewise.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c: Likewise.
	* sysdeps/sparc/nptl/sem_init.c: Likewise.
	* sysdeps/sparc/nptl/sem_post.c: Likewise.
	* sysdeps/sparc/nptl/sem_timedwait.c: Likewise.
	* sysdeps/sparc/nptl/sem_wait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_post.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: Likewise.

2014-07-09  Andreas Schwab  <schwab@suse.de>

	* sysdeps/powerpc/test-gettimebase.c (do_test): Add newline to
	output.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c
	(do_test): Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2014-07-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/aarch64/tlsdesc.c (_dl_unmap): Test SHARED with #ifdef.
	* sysdeps/arm/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/i386/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/x86_64/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/hppa/start.S (_start): Likewise.

2014-07-09  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sunrpc/xdr.c (xdr_string): Initialize SIZE to 0.

	* sysdeps/generic/unwind-pe.h: Only check if __cplusplus is
	defined.

2014-07-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/res_query.c (__libc_res_nsearch): Dereference resplen2
	after checking that it is non-NULL.

	* sysdeps/i386/dl-machine.h: Define ELF_MACHINE_NO_REL.

2014-07-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/memmove.c: Remove file.
	* sysdeps/powerpc/powerpc32/power4/memcopy.h
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Define it to 1.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-power7.c
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Remove define.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-ppc.c:
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: Include default
	string memmove instead of removed powerpc one.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l-power7.S:
	[weak_alias]: Fix compiler warning due trailing data.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp-power7.S:
	[weak_alias]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power7.c: Fix compile
	warnigs due missing definition of __strcpy_power7 and __strlen_power7.

	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add memmove functions.

2014-07-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* localedata/tests-mbwc/dat_iswalnum.c [SHOJI_IS_RIGHT]:
	Remove code.
	* localedata/tests-mbwc/dat_iswalpha.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_iswctype.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_iswgraph.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_iswprint.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_iswpunct.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_mbrlen.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_mbstowcs.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_mbtowc.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_strcoll.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_swscanf.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_towctrans.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_wcscoll.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_wcswidth.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_wctob.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/dat_wcwidth.c [SHOJI_IS_RIGHT]:
	Likewise
	* localedata/tests-mbwc/tst_towctrans.c [SHOJI_IS_RIGHT]:
	Likewise

2014-07-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Align VSX copies to 16B
	to avoid alignment traps in non-cacheable memory.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memmove
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-power7.c: New
	file: multiarch power7 memmove.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-ppc.c: New file:
	multiarch default memmove.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove.c: New file:
	multiarch memove for powerpc32/power4.

	* string/bcopy.c: Use full path to include memmove.c.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memmove and bcopy
	multiarch objects.
	* sysdeps/powerpc/powerpc64/multiarch/bcopy-ppc64.c: New file: default
	bcopy for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/bcopy.c: New file: multiarch
	bcopy for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Add bcopy
	and memmove implementations.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-power7.S: New file:
	optimized multiarch memmove for POWER7/powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: New file:
	default multiarch memmove for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/memmove.c: New file: memmove
	multiarch for powerpc64.
	* sysdeps/powerpc/powerpc64/power7/bcopy.c: New file: optimized bcopy
	for POWER7/powerpc64.
	* sysdeps/powerpc/powerpc64/power7/memmove.S: New file: optimized
	memmove for POWER7/powerpc64.

	* sysdeps/powerpc/memmove.c (memmove): Cleanup impplementation to use
	glibc default one.

	* sysdeps/powerpc/bits/link.h [_CALL_ELF]: Guard check for
	__ELF_NATIVE_CLASS equal to 64.

2014-07-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nptl/lowlevellock.h: File removed.

	* NEWS: NPTL is no longer an add-on!
	* nptl/internaltypes.h: Moved ...
	* sysdeps/nptl/internaltypes.h: ... here.
	* sysdeps/nptl/aio_misc.h: Use <nptl/pthreadP.h> in #include.
	* sysdeps/nptl/fork.c: Likewise.
	* sysdeps/nptl/gai_misc.h: Likewise.
	* sysdeps/nptl/librt-cancellation.c: Likewise.
	* sysdeps/nptl/jmp-unwind.c: Likewise.
	* sysdeps/nptl/setxid.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/Implies: New file.
	* sysdeps/unix/sysv/linux/alpha/Implies: Add alpha/nptl.
	* sysdeps/unix/sysv/linux/arm/Implies: New file.
	* sysdeps/unix/sysv/linux/hppa/Implies: New file.
	* sysdeps/unix/sysv/linux/i386/Implies: Add i386/nptl.
	* sysdeps/unix/sysv/linux/i386/i686/Implies: New file.
	* sysdeps/unix/sysv/linux/ia64/Implies: Add ia64/nptl.
	* sysdeps/unix/sysv/linux/m68k/Implies: New file.
	* sysdeps/unix/sysv/linux/microblaze/Implies: New file.
	* sysdeps/unix/sysv/linux/mips/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/Implies: New file.
	* sysdeps/unix/sysv/linux/s390/Implies: Add s390/nptl.
	* sysdeps/unix/sysv/linux/sh/Implies: New file.
	* sysdeps/unix/sysv/linux/sparc/Implies: New file.
	* sysdeps/unix/sysv/linux/tile/Implies: New file.
	* sysdeps/unix/sysv/linux/x86_64/Implies: Add x86_64/nptl.
	* sysdeps/unix/sysv/linux/x86_64/x32/Implies: New file.
	* nptl/Makeconfig: Moved ...
	* sysdeps/nptl/Makeconfig: ... here.
	* nptl/configure: File removed.
	* nptl/ANNOUNCE: File removed.
	* sysdeps/unix/sysv/linux/configure.ac: Remove nptl sanity check.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* nptl/Makefile (routines): Add libc_pthread_init,
	libc_multiple_threads, register-atfork and unregister-atfork.
	(libpthread-routines): Add pthread_mutex_cond_lock and pt-fork here.
	(gen-as-const-headers): Add lowlevelcond.sym, lowlevelrwlock.sym,
	lowlevelbarrier.sym, unwindbuf.sym, lowlevelrobustlock.sym,
	pthread-pi-defines.sym, structsem.sym.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = posix]
	(CFLAGS-fork.c, CFLAGS-getpid.o, CFLAGS-getpid.os): New variables.
	[$(subdir) = nptl] (tests): Add tst-setgetname.
	* nptl/sysdeps/unix/sysv/linux/Makefile: File removed.
	* sysdeps/unix/sysv/linux/sigaction.c: Just include
	<nptl/sigaction.c> directly here, instead of WRAPPER_INCLUDE.
	[!LIBC_SIGACTION]: Remove aliases.
	* sysdeps/unix/sysv/linux/aarch64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c: Likewise.
	* nptl/Versions (libc: GLIBC_2.3.2): Add __register_atfork.
	(libc: GLIBC_PRIVATE): Add __libc_pthread_init,
	__libc_current_sigrtmin_private, __libc_current_sigrtmax_private,
	__libc_allocate_rtsig_private.
	* nptl/sysdeps/unix/sysv/linux/Versions: File removed.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: Include <nptl/pthreadP.h>.
	* sysdeps/unix/sysv/linux/sigwait.c: Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Likewise.
	* sysdeps/unix/sysv/linux/sleep.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/sigwait.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sigtimedwait.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sigwaitinfo.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sleep.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/createthread.c: File removed.
	* sysdeps/unix/sysv/linux/ia64/fork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/internaltypes.h: Moved ...
	* nptl/internaltypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/jmp-unwind.c: Moved ...
	* sysdeps/nptl/jmp-unwind.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc-lowlevellock.c: Moved ...
	* nptl/libc-lowlevellock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc_multiple_threads.c: Moved ...
	* nptl/libc_multiple_threads.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc_pthread_init.c: Moved ...
	* nptl/libc_pthread_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelbarrier.sym: Moved ...
	* nptl/lowlevelbarrier.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelcond.sym: Moved ...
	* nptl/lowlevelcond.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevellock.c: Moved ...
	* nptl/lowlevellock.c: ... here.
	* nptl/lowlevellock.h: Moved ...
	* sysdeps/nptl/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.c: Moved ...
	* nptl/lowlevelrobustlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.sym: Moved ...
	* nptl/lowlevelrobustlock.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrwlock.sym: Moved ...
	* nptl/lowlevelrwlock.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/pt-fork.c: Moved ...
	* nptl/pt-fork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread-pi-defines.sym: Moved ...
	* nptl/pthread-pi-defines.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_getaffinity.c: Moved ...
	* nptl/pthread_attr_getaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_setaffinity.c: Moved ...
	* nptl/pthread_attr_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_mutex_cond_lock.c: Moved ...
	* nptl/pthread_mutex_cond_lock.c: ... here.
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c:
	Update #include.
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_once.c: Moved ...
	* nptl/pthread_once.c: ... here, replacing old file.
	* nptl/sysdeps/unix/sysv/linux/pthread_yield.c: Moved ...
	* nptl/pthread_yield.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/register-atfork.c: Moved ...
	* nptl/register-atfork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sem_post.c: Moved ...
	* nptl/sem_post.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: Update #include.
	* nptl/sysdeps/unix/sysv/linux/sem_timedwait.c: Moved ...
	* nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sem_trywait.c: Moved ...
	* nptl/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: Update #include.
	* nptl/sysdeps/unix/sysv/linux/sem_wait.c: Moved ...
	* nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/structsem.sym: Moved ...
	* nptl/structsem.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/mq_notify.c: Moved ...
	* sysdeps/unix/sysv/linux/mq_notify.c: ... here, replacing old file.
	* nptl/sysdeps/unix/sysv/linux/unregister-atfork.c: Moved ...
	* nptl/unregister-atfork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/unwindbuf.sym: Moved ...
	* nptl/unwindbuf.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/fork.c: Moved ...
	* sysdeps/nptl/fork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/fork.h: Moved ...
	* sysdeps/nptl/fork.h: ... here.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove fork.
	* nptl/sysdeps/unix/sysv/linux/aio_misc.h: Moved ...
	* sysdeps/unix/sysv/linux/aio_misc.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/allocrtsig.c: Moved ...
	* sysdeps/unix/sysv/linux/allocrtsig.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/getpid.c: Moved ...
	* sysdeps/unix/sysv/linux/getpid.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/kernel-posix-timers.h: Moved ...
	* sysdeps/unix/sysv/linux/kernel-posix-timers.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/pt-raise.c: Moved ...
	* sysdeps/unix/sysv/linux/pt-raise.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getname.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getname.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_kill.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_kill.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_setaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_setname.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_setname.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_sigqueue.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_sigqueue.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/raise.c: Moved ...
	* sysdeps/unix/sysv/linux/raise.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_routines.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_routines.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_settime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/tst-setgetname.c: Moved ...
	* sysdeps/unix/sysv/linux/tst-setgetname.c: ... here.
	* sysdeps/unix/sysv/linux/s390/jmp-unwind.c: Update #include.

2014-07-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/memcopy.h: Add comment for
	MEMCPY_OK_FOR_FWD_MEMMOVE.

2014-07-04  Will Newton  <will.newton@linaro.org>

	* string/memchr.c: Merge from gnulib.
	[_LIBC]: Remove conditionals.
	(__ptr_t): Remove define.
	(LONG_MAX_32_BITS): Likewise.
	(LONG_MAX): Likewise.
	(MEMCHR): Use ANSI prototype and optimize algorithm.

	* sysdeps/arm/dl-machine.h (ELF_MACHINE_NO_REL): Define.

2014-07-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h
	(lll_futex_timed_wait_bitset): Fix syscall argument count.

	* sysdeps/nptl/configure.ac (libc_cv_forced_unwind):
	Use -Dinhibit_libc=1 for unwind.h check to prevent false failure
	in a bare environment with no <stdlib.h> installed.
	* sysdeps/nptl/configure: Regenerated.

	* sysdeps/alpha/fpu/s_nearbyint.c: Include <math_ldbl_opt.h>.

	* sysdeps/unix/sysv/linux/configure.ac: Use AC_TRY_COMPILE rather than
	AC_EGREP_CPP for kernel header checks, so they only succeed if
	including <linux/version.h> actually works right.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* sysdeps/s390/nptl/tls.h (THREAD_SET_POINTER_GUARD): Refer to the
	value so it's not diagnosed as unused.

	* sysdeps/pthread/Makefile: Conditionalize tst-timer bits (the only
	thing) with "ifeq ($(subdir),rt)".

2014-07-03  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/fpu/s_nearbyintf.c: Remove file.
	* sysdeps/alpha/fpu/s_nearbyint.c (__nearbyint): Remove;
	include sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c.

	* sysdeps/alpha/fpu/math_private.h (math_opt_barrier): New.
	(math_force_eval): New.

	* sysdeps/alpha/fpu/s_lround.c: Add 0.5 with chopped rounding.
	* sysdeps/alpha/fpu/s_lroundf.c: Likewise.

	* sysdeps/alpha/fpu/s_round.c: Remove file.
	* sysdeps/alpha/fpu/s_roundf.c: Remove file.

	* elf/dl-support.c (HP_TIMING_AVAIL): Do not redefine.
	(_dl_non_dynamic_init): Check HP_SMALL_TIMING_AVAIL instead.
	* elf/rtld.c (HP_TIMING_AVAIL): Do not redefine.
	(_dl_start_final): Check HP_SMALL_TIMING_AVAIL instead.
	(_dl_start, print_statistics): Likewise.
	* sysdeps/generic/ldsodefs.h (struct rtld_global): Only check
	HP_SMALL_TIMING_AVAIL in defining _dl_cpuclock_offset.

	* sysdeps/aarch64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/generic/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/i386/i686/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/ia64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h
	(HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/x86_64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.

	* sysdeps/aarch64/hp-timing.h: New file.

	* sysdeps/generic/hp-timing.h: Remove dead comment.
	* sysdeps/generic/hp-timing-common.h: New file.
	* sysdeps/alpha/hp-timing.h: Include it.
	(HP_TIMING_DIFF, HP_TIMING_ACCUM_NT, HP_TIMING_PRINT): Remove.
	* sysdeps/i386/i686/hp-timing.h: Likewise.
	* sysdeps/ia64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc64/hp-timing.h: Likewise.
	* sysdeps/x86_64/hp-timing.h: Don't include the i686 version.
	(HP_TIMING_AVAIL, HP_TIMING_INLINE): Define.
	(hp_timing_t): New.

	* benchtests/bench-string.h (_dl_hp_timing_overhead): Remove.
	* benchtests/bench-timing.h (_dl_hp_timing_overhead): Remove.
	(TIMING_INIT): Remove call to HP_TIMING_DIFF_INIT.
	* elf/rtld.c (_dl_start_final): Likewise.
	* sysdeps/generic/ldsodefs.h (_dl_hp_timing_overhead): Remove.
	* sysdeps/alpha/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h
	(HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/i386/i686/hp-timing.c: Remove file.
	* sysdeps/x86_64/hp-timing.c: Remove file.
	* sysdeps/ia64/hp-timing.c: Remove file.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.c: Remove file.
	* sysdeps/powerpc/powerpc64/hp-timing.c: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.c: Remove file.
	* sysdeps/sparc/sparc64/hp-timing.c: Remove file.

	* sysdeps/alpha/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_TIMING_ACCUM): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_ACCUM): Remove.

	* sysdeps/alpha/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_ZERO): Remove.

	* sysdeps/powerpc/powerpc32/hp-timing.h: Remove file.

2014-07-03  Maciej W. Rozycki  <macro@codesourcery.com>

	* stdlib/tst-strtod-overflow.c (TIMEOUT): Bump up to 30.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	Sync up with gettext.
	* intl/loadmsgcat.c: Define O_BINARY if not defined.
	[_MSC_VER]: Include malloc.h
	[_LIBC]: Define PRI_MACROS_BROKEN if it is not defined.
	(get_sysdep_segment_value) [!__UCLIBC__]: Return "I" flag.
	(_nl_load_domain): Open DOMAIN_FILE in binary mode.  Don't use
	TEMP_FAILURE_RETRY.  Cast return of alloca.
	[!_LIBC] Call gl_rwlock_init.
	[IN_LIBGLOCALE]: Call _nl_find_msg with one less argument.

2014-07-02  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/cdefs.h: Check if __STDC_VERSION__ is defined
	before checking its value.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* intl/loadmsgcat.c (_nl_load_domain): Use __builtin_expect.

	* debug/memcpy_chk.c: Don't include pagecopy.h.
	* debug/mempcpy_chk.c: Likewise.
	* string/memcpy.c: Likewise.
	* string/memmove.c: Likewise.
	* sysdeps/powerpc/memmove.c: Likewise.
	* sysdeps/generic/memcopy.h: Include pagecopy.h.  Move
	definition of PAGE_COPY_FWD_MAYBE here...
	* sysdeps/generic/pagecopy.h: ... from here.
	* sysdeps/mach/pagecopy.h: Don't include generic pagecopy.h.

2014-07-02  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/strcat.c: Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcat multiarch
	optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c: New file:
	multiarch strcat for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-ppc64.c: New file/
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power7.c: New file.

2014-07-02  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-sysdep.c: Include <sys/param.h>.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* intl/loadmsgcat.c: Remove declaration of
	get_sysdep_segment_value.
	(get_sysdep_segment_value): Use ISO C style.
	(_nl_load_domain): Use ISO C style.  Get rid of redundant
	semicolon.  Fix typo and formatting in comment.
	(_nl_unload_domain): Use ISO C style.

	* sysdeps/posix/sysconf.c (__sysconf): Fix typo in macro name.

2014-07-02  Will Newton  <will.newton@linaro.org>

	* malloc/obstack.c: Merge from gnulib master.
	[HAVE_CONFIG_H]: Remove conditional code.
	[!_LIBC]: Include config.h.
	[!ELIDE_CODE]: Don't include inttypes.h, include
	stdint.h unconditionally.
	(print_and_abort): Mark as _Noreturn.
	(_obstack_allocated_p): Mark as __attribute_pure__.
	(obstack_free): Rename to __obstack_free.
	[!__attribute__]: Remove conditional code.
	* malloc/obstack.h: Merge from gnulib master.
	[__cplusplus]: Move conditional down.
	[!__attribute_pure__]: Define __attribute_pure__ here
	if it is not already defined.
	(_obstack_memory_used): Mark as __attribute_pure__.
	[!__obstack_free]: Define as obstack_free.
	[__GNUC__]: Remove check for ancient NeXT gcc.

2014-07-02  Will Newton  <will.newton@linaro.org>
	    Paul Eggert  <eggert@cs.ucla.edu>

	* misc/sys/cdefs.h (_Noreturn): New macro, for pre-C11 compilers.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/gethnamaddr.c: Add comment warning that the file is
	not maintained.

2014-07-01  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/unix/sysv/linux/hppa/librt.abilist: Remove GLIBC_2.3
	entries.

	* sysdeps/unix/sysv/linux/hppa/Versions: Remove librt GLIBC_2.3
	entry for aio_cancel and aio_cancel64.
	* sysdeps/unix/sysv/linux/hppa/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libBrokenLocale.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libutil.abilist: New file.

2014-07-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sysconf.c: Include <sys/param.h>.
	* nptl/pthread_mutex_lock.c: Likewise.
	* nptl/pthread_mutex_timedlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_getaffinity.c: Likewise.

2014-07-01  Richard henderson  <rth@redhat.com>

	* sysdeps/alpha/fpu/bits/mathinline.h (__isnanf): Remove.
	(__isnan, __isnanl): Remove.
	* sysdeps/alpha/fpu/s_isnan.c (__isnan): Use integer arithmetic.

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2014-07-01  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-07-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r)
	[MULTI_PTRS_ARE_ALIASES]: Remove code.

2014-07-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PSELECT): Do not
	undefine.
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PREADV): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PWRITEV): Likewise.

2014-07-01  Roland McGrath <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/microblaze/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/microblaze/nptl/fork.c: File removed.

	* sysdeps/microblaze/nptl/tls.h: Define TLS_DEFINE_INIT_TP.
	* sysdeps/unix/sysv/linux/microblaze/nptl/createthread.c: File removed.

	* sysdeps/microblaze/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h:
	... here.
	* sysdeps/microblaze/nptl/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/semaphore.h: ... here.

	* sysdeps/unix/sysv/linux/microblaze/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/microblaze/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/vfork.S: ... here.

	* sysdeps/unix/sysv/linux/microblaze/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/microblaze/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/microblaze/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/microblaze/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/microblaze/nptl/pthread_once.c: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/pthread_once.c: ... here.

2014-07-01  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: New file.
	* sysdeps/unix/sysv/linux/microblaze/socket.S: Update SINGLE_THREAD_P use.
	* sysdeps/unix/sysv/linux/microblaze/Makefile(libpthread-routines):
	Add sysdep.

2014-06-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips32/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* sysdeps/arm/libm-test-ulps: Regenerated.

2014-06-30  Maciej W. Rozycki  <macro@codesourcery.com>
	    Roland McGrath <roland@hack.frob.com>

	* test-skeleton.c (signal_handler): Kill the whole process group
	before killing the child individually.
	(main): Report any failure on `setpgid'.

2014-06-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/nptl/tls.h: Rename the multiple inclusion guard
	from _TLS_H to _ARM_NPTL_TLS_H.
	(TLS_INIT_TP): Move macro, and #include of <sysdep.h>, to ...
	* sysdeps/unix/sysv/linux/arm/tls.h: ... this new file.

2014-06-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16539]
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Include <float.h>.
	(__expm1l): Return argument unchanged when small but not
	subnormal.

	* soft-fp/op-1.h (_FP_UNPACK_RAW_1): Rename local variables to
	include macro name.
	(_FP_UNPACK_RAW_1_P): Likewise.
	(_FP_PACK_RAW_1): Likewise.
	(_FP_PACK_RAW_1_P): Likewise.
	(_FP_MUL_MEAT_1_wide): Likewise.
	(_FP_MUL_MEAT_DW_1_hard): Likewise.
	(_FP_MUL_MEAT_1_hard): Likewise.
	(_FP_DIV_MEAT_1_imm): Likewise.
	(_FP_DIV_MEAT_1_udiv_norm): Likewise.
	(_FP_DIV_MEAT_1_udiv): Likewise.
	* soft-fp/op-2.h (__FP_FRAC_DEC_2): Likewise.
	(_FP_UNPACK_RAW_2): Likewise.
	(_FP_UNPACK_RAW_2_P): Likewise.
	(_FP_PACK_RAW_2): Likewise.
	(_FP_PACK_RAW_2_P): Likewise.
	(_FP_MUL_MEAT_DW_2_wide): Likewise.
	(_FP_MUL_MEAT_2_wide): Likewise.
	(_FP_MUL_MEAT_DW_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_DW_2_gmp): Likewise.
	(_FP_MUL_MEAT_2_gmp): Likewise.
	(_FP_DIV_MEAT_2_udiv): Likewise.
	* soft-fp/op-4.h (_FP_FRAC_SLL_4): Likewise.
	(_FP_FRAC_SRL_4): Likewise.
	(_FP_FRAC_SRST_4): Likewise.
	(_FP_FRAC_SRS_4): Likewise.
	(_FP_UNPACK_RAW_4): Likewise.
	(_FP_UNPACK_RAW_4_P): Likewise.
	(_FP_PACK_RAW_4): Likewise.
	(_FP_PACK_RAW_4_P): Likewise.
	(_FP_MUL_MEAT_DW_4_wide): Likewise.
	(_FP_MUL_MEAT_4_wide): Likewise.
	(_FP_MUL_MEAT_4_gmp): Likewise.
	(umul_ppppmnnn): Likewise.
	(_FP_DIV_MEAT_4_udiv): Likewise.
	(__FP_FRAC_ADD_4): Likewise.
	(__FP_FRAC_SUB_3): Likewise.
	(__FP_FRAC_SUB_4): Likewise.
	(__FP_FRAC_DEC_3): Likewise.
	(__FP_FRAC_DEC_4): Likewise.
	(__FP_FRAC_ADDI_4): Likewise.
	* soft-fp/op-8.h (_FP_FRAC_SLL_8): Likewise.
	(_FP_FRAC_SRL_8): Likewise.
	(_FP_FRAC_SRS_8): Likewise.

	* soft-fp/extended.h (FP_UNPACK_RAW_E): Rename local variables to
	include macro name.
	(FP_UNPACK_RAW_EP): Likewise.
	(FP_PACK_RAW_E): Likewise.
	(FP_PACK_RAW_EP): Likewise.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Likewise.
	(_FP_ISSIGNAN): Likewise.
	(_FP_ADD_INTERNAL): Likewise.
	(_FP_FMA): Likewise.
	(_FP_CMP): Likewise.
	(_FP_SQRT): Likewise.
	(_FP_TO_INT): Likewise.
	(_FP_FROM_INT): Likewise.
	(FP_EXTEND): Likewise.
	(_FP_DIV_MEAT_N_loop): Likewise.

2014-06-30  Maciej W. Rozycki  <macro@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Adjust macro formatting
	throughout.

2014-06-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17097]
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Return
	result with correct sign in case of exponents that produce
	overflow except for X very close to 1.

2014-06-28  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: merge #if/#ifdef usage from glibc
	* lib/mktime.c: Use "#if defined DEBUG && DEBUG", not "#if DEBUG",
	as that works with both Glibc's and Gnulib's style.
	See thread starting at Siddhesh Poyarekar's bug report at:
	http://lists.gnu.org/archive/html/bug-gnulib/2014-06/msg00102.html

2014-06-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/memcopy.h: Define MEMCPY_OK_FOR_FWD_MEMMOVE.
	* sysdeps/tile/memcopy.h: Redefine MEMCPY_OK_FOR_FWD_MEMMOVE.
	* sysdeps/tile/tilegx/memmove.c: Remove file.

2014-06-27  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig ($(common-objpfx)soversions.mk): Do not generate
	abi-name definition.
	* scripts/soversions.awk: Do not handle or generate ABI lines.
	* shlib-versions: Remove ABI entries.
	* sysdeps/powerpc/nofpu/shlib-versions: Remove file.
	* sysdeps/x86_64/x32/shlib-versions: Remove ABI entry.

2014-06-27  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/mips32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libcidn.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libcidn.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_compat.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_compat.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_dns.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_dns.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_files.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_files.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_hesiod.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_hesiod.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_nis.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_nis.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_nisplus.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_nisplus.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libBrokenLocale.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libanl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libcrypt.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libdl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libm.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libnsl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libpthread.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/librt.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libthread_db.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libutil.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: ... here.

	* sysdeps/unix/sysv/linux/mips/vfork.S: Incorporate
	SAVE_PID and RESTORE_PID blocks from nptl/pt-vfork.S.
	* sysdeps/unix/sysv/linux/mips/nptl/vfork.S: File removed.
	* sysdeps/unix/sysv/linux/mips/nptl/pt-vfork.S: File removed.
	* sysdeps/unix/sysv/linux/mips/pt-vfork.S: New file.

2014-06-27  Arjun Shankar  <arjun.is@lostca.se>

	[BZ #17092]
	* nscd/nscd.c (monitor_child): Return exit status of child
	instead of return value from wait syscall.

2014-06-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_commonpagesize): Remove variable.
	(libc_relro_required): Likewise.
	(libc_cv_z_relro): Remove configure test.
	* configure: Regenerated.
	* sysdeps/aarch64/preconfigure (libc_commonpagesize): Do not set
	variable.
	(libc_relro_required): Likewise.
	* sysdeps/alpha/preconfigure (libc_commonpagesize): Likewise.
	(libc_relro_required): Likewise.
	* sysdeps/arm/preconfigure.ac (libc_commonpagesize): Likewise.
	(libc_relro_required): Likewise.
	* sysdeps/arm/preconfigure: Regenerated.
	* sysdeps/ia64/preconfigure: Remove file.
	* sysdeps/tile/preconfigure (libc_commonpagesize): Do not set
	variable.
	(libc_relro_required): Likewise.

	[BZ #16561]
	[BZ #16562]
	* sysdeps/ieee754/dbl-64/e_jn.c: Include <float.h>.
	(__ieee754_yn): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/flt-32/e_jnf.c: Include <float.h>.
	(__ieee754_ynf): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/i386/fpu/fenv_private.h [!__SSE2_MATH__]
	(libc_feholdsetround_ctx): New macro.
	* math/libm-test.inc (yn_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps : Likewise.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips64/nptl/sysdep-cancel.h
	[__PIC__] (PSEUDO): Use name of _nocancel entry point in
	corresponding .cpsetup call.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/libc-aeabi_read_tp.S: Moved ...
	* sysdeps/arm/libc-aeabi_read_tp.S: ... here.
	* sysdeps/arm/Makefile [$(subdir) = csu]
	(aeabi_routines): Add aeabi_read_tp and libc-aeabi_read_tp here.
	(static-only-routines): Add aeabi_read_tp here.
	(shared-only-routines): Add libc-aeabi_read_tp here.
	(CFLAGS-libc-start.c): Add -fexceptions here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = csu]
	(sysdep_routines, static-only-routines, shared-only-routines):
	Don't add to these here.
	(CFLAGS-libc-start.c): Likewise.

	* sysdeps/unix/sysv/linux/arm/nptl-aeabi_unwind_cpp_pr1.c: Moved ...
	* sysdeps/arm/nptl-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/unix/sysv/linux/arm/rt-aeabi_unwind_cpp_pr1.c: Moved ...
	* sysdeps/arm/rt-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/arm/Makefile [$(subdir) = rt]
	(librt-sysdep_routines, librt-shared-only-routines):
	Append rt-aeabi_unwind_cpp_pr1 here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = rt]
	(librt-sysdep_routines, librt-shared-only-routines): Don't do it here.
	* sysdeps/arm/nptl/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines):
	Append nptl-aeabi_unwind_cpp_pr1 here.
	(tests): Filter out tst-cleanupx4 here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines, tests):
	Don't do those here.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* scripts/list-sources.sh: Do not handle ports specially.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/fesetenv.c: Include <fpu_control.h>.
	* sysdeps/arm/feupdateenv.c: Likewise.

	* posix/spawn_faction_addopen.c: Include <stdlib.h> for free decl.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2014-05-05.10 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2014-03-23.
	* scripts/config.sub: Update to version 2014-05-01
	* scripts/install-sh: Update to version 2013-12-25.23.
	* scripts/move-if-change: Update from gnulib.

2014-06-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* debug/memmove_chk.c: Remove pagecopy.h include.

2014-06-26  Paul Eggert  <eggert@cs.ucla.edu>

	* time/mktime.c (leapyear): Remove inline keyword.  The code is now
	identical to gnulib mktime.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac: Do not test for machine being rs6000.  Do not test
	for powerpc*-*soft.
	* configure: Regenerated.

	* configure.ac (libc_cv_asm_cfi_directives): Remove configure
	test.
	* configure: Regenerated.
	* config.h.in (HAVE_ASM_CFI_DIRECTIVES): Remove macro undefine.
	* sysdeps/arm/configure.ac (libc_cv_asm_cfi_directive_sections):
	Remove configure test.
	* sysdeps/arm/configure: Regenerated.
	* sysdeps/nptl/configure.ac: Do not check
	libc_cv_asm_cfi_directives.
	* sysdeps/nptl/configure: Regenerated.
	* sysdeps/x86_64/nptl/configure.ac: Remove file.
	* sysdeps/x86_64/nptl/configure: Remove generated file.
	* b/sysdeps/generic/sysdep.h [HAVE_ASM_CFI_DIRECTIVES]: Make code
	unconditional.
	[!HAVE_ASM_CFI_DIRECTIVES]: Remove conditional code.

2014-06-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* posix/fnmatch.c: Define WIDE_CHAR_VERSION.
	* posix/fnmatch_loop.c: Undefine WIDE_CHAR_VERSION.
	(FCT): Check value of WIDE_CHAR_VERSION instead of checking if
	it is defined.

	* elf/dl-runtime.c: Check for value of ELF_MACHINE_NO_RELA
	instead of whether it is defined.
	* sysdeps/aarch64/dl-machine.h: Define ELF_MACHINE_NO_RELA.
	* sysdeps/hppa/dl-machine.h: Likewise.
	* sysdeps/ia64/dl-machine.h: Likewise.
	* sysdeps/m68k/dl-machine.h: Likewise.
	* sysdeps/microblaze/dl-machine.h: Likewise.
	* sysdeps/mips/dl-machine.: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/sh/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/tile/dl-machine.h: Likewise.
	* sysdeps/x86_64/dl-machine.h: Likewise.

	* nscd/connections.c (enum usekey) [SEPARATE_KEY]: Remove
	code.
	(verify_persistent_db): Likewise.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libanl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/localplt.data:
	Identical file removed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libutil.abilist: ... here.

	* nptl/sysdeps/unix/sysv/linux/s390/Makefile: File removed, contents
	folded into ...
	* sysdeps/unix/sysv/linux/s390/Makefile [$(subdir) = nptl]: ... here.
	* sysdeps/unix/sysv/linux/s390/Versions
	(libpthread: GLIBC_2.19): New version set.
	* nptl/sysdeps/unix/sysv/linux/s390/Versions: File removed.
	* sysdeps/unix/sysv/linux/s390/s390-64/Versions
	(librt: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/Versions: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-conf.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-conf.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-timed.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-timed.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-unlock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/force-elision.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/force-elision.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/jmp-unwind.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/jmp-unwind.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pt-longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_once.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_once.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: ... here.

	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: ... here.
	(__libc_vfork): Define the function under this name.
	[!NOT_IN_libc] (__vfork): Make this an alias.
	[!NOT_IN_libc] (vfork): Conditionalize the weak_alias.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: ... here.
	(__libc_vfork): Define the function under this name.
	[!NOT_IN_libc] (__vfork): Make this an alias.
	[!NOT_IN_libc] (vfork): Conditionalize the weak_alias.
	* sysdeps/unix/sysv/linux/s390/pt-vfork.S: New file.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/pt-vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/pt-vfork.S: File removed.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Remove vfork.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S: Deconditionalize the
	code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/s390/s390-64/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/clone.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/clone.S: File removed.

	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/semaphore.h: Moved ...
	* sysdeps/aarch64/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/bits/local_lim.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: ... here.

2014-06-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/mips/nptl/clone.S: File removed.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/dl-opendir.c (__ASSUME_O_CLOEXEC): Do
	not undefine and redefine.
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs)
	[O_CLOEXEC]: Make code unconditional.
	(__get_nprocs) [!O_CLOEXEC]: Remove conditional code.
	* sysdeps/unix/sysv/linux/shm_open.c: Do not include
	<kernel-features.h>.
	[O_CLOEXEC && !__ASSUME_O_CLOEXEC] (have_o_cloexec): Remove
	conditional variable definition.
	(shm_open) [O_CLOEXEC]: Make code unconditional.
	(shm_open) [!O_CLOEXEC || !__ASSUME_O_CLOEXEC]: Remove conditional
	code.

	* configure.ac (USE_REGPARMS): Don't define here.
	* configure: Regenerated.
	* sysdeps/i386/configure.ac (USE_REGPARMS): Define here.
	* sysdeps/i386/configure: Regenerated.

	* nptl/createthread.c: Don't include kernel-features.h.
	* nptl/pthread_cancel.c: Likewise.
	* nptl/pthread_condattr_setclock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pt-raise.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_kill.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_sigqueue.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/raise.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/pt-vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/pt-vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_create.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_delete.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_getoverr.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_gettime.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_routines.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_settime.c: Likewise.
	* nscd/gai.c: Likewise.
	* nss/nss_db/db-open.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/sh/nptl/tls.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/adjtime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/xstatconv.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_getres.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_gettime.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/dl-execstack.c: Likewise.
	* sysdeps/unix/sysv/linux/dl-osinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/futimesat.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/poll.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstatat.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Likewise.
	* sysdeps/unix/sysv/linux/getpagesize.c: Likewise.
	* sysdeps/unix/sysv/linux/getsysstats.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/system.c: Likewise.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c: Likewise.
	* sysdeps/unix/sysv/linux/ifreq.c: Likewise.
	* sysdeps/unix/sysv/linux/ldsodefs.h: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/nptl/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/accept4.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/recvmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/sendmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c: Likewise.
	* sysdeps/unix/sysv/linux/netlinkaccess.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_mask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/prof-freq.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/system.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c: Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstatconv.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/system.c: Likewise.
	* sysdeps/unix/sysv/linux/syslog.c: Likewise.
	* sysdeps/unix/sysv/linux/system.c: Likewise.
	* sysdeps/unix/sysv/linux/testrtsig.h: Likewise.
	* sysdeps/unix/sysv/linux/timespec_get.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.h: Likewise.

	* configure.ac (libc_cv_c_asmcr0_bug): Remove configure test.
	* configure: Regenerated.
	* config.h.in (BROKEN_PPC_ASM_CR0): Remove macro.

	* configure.ac (base_machine): Do not set specially for particular
	machines here.
	* configure: Regenerated.
	* sysdeps/powerpc/preconfigure: Move machine and base_machine
	settings from configure.ac.
	* sysdeps/i386/preconfigure: New file.
	* sysdeps/s390/preconfigure: Likewise.
	* sysdeps/sh/preconfigure: Likewise.
	* sysdeps/sparc/preconfigure: Likewise.

2014-06-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/sparc/sparc64/nptl/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc64/cpu_relax.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_init.c: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_unlock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc64/pthreaddef.h: ... here.
	* sysdeps/sparc/sparc32/sparcv9/cpu_relax.S: Update #include.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: Likewise.
	* sysdeps/sparc/sparc64/nptl/Makefile: File removed, its contents ...
	* sysdeps/sparc/sparc64/Makefile: ... appended here.

	* sysdeps/sparc/sparc32/nptl/lowlevellock.c: Moved ...
	* sysdeps/sparc/sparc32/lowlevellock.c: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc32/nptl/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc32/pthreaddef.h: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/sem_post.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_timedwait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_wait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/cpu_relax.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_barrier_wait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_unlock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_post.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_timedwait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_wait.c: ... here.

	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: ... here.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* timezone/checktab.awk: Update from tzcode 2014e.
	* timezone/private.h: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_XFS_RESTRICTED_CHOWN): Remove macro.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_chown_restricted)
	[__ASSUME_XFS_RESTRICTED_CHOWN]: Make code unconditional.
	(__statfs_chown_restricted) [!__ASSUME_XFS_RESTRICTED_CHOWN]:
	Remove conditional code.

2014-06-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/arm/dl-procinfo.c
	(_dl_arm_cap_flags): Add HWCAP2 values.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.h
	(_DL_HWCAP_COUNT): Increase to 37.
	(_DL_HWCAP_LAST): New define.
	(_DL_HWCAP2_LAST): New define.
	(_dl_procinfo): Add support for printing
	AT_HWCAP2 entries.
	(_dl_string_hwcap): Use _dl_hwcap_string.

2014-06-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* README: Do not mention ports directory.

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMENSAT):
	Remove macro.
	* sysdeps/unix/sysv/linux/futimes.c: Do not include
	<kernel-features.h>.
	[__NR_utimensat && !__ASSUME_UTIMENSAT] (miss_utimensat): Remove
	conditional variable definition.
	(__futimes): Update comment.
	(__futimes) [__ASSUME_UTIMENSAT]: Make code unconditional.
	(__futimes) [!__ASSUME_UTIMENSAT]: Remove conditional code.

	[BZ #16560]
	* sysdeps/ieee754/dbl-64/e_exp10.c (__ieee754_exp10): Return 1 for
	arguments close to 0.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c (__ieee754_exp10l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c (__ieee754_exp10l):
	Likewise.
	* math/auto-libm-test-in: Add more tests of exp10.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_COMPLETE_READV_WRITEV): Remove macro.
	* sysdeps/unix/sysv/linux/readv.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_COMPLETE_READV_WRITEV]: Remove conditional code.
	[!UIO_FASTIOV] (UIO_FASTIOV): Remove macro.
	(__libc_readv) [__ASSUME_COMPLETE_READV_WRITEV]: Make code
	unconditional.
	(__libc_readv) [!__ASSUME_COMPLETE_READV_WRITEV]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/writev.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_COMPLETE_READV_WRITEV]: Remove conditional code.
	[!UIO_FASTIOV] (UIO_FASTIOV): Remove macro.
	(__libc_writev) [__ASSUME_COMPLETE_READV_WRITEV]: Make code
	unconditional.
	(__libc_writev) [!__ASSUME_COMPLETE_READV_WRITEV]: Remove
	conditional code.

2014-06-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/posix/tempname.c: Merge from gnulib, cosmetic
	comment changes throughout the file.  Remove checks
	for HAVE_*_H definitions that are not required.
	(__gen_tempname): Call abort if an unknown kind value is
	passed.

2014-06-25  Andreas Schwab  <schwab@suse.de>

	[BZ #17086]
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c: Add compat symbols for
	scalbln, scalblnf, scalblnl in libc.

2014-06-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17086]
	* sysdeps/i386/fpu/s_scalbn.S: Add compat symbol for libc.so.
	* sysdeps/i386/fpu/s_scalbnf.S: Likewise.
	* sysdeps/i386/fpu/s_scalbnl.S: Likewise.

2014-06-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/i486/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i486/pthread_spin_trylock.S: ... here.
	* sysdeps/i386/i586/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i586/pthread_spin_trylock.S: ... here.
	Update #include.
	* sysdeps/i386/i686/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i686/pthread_spin_trylock.S: ... here.
	Update #include.
	* sysdeps/x86_64/64/nptl/shlib-versions: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: ... here.
	* sysdeps/x86_64/x32/nptl/shlib-versions: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: ... here.
	* sysdeps/x86/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/x86/bits/pthreadtypes.h: ... here.
	* sysdeps/x86/nptl/bits/semaphore.h: Moved ...
	* sysdeps/x86/bits/semaphore.h: ... here.
	* sysdeps/x86/nptl/elide.h: Moved ...
	* sysdeps/x86/elide.h: ... here.
	* sysdeps/x86_64/nptl/Implies: File removed.
	* sysdeps/i386/nptl/Implies: File removed.

2014-06-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16539]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]: Just
	return the argument for normal arguments with exponent below -64.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add another test of expm1.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16287]
	* sysdeps/ieee754/ldbl-128/s_erfl.c (__erfl): Return 1 without
	calling __erfcl for arguments at least 16.
	* math/auto-libm-test-in: Add more tests of erf.
	* math/auto-libm-test-out: Regenerated.

	* sysdeps/unix/sysv/linux/configure.ac: Remove cases for
	individual architectures.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/configure.ac: New file.
	* sysdeps/unix/sysv/linux/i386/configure: New generated file.
	* sysdeps/unix/sysv/linux/powerpc/configure.ac
	(ldd_rewrite_script): Define variable.
	* sysdeps/unix/sysv/linux/powerpc/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/configure.ac: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/configure: New
	generated file.
	* sysdeps/unix/sysv/linux/s390/configure.ac: New file.
	* sysdeps/unix/sysv/linux/s390/configure: New generated file.
	* sysdeps/unix/sysv/linux/sh/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sh/configure: New generated file.
	* sysdeps/unix/sysv/linux/sparc/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sparc/configure: New generated file.
	* sysdeps/unix/sysv/linux/x86_64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/configure: New generated file.

2014-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17084]
	* sysdeps/x86/nptl/bits/pthreadtypes.h (pthread_mutex_t):
	Rename member __data.d to __data.__elision_data.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* NEWS: Add 16918 to fixed bug list.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fesetenv.c (fesetenv): Optimize implementation.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fpu_control.h (_FPU_MASK_RM): Define.
	* sysdeps/arm/fenv_private.h (libc_fesetround_vfp)
	(libc_feholdexcept_setround_vfp) (libc_feholdsetround_vfp)
	(libc_feresetround_vfp) (libc_feholdsetround_vfp_ctx)
	(libc_feresetround_vfp_ctx): Use _FPU_MASK_RM.
	* sysdeps/arm/fesetround.c (fesetround): Use _FPU_MASK_RM.
	* sysdeps/arm/get-rounding-mode.h (get_rounding_mode):
	Use _FPU_MASK_RM.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fsetexcptflg.c (fesetexceptflag): Remove unused include.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/feholdexcpt.c (feholdexcept): Remove space.
	* sysdeps/arm/fesetenv.c (fesetenv): Remove space.
	* sysdeps/arm/fesetround.c (fesetround): Remove space.
	* sysdeps/arm/fraiseexcpt.c (feraiseexcept): Remove space.

2014-06-24  Wilco  <wdijkstr@arm.com>

	[BZ #16918]
	* sysdeps/arm/feupdateenv.c (feupdateenv):
	Rewrite to reduce FPSCR accesses and fix return value.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fclrexcpt.c (feclearexcept):
	Optimize to avoid unnecessary FPSCR writes.
	* sysdeps/arm/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/arm/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/arm/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/arm/setfpucw.c (__setfpucw): Likewise.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fegetround.c (fegetround): Call get_rounding_mode.
	* sysdeps/arm/feholdexcpt.c (feholdexcept): Call libc_feholdexcept_vfp.
	* sysdeps/arm/fesetround.c (fesetround): Call libc_fesetround_vfp.
	* sysdeps/arm/fgetexcptflg.c (fegetexceptflag):
	Call libc_fetestexcept_vfp.
	* sysdeps/arm/ftestexcept.c (fetestexcept): Call libc_fetestexcept_vfp.
	* sysdeps/arm/fenv_private.h: Move libc_*_vfp functions outside of
	__SOFTFP__ ifdef so that they can be built for softfp.

2014-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/x86/nptl/elide.h (elision_adapt): Make first
	argument type signed char.

	* Makerules (check-abi): Dump diff of symlist if the test
	fails.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/get-rounding-mode.h: Include <stdlib.h> before
	using abort.

	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs):
	Remove unused variable ST.

2014-06-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16354]
	[BZ #17061]
	* sysdeps/ieee754/dbl-64/e_cosh.c (__ieee754_cosh): Check for
	small arguments before calling __expm1.
	* sysdeps/ieee754/flt-32/e_coshf.c (__ieee754_coshf): Check for
	small arguments before calling __expm1f.
	* sysdeps/ieee754/ldbl-128/e_coshl.c (__ieee754_coshl): Check for
	small arguments before calling __expm1l.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c (__ieee754_coshl): Likewise.
	* math/auto-libm-test-in: Add more cosh tests.  Do not allow
	spurious underflow for some cosh tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #17050]
	* sysdeps/ieee754/dbl-64/e_j1.c: Include <errno.h>.
	(__ieee754_y1): Set errno if return value overflows.
	* sysdeps/ieee754/flt-32/e_j1f.c: Include <errno.h>.
	(__ieee754_y1f): Set errno if return value overflows.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Include <errno.h>.
	(__ieee754_y1l): Set errno if return value overflows.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Include <errno.h>.
	(__ieee754_y1l): Set errno if return value overflows.
	* math/auto-libm-test-in: Add more tests of y0, y1 and yn.
	* math/auto-libm-test-out: Regenerated.

	* math/gen-auto-libm-tests.c: Document use of
	ignore-zero-inf-sign.
	(input_flag_type): Add value flag_ignore_zero_inf_sign.
	(input_flags): Add ignore-zero-inf-sign.
	(output_for_one_input_case): Handle flag_ignore_zero_inf_sign.
	* math/gen-libm-test.pl (generate_testfile): Handle
	ignore-zero-inf-sign.
	* math/auto-libm-test-in: Mark some cpow tests with
	ignore-zero-inf-sign and some with xfail-rounding.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cpow_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16315]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Ensure possibly
	overflowing or underflowing operations take place with sign of
	result.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Include <math.h>.
	(__ieee754_pow): Recompute overflowing and underflowing results in
	original rounding mode.
	* sysdeps/x86/fpu/powl_helper.c: Include <stdbool.h>.
	(__powl_helper): Allow negative argument X and scale negated value
	as needed.  Avoid passing value outside [-1, 1] to f2xm1.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Ensure possibly
	overflowing or underflowing operations take place with sign of
	result.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c [HAVE_FMA4_SUPPORT]:
	Include <math.h>.
	* math/auto-libm-test-in: Add more tests of pow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (pow_test): Use ALL_RM_TEST.
	(pow_tonearest_test_data): Remove.
	(pow_test_tonearest): Likewise.
	(pow_towardzero_test_data): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_downward_test_data): Likewise.
	(pow_test_downward): Likewise.
	(pow_upward_test_data): Likewise.
	(pow_test_upward): Likewise.
	(main): Don't call removed functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/c++-types.data:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/ld.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libBrokenLocale.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libanl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libcrypt.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libdl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libnsl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libresolv.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/librt.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libthread_db.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libutil.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libBrokenLocale-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libanl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libcrypt-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libdl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libnsl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libpthread-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libresolv-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/librt-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libthread_db-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libutil-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data: ... here.

2014-06-23  Will Newton  <will.newton@linaro.org>
	    Wilco  <wdijkstr@arm.com>

	* sysdeps/generic/math_private.h: Add generic HAVE_RM_CTX
	implementation.  Include get-rounding-mode.h.
	[!HAVE_RM_CTX]: Define HAVE_RM_CTX to zero.
	[!libc_feholdsetround_noex_ctx]: Define
	libc_feholdsetround_noex_ctx.
	[!libc_feholdsetround_noexf_ctx]: Define
	libc_feholdsetround_noexf_ctx.
	[!libc_feholdsetround_noexl_ctx]: Define
	libc_feholdsetround_noexl_ctx.
	(libc_feholdsetround_ctx): New function.
	(libc_feresetround_ctx): New function.
	(libc_feholdsetround_noex_ctx): New function.
	(libc_feresetround_noex_ctx): New function.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/mips/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/semaphore.h: Moved ...
	* sysdeps/mips/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/mips/bits/local_lim.h: ... here.

	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/m68k/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/semaphore.h: Moved ...
	* sysdeps/m68k/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/m68k/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/bits/atomic.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/m68k/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: ... here.

	* sysdeps/unix/sysv/linux/sh/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sh/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libutil.abilist: ... here.

2014-06-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h [__USE_GNU]
	(FALLOC_FL_COLLAPSE_RANGE): New macro.
	[__USE_GNU] (FALLOC_FL_ZERO_RANGE): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h (IP_PMTUDISC_OMIT): Likewise.
	(IPV6_PMTUDISC_INTERFACE): Likewise.
	(IPV6_PMTUDISC_OMIT): Likewise.

2014-06-23  Andreas Schwab  <schwab@suse.de>

	* nptl/sysdeps/unix/sysv/linux/mq_notify.c (init_mq_netlink):
	Remove unused errout label.

2014-06-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/hwcap.h [PPC_FEATURE2_HAS_VEC_CRYPTO]: New
	macro: hardware supports Vector Crypto instructions.

2014-06-23  Will Newton  <will.newton@linaro.org>

	* elf/dl-lookup.c: Use __glibc_unlikely and __glibc_likely
	rather than __builtin_expect.

	* elf/dl-lookup.c (undefined_msg): Remove variable.
	(_dl_lookup_symbol_x): Replace undefined_msg with string
	literal.

	* elf/dl-lookup.c (do_lookup_unique): New function.
	(do_lookup_x): Move STB_GNU_UNIQUE handling code
	to a separate function.

2014-06-23  Andreas Schwab  <schwab@suse.de>

	[BZ #17079]
	* nss/nss_files/files-XXX.c (get_contents): Store overflow marker
	before reading the next line.

2014-06-23  Will Newton  <will.newton@linaro.org>

	* test-skeleton.c (signal_handler): Use printf and %m
	rather than perror.  Use printf rather than fprintf to
	stderr.  Use puts rather than fputs to stderr.
	(main): Likewise.

2014-06-22  Ludovic Courtès  <ludo@gnu.org>

	* nscd/nscd.c (thread_info_t): Remove typedef.
	(thread_info): Remove variable.

2014-06-21  Allan McRae  <allan@archlinux.org>

	* NEWS: Mention CVE-2014-4043.

2014-06-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/smp.h: Moved ...
	* nptl/smp.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/rtld-lowlevel.h: File removed.

	* include/libc-symbols.h (HAVE_CONFIG_H, STDC_HEADERS): New macros.
	* catgets/Makefile (catgets-CPPFLAGS): Remove -DHAVE_CONFIG_H.
	* locale/Makefile (CPPFLAGS-locale-programs): Likewise.
	* stdlib/strtol_l.c [_LIBC] (STDC_HEADERS): Don't define it.

	* nptl/allocatestack.c: Include <stack-aliasing.h>.
	* nptl/stack-aliasing.h: New file.
	* sysdeps/i386/i686/stack-aliasing.h: New file.
	* sysdeps/i386/i686/nptl/Makefile: File removed.
	* sysdeps/x86_64/stack-aliasing.h: New file.
	* sysdeps/x86_64/nptl/Makefile
	(CFLAGS-pthread_create.c): Variable removed.

	* nptl/sysdeps/unix/sysv/linux/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/bits/local_lim.h: ... here, replacing the
	old file.
	* nptl/sysdeps/unix/sysv/linux/bits/posix_opt.h: Moved ...
	* sysdeps/unix/sysv/linux/bits/posix_opt.h: ... here, replacing the
	old file.

2014-06-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_SIGFRAME_V2): Remove macro.
	* sysdeps/unix/sysv/linux/arm/sigrestorer.S: Update comment.
	[!__ASSUME_SIGFRAME_V2]: Remove conditional code.
	(__default_sa_restorer_v2): Rename to __default_sa_restorer.
	(__default_rt_sa_restorer_v2): Rename to __default_rt_sa_restorer.
	* sysdeps/unix/sysv/linux/arm/sigaction.c (__default_sa_restorer):
	Declare as function.  Remove conditional macro definitions.
	(__default_rt_sa_restorer): Likewise.
	(__default_sa_restorer_v1): Remove declaration.
	(__default_sa_restorer_v2): Likewise.
	(__default_rt_sa_restorer_v1): Likewise.
	(__default_rt_sa_restorer_v2): Likewise.
	* sysdeps/unix/sysv/linux/arm/Versions (GLIBC_PRIVATE): Remove
	__default_sa_restorer_v1, __default_rt_sa_restorer_v1,
	__default_sa_restorer_v2 and __default_rt_sa_restorer_v2.

2014-06-20  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sparc/Makefile [$(subdir) = nptl]
	(libpthread-routines): Add sysdep.
	* nptl/sysdeps/unix/sysv/linux/sparc/Makefile: File removed.
	* sysdeps/unix/sysv/linux/sparc/Versions
	(libpthread: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/sparc/Versions: File removed.
	* nptl/sysdeps/unix/sysv/linux/sparc/aio_cancel.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/aio_cancel.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/internaltypes.h: Moved ...
	* sysdeps/sparc/nptl/internaltypes.h: ... here.  Use #include_next.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_destroy.c:
	Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_init.c: Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_init.c: Moved ...
	* sysdeps/sparc/nptl/sem_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_post.c: Moved ...
	* sysdeps/sparc/nptl/sem_post.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_timedwait.c: Moved ...
	* sysdeps/sparc/nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_wait.c: Moved ...
	* sysdeps/sparc/nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: ... here.
	* sysdeps/sparc/sparc32/sparcv9/Makefile [$(subdir) = nptl]
	(libpthread-routines): Add cpu_relax.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/Makefile:
	File removed.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Versions
	(librt: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/Versions: File removed.
	* sysdeps/sparc/sparc64/nptl/Makefile: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile [$(subdir) = nptl]
	(CFLAGS-pause.c, CFLAGS-sigsuspend.c): New variables.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/Makefile: File removed.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/lowlevellock.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/lowlevellock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/pthread_barrier_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_post.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_trywait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/cpu_relax.S:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/cpu_relax.S: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/pthread_barrier_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_barrier_wait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_post.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_post.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_timedwait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_timedwait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_trywait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_trywait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_wait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/cpu_relax.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c: ... here.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* nptl/pthread_cond_wait.c: Include <kernel-features.h>.
	* nptl/pthread_rwlock_timedrdlock.c: Likewise.
	* nptl/pthread_rwlock_timedwrlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.c: Likewise.
	* nscd/nscd.c: Likewise.
	* sysdeps/i386/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/powerpc/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/sh/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/x86_64/nptl/tcb-offsets.sym: Likewise.

	* nptl/sysdeps/unix/sysv/linux/mq_notify.c: Do not include
	<kernel-features.h>.
	(init_mq_netlink): Remove conditional have_sock_cloexec
	definitions.  Remove code conditional on have_sock_cloexec < 0.
	(init_mq_netlink) [!SOCK_CLOEXEC]: Remove conditional code.
	(init_mq_netlink) [!__ASSUME_SOCK_CLOEXEC]: Likewise.
	* sysdeps/unix/sysv/linux/opensock.c: Do not include
	<kernel-features.h>.
	(__opensock) [SOCK_CLOEXEC]: Make code unconditional.
	(__opensock) [!__ASSUME_SOCK_CLOEXEC]: Remove conditional code.

2014-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add tests for memset_chk and memset.

	* sysdeps/x86_64/multiarch/init-arch.h (HAS_AVX2): Defined
	with AVX2_Usable.

2014-06-20  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #16046]
	* elf/tst-dl-iter-static.c: New file.
	* elf/Makefile (tests-static): Add tst-dl-iter-static.

	* stdlib/tst-qsort2.c (main): Fix off-by-one argc interpretation
	error.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_F_GETOWN_EX): Remove macro.
	* sysdeps/unix/sysv/linux/fcntl.c: Do not include
	<kernel-features.h>.
	(miss_F_GETOWN_EX): Remove variable or macro.
	(do_fcntl): Do not check miss_F_GETOWN_EX.
	(do_fcntl) [!__ASSUME_F_GETOWN_EX]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_AT_RANDOM):
	Remove macro.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard)
	[!__ASSUME_AT_RANDOM]: Remove conditional code.
	(_dl_setup_pointer_guard) [!__ASSUME_AT_RANDOM]: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ADJ_OFFSET_SS_READ): Remove macro.
	* sysdeps/unix/sysv/linux/adjtime.c (ADJTIME)
	[ADJ_OFFSET_SS_READ]: Make code unconditional.
	(ADJTIME) [!ADJ_OFFSET_SS_READ]: Remove conditional code.

2014-06-20  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17075]
	* sysdeps/arm/dl-machine.h (elf_machine_rel) <R_ARM_TLS_DESC>:
	Fix calculation of the symbol's value.
	* sysdeps/arm/tst-armtlsdescloc.c: New file.
	* sysdeps/arm/tst-armtlsdesclocmod.c: New file.
	* sysdeps/arm/tst-armtlsdescextnow.c: New file.
	* sysdeps/arm/tst-armtlsdescextlazymod.c: New file.
	* sysdeps/arm/tst-armtlsdescextlazy.c: New file.
	* sysdeps/arm/tst-armtlsdescextnowmod.c: New file.
	* sysdeps/arm/Makefile (tests): Add `tst-armtlsdesc',
	`tst-armtlsdescextnow' and `tst-armtlsdescextlazy'.
	(modules-names): Add `tst-armtlsdescmod',
	`tst-armtlsdescextlazymod' and `tst-armtlsdescextnowmod'.
	(CPPFLAGS-tst-armtlsdescextnowmod.c): New variable.
	(CPPFLAGS-tst-armtlsdescextlazymod.c): Likewise.
	(CFLAGS-tst-armtlsdesclocmod.c): Likewise.
	(CFLAGS-tst-armtlsdescextnowmod.c): Likewise.
	(CFLAGS-tst-armtlsdescextlazymod.c): Likewise.
	(LDFLAGS-tst-armtlsdescextnowmod.so): Likewise.
	($(objpfx)tst-armtlsdescloc): New dependency.
	($(objpfx)tst-armtlsdescextnow): Likewise.
	($(objpfx)tst-armtlsdescextlazy): Likewise.
	* sysdeps/arm/configure.ac: Add a check for tools' GNU descriptor
	TLS scheme support.
	* sysdeps/arm/configure: Regenerate.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* include/fcntl.h (__atfct_seterrno): Remove prototype.
	(__atfct_seterrno_2): Likewise.
	* sysdeps/unix/sysv/linux/alpha/dl-fxstatat64.c: Do not include
	<kernel-features.h>.
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/alpha/fxstatat.c [__ASSUME_ATFCTS]
	(__have_atfcts): Remove conditional definition.
	(__fxstatat([__NR_fstatat64]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code and code
	unreachable if [__ASSUME_ATFCTS].
	* sysdeps/unix/sysv/linux/dl-fxstatat64.c (__ASSUME_ATFCTS): Do
	not undefine and redefine.
	* sysdeps/unix/sysv/linux/faccessat.c: Do not include
	<kernel-features.h>.
	(faccessat) [__NR_faccessat]: Make code unconditional.
	(faccessat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fchmodat.c: Do not include
	<kernel-features.h>.
	(fchmodat) [__NR_fchmodat]: Make code unconditional.
	(fchmodat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fchownat.c: Do not include
	<kernel-features.h>.
	(fchownat) [__NR_fchownat]: Make code unconditional.
	(fchownat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/futimesat.c: Do not include
	<kernel-features.h>.
	(futimesat) [__NR_futimesat]: Make code unconditional.
	(futimesat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fxstatat64.c: Do not include
	<kernel-features.h>.
	(__fxstatat64) [__NR_fstatat64]: Make code unconditional.
	(__fxstatat64) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_fstatat64]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/linkat.c: Do not include
	<kernel-features.h>.
	(linkat) [__NR_linkat]: Make code unconditional.
	(linkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/m68k/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/fxstatat64.c: Do not include
	<kernel-features.h>.
	(__fxstatat64) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat64) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/mkdirat.c: Do not include
	<kernel-features.h>.
	(mkdirat) [__NR_mkdirat]: Make code unconditional.
	(mkdirat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/openat.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_ATFCTS] (__atfct_seterrno): Remove function.
	[!__ASSUME_ATFCTS] (__have_atfcts): Remove variable.
	(OPENAT_NOT_CANCEL) [__NR_openat]: Make code unconditional.
	(OPENAT_NOT_CANCEL) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/readlinkat.c: Do not include
	<kernel-features.h>.
	(readlinkat) [__NR_readlinkat]: Make code unconditional.
	(readlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.  Return
	result of INLINE_SYSCALL directly, not via int variable.
	* sysdeps/unix/sysv/linux/renameat.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_ATFCTS] (__atfct_seterrno_2): Remove function.
	(renameat) [__NR_renameat]: Make code unconditional.
	(renameat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sh/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-fxstatat64.c
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/symlinkat.c: Do not include
	<kernel-features.h>.
	(symlinkat) [__NR_symlinkat]: Make code unconditional.
	(symlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/unlinkat.c: Do not include
	<kernel-features.h>.
	(unlinkat) [__NR_unlinkat]: Make code unconditional.
	(unlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/wordsize-64/dl-fxstatat64.c
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/xmknodat.c: Do not include
	<kernel-features.h>.
	(__xmknodat) [__NR_mknodat]: Make code unconditional.
	(__xmknodat) [!__ASSUME_ATFCTS]: Remove conditional code.

2014-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/rtld-strlen.S: Removed.

2014-06-20  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17069]
	* posix/regcomp.c (parse_reg_exp): Deallocate partially
	constructed tree before returning error.
	* posix/bug-regexp36.c: Expand test case.

2014-06-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #6803]
	* math/libm-test.inc (scalbln_test_date):
	Add errno expectations.
	* math/w_scalblnf.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add weak_alias for corresponding scalbln function.
	* math/w_scalbln.c: Likewise.
	* math/w_scalblnl.c: Likewise.
	* math/Makefile (libm-calls): Add w_scalbln.
	* sysdeps/ieee754/flt-32/s_scalblnf.c:
	Remove weak_alias for corresponding scalbln function.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/s_scalblnl.c: Likewise.
	* sysdeps/i386/fpu/s_scalbnf.S: Likewise.
	* sysdeps/i386/fpu/s_scalbn.S: Likewise.
	* sysdeps/i386/fpu/s_scalbnl.S: Likewise.
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_scalblnl.c:
	Remove long_double_symbol for scalblnl function in libm, libc.
	* sysdeps/ieee754/ldbl-64-128/w_scalblnl.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add long_double_symbol for scalblnl function in libm, libc.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c:
	Remove long_double_symbol for scalblnl in libm.
	* sysdeps/ieee754/ldbl-128ibm/w_scalblnl.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add long_double_symbol for scalblnl function in libm.
	* sysdeps/ia64/fpu/w_scalblnf.c: New File.
	Do not use wrapper because of own implementation.

2014-06-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Use
	3 bytes for __pad1 for x32.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Likewise.

2014-06-19  Ling Ma  <ling.ml@alibaba-inc.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile: Add memset-avx2.
	* sysdeps/x86_64/multiarch/memset-avx2.S: New file.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/rtld-memset.S: Likewise.

2014-06-19  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17069]
	* posix/regcomp.c (parse_expression): Deallocate partially
	constructed tree before returning error.
	* posix/Makefile.c (tests): Add bug-regex36.
	(generated): Add bug-regex36.mtrace.
	(tests-special): Add $(objpfx)bug-regex36-mem.out
	(bug-regex36-ENV): New variable.
	($(objpfx)bug-regex36-mem.out): New rule.
	* posix/bug-regex36.c: New file.

2014-06-19  Will Newton  <will.newton@linaro.org>

	* malloc/malloc.c (systrim): If extra is zero then return
	early.

2014-06-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile ($(objpfx)bench-%.c): Remove $(.).

2014-06-19  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchr.S: New file.

2014-06-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17022]
	* sysdeps/i386/fpu/e_logl.S (__ieee754_logl): Do not subtract 1
	from arguments -2 or below.
	* sysdeps/i386/i686/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S (__ieee754_logl): Likewise.

2014-06-18  Andreas Schwab  <schwab@suse.de>

	[BZ #17062]
	* posix/fnmatch_loop.c (FCT): Rerrange loop for skipping over rest
	of a bracket expr not to run off the end of the string.
	* posix/Makefile (tests): Add tst-fnmatch3.
	* posix/tst-fnmatch3.c: New file.

2014-06-18  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-unused-dep.out): Use $(rtld-prefix).
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.

2014-16-17  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	[BZ #17031]
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Consider the low
	double, adjusted for any remainder from the high double.
	* math/libm-test.inc (nearbyint): Add tests.
	(rint): Likewise.

2014-06-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/powerpc/Makefile: Moved ...
	* sysdeps/powerpc/nptl/Makefile: ... here.
	* nptl/sysdeps/powerpc/pthread_spin_lock.c: Moved ...
	* sysdeps/powerpc/nptl/pthread_spin_lock.c: .. here.
	* nptl/sysdeps/powerpc/pthread_spin_trylock.c: Moved ...
	* sysdeps/powerpc/nptl/pthread_spin_trylock.c: ... here.
	* nptl/sysdeps/powerpc/pthreaddef.h: Moved ...
	* sysdeps/powerpc/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/powerpc/tcb-offsets.sym: Moved ...
	* sysdeps/powerpc/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/powerpc/tls.h: Moved ...
	* sysdeps/powerpc/nptl/tls.h: ... here.

2014-06-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16681]
	* sysdeps/i386/fpu/s_ceil.S (__ceil): Add CFI.
	* sysdeps/i386/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/i386/fpu/s_ceill.S (__ceill): Likewise.
	* sysdeps/i386/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/i386/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/i386/fpu/s_floorl.S (__floorl): Likewise.
	* sysdeps/i386/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/i386/fpu/s_truncf.S (__truncf): Likewise.
	* sysdeps/i386/fpu/s_truncl.S (__truncl): Likewise.

2014-06-17  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Update.

2014-06-16  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/bits/huge_vall.h: Fix missing space after
	defined operator.

	* scripts/cross-test-ssh.sh (timeoutfactor): Default to
	$TIMEOUTFACTOR.

2014-06-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #17058]
	* nptl/tst-setuid2.c (do_test): Fix tautological comparison in
	non-executed part of the test.

2014-06-16  Andreas Schwab  <schwab@suse.de>

	* string/bits/string2.h (strdup, strndup): Update feature guard.

2014-06-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-06-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/m68k/nptl/clone.S: Remove file.

	* sysdeps/unix/sysv/linux/m68k/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/m68k/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/m68k/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/m68k/nptl/vfork.S: Remove file.

2014-06-14 Andi Kleen  <ak@linux.intel.com>

	* sysdeps/generic/elide.h: New file.

2014-06-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* Makefile (installed-headers): Adjust path of pthread.h header.

2014-06-13  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h: Moved ...
	* sysdeps/s390/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/semaphore.h: Moved ...
	* sysdeps/s390/nptl/bits/semaphore.h: ... here.

	* nptl/sysdeps/s390/Makefile: Moved ...
	* sysdeps/s390/nptl/Makefile: ... here.
	* nptl/sysdeps/s390/pthread_spin_init.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_lock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_lock.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_trylock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_trylock.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_unlock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_unlock.c: ... here.
	* nptl/sysdeps/s390/pthreaddef.h: Moved ...
	* sysdeps/s390/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/s390/tcb-offsets.sym: Moved ...
	* sysdeps/s390/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/s390/tls.h: Moved ...
	* sysdeps/s390/nptl/tls.h: ... here.

	* sysdeps/unix/sysv/linux/s390/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/s390/fork.c: File removed.

2014-06-13  David S. Miller  <davem@davemloft.net>

	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/clone.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/pt-vfork.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/clone.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/pt-vfork.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: ... here.
	* sysdeps/unix/sysv/linux/sparc/fork.S: Delete.
	* sysdeps/unix/sysv/linux/sparc/pt-vfork.S: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__thread_start):
	Remove RESET_PID cpp guards.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__thread_start):
	Remove RESET_PID cpp guards.
	* sysdeps/unix/sysv/linux/sparc/vfork.S: Delete.

2014-06-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/jmpbuf-unwind.h (_JMPBUF_UNWINDS, _jmpbuf_sp): Cast
	__sp to uintptr_t.

2014-06-13  Andi Kleen  <ak@linux.intel.com>

	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: dito.

	* nptl/pthread_rwlock_rdlock.c: Include elide.h.
	(pthread_rwlock_rdlock): Add elision.
	* nptl/pthread_rwlock_wrlock.c: Include elide.h.
	(pthread_rwlock_wrlock): Add elision.
	* nptl/pthread_rwlock_trywrlock.c: Include elide.h.
	(pthread_rwlock_trywrlock): Add elision.
	* nptl/pthread_rwlock_tryrdlock.c: Include elide.h.
	(pthread_rwlock_tryrdlock): Add elision.
	* nptl/pthread_rwlock_unlock.c: Include elide.h.
	(pthread_rwlock_tryrdlock): Add elision unlock.
	* nptl/sysdeps/pthread/pthread.h:
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Handle new define
	(PTHREAD_RWLOCK_INITIALIZER,
	PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP):
	Handle new elision field.
	* sysdeps/x86/nptl/elide.h: New file. Add generic elision macros.
	* sysdeps/arm/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/sh/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/tile/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/a/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/powerpc/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/x86/elision-conf.c:
	(elision_init): Set try_xbegin to zero when no RTM.
	* sysdeps/x86/nptl/bits/pthreadtypes.h
	(pthread_rwlock_t): Change __pad1 to __rwelision.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.

2014-06-13  Andi Kleen  <ak@linux.intel.com>

	* nptl/pthread_rwlock_rdlock (__pthread_rwlock_rdlock):
	Split into __do_pthread_rwlock_rdlock and __pthread_rwlock_rdlock.
	* nptl/pthread_rwlock_wrlock (__pthread_rwlock_wrlock):
	Split into __do_pthread_rwlock_wrlock and __pthread_wrlock_rdlock.

2014-06-13  Meador Inge  <meadori@codesourcery.com>

	[BZ #16996]
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Ensure
	that the cached result has been set before returning it.

2014-06-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sparc/bits/pthreadtypes.h: Moved ...
	* sysdeps/sparc/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/semaphore.h: Moved ...
	* sysdeps/sparc/nptl/bits/semaphore.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/bits/local_lim.h: ... here.

	* nptl/sysdeps/sparc/Makefile: Moved ...
	* sysdeps/sparc/nptl/Makefile: ... here.
	* nptl/sysdeps/sparc/tcb-offsets.sym: Moved ...
	* sysdeps/sparc/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/sparc/tls.h: Moved ...
	* sysdeps/sparc/nptl/tls.h: ... here.
	* nptl/sysdeps/sparc/sparc32/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/sparc/sparc32/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sparc/sparc32/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_init.c: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_lock.S: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_trylock.S: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: ... here.
	Update #include.

	* nptl/sysdeps/sparc/tls.h (TLS_DEFINE_INIT_TP): New macro.

	* sysdeps/unix/sysv/linux/sparc/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/sparc/fork.c: File removed.

	* sysdeps/pthread/posix-timer.h: Include <list.h>.
	(struct list_links): Type removed.
	(struct thread_node, struct timer_node): Replace struct list_links
	with struct list_head.
	(list_unlink_ip): Likewise.
	* sysdeps/pthread/timer_routines.c
	(timer_free_list, thread_free_list, thread_active_list): Likewise.
	(list_append, list_insbefore): Likewise.
	(list_init): Function removed.
	(thread_init, init_module): Use INIT_LIST_HEAD instead.
	* sysdeps/nptl/Makefile: Move tst-timer bits to ...
	* sysdeps/pthread/Makefile: ... here, new file.

	* nptl/sysdeps/unix/sysv/linux/Implies: Moved ...
	* sysdeps/nptl/Implies: ... here.
	* sysdeps/unix/sysv/linux/Implies: Add nptl.
	* nptl/sysdeps/pthread/list.h: Moved ...
	* include/list.h: ... here.
	* nptl/sysdeps/pthread/createthread.c: Moved ...
	* nptl/createthread.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/createthread.c: Update #include.
	* nptl/sysdeps/pthread/pt-longjmp.c: Moved ...
	* nptl/pt-longjmp.c: ... here.
	* nptl/sysdeps/pthread/Makefile: Moved ...
	* sysdeps/nptl/Makefile: ... here.
	* nptl/sysdeps/pthread/Subdirs: Moved ...
	* sysdeps/nptl/Subdirs: ... here.
	* nptl/sysdeps/pthread/aio_misc.h: Moved ...
	* sysdeps/nptl/aio_misc.h: ... here.
	* nptl/sysdeps/pthread/bits/libc-lock.h: Moved ...
	* sysdeps/nptl/bits/libc-lock.h: ... here.
	* nptl/sysdeps/pthread/bits/libc-lockP.h: Moved ...
	* sysdeps/nptl/bits/libc-lockP.h: ... here.
	* nptl/sysdeps/pthread/bits/stdio-lock.h: Moved ...
	* sysdeps/nptl/bits/stdio-lock.h: ... here.
	* nptl/sysdeps/pthread/configure: Moved ...
	* sysdeps/nptl/configure: ... here.
	* nptl/sysdeps/pthread/configure.ac: Moved ...
	* sysdeps/nptl/configure.ac: ... here.
	* nptl/sysdeps/pthread/gai_misc.h: Moved ...
	* sysdeps/nptl/gai_misc.h: ... here.
	* nptl/sysdeps/pthread/librt-cancellation.c: Moved ...
	* sysdeps/nptl/librt-cancellation.c: ... here.
	* nptl/sysdeps/pthread/malloc-machine.h: Moved ...
	* sysdeps/nptl/malloc-machine.h: ... here.
	* nptl/sysdeps/pthread/pthread-functions.h: Moved ...
	* sysdeps/nptl/pthread-functions.h: ... here.
	* nptl/sysdeps/pthread/pthread.h: Moved ...
	* sysdeps/nptl/pthread.h: ... here.
	* nptl/sysdeps/pthread/setxid.h: Moved ...
	* sysdeps/nptl/setxid.h: ... here.
	* nptl/sysdeps/pthread/sigfillset.c: Moved ...
	* sysdeps/nptl/sigfillset.c: ... here.
	* nptl/sysdeps/pthread/tcb-offsets.h: Moved ...
	* sysdeps/nptl/tcb-offsets.h: ... here.
	* nptl/sysdeps/pthread/tst-mqueue8x.c: Moved ...
	* sysdeps/nptl/tst-mqueue8x.c: ... here.
	* nptl/sysdeps/pthread/unwind-forcedunwind.c: Moved ...
	* sysdeps/nptl/unwind-forcedunwind.c: ... here.
	* nptl/sysdeps/pthread/allocalim.h: Moved ...
	* sysdeps/pthread/allocalim.h: ... here.
	* nptl/sysdeps/pthread/bits/sigthread.h: Moved ...
	* sysdeps/pthread/bits/sigthread.h: ... here.
	* nptl/sysdeps/pthread/flockfile.c: Moved ...
	* sysdeps/pthread/flockfile.c: ... here.
	* nptl/sysdeps/pthread/ftrylockfile.c: Moved ...
	* sysdeps/pthread/ftrylockfile.c: ... here.
	* nptl/sysdeps/pthread/funlockfile.c: Moved ...
	* sysdeps/pthread/funlockfile.c: ... here.
	* nptl/sysdeps/pthread/posix-timer.h: Moved ...
	* sysdeps/pthread/posix-timer.h: ... here.
	* nptl/sysdeps/pthread/timer_create.c: Moved ...
	* sysdeps/pthread/timer_create.c: ... here.
	* nptl/sysdeps/pthread/timer_delete.c: Moved ...
	* sysdeps/pthread/timer_delete.c: ... here.
	* nptl/sysdeps/pthread/timer_getoverr.c: Moved ...
	* sysdeps/pthread/timer_getoverr.c: ... here.
	* nptl/sysdeps/pthread/timer_gettime.c: Moved ...
	* sysdeps/pthread/timer_gettime.c: ... here.
	* nptl/sysdeps/pthread/timer_routines.c: Moved ...
	* sysdeps/pthread/timer_routines.c: ... here.
	* nptl/sysdeps/pthread/timer_settime.c: Moved ...
	* sysdeps/pthread/timer_settime.c: ... here.
	* nptl/sysdeps/pthread/tst-timer.c: Moved ...
	* sysdeps/pthread/tst-timer.c: ... here.
	* nptl/sysdeps/pthread/pthread_sigmask.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_sigmask.c: ... here.

	* sysdeps/unix/sysv/linux/sigprocmask.c: Include <nptl/pthreadP.h>.
	* nptl/sysdeps/pthread/sigprocmask.c: File removed.

	* nptl/sysdeps/i386/i486/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i486/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/i386/i586/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i586/nptl/pthread_spin_trylock.S: ... here.
	Update #include target.
	* nptl/sysdeps/i386/i686/Makefile: Moved ...
	* sysdeps/i386/i686/nptl/Makefile: ... here.
	* nptl/sysdeps/i386/i686/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i686/nptl/pthread_spin_trylock.S: ... here.
	Update #include target.
	* nptl/sysdeps/i386/i686/tls.h: Moved ...
	* sysdeps/i386/i686/nptl/tls.h: ... here.  Use #include_next.
	* nptl/sysdeps/i386/Makefile: Moved ...
	* sysdeps/i386/nptl/Makefile: ... here.
	* nptl/sysdeps/i386/pthread_spin_init.c: Moved ...
	* sysdeps/i386/nptl/pthread_spin_init.c: ... here.
	* sysdeps/x86_64/nptl/pthread_spin_init.c: Update #include target.
	* nptl/sysdeps/i386/pthread_spin_lock.S: Moved ...
	* sysdeps/i386/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/i386/pthread_spin_unlock.S: Moved ...
	* sysdeps/i386/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/i386/pthreaddef.h: Moved ...
	* sysdeps/i386/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/i386/tcb-offsets.sym: Moved ...
	* sysdeps/i386/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/i386/tls.h: Moved ...
	* sysdeps/i386/nptl/tls.h: ... here.

	* sysdeps/sh/Makefile [$(subdir) = csu]
	(gen-as-const-headers): Add tcb-offsets.sym.
	* nptl/sysdeps/sh/Makefile: File removed.
	* nptl/sysdeps/sh/pthread_spin_init.c: Moved ...
	* sysdeps/sh/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/sh/pthread_spin_lock.c: Moved ...
	* sysdeps/sh/nptl/pthread_spin_lock.c: ... here.
	* nptl/sysdeps/sh/pthread_spin_trylock.S: Moved ...
	* sysdeps/sh/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sh/pthread_spin_unlock.S: Moved ...
	* sysdeps/sh/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/sh/pthreaddef.h: Moved ...
	* sysdeps/sh/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sh/tcb-offsets.sym: Moved ...
	* sysdeps/sh/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/sh/tls.h: Moved ...
	* sysdeps/sh/nptl/tls.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevel-atomic.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevel-atomic.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/smp.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/smp.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: ... here.

2014-06-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* posix/spawn_faction_addopen.c: Include string.h.

2014-06-11  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/x86_64/64/shlib-versions: Moved ...
	* sysdeps/x86_64/64/nptl/shlib-versions: ... here.
	* nptl/sysdeps/x86_64/Makefile: Moved ...
	* sysdeps/x86_64/nptl/Makefile: ... here.
	* nptl/sysdeps/x86_64/configure: Moved ...
	* sysdeps/x86_64/nptl/configure: ... here.
	* nptl/sysdeps/x86_64/configure.ac: Moved ...
	* sysdeps/x86_64/nptl/configure.ac: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_init.c: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_lock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_trylock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_unlock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/x86_64/pthreaddef.h: Moved ...
	* sysdeps/x86_64/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/x86_64/tcb-offsets.sym: Moved ...
	* sysdeps/x86_64/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/x86_64/tls.h: Moved ...
	* sysdeps/x86_64/nptl/tls.h: ... here.
	* nptl/sysdeps/x86_64/x32/shlib-versions: Moved ...
	* sysdeps/x86_64/x32/nptl/shlib-versions: ... here.
	* nptl/sysdeps/x86_64/x32/tls.h: Moved ...
	* sysdeps/x86_64/x32/nptl/tls.h: ... here.

	* sysdeps/x86_64/x32/nptl/tls.h: Use #include_next.

2014-06-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-11  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/mman.h-data [POSIX] (size_t): Do not require
	type.
	[POSIX] (off_t): Likewise.
	* conform/data/sys/stat.h-data (S_IRGRP): Require constant.
	[POSIX] (S_ISBLK): Require macro.
	[POSIX] (S_ISCHR): Likewise.
	[POSIX] (S_ISDIR): Likewise.
	[POSIX] (S_ISFIFO): Likewise.
	[POSIX] (S_ISREG): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (S_TYPEISTMO): Do not list
	optional-macro.
	* conform/data/sys/types.h-data [POSIX] (blkcnt_t): Do not require
	type.
	[POSIX] (time_t): Likewise.
	[POSIX] (timer_t): Likewise.

2014-06-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #17048]
	* posix/spawn_int.h (struct __spawn_action): Make the path string
	non-const to support deallocation.
	* posix/spawn_faction_addopen.c
	(posix_spawn_file_actions_addopen): Make a copy of the pathname.
	* posix/spawn_faction_destroy.c
	(posix_spawn_file_actions_destroy): Adjust comment.  Deallocate
	path in all spawn_do_open actions.
	* posix/tst-spawn.c (do_test): Exercise the copy operation in
	posix_spawn_file_actions_addopen.

2014-06-11  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/tile/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/tile/vfork.S (__vfork): Make PT_VFORK
	conditional code always true.
	(__libc_vfork): New alias.

2014-06-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/tile/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/tile/createthread.c: File removed.

	* nptl/sysdeps/s390/tls.h (TLS_DEFINE_INIT_TP): New macro.

	* sysdeps/alpha/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/alpha/createthread.c: File removed.

	* nptl/sysdeps/powerpc/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/powerpc/createthread.c: File removed.

	* sysdeps/aarch64/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/aarch64/nptl/createthread.c: File removed.

2014-06-11  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcmp.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c: New file:
	multiarch strcmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcmp
	multiarch optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.

2014-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/scripts/validate_benchout.py: New script.
	* benchtests/Makefile (bench-func): Call it.
	* benchtests/scripts/benchout.schema.json: New file.

2014-06-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/tile/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/bits/semaphore.h: Moved ...
	* sysdeps/tile/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/Makefile: Removed, merged into ...
	* sysdeps/unix/sysv/linux/tile/Makefile: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/clone.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/clone.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/tile/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/c++-types.data:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libanl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libcrypt.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libdl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libnsl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libresolv.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libutil.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/c++-types.data:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libanl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libcrypt.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libnsl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libresolv.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libutil.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/vfork.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/waitpid.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/waitpid.S: ... here.

2014-06-10  Wilco  <wdijkstr@arm.com>

	* math/test-fenv-return.c: New file.
	* math/Makefile: Add new test test-fenv-return.

2014-06-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17042]
	* sysdeps/i386/fpu/e_log2.S (__ieee754_log2): Take absolete value
	when x - 1 is zero.
	* sysdeps/i386/fpu/e_log2f.S (__ieee754_log2f): Likewise.
	* sysdeps/i386/fpu/e_log2l.S (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c (__ieee754_log2l): Return
	0.0L for an argument of 1.0L.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l):
	Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S (__ieee754_log2l): Take absolute
	value when x - 1 is zero.
	* math/libm-test.inc (log2_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-06-09  Bernard Ogden  <bernie.ogden@linaro.org>

	[BZ #15119]
	* ports/sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.c: Remove file.

2014-06-09  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/sh/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* nptl/sysdeps/unix/sysv/linux/sh/createthread.c: File removed.

2014-06-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/m68k/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/m68k/nptl/createthread.c: File removed.

	* sysdeps/hppa/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/hppa/nptl/createthread.c: File removed.

	* sysdeps/mips/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/mips/nptl/createthread.c: File removed.

	* sysdeps/arm/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/arm/createthread.c: File removed.

	* nptl/sysdeps/pthread/createthread.c (TLS_DEFINE_INIT_TP): New macro,
	if not already defined.
	(do_clone): Use that in place of PREPARE_CREATE and TLS_VALUE.
	* nptl/sysdeps/x86_64/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* nptl/sysdeps/i386/tls.h (tls_fill_user_desc): New function.
	(TLS_INIT_TP): Use it.
	(TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/i386/createthread.c: File removed.

2014-06-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/termios.h-data [POSIX] (IUCLC): Do not expect
	constant.
	[POSIX] (IXANY): Likewise.
	[POSIX] (OLCUC): Likewise.
	[POSIX || POSIX2008] (CBAUD): Do not allow.
	[POSIX || POSIX2008] (DEFECHO): Likewise.
	[POSIX || POSIX2008] (ECHOCTL): Likewise.
	[POSIX || POSIX2008] (ECHOKE): Likewise.
	[POSIX || POSIX2008] (ECHOPRT): Likewise.
	[POSIX || POSIX2008] (EXTA): Likewise.
	[POSIX || POSIX2008] (EXTB): Likewise.
	[POSIX || POSIX2008] (FLUSHO): Likewise.
	[POSIX || POSIX2008] (LOBLK): Likewise.
	[POSIX || POSIX2008] (PENDIN): Likewise.
	[POSIX || POSIX2008] (SWTCH): Likewise.
	[POSIX || POSIX2008] (VDISCARD): Likewise.
	[POSIX || POSIX2008] (VDSUSP): Likewise.
	[POSIX || POSIX2008] (VLNEXT): Likewise.
	[POSIX || POSIX2008] (VREPRINT): Likewise.
	[POSIX || POSIX2008] (VSTATUS): Likewise.
	[POSIX || POSIX2008] (VWERASE): Likewise.
	(B*): Change to B[0123456789]*.
	* conform/data/time.h-data [POSIX || UNIX98]
	(CLOCK_PROCESS_CPUTIME_ID): Do not expect constant.
	[POSIX || UNIX98] (CLOCK_THREAD_CPUTIME_ID): Likewise.
	[POSIX || UNIX98] (CLOCK_MONOTONIC): Likewise.
	[POSIX] (tm_*): Do not allow.

2014-06-07  Joseph Myers  <joseph@codesourcery.com>

	* Makefile (install): Don't set LANGUAGE.
	* Makefile.in (install): Likewise.
	* assert/Makefile (test-assert-ENV): Remove variable.
	(test-assert-perr-ENV): Likewise.
	* elf/Makefile (neededtest4-ENV): Likewise.
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Don't set LANGUAGE.
	* io/ftwtest-sh (LANG): Remove variable.
	* libio/Makefile (tst-widetext-ENV): Likewise.
	* manual/install.texi (Running make install): Don't refer to
	environment settings for make install.
	* INSTALL: Regenerated.
	* nptl/tst-tls6.sh: Don't set LANG.
	* posix/globtest.sh (LANG): Remove variable.
	* string/Makefile (tester-ENV): Likewise.
	(inl-tester-ENV): Likewise.
	(noinl-tester-ENV): Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Don't set LANGUAGE.
	* timezone/Makefile (build-testdata): Use $(built-program-cmd)
	without explicit environment settings.

2014-06-06  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sh/bits/pthreadtypes.h: Moved ...
	* sysdeps/sh/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/bits/semaphore.h: Moved ...
	* sysdeps/sh/nptl/bits/semaphore.h: ... here.

2014-06-06  Chris Metcalf  <cmetcalf@tilera.com>

	* crypt/crypt-private.h [DOS]: Add some includes taken from the
	other files in the crypt directory.
	* crypt/crypt.c: Remove duplicate includes.
	* crypt/crypt-entry.c: Likewise.
	* crypt/crypt_util.c: Likewise.

2014-06-06  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-program-env): New variable.
	(run-program-prefix-before-env): Likewise.
	(run-program-prefix-after-env): Likewise.
	(run-program-prefix): Define in terms of new variables.
	(built-program-cmd-before-env): New variable.
	(built-program-cmd-after-env): Likewise.
	(built-program-cmd): Define in terms of new variables.
	(test-program-prefix-before-env): New variable.
	(test-program-prefix-after-env): Likewise.
	(test-program-prefix): Define in terms of new variables.
	(test-program-cmd-before-env): New variable.
	(test-program-cmd-after-env): Likewise.
	(test-program-cmd): Define in terms of new variables.
	* Rules (make-test-out): Use $(run-program-env).
	* scripts/cross-test-ssh.sh (env_blacklist): Remove variable.
	(help): Do not mention environment variables.  Mention
	--timeoutfactor option.
	(timeoutfactor): New variable.
	(blacklist_exports): Remove function.
	(exports): Remove variable.
	(command): Do not include ${exports}.
	* manual/install.texi (Configuring and compiling): Do not mention
	test wrappers preserving environment variables.  Mention that last
	assignment to a variable must take precedence.
	* INSTALL: Regenerated.
	* benchtests/Makefile (run-bench): Use $(run-program-env).
	* catgets/Makefile ($(objpfx)test1.cat): Use
	$(built-program-cmd-before-env), $(run-program-env) and
	$(built-program-cmd-after-env).
	($(objpfx)test2.cat): Do not specify environment variables
	explicitly.
	($(objpfx)de/libc.cat): Use $(built-program-cmd-before-env),
	$(run-program-env) and $(built-program-cmd-after-env).
	($(objpfx)test-gencat.out): Use $(test-program-cmd-before-env),
	$(run-program-env) and $(test-program-cmd-after-env).
	($(objpfx)sample.SJIS.cat): Do not specify environment variables
	explicitly.
	* catgets/test-gencat.sh: Use test_program_cmd_before_env,
	run_program_env and test_program_cmd_after_env arguments.
	* elf/Makefile ($(objpfx)tst-pathopt.out): Use $(run-program-env).
	* elf/tst-pathopt.sh: Use run_program_env argument.
	* iconvdata/Makefile ($(objpfx)iconv-test.out): Use
	$(test-wrapper-env) and $(run-program-env).
	* iconvdata/run-iconv-test.sh: Use test_wrapper_env and
	run_program_env arguments.
	* iconvdata/tst-table.sh: Do not set GCONV_PATH explicitly.
	* intl/Makefile ($(objpfx)tst-gettext.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	($(objpfx)tst-gettext2.out): Likewise.
	* intl/tst-gettext.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Do not set environment variables
	explicitly.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* malloc/tst-mtrace.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* math/Makefile (run-regen-ulps): Use $(run-program-env).
	* nptl/Makefile ($(objpfx)tst-tls6.out): Use $(run-program-env).
	* nptl/tst-tls6.sh: Use run_program_env argument.  Set LANG=C
	explicitly with each use of ${test_wrapper_env}.
	* posix/Makefile ($(objpfx)wordexp-tst.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* posix/tst-getconf.sh: Do not set environment variables
	explicitly.
	* posix/wordexp-tst.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* stdio-common/tst-printf.sh: Do not set environment variables
	explicitly.
	* stdlib/Makefile ($(objpfx)tst-fmtmsg.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* stdlib/tst-fmtmsg.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	Split $test calls into $test_pre and $test.
	* timezone/Makefile (build-testdata): Use
	$(built-program-cmd-before-env), $(run-program-env) and
	$(built-program-cmd-after-env).

2014-06-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncat.S [STRLEN]: Define it as
	strlen for non SHARED builds.

2014-06-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/allocatestack.c (check_list): Inlined function...
	(__reclaim_stacks): ... here.

2014-06-05  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15698]
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs_internal): Fix
	memory overrun.

2014-06-05  Joseph Myers  <joseph@codesourcery.com>

	* Rules (make-test-out): Include
	LOCPATH=$(common-objpfx)localedata in default environment.
	* debug/Makefile (tst-chk1-ENV): Remove variable.
	(tst-chk2-ENV): Likewise.
	(tst-chk3-ENV): Likewise.
	(tst-chk4-ENV): Likewise.
	(tst-chk5-ENV): Likewise.
	(tst-chk6-ENV): Likewise.
	(tst-lfschk1-ENV): Likewise.
	(tst-lfschk2-ENV): Likewise.
	(tst-lfschk3-ENV): Likewise.
	(tst-lfschk4-ENV): Likewise.
	(tst-lfschk5-ENV): Likewise.
	(tst-lfschk6-ENV): Likewise.
	* iconvdata/Makefile (bug-iconv6-ENV): Likewise.
	(tst-iconv7-ENV): Likewise.
	* intl/Makefile (LOCPATH-ENV): Likewise.
	(tst-codeset-ENV): Likewise.
	(tst-gettext3-ENV): Likewise.
	(tst-gettext5-ENV): Likewise.
	* libio/Makefile (tst-widetext-ENV): Don't set LOCPATH.
	(tst-fopenloc-ENV): Likewise.
	(tst-fgetws-ENV): Remove variable.
	(tst-ungetwc1-ENV): Likewise.
	(tst-ungetwc2-ENV): Likewise.
	(bug-ungetwc2-ENV): Likewise.
	(tst-swscanf-ENV): Likewise.
	(bug-ftell-ENV): Likewise.
	(tst-fgetwc-ENV): Likewise.
	(tst-fseek-ENV): Likewise.
	(tst-ftell-partial-wide-ENV): Likewise.
	(tst-ftell-active-handler-ENV): Likewise.
	(tst-ftell-append-ENV): Likewise.
	* posix/Makefile (tst-fnmatch-ENV): Likewise.
	(tst-regexloc-ENV): Likewise.
	(bug-regex1-ENV): Likewise.
	(tst-regex-ENV): Likewise.
	(tst-regex2-ENV): Likewise.
	(bug-regex5-ENV): Likewise.
	(bug-regex6-ENV): Likewise.
	(bug-regex17-ENV): Likewise.
	(bug-regex18-ENV): Likewise.
	(bug-regex19-ENV): Likewise.
	(bug-regex20-ENV): Likewise.
	(bug-regex22-ENV): Likewise.
	(bug-regex23-ENV): Likewise.
	(bug-regex25-ENV): Likewise.
	(bug-regex26-ENV): Likewise.
	(bug-regex30-ENV): Likewise.
	(bug-regex32-ENV): Likewise.
	(bug-regex33-ENV): Likewise.
	(bug-regex34-ENV): Likewise.
	(bug-regex35-ENV): Likewise.
	(tst-rxspencer-ENV): Likewise.
	(tst-rxspencer-no-utf8-ENV): Likewise.
	* stdio-common/Makefile (tst-sprintf-ENV): Likewise.
	(tst-sscanf-ENV): Likewise.
	(tst-swprintf-ENV): Likewise.
	(tst-swscanf-ENV): Likewise.
	(test-vfprintf-ENV): Likewise.
	(scanf13-ENV): Likewise.
	(bug14-ENV): Likewise.
	(tst-grouping-ENV): Likewise.
	* stdlib/Makefile (tst-strtod-ENV): Likewise.
	(tst-strtod3-ENV): Likewise.
	(tst-strtod4-ENV): Likewise.
	(tst-strtod5-ENV): Likewise.
	(testmb2-ENV): Likewise./
	* string/Makefile (tst-strxfrm-ENV): Likewise.
	(tst-strxfrm2-ENV): Likewise.
	(bug-strcoll1-ENV): Likewise.
	(test-strcasecmp-ENV): Likewise.
	(test-strncasecmp-ENV): Likewise.
	* time/Makefile (tst-strptime-ENV): Likewise.
	(tst-ftime_l-ENV): Likewise.
	* wcsmbs/Makefile (tst-btowc-ENV): Likewise.
	(tst-mbrtowc-ENV): Likewise.
	(tst-wcrtomb-ENV): Likewise.
	(tst-mbrtowc2-ENV): Likewise.
	(tst-c16c32-1-ENV): Likewise.
	(tst-mbsnrtowcs-ENV): Likewise.

2014-06-05  Ondřej Bílka  <neleai@seznam.cz>

	* manual/resource.texi (How to get information about the memory
	subsystem?): Fix typo.
	Reported by Peon de la Parra Ivan <peon@keba.com>

2014-06-03  Guo Yixuan  <culu.gyx@gmail.com>

	[BZ #16882]
	* nptl/sysdeps/sparc/sparc32/pthread_spin_lock.S
	(pthread_spin_lock): Branch out of spin loop to proper location.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_lock.S
	(pthread_spin_lock): Likewise.

	* nptl/tst-spin4.c: New test.
	* nptl/Makefile (tests): Add tst-spin4.

2014-06-03  Andreas Schwab  <schwab@suse.de>

	[BZ #15946]
	* resolv/res_send.c (send_dg): Reload file descriptor after
	calling reopen.

2014-06-03  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-06-03  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/aarch64/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/aarch64/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/aarch64/vfork.S (__vfork): Incorporate
	SAVE_PID and RESTORE_PID blocks from pt-vfork.S.  Map 0 to INT_MIN
	in the SAVE_PID block.
	(__libc_vfork): New alias.
	* sysdeps/unix/sysv/linux/aarch64/nptl/vfork.S: Remove file.

	* sysdeps/unix/sysv/linux/aarch64/clone.S (__clone): Save args for
	child in registers, not on the stack.  Remove RESET_PID conditionals.
	* sysdeps/unix/sysv/linux/aarch64/nptl/clone.S: Remove file.

2014-06-03  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerate.

2014-06-03  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (libc_fesetround_aarch64)
	(libc_feholdexcept_setround_aarch64) (libc_feholdsetround_aarch64)
	(libc_feresetround_aarch64) (libc_feholdsetround_aarch64_ctx):
	Use _FPU_FPCR_RM_MASK for rounding mask rather than FE_TOWARDZERO.
	* sysdeps/aarch64/fpu/get-rounding-mode.h (get_rounding_mode):
	Likewise.

2014-06-03  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h
	(libc_feholdexcept_aarch64) (libc_feholdexcept_setround_aarch64)
	(libc_fetestexcept_aarch64) (libc_fesetenv_aarch64)
	(libc_feupdateenv_test_aarch64) (libc_feholdsetround_aarch64)
	(libc_feresetround_aarch64) (libc_feholdsetround_aarch64_ctx):
	Fix declarations.

2014-06-03  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* crypt/crypt-private.h: Include ufc-crypt.h.
	(__b64_from_24bit): Declare extern.
	* crypt/crypt_util.c(__b64_from_24bit): New function.
	(b64t): New static const variable.
	* crypt/md5-crypt.c (b64_from_24bit): Remove function.
	(b64t): Remove variable.
	(__md5_crypt_r): Replace b64_from_24bit with __b64_from_24bit.
	* crypt/sha256-crypt.c: Include crypt-private.h.
	(b64t): Remove variable.
	(__sha256_crypt_r): Remove b64_from_24bit and replace
	with __b64_from_24bit.
	* crypt/sha512-crypt.c: Likewise.

2014-06-02  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sh/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/vfork.S: ... here.
	Label the code __libc_vfork rather than __vfork.
	[!NOT_IN_libc] (vfork): Define as weak alias.
	[!NOT_IN_libc] (__vfork): Define as strong alias, and libc_hidden_def.
	* sysdeps/unix/sysv/linux/sh/pt-vfork.S: New file.
	* nptl/sysdeps/unix/sysv/linux/sh/pt-vfork.S: File removed.

2014-06-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/malloc.c (malloc_info): Fix format specifier for
	n_mmaps.

2014-06-02  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fpu_control.h (_FPU_SETCW): Remove ISB after
	FPCR write.

2014-06-02  Wilco  <wdijkstr@arm.com>

	[BZ #17009]
	* sysdeps/aarch64/fpu/feupdateenv (feupdateenv):
	Rewrite to reduce FPCR/FPSR accesses.

2014-06-01  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Force computations
	to occur in round to nearest mode when |x| >= 2.0

2014-05-30  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (PSEUDO_RET): Remove.
	(PSEUDO_RET_NOERRNO): Remove.
	(ret): Don't redefine.
	(ret_NOERRNO): Define in terms of ret.
	(ret_ERRVAL): Likewise.

	* sysdeps/unix/sysv/linux/aarch64/ioctl.S (__ioctl): Remove the
	use of PSEUDO_RET; perform the error check directly.

2014-05-30 Marko Myllynen  <myllynen@redhat.com>

	* sysdeps/x86_64/link-defines.sym (BND_SIZE): Replace __int128
	with __int128_t.

2014-05-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/malloc (malloc_info): Fix formatting.

2014-05-30  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc (malloc_info): Also print mmapped statistics.

2014-05-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/m68k/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/m68k/nptl/fork.c: File removed.

2014-05-30  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/malloc.c (malloc_info): Inline mi_arena.

2014-05-29  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (INTERNAL_VSYSCALL_NCS):
	Remove comma before expanding ASM_ARGS_##nr.
	(INTERNAL_SYSCALL_RAW): Make _sys_result signed, instead of casting.
	Make _x0 a strict output; make _x8 a strict input; adjust expansion
	of ASM_ARGS_##nr.
	(CLOBBER_ARGS_0, CLOBBER_ARGS_1, CLOBBER_ARGS_2): Remove.
	(CLOBBER_ARGS_3, CLOBBER_ARGS_4, CLOBBER_ARGS_5): Remove.
	(CLOBBER_ARGS_6, CLOBBER_ARGS_7): Remove.
	(ASM_ARGS_1): Add leading comma.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h [NOT_IN_libc]
	(SYSCALL_ERROR_HANDLER): Use tpidr_el0 instead of a call
	to __errno_location.
	* sysdeps/unix/sysv/linux/aarch64/nptl/localplt.data (libpthread.so):
	Remove the expected plt for __errno_location.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	[NOT_IN_libc] (SINGLE_THREAD_P): Use tpidr_el0 instead of a
	call to __read_tp.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Always allocate 64 bytes of stack frame.  Use ldp/stp to create
	it and break it down.
	(DOCARGS_0, DOCARGS_1): Do nothing.
	(DOCARGS_2): Update to store into the new stack frame.
	(DOCARGS_3, DOCARGS_4, DOCARGS_5, DOCARGS_6): Likewise.
	(UNDOCARGS_1): Update to restore from the new stack frame.
	(UNDOCARGS_2, UNDOCARGS_3, UNDOCARGS_4): Likewise.
	(UNDOCARGS_5, UNDOCARGS_6): Likewise.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P): New parameter for result regno.
	(PSEUDO): Update to match; use cbz instead of beq.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Use ENTRY to define the _nocancel entry point.  Share the syscall
	and syscall error check paths with the cancel path.
	(PSEUDO_END): New.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h: Adjust
	whitespace; tabs before and after asm mnemonics.

2014-05-29  Eric Wong  <normalperson@yhbt.net>

	[BZ #15132]
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Call fstat64 or stat64 internally, depending on arguments passed.
	Replace stat buffer argument with file descriptor argument.
	(INTERNAL_STATVFS): Update arguments to match __statvfs_getflags.
	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs):
	Pass fd to __internal_statvfs instead of calling fstat64.
	* sysdeps/unix/sysv/linux/fstatvfs64.c (__fstatvfs64):
	Pass fd to __internal_statvfs64 instead of calling fstat64.
	* sysdeps/unix/sysv/linux/statvfs.c (statvfs):
	Pass -1 to __internal_statvfs instead of calling stat64.
	* sysdeps/unix/sysv/linux/statvfs64.c (__statvfs64):
	Pass -1 to __internal_statvfs64 instead of calling stat64.

2014-05-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sh/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* nptl/sysdeps/unix/sysv/linux/sh/clone.S: File removed.

	* sysdeps/unix/sysv/linux/tile/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/tile/nptl/fork.c: File removed.

2014-05-27  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/arch-fork.h: New file.

	* sysdeps/unix/sysv/linux/sh/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/sh/fork.c: File removed.

2014-05-27  Ondřej Bílka  <neleai@seznam.cz>

	* elf/dl-deps.c (_dl_map_object_deps): Remove duplicate code.

2014-05-27  Andreas Schwab  <schwab@suse.de>

	* csu/libc-tls.c (__libc_setup_tls): Remove second argument from
	TLS_INIT_TP macro.
	* elf/dl-load.c (_dl_map_object_from_fd): Likewise.
	* elf/rtld.c (init_tls, dl_main): Likewise.
	* nptl/sysdeps/i386/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/powerpc/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/s390/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/sh/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/sparc/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/x86_64/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/aarch64/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/alpha/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/arm/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/hppa/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/ia64/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/m68k/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/mach/hurd/i386/tls.h (_hurd_tls_init): Likewise.
	* sysdeps/microblaze/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/mips/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/tile/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/generic/tls.h: Update description.

2014-05-27  Will Newton  <will.newton@linaro.org>

	[BZ #16990]
	* sysdeps/arm/dl-tlsdesc.S (_dl_tlsdesc_resolve_hold): Save
	and restore r2 rather than just restoring.

2014-05-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16724]
	* libio/tst-ftell-append.c: New test case.
	* libio/Makefile (tests): Add test case.
	* libio/fileops.c (do_ftell): Don't trust _IO_read_end when in
	append mode.
	* libio/wfileops.c (do_ftell_wide): Likewise.

2014-05-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* nptl/sysdeps/unix/sysv/linux/powerpc/Versions: Remove, merge into
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Versions: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/Makefile: Moved rules to ...
	* sysdeps/unix/sysv/linux/powerpc/Makefile: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/local_lim.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: ...here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/createthread.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstack.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstack.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstacksize.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstacksize.c: ...
	here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/sem_post.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c: ... here.

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/semaphore.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Remove,
	merge into ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c: ...
	here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c: ... here.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Remove
	conditional [RESET_PID].
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: File
	removed.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: Include
	<tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/pt-vfork.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: File
	Removed.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: Include
	<tcb-offsets.h>.
	(__vfork): Incorporate save/retore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/pt-vfork.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: File
	removed.

2014-05-26  Carlos O'Donell  <carlos@redhat.com>

	* malloc/malloc.c (mi_arena): New function.
	(malloc_info): Remove nested function mi_arena. Call non-nosted
	function mi_arena.

2014-05-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/memset.S (memset): Replace insrdi
	by insrwi.
	* sysdeps/powerpc/powerpc32/power6/memset.S (memset): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memset.S (memset): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memchr.S (memchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S (memrchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S (rawmemchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/strchr.S (strchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S (strchrnul): Likewise.

2014-05-26  Andreas Schwab  <schwab@suse.de>

	[BZ #16984]
	* locale/programs/repertoire.c (repertoire_read): Add slash
	between I18NPATH element and file name.
	* locale/programs/locfile.c (locfile_read): Likewise.

2014-05-26  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/pthread_mutexattr_settype.c
	(__pthread_mutexattr_settype):
	Disable lock elision for PTHREAD_MUTEX_NORMAL.

2014-05-26  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/tst-mutex5 (do_test):
	Use #ifndef ENABLE_LOCK_ELISION instead of #ifdef.

2014-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/README: Document 'init' directive.
	* benchtests/bench-skeleton.c (main) [BENCH_INIT]: Call
	BENCH_INIT.
	* scripts/bench.py (gen_source): Define BENCH_INIT macro.
	(parse_file): Recognize 'init' directive.

2014-05-26  Kyle McMartin  <kyle@redhat.com>

	[BZ #16796]
	* sysdeps/aarch64/nptl/tls.h: increase TCB alignment to the
	alignment of struct pthread.

2014-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16878]
	* nscd/netgroupcache.c (addgetnetgrentX): Look for
	NSS_STATUS_TRYAGAIN to indicate insufficient buffer space.
	* nscd/nss_files/files-netgrp.c (_nss_netgroup_parseline): Use
	NSS_STATUS_TRYAGAIN to indicate insufficient buffer space.

2014-05-25  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P_PIC): Remove.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h
	(SINGLE_THREAD_P_PIC): Remove.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (PSEUDO_RET): Move
	branch to syscall error ...
	(PSEUDO): ... here.
	[NOT_IN_libc] (SYSCALL_ERROR_HANDLER): Rename the label
	from __local_syscall_error to .Lsyscall_error.
	[!NOT_IN_libc] (SYSCALL_ERROR_HANDLER): Branch to __syscall_error.
	(SYSCALL_ERROR): Update label name.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Do not use DOARGS/UNDOARGS.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (DO_CALL): Likewise.
	(DOARGS_0, DOARGS_1, DOARGS_2, DOARGS_3): Remove.
	(DOARGS_4, DOARGS_5, DOARGS_6, DOARGS_7): Remove.
	(UNDOARGS_0, UNDOARGS_1, UNDOARGS_2, UNDOARGS_3): Remove.
	(UNDOARGS_4, UNDOARGS_5, UNDOARGS_6, UNDOARGS_7): Remove.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (DO_CALL): Fix
	block comment.

	* sysdeps/unix/sysv/linux/alpha/vfork.S (vfork, __vfork): Only
	define if !NOT_IN_libc.
	* sysdeps/unix/sysv/linux/alpha/pt-vfork.S (vfork, __vfork): Only
	define with non-default symbol versions.

2014-05-23  Richard Henderson  <rth@twiddle.net>

	* nptl/pt-vfork.c (vfork_resolve): Rename from vfork_ifunc.
	(vfork, __vfork): Define via compat_symbol.

	* nptl/pt-vfork.c: Error if !HAVE_IFUNC.
	[!HAVE_IFUNC] (vfork_compat): Remove.
	[!HAVE_IFUNC] (DEFINE_VFORK): Remove.

2014-05-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16978]
	* posix/tar.h [!__USE_XOPEN2K] (TSVTX): Define macro.
	* conform/Makefile (test-xfail-POSIX/tar.h/conform): Remove
	variable.

2014-05-23  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/alpha/nptl/Makefile: Merge into...
	* sysdeps/unix/sysv/linux/alpha/Makefile: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/Versions: Merge into...
	* sysdeps/unix/sysv/linux/alpha/Versions: ... here.

	* sysdeps/unix/sysv/linux/alpha/nptl/aio_cancel.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/aio_cancel.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/local_lim.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/alpha/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/alpha/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/sem_post.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_create.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_delete.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_getoverr.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_settime.c: ... here.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove vfork.
	* sysdeps/unix/sysv/linux/alpha/nptl/vfork.S: Move file ...
	* sysdeps/unix/sysv/linux/alpha/vfork.S: ... here.  Restore PID
	before exiting on error.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/alpha/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/alpha/pt-vfork.S: New file.

	* sysdeps/unix/sysv/linux/alpha/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/alpha/nptl/clone.S: File removed.

	* sysdeps/unix/sysv/linux/alpha/nptl/fork.c: Remove file.

2014-05-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16977]
	* sysdeps/i386/fpu/e_log10.S (__ieee754_log10): Take absolute
	value when x - 1 is zero.
	* sysdeps/i386/fpu/e_log10f.S (__ieee754_log10f): Likewise.
	* sysdeps/i386/fpu/e_log10l.S (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c (__ieee754_log10l): Return
	0.0L for an argument of 1.0L.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c (__ieee754_log10l):
	Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S (__ieee754_log10l): Take absolute
	value when x - 1 is zero.
	* math/libm-test.inc (log10_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-05-23  Rasmus Villemoes  <rv@rasmusvillemoes.dk>

	* manual/filesys.texi (Scanning Directory Content): Fix prototype of
	alphasort and versionsort.

2014-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h [copysign]: Remove unneeded
	macro.
	[copysignf]: Likewise.

2014-05-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* crypt/md5-crypt.c: Fix formatting.

2014-05-22  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* crypt/md5-crypt.c (__md5_crypt_r): Remove a nested function.
	(b64_from_24bit): New function.

2014-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c (memchr): Remove
	libc_hidden_builtin_def to ifunc.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c
	[libc_hidden_builtin_def]: Define hidden definition to __memchr_ppc32.

2014-05-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/aarch64/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/aarch64/nptl/fork.c: File removed.

2014-05-21  Joseph Myers  <joseph@codesourcery.com>

	* nscd/Depend (linuxthreads): Remove.
	(nptl): Add.
	* resolv/Depend (linuxthreads): Remove.
	* rt/Depend (linuxthreads): Remove.

	* Makeconfig [$(build-hardcoded-path-in-tests) = yes]
	(rtld-tests-LDFLAGS): Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.
	(link-libc-before-gnulib): Likewise.
	(elfobjdir): Remove variable.
	* Makefile (install): Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.
	* Makerules (link-libc-args): Use $(elf-objpfx) instead of
	$(elfobjdir)/.
	(link-libc-deps): Likewise.
	($(common-objpfx)libc.so): Likewise.
	($(common-objpfx)linkobj/libc.so): Likewise.
	[$(cross-compiling) = no] (symbolic-link-prog): Use $(elf-objpfx)
	instead of $(common-objpfx)elf/.
	(symbolic-link-list): Likewise.
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.
	* sysdeps/arm/Makefile (gnulib-arch): Use $(elf-objpfx) instead of
	$(elfobjdir)/.
	(static-gnulib-arch): Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.

2014-05-21  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P): Use the correct width load.  Fold
	into the ldr offset.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h [RTLD_PRIVATE_ERRNO]
	(SYSCALL_ERROR_HANDLER): Fold add insn into str offset.

2014-05-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c
	(libgcc_s_resume): Use __attribute_used__.
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c (libgcc_s_resume):
	Likewise.

2014-05-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h [__copysignf]: Fix copysign macro
	optimization when used with float constants.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-05-20  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16915]
	* locale/nl_langinfo_l.c: Make direct reference to every
	_nl_current_CATEGORY symbol.
	* localedata/Makefile (test-srcs): Add tst-langinfo-static.
	(tests-static): Add tst-langinfo-static.
	(tests-special): Add tst-langinfo-static.out.
	($(objpfx)tst-langinfo.out): Redirect output.
	($(objpfx)tst-langinfo-static.out): New.
	* localedata/tst-langinfo.sh: Send output to stdout.
	* localedata/tst-langinfo-static.c: New file.

	[BZ #16965]
	* stdlib/strtod_l.c (round_and_return): Add code to shift limbs
	when the shift amount is modulo the limb size.

2014-05-20  Richard Henderson  <rth@redhat.com>

	[BZ #16967]
	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h (struct sigaction):
	Change type of sa_flags from unsigned int to int.

	[BZ #16966]
	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h: Remove file.

	* sysdeps/alpha/dl-machine.h (ELF_MACHINE_NO_RELA): Define.

2014-05-20  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Test the return value of the system call in the nocancel case.

2014-05-20  Will Newton  <will.newton@linaro.org>
	    Yvan Roux  <yvan.roux@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/sys/user.h: Remove unused
	#include of asm/ptrace.h.
	(PTRACE_GET_THREAD_AREA): Remove #undef.
	(PTRACE_GETHBPREGS): Likewise.
	(PTRACE_SETHBPREGS): Likewise.
	(struct user_regs_struct): New structure.
	(struct user_fpsimd_struct): New structure.
	* sysdeps/unix/sysv/linux/aarch64/sys/procfs.h: Remove unused
	#include of asm/ptrace.h and second #include of sys/user.h.
	(PTRACE_GET_THREAD_AREA): Remove #undef.
	(PTRACE_GETHBPREGS): Likewise.
	(PTRACE_SETHBPREGS): Likewise.
	(ELF_NGREG): Use new struct user_regs_struct.
	(elf_fpregset_t): Use new struct user_fpsimd_struct.

2014-05-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypof.c: Moved ...
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf.c: ... here.

2014-05-17  Jose E. Marchesi  <jose.marchesi@oracle.com>

	[BZ #16958]
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Add missing
	membar to avoid block loads/stores to overlap previous stores.

2014-05-17  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/nptl/sysdep-cancel.h (PSEUDO):
	Create the __##syscall_name##_nocancel entry point.
	* sysdeps/unix/sysv/linux/alpha/sigsuspend.S (__sigsuspend_nocancel):
	Remove; let the sysdep-cancel.h code create it.

2014-05-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/termios.h (PAGEOUT, WRAP):
	Protect with __USE_GNU.
	(TIOCSET_TEMPT): Likewise.
	(TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI): Remove as
	these are already provided in bits/ioctl-types.h

2014-05-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/alpha/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/ia64/nptl/fork.c: File removed.

	* sysdeps/unix/sysv/linux/not-cancel.h (waitpid_not_cancel):
	Use wait4 regardless of [__NR_waitpid].

2014-05-16  Maciej W. Rozycki  <macro@codesourcery.com>

	PR libgcc/60166
	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_NANFRAC_S, _FP_NANFRAC_D)
	(_FP_NANSIGN_Q): Set the quiet bit.

2014-05-16  Joseph Myers  <joseph@codesourcery.com>

	* benchtests/Makefile
	($(addprefix $(objpfx)bench-,$(bench-math))): Depend on $(libm),
	not $(common-objpfx)math/libm.so.
	($(addprefix $(objpfx)bench-,$(bench-pthread))): Depend on
	$(shared-thread-library), not $(common-objpfx)nptl/libpthread.so.
	* elf/Makefile ($(objpfx)noload): Depend on $(libdl), not
	$(common-objpfx)dlfcn/libdl.so.
	($(objpfx)tst-audit8): Depend on $(libm), not
	$(common-objpfx)math/libm.so.
	* malloc/Makefile ($(objpfx)libmemusage.so): Depend on $(libdl),
	not $(common-objpfx)dlfcn/libdl.so.
	* math/Makefile
	($(addprefix $(objpfx),$(filter-out $(tests-static),$(tests)))):
	Depend on $(libm), not $(objpfx)libm.so.  Do not condition on
	[$(build-shared) = yes].
	($(objpfx)test-fenv-tls): Depend on $(shared-thread-library), not
	$(common-objpfx)nptl/libpthread.so.
	* misc/Makefile ($(objpfx)tst-tsearch): Depend on $(libm), not
	$(common-objpfx)math/libm.so$(libm.so-version) or
	$(common-objpfx)math/libm.a depending on [$(build-shared) = yes].
	* nptl/Makefile ($(objpfx)tst-unload): Depend on $(libdl), not
	$(common-objpfx)dlfcn/libdl.so.
	* setjmp/Makefile (link-libm): Remove variable.
	($(objpfx)tst-setjmp-fp): Depend on $(libm), not $(link-libm).
	* stdio-common/Makefile (link-libm): Remove variable.
	($(objpfx)tst-printf-round): Depend on $(libm), not $(link-libm).
	* stdlib/Makefile (link-libm): Remove variable.
	($(objpfx)bug-getcontext): Depend on $(libm), not $(link-libm).
	($(objpfx)tst-strtod-round): Likewise.
	($(objpfx)tst-tininess): Likewise.
	($(objpfx)tst-strtod-underflow): Likewise.
	($(objpfx)tst-strtod6): Likewise.
	($(objpfx)tst-tls-atexit): Depend on $(shared-thread-library) and
	$(libdl), not $(common-objpfx)nptl/libpthread.so and
	$(common-objpfx)dlfcn/libdl.so.

2014-05-16  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h [__USE_MISC]: Guard
	BSD terminal modes definitions.

2014-05-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/arm/fork.c: File removed.

	* sysdeps/unix/sysv/linux/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/i386/fork.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/arch-fork.h: ... here.
	Don't do #include_next.
	* sysdeps/unix/sysv/linux/x86_64/fork.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/arch-fork.h: ... here.
	Don't do #include_next.
	* sysdeps/unix/sysv/linux/mips/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/mips/fork.h: File removed.
	* sysdeps/unix/sysv/linux/powerpc/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/fork.h: File removed.

2014-05-16  Allan McRae  <allan@archlinux.org>

	* po/sv.po: Update Swedish translation from translation project.

	* timezone/Makefile ($(objpfx)tzselect): Use correct variable
	in sed expression.

2014-05-16  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16917]
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal): Return
	errno if the TIOCGPTN ioctl fails with an error different than
	EINVAL.
	* login/tst-ptsname.c: New file.
	* login/Makefile (tests): Add tst-ptsname.

	[BZ #16943]
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Declare prlimit
	and prlimit64.

2014-05-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16849]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only check for
	herrno to return EAI_AGAIN.

2014-05-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/i386/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/i386/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/i386/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libutil.abilist: ... here.

	* nptl/sysdeps/unix/sysv/linux/x86/Makefile: File removed.
	* sysdeps/unix/sysv/linux/x86/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines): Add elision-related stuff here instead.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-conf.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-conf.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-conf.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-conf.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-timed.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-timed.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-unlock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/force-elision.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/force-elision.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/hle.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/hle.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/init-arch.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/init-arch.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/init-arch.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/init-arch.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_timedlock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_timedlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_trylock.c: ... here.

	* sysdeps/unix/sysv/linux/mips/fork.h: New file.
	* sysdeps/unix/sysv/linux/mips/nptl/fork.c: File removed.

	* nptl/sysdeps/unix/sysv/linux/i386/Implies: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/i786/Implies: Moved ...
	* sysdeps/unix/sysv/linux/i386/i786/Implies: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/dl-sysdep.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/dl-sysdep.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/smp.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/smp.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/i386/createthread.c: ... here.

	* sysdeps/unix/sysv/linux/powerpc/fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/powerpc/fork.c: File removed.

	* nptl/sysdeps/unix/sysv/linux/i386/pthread_spin_init.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/pthread_spin_unlock.S: File removed.

	* nptl/sysdeps/unix/sysv/linux/x86_64/Implies: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/libc-cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/libc-cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/librt-cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/librt-cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_setaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/fork.c: Use <> for fork.h #include.
	* nptl/sysdeps/unix/sysv/linux/x86_64/fork.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/i386/fork.c: File removed.
	* sysdeps/unix/sysv/linux/i386/fork.h: New file.

	* nptl/sysdeps/unix/sysv/linux/i386/not-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/not-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/sh/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/generic/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/generic/nptl/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/m68k/nptl/not-cancel.h: File removed.

	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_spin_init.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_spin_unlock.S: Likewise.

	* nptl/sysdeps/unix/sysv/linux/x86_64/compat-timer.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/compat-timer.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/Versions: Remove, merge into ...
	* sysdeps/unix/sysv/linux/x86_64/Versions: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_create.c: here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_delete.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_getoverr.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_gettime.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_settime.c: ... here
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c:
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_create.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_delete.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_getoverr.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_gettime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_create.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_delete.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_getoverr.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_gettime.c:  Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_settime.c:  Likewise.

	* sysdeps/unix/sysv/linux/x86_64/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/x86_64/clone.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/clone.S: File removed.

	* sysdeps/i386/nptl/Implies: New file.
	* sysdeps/x86_64/nptl/Implies: New file.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/pthreadtypes.h: Moved ...
	* sysdeps/x86/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/semaphore.h: Moved ...
	* sysdeps/x86/nptl/bits/semaphore.h: ... here.

	* sysdeps/unix/sysv/linux/i386/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/i386/vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/pt-vfork.S: File removed.

	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/x86_64/vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pt-vfork.S: File removed.

	* sysdeps/unix/sysv/linux/arm/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/arm/nptl/vfork.S: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/pt-vfork.S: File removed.
	* nptl/pt-vfork.c: New file.
	* nptl/Versions (libc: GLIBC_PRIVATE): Add __libc_vfork.
	(libpthread: GLIBC_2.20): New version set (empty).

2014-05-14  Will Newton  <will.newton@linaro.org>

	* stdlib/gmp-impl.h: Test USE_STACK_ALLOC #ifdef
	rather than #if.

2014-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16564]
	* sysdeps/i386/fpu/s_log1pl.S (__log1pl): Do not add 1 to positive
	arguments with exponent 65 or above.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): Do not add 1 to
	arguments 0x1p113L or above.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Do not add 1
	to arguments 0x1p107L or above.
	* sysdeps/x86_64/fpu/s_log1pl.S (__log1pl): Do not add 1 to
	positive arguments with exponent 65 or above.
	* math/auto-libm-test-in: Add more tests of log1p.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16928]
	* math/s_cacos.c (__cacos): Ensure zero real part of result from
	non-finite arguments is +0.
	* math/s_cacosf.c (__cacosf): Likewise.
	* math/s_cacosl.c (__cacosl): Likewise.
	* math/libm-test.inc (cacos_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16927]
	* sysdeps/i386/fpu/e_acosh.S (__ieee754_acosh): Use fabs on x-1
	value.
	* sysdeps/i386/fpu/e_acoshf.S (__ieee754_acoshf): Likewise.
	* sysdeps/i386/fpu/e_acoshl.S (__ieee754_acoshl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c (__ieee754_acoshl): Correct
	for explicit high bit of mantissa when testing for argument equal
	to 1.
	* math/libm-test.inc (acosh_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16516]
	* sysdeps/ieee754/dbl-64/s_erf.c (efx8): Remove variable.
	(__erf): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/flt-32/s_erff.c (efx8): Remove variable.
	(__erff): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* math/auto-libm-test-in: Add more tests of erf.
	* math/auto-libm-test-out: Regenerated.

2014-05-14  Andreas Schwab  <schwab@suse.de>

	* elf/rtld.c (_dl_start_final, _dl_start, init_tls, dl_main):
	Remove code conditionalized on USE___THREAD.

	* config.h.in (HAVE_PT_CHOWN): Define as 0.
	* sysdeps/unix/grantpt.c (grantpt): Check HAVE_PT_CHOWN for value,
	not definedness.

2014-05-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMES):
	Define unconditionally.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_DUP3): Do not define.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_UTIMES): Undefine.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_UTIMES): Do not define.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Undefine if [__LINUX_KERNEL_VERSION <
	0x020621] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x020621].
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_DUP3): Undefine.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h (__ASSUME_UTIMES):
	Do not define.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_32BITUIDS): Likewise.
	(__ASSUME_TRUNCATE64_SYSCALL): Likewise.
	(__ASSUME_IPC64): Likewise.
	(__ASSUME_ST_INO_64_BIT): Likewise.
	(__ASSUME_GETDENTS64_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION < 0x030e00] (__ASSUME_UTIMES): Undefine.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_UTIMES): Do not define.
	(__ASSUME_PSELECT): Likewise.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h (__ASSUME_IPC64):
	Likewise.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	(__ASSUME_UTIMES): Undefine.

	* sysdeps/arm/fclrexcpt.c (__feclearexcept): Rename to
	feclearexcept.  Remove symbol versioning code.
	* sysdeps/arm/fegetenv.c (__fegetenv): Rename to fegetenv.  Remove
	symbol versioning code.
	* sysdeps/arm/fesetenv.c (__fesetenv): Rename to fesetenv.  Remove
	symbol versioning code.
	* sysdeps/arm/feupdateenv.c (__feupdateenv): Rename to
	feupdateenv.  Remove symbol versioning code.
	* sysdeps/arm/fgetexcptflg.c (__fegetexceptflag): Rename to
	fegetexceptflag.  Remove symbol versioning code.
	* sysdeps/arm/fsetexcptflg.c (__fesetexceptflag): Rename to
	fesetexceptflag.  Remove symbol versioning code.
	* sysdeps/unix/sysv/linux/arm/Versions (libc): Remove GLIBC_2.0,
	GLIBC_2.2 and GLIBC_2.3.3 entries.  Change GLIBC_2.1 to GLIBC_2.4.
	* sysdeps/unix/sysv/linux/arm/posix_fadvise64.c
	(__posix_fadvise64_l32): Remove prototype.
	[SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3)]: Remove conditional
	code.

2014-05-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/arm/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/bits/semaphore.h: Moved ...
	* sysdeps/arm/nptl/bits/semaphore.h: ... here.

2014-05-13  Sami Kerola  <kerolasa@iki.fi>

	* timezone/Makefile ($(objpfx)tzselect): Use zonedir instead
	current working directory

2014-05-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/arm/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/fork.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/fork.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/arm/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/unwind-forcedunwind.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/unwind-resume.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c: ... here.

	* sysdeps/unix/sysv/linux/arm/Versions (libc: GLIBC_PRIVATE): New set.
	* sysdeps/unix/sysv/linux/arm/nptl/Versions: File removed.

	* sysdeps/unix/sysv/linux/arm/Makefile
	[$(subdir) = rt] (librt-sysdep_routines, librt-shared-only-routines):
	Add rt-aeabi_unwind_cpp_pr1.
	[$(subdir) = nptl] (librt-sysdep_routines, librt-shared-only-routines):
	Add nptl-aeabi_unwind_cpp_pr1.
	[$(subdir) = nptl] (tests): Filter out tst-cleanupx4.
	* sysdeps/unix/sysv/linux/arm/nptl/Makefile: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/rt-aeabi_unwind_cpp_pr1.c: Move ...
	* sysdeps/unix/sysv/linux/arm/rt-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/nptl-aeabi_unwind_cpp_pr1.c: Move ...
	* sysdeps/unix/sysv/linux/arm/nptl-aeabi_unwind_cpp_pr1.c: ... here.

	* sysdeps/unix/sysv/linux/arm/configure.ac: Force -fexceptions here.
	* sysdeps/unix/sysv/linux/arm/configure: Regenerated.
	* sysdeps/unix/sysv/linux/arm/nptl/configure.ac: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/configure: File removed.

	* sysdeps/unix/sysv/linux/arm/clone.S: Include <tcb-offsets.h>.
	Deconditionalize the code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/arm/nptl/clone.S: File removed.

	* sysdeps/generic/exit-thread.h: New file.
	* sysdeps/unix/sysv/linux/exit-thread.h: New file.
	* include/unistd.h (__exit_thread): Remove declaration.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Drop exit-thread.
	* sysdeps/unix/sysv/linux/exit-thread.S: File removed.
	* csu/libc-start.c: Include <exit-thread.h>.
	(LIBC_START_MAIN): Pass no argument to __exit_thread.
	* nptl/pthread_create.c: Include <exit-thread.h>.
	(start_thread): Call __exit_thread in place of __exit_thread_inline.
	* nptl/sysdeps/i386/pthreaddef.h (__exit_thread_inline): Macro removed.
	* nptl/sysdeps/powerpc/pthreaddef.h: Likewise.
	* nptl/sysdeps/s390/pthreaddef.h: Likewise.
	* nptl/sysdeps/sh/pthreaddef.h: Likewise.
	* nptl/sysdeps/sparc/sparc32/pthreaddef.h: Likewise.
	* nptl/sysdeps/sparc/sparc64/pthreaddef.h: Likewise.
	* nptl/sysdeps/x86_64/pthreaddef.h: Likewise.
	* sysdeps/aarch64/nptl/pthreaddef.h: Likewise.
	* sysdeps/alpha/nptl/pthreaddef.h: Likewise.
	* sysdeps/arm/nptl/pthreaddef.h: Likewise.
	* sysdeps/hppa/nptl/pthreaddef.h: Likewise.
	* sysdeps/ia64/nptl/pthreaddef.h: Likewise.
	* sysdeps/m68k/nptl/pthreaddef.h: Likewise.
	* sysdeps/microblaze/nptl/pthreaddef.h: Likewise.
	* sysdeps/mips/nptl/pthreaddef.h: Likewise.
	* sysdeps/tile/nptl/pthreaddef.h: Likewise.

2014-05-13  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/grantpt.c (grantpt): Fix typo in assertion.

2014-05-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__]
	(__ASSUME_UTIMES): Do not condition on kernel version.
	(__ASSUME_PSELECT): Define unconditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_ATFCTS): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Do not condition on kernel version.
	(__ASSUME_COMPLETE_READV_WRITEV): Define unconditionally.
	(__ASSUME_FUTEX_LOCK_PI): Do not condition on kernel version.
	(__ASSUME_UTIMENSAT): Define unconditionally.
	(__ASSUME_PRIVATE_FUTEX): Likewise.
	(__ASSUME_FALLOCATE): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL): Remove.
	(__ASSUME_ARG_MAX_STACK_BASED): Likewise.
	(__ASSUME_ADJ_OFFSET_SS_READ): Define unconditionally.
	(__ASSUME_SOCK_CLOEXEC): Do not condition on kernel version.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	[__x86_64__ || __sparc__] (__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_FUTEX_CLOCK_REALTIME): Define unconditionally.
	(__ASSUME_AT_RANDOM): Likewise.
	(__ASSUME_PREADV): Likewise.
	(__ASSUME_PWRITEV): Likewise.
	(__ASSUME_REQUEUE_PI): Do not condition on kernel version.
	(__ASSUME_F_GETOWN_EX): Define unconditionally.
	(__ASSUME_XFS_RESTRICTED_CHOWN): Likewise.
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf)
	[!__ASSUME_ARG_MAX_STACK_BASED]: Remove conditional code.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_O_CLOEXEC): Define unconditionally.
	(__ASSUME_PSELECT): Do not undefine conditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_ATFCTS): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Likewise.
	(__ASSUME_UTIMENSAT): Likewise.
	(__ASSUME_FDATASYNC): Define unconditionally.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_SIGFRAME_V2): Likewise.
	)__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_PSELECT): Do not undefine conditionally.
	(__ASSUME_PPOLL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_PSELECT): Define unconditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.

2014-05-12  Andreas Schwab  <schwab@suse.de>

	[BZ #16932]
	* nis/nss_nis/nis-hosts.c (internal_gethostbyname2_r)
	(_nss_nis_gethostbyname4_r): Return error if item length is larger
	than maximum RPC packet size.
	* nis/nss_nis/nis-initgroups.c (initgroups_netid): Likewise.
	* nis/nss_nis/nis-network.c (_nss_nis_getnetbyname_r): Likewise.
	* nis/nss_nis/nis-service.c (_nss_nis_getservbyname_r)
	(_nss_nis_getservbyport_r): Likewise.

2014-05-12  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile (tests): Add tst-mallopt.
	* malloc/tst-mallopt.c: New file.

2014-05-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/armv7/strcmp.S: Use sfi_breg prefix on loads not from sp.
	[NO_THUMB]: Cope without cbz, cnbz, and orn instructions.

2014-05-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* elf/Makefile (tst-tlsmod5.so): Add $(no-as-needed).
	(tst-tlsmod6.so): Likewise.

2014-05-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/gnu/unwind-resume.c (libgcc_s_resume): Mark as noreturn.

2014-05-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16064]
	* sysdeps/i386/fpu/fegetenv.c: Include <unistd.h>, <ldsodefs.h>
	and <dl-procinfo.h>.
	(__fegetenv): Save SSE state in envp->__eip if supported.
	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Save SSE state in
	envp->__eip if supported.
	* sysdeps/i386/fpu/fesetenv.c: Include <unistd.h>, <ldsodefs.h>
	and <dl-procinfo.h>.
	(__fesetenv): Always set __eip, __cs_selector, __opcode,
	__data_offset and __data_selector in environment to 0.  Set SSE
	state if supported.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (tests): Add
	test-fenv-sse.
	[$(subdir) = math] (CFLAGS-test-fenv-sse.c): Add -msse2
	-mfpmath=sse.
	* sysdeps/x86/fpu/test-fenv-sse.c: New file.

2014-05-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/preconfigure.ac: Set libc_commonpagesize
	and libc_relro_required for ARM.
	* sysdeps/arm/preconfigure: Regenerate.

2014-05-09  Dominik Vogt  <vogt@linux.vnet.ibm.com>
	    Stefan Liebler  <stli@linux.vnet.ibm.com>

	* config.make.in (enable-lock-elision): New Makefile variable.
	* configure.ac: Likewise.
	* configure: Regenerate.
	* sysdeps/s390/configure.ac:
	Add check for gcc transactions support.
	* sysdeps/s390/configure: Regenerate.
	* nptl/sysdeps/unix/sysv/linux/s390/Makefile: New file.
	Build elision files if enabled.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.c: New file.
	Add lock elision support for s390.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.h: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-lock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-timed.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-trylock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-unlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/force-elision.h: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/lowlevellock.h:
	(__lll_timedlock_elision, __lll_lock_elision)
	(__lll_unlock_elision, __lll_trylock_elision)
	(lll_timedlock_elision, lll_lock_elision)
	(lll_unlock_elision, lll_trylock_elision): Add.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(pthread_mutex_t): Add lock elision support for s390.

2014-05-14  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fclrexcpt.c: Cleanup.
	* sysdeps/arm/fedisblxcpt.c: Cleanup.
	* sysdeps/arm/feenablxcpt.c: Cleanup.
	* sysdeps/arm/fegetenv.c: Cleanup.
	* sysdeps/arm/fegetexcept.c: Cleanup.
	* sysdeps/arm/fegetround.c: Cleanup.
	* sysdeps/arm/feholdexcpt.c: Cleanup.
	* sysdeps/arm/fesetenv.c: Cleanup.
	* sysdeps/arm/fesetround.c: Cleanup.
	* sysdeps/arm/feupdateenv.c: Cleanup.
	* sysdeps/arm/fgetexcptflg.c: Cleanup.
	* sysdeps/arm/fraiseexcpt.c: Cleanup.
	* sysdeps/arm/fsetexcptflg.c: Cleanup.
	* sysdeps/arm/ftestexcept.c: Cleanup.
	* sysdeps/arm/get-rounding-mode.h: Cleanup.
	* sysdeps/arm/setfpucw.c: Cleanup.

2014-05-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/armv7/strcmp.S: New file.
	* NEWS: Mention addition of ARMv7 optimized strcmp.

2014-05-08  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig ($(common-objpfx)config.status): Fix patsubst uses to
	look for %.ac rather than %.in.

	* sysdeps/mach/hurd/configure.ac (inhibit_glue): Remove variable.
	* sysdeps/unix/sysv/linux/configure.ac: Likewise.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* bits/utsname.h (_UTSNAME_DOMAIN_LENGTH): New macro, set to 0.

2014-05-07  Steve Ellcey  <sellcey@mips.com>

	[BZ# 16922]
	* sysdeps/mips/sys/asm.h (INT_SUB): Fix definition.
	(LONG_SUB): Ditto.
	(PTR_SUB): Ditto.

2014-05-07  Andreas Schwab  <schwab@suse.de>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Advance address pointer
	when skipping over non-matching result from nscd.

2014-05-07  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #16876]
	* nptl/sockperf.c (client): Check socket return value.

	[BZ #16877]
	* nscd/selinux.c (nscd_request_avc_has_perm): Check if there is
	nscd security class.

2014-05-06  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/unwind.h: File moved to ...
	* sysdeps/arm/unwind.h: ... here.

2014-05-06  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ# 16916]
	* sysdeps/unix/sysv/linux/sparc/bits/eventfd.h (EFD_SEMAPHORE):
	Define.

2014-05-06  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncpy.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c: New file:
	multiarch strncpy for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strpcpy, stpncpy
	multiarch optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/power7/stpncpy.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c: New file:
	multiarch stpncpy for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power7.S: New file

2014-05-06  Andreas Schwab  <schwab@suse.de>

	[BZ #16912]
	* gmon/mcount.c (_MCOUNT_DECL): Use
	atomic_compare_and_exchange_bool_acq instead of
	catomic_compare_and_exchange_bool_acq.

2014-05-05  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (others, install-bin): Remove pldd.
	(pldd-modules): Variable removed.
	($(objpfx)pldd): Target removed.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = elf]
	(others, install-bin): Append pldd here.
	($(objpfx)pldd): New target.

	* sysdeps/gnu/errlist.awk (BEGIN): Emit an initial #define of ERR_MAX
	to 0, so the first #if test emitted later doesn't see it undefined.
	(END): Emit "!defined ERRLIST_NO_COMPAT" to match what BEGIN does.
	* sysdeps/gnu/errlist.c: Regenerated.

2014-05-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c
	[libc_hidden_builtin_def]: Define to empty value.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c (memcpy): Redefined to
	__redirect_memcpy and define ifunc as default hidden symbol.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c (memset): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c (strlen): Likewise.

2014-05-04  Adam Conrad  <adconrad@0c3.net>

	* locale/iso-4217.def: Reintroduce XDR currency.

2014-05-04  Allan McRae  <allan@archlinux.org>

	* po/eo.po: Update Esperanto translation from translation project.

2014-05-02  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/x86_64/multiarch/init-arch.h:	Define FEATURE_INDEX_1 to 0,
	and FEATURE_INDEX_MAX to 1.
	[!__ASSEMBLER__]: Remove anonymous enum for FEATURE_INDEX_*.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* iconvdata/ansi_x3.110.c (ONE_DIRECTION): Define.
	* iconvdata/armscii-8.c (ONE_DIRECTION): Define.
	* iconvdata/big5.c (ONE_DIRECTION): Define.
	* iconvdata/big5hkscs.c (ONE_DIRECTION): Define.
	* iconvdata/cp1255.c (ONE_DIRECTION): Define.
	* iconvdata/cp1258.c (ONE_DIRECTION): Define.
	* iconvdata/cp932.c (ONE_DIRECTION): Define.
	* iconvdata/euc-cn.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jisx0213.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jp-ms.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jp.c (ONE_DIRECTION): Define.
	* iconvdata/euc-kr.c (ONE_DIRECTION): Define.
	* iconvdata/euc-tw.c (ONE_DIRECTION): Define.
	* iconvdata/gb18030.c (ONE_DIRECTION): Define.
	* iconvdata/gbbig5.c (ONE_DIRECTION): Define.
	* iconvdata/gbgbk.c (ONE_DIRECTION): Define.
	* iconvdata/gbk.c (ONE_DIRECTION): Define.
	* iconvdata/ibm1364.c (ONE_DIRECTION): Define.
	* iconvdata/ibm930.c (ONE_DIRECTION): Define.
	* iconvdata/ibm932.c (ONE_DIRECTION): Define.
	* iconvdata/ibm933.c (ONE_DIRECTION): Define.
	* iconvdata/ibm935.c (ONE_DIRECTION): Define.
	* iconvdata/ibm937.c (ONE_DIRECTION): Define.
	* iconvdata/ibm939.c (ONE_DIRECTION): Define.
	* iconvdata/ibm943.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-cn-ext.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-cn.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-jp-3.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-jp.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-kr.c (ONE_DIRECTION): Define.
	* iconvdata/iso646.c (ONE_DIRECTION): Define.
	* iconvdata/iso8859-1.c (ONE_DIRECTION): Define.
	* iconvdata/iso_11548-1.c (ONE_DIRECTION): Define.
	* iconvdata/iso_6937-2.c (ONE_DIRECTION): Define.
	* iconvdata/iso_6937.c (ONE_DIRECTION): Define.
	* iconvdata/johab.c (ONE_DIRECTION): Define.
	* iconvdata/shift_jisx0213.c (ONE_DIRECTION): Define.
	* iconvdata/sjis.c (ONE_DIRECTION): Define.
	* iconvdata/t.61.c (ONE_DIRECTION): Define.
	* iconvdata/tcvn5712-1.c (ONE_DIRECTION): Define.
	* iconvdata/tscii.c (ONE_DIRECTION): Define.
	* iconvdata/uhc.c (ONE_DIRECTION): Define.
	* iconvdata/unicode.c (ONE_DIRECTION): Define.
	* iconvdata/utf-16.c (ONE_DIRECTION): Define.
	* iconvdata/utf-32.c (ONE_DIRECTION): Define.
	* iconvdata/utf-7.c (ONE_DIRECTION): Define.

2014-05-01  Roland McGrath  <roland@hack.frob.com>

	* libio/libioP.h [!_IO_USE_OLD_IO_FILE && !_G_IO_NO_BACKWARD_COMPAT]
	(_IO_JUMPS_OFFSET): Define to 0.

	* nptl/sysdeps/pthread/bits/libc-lock.h
	[_LIBC && (!NOT_IN_libc || IS_IN_libpthread)]
	(__libc_lock_define_initialized_recursive): Always define using
	initializer.  Modern compilers treat uninitialized (implicit zero) and
	explicit zero initializers the same (i.e. put the datum in bss).

2014-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	* nscd/nscd-client.h: Include <string.h>.

2014-05-01  David S. Miller  <davem@davemloft.net>

	[BZ #16885]
	* sysdeps/sparc/sparc64/strcmp.S: Fix end comparison handling when
	multiple zero bytes exist at the end of a string.
	Reported by Aurelien Jarno <aurelien@aurel32.net>

	* string/test-strcmp.c (check): Add explicit test for situations where
	there are multiple zero bytes after the first.

2014-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #16890]
	* stdio-common/vfprintf.c (process_arg) [%p]: Mark string as wide
	when compiling wprintf.
	* stdio-common/tstdiomisc.c (t3): New function.
	(main): Call it.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* intl/iconv/skeleton.c (ONE_DIRECTION): Remove define.
	* iconv/gconv_simple.c (ONE_DIRECTION): Define.
	* iconvdata/8bit-gap.c (ONE_DIRECTION): Ditto.
	* iconvdata/8bit-generic.c (ONE_DIRECTION): Ditto.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* stdlib/longlong.h: Updated from GCC.

2014-05-01  Will Newton  <will.newton@linaro.org>
	    Bernard Ogden  <bernie.ogden@linaro.org>

	* NEWS: Update fixed bug list.

	[BZ #15119]
	* sysdeps/unix/sysv/linux/arm/nptl/lowlevellock.c: Remove file.

2014-04-30  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/fenv_private.h (HAVE_RM_CTX): Define.
	(libc_feholdexcept_setround_sparc_ctx): New function.
	(libc_fesetenv_sparc_ctx): Likewise.
	(libc_feupdateenv_sparc_ctx): Likewise.
	(libc_feholdsetround_sparc_ctx): Likewise.
	(libc_feholdexcept_setround_ctx): Define.
	(libc_feholdexcept_setroundf_ctx): Likewise.
	(libc_feholdexcept_setroundl_ctx): Likewise.
	(libc_fesetenv_ctx): Likewise.
	(libc_fesetenvf_ctx): Likewise.
	(libc_fesetenvl_ctx): Likewise.
	(libc_feupdateenv_ctx): Likewise.
	(libc_feupdateenvf_ctx): Likewise.
	(libc_feupdateenvl_ctx): Likewise.
	(libc_feresetround_ctx): Likewise.
	(libc_feresetroundf_ctx): Likewise.
	(libc_feresetroundl_ctx): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feholdsetroundf_ctx): Likewise.
	(libc_feholdsetroundl_ctx): Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (EMT_TAGOVF): Protect
	with __USE_GNU instead of XOPEN cpp guards.

	* sysdeps/sparc/bits/string.h (_STRING_ARCH_unaligned): Define to
	0.

	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (EMT_TAGOVF): Protect
	with XOPEN cpp guards.

2014-04-30  Julian Brown  <julian@codesourcery.com>

	[BZ #16888]
	* sysdeps/arm/dl-machine.h (elf_machine_rela): Fix R_ARM_IRELATIVE
	handling.

2014-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9894]
	* sysdeps/unix/sysv/linux/configure.ac (LIBC_LINUX_VERSION):
	Change to 2.6.32.
	(arch_minimum_kernel): Change all 2.6.16 settings to 2.6.32.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/microblaze/configure.ac: Remove file.
	* sysdeps/unix/sysv/linux/microblaze/configure: Likewise.
	* sysdeps/unix/sysv/linux/tile/configure.ac: Likewise.
	* sysdeps/unix/sysv/linux/tile/configure: Likewise.
	* README: Update reference to required Linux kernel version.
	* manual/install.texi (Linux): Update reference to required Linux
	kernel headers version.
	* INSTALL: Regenerated.

	* conform/data/stdlib.h-data [POSIX] (stddef.h): Do not allow
	header inclusion.
	[POSIX] (limits.h): Likewise.
	[POSIX] (math.h): Likewise.
	[POSIX] (sys/wait.h): Likewise.
	* conform/data/string.h-data [POSIX || UNIX98] (strtok_r): Require
	function.
	[POSIX] (stddef.h): Do not allow header inclusion.

2014-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/generic/symbol-hacks.h (memcpy): Add internal alias.

2014-04-30  Yang Yingliang  <yangyingliang@huawei.com>

	* nptl/pthread_cond_broadcast.c (__pthread_cond_broadcast):
	Return immediately after lll_futex_wake.

2014-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16791]
	* nscd/nscd-client.h (datahead_init_common): Initialize entire
	structure.
	(datahead_init_pos): Call datahead_init_common early.
	(datahead_init_neg): Likewise.

	* nscd/nscd-client.h (datahead_init_common, datahead_init_pos,
	datahead_init_neg): New functions.
	* nscd/aicache.c (addhstaiX): Use them.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/netgroupcache.c (do_notfound): Likewise.
	(addgetnetgrentX): Likewise.
	(addinnetgrX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.

2014-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Atsushi Onoe  <atsushi@onoe.org>

	[BZ #14308]
	[BZ #12994]
	[BZ #13651]
	* resolv/res_query.c (__libc_res_nsearch): Return if at least
	one response is valid.
	* resolv/res_send.c (send_dg): Check for validity of other
	response if the current response is a referral.

2014-04-29  Steve Ellcey  <sellcey@mips.com>

	* iconv/skeleton.c (ONE_DIRECTION): Set default value if not set.

2014-04-29  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #16823]
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl):
	Always divide by positive zero when computing -Inf result.
	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c (__log1pf): Likewise.

2014-04-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/fclrexcpt.c (__feclearexcept): Do not update
	FPSCR if value do not change.
	* sysdeps/powerpc/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (fenv_reg_to_exceptions): New helper
	function.

2014-05-29  Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/hppa: Move directory from ports/sysdeps/hppa.
	* sysdeps/unix/sysv/linux/hppa: Move directory from
	ports/systeps/unix/sysv/linux/hppa.
	* README: Update listing for hppa-*-linux-gnu.

2014-04-28  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #16754]
	* manual/stdio.texi (Hook functions): Fix types of stream hook
	functions.
	[BZ #16854]
	* socket/sys/socket.h: Fix typo in comment.

2014-04-28  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fenv_private.h: New file.
	* sysdeps/arm/math_private.h: New file.
	* sysdeps/arm/fpu_control.h: Add _FPU_MASK_NCZV and _FPU_MASK_EXCEPT.

2014-04-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/bits/link.h (La_x86_64_regs): Replace __int128
	with __int128_t.
	(La_x86_64_retval): Likewise.

2014-04-24  Ian Bolton  <ian.bolton@arm.com>

	* sysdeps/aarch64/fpu/fclrexcpt.c (feclearexcept): Don't write to
	fpsr if value didn't change.
	* sysdeps/aarch64/fpu/fedisblxcpt.c (fedisableexcept): Don't write
	to fpcr if value didn't change.
	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Don't write to
	fpsr or fpcr if value didn't change.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Don't write to
	fpcr if value didn't change.
	* sysdeps/aarch64/fpu/fsetexcptflg.c (fesetexceptflag): Don't write
	to fpsr if value didn't change.

2014-02-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/tst-sem3.c: Use test-skeleton.c
	(main): Rename to do_test.  Use return instead of
	exit.
	* nptl/tst-sem4.c: Use test-skeleton.c
	(main): Rename to do_test.

2014-04-22  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h
	(struct sigaction): New struct member __glibc_reserved0, change
	type of sa_flags to int.

2014-04-22  Yufeng Zhang  <yufeng.zhang@arm.com>

	* stdlib/longlong.h (count_leading_zeros, count_trailing_zeros)
	(COUNT_LEADING_ZEROS_0): Define for AArch64.

2014-04-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/sysdeps/unix/sysv/linux/sem_trywait.c: Include atomic.h.
	* nptl/sysdeps/unix/sysv/linux/sem_wait.c: Likewise.

2014-04-22  Will Newton  <will.newton@linaro.org>
	    Venkataramanan Kumar  <venkataramanan.kumar@linaro.org>

	* sysdeps/aarch64/__longjmp.S: Include stap-probe.h.
	(__longjmp): Add longjmp and longjmp_target SystemTap
	probes.
	* sysdeps/aarch64/setjmp.S: Include stap-probe.h.
	(__sigsetjmp): Add setjmp SystemTap probe.

2014-04-17  Carlos O'Donell  <carlos@redhat.com>

	* manual/intro.texi (Roadmap to the manual): Sort chapter listing to
	match manual order.

2014-04-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_once.c: Remove file.

	* sysdeps/powerpc/fpu/fenv_private.h
	(libc_feholdexcept_setroundl_ctx): Define to
	libc_feholdexcept_setround_ppc_ctx.
	(libc_fesetenvl_ctx): Define to libc_fesetenv_ppc_ctx.
	(libc_feholdsetroundl_ctx): Define to libc_feholdsetround_ppc_ctx.
	(libc_feresetroundl_ctx): Define to libc_feresetround_ppc_ctx.
	(libc_feupdateenvl_ctx): libc_feupdateenv_ppc_ctx.

2014-04-17  Ian Bolton  <ian.bolton@arm.com>

	* sysdeps/aarch64/math-tests.h: New file.

2014-04-17  Sihai Yao  <sihai.ysh@alibaba-inc.com>

	* sysdeps/x86_64/multiarch/ifunc-defines.sym (COMMON_CPUID_INDEX_7):
	New.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Check and set bit_AVX2_Usable.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_AVX2_Usable): New
	macro.
	(bit_AVX2): Likewise.
	(index_AVX2_Usable): Likewise.
	(CPUID_AVX2): Likewise.
	(HAS_AVX2): Likewise.

2014-04-17  Will Newton  <will.newton@linaro.org>

	* manual/setjmp.texi (System V contexts): Add note that
	calling setcontext on a context created by a call to a
	signal handler is undefined.  Update text to note that
	setcontext from a signal handler is possible but not
	recommended.

	[BZ #16629]
	* stdlib/tst-setcontext.c: Include signal.h.
	(main): Check that the signal stack before and
	after swapcontext is the same.

	* sysdeps/unix/sysv/linux/aarch64/setcontext.S (__setcontext):
	Re-implement to restore registers in user code and avoid
	rt_sigreturn system call.

2014-04-17  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/math-tests.h: New file: Set ARM math-test settings.
	* sysdeps/generic/math-tests.h: Add macro (EXCEPTION_ENABLE_SUPPORTED).
	* math/test-fenv.c: Skip exception trap tests on targets which only
	support non-stop mode.

2014-04-17  Ian Bolton  <ian.bolton@arm.com>
	    Wilco Dijkstra  <wilco.dijkstra@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (HAVE_RM_CTX)
	(libc_feholdsetround_aarch64_ctx)
	(libc_feholdsetround_ctx, libc_feholdsetroundf_ctx)
	(libc_feholdsetroundl_ctx, libc_feresetround_aarch64_ctx)
	(libc_feresetround_ctx, libc_feresetroundf_ctx)
	(libc_feresetroundl_ctx, libc_feresetround_noex_aarch64_ctx)
	(libc_feresetround_noex_ctx, libc_feresetround_noexf_ctx)
	(libc_feresetround_noexl_ctx): Define.

2014-04-16  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/nptl/pthread_once.c: Remove.

	* sysdeps/alpha/Makefile [debug] (CFLAGS-backtrace.c): Enable
	unwind tables.

	* sysdeps/unix/alpha/sysdep.h (__pointer_chk_guard): Remove
	const from the non-libc, non-ldso copy.

	* sysdeps/alpha/libm-test-ulps: Regenerate.

2014-04-16  Ian Bolton  <ian.bolton@arm.com>
	    Wilco Dijkstra  <wilco.dijkstra@arm.com>

	* sysdeps/aarch64/fpu/math_private.h: New file.

2014-04-16  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerate.

2014-04-16  Igor Zamyatin  <igor.zamyatin@intel.com>

	[BZ #16275]
	* sysdeps/x86_64/bits/link.h (La_x86_64_regs): Add lr_bnd.
	(La_x86_64_retval): Add lrv_bnd0 and lrv_bnd1.
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Save
	Intel MPX bound registers before _dl_profile_fixup.
	* sysdeps/x86_64/dl-trampoline.h: Restore Intel MPX bound
	registers after _dl_profile_fixup.  Save and restore bound
	registers bnd0/bnd1 when calling _dl_call_pltexit.
	* sysdeps/x86_64/link-defines.sym (BND_SIZE): New.
	(LR_BND_OFFSET): Likewise.
	(LRV_BND0_OFFSET): Likewise.
	(LRV_BND1_OFFSET): Likewise.

2014-04-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/tls.h (dtv, dtv_t, tcbhead_t): Move declarations
	to...
	* sysdeps/mach/hurd/i386/tls.h: ... here.
	(tcbhead_t): Add multiple_threads, sysinfo, stack_guard,
	pointer_guard, gscope_flag, private_futex, __private_tm, __private_ss
	fields.

2014-04-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/munmap.c (__munmap): Return EINVAL if `addr' is 0.

2014-04-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-04-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #14770]
	* sysdeps/s390/configure.ac: Check for Binutils >= 2.24.
	* sysdeps/s390/configure: Regenerate.

	[BZ #16824]
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l):
	Set round-to-nearest internally to reduce error accumulation.

2014-04-16  Alan Modra  <amodra@gmail.com>

	[BZ #16740]
	[BZ #16619]
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Rewrite.
	* math/libm-test.inc (frexp_test_data): Add tests.
	* NEWS: Update fixed bug list.

2014-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Depend on libraries in build directory.
	(bench-math): Separate out math tests.
	(bench-pthread): Separate out pthread tests.
	(bench): Include math and pthread tests.

2014-04-14  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16831]
	* csu/libc-start.c (LIBC_START_MAIN) [!SHARED]: Call
	_dl_debug_initialize.

	* configure.ac: Remove SELinux header check.
	* configure: Regenerate.
	* nscd/selinux.c (perms): Array of const char* to permission names.
	(nscd_request_avc_has_perm): Call security_deny_unknown to find
	default policy. Call string_to_security_class and string_to_av_perm to
	translate strings. Enforce default policy and call avs_has_perm with
	results of translated strings.

2014-04-13  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-04-12  Allan McRae  <allan@archlinux.org>

	[BZ #16838]
	* manual/string.texi (Collation Functions): Fix qsort argument
	order in example.
	Reported by David C. Rankin <drankinatty@suddenlinkmail.com>.

2014-04-11  Chris Metcalf  <cmetcalf@tilera.com>

	* math/test-fenv-preserve.c [FE_ALL_EXCEPT == 0] (do_test):
	Make the test a no-op if there are no exceptions defined.

2014-04-11  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/Makefile (tests): make tst-dlopen-aout conditional on
	enable-hardcoded-path-in-tests

2014-04-11  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (extra-objs): Add json-lib.o.
	(bench-func): Tidy up JSON output.
	* benchtests/bench-skeleton.c: Include json-lib.h.
	(main): Use JSON library functions to do output of
	benchmark results.
	* benchtests/bench-timing-type.c (main): Output the
	timing type simply, leaving formatting to the user.
	* benchtests/json-lib.c: New file.
	* benchtests/json-lib.h: Likewise.

2014-04-11  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_once.c: Moved to ...
	* nptl/sysdeps/unix/sysv/linux/pthread_once.c: ... here.  Add missing
	memory barriers.  Add comments.
	* sysdeps/unix/sysv/linux/aarch64/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/ia64/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/m68k/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/tile/nptl/pthread_once.c: Remove file.

2014-04-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/configure.ac: Unify file with ...
	* sysdeps/s390/s390-64/configure.ac: ... this ...
	* sysdeps/s390/configure.ac: ... to here.
	* sysdeps/s390/s390-32/configure: Delete file.
	* sysdeps/s390/s390-64/configure: Delete file.
	* sysdeps/s390/configure: Regenerate.

2014-04-11  Joseph Anthony Pasquale Holsten  <joseph@josephholsten.com>

	* resolv/res_query.c (__libc_res_nsearch): Fix typo in comment.

2014-04-11  Will Newton  <will.newton@linaro.org>

	* malloc/malloc.c [!MALLOC_DEBUG]: #define MALLOC_DEBUG
	to zero if it is not defined elsewhere.  (mtrim): Test
	the value of MALLOC_DEBUG with #if rather than #ifdef.

2014-04-10 Torvald Riegel  <triegel@redhat.com>

	* benchtests/pthread_once-inputs: New file.
	* benchtests/pthread_once-source.c: New file.
	* benchtests/README: Update documentation.

2014-04-09  Igor Zamyatin  <igor.zamyatin@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #16275]
	* config.h.in (HAVE_MPX_SUPPORT): New #undef.
	* sysdeps/x86_64/configure.ac: Set HAVE_MPX_SUPPORT.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/dl-trampoline.S (REGISTER_SAVE_AREA): New
	macro.
	(REGISTER_SAVE_RAX): Likewise.
	(REGISTER_SAVE_RCX): Likewise.
	(REGISTER_SAVE_RDX): Likewise.
	(REGISTER_SAVE_RSI): Likewise.
	(REGISTER_SAVE_RDI): Likewise.
	(REGISTER_SAVE_R8): Likewise.
	(REGISTER_SAVE_R9): Likewise.
	(REGISTER_SAVE_BND0): Likewise.
	(REGISTER_SAVE_BND1): Likewise.
	(REGISTER_SAVE_BND2): Likewise.
	(_dl_runtime_resolve): Use them.  Save and restore Intel MPX
	bound registers when calling _dl_fixup.

2014-04-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* bits/string.h (_STRING_ARCH_unaligned): Define it to 0.
	* crypt/sha256.c (_STRING_ARCH_unaligned): Check its value instead
	of its definition.
	* iconv/gconv_simple.c (_STRING_ARCH_unaligned): Likewise.
	* iconv/loop.c (_STRING_ARCH_unaligned): Likewise.
	* iconv/skeleton.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_gethst_r.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_getserv_r.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_helper.c (_STRING_ARCH_unaligned): Likewise.
	* resolv/res_send.c (_STRING_ARCH_unaligned): Likewise.

2014-04-09  Peter Brett  <peter@peter-b.co.uk>

	[BZ #15514]
	* sysdeps/posix/pathconf.c (__pathconf): Use statvfs64() for
	pathconf(_PC_NAME_MAX).

2014-04-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/pthread/pthread.h (__PTHREAD_MUTEX_HAVE_ELISION):
	Remove macro usage.
	(__PTHREAD_SPINS): Move definition to ...
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(__PTHREAD_SPINS): ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/sh/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/arm/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/tile/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.

	* sysdeps/powerpc/powerpc32/power6x/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6x/fpu/Implies: new file.
	* sysdeps/powerpc/powerpc64/power6x/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: Remove multiarch
	imply folder.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/multiarch/Implies: Adjust
	correct imply path.
	* sysdeps/powerpc/powerpc64/power7/strncat.S (STRLEN): Define correct
	strlen symbol for non multi-arch builds.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (__isnan): Add
	missing hidden_def and weak_alias.

2014-04-08  Carlos O'Donell  <carlos@redhat.com>

	* manual/ipc.texi (sem_close): AC-unsafe because of aculock.

2014-04-07  Will Newton  <will.newton@linaro.org>

	* string/basename.c [HAVE_CONFIG_H]: Remove #ifdef and
	and contents.  [!_LIBC] Remove #ifndef and contents.
	(basename): Use ANSI prototype.  [_LIBC] Remove #idef.
	* string/memccpy.c (__memccpy): Use ANSI prototype.
	* string/memfrob.c (memfrob): Likewise.
	* string/strcoll.c (STRCOLL): Likewise.
	* string/strlen.c (strlen): Likewise.
	* string/strtok.c (STRTOK): Likewise.
	* string/strcat.c: Remove unused #include of memcopy.h.
	(strcat): Use ANSI prototype.
	* string/strchr.c: Remove unused #include of memcopy.h.
	(strchr): Use ANSI prototype.
	* string/strcmp.c: Remove unused #include of memcopy.h.
	(strcmp): Use ANSI prototype.
	* string/strcpy.c: Remove unused #include of memcopy.h.
	(strcpy): Use ANSI prototype.

2014-04-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* Makeconfig (CPPFLAGS): Add config-extra-cppflags to list.
	* config.make.in (config-extra-cppflags): Set it from
	libc_extra_cppflags.
	* configure.ac (libc_extra_cflags): Make it accumulate over
	configure fragments.
	(libc_extra_cppflags): New flag.
	* configure. Regenerate.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac
	(libc_cv_ppc64_def_call_elf): Define it to yes if compiler does
	not set _CALL_ELF and add -D_CALL_ELF=1 to libc_extra_cppflags.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Regenerate.

	[BZ #16815]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (__nearbyint): Fix
	result for FE_DOWNWARD rounding mode.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-04-04  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/tile/dl-runtime.c (_dl_unmap): Fix cut-and-paste bug
	in function argument name.

2014-04-03  David Svoboda  <svoboda@cert.org>

	[BZ #5666]
	* manual/stdio.texi (Line-Oriented Input): Document buffer allocation
	explicitly.

2014-04-03  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-unmap-segments.h: New file.
	* sysdeps/generic/ldsodefs.h
	(DL_UNMAP): Use _dl_unmap_segments in place of __munmap.
	* elf/dl-close.c: Include <dl-unmap-segments.h>.
	* elf/dl-fptr.c: Likewise.
	(_dl_unmap): Use _dl_unmap_segments in place of __munmap.
	* sysdeps/aarch64/tlsdesc.c: Likewise.
	* sysdeps/arm/tlsdesc.c: Likewise.
	* sysdeps/i386/tlsdesc.c: Likewise.
	* sysdeps/tile/dl-runtime.c: Likewise.
	* sysdeps/x86_64/tlsdesc.c: Likewise.
	* elf/dl-load.h: New file.
	* elf/dl-load.c: Include it.
	(MAP_FILE, MAP_COPY, MAP_BASE_ADDR):
	Macros moved to dl-load.h.
	(ELF_PREFERRED_ADDRESS_DATA, ELF_PREFERRED_ADDRESS): Likewise.
	(_dl_map_object_from_fd): Type 'struct loadcmd' moved to dl-load.h.
	Use _dl_unmap_segments in place of __munmap.
	Break out segment-mapping loop into ...
	* elf/dl-map-segments.h (_dl_map_segments): ... here, in new file.

2014-04-03  Will Newton  <will.newton@linaro.org>

	* elf/dl-lookup.c (do_lookup_x): Remove comment
	referring to nested function and move variable
	declarations down to before first use.

2014-04-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16799]
	[BZ #16800]
	* math/s_catan.c (__catan): Avoid passing -0 denominator to atan2
	with 0 numerator.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c (__ieee754_logf): Always divide
	by positive zero when computing -Inf result.
	* math/libm-test.inc (catan_test): Use ALL_RM_TEST.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16789]
	* math/s_clog.c (__clog): Use math_force_eval to ensure underflow
	instead of using underflowing value in computing result.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Use ALL_RM_TEST.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-04-02  Alan Modra  <amodra@gmail.com>

	[BZ #16739]
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl): Correct
	output when value is near a power of two.  Use int64_t for lx and
	remove casts.  Use decimal rather than hex exponent constants.
	Don't use long double multiplication when double will suffice.
	* math/libm-test.inc (nextafter_test_data): Add tests.
	* NEWS: Add 16739 and 16786 to bug list.

	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Correct stream hint.

	* sysdeps/powerpc/powerpc64/start.S: Add @toc to toc symbol reference.

2014-04-01  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (CFLAGS-bench-ffs.c): Add
	-fno-builtin.  (CFLAGS-bench-ffsll.c): Likewise.

2014-04-01  Florian Weimer  <fweimer@redhat.com>

	[BZ #13347]
	* nptl/nptl-init.c (sighandler_setxid): Check system call result.
	* nptl/tst-setuid2.c: New file.
	* nptl/Makefile (xtests): Add tst-setuid2.

2014-04-01  Alan Modra  <amodra@gmail.com>

	[BZ #16786]
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S: Don't trash stack.

2014-03-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6803]
	[BZ #6804]
	* math/w_scalb.c (__scalb): For non-SVID mode, check result and
	set errno as appropriate.
	* math/w_scalbf.c (__scalbf): Likewise.
	* math/w_scalbl.c (__scalbl): Likewise.
	* math/gen-libm-test.pl (parse_args): Handle ERRNO_PLUS_OFLOW,
	ERRNO_MINUS_OFLOW, ERRNO_PLUS_UFLOW and ERRNO_MINUS_UFLOW.
	* math/libm-test.inc (scalb_test_data): Add errno expectations.
	Add more NaN tests.

	[BZ #16349]
	* math/w_atan2.c: Include <errno.h>.
	(__atan2): Set errno for result underflowing to zero.
	* math/w_atan2f.c: Include <errno.h>.
	(__atan2f): Set errno for result underflowing to zero.
	* math/w_atan2l.c: Include <errno.h>.
	(__atan2l): Set errno for result underflowing to zero.
	* math/auto-libm-test-in: Don't allow missing errno for some atan2
	tests.
	* math/auto-libm-test-out: Regenerated.

2014-03-31  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S (MFVSRD_R3_V1):
	Encode instruction correctly in little endian.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S (MFVSRD_R3_V1):
	Likewise.

2014-03-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9894]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__sparc__ && !__arch64__ && !__sparc_v9__]
	(__ASSUME_SET_ROBUST_LIST): Do not define.
	[__sparc__ && !__arch64__ && !__sparc_v9__]
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	[__sparc__ && !__arch64__ && !__sparc_v9__] (__ASSUME_REQUEUE_PI):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Undefine.
	(__ASSUME_REQUEUE_PI): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x030a00] (__ASSUME_FUTEX_LOCK_PI):
	Undefine.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_FUTEX_LOCK_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_REQUEUE_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_SET_ROBUST_LIST):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_FUTEX_LOCK_PI):
	Undefine.
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_REQUEUE_PI): Likewise.
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_SET_ROBUST_LIST):
	Likewise.

	[BZ #16648]
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_FUTIMESAT): Define.
	* sysdeps/unix/sysv/linux/microblaze/futimesat.c: New file.

2014-03-31  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (bench): Add ffs and ffsll to list
	of tests.
	* benchtests/ffs-inputs: New file.
	* benchtests/ffsll-inputs: Likewise.

2014-03-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16770]
	* math/e_scalb.c (__ieee754_scalb): Check second argument is not
	too large before casting to int.
	* math/e_scalbf.c (__ieee754_scalbf): Likewise.
	* math/e_scalbl.c (__ieee754_scalbl): Likewise.
	* math/libm-test.inc (scalb_test_data): Add more tests.

2014-03-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (DETAILED_OPT): New make option.
	(bench-func): Run benchmark program with -d if DETAILED_OPT is
	set.
	* benchtests/bench-skeleton.c: Include stdbool.h.
	(main): Store and print timings per input.
	* benchtests/scripts/bench.py (STRUCT_TEMPLATE): Add timing
	member to each argument value.
	(EPILOGUE): Define new macros RESULT and RESULT_ACCUM.
	(_print_arg_data): Initialize per-input timing to 0.

	* benchtests/Makefile (timing-type): New binary.
	(bench-clean): Also remove bench-timing-type.
	(bench): New target for timing-type.
	(bench-func): Print output in JSON format.
	* benchtests/bench-skeleton.c (main): Print output in JSON
	format.
	* benchtests/bench-timing-type.c: New file.
	* benchtests/bench-timing.h (TIMING_TYPE): New macro.
	(TIMING_PRINT_STATS): Remove.
	* benchtests/scripts/bench.py (_print_arg_data): Store variant
	name separately.

	* benchtests/bench-modf.c: Remove.
	* benchtests/modf-inputs: New inputs file.

2014-03-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16362]
	* math/s_clog10.c (M_PI_LOG10E): New macro.
	(__clog10): Use M_PI_LOG10E instead of M_PI when real and
	imaginary parts are 0.
	* math/s_clog10f.c (M_PI_LOG10Ef): New macro.
	(__clog10f): Use M_PI_LOG10Ef instead of M_PI when real and
	imaginary parts are 0.
	* math/s_clog10l.c (M_PI_LOG10El): New macro.
	(__clog10l): Use M_PI_LOG10El instead of M_PIl when real and
	imaginary parts are 0.
	* math/libm-test.inc (clog10_test_data): Update expected results
	for when real and imaginary parts are 0.

2014-03-27  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-load.c: Finish conversion of __builtin_expect into
	__glibc_{un}likely.

2014-03-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16348]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [!USE_AS_EXPM1L]: Use
	1+x for argument with exponent below -67.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [!USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add more tests of exp.
	* math/auto-libm-test-out: Regenerated.

2014-03-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16759]
	* inet/getnetgrent_r.c (get_nonempty_val): New function.
	(nscd_getnetgrent): Use it.

	[BZ #16760]
	* nscd/netgroupcache.c (addgetnetgrentX): Use memmove instead
	of stpcpy.

2014-03-27  Andi Kleen  <ak@linux.intel.com>

	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.h (lll_lock)
	(lll_robust_lock, lll_cond_lock, lll_timedlock)
	(lll_robust_cond_lock, lll_robust_timedlock, lll_unlock)
	(lll_robust_unlock): Remove out of line section. Use cfi
	intrinsics.
	(LLL_STUB_UNWIND_INFO*): Remove.
	* nptl/sysdeps/unix/sysv/linux/i386/lowlevellock.h (lll_lock)
	(lll_robust_lock, lll_cond_lock, lll_timedlock)
	(lll_robust_cond_lock, lll_robust_timedlock, lll_unlock)
	(lll_robust_unlock): Remove out of line section. Use cfi
	intrinsics.
	(LLL_STUB_UNWIND_INFO*): Remove.

2014-03-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16758]
	* nscd/netgroupcache.c (addinnetgrX): Succeed if triplet has
	blank values.

2014-03-26  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-load.c: Convert __builtin_expect into __glibc_{un}likely.

2014-03-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16198]
	* sysdeps/x86_64/fpu/fegetenv.c (fegetenv): Use fldenv after
	fnstenv.
	* math/test-fenv-preserve.c: New file.
	* math/Makefile (tests): Add test-fenv-preserve.

2014-03-26  Will Newton <will.newton@linaro.org>

	* benchtests/bench-strtod.c (TIMEOUT): Define to 10.

2014-03-25  Roland McGrath  <roland@hack.frob.com>

	* scripts/versionlist.awk: Partition the version sets and emit all
	GLIBC_* (sorted) before all others (sorted).

2014-03-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/Versions (libc) [EXPORT_UNWIND_FIND_FDE]: Add empty
	GLIBC_2.2.5 version.

2014-03-25 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* scripts/localplt.awk: Check for PLT generated by internal IFUNC
	calls.

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: Revert
	previous change.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-03-25  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Add out_fail2
	label to be used after in6ailist is initialized.

2014-03-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(__PTHREAD_MUTEX_HAVE_ELISION): New define.

2014-03-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16357]
	[BZ #16599]
	* math/gen-auto-libm-tests.c (fp_format_desc): Add field
	min_plus_half.
	(fp_formats): Update initializers.
	(init_fp_formats): Initialize new field.
	(output_for_one_input_case): Allow underflow for results up to
	min_plus_half.
	* math/libm-test.inc (log1p_test): Use ALL_RM_TEST.
	* math/auto-libm-test-in: Don't mark some underflows from asin and
	atanh as spurious.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-25  Andreas Schwab  <schwab@suse.de>

	* libio/Makefile (tst-ftell-partial-wide-ENV)
	(tst-ftell-active-handler-ENV): Define.

2014-03-25  Stefan Liebler <stli@linux.vnet.ibm.com>

	* NEWS: Add 16712, 16713, 16714 to fixed bug list.

2014-03-24  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/tst-dlopen-aout.c: Adjust comments. Use test-skeleton.c

2014-03-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/e_exp.c: Include <math.h>.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.

2014-03-24  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16634]
	* elf/dl-load.c (open_verify): Add mode parameter.
	Error early when ET_EXEC and mode does not have __RTLD_OPENEXEC.
	(open_path): Change from boolean 'secure' to complete flag 'mode'
	(_dl_map_object): Adjust.
	* elf/Makefile (tests): Add tst-dlopen-aout.
	* elf/tst-dlopen-aout.c: New test.

2014-03-24  Stefan Liebler <stli@linux.vnet.ibm.com>

	[BZ #16714]
	* sysdeps/unix/sysv/linux/s390/bits/stat.h
	(struct stat): Rename member pad0 to __glibc_reserved0.

	[BZ #16712]
	* sysdeps/s390/s390-32/bits/wordsize.h
	(__WORDSIZE32_SIZE_ULONG): New define.
	* sysdeps/s390/s390-64/bits/wordsize.h
	(__WORDSIZE32_SIZE_ULONG): Likewise.
	* sysdeps/generic/stdint.h (SIZE_MAX):
	Define as UL if __WORDSIZE32_SIZE_ULONG.

	[BZ #16713]
	* sysdeps/unix/sysv/linux/s390/bits/sigaction.h
	(__glibc_reserved0): New variable.
	(sa_flags): Change type to int.

	* posix/Makefile (before-compile): Use += before-compile instead
	of a :=.

	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(__PTHREAD_MUTEX_HAVE_ELISION): New define.

2014-03-20  Andreas Schwab  <schwab@suse.de>

	[BZ #16743]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Properly skip over
	non-matching result from nscd.

2014-03-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.py: Moved to ...
	* benchtests/scripts/bench.py: ... here.
	* benchtests/Makefile ($(objpfx)bench-%.c): Adjust.

2014-03-24  Andreas Schwab  <schwab@suse.de>

	[BZ #16002]
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Use
	alloca_account and account alloca use for struct in6ailist.

2014-03-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16284]
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Use original
	rounding mode to recompute results that overflow to infinity or
	underflow to zero.
	* math/auto-libm-test-in: Don't mark tests as expected to fail for
	bug 16284.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (ccos_test): Use ALL_RM_TEST.
	(ccosh_test): Likewise.
	(csin_test_data): Use plus_oflow.
	(csin_test): Use ALL_RM_TEST.
	(csinh_test_data): Use plus_oflow.
	(csinh_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/bits/wordsize.h: Include <sgidefs.h>.
	* sysdeps/unix/sysv/linux/mips/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/setrlimit64.c: Likewise.

	[BZ #16731]
	* sysdeps/i386/fpu/e_log.S (__ieee754_log): Take absolute value
	when x - 1 is zero.
	* sysdeps/i386/fpu/e_logf.S (__ieee754_logf): Likewise.
	* sysdeps/i386/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Return +0 when
	argument is 1.
	* sysdeps/ieee754/ldbl-128/e_logl.c (__ieee754_logl): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Take absolute value when x - 1 is
	zero.
	* math/libm-test.inc (log_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Remove file.
	* scripts/bench.py: New benchmark script.
	* benchtests/Makefile ($(objpfx)bench-%.c): Use it.
	* benchtests/README: Mention python dependency.
	* scripts/pylintrc: New file.
	* scripts/pylint: New file.

	* bits/mathdef.h: Use #ifdef instead of #if.
	* sysdeps/arm/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.
	* sysdeps/tile/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.
	* sysdeps/x86/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.

2014-03-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>
	    Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* string/strpbrk.c (strpbrk): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strpbrk-power7
	and strpbrk-ppc64 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add new strpbrk optimized symbols.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-power7.S: New file:
	multiarch strpbrk for POWER7.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-ppc64.c: New file:
	multiarch strpbrk for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: New file: strpbrk
	ifunc selector.
	* sysdeps/powerpc/powerpc64/power7/strpbrk.S: New file: optimited
	strpbrk for POWER7.

2014-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (asinh_test): Use ALL_RM_TEST.
	(atan_test): Likewise.
	(atanh_test_data): Use NO_TEST_INLINE for two tests.
	(atanh_test): Use ALL_RM_TEST.
	(atan2_test_data): Likewise.
	(cabs_test): Likewise.
	(cacosh_test): Likewise.
	(carg_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(cbrt_test): Likewise.
	(csqrt_test): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(pow10_test): Likewise.
	(exp2_test): Likewise.
	(hypot_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(lgamma_test): Likewise.
	(gamma_test): Likewise.
	(sincos_test): Likewise.
	(tanh_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* string/strcspn.c (strcspn): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcspn-power7
	and strcspn-ppc64 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add new strcspn optimized symbols.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-power7.S: New file:
	multiarch strcspn for POWER7.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-ppc64.c: New file:
	multiarch strcspn for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: New file: strcspn
	ifunc selector.
	* sysdeps/powerpc/powerpc64/power7/strcspn.S: New file: optimited
	strcspn for POWER7.

2014-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (generate_testfile): Expect only function
	name as argument to AUTO_TESTS_* and pass results for all rounding
	modes to parse_args.
	(parse_auto_input): Separate inputs of automatic tests from
	outputs before storing in %auto_tests.
	* math/libm-test.inc (acos_test_data): Update call to
	AUTO_TESTS_f_f.
	(acos_test): Use ALL_RM_TEST.
	(acos_tonearest_test_data): Remove.
	(acos_test_tonearest): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_test_downward): Likewise.
	(acos_upward_test_data): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test_data): Update call to AUTO_TESTS_f_f.
	(asin_test_data): Likewise.
	(asin_test): Use ALL_RM_TEST.
	(asin_tonearest_test_data): Remove.
	(asin_test_tonearest): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_downward_test_data): Likewise.
	(asin_test_downward): Likewise.
	(asin_upward_test_data): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test_data): Update call to AUTO_TESTS_f_f.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Update call to AUTO_TESTS_ff_f.
	(cabs_test_data): Update call to AUTO_TESTS_c_f.
	(carg_test_data): Likewise.
	(cbrt_test_data): Update call to AUTO_TESTS_f_f.
	(ccos_test_data): Update call to AUTO_TESTS_c_c.
	(ccosh_test_data): Likewise.
	(cexp_test_data): Likewise.
	(clog_test_data): Likewise.
	(clog10_test_data): Likewise.
	(cos_test_data): Update call to AUTO_TESTS_f_f.
	(cos_test): Use ALL_RM_TEST.
	(cos_tonearest_test_data): Remove.
	(cos_test_tonearest): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_test_downward): Likewise.
	(cos_upward_test_data): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test_data): Update call to AUTO_TESTS_f_f.
	(cosh_test): Use ALL_RM_TEST.
	(cosh_tonearest_test_data): Remove.
	(cosh_test_tonearest): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_upward_test_data): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test_data): Update call to AUTO_TESTS_cc_c.
	(csqrt_test_data): Update call to AUTO_TESTS_c_c.
	(ctan_test_data): Likewise.
	(ctan_test): Use ALL_RM_TEST.
	(ctan_tonearest_test_data): Remove.
	(ctan_test_tonearest): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test_data): Update call to AUTO_TESTS_c_c.
	(ctanh_test): Use ALL_RM_TEST.
	(ctanh_tonearest_test_data): Remove.
	(ctanh_test_tonearest): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_upward_test_data): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test_data): Update call to AUTO_TESTS_f_f.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_test): Use ALL_RM_TEST.
	(exp_tonearest_test_data): Remove.
	(exp_test_tonearest): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_test_downward): Likewise.
	(exp_upward_test_data): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test_data): Update call to AUTO_TESTS_f_f.
	(exp10_test): Use ALL_RM_TEST.
	(exp10_tonearest_test_data): Remove.
	(exp10_test_tonearest): Likewise.
	(exp10_towardzero_test_data): Likewise.
	(exp10_test_towardzero): Likewise.
	(exp10_downward_test_data): Likewise.
	(exp10_test_downward): Likewise.
	(exp10_upward_test_data): Likewise.
	(exp10_test_upward): Likewise.
	(exp2_test_data): Update call to AUTO_TESTS_f_f.
	(expm1_test_data): Likewise.
	(expm1_test): Use ALL_RM_TEST.
	(expm1_tonearest_test_data): Remove.
	(expm1_test_tonearest): Likewise.
	(expm1_towardzero_test_data): Likewise.
	(expm1_test_towardzero): Likewise.
	(expm1_downward_test_data): Likewise.
	(expm1_test_downward): Likewise.
	(expm1_upward_test_data): Likewise.
	(expm1_test_upward): Likewise.
	(fma_test_data): Update call to AUTO_TESTS_fff_f.
	(fma_test): Use ALL_RM_TEST.
	(fma_towardzero_test_data): Remove.
	(fma_test_towardzero): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_test_downward): Likewise.
	(fma_upward_test_data): Likewise.
	(fma_test_upward): Likewise.
	(hypot_test_data): Update call to AUTO_TESTS_ff_f.
	(j0_test_data): Update call to AUTO_TESTS_f_f.
	(j1_test_data): Likewise.
	(jn_test_data): Update call to AUTO_TESTS_if_f.
	(lgamma_test_data): Update call to AUTO_TESTS_f_f1.
	(log_test_data): Update call to AUTO_TESTS_f_f.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Update call to AUTO_TESTS_ff_f.
	(pow_tonearest_test_data): Likewise.
	(sin_test_data): Update call to AUTO_TESTS_f_f.
	(sin_test): Use ALL_RM_TEST.
	(sin_tonearest_test_data): Remove.
	(sin_test_tonearest): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_test_downward): Likewise.
	(sin_upward_test_data): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test_data): Update call to AUTO_TESTS_fFF_11.
	(sinh_test_data): Update call to AUTO_TESTS_f_f.
	(sinh_test): Use ALL_RM_TEST.
	(sinh_tonearest_test_data): Remove.
	(sinh_test_tonearest): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_upward_test_data): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test_data): Update call to AUTO_TESTS_f_f.
	(sqrt_test): Use ALL_RM_TEST.
	(sqrt_tonearest_test_data): Remove.
	(sqrt_test_tonearest): Likewise.
	(sqrt_towardzero_test_data): Likewise.
	(sqrt_test_towardzero): Likewise.
	(sqrt_downward_test_data): Likewise.
	(sqrt_test_downward): Likewise.
	(sqrt_upward_test_data): Likewise.
	(sqrt_test_upward): Likewise.
	(tan_test_data): Update call to AUTO_TESTS_f_f.
	(tan_test): Use ALL_RM_TEST.
	(tan_tonearest_test_data): Remove.
	(tan_test_tonearest): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_test_downward): Likewise.
	(tan_upward_test_data): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test_data): Update call to AUTO_TESTS_f_f.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Update call to AUTO_TESTS_if_f.
	(main): Do not call removed functions.

2014-03-19  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fdim_test): Use ALL_RM_TEST.
	(ldexp_test_data): Remove.
	(ldexp_test): Move to after scalbn_test.  Use ALL_RM_TEST with
	scalbn_test_data.
	(scalb_test): Use ALL_RM_TEST.

2014-03-19  Andreas Schwab  <schwab@suse.de>

	* nscd/nscd.service: Also invalidate netgroup cache on reload.

2014-03-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16649]
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_PREADV): Undefine.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_PWRITEV): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_PREADV): Undefine.
	(__ASSUME_PWRITEV): Likewise.

2014-03-18  Roland McGrath  <roland@hack.frob.com>

	* bits/mman-linux.h: Add comment about non-Linux use.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add comment about
	bits/mman-linux.h resting place.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h: Moved to ...
	* bits/mman-linux.h: ... here.

2014-03-18  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* conform/conformtest.pl: Add standard definition when calling C
	preprocessor on data files.
	(checknamespace): Remove unused variable.

2014-03-18  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle plus_oflow,
	minus_oflow, plus_uflow and minus_uflow in expected results.
	* math/libm-test.inc (scalbn_test_data): Add more tests of
	negative arguments.  Use plus_oflow, minus_oflow, plus_uflow and
	minus_uflow.
	(scalbn_test): Use ALL_RM_TEST.
	(scalbln_test_data): Add more tests of negative arguments.  Use
	plus_oflow, minus_oflow, plus_uflow and minus_uflow.
	(scalbln_test): Use ALL_RM_TEST.

2014-03-18  Roland McGrath  <roland@hack.frob.com>

	* scripts/abilist.awk: Ignore symbols marked with .hidden.

2014-03-18  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Remove
	inaccurate comment.

2014-03-18  Joseph Myers  <joseph@codesourcery.com>

	* Makerules [!subdir] (check-abi): Exit with error status if a
	test failed.

2014-03-17  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (nearbyint_test_data): Include all tests used
	for rint.  Include results for all rounding modes.
	(nearbyint_test): Use ALL_RM_TEST.
	(rint_test_data): Include all tests used for nearbyint.

2014-03-17  Will Newton  <will.newton@linaro.org>

	* nptl/sysdeps/pthread/pthread.h: Revert previous
	change.

	* sysdeps/generic/ldsodefs.h: Revert previous
	change.

	* libio/genops.c: Revert previous change.
	* libio/libioP.h: Likewise.
	* stdio-common/vfprintf.c: Likewise.

	* sysdeps/generic/math_private.h: Revert previous
	change.

	* sysdeps/generic/math_private.h: Check whether
	HAVE_RM_CTX is defined with #ifdef rather
	than #if.

	* argp/argp-fmtstream.h: Check whether
	__STRICT_ANSI__ is defined with #ifdef rather
	than #if.
	* argp/argp.h: Likewise.

	* libio/genops.c: Check whether
	_IO_JUMPS_OFFSET is defined with #ifdef rather
	than #if.
	* libio/libioP.h: Likewise.
	* stdio-common/vfprintf.c: Likewise.

	* sysdeps/generic/ldsodefs.h: Check whether
	HP_SMALL_TIMING_AVAIL is defined with #ifdef rather
	than #if.

	* nptl/sysdeps/pthread/pthread.h: Check
	__PTHREAD_MUTEX_HAVE_ELISION is defined before testing
	its value.

2014-03-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/iofdopen.c (_IO_new_fdopen): Seek to end only if
	setting O_APPEND.
	* libio/tst-ftell-active-handler.c (do_append_test): Add a
	test case.

	[BZ #16680]
	* libio/fileops.c (_IO_file_open): Seek to end of file but
	don't cache the offset.
	(get_file_offset): Remove function.
	(do_ftell): Use cached offset when available.
	* libio/iofdopen.c (_IO_new_fdopen): Seek to end of file but
	don't cache the offset.
	* libio/tst-ftell-active-handler.c (do_rewind_test): New test
	case.
	(do_one_test): Call it.
	(do_ftell_test): Fix up expected old offset for a+ mode.
	* libio/wfileops.c (do_ftell_wide): Used cached offset when
	available.

	* libio/tst-ftell-active-handler.c (do_ftell_test): Don't mix
	up test status with function return status.
	(do_write_test): Likewise.
	(do_append_test): Likewise.

	* nptl/sysdeps/pthread/bits/libc-lockP.h [defined NOT_IN_libc
	&& !defined IS_IN_libpthread && __LT_SPINNOCK_INIT != 0]:
	Remove.

2014-03-17  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle results specified for
	each rounding mode separately.
	* math/libm-test.inc (lrint_test_data): Merge in per-rounding-mode
	tests and results from lrint_tonearest_test_data,
	lrint_towardzero_test_data, lrint_downward_test_data and
	lrint_upward_test_data.
	(lrint_test): Use ALL_RM_TEST.
	(lrint_tonearest_test_data): Remove.
	(lrint_test_tonearest): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_upward_test_data): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test_data): Merge in per-rounding-mode tests and results
	from llrint_tonearest_test_data, llrint_towardzero_test_data,
	llrint_downward_test_data and llrint_upward_test_data.
	(llrint_test): Use ALL_RM_TEST.
	(llrint_tonearest_test_data): Remove.
	(llrint_test_tonearest): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_upward_test_data): Likewise.
	(llrint_test_upward): Likewise.
	(rint_test_data): Merge in per-rounding-mode tests and results
	from rint_tonearest_test_data, rint_towardzero_test_data,
	rint_downward_test_data and rint_upward_test_data.  Add
	per-rounding-mode results for tests not in those arrays.
	(rint_test): Use ALL_RM_TEST.
	(rint_tonearest_test_data): Remove.
	(rint_test_tonearest): Likewise.
	(rint_towardzero_test_data): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_test_downward): Likewise.
	(rint_upward_test_data): Likewise.
	(rint_test_upward): Likewise.
	(main): Don't call removed functions.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* csu/Makefile ($(objpfx)version-info.h): Remove linux-specific
	"Compiled on ..." crapola.  It is anti-useful.

2014-03-14  Joseph Myers  <joseph@codesourcery.com>

	* scripts/evaluate-test.sh: Handle fourth argument to determine
	whether test run should stop on failure.
	* Makeconfig (stop-on-test-failure): New variable.
	(evaluate-test): Pass fourth argument to evaluate-test.sh based on
	$(stop-on-test-failure).
	* Makefile (tests): Give a summary of results from testing and
	exit with failure status if they include an ERROR or FAIL.
	(xtests): Likewise.
	* manual/install.texi (Configuring and compiling): Mention
	stop-on-test-failure=y.
	* INSTALL: Regenerated.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* scripts/versionlist.awk: New file.
	* Makerules [$(build-shared) = yes]
	(postclean-generated): Add Versions.def, not Versions.def.v and
	Versions.def.v.i.
	($(common-objpfx)Versions.def.v.i): Target removed.
	($(common-objpfx)Versions.def): New target.
	($(common-objpfx)Versions.all): Depend on that rather that
	$(common-objpfx)Versions.def.v.
	* Versions.def: File removed.

	* Makeconfig (+gccwarn): Add -Wundef.
	* include/errno.h [IS_IN_rtld] [!RTLD_PRIVATE_ERRNO]: #error to catch
	a dl-sysdep.h breaking its contract.
	[!IS_IN_rtld] (RTLD_PRIVATE_ERRNO): Define it to 0.
	* include/stackinfo.h: New file.
	* nptl/sysdeps/i386/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/powerpc/tls.h (TLS_TCB_AT_TP): New macro.
	* nptl/sysdeps/s390/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/sh/tls.h (TLS_TCB_AT_TP): New macro.
	* nptl/sysdeps/sparc/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/x86_64/tls.h (TLS_DTV_AT_TP): New macro.
	* sysdeps/aarch64/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/alpha/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/arm/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/ia64/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/m68k/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/mach/hurd/i386/tls.h (TLS_DTV_AT_TP): New macro.
	* sysdeps/microblaze/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/mips/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/tile/nptl/tls.h (TLS_TCB_AT_TP): New macro.

2014-03-14  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16707]
	* sysdeps/powerpc/powerpc64/fpu/s_roundl.S: Remove wrong
	implementation.
	* math/libm-test.inc (round_test_data): Add more tests.

	[BZ #16706]
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintl.S: Remove wrong
	implementation.
	* math/libm-test.inc (nearbyint_test_data): Add more tests.

	[BZ #16701]
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Remove wrong
	implementation.
	* math/libm-test.inc (ceil_test_data): Add more tests.

	* math/libm-test.inc (trunc_test_data): Add more tests related to
	BZ#16414.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Test TLS_TCB_AT_TP
	with #if rather than #ifdef.
	* nptl/sysdeps/pthread/createthread.c (create_thread): Likewise.

2014-03-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/configure.ac: Check AVX-512 assembler support
	first.  Disable AVX-512 GCC support if assembler doesn't support
	it.
	* sysdeps/x86_64/configure: Regenerated.

2014-03-13  Carlos O'Donell  <carlos@redhat.com>

	* nptl/pthread_attr_setstack.c (__pthread_attr_setstack)
	[!_STACK_GROWS_DOWN]: Don't add stacksize to stackaddr.
	(__old_pthread_attr_setstack): Likewise.
	* nptl/pthread_attr_getstack.c (__pthread_attr_getstack)
	[!_STACK_GROWS_DOWN]: Likewise.

2014-03-13  Mike Frysinger  <vapier@gentoo.org>

	* config.make.in (have-bash2): Delete.
	* configure.ac (libc_cv_have_bash2): Delete.
	* configure: Regenerate.
	* elf/Makefile (common-ldd-rewrite): Rename to ...
	(ldd-rewrite): ... this.  Move bash-ldd-rewrite content to end.
	(sh-ldd-rewrite): Delete.
	(bash-ldd-rewrite): Delete.
	(have-bash2): Delete checks.
	[ldd-rewrite-script]: Change $(ldd-shell)-ldd-rewrite to
	ldd-rewrite.

	* config.make.in (have-ksh): Delete.
	(KSH): Delete.
	* configure.ac (libc_cv_have_ksh): Delete.
	* configure: Regenerate.

	* elf/Makefile: Delete $(have-ksh) check.
	($(objpfx)sotruss): Change KSH to BASH.
	* elf/sotruss.ksh: Rename to ...
	* elf/sotruss.sh: ... this.  Change @KSH@ to @BASH@.  Change
	function style to match POSIX.  Drop ksh vim mode setting.

	* manual/time.texi (Specifying the Time Zone with TZ): Change
	Tuesday to Thursday.

	* debug/tst-longjmp_chk2.c: Update header comment.
	(stackoverflow_handler): Add comment.  Call assert on pass value.

2014-03-13  Igor Zamyatin  <igor.zamyatin@intel.com>

	[BZ #16194]
	* config.h.in (HAVE_AVX512_SUPPORT): New #undef.
	(HAVE_AVX512_ASM_SUPPORT): Likewise.
	* sysdeps/x86_64/bits/link.h (La_x86_64_zmm): New.
	(La_x86_64_vector): Add zmm.
	* sysdeps/x86_64/Makefile (tests): Add tst-audit10.
	(modules-names): Add tst-auditmod10a and tst-auditmod10b.
	($(objpfx)tst-audit10): New target.
	($(objpfx)tst-audit10.out): Likewise.
	(tst-audit10-ENV): New.
	(AVX512-CFLAGS): Likewise.
	(CFLAGS-tst-audit10.c): Likewise.
	(CFLAGS-tst-auditmod10a.c): Likewise.
	(CFLAGS-tst-auditmod10b.c): Likewise.
	* sysdeps/x86_64/configure.ac: Set config-cflags-avx512,
	HAVE_AVX512_SUPPORT and HAVE_AVX512_ASM_SUPPORT.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Add
	AVX-512 zmm register support.
	(_dl_x86_64_save_sse): Likewise.
	(_dl_x86_64_restore_sse): Likewise.
	* sysdeps/x86_64/dl-trampoline.h: Updated to support different
	size vector registers.
	* sysdeps/x86_64/link-defines.sym (YMM_SIZE): New.
	(ZMM_SIZE): Likewise.
	* sysdeps/x86_64/tst-audit10.c: New file.
	* sysdeps/x86_64/tst-auditmod10a.c: Likewise.
	* sysdeps/x86_64/tst-auditmod10b.c: Likewise.

2014-03-13  Roland McGrath  <roland@hack.frob.com>

	* configure.ac (HAVE_EHDR_START): New check.
	* configure: Regenerated.
	* config.h.in (HAVE_EHDR_START): New #undef.
	* elf/rtld.c (dl_main) [HAVE_EHDR_START]: Use __ehdr_start rather than
	assuming the lowest-addressed segment maps the start of the file.

2014-03-13  Joseph Myers  <joseph@codesourcery.com>

	* INSTALL: Regenerated.

2014-03-13  Will Newton  <will.newton@linaro.org>

	* manual/setjmp.texi (System V contexts): Improve
	clarity and grammar of documentation.

2014-03-12  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16381]
	* elf/Makefile (tests): Add tst-pie2.
	(tests-pie): Add tst-pie2.
	* elf/tst-pie2.c: New file.
	* elf/dl-load.c (_dl_map_object_from_fd): Assert correct l_type
	for ET_EXEC.
	* elf/rtld.c (map_doit): Load executable as lt_executable.
	(dl_main): Likewise.

2014-03-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16642]
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_PSELECT): Undefine.

2014-03-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16689]
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-ppc32.S
	(__bzero_ppc): Call memset@local instead of __memset_ppc@local for
	static build.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: Build IFUNC
	selector for static builds.

2014-03-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16695]
	* nscd/netgroupcache.c (addgetnetgrentX): Factor in space for
	key in the buffer.

2014-03-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strspn.c (strspn): Build
	IFUNC selector for static builds.

2014-03-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/math_private.h [__mips_hard_float]
	(libc_feresetround_ctx): Define to libc_feupdateenv_mips_ctx not
	libc_feresetround_mips_ctx.
	[__mips_hard_float] (libc_feresetroundf_ctx): Likewise.
	[__mips_hard_float] (libc_feresetroundl_ctx): Likewise.
	[__mips_hard_float] (libc_feresetround_mips_ctx): Remove.

	[BZ #16677]
	* math/s_nextafter.c (__nextafter): Do not return value from
	overflowing computation.
	* sysdeps/i386/fpu/s_nextafterl.c (__nextafterl): Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c (__nextafterf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c (__nextafterl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl):
	Likewise.
	* sysdeps/m68k/m680x0/fpu/s_nextafterl.c (__nextafterl): Likewise.
	* math/libm-test.inc (nextafter_test): Use ALL_RM_TEST.

2014-03-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/setjmp.S: Use sfi_breg on stores of mangled registers.
	* sysdeps/arm/__longjmp.S: Use sfi_breg on loads of mangled registers.
	Move sfi_sp use from the load-multiple (that no longer sets sp) to
	the new mov targetting sp.

2014-03-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16683]
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S (__bzero_ppc):
	Define it for static builds as well.
	(NO_BZERO_IMPL): Likewise.

2014-03-11  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strspn.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strspn.c: New file:
	multiarch strspn for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strspn
	multiarch optimizations
	* string/strspn.c (strspn): Using macro to redefine symbol name.

2014-03-10  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncat.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strncat.c: New file:
	multiarch strncat for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncat-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncat
	multiarch optimizations

2014-03-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16639]
	* nscd/nscd.service: Make service type forking.

2014-03-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5+/fpu/s_modf.c (__modf): Fix to return correct
	sign in non default rounding modes.
	* sysdeps/powerpc/power5+/fpu/s_modff.c (__modff): Likewise.

2014-03-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (ALL_RM_TEST): New macro.
	(ceil_test): Use ALL_RM_TEST.
	(cimag_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Likewise.
	(cproj_test): Likewise.
	(creal_test): Likewise.
	(fabs_test): Likewise.
	(floor_test): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(finite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(logb_test): Likewise.
	(logb_downward_test_data): Remove.
	(logb_test_downward): Likewise.
	(lround_test): Use ALL_RM_TEST.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nexttoward_test): Likewise.
	(remainder_test): Likewise.
	(drem_test): Likewise.
	(remainder_tonearest_test_data): Likewise.
	(remainder_test_tonearest): Likewise.
	(drem_test_tonearest): Likewise.
	(remainder_towardzero_test_data): Likewise.
	(remainder_test_towardzero): Likewise.
	(drem_test_towardzero): Likewise.
	(remainder_downward_test_data): Likewise.
	(remainder_test_downward): Likewise.
	(drem_test_downward): Likewise.
	(remainder_upward_test_data): Likewise.
	(remainder_test_upward): Likewise.
	(drem_test_upward): Likewise.
	(remquo_test): Use ALL_RM_TEST.  Remove comment about x.
	(round_test): Use ALL_RM_TEST.
	(signbit_test): Likewise.
	(trunc_test): Likewise.
	(significand_test): Likewise.
	(main): Don't call removed functions.

2014-03-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16674]
	* bits/siginfo.h (ILL_ILLOPC): Condition on [__USE_XOPEN_EXTENDED
	|| __USE_XOPEN2K8].
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h (ILL_ILLOPC):
	Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h (ILL_ILLOPC):
	Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(ILL_BADIADDR): Likewise.
	(ILL_BREAK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(FPE_DECOVF): Likewise.
	(FPE_DECDIV): Likewise.
	(FPE_DECERR): Likewise.
	(FPE_INVASC): Likewise.
	(FPE_INVDEC): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(SEGV_PSTKOVF): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(TRAP_BRANCH): Likewise.
	(TRAP_HWBKPT): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/tile/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(ILL_DBLFLT): Likewise.
	(ILL_HARDWALL): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* conform/Makefile (test-xfail-POSIX/signal.h/conform): Remove.
	(test-xfail-POSIX/sys/wait.h/conform): Likewise.

	[BZ #16670]
	* posix/sched.h [!__USE_XOPEN2K] (__need_time_t): Don't define
	before #include of <time.h>.
	[!__USE_XOPEN2K] (__need_timespec): Likewise.
	* conform/Makefile (test-xfail-POSIX/sched.h/conform): Remove.
	(test-xfail-UNIX98/sched.h/conform): Likewise.

2014-03-07  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept): Detect and
	error absence of trapping exception support.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Likewise.

2014-03-07  Joseph Myers  <joseph@codesourcery.com>

	* catgets/Makefile (tests-special): Add $(objpfx)sample.SJIS.cat.
	($(objpfx)sample.SJIS.cat): Use $(evaluate-test).
	* timezone/Makefile (testdata): Move definition above include of
	Rules.
	(test-zones): New variable.
	(tests-special): Add zone files.
	(build-testdata): Use $(evaluate-test).

	* elf/Makefile (tests-special): Rename tests to end with .out.
	($(objpfx)noload-mem): Likewise.
	($(objpfx)tst-leaks1-mem): Likewise.
	($(objpfx)tst-leaks1-static-mem.out): Likewise.
	* iconv/Makefile (xtests-special): Change test-iconvconfig to
	$(objpfx)test-iconvconfig.out.
	(test-iconvconfig): Change to $(objpfx)test-iconvconfig.out.  Use
	set -e inside subshell and redirect output to file.
	* iconvdata/Makefile (generated): Rename tests to end with .out.
	Correct type.
	(tests-special): Rename tests to end with .out.
	($(objpfx)mtrace-tst-loading): Likewise.
	* intl/Makefile (generated): Likewise.
	(tests-special): Likewise.
	($(objpfx)mtrace-tst-gettext): Likewise.
	* misc/Makefile (generated): Likewise.
	(tests-special): Likewise.
	($(objpfx)tst-error1-mem): Likewise.
	* nptl/Makefile (tests-special): Likewise.
	($(objpfx)tst-stack3-mem): Likewise.
	(generated): Likewise.
	* posix/Makefile (generated): Likewise.
	(tests-special): Likewise.
	(xtests-special): Likewise.
	($(objpfx)tst-fnmatch-mem): Likewise.
	($(objpfx)bug-regex2-mem): Likewise.
	($(objpfx)bug-regex14-mem): Likewise.
	($(objpfx)bug-regex21-mem): Likewise.
	($(objpfx)bug-regex31-mem): Likewise.
	($(objpfx)tst-vfork3-mem): Likewise.
	($(objpfx)tst-rxspencer-no-utf8-mem): Likewise.
	($(objpfx)tst-pcre-mem): Likewise.
	($(objpfx)tst-boost-mem): Likewise.
	($(objpfx)bug-ga2-mem): Likewise.
	($(objpfx)bug-glob2-mem): Likewise.
	* resolv/Makefile (generate): Likewise.
	(tests-special): Likewise.
	(xtests-special): Likewise.
	(generated): Likewise.
	($(objpfx)mtrace-tst-leaks): Likewise.
	($(objpfx)mtrace-tst-leaks2): Likewise.

	* scripts/merge-test-results.sh: New file.
	* Makefile (tests-special-notdir): New variable.
	(tests): Run merge-test-results.sh.
	(xtests): Likewise.
	* Rules (tests-special-notdir): New variable.
	(xtests-special-notdir): Likewise.
	(tests): Run merge-test-results.sh
	(xtests): Likewise.

	* Makeconfig (test-xfail-name): New variable.
	(evaluate-test): Use $(test-xfail-name) instead of $(@F:.out=) to
	compute variable name for expected failures.
	* conform/Makefile (conformtest-headers-data): New variable.
	(conformtest-standards): Likewise.
	(conformtest-headers-ISO): Likewise.
	(conformtest-headers-ISO99): Likewise.
	(conformtest-headers-ISO11): Likewise.
	(conformtest-headers-POSIX): Likewise.
	(conformtest-headers-XPG3): Likewise.
	(conformtest-headers-XPG4): Likewise.
	(conformtest-headers-UNIX98): Likewise.
	(conformtest-headers-XOPEN2K): Likewise.
	(conformtest-headers-POSIX2008): Likewise.
	(conformtest-headers-XOPEN2K8): Likewise.
	(conformtest-header-list-base): Likewise.
	(conformtest-header-list-tests): Likewise.
	(conformtest-header-base): Likewise.
	(conformtest-header-tests): Likewise.
	(tests-special): Add $(conformtest-header-list-tests).  If
	[$(fast-check) && !$(cross-compiling)], add
	$(conformtest-header-tests) instead of
	$(objpfx)run-conformtest.out.
	(generated): Add $(conformtest-header-list-base).  If
	[$(fast-check) && !$(cross-compiling)], add
	$(conformtest-header-base).  Remove previous setting.
	($(conformtest-header-list-tests)): New target.
	(test-xfail-run-conformtest): Remove variable.
	($(objpfx)run-conformtest.out): Remove target.
	(test-xfail-ISO11/complex.h/conform): New variable.
	(test-xfail-ISO11/stdalign.h/conform): Likewise.
	(test-xfail-ISO11/stdnoreturn.h/conform): Likewise.
	(test-xfail-XPG3/varargs.h/conform): Likewise.
	(test-xfail-XPG4/varargs.h/conform): Likewise.
	(test-xfail-UNIX98/varargs.h/conform): Likewise.
	(test-xfail-XPG4/ndbm.h/conform): Likewise.
	(test-xfail-UNIX98/ndbm.h/conform): Likewise.
	(test-xfail-XOPEN2K/ndbm.h/conform): Likewise.
	(test-xfail-XOPEN2K8/ndbm.h/conform): Likewise.
	(test-xfail-XPG3/fcntl.h/conform): Likewise.
	(test-xfail-XPG3/ftw.h/conform): Likewise.
	(test-xfail-XPG3/grp.h/conform): Likewise.
	(test-xfail-XPG3/langinfo.h/conform): Likewise.
	(test-xfail-XPG3/limits.h/conform): Likewise.
	(test-xfail-XPG3/pwd.h/conform): Likewise.
	(test-xfail-XPG3/search.h/conform): Likewise.
	(test-xfail-XPG3/signal.h/conform): Likewise.
	(test-xfail-XPG3/stdio.h/conform): Likewise.
	(test-xfail-XPG3/stdlib.h/conform): Likewise.
	(test-xfail-XPG3/string.h/conform): Likewise.
	(test-xfail-XPG3/sys/ipc.h/conform): Likewise.
	(test-xfail-XPG3/sys/msg.h/conform): Likewise.
	(test-xfail-XPG3/sys/sem.h/conform): Likewise.
	(test-xfail-XPG3/sys/shm.h/conform): Likewise.
	(test-xfail-XPG3/sys/stat.h/conform): Likewise.
	(test-xfail-XPG3/sys/types.h/conform): Likewise.
	(test-xfail-XPG3/sys/wait.h/conform): Likewise.
	(test-xfail-XPG3/termios.h/conform): Likewise.
	(test-xfail-XPG3/time.h/conform): Likewise.
	(test-xfail-XPG3/unistd.h/conform): Likewise.
	(test-xfail-XPG4/arpa/inet.h/conform): Likewise.
	(test-xfail-XPG4/fcntl.h/conform): Likewise.
	(test-xfail-XPG4/langinfo.h/conform): Likewise.
	(test-xfail-XPG4/netdb.h/conform): Likewise.
	(test-xfail-XPG4/netinet/in.h/conform): Likewise.
	(test-xfail-XPG4/signal.h/conform): Likewise.
	(test-xfail-XPG4/stdio.h/conform): Likewise.
	(test-xfail-XPG4/stdlib.h/conform): Likewise.
	(test-xfail-XPG4/stropts.h/conform): Likewise.
	(test-xfail-XPG4/sys/ipc.h/conform): Likewise.
	(test-xfail-XPG4/sys/msg.h/conform): Likewise.
	(test-xfail-XPG4/sys/sem.h/conform): Likewise.
	(test-xfail-XPG4/sys/shm.h/conform): Likewise.
	(test-xfail-XPG4/sys/socket.h/conform): Likewise.
	(test-xfail-XPG4/sys/stat.h/conform): Likewise.
	(test-xfail-XPG4/sys/time.h/conform): Likewise.
	(test-xfail-XPG4/sys/types.h/conform): Likewise.
	(test-xfail-XPG4/sys/wait.h/conform): Likewise.
	(test-xfail-XPG4/termios.h/conform): Likewise.
	(test-xfail-XPG4/ucontext.h/conform): Likewise.
	(test-xfail-XPG4/unistd.h/conform): Likewise.
	(test-xfail-XPG4/utmpx.h/conform): Likewise.
	(test-xfail-POSIX/sched.h/conform): Likewise.
	(test-xfail-POSIX/signal.h/conform): Likewise.
	(test-xfail-POSIX/sys/wait.h/conform): Likewise.
	(test-xfail-POSIX/tar.h/conform): Likewise.
	(test-xfail-UNIX98/arpa/inet.h/conform): Likewise.
	(test-xfail-UNIX98/fcntl.h/conform): Likewise.
	(test-xfail-UNIX98/langinfo.h/conform): Likewise.
	(test-xfail-UNIX98/netdb.h/conform): Likewise.
	(test-xfail-UNIX98/netinet/in.h/conform): Likewise.
	(test-xfail-UNIX98/sched.h/conform): Likewise.
	(test-xfail-UNIX98/signal.h/conform): Likewise.
	(test-xfail-UNIX98/stdio.h/conform): Likewise.
	(test-xfail-UNIX98/stdlib.h/conform): Likewise.
	(test-xfail-UNIX98/stropts.h/conform): Likewise.
	(test-xfail-UNIX98/sys/ipc.h/conform): Likewise.
	(test-xfail-UNIX98/sys/msg.h/conform): Likewise.
	(test-xfail-UNIX98/sys/sem.h/conform): Likewise.
	(test-xfail-UNIX98/sys/shm.h/conform): Likewise.
	(test-xfail-UNIX98/sys/socket.h/conform): Likewise.
	(test-xfail-UNIX98/sys/time.h/conform): Likewise.
	(test-xfail-UNIX98/sys/wait.h/conform): Likewise.
	(test-xfail-UNIX98/ucontext.h/conform): Likewise.
	(test-xfail-UNIX98/unistd.h/conform): Likewise.
	(test-xfail-UNIX98/utmpx.h/conform): Likewise.
	(test-xfail-XOPEN2K/aio.h/conform): Likewise.
	(test-xfail-XOPEN2K/arpa/inet.h/conform): Likewise.
	(test-xfail-XOPEN2K/fcntl.h/conform): Likewise.
	(test-xfail-XOPEN2K/langinfo.h/conform): Likewise.
	(test-xfail-XOPEN2K/math.h/conform): Likewise.
	(test-xfail-XOPEN2K/mqueue.h/conform): Likewise.
	(test-xfail-XOPEN2K/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K/netinet/in.h/conform): Likewise.
	(test-xfail-XOPEN2K/semaphore.h/conform): Likewise.
	(test-xfail-XOPEN2K/signal.h/conform): Likewise.
	(test-xfail-XOPEN2K/stdarg.h/conform): Likewise.
	(test-xfail-XOPEN2K/stdio.h/conform): Likewise.
	(test-xfail-XOPEN2K/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K/termios.h/conform): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/conform): Likewise.
	(test-xfail-XOPEN2K/ucontext.h/conform): Likewise.
	(test-xfail-XOPEN2K/utmpx.h/conform): Likewise.
	(test-xfail-POSIX2008/arpa/inet.h/conform): Likewise.
	(test-xfail-POSIX2008/fcntl.h/conform): Likewise.
	(test-xfail-POSIX2008/netdb.h/conform): Likewise.
	(test-xfail-POSIX2008/netinet/in.h/conform): Likewise.
	(test-xfail-POSIX2008/signal.h/conform): Likewise.
	(test-xfail-POSIX2008/stropts.h/conform): Likewise.
	(test-xfail-POSIX2008/sys/socket.h/conform): Likewise.
	(test-xfail-POSIX2008/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K8/arpa/inet.h/conform): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/conform): Likewise.
	(test-xfail-XOPEN2K8/limits.h/conform): Likewise.
	(test-xfail-XOPEN2K8/math.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netinet/in.h/conform): Likewise.
	(test-xfail-XOPEN2K8/signal.h/conform): Likewise.
	(test-xfail-XOPEN2K8/stdio.h/conform): Likewise.
	(test-xfail-XOPEN2K8/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/select.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/time.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K8/termios.h/conform): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/conform): Likewise.
	(test-xfail-XOPEN2K8/utmpx.h/conform): Likewise.
	(conformtest-cc-flags): Likewise.
	($(conformtest-header-tests): New target.
	* conform/check-header-lists.sh: New file.
	* conform/run-conformtest.sh: Remove.

	* conform/conformtest.pl: Allow ' and \ in values given for
	constants.
	* conform/data/semaphore.h-data [POSIX] (fcntl.h): Allow header
	inclusion.
	[POSIX] (sys/types.h): Likewise.
	[POSIX2008 || XOPEN2K8] (sys/types.h): Don't allow header
	inclusion.
	[POSIX || UNIX98 || XOPEN2K] (time.h): Don't allow header
	inclusion.
	* conform/data/signal.h-data (SIGIO): Remove expectation.
	[XPG3] (SIGBUS): Do not expect.
	[POSIX || XPG3] (SIGPOLL): Likewise.
	[POSIX || XPG3] (SIGPROF): Likewise.
	[POSIX || XPG3] (SIGSYS): Likewise.
	[XPG3] (SIGTRAP): Likewise.
	[POSIX || XPG3] (SIGURG): Likewise.
	[POSIX || XPG3] (SIGVTALRM): Likewise.
	[POSIX || XPG3] (SIGXCPU): Likewise.
	[POSIX || XPG3] (SIGXFSZ): Likewise.
	[POSIX] (SA_SIGINFO): Expect.
	[XPG3] (siginfo_t): Do not expect type or contents.
	[POSIX] (si_pid): Do not expect element.
	[POSIX] (si_uid): Likewise.
	[POSIX] (si_addr): Likewise.
	[POSIX] (si_status): Likewise.
	[POSIX] (si_band): Likewise.
	[XPG4] (si_value): Likewise.
	[POSIX || XPG3] (ILL_ILLOPC): Do not expect.
	[POSIX || XPG3] (ILL_ILLOPN): Likewise.
	[POSIX || XPG3] (ILL_ILLADR): Likewise.
	[POSIX || XPG3] (ILL_ILLTRP): Likewise.
	[POSIX || XPG3] (ILL_PRVOPC): Likewise.
	[POSIX || XPG3] (ILL_PRVREG): Likewise.
	[POSIX || XPG3] (ILL_COPROC): Likewise.
	[POSIX || XPG3] (ILL_BADSTK): Likewise.
	[POSIX || XPG3] (FPE_INTDIV): Likewise.
	[POSIX || XPG3] (FPE_INTOVF): Likewise.
	[POSIX || XPG3] (FPE_FLTDIV): Likewise.
	[POSIX || XPG3] (FPE_FLTOVF): Likewise.
	[POSIX || XPG3] (FPE_FLTUND): Likewise.
	[POSIX || XPG3] (FPE_FLTRES): Likewise.
	[POSIX || XPG3] (FPE_FLTINV): Likewise.
	[POSIX || XPG3] (FPE_FLTSUB): Likewise.
	[POSIX || XPG3] (SEGV_MAPERR): Likewise.
	[POSIX || XPG3] (SEGV_ACCERR): Likewise.
	[POSIX || XPG3] (BUS_ADRALN): Likewise.
	[POSIX || XPG3] (BUS_ADRERR): Likewise.
	[POSIX || XPG3] (BUS_OBJERR): Likewise.
	[POSIX || XPG3] (CLD_EXITED): Likewise.
	[POSIX || XPG3] (CLD_KILLED): Likewise.
	[POSIX || XPG3] (CLD_DUMPED): Likewise.
	[POSIX || XPG3] (CLD_TRAPPED): Likewise.
	[POSIX || XPG3] (CLD_STOPPED): Likewise.
	[POSIX || XPG3] (CLD_CONTINUED): Likewise.
	[POSIX || XPG3] (POLL_IN): Likewise.
	[POSIX || XPG3] (POLL_OUT): Likewise.
	[POSIX || XPG3] (POLL_MSG): Likewise.
	[POSIX || XPG3] (POLL_ERR): Likewise.
	[POSIX || XPG3] (POLL_PRI): Likewise.
	[POSIX || XPG3] (POLL_HUP): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_BRKPT): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_TRACE): Likewise.
	(SIG*): Do not allow.
	[XPG3] (si_*): Likewise.
	[XPG3] (SI_*): Likewise.
	[XPG3 || XPG4] (sigev_*): Likewise.
	[XPG3 || XPG4] (SIGEV_*): Likewise.
	[XPG3 || XPG4] (sival_*): Likewise.
	[POSIX || XPG3 || XPG4] (uc_*): Likewise.
	[POSIX || XPG3] (BUS_*): Likewise.
	[POSIX || XPG3] (CLD_*): Likewise.
	[POSIX || XPG3] (FPE_*): Likewise.
	[POSIX || XPG3] (ILL_*): Likewise.
	[POSIX || XPG3] (POLL_*): Likewise.
	[POSIX || XPG3] (SEGV_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (SS_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (SV_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (ss_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (sv_*): Likewise.
	* conform/data/tar.h-data (TMAGLEN): Use macro-int-constant.
	Specify type and value.
	(TVERSLEN): Likewise.
	(REGTYPE): Likewise.
	(AREGTYPE): Likewise.
	(LNKTYPE): Likewise.
	(SYMTYPE): Likewise.
	(CHRTYPE): Likewise.
	(BLKTYPE): Likewise.
	(DIRTYPE): Likewise.
	(FIFOTYPE): Likewise.
	(CONTTYPE): Likewise.
	(TSUID): Likewise.
	(TSGID): Likewise.
	(TSVTX): Likewise.
	(TUREAD): Likewise.
	(TUWRITE): Likewise.
	(TUEXEC): Likewise.
	(TGREAD): Likewise.
	(TGWRITE): Likewise.
	(TGEXEC): Likewise.
	(TOREAD): Likewise.
	(TOWRITE): Likewise.
	(TOEXEC): Likewise.
	[POSIX] (TSVTX): Expect constant.

2014-03-06  Joseph Myers  <joseph@codesourcery.com>

	* Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(tests): Depend on $(tests-special).
	* Makerules (check-abi-list): New variable.
	(check-abi): Depend on $(check-abi-list).
	[$(subdir) = elf] (tests-special): Add
	$(objpfx)check-abi-libc.out.
	[$(build-shared) = yes && subdir] (tests-special): Add
	$(check-abi-list).
	[$(build-shared) = yes && subdir] (tests): Do not depend on
	check-abi.
	* Rules (tests): Depend on $(tests-special).
	(xtests): Depend on $(xtests-special).
	* catgets/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* conform/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* elf/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* grp/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* iconv/Makefile (xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* iconvdata/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* intl/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.  Also add
	$(objpfx)tst-gettext.out.
	* io/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* libio/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* malloc/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* misc/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* nptl/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* nptl_db/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* posix/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* resolv/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* stdio-common/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(do-tst-unbputc): Remove target.
	(do-tst-printf): Likewise.
	* stdlib/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* string/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* sysdeps/x86/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.

	* conform/data/netinet/tcp.h-data [POSIX2008 || XOPEN2K8]: Enable
	whole file.
	* conform/data/sys/timeb.h-data [POSIX2008 || XOPEN2K8]: Disable
	whole file.
	* conform/data/sys/uio.h-data [POSIX2008]: Likewise.
	* conform/data/ucontext.h-data [POSIX2008 || XOPEN2K8]: Likewise.

	* conform/data/aio.h-data [XPG3 || XPG4]: Disable whole file.
	* conform/data/arpa/inet.h-data [XPG3]: Likewise.
	* conform/data/dlfcn.h-data [XPG3 || XPG4]: Likewise.
	* conform/data/fmtmsg.h-data [XPG3]: Likewise.
	* conform/data/libgen.h-data [XPG3]: Likewise.
	* conform/data/mqueue.h-data [XPG3 || XPG4]: Likewise.
	* conform/data/ndbm.h-data [XPG3]: Likewise.
	* conform/data/net/if.h-data [XPG3 || XPG4 || UNIX98]: Likewise.
	* conform/data/netdb.h-data [XPG3]: Likewise.
	* conform/data/netinet/in.h-data [XPG3]: Likewise.
	* conform/data/poll.h-data [XPG3]: Likewise.
	* conform/data/spawn.h-data [XPG3 || XPG4 || UNIX98]: Likewise.
	* conform/data/strings.h-data [XPG3]: Likewise.
	* conform/data/stropts.h-data [XPG3]: Likewise.
	* conform/data/sys/mman.h-data [XPG3]: Likewise.
	* conform/data/sys/resource.h-data [XPG3]: Likewise.
	* conform/data/sys/select.h-data [XPG3 || XPG4 || UNIX98]:
	Likewise.
	* conform/data/sys/statvfs.h-data [XPG3]: Likewise.
	* conform/data/sys/time.h-data [XPG3]: Likewise.
	* conform/data/sys/timeb.h-data [XPG3]: Likewise.
	* conform/data/sys/uio.h-data [XPG3]: Likewise.
	* conform/data/sys/un.h-data [XPG3]: Likewise.
	* conform/data/syslog.h-data [XPG3]: Likewise.
	* conform/data/ucontext.h-data [XPG3]: Likewise.
	* conform/data/utmpx.h-data [XPG3]: Likewise.
	* conform/data/varargs.h-data [UNIX98]: Enable file.

	* manual/Makefile (INSTALL_INFO): Remove variable setting.

	* math/libm-test.inc (struct test_f_f_data): Move expected results
	into structure for each rounding mode.
	(struct test_ff_f_data): Likewise.
	(struct test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Likewise.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Likewise.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_fFF_11_data): Likewise.
	(RM_): New macro.
	(RM_FE_DOWNWARD): Likewise.
	(RM_FE_TONEAREST): Likewise.
	(RM_FE_TOWARDZERO): Likewise.
	(RM_FE_UPWARD): Likewise.
	(RUN_TEST_LOOP_f_f): Update references to expected results.
	(RUN_TEST_LOOP_2_f): Likewise.
	(RUN_TEST_LOOP_fff_f): Likewise.
	(RUN_TEST_LOOP_c_f): Likewise.
	(RUN_TEST_LOOP_f_f1): Likewise.
	(RUN_TEST_LOOP_fF_f1): Likewise.
	(RUN_TEST_LOOP_fI_f1): Likewise.
	(RUN_TEST_LOOP_ffI_f1): Likewise.
	(RUN_TEST_LOOP_c_c): Likewise.
	(RUN_TEST_LOOP_cc_c): Likewise.
	(RUN_TEST_LOOP_f_i): Likewise.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(RUN_TEST_LOOP_ff_i_tg): Likewise.
	(RUN_TEST_LOOP_f_b): Likewise.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(RUN_TEST_LOOP_f_l): Likewise.
	(RUN_TEST_LOOP_f_L): Likewise.
	(RUN_TEST_LOOP_fFF_11): Likewise.
	* math/gen-libm-test.pl (parse_args): Output four copies of
	expected results for each test.

	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_UTIMES): Remove.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_UTIMES): Likewise.

	* math/gen-auto-libm-tests.c: Update comment on output format.
	(output_for_one_input_case): Generate before-rounding and
	after-rounding information as conditions on output flags not
	floating-point format.
	* math/auto-libm-test-out: Regenerated.
	* math/gen-libm-test.pl (cond_value): New function.
	(or_cond_value): Use cond_value.
	(generate_testfile): Handle conditional exceptions.

2014-03-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (max_valid_error): New variable.
	(init_max_error): Take new argument specifying whether function
	results are exactly determined.  Set max_valid_error and bound
	other variables for errors based on this argument.
	(set_max_error): Do not record results above max_valid_error.
	(check_float_internal): Only accept errors of up to 0.5ulps if
	also at most max_valid_error.
	(START): Take new argument EXACT and pass it to init_max_error.
	(acos_test): Update call to START.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Likewise.
	(cacosh_test): Likewise.
	(carg_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Likewise.
	(ccos_test): Likewise.
	(ccosh_test): Likewise.
	(ceil_test): Likewise.
	(cexp_test): Likewise.
	(cimag_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Likewise.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Likewise.
	(cproj_test): Likewise.
	(creal_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp10_test_tonearest): Likewise.
	(exp10_test_towardzero): Likewise.
	(exp10_test_downward): Likewise.
	(exp10_test_upward): Likewise.
	(pow10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(expm1_test_tonearest): Likewise.
	(expm1_test_towardzero): Likewise.
	(expm1_test_downward): Likewise.
	(expm1_test_upward): Likewise.
	(fabs_test): Likewise.
	(fdim_test): Likewise.
	(floor_test): Likewise.
	(fma_test): Likewise.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(hypot_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(finite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(ldexp_test): Likewise.
	(lgamma_test): Likewise.
	(gamma_test): Likewise.
	(lrint_test): Likewise.
	(lrint_test_tonearest): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test): Likewise.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test): Likewise.
	(logb_test_downward): Likewise.
	(lround_test): Likewise.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nearbyint_test): Likewise.
	(nextafter_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(drem_test): Likewise.
	(remainder_test_tonearest): Likewise.
	(drem_test_tonearest): Likewise.
	(remainder_test_towardzero): Likewise.
	(drem_test_towardzero): Likewise.
	(remainder_test_downward): Likewise.
	(drem_test_downward): Likewise.
	(remainder_test_upward): Likewise.
	(drem_test_upward): Likewise.
	(remquo_test): Likewise.
	(rint_test): Likewise.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward): Likewise.
	(round_test): Likewise.
	(scalb_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(signbit_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(sqrt_test_tonearest): Likewise.
	(sqrt_test_towardzero): Likewise.
	(sqrt_test_downward): Likewise.
	(sqrt_test_upward): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(trunc_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.
	(significand_test): Likewise.

	* math/libm-test.inc (struct ulp_data): Don't refer to ulps for
	individual tests in comment.
	(libm-test-ulps.h): Don't refer to test_ulps in #include comment.
	(prev_max_error): New variable.
	(prev_real_max_error): Likewise.
	(prev_imag_max_error): Likewise.
	(compare_ulp_data): Don't refer to test names in comment.
	(find_test_ulps): Remove function.
	(find_function_ulps): Likewise.
	(find_complex_function_ulps): Likewise.
	(init_max_error): Take function name as argument.  Look up ulps
	for that function.
	(print_ulps): Remove function.
	(print_max_error): Use prev_max_error instead of calling
	find_function_ulps.
	(print_complex_max_error): Use prev_real_max_error and
	prev_imag_max_error instead of calling find_complex_function_ulps.
	(check_float_internal): Take max_ulp parameter instead of calling
	find_test_ulps.  Don't call print_ulps.
	(check_float): Update call to check_float_internal.
	(check_complex): Update calls to check_float_internal.
	(START): Pass argument to init_max_error.
	* math/gen-libm-test.pl (%results): Don't include "kind"
	information.
	(parse_ulps): Don't handle ulps of individual tests.
	(print_ulps_file): Likewise.
	(output_ulps): Likewise.
	* math/README.libm-test: Update.
	* manual/libm-err-tab.pl (parse_ulps): Don't handle ulps of
	individual tests.
	* sysdeps/aarch64/libm-test-ulps: Remove individual test ulps.
	* sysdeps/alpha/fpu/libm-test-ulps: Likewise.
	* sysdeps/arm/libm-test-ulps: Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Likewise.
	* sysdeps/ia64/fpu/libm-test-ulps: Likewise.
	* sysdeps/m68k/coldfire/fpu/libm-test-ulps: Likewise.
	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Likewise.
	* sysdeps/microblaze/libm-test-ulps: Likewise.
	* sysdeps/mips/mips32/libm-test-ulps: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/powerpc/nofpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/tile/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-04  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (print_complex_max_error): Check separately
	whether real and imaginary errors are within allowed range and
	pass 0 to print_complex_function_ulps instead of value within
	allowed range.

2014-03-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/tst-ftell-active-handler.c (get_handles_fdopen): Fix
	formatting.
	(get_handles_fopen): Likewise.
	(do_write_test): Likewise.

	* libio/wfileops.c (do_ftell_wide): Fix up formatting.

	* libio/fileops.c (do_ftell): Use cached offset when
	available.
	* libio/iofwide.c (do_ftell_wide): Likewise.
	* libio/iofdopen.c (_IO_new_fdopen): Don't use
	_IO_file_attach.
	* libio/wfileops.c (_IO_fwide): Don't cache offset.

	[BZ #16532]
	* libio/libioP.h (get_file_offset): New function.
	* libio/fileops.c (get_file_offset): Likewise.
	(do_ftell): Likewise.
	(_IO_new_file_seekoff): Split out ftell logic.
	* libio/wfileops.c (do_ftell_wide): Likewise.
	(_IO_wfile_seekoff): Split out ftell logic.
	* libio/tst-ftell-active-handler.c: New test case.
	* libio/Makefile (tests): Add it.

2014-03-03  Roland McGrath  <roland@hack.frob.com>

	* nptl/ChangeLog: Renamed to nptl/ChangeLog.old, no longer used.
	* nptl_db/ChangeLog: Renamed to nptl_db/ChangeLog.old, no longer used.

2014-03-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16639]
	* nscd/connections.c (nscd_init): Call do_exit.
	(start_threads): Call do_exit and notify_parent.
	(begin_drop_privileges): Call do_exit.
	(finish_drop_privileges): Likewise.
	* nscd/selinux.c (preserve_capabilities): Likewise.
	(install_real_capabilities): Likewise.
	(nscd_selinux_enabled): Likewise.
	(avc_create_thread): Likewise.
	(avc_alloc_lock): Likewise.
	(nscd_avc_init): Likewise.
	* nscd/nscd.c (parent_fd): New static variable.
	(main): Create a pipe between parent and child processes.
	Skip closing parent_fd.
	(monitor_child): New function.
	(do_exit): Likewise.
	(notify_parent): Likewise.
	* nscd/nscd.h (notify_parent): Likewise.
	(do_exit): Likewise.

2014-03-03  Carlos O'Donell  <carlos@redhat.com>

	* malloc/malloc.c (__libc_calloc): Revert last change.

2014-03-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-03-03  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strrchr.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strrchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power7.S: New file.
	* string/strrchr.c: Define STRRCHR.

2014-02-28  Ondřej Bílka  <neleai@seznam.cz>

	* benchtest/bench-strtok.c (simple_strtok): Delete.
	(strtok_string): Use as benchmark.
	* string/strtok (STRTOK): New macro.

2014-02-28  Carlos O'Donell  <carlos@redhat.com>

	* manual/threads.texi: Add header and standard comments to all
	functions.

	* elf/dl-lookup.c (check_match): New function.
	(ELF_MACHINE_SYM_NO_MATCH): Adjust comment.
	(do_lookup_x): Remove nested function check_match. Use non-nested
	function check_match.

2014-02-28  Roland McGrath  <roland@hack.frob.com>

	* csu/Makefile (generated, before-compile): Use += rather than =.
	* catgets/Makefile (generated, generated-dirs): Likewise.
	* debug/Makefile (generated): Likewise.
	* dlfcn/Makefile (generated): Likewise.
	* elf/Makefile (before-compile, generated, generated-dirs): Likewise.
	* iconvdata/Makefile (before-compile, generated): Likewise.
	* intl/Makefile (before-compile, generated, generated-dirs): Likewise.
	* libio/Makefile (generated): Likewise.
	* malloc/Makefile (generated): Likewise.
	* manual/Makefile (generated, generated-dirs): Likewise.
	* misc/Makefile (generated): Likewise.
	* posix/Makefile (generated): Likewise.
	* resolv/Makefile (generated): Likewise.
	* sunrpc/Makefile (generated, generated-dirs): Likewise.
	* timezone/Makefile (generated, generated-dirs): Likewise.

	* stdio-common/Versions (libc: GLIBC_PRIVATE): Add missing }.

2014-02-27  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llround
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power8.S: New
	file: POWER8 llround ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround.c
	(__lllround): Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S: New file:
	POWER8 llround implementation.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llrint
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-power8.S: New
	file: POWER8 llrint ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint.c (__lllrint):
	Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S: New file:
	POWER8 llrint implementation.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add finite
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-power8.S: New
	file: POWER8 finite ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c (__finite):
	Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef.c (__finitef):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S: New file:
	POWER8 finite implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finitef.S: New file.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isinf
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-power8.S: New
	file: POWER8 isinf ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c (__isinf): Add
	POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff.c (__isinff):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S: New file: POWER8
	isinf implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinff.S: New file.

	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h
	(INIT_ARCH): Add hwcap2 initialization.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isnan
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power8.S: New
	file: POWER8 isnan ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c (__isnan): Add
	POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnanf.c (__isnanf):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S: New file: POWER8
	isnan implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnanf.S: New file.

2014-02-27  Joey Ye  <joey.ye@arm.com>

	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_NANFRAC_S, _FP_NANFRAC_D)
	(_FP_NANFRAC_Q): Set to zero.

2014-02-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16623]
	* math/auto-libm-test-in: New test inputs.
	* math/auto-libm-test-out: Regenerate.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Preserve sign of A
	and DA.
	(__cos): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerate.

2014-02-27  Joseph Myers  <joseph@codesourcery.com>

	* scripts/evaluate-test.sh: Take new argument indicating whether
	failure is expected.
	* Makeconfig (evaluate-test): Pass argument to evaluate-test.sh
	indicating whether failure is expected.
	* conform/Makefile (test-xfail-run-conformtest): New variable.
	($(objpfx)run-conformtest.out): Don't expect to fail at makefile
	level.
	* posix/Makefile (test-xfail-annexc): New variable.
	($(objpfx)annexc.out): Don't expect to fail at makefile level.

2014-02-26  Joseph Myers  <joseph@codesourcery.com>

	* argp/Makefile: Include Makeconfig immediately after defining
	subdir.
	* assert/Makefile: Likewise.
	* benchtests/Makefile: Likewise.
	* catgets/Makefile: Likewise.
	* conform/Makefile: Likewise.
	* crypt/Makefile: Likewise.
	* csu/Makefile: Likewise.
	(all): Remove target.
	* ctype/Makefile: Include Makeconfig immediately after defining
	subdir.
	* debug/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* gmon/Makefile: Likewise.
	* gnulib/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* gshadow/Makefile: Likewise.
	* hesiod/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	(all): Remove target.
	* iconvdata/Makefile: Include Makeconfig immediately after
	defining subdir.
	* inet/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* io/Makefile: Likewise.
	* libio/Makefile: Likewise.
	(all): Remove target.
	* locale/Makefile: Include Makeconfig immediately after defining
	subdir.
	* login/Makefile: Likewise.
	* mach/Makefile: Likewise.
	(all): Remove target.
	* malloc/Makefile: Include Makeconfig immediately after defining
	subdir.
	(all): Remove target.
	* manual/Makefile: Include Makeconfig immediately after defining
	subdir.
	* math/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* nis/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* po/Makefile: Likewise.
	(all): Remove target.
	* posix/Makefile: Include Makeconfig immediately after defining
	subdir.
	* pwd/Makefile: Likewise.
	* resolv/Makefile: Likewise.
	* resource/Makefile: Likewise.
	* rt/Makefile: Likewise.
	* setjmp/Makefile: Likewise.
	* shadow/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* socket/Makefile: Likewise.
	* soft-fp/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* streams/Makefile: Likewise.
	* string/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	(all): Remove target.
	* sysvipc/Makefile: Include Makeconfig immediately after defining
	subdir.
	* termios/Makefile: Likewise.
	* time/Makefile: Likewise.
	* timezone/Makefile: Likewise.
	(all): Remove target.
	* wcsmbs/Makefile: Include Makeconfig immediately after defining
	subdir.
	* wctype/Makefile: Likewise.

2014-02-26  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/math_private.h (_FPU_MASK_ALL) New.
	(libc_feholdexcept_mips): Use _FPU_MASK_ALL.
	(libc_feholdexcept_setround_mips): Ditto.
	(libc_feholdsetround): New.
	(libc_feholdsetroundf): New.
	(libc_feholdsetroundl): New.
	(libc_feupdateenv_test_mips): New.
	(libc_feupdateenv_test): New.
	(libc_feupdateenv_testf): New.
	(libc_feupdateenv_testl): New.
	(libc_feresetround): New.
	(libc_feresetroundf): New.
	(libc_feresetroundl): New.
	(libc_fetestexcept_mips): New.
	(libc_fetestexcept): New.
	(libc_fetestexceptf): New.
	(libc_fetestexceptl): New.
	(HAVE_RM_CTX): New.
	(libc_feholdexcept_setround_mips_ctx): New.
	(libc_feholdexcept_setround_ctx): New.
	(libc_feholdexcept_setroundf_ctx): New.
	(libc_feholdexcept_setroundl_ctx): New.
	(libc_fesetenv_mips_ctx): New.
	(libc_fesetenv_ctx): New.
	(libc_fesetenv_ctxf): New.
	(libc_fesetenv_ctxl): New.
	(libc_feupdateenv_mips_ctx): New.
	(libc_feupdateenv_ctx): New.
	(libc_feupdateenvf_ctx): New.
	(libc_feupdateenvl_ctx): New.
	(libc_feholdsetround_mips_ctx): New.
	(libc_feholdsetround_ctx): New.
	(libc_feholdsetroundf_ctx): New.
	(libc_feholdsetroundl_ctx): New.
	(libc_feresetround_mips_ctx): New.
	(libc_feresetround_ctx): New.
	(libc_feresetroundf_ctx): New.
	(libc_feresetroundl_ctx): New.

2014-02-26  Carlos O'Donell  <carlos@redhat.com>

	* manual/ipc.texi (Semaphores): Use @Theglibc{}.

	* manual/ipc.texi: New file.
	* manual/Makefile (chapters): Add ipc.
	* manual/job.texi: Add "Inter-Process Communication" to next.
	* manual/process.texi: Add "Inter-Process Communication" to prev.

2014-02-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-02-26  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/malloc.c (__libc_calloc): Simplify implementation.

	* manual/arith.texi: Fix spaces after sentences.
	* manual/charset.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/maint.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/probes.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.

2014-02-25  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16632]
	* include/features.h: Don't warn about _BSD_SOURCE or _SVID_SOURCE if
	_DEFAULT_SOURCE is defined.

2014-02-25  Ulrich Drepper  <drepper@gmail.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #16613]
	* elf/dl-tls.c (_dl_count_modids): New function.
	* sysdeps/generic/ldsodefs.h: Declare _dl_count_modids.
	* elf/rtld.c (dl_main): Call _dl_count_modids to track TLS usage in
	audit library and increment generation counter.
	(_dl_allocate_tls_init): Add assertion to check TLS generation count.
	* elf/tst-audit9.c: New file.
	* elf/tst-auditmod9a.c: New file.
	* elf/tst-auditmod9b.c: New file.
	* elf/Makefile: Add rules to build and run tst-audit9.

2014-02-25  Florian Weimer  <fweimer@redhat.com>

	[BZ #15347]
	* misc/sys/select.h (__FD_MASK): Avoid signed integer overflow.

2014-02-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/__longjmp.S: Include stap-probe.h.
	(__longjmp): Restore sp and lr before restoring callee
	saved registers.  Add longjmp and longjmp_target
	SystemTap probe point.
	* sysdeps/arm/bits/setjmp.h (__jmp_buf): Update comment.
	* sysdeps/arm/include/bits/setjmp.h (__JMP_BUF_SP):
	Define to zero to match jmpbuf layout.
	* sysdeps/arm/setjmp.S: Include stap-probe.h.
	(__sigsetjmp): Save sp and lr before saving callee
	saved registers.  Add setjmp SystemTap probe point.

2014-02-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-02-24  Andreas Schwab  <schwab@suse.de>

	[BZ #15804]
	* elf/pldd.c (wait_for_ptrace_stop): New function.
	(main): Call it after attaching.

2014-02-22  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)Versions.v.i): No longer depend
	on $(common-objpfx)abi-versions.h; using <shlib-compat.h> inside
	Versions files is now verboten.
	* hurd/Versions (libc: GLIBC_2.0):
	Remove various [SHLIB_COMPAT (libc, GLIBC_2_0, ...)] sections.
	(libc: HURD_CTHREADS_0.3): Remove conditionalization, was under
	[!SHLIB_COMPAT (libc, GLIBC_2_0, GLIBC_2_2)].
	* mach/Versions: Likewise.

	* csu/Versions: Remove unused %include.
	* resolv/Versions: Likewise.

2014-02-21  Joseph Myers  <joseph@codesourcery.com>

	* Makefile ($(objpfx)c++-types-check.out): Use $(evaluate-test).
	($(objpfx)check-local-headers.out): Likewise.
	($(objpfx)begin-end-check.out): Likewise.
	* Makerules (check-abi-%.out): Likewise.
	* catgets/Makefile ($(objpfx)test1.cat): Likewise.
	($(objpfx)test2.cat): Likewise.
	($(objpfx)de/libc.cat): Likewise.
	($(objpfx)test-gencat.out): Likewise.
	* conform/Makefile ($(objpfx)run-conformtest.out): Likewise.
	* elf/Makefile ($(objpfx)order-cmp.out): Likewise.
	($(objpfx)noload-mem): Likewise.
	($(objpfx)tst-pathopt.out): Likewise.
	($(objpfx)tst-rtld-load-self.out): Likewise.
	($(objpfx)tst-array1-cmp.out): Likewise.
	($(objpfx)tst-array1-static-cmp.out): Likewise.
	($(objpfx)tst-array2-cmp.out): Likewise.
	($(objpfx)tst-array3-cmp.out): Likewise.
	($(objpfx)tst-array4-cmp.out): Likewise.
	($(objpfx)tst-array5-cmp.out): Likewise.
	($(objpfx)tst-array5-static-cmp.out): Likewise.
	($(objpfx)check-textrel.out): Likewise.
	($(objpfx)check-execstack.out): Likewise.
	($(objpfx)check-localplt.out): Likewise.
	($(objpfx)order2-cmp.out): Likewise.
	($(objpfx)tst-leaks1-mem): Likewise.
	($(objpfx)tst-leaks1-static-mem): Likewise.
	($(objpfx)tst-initorder-cmp.out): Likewise.
	($(objpfx)tst-initorder2-cmp.out): Likewise.
	($(objpfx)tst-unused-dep.out): Likewise.
	($(objpfx)tst-unused-dep-cmp.out): Likewise.
	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Likewise.
	* iconv/Makefile (test-iconvconfig): Likewise.
	* iconvdata/Makefile ($(objpfx)mtrace-tst-loading): Likewise.
	($(objpfx)iconv-test.out): Likewise.
	($(objpfx)tst-tables.out): Likewise.
	* intl/Makefile ($(objpfx)mtrace-tst-gettext): Likewise.
	($(objpfx)tst-gettext.out): Likewise.
	($(objpfx)tst-translit.out): Likewise.
	($(objpfx)tst-gettext2.out): Likewise.
	($(objpfx)tst-gettext4.out): Likewise.
	($(objpfx)tst-gettext6.out): Likewise.
	* io/Makefile ($(objpfx)ftwtest.out): Likewise.
	* libio/Makefile ($(objpfx)test-freopen.out): Likewise.
	($(objpfx)tst-fopenloc-cmp.out): Likewise.
	($(objpfx)tst-fopenloc-mem.out): Likewise.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Likewise.
	* misc/Makefile ($(objpfx)tst-error1-mem): Likewise.
	* posix/Makefile ($(objpfx)globtest.out): Likewise.
	($(objpfx)wordexp-tst.out): Likewise.
	($(objpfx)annexc.out): Likewise.
	($(objpfx)tst-fnmatch-mem): Likewise.
	($(objpfx)bug-regex2-mem): Likewise.
	($(objpfx)bug-regex14-mem): Likewise.
	($(objpfx)bug-regex21-mem): Likewise.
	($(objpfx)bug-regex31-mem): Likewise.
	($(objpfx)tst-vfork3-mem): Likewise.
	($(objpfx)tst-rxspencer-no-utf8-mem): Likewise.
	($(objpfx)tst-pcre-mem): Likewise.
	($(objpfx)tst-boost-mem): Likewise.
	($(objpfx)tst-getconf.out): Likewise.
	($(objpfx)bug-ga2-mem): Likewise.
	($(objpfx)bug-glob2-mem): Likewise.
	* resolv/Makefile ($(objpfx)mtrace-tst-leaks): Likewise.
	($(objpfx)mtrace-tst-leaks2): Likewise.
	* stdio-common/Makefile ($(objpfx)tst-unbputc.out): Likewise.
	($(objpfx)tst-printf.out): Likewise.
	($(objpfx)tst-setvbuf1.out): Likewise.
	($(objpfx)tst-setvbuf1-cmp.out): Likewise.
	* stdlib/Makefile ($(objpfx)isomac.out): Likewise.
	($(objpfx)tst-fmtmsg.out): Likewise.
	* string/Makefile ($(objpfx)tst-svc-cmp.out): Likewise.
	* sysdeps/x86/Makefile ($(objpfx)tst-xmmymm.out): Likewise.

	* bits/fcntl.h [__USE_MISC]: Remove redundant conditionals.
	* bits/sigaction.h [__USE_MISC]: Likewise.
	* bits/waitstatus.h: Update #endif comments.
	* ctype/ctype.h: Likewise.
	* dirent/dirent.h: Likewise.
	[__USE_MISC]: Remove redundant conditionals.
	* grp/grp.h: Update #endif comments.
	[__USE_GNU]: Remove redundant conditionals.
	[__USE_MISC]: Likewise.
	* inet/netinet/in.h [__USE_GNU]: Likewise.
	* io/sys/stat.h [__USE_MISC]: Likewise.
	* libio/bits/stdio-ldbl.h [__USE_MISC]: Likewise.
	* libio/bits/stdio.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* libio/bits/stdio2.h [__USE_MISC]: Likewise.
	* libio/stdio.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* math/bits/math-finite.h [__USE_MISC]: Likewise.
	* math/bits/mathcalls.h [__USE_MISC]: Likewise.
	* math/math.h: Update #else and #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* misc/sys/uio.h: Update #endif comments.
	* posix/bits/unistd.h [__USE_MISC]: Remove redundant conditionals.
	* posix/glob.h [__USE_MISC]: Likewise.
	* posix/sys/types.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* posix/sys/wait.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* posix/unistd.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* pwd/pwd.h [__USE_GNU]: Likewise.
	[__USE_MISC]: Likewise.
	* resolv/netdb.h [__USE_GNU]: Likewise.
	* signal/signal.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* stdlib/stdlib.h: Update #else and #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	[__USE_GNU]: Likewise.
	* string/bits/string2.h [__USE_MISC]: Likewise.
	* string/string.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* sysdeps/m68k/m680x0/fpu/bits/mathinline.h [__USE_MISC]:
	Likewise.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_MISC]: Likewise.
	* sysdeps/mach/hurd/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: Update #endif
	comments.
	[__USE_MISC]: Remove redundant conditionals.
	* sysdeps/unix/sysv/linux/bits/in.h [__USE_GNU]: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigaction.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h [__USE_GNU]: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/x86/bits/string.h: Update #endif comments.
	* sysdeps/x86/fpu/bits/mathinline.h [__USE_MISC]: Remove redundant
	conditionals.
	* time/sys/time.h: Update #endif comments.
	* time/time.h: Likewise.
	[__USE_MISC]: Remove redundant conditionals.

2014-02-21  Yury Gribov  <y.gribov@samsung.com>

	[BZ #16600]
	* sysdeps/arm/libm-test-ulps: Update for VFPv4.

2014-02-21  Andreas Schwab  <schwab@linux-m68k.org>

	* Versions.def (librt): Add GLIBC_2.17.

2014-02-21  Adam Conrad  <adconrad@0c3.net>

	* sysdeps/powerpc/bits/hwcap.h: Allow _SYSDEPS_SYSDEP_H guard as a
	synonym for _SYS_AUXV_H to allow direct inclusion.
	* sysdeps/sparc/bits/hwcap.h: Likewise.
	* sysdeps/powerpc/sysdep.h: Define _SYSDEPS_SYSDEP_H instead of
	_SYS_AUXV_H so we can include sysdep.h and sys/auxv.h together.
	* sysdeps/sparc/sysdep.h: Likewise.

2014-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/bench-strrchr.c (do_test): Fix minor formatting.

2014-02-21  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/bench-strrchr.c: Print length instead of position.

2014-02-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16611]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000 && __ASSUME_SOCKETCALL]
	(__ASSUME_SENDMMSG_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION >= 0x030000 && (__i386__ || __x86_64__ ||
	__powerpc__ || __sh__ || __sparc__)] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	[__i386__ || __powerpc__ || __sh__ || __sparc__]
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_SENDMMSG_SOCKETCALL || __ASSUME_SENDMMSG_SYSCALL]
	(__ASSUME_SENDMMSG): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x020627] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_SENDMMSG_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030200] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL] (__NR_sendmmsg): Undefine.
	[__ASSUME_SENDMMSG]: Change conditionals to
	[__ASSUME_SENDMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030300] (__ASSUME_SENDMMSG_SYSCALL):
	Define.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030100] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL] (__NR_sendmmsg): Undefine.
	[!__ASSUME_SENDMMSG]: Change conditional to
	[!__ASSUME_SENDMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Define.

	[BZ #16610]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621 && __ASSUME_SOCKETCALL]
	(__ASSUME_RECVMMSG_SOCKETCALL): Define.
	[(__LINUX_KERNEL_VERSION >= 0x020621 && (__i386__ || __x86_64__ ||
	__sparc__)) || (__LINUX_KERNEL_VERSION >= 0x020625 && (__powerpc__
	|| __sh__))] (__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__i386__ || __sparc__]
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_RECVMMSG_SOCKETCALL || __ASSUME_RECVMMSG_SYSCALL]
	(__ASSUME_RECVMMSG): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x020621] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL] (__NR_recvmmsg): Undefine.
	[__ASSUME_RECVMMSG]: Change condition to
	[__ASSUME_RECVMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Define.
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL] (__NR_recvmmsg): Undefine.
	[!__ASSUME_RECVMMSG]: Change condition to
	[!__ASSUME_RECVMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Define.

	[BZ #16609]
	* sysdeps/unix/sysv/linux/kernel-features.h [__i386__ ||
	__powerpc__ || __s390__ || __sh__ || __sparc__]
	(__ASSUME_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION && __ASSUME_SOCKETCALL]
	(__ASSUME_ACCEPT4_SOCKETCALL): Likewise.
	[(__LINUX_KERNEL_VERSION >= 0x02061c && (__x86_64__ || __sparc__))
	|| (__LINUX_KERNEL_VERSION >= 0x020625 && (__powerpc__ ||
	__sh__))] (__ASSUME_ACCEPT4_SYSCALL): Likewise.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_ACCEPT4_SOCKETCALL || __ASSUME_ACCEPT4_SYSCALL]
	(__ASSUME_ACCEPT4): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x02061c && (__i386__ || __x86_64__ ||
	__powerpc__ || __sparc__ || __s390__)] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/accept4.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL] (__NR_accept4): Undefine.
	[!__ASSUME_ACCEPT4]: Change condition to
	[!__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.  Correct
	condition to [__LINUX_KERNEL_VERSION >= 0x030200].
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020624] (__ASSUME_ACCEPT4): Change to
	__ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/i386/accept4.S [__ASSUME_ACCEPT4]:
	Change conditions to [__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030300] (__ASSUME_ACCEPT4): Change to
	__ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/internal_accept4.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL] (__NR_accept4): Undefine.
	[__ASSUME_ACCEPT4]: Change condition to
	[__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION >= 0x02061c] (__ASSUME_ACCEPT4): Remove.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_SOCKETCALL): Define.
	(__ASSUME_ACCEPT4): Remove.
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_ACCEPT4_SYSCALL):
	Define.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x02061f] (__ASSUME_ACCEPT4_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.

	* sysdeps/unix/sysv/linux/arm/bits/hwcap.h (HWCAP_ARM_VFPD32): New
	macro.
	(HWCAP_ARM_LPAE): Likewise.
	(HWCAP_ARM_EVTSTRM): Likewise.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.c (_dl_arm_cap_flags):
	Add vpfd32, lpae and evtstrm.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.h (_DL_HWCAP_COUNT):
	Increase to 22.

2014-02-19  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of clog10.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (clog10_test_data): Use AUTO_TESTS_c_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-02-18  Andreas Schwab  <schwab@suse.de>

	[BZ #16574]
	* resolv/res_send.c (send_vc): Add parameter ansp2_malloced.
	Store non-zero if the second buffer was newly allocated.
	(send_dg): Likewise.
	(__libc_res_nsend): Add parameter ansp2_malloced and pass it down
	to send_vc and send_dg.
	(res_nsend): Pass NULL for ansp2_malloced.
	* resolv/res_query.c (__libc_res_nquery): Add parameter
	answerp2_malloced and pass it down to __libc_res_nsend.
	(res_nquery): Pass additional NULL to __libc_res_nquery.
	(__libc_res_nsearch): Add parameter answerp2_malloced and pass it
	down to __libc_res_nquery and __libc_res_nquerydomain.  Deallocate
	second answer buffer if answerp2_malloced was set.
	(res_nsearch): Pass additional NULL to __libc_res_nsearch.
	(__libc_res_nquerydomain): Add parameter
	answerp2_malloced and pass it down to __libc_res_nquery.
	(res_nquerydomain): Pass additional NULL to
	__libc_res_nquerydomain.
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r): Pass
	additional NULL to __libc_res_nsend and __libc_res_nquery.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Pass
	additional NULL to __libc_res_nsearch.
	(_nss_dns_gethostbyname4_r): Revert last change.  Use new
	parameter of __libc_res_nsearch to check for separately allocated
	second buffer.
	(_nss_dns_gethostbyaddr2_r): Pass additional NULL to
	__libc_res_nquery.
	* resolv/nss_dns/dns-canon.c (_nss_dns_getcanonname_r): Pass
	additional NULL to __libc_res_nquery.
	* resolv/gethnamaddr.c (gethostbyname2): Pass additional NULL to
	__libc_res_nsearch.
	(gethostbyaddr): Pass additional NULL to __libc_res_nquery.
	* include/resolv.h: Update prototypes of __libc_res_nquery,
	__libc_res_nsearch, __libc_res_nsend.

2014-02-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of fma.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (fma_test_data): Use AUTO_TESTS_fff_f.
	(fma_towardzero_test_data): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_upward_test_data): Likewise.
	* math/gen-auto-libm-tests.c (rounding_mode_desc): Add field
	mpc_mode.
	(rounding_modes): Add values for new field.
	(func_calc_method): Add value mpfr_fff_f.
	(func_calc_desc): Add mpfr_fff_f union field.
	(test_function): Add field exact_args.
	(FUNC): Add macro argument EXACT_ARGS.
	(FUNC_mpfr_f_f): Update call to FUNC.
	(FUNC_mpfr_f_f): Likewise.
	(FUNC_mpfr_ff_f): Likewise.
	(FUNC_mpfr_if_f): Likewise.
	(FUNC_mpc_c_f): Likewise.
	(FUNC_mpc_c_c): Likewise.
	(test_functions): Add fma.  Update calls to FUNC.
	(handle_input_arg): Add argument exact_args.
	(add_test): Update call to handle_input_arg.
	(calc_generic_results): Add argument mode.  Handle mpfr_fff_f.
	(output_for_one_input_case): Update call to calc_generic_results.
	Recalculate exact zero results in each rounding mode.

	* math/gen-auto-libm-tests.c (adjust_real): Ensure integers are
	non-negative before setting low bit.
	* math/auto-libm-test-in: Mark one asin test possibly having
	spurious underflow.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-02-17  David Holsgrove <david.holsgrove@xilinx.com>

	* sysdeps/microblaze: Move directory from ports/sysdeps/microblaze.
	* sysdeps/unix/sysv/linux/microblaze: Move directory from
	ports/sysdeps/unix/sysv/linux/microblaze.
	* README: Add missing listing for microblaze*-*-linux-gnu.

2014-02-16  Ondřej Bílka  <neleai@seznam.cz>

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname4_r): Remove
	duplicate code

2014-02-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/ia64: Move directory from ports/sysdeps/ia64.
	* sysdeps/unix/sysv/linux/ia64: Move directory from
	ports/sysdeps/unix/sysv/linux/ia64.
	* README: Update listing for ia64-*-linux-gnu.

2014-02-14  Tomas Dohnalek  <tdohnale@redhat.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (test-name): New variable.
	(evaluate-test): Likewise.
	* Makerules (do-test-clean): Remove .test-result files.
	(common-mostlyclean): Likewise.
	* Rules ($(objpfx)%.out): Use $(evaluate-test) in both rules.
	* scripts/evaluate-test.sh: New file.

2014-02-14  Joseph Myers  <joseph@codesourcery.com>

	* libio/Makefile ($(objpfx)tst-fopenloc.check): Split into
	separate $(objpfx)tst-fopenloc-cmp.out and
	$(objpfx)tst-fopenloc-mem.out targets.
	(tests): Update dependencies.
	* posix/Makefile (tests variable): Add tst-rxspencer-no-utf8.
	(generated): Change tst-rxspencer-mem and tst-rxspencer.mtrace to
	tst-rxspencer-no-utf8-mem and tst-rxspencer-no-utf8.mtrace.
	(tst-rxspencer-no-utf8-ARGS): New variable.
	(tst-rxspencer-no-utf8-ENV): Likewise.
	(tests target): Depend on $(objpfx)tst-rxspencer-no-utf8-mem
	instead of $(objpfx)tst-rxspencer-mem.
	($(objpfx)tst-rxspencer-mem): Change target to
	$(objpfx)tst-rxspencer-no-utf8-mem.  Depend on
	$(objpfx)tst-rxspencer-no-utf8.out instead of running test program.
	* posix/tst-rxspencer-no-utf8.c: New file.

	* elf/Makefile ($(objpfx)order.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)order-cmp.out.
	($(objpfx)order-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-array1-cmp.out, $(objpfx)tst-array1-static-cmp.out,
	$(objpfx)tst-array2-cmp.out, $(objpfx)tst-array3-cmp.out,
	$(objpfx)tst-array4-cmp.out, $(objpfx)tst-array5-cmp.out and
	$(objpfx)tst-array5-static-cmp.out.
	($(objpfx)tst-array1.out): Remove rule.
	($(objpfx)tst-array1-cmp.out): New rule.
	($(objpfx)tst-array1-static.out): Remove rule.
	($(objpfx)tst-array1-static-cmp.out): New rule.
	($(objpfx)tst-array2.out): Remove rule.
	($(objpfx)tst-array2-cmp.out): New rule.
	($(objpfx)tst-array3.out): Remove rule.
	($(objpfx)tst-array3-cmp.out): New rule.
	($(objpfx)tst-array4.out): Remove rule.
	($(objpfx)tst-array4-cmp.out): New rule.
	($(objpfx)tst-array5.out): Remove rule.
	($(objpfx)tst-array5-cmp.out): New rule.
	($(objpfx)tst-array5-static.out): Remove rule.
	($(objpfx)tst-array5-static-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)order2-cmp.out.
	($(objpfx)order2.out): Remove rule.
	($(objpfx)order2-cmp.out): New rule.
	($(objpfx)tst-initorder.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-initorder-cmp.out.
	($(objpfx)tst-initorder-cmp.out): New rule.
	($(objpfx)tst-initorder2.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-initorder2-cmp.out.
	($(objpfx)tst-initorder2-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-unused-dep-cmp.out.
	($(objpfx)tst-unused-dep-cmp.out): Do not run cmp.
	($(objpfx)tst-unused-dep-cmp.out): New rule.
	* stdio-common/Makefile [$(run-built-tests) = yes] (tests): Depend
	on $(objpfx)tst-setvbuf1-cmp.out.
	($(objpfx)tst-setvbuf1.out): Do not run cmp.
	($(objpfx)tst-setvbuf1-cmp.out): New rule.
	* string/Makefile [$(run-built-tests) = yes] (tests): Depend
	$(objpfx)tst-svc-cmp.out instead of $(objpfx)tst-svc.out.
	($(objpfx)tst-svc.out): Remove rule.
	($(objpfx)tst-svc-cmp.out): New rule.

2014-02-13  Joseph Myers  <joseph@codesourcery.com>

	* bits/mman.h [__USE_MISC]: Remove redundant conditionals.
	* ctype/ctype.h [__USE_MISC]: Likewise.
	* dirent/dirent.h [__USE_MISC]: Likewise.
	* grp/grp.h [__USE_MISC]: Likewise.
	* io/fcntl.h [__USE_MISC]: Likewise.
	* io/sys/stat.h [__USE_MISC]: Likewise.
	* libio/stdio.h [__USE_MISC]: Likewise.
	* posix/unistd.h [__USE_MISC]: Likewise.
	* pwd/pwd.h [__USE_MISC]: Likewise.
	* stdlib.h [__USE_MISC]: Likewise.
	* string/bits/string2.h [__USE_MISC]: Likewise.
	* string/string.h [__USE_MISC]: Likewise.
	* time/time.h [__USE_MISC]: Likewise.

2014-02-13  Andreas Schwab  <schwab@suse.de>

	[BZ #16574]
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname4_r): Free the
	second answer buffer if it was separately allocated.

2014-02-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/math-tests.h: Include <features.h>.
	[!__mips_soft_float && _MIPS_SIM != _ABIO32 && __GNUC_PREREQ (4, 9)]
	(ROUNDING_TESTS_long_double): Do not define.
	[!__mips_soft_float && _MIPS_SIM != _ABIO32 && __GNUC_PREREQ (4, 9)]
	(EXCEPTION_TESTS_long_double): Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Update.

	* include/features.h (__USE_BSD): Remove macro definitions.
	(__USE_SVID): Likewise.
	(_BSD_SOURCE): Likewise.
	(_SVID_SOURCE): Likewise.
	[!defined _BSD_SOURCE && !defined _SVID_SOURCE]: Remove condition
	from definition of _DEFAULT_SOURCE.
	[_BSD_SOURCE || _SVID_SOURCE]: Change condition to
	[_DEFAULT_SOURCE].
	* bits/fcntl.h [__USE_BSD]: Change condition to [__USE_MISC].
	* bits/mman.h [__USE_BSD]: Likewise.
	* bits/termios.h [__USE_BSD]: Likewise.
	* bits/waitstatus.h [__USE_BSD]: Likewise.
	* ctype/ctype.h [__USE_SVID]: Likewise.
	* dirent/dirent.h [__USE_BSD]: Likewise.
	* grp/grp.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* inet/netinet/igmp.h [__USE_BSD]: Likewise.
	* io/fcntl.h [__USE_BSD]: Likewise.
	* io/ftw.h [__USE_BSD]: Likewise.
	* io/sys/stat.h [__USE_BSD]: Likewise.
	* libio/bits/stdio-ldbl.h [__USE_BSD]: Likewise.
	* libio/bits/stdio2.h [__USE_BSD]: Likewise.
	* libio/stdio.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* math/math.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* misc/bits/syslog-ldbl.h [__USE_BSD]: Likewise.
	* misc/bits/syslog.h [__USE_BSD]: Likewise.
	* misc/search.h [__USE_SVID]: Likewise.
	* misc/sys/mman.h [__USE_BSD]: Likewise.
	* misc/sys/syslog.h [__USE_BSD]: Likewise.
	* misc/sys/uio.h [__USE_BSD]: Likewise.
	* posix/bits/unistd.h [__USE_BSD]: Likewise.
	* posix/glob.h [__USE_BSD]: Likewise.
	* posix/regex.h [__USE_BSD]: Likewise.
	* posix/sys/types.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* posix/sys/utsname.h [__USE_SVID]: Likewise.
	* posix/sys/wait.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* posix/unistd.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* pwd/pwd.h [__USE_SVID]: Likewise.
	* resolv/netdb.h [__USE_BSD]: Likewise.
	* setjmp/setjmp.h [__USE_BSD]: Likewise.
	* signal/signal.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* socket/sys/socket.h [__USE_BSD]: Likewise.
	* stdlib/fmtmsg.h [__USE_SVID]: Likewise.
	* stdlib/stdlib.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* string/bits/string2.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* string/bits/string3.h [__USE_BSD]: Likewise.
	* string/endian.h [__USE_BSD]: Likewise.
	* string/string.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* string/strings.h [__USE_BSD]: Likewise.
	* sysdeps/generic/netinet/ip.h [__USE_BSD]: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h [__USE_BSD]: Likewise.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_BSD]: Likewise.
	* sysdeps/mach/hurd/bits/stat.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/mman.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/mman-linux.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/bits/sys_errlist.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/termios.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_ether.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_fddi.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_tr.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/x86/bits/string.h [__USE_BSD]: Likewise.
	* sysvipc/sys/ipc.h [__USE_SVID]: Likewise.
	* termios/termios.h [__USE_BSD]: Likewise.
	* time/sys/time.h [__USE_BSD]: Likewise.
	* time/time.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.

	* Makefile (subdir_targets): Remove subdir_lint.out.

	* stdio-common/Makefile (do-tst-unbputc): Remove target.
	(do-tst-printf): Likewise.
	(tests): Depend directly on $(objpfx)tst-unbputc.out and
	$(objpfx)tst-printf.out.

	* io/ftwtest-sh (testout): Change to $tmp/ftwtest-tmp.out.

	* Makerules (check-abi-%): Change target to
	$(objpfx)check-abi-%.out.
	(check-abi target): Update dependencies.
	(check-abi-pattern variable): Redirect output of diff to $@.
	(check-abi variable): Likewise.
	* elf/Makefile (check-abi): Update dependencies.

	* soft-fp/op-common.h (_FP_DECL): Mark exponent as possibly
	unused.
	(_FP_PACK_SEMIRAW): Determine tininess based on rounding shifted
	value if _FP_TININESS_AFTER_ROUNDING and unrounded value is in
	subnormal range.
	(_FP_PACK_CANONICAL): Determine tininess based on rounding to
	normal precision if _FP_TININESS_AFTER_ROUNDING and unrounded
	value has largest subnormal exponent.
	* soft-fp/soft-fp.h [FP_NO_EXCEPTIONS]
	(_FP_TININESS_AFTER_ROUNDING): Undefine and redefine to 0.
	* sysdeps/aarch64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): New macro.
	* sysdeps/alpha/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.
	* sysdeps/mips/mips64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/mips/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/sh/soft-fp/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/tile/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.

2014-02-12  Dylan Alex Simon  <dylan@dylex.net>

	[BZ #16545]
	* sysdeps/x86_64/fpu/libm-test-ulps: Update on AMD family 21h
	model 1.

2014-02-12  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha: Move directory from ports/sysdeps/alpha.
	* sysdeps/unix/alpha: Move directory from ports/sysdeps/unix/alpha.
	* sysdeps/unix/sysv/linux/alpha: Move directory from
	ports/sysdeps/unix/sysv/linux/alpha.
	* README: Update listing for alpha-*-linux-gnu.

2014-02-11  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h: Update comment documenting feature test
	macros.
	[_BSD_SOURCE || _SVID_SOURCE]: Give #warning.  Define
	_DEFAULT_SOURCE.
	* manual/creature.texi (_BSD_SOURCE): Remove documentation.
	(_SVID_SOURCE): Likewise.
	(_DEFAULT_SOURCE): Update description of default features.
	(Feature Test Macros): Don't mention _SVID_SOURCE in conjunction
	with _GNU_SOURCE.
	* manual/filesys.texi (__ftw_func_t): Do not refer to _BSD_SOURCE.
	(S_ISVTX): Likewise.
	* manual/math.texi (Mathematical Constants): Likewise.
	* manual/signal.texi (Interrupted Primitives): Likewise.
	* manual/startup.texi (putenv): Do not refer to _SVID_SOURCE.
	* math/test-matherr.c (_SVID_SOURCE): Do not define.
	* sysvipc/sys/ipc.h [__USE_SVID && !__USE_XOPEN && __GNUC__ >= 2]:
	Don't refer to _SVID_SOURCE in warning text.

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* elf/dl-lookup.c (ELF_MACHINE_SYM_NO_MATCH): Define if not
	already defined.
	(do_lookup_x): Use ELF_MACHINE_SYM_NO_MATCH.
	* sysdeps/mips/dl-lookup.c: Remove.
	* sysdeps/mips/dl-machine.h (ELF_MACHINE_SYM_NO_MATCH): New macro.

2014-02-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #16447]
	* math/auto-libm-test-in: Add testcase for expl.
	* math/auto-libm-test-out: Regenerate.
	* sysdeps/ieee754/ldbl-128/e_expl.c (__ieee754_expl): Fix
	calculation of unsafe.
	* sysdeps/s390/fpu/libm-test-ulps: Adjust ULPs for added testcase.

2014-02-11  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64: Move directory from ports/sysdeps/aarch64.
	* sysdeps/unix/sysv/linux/aarch64: Move directory from
	ports/sysdeps/unix/sysv/linux/aarch64.
	* README: Update listing for aarch64*-*-linux-gnu.

2014-02-11  Will Newton  <will.newton@linaro.org>

	* manual/probes.texi (Mathematical Function Probes): Use
	"triggered" instead of "hit".

	* manual/probes.texi (Internal Probes): Add documentation
	of setjmp, longjmp and longjmp_target probes.

	* include/stap-probe.h: Add comment about probe argument
	format.

	* malloc/mtrace.c (attribute_hidden): Remove unused macro
	definition.  (tr_where, tr_freehook, tr_mallochook,
	tr_reallochook, tr_memalignhook): Use ANSI protoype.

2014-02-11  David S. Miller  <davem@davemloft.net>

	* stdio-common/tst-sscanf.c (main): Use 'long' for 'dummy' when
	processing int_tests.

2014-02-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips: Move directory from ports/sysdeps/mips.
	* sysdeps/unix/mips: Move directory from ports/sysdeps/unix/mips.
	* sysdeps/unix/sysv/linux/mips: Move directory from
	ports/sysdeps/unix/sysv/linux/mips.
	* README: Update listing for mips-*-linux-gnu and
	mips64-*-linux-gnu.

2014-02-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k: Move directory from ports/sysdeps/m68k.
	* sysdeps/unix/sysv/linux/m68k: Move directory from
	ports/sysdeps/unix/sysv/linux/m68k.
	* README: Update listing for m68k-*-linux-gnu.

2014-02-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/tile: Move directory from ports/sysdeps/tile.
	* sysdeps/unix/sysv/linux/generic: Move directory from
	ports/sysdeps/unix/sysv/linux/generic.
	* sysdeps/unix/sysv/linux/tile: Move directory from
	ports/sysdeps/unix/sysv/linux/tile.
	* README: Update listing for tile*-*-linux-gnu.

2014-02-10  Ondřej Bílka  <neleai@seznam.cz>

	* assert/assert.c (__assert_fail_base): Use glibc_likely instead
	__builtin_expect.
	* benchtests/bench-memmem.c (simple_memmem): Likewise.
	* catgets/open_catalog.c (__open_catalog): Likewise.
	* csu/libc-start.c (LIBC_START_MAIN): Likewise.
	* debug/confstr_chk.c: Likewise.
	* debug/fread_chk.c (__fread_chk): Likewise.
	* debug/fread_u_chk.c (__fread_unlocked_chk): Likewise.
	* debug/getgroups_chk.c: Likewise.
	* debug/mbsnrtowcs_chk.c: Likewise.
	* debug/mbsrtowcs_chk.c: Likewise.
	* debug/mbstowcs_chk.c: Likewise.
	* debug/memcpy_chk.c: Likewise.
	* debug/memmove_chk.c: Likewise.
	* debug/mempcpy_chk.c: Likewise.
	* debug/memset_chk.c: Likewise.
	* debug/stpcpy_chk.c (__stpcpy_chk): Likewise.
	* debug/strcat_chk.c (__strcat_chk): Likewise.
	* debug/strcpy_chk.c (__strcpy_chk): Likewise.
	* debug/strncat_chk.c (__strncat_chk): Likewise.
	* debug/vsnprintf_chk.c (___vsnprintf_chk): Likewise.
	* debug/vswprintf_chk.c (__vswprintf_chk): Likewise.
	* debug/wcpcpy_chk.c (__wcpcpy_chk): Likewise.
	* debug/wcpncpy_chk.c: Likewise.
	* debug/wcscat_chk.c (__wcscat_chk): Likewise.
	* debug/wcscpy_chk.c (__wcscpy_chk): Likewise.
	* debug/wcsncat_chk.c (__wcsncat_chk): Likewise.
	* debug/wcsncpy_chk.c: Likewise.
	* debug/wcsnrtombs_chk.c: Likewise.
	* debug/wcsrtombs_chk.c: Likewise.
	* debug/wcstombs_chk.c: Likewise.
	* debug/wmemcpy_chk.c: Likewise.
	* debug/wmemmove_chk.c: Likewise.
	* debug/wmempcpy_chk.c: Likewise.
	* debug/wmemset_chk.c: Likewise.
	* dirent/scandirat.c (SCANDIRAT): Likewise.
	* dlfcn/dladdr1.c (dladdr1): Likewise.
	* dlfcn/dladdr.c (dladdr): Likewise.
	* dlfcn/dlclose.c (dlclose_doit): Likewise.
	* dlfcn/dlerror.c (__dlerror): Likewise.
	* dlfcn/dlinfo.c (dlinfo_doit): Likewise.
	* dlfcn/dlmopen.c (dlmopen_doit): Likewise.
	* dlfcn/dlopen.c (dlopen_doit): Likewise.
	* dlfcn/dlopenold.c (__dlopen_nocheck): Likewise.
	* dlfcn/dlsym.c (dlsym_doit): Likewise.
	* dlfcn/dlvsym.c (dlvsym_doit): Likewise.
	* elf/dl-cache.c (_dl_load_cache_lookup): Likewise.
	* elf/dl-close.c (remove_slotinfo, _dl_close_worker, _dl_close):
	Likewise.
	* elf/dl-conflict.c: Likewise.
	* elf/dl-deps.c (_dl_build_local_scope, _dl_map_object_deps): Likewise.
	* elf/dl-dst.h: Likewise.
	* elf/dl-fini.c (_dl_sort_fini, _dl_fini): Likewise.
	* elf/dl-fptr.c (_dl_make_fptr): Likewise.
	* elf/dl-hwcaps.c (_dl_important_hwcaps): Likewise.
	* elf/dl-init.c (call_init, _dl_init): Likewise.
	* elf/dl-libc.c (__libc_dlopen_mode, __libc_dlsym): Likewise.
	* elf/dl-load.c (_dl_dst_substitute, fillin_rpath, _dl_init_paths)
	(_dl_map_object_from_fd, open_verify, open_path, _dl_map_object):
	Likewise.
	* elf/dl-lookup.c (do_lookup_x, add_dependency, _dl_lookup_symbol_x):
	Likewise.
	* elf/dl-minimal.c (__libc_memalign): Likewise.
	* elf/dl-open.c (add_to_global, dl_open_worker, _dl_open): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.
	* elf/dl-runtime.c (_dl_fixup, _dl_profile_fixup): Likewise.
	* elf/dl-sym.c (do_sym): Likewise.
	* elf/dl-tls.c (tls_get_addr_tail, update_get_addr)
	(__tls_get_addr, _dl_tls_get_addr_soft): Likewise.
	* elf/dl-version.c (match_symbol, _dl_check_map_versions): Likewise.
	* elf/dl-writev.h (_dl_writev): Likewise.
	* elf/ldconfig.c (search_dir): Likewise.
	* elf/rtld.c (_dl_start_final, _dl_start, init_tls, do_preload)
	(dl_main): Likewise.
	* elf/setup-vdso.h (setup_vdso): Likewise.
	* grp/compat-initgroups.c (compat_call): Likewise.
	* grp/fgetgrent.c (fgetgrent): Likewise.
	* grp/initgroups.c (getgrouplist, initgroups): Likewise.
	* grp/putgrent.c (putgrent): Likewise.
	* hesiod/nss_hesiod/hesiod-grp.c (_nss_hesiod_initgroups_dyn):
	Likewise.
	* hurd/hurdinit.c: Likewise.
	* iconvdata/8bit-gap.c (struct): Likewise.
	* iconvdata/ansi_x3.110.c : Likewise.
	* iconvdata/big5.c : Likewise.
	* iconvdata/big5hkscs.c : Likewise.
	* iconvdata/cp1255.c: Likewise.
	* iconvdata/cp1258.c : Likewise.
	* iconvdata/cp932.c : Likewise.
	* iconvdata/euc-cn.c: Likewise.
	* iconvdata/euc-jisx0213.c : Likewise.
	* iconvdata/euc-jp.c: Likewise.
	* iconvdata/euc-jp-ms.c : Likewise.
	* iconvdata/euc-kr.c (euckr_from_ucs4): Likewise.
	* iconvdata/gb18030.c : Likewise.
	* iconvdata/gbbig5.c (const): Likewise.
	* iconvdata/gbgbk.c: Likewise.
	* iconvdata/gbk.c : Likewise.
	* iconvdata/ibm1364.c : Likewise.
	* iconvdata/ibm930.c : Likewise.
	* iconvdata/ibm932.c: Likewise.
	* iconvdata/ibm933.c : Likewise.
	* iconvdata/ibm935.c : Likewise.
	* iconvdata/ibm937.c : Likewise.
	* iconvdata/ibm939.c : Likewise.
	* iconvdata/ibm943.c: Likewise.
	* iconvdata/iso_11548-1.c: Likewise.
	* iconvdata/iso-2022-cn.c : Likewise.
	* iconvdata/iso-2022-cn-ext.c : Likewise.
	* iconvdata/iso-2022-jp-3.c: Likewise.
	* iconvdata/iso-2022-jp.c (gconv_end): Likewise.
	* iconvdata/iso-2022-kr.c : Likewise.
	* iconvdata/iso646.c (gconv_end): Likewise.
	* iconvdata/iso_6937-2.c : Likewise.
	* iconvdata/iso_6937.c : Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/johab.c (johab_sym_hanja_to_ucs): Likewise.
	* iconvdata/shift_jisx0213.c : Likewise.
	* iconvdata/sjis.c : Likewise.
	* iconvdata/t.61.c : Likewise.
	* iconvdata/tcvn5712-1.c : Likewise.
	* iconvdata/tscii.c: Likewise.
	* iconvdata/uhc.c : Likewise.
	* iconvdata/unicode.c (gconv_end): Likewise.
	* iconvdata/utf-16.c (gconv_end): Likewise.
	* iconvdata/utf-32.c (gconv_end): Likewise.
	* iconvdata/utf-7.c (base64): Likewise.
	* iconv/gconv_cache.c (__gconv_load_cache): Likewise.
	* iconv/gconv_close.c (__gconv_close): Likewise.
	* iconv/gconv_open.c (__gconv_open): Likewise.
	* iconv/gconv_simple.c (internal_ucs4_loop_single)
	(ucs4_internal_loop, ucs4_internal_loop_unaligned)
	(ucs4_internal_loop_single, internal_ucs4le_loop_single)
	(ucs4le_internal_loop, ucs4le_internal_loop_unaligned)
	(ucs4le_internal_loop_single): Likewise.
	* iconv/iconv.c (iconv): Likewise.
	* iconv/iconv_close.c: Likewise.
	* iconv/loop.c (SINGLE): Likewise.
	* iconv/skeleton.c (FUNCTION_NAME): Likewise.
	* include/atomic.h: Likewise.
	* inet/inet6_option.c (option_alloc): Likewise.
	* intl/bindtextdom.c (set_binding_values): Likewise.
	* intl/dcigettext.c (DCIGETTEXT, _nl_find_msg): Likewise.
	* intl/loadmsgcat.c (_nl_load_domain): Likewise.
	* intl/localealias.c (read_alias_file): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Likewise.
	* libio/fileops.c (_IO_file_open, _IO_file_underflow_mmap)
	(_IO_new_file_overflow, _IO_file_xsgetn_mmap): Likewise.
	* libio/fmemopen.c (fmemopen): Likewise.
	* libio/iofgets.c (_IO_fgets): Likewise.
	* libio/iofgets_u.c (fgets_unlocked): Likewise.
	* libio/iofgetws.c (fgetws): Likewise.
	* libio/iofgetws_u.c (fgetws_unlocked): Likewise.
	* libio/iogetdelim.c (_IO_getdelim): Likewise.
	* libio/wfileops.c (_IO_wfile_underflow, _IO_wfile_underflow_mmap)
	(adjust_wide_data, _IO_wfile_seekoff): Likewise.
	* locale/findlocale.c (_nl_find_locale): Likewise.
	* locale/loadarchive.c (_nl_load_locale_from_archive): Likewise.
	* locale/loadlocale.c (_nl_intern_locale_data, _nl_load_locale):
	Likewise.
	* locale/setlocale.c (setlocale): Likewise.
	* login/programs/pt_chown.c (main): Likewise.
	* malloc/arena.c (ptmalloc_init, shrink_heap, arena_get2): Likewise.
	* malloc/malloc.c (_int_malloc, _int_free): Likewise.
	* malloc/memusage.c (update_data, malloc, realloc, calloc, free)
	(mmap, mmap64, mremap, munmap): Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_scalb.c (invalid_fn, __ieee754_scalb): Likewise.
	* math/e_scalbf.c (invalid_fn, __ieee754_scalbf): Likewise.
	* math/e_scalbl.c (invalid_fn, __ieee754_scalbl): Likewise.
	* math/s_catan.c (__catan): Likewise.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/s_ccosh.c (__ccosh): Likewise.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexp.c (__cexp): Likewise.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clog.c (__clog): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csqrt.c (__csqrt): Likewise.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_scalb.c (sysv_scalb): Likewise.
	* math/w_scalbf.c (sysv_scalbf): Likewise.
	* math/w_scalbl.c (sysv_scalbl): Likewise.
	* misc/error.c (error_tail): Likewise.
	* misc/pselect.c (__pselect): Likewise.
	* nis/nis_callback.c (__nis_create_callback): Likewise.
	* nis/nis_call.c (__nisfind_server): Likewise.
	* nis/nis_creategroup.c (nis_creategroup): Likewise.
	* nis/nis_domain_of_r.c (nis_domain_of_r): Likewise.
	* nis/nis_findserv.c (__nis_findfastest_with_timeout): Likewise.
	* nis/nis_getservlist.c (nis_getservlist): Likewise.
	* nis/nis_lookup.c (nis_lookup): Likewise.
	* nis/nis_subr.c (nis_leaf_of_r, nis_getnames): Likewise.
	* nis/nis_table.c (__create_ib_request, nis_list, nis_add_entry)
	(nis_modify_entry, nis_first_entry, nis_next_entry): Likewise.
	* nis/nis_xdr.c (xdr_endpoint): Likewise.
	* nis/nss_compat/compat-grp.c (getgrent_next_file)
	(internal_getgrnam_r, internal_getgrgid_r): Likewise.
	* nis/nss_compat/compat-initgroups.c (add_group)
	(internal_getgrent_r): Likewise.
	* nis/nss_compat/compat-pwd.c (getpwent_next_file)
	(internal_getpwnam_r, internal_getpwuid_r): Likewise.
	* nis/nss_compat/compat-spwd.c (getspent_next_file)
	(internal_getspnam_r): Likewise.
	* nis/nss_nis/nis-alias.c (internal_nis_getaliasent_r)
	(_nss_nis_getaliasbyname_r): Likewise.
	* nis/nss_nis/nis-ethers.c (_nss_nis_gethostton_r)
	(_nss_nis_getntohost_r): Likewise.
	* nis/nss_nis/nis-grp.c (internal_nis_setgrent)
	(internal_nis_getgrent_r, _nss_nis_getgrnam_r)
	(_nss_nis_getgrgid_r): Likewise.
	* nis/nss_nis/nis-hosts.c (_nss_nis_sethostent)
	(internal_nis_gethostent_r, internal_gethostbyname2_r)
	(_nss_nis_gethostbyname_r, _nss_nis_gethostbyaddr_r)
	(_nss_nis_gethostbyname4_r): Likewise.
	* nis/nss_nis/nis-initgroups.c (internal_getgrent_r)
	(initgroups_netid): Likewise.
	* nis/nss_nis/nis-netgrp.c (_nss_nis_setnetgrent): Likewise.
	* nis/nss_nis/nis-network.c (internal_nis_getnetent_r)
	(_nss_nis_getnetbyname_r, _nss_nis_getnetbyaddr_r): Likewise.
	* nis/nss_nis/nis-proto.c (_nss_nis_getprotobyname_r)
	(_nss_nis_getprotobynumber_r): Likewise.
	* nis/nss_nis/nis-publickey.c (_nss_nis_getpublickey)
	(_nss_nis_getsecretkey): Likewise.
	* nis/nss_nis/nis-pwd.c (_nis_saveit, internal_nis_setpwent)
	(internal_nis_getpwent_r, _nss_nis_getpwnam_r)
	(_nss_nis_getpwuid_r): Likewise.
	* nis/nss_nis/nis-rpc.c (internal_nis_getrpcent_r)
	(_nss_nis_getrpcbyname_r, _nss_nis_getrpcbynumber_r): Likewise.
	* nis/nss_nis/nis-service.c (dosearch, internal_nis_getservent_r)
	(_nss_nis_getservbyname_r, _nss_nis_getservbyport_r): Likewise.
	* nis/nss_nis/nis-spwd.c (_nss_nis_setspent)
	(internal_nis_getspent_r, _nss_nis_getspnam_r): Likewise.
	* nis/nss_nisplus/nisplus-alias.c (_nss_nisplus_getaliasbyname_r):
	Likewise.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_gethostton_r)
	(_nss_nisplus_getntohost_r): Likewise.
	* nis/nss_nisplus/nisplus-grp.c (internal_nisplus_getgrent_r)
	(_nss_nisplus_getgrnam_r, _nss_nisplus_getgrgid_r): Likewise.
	* nis/nss_nisplus/nisplus-hosts.c (internal_gethostbyname2_r)
	(_nss_nisplus_gethostbyaddr_r, _nss_nisplus_gethostbyname4_r):
	Likewise.
	* nis/nss_nisplus/nisplus-initgroups.c
	(_nss_nisplus_initgroups_dyn): Likewise.
	* nis/nss_nisplus/nisplus-network.c (_nss_nisplus_getnetbyname_r)
	(_nss_nisplus_getnetbyaddr_r): Likewise.
	* nis/nss_nisplus/nisplus-proto.c (_nss_nisplus_getprotobyname_r)
	(_nss_nisplus_getprotobynumber_r): Likewise.
	* nis/nss_nisplus/nisplus-pwd.c (internal_nisplus_getpwent_r)
	(_nss_nisplus_getpwnam_r, _nss_nisplus_getpwuid_r): Likewise.
	* nis/nss_nisplus/nisplus-rpc.c (_nss_nisplus_getrpcbyname_r):
	Likewise.
	* nis/nss_nisplus/nisplus-service.c
	(internal_nisplus_getservent_r, _nss_nisplus_getservbyname_r)
	(_nss_nisplus_getservbyport_r): Likewise.
	* nis/nss_nisplus/nisplus-spwd.c (internal_nisplus_getspent_r)
	(_nss_nisplus_getspnam_r): Likewise.
	* nis/ypclnt.c (__yp_bind, yp_match, yp_all, yp_maplist):
	Likewise.
	* nscd/aicache.c (addhstaiX): Likewise.
	* nscd/cache.c (cache_search, prune_cache): Likewise.
	* nscd/connections.c (register_traced_file, send_ro_fd)
	(handle_request, nscd_run_prune, nscd_run_worker, fd_ready)
	(main_loop_epoll): Likewise.
	* nscd/grpcache.c (addgrbyX): Likewise.
	* nscd/hstcache.c (addhstbyX): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/mem.c (gc, mempool_alloc): Likewise.
	* nscd/netgroupcache.c (do_notfound, addgetnetgrentX)
	(addinnetgrX): Likewise.
	* nscd/nscd-client.h (__nscd_acquire_maplock)
	(__nscd_drop_map_ref): Likewise.
	* nscd/nscd_getai.c (__nscd_getai): Likewise.
	* nscd/nscd_getgr_r.c (nscd_getgr_r): Likewise.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp, nscd_gethst_r):
	Likewise.
	* nscd/nscd_getpw_r.c (nscd_getpw_r): Likewise.
	* nscd/nscd_getserv_r.c (nscd_getserv_r): Likewise.
	* nscd/nscd_helper.c (__readvall, open_socket, __nscd_get_mapping)
	(__nscd_get_map_ref): Likewise.
	* nscd/nscd_initgroups.c (__nscd_getgrouplist): Likewise.
	* nscd/nscd_netgroup.c (__nscd_setnetgrent, __nscd_innetgr):
	Likewise.
	* nscd/pwdcache.c (addpwbyX): Likewise.
	* nscd/selinux.c (preserve_capabilities): Likewise.
	* nscd/servicescache.c (addservbyX): Likewise.
	* nss/nss_files/files-XXX.c (internal_getent): Likewise.
	* posix/fnmatch.c (fnmatch): Likewise.
	* posix/getopt.c (_getopt_internal_r): Likewise.
	* posix/glob.c (glob, glob_in_dir): Likewise.
	* posix/wordexp.c (exec_comm_child): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr2_r)
	(getanswer_r, gaih_getanswer_slice): Likewise.
	* resolv/nss_dns/dns-network.c (getanswer_r): Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c (res_nmkquery): Likewise.
	* resolv/res_query.c (__libc_res_nquery): Likewise.
	* resolv/res_send.c (__libc_res_nsend, send_vc, reopen, send_dg):
	Likewise.
	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Likewise.
	* stdio-common/perror.c (perror): Likewise.
	* stdio-common/printf_fp.c (___printf_fp): Likewise.
	* stdio-common/tmpnam.c (tmpnam): Likewise.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Likewise.
	* stdlib/cxa_finalize.c (__cxa_finalize): Likewise.
	* stdlib/cxa_thread_atexit_impl.c (__cxa_thread_atexit_impl):
	Likewise.
	* stdlib/drand48-iter.c (__drand48_iterate): Likewise.
	* stdlib/putenv.c (putenv): Likewise.
	* stdlib/setenv.c (__add_to_environ): Likewise.
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Likewise.
	* stdlib/strtol_l.c (INTERNAL): Likewise.
	* string/memmem.c (memmem): Likewise.
	* string/strerror.c (strerror): Likewise.
	* string/strnlen.c (__strnlen): Likewise.
	* string/test-memmem.c (simple_memmem): Likewise.
	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Likewise.
	* sunrpc/pm_getport.c (__get_socket): Likewise.
	* sysdeps/gnu/unwind-resume.c (init, _Unwind_Resume): Likewise.
	* sysdeps/i386/dl-irel.h (elf_irel): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rel, elf_machine_lazy_rel, elf_machine_lazy_rela):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c (__ieee754_atanh): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c (__ieee754_fmod): Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (__ieee754_gamma_r): Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c (__ieee754_j1, __ieee754_y1):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn, __ieee754_yn):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c (__ieee754_log10): Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c (__ieee754_log2): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c (__ieee754_sinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c (__asinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c (__modf): Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c (__scalbln): Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (__scalbn): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c (__ieee754_acosh):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c (__ieee754_log10):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log2.c (__ieee754_log2):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c (__frexp): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c (__remquo): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c (__round): Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c (__ieee754_atanhf): Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (__ieee754_gammaf_r): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logbf): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_nearbyint): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c (__llrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c (__llroundl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c (__lroundl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c (__ieee754_j0l, __ieee754_y0l):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l, __ieee754_y1l):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl, __ieee754_ynl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* sysdeps/posix/clock_getres.c (hp_timing_getres, realtime_getres):
	Likewise.
	* sysdeps/posix/fdopendir.c (__fdopendir): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet, getaddrinfo): Likewise.
	* sysdeps/posix/opendir.c (__opendirat): Likewise.
	* sysdeps/posix/sleep.c: Likewise.
	* sysdeps/posix/tempname.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-irel.h (elf_irela): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h
	(elf_machine_runtime_setup, elf_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/pthread/aio_notify.c (__aio_notify_only): Likewise.
	* sysdeps/pthread/aio_suspend.c (do_aio_misc_wait, aio_suspend):
	Likewise.
	* sysdeps/s390/dl-irel.h (elf_irela): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/utf16-utf32-z9.c (gconv_end): Likewise.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c (gconv_end): Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c (gconv_end): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc32/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela)
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela)
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-plt.h (sparc64_fixup_plt): Likewise.
	* sysdeps/unix/clock_gettime.c (hp_timing_gettime): Likewise.
	* sysdeps/unix/clock_settime.c (hp_timing_settime): Likewise.
	* sysdeps/unix/grantpt.c (grantpt): Likewise.
	* sysdeps/unix/sysv/linux/accept4.c (accept4): Likewise.
	* sysdeps/unix/sysv/linux/adjtime.c (ADJTIME): Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c (__check_pf): Likewise.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Likewise.
	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Likewise.
	* sysdeps/unix/sysv/linux/fchmodat.c (fchmodat): Likewise.
	* sysdeps/unix/sysv/linux/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/futimesat.c (futimesat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat64.c (__fxstatat64): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c (fallocate64): Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate.c (fallocate): Likewise.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c (__get_clockfreq):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate.c
	(posix_fallocate): Likewise.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (__old_scandir64):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c (__netlink_request)
	(getifaddrs_internal): Likewise.
	* sysdeps/unix/sysv/linux/linkat.c (linkat): Likewise.
	* sysdeps/unix/sysv/linux/mkdirat.c (mkdirat): Likewise.
	* sysdeps/unix/sysv/linux/mq_unlink.c (mq_unlink): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Likewise.
	* sysdeps/unix/sysv/linux/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/posix_fallocate.c (posix_fallocate):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c
	(__get_clockfreq): Likewise.
	* sysdeps/unix/sysv/linux/readlinkat.c (readlinkat): Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (recvmmsg): Likewise.
	* sysdeps/unix/sysv/linux/renameat.c (renameat): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sched_setaffinity.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__sendmmsg): Likewise.
	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs, shm_open):
	Likewise.
	* sysdeps/unix/sysv/linux/sleep.c (__sleep): Likewise.
	* sysdeps/unix/sysv/linux/symlinkat.c (symlinkat): Likewise.
	* sysdeps/unix/sysv/linux/tcgetattr.c (__tcgetattr): Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.
	* sysdeps/unix/sysv/linux/unlinkat.c (unlinkat): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c (__fxstatat):
	Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/xmknodat.c (__xmknodat): Likewise.
	* sysdeps/x86_64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_rela_relative)
	(elf_machine_lazy_rel): Likewise.
	* time/asctime.c (asctime_internal): Likewise.
	* time/tzfile.c (__tzfile_read, __tzfile_compute): Likewise.
	* time/tzset.c (__tzset_parse_tz): Likewise.
	* wcsmbs/mbrtoc16.c (mbrtoc16): Likewise.
	* wcsmbs/mbrtowc.c (__mbrtowc): Likewise.
	* wcsmbs/wcsmbsload.c (__wcsmbs_load_conv): Likewise.
	* wcsmbs/wcsmbsload.h: Likewise.

	[BZ #15894]
	* stdlib/setenv.c (__add_to_environ): Remove duplicate code.

	* malloc/arena.c (grow_heap, get_free_list, reused_arena)
	(arena_get2): Remove THREAD_STATS conditionals.
	* malloc/malloc.c (__malloc_assert, __libc_realloc, _int_free)
	(__malloc_stats, int): Likewise.

2014-02-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs): Compare
	f.f_type to RAMFS_MAGIC too.  Compare mp->mnt_type to shm too.

	* manual/setjmp.texi: Fix typos/grammar errors.

	* debug/tst-backtrace4.c (handle_signal): Add NUM_FUNCTIONS to output.
	Only return early when n is <= 0.  Delete unused return statement.

	* debug/Makefile (CFLAGS-tst-longjmp_chk3.c): Define.
	(CPPFLAGS-tst-longjmp_chk3.c): Likewise.
	* debug/tst-longjmp_chk3.c: New file.

	* benchtests/bench-strcpy_chk.c: Move test-skeleton.c to top.
	(test_main): Replace code with set_fortify_handler call.
	* debug/test-strcpy_chk.c: Likewise.
	* debug/tst-chk1.c: Likewise.
	* debug/tst-longjmp_chk.c: Likewise.
	* test-skeleton.c: Include fcntl.h & paths.h
	(set_fortify_handler): Define.

	* debug/tst-longjmp_chk.c: Add header comment and include
	../test-skeleton.c.
	(do_test): Mark static.
	(TEST_FUNCTION): Define.

	* sysdeps/unix/sysv/linux/bits/in.h (IP_NODEFRAG): Define.
	(IP_PMTUDISC_INTERFACE): Likewise.
	(IP_MULTICAST_IF): Likewise.
	(IP_MULTICAST_TTL): Likewise.
	(IP_MULTICAST_LOOP): Likewise.
	(IP_ADD_MEMBERSHIP): Likewise.
	(IP_DROP_MEMBERSHIP): Likewise.
	(IP_UNBLOCK_SOURCE): Likewise.
	(IP_BLOCK_SOURCE): Likewise.
	(IP_ADD_SOURCE_MEMBERSHIP): Likewise.
	(IP_DROP_SOURCE_MEMBERSHIP): Likewise.
	(IP_MSFILTER): Likewise.
	(MCAST_JOIN_GROUP): Likewise.
	(MCAST_BLOCK_SOURCE): Likewise.
	(MCAST_UNBLOCK_SOURCE): Likewise.
	(MCAST_LEAVE_GROUP): Likewise.
	(MCAST_JOIN_SOURCE_GROUP): Likewise.
	(MCAST_LEAVE_SOURCE_GROUP): Likewise.
	(MCAST_MSFILTER): Likewise.
	(IP_MULTICAST_ALL): Likewise.
	(IP_UNICAST_IF): Likewise.

	* timezone/Makefile: Delete $(have-ksh) check.
	($(objpfx)tzselect): Change $(KSH) to $(BASH).
	* timezone/tzselect.ksh: Add +x mode bits.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (AFS_SUPER_MAGIC): Define.
	(ANON_INODE_FS_MAGIC): Likewise.
	(BDEVFS_MAGIC): Likewise.
	(BINFMTFS_MAGIC): Likewise.
	(BTRFS_TEST_MAGIC): Likewise.
	(CRAMFS_MAGIC_WEND): Likewise.
	(DEBUGFS_MAGIC): Likewise.
	(ECRYPTFS_SUPER_MAGIC): Likewise.
	(EXT3_SUPER_MAGIC): Likewise.
	(EXT4_SUPER_MAGIC): Likewise.
	(FUTEXFS_SUPER_MAGIC): Likewise.
	(HOSTFS_SUPER_MAGIC): Likewise.
	(HUGETLBFS_MAGIC): Likewise.
	(MINIX3_SUPER_MAGIC): Likewise.
	(MTD_INODE_FS_MAGIC): Likewise.
	(NILFS_SUPER_MAGIC): Likewise.
	(OPENPROM_SUPER_MAGIC): Likewise.
	(PIPEFS_MAGIC): Likewise.
	(PSTOREFS_MAGIC): Likewise.
	(QNX6_SUPER_MAGIC): Likewise.
	(RAMFS_MAGIC): Likewise.
	(REISERFS_SUPER_MAGIC_STRING): Likewise.
	(REISER2FS_SUPER_MAGIC_STRING): Likewise.
	(REISER2FS_JR_SUPER_MAGIC_STRING): Likewise.
	(SECURITYFS_MAGIC): Likewise.
	(SELINUX_MAGIC): Likewise.
	(SMACK_MAGIC): Likewise.
	(SOCKFS_MAGIC): Likewise.
	(SQUASHFS_MAGIC): Likewise.
	(STACK_END_MAGIC): Likewise.
	(TMPFS_MAGIC): Likewise.
	(USBDEVICE_SUPER_MAGIC): Likewise.
	(V9FS_MAGIC): Likewise.
	(XENFS_SUPER_MAGIC): Likewise.
	(CRAMFS_MAGIC): Fix typo in comment.
	(EXT2_SUPER_MAGIC): Update comment.
	(USBDEVFS_SUPER_MAGIC): Fix sorting order by moving further down.

2014-02-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm: Move directory from ports/sysdeps/arm.
	* sysdeps/unix/arm: Move directory from ports/sysdeps/unix/arm.
	* sysdeps/unix/sysv/linux/arm: Move directory from
	ports/sysdeps/unix/sysv/linux/arm.
	* README: Update listing for arm-*-linux-gnueabi.

	* README: Remove mention of am33.

2014-02-07  Roland McGrath  <roland@hack.frob.com>

	* bits/sigset.h (__sigemptyset): Use a statement expression rather
	than the comma operator, to avoid "rhs of comma has no effect"
	compiler warnings.
	(__sigfillset, __sigandset, __sigorset): Likewise.
	* include/signal.h (__sigemptyset): Likewise.
	* sysdeps/generic/malloc-machine.h (mutex_lock): Likewise.

2014-02-07  Allan McRae  <allan@archlinux.org>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.19.90"
	* NEWS: Add 2.20 section.

2014-02-06  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16529]
	* inet/netinet/in.h: Remove comma after IPPROTO_MH.

2014-02-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/contrib.texi: Update entry for Carlos O'Donell,
	Joseph Myers, Roland McGrath, Alexandre Oliva and Ryan Arnold.

2014-02-05  Carlos O'Donell  <carlos@rehdat.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Fix comment.

	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]
	(__ASSUME_PROC_PID_TASK_COMM): Define.

2014-02-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16398]
	* libio/wfileops.c (_IO_wfile_seekoff): Break out form
	conversion when destination buffer does not have enough space.
	* libio/tst-ftell-partial-wide.c: New test case.
	* libio/Makefile (tests): Add tst-ftell-partial-wide.

	* manual/contrib.texi: Update entry for Ondrej Bilka, Will
	Newton and Alexandre Oliva.  Add entries for Steve Ellcey, Chris
	Leonard and Allan McRae.

2014-02-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update for some 64-bit differences from
	32-bit.

2014-02-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld-le.abilist:
	New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale-le.abilist:
	New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil-le.abilist:
	New file.

2014-02-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/shlib-versions: Change powerpc*le start to 2.17.
	* shlib-versions: Likewise.

2014-02-04  Roland McGrath  <roland@hack.frob.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile [$(config-machine) ends with 'le']
	(abilist-pattern): New variable, set to %-le.abilist.

	* Makerules (abilist-pattern): New variable.
	(vpath): Use $(abilist-pattern) in place of %.abilist.
	(check-abi-% pattern rule): Likewise.
	(check-abi, update-abi): Likewise.

2014-02-04  Eric Wong  <normalperson@yhbt.net>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2014-02-03  Carlos O'Donell  <carlos@redhat.com>

	* manual/startup.texi: Add next, previous, and top entries for
	the `Program Arguments' and `Environment Variables' nodes.

2014-02-03  Alexandre Oliva <aoliva@redhat.com>

	* manual/macros.texi: Add comments before MTASC-safety macros.

	* manual/users.texi: Document MTASC-safety properties.

	* manual/threads.texi (pthread_key_create, pthread_key_delete)
	(pthread_getspecific, pthread_setspecific): Format with
	@deftypefun, and add @safety note.
	* manual/signal.texi: Move comments that analyze the above
	functions to their home place.

2014-02-03  Allan McRae  <allan@archlinux.org>

	* po/sl.po: Update Slovenian translation from translation project.

2014-02-02  Alexandre Oliva <aoliva@redhat.com>

	* manual/time.texi (timegm): Add missing blank after @c.
	Reported by Joseph Myers <joseph@codesourcery.com>.

2014-02-01  Alexandre Oliva <aoliva@redhat.com>

	* manual/check-safety.sh: New.
	* manual/Makefile ($(objpfx)stamp-summary): Run it.

	* manual/terminal.texi: Document MTASC-safety properties.

	* manual/filesys.texi: Document MTASC-safety properties.

	* manual/errno.texi: Document MTASC-safety properties.

	* manual/intro.texi: Document safety identifiers and
	conditionals.

	* manual/string.texi (wcstok): Fix prototype.
	(wcstok, strtok, strtok_r): Adjust reentrancy remarks.

	* manual/time.texi: Document MTASC-safety properties.

	* manual/string.texi: Document MTASC-safety properties.

	* manual/threads.texi: Document MTASC-safety properties.

	* manual/stdio.texi: Document MTASC-safety properties.

	* manual/syslog.texi: Document MTASC-safety properties.

	* manual/sysinfo.texi: Document MTASC-safety properties.

	* manual/startup.texi: Document MTASC-safety properties.

	* manual/socket.texi: Document MTASC-safety properties.

	* manual/signal.texi: Document MTASC-safety properties.

2014-01-31  Alexandre Oliva <aoliva@redhat.com>

	* manual/setjmp.texi: Document MTASC-safety properties.

	* manual/search.texi: Document MTASC-safety properties.

	* manual/resource.texi: Document MTASC-safety properties.

	* manual/process.texi: Document MTASC-safety properties.

	* manual/platform.texi: Document MTASC-safety properties.

	* manual/pipe.texi: Document MTASC-safety properties.

	* manual/pattern.texi: Document MTASC-safety properties.

	* manual/message.texi: Document MTASC-safety properties.

	[BZ #12751]
	* manual/memory.texi: Document MTASC-safety properties.

	* manual/math.texi: Document MTASC-safety properties.

	* manual/locale.texi: Document MTASC-safety properties.

	* manual/llio.texi: Document MTASC-safety properties.

	* manual/libdl.texi: New.

	* manual/lang.texi: Document MTASC-safety properties.

	* manual/job.texi: Document MTASC-safety properties.

	* manual/getopt.texi: Document MTASC-safety properties.

	* manual/ctype.texi: Document MTASC-safety properties.

2014-01-31  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #16046]
	* csu/libc-tls.c (static_map): Remove variable.
	(__libc_setup_tls): Use main executable's link map for TLS data.
	* elf/dl-close.c (_dl_close_worker) [!SHARED]: Remove special
	casing for LM_ID_BASE and GL(dl_nns).
	* elf/dl-iteratephdr.c [!SHARED] (dl_iterate_phdr): Remove
	function.  Alias dl_iterate_phdr to __dl_iterate_phdr.
	* elf/dl-load.c (_dl_map_object) [!SHARED]: Remove special
	casing for GL(dl_ns)[LM_ID_BASE]._ns_loaded.
	* elf/dl-support.c (_dl_main_map): Also initialize l_flags_1
	member.
	(_dl_non_dynamic_init): Also initialize _dl_main_map's l_phdr and
	l_phnum members.

2014-01-30  Alexandre Oliva <aoliva@redhat.com>

	* manual/debug.texi: Document MTASC-safety properties.

2014-01-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #16510]
	* sysdeps/x86/fpu/bits/mathinline.h: Check __SSE2_MATH__ instead
	of __x86_64__ when disabling x87 inline functions.

2014-01-29  Alexandre Oliva <aoliva@redhat.com>

	* manual/charset.texi: Document MTASC-safety properties.

	* manual/crypt.texi: Document MTASC-safety properties.

	* manual/conf.texi: Document MTASC-safety properties.

	* manual/arith.texi: Document MTASC-safety properties.

	* manual/argp.texi: Document MTASC-safety properties.

	* manual/macros.texi: Introduce macros to document multi
	thread, asynchronous signal and asynchronous cancellation
	safety properties.
	* manual/intro.texi: Introduce the properties themselves.

2014-01-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/Makefile: New file.

2014-01-27  Andreas Schwab  <schwab@linux-m68k.org>

	* math/gen-libm-test.pl ($srcdir): New variable.
	($auto_input): Use it.

2014-01-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16506]
	* nss/nss_files/files-netgrp.c (_nss_files_setnetgrent): Avoid
	access beyond array bounds when parsing netgroups file.

	* nscd/netgroupcache.c (addgetnetgrentX): Compute offset from
	the old buffer before realloc.

2014-01-27  Allan McRae  <allan@archlinux.org>

	* po/fr.po: Update French translation from translation project.

2014-01-26  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/libm-test-ulps: Regenerate.

2014-01-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerate.

2014-01-25  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/libm-test-ulps: Move to ...
	* sysdeps/sh/libm-test-ulps: ... here and regenerated.

2013-01-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16474]
	* nscd/netgroupcache.c (addgetnetgrentX): Adjust triplet
	string pointers after reallocation.

2014-01-24  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: Use __SH4__ and
	__SH4A__ instead of __SH_FPU_ANY__.

2014-01-23  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/fpu_control.h: New file.
	* sysdeps/sh/sh4/fpu/fpu_control.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: New file.
	* sysdeps/unix/sysv/linux/sh/sh3/sys/ucontext.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sh3/sys: Remove directory.
	* sysdeps/unix/sysv/linux/sh/sh4/sys/ucontext.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sh4/sys: Remove directory.
	* sysdeps/sh/sys/ucontext.h: Remove.
	* sysdeps/sh/sys: Remove directory.

2014-01-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/sys/ucontext.h: Merge into
	s390/sys/ucontext.h.
	* sysdeps/unix/sysv/linux/s390/s390-64/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: New file.

2014-01-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #15605]
	* sysdeps/x86_64/x32/symbol-hacks.h: Include generic symbol-hacks.h.

2014-01-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ#16431]
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c (__gettimeofday):
	Adjust the vDSO correctly for internal calls.
	* sysdeps/unix/sysv/linux/powerpc/time.c (time): Likewise.

2014-01-20  Allan McRae  <allan@archlinux.org>

	* po/ca.po: Update Catalan translation from translation project.

2014-01-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/s390/sotruss-lib.c: New file.

2014-01-16  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ#16430]
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c
	(__GI___gettimeofday): Alias for a different internal symbol to avoid
	local calls issues by not having a PLT stub required for IFUNC calls.
	* sysdeps/unix/sysv/linux/powerpc/time.c (__GI_time): Likewise.

2014-01-16 Joseph Myers  <joseph@codesourcery.com>

	* math/test-fpucw-ieee.c: Use <> in #include of test-fpucw.c.
	* math/test-fpucw-static.c: Likewise.

2013-01-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16453]
	* nscd/netgroupcache.c (addgetnetgrentX): Don't use alloca.

2014-01-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/sotruss-lib.c: New file: sotruss-lib.so
	implementation for powerpc.

2014-01-15  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14782]
	* sysdeps/posix/system.c (__libc_system): Do not enable
	asynchronous cancellation.

2014-01-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #16427]
	* sysdeps/ieee754/ldbl-128/w_expl.c (__expl): Invoke the non-IEEE
	handling only for numbers special also in the IEEE case.

2014-01-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-01-11  Allan McRae  <allan@archlinux.org>

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/de.po: Update German translation from translation project.

2014-01-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/gcc-compat.h: New file.

2014-01-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/asin-inputs: Correct slow inputs.
	* benchtests/acos-inputs: Likewise.

2014-01-10  Allan McRae  <allan@archlinux.org>

	* po:sv.po: Update Swedish translation from translation project.

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/eo.po: Update Esperanto translation from translation project.

	* po/cs.po: Update Czech translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.

	* po/pl.po: Update Polish translation from translation project.

	* po/ru.po: Update Russian translation from translation project.

	* po/uk.po: Update Ukrainian translation from translation project.

2014-01-08  Brooks Moses  <bmoses@google.com>

	* elf/dl-load.c: Fix comment typo.

2014-01-08  Carlos O'Donell  <carlos@redhat.com>

	* po/header.pot: Rename to...
	* po/pot.header: ... this.
	* po/Makefile: Use pot.header.

2014-01-08  Yuriy Kaminskiy  <yumkam@gmail.com>
	    Maxim Kuvyrkov  <maxim@kugelworks.com>

	[BZ #16394]
	* sysdeps/i386/i686/memmove.S (memmove): Compare distance between
	SRC and DEST against LEN.

2014-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16414]
	* sysdeps/powerpc/powerpc64/fpu/s_truncl.S: Remove wrong
	implementation.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c: Remove bogus comment.

2014-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-01-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16408]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (__expm1l): Use __expl
	for large positive arguments.

2014-01-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* math/auto-libm-test-in: Mark various tests with
	xfail-rounding:ldbl-128ibm.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16407]
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl):
	Increase overflow threshold.

2014-01-07  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14286]
	* stdio-common/vfprintf.c: Check for integer overflow.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-tls.h: sysdeps/s390/dl-tls.h: Remove casts for
	the first argument and return value of __tls_get_addr_internal.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h: Gate the definition of refsym
	also with !RTLD_BOOTSTRAP to get rid of unused variable warning.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/Makefile: Build rtld-global-offsets.sym.
	* sysdeps/s390/rtld-global-offsets.sym: New file.
	* sysdeps/unix/sysv/linux/s390/Versions: Add getcontext as new
	GLIBC_2.19 symbol.
	* sysdeps/unix/sysv/linux/s390/getcontext.S: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Rename to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext-common.S:
	... this.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: Rename to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext-common.S:
	... this.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S: Restore upper
	halfs of GPRs for high_gprs contexts.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Save and
	restore upper halfs of GPRs for high_gprs contexts.  Copy uc_flags
	field.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Copy
	uc_flags field.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: Split into 32 and
	64 bit versions:
	* sysdeps/unix/sysv/linux/s390/s390-32/sys/ucontext.h: Add field
	for high GPRs (uc_high_gprs) and for future extensions
	(__reserved).
	* sysdeps/unix/sysv/linux/s390/s390-64/sys/ucontext.h: Add field
	for future extensions (__reserved).
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym: Split into 32 and
	64 bit versions:
	* sysdeps/unix/sysv/linux/s390/s390-32/ucontext_i.sym: Add
	SC_HIGHGPRS offset definition.
	* sysdeps/unix/sysv/linux/s390/s390-64/ucontext_i.sym: New file.
	* sysdeps/unix/sysv/linux/s390/rtld-getcontext.S: New file.

	* Versions.def: Add GLIBC_2.19 for libpthread.
	* nptl/sysdeps/unix/sysv/linux/s390/Versions: Add longjmp and
	siglongjmp for libpthread with GLIBC_2.19 symver.
	* nptl/sysdeps/unix/sysv/linux/s390/pt-longjmp.c: New file.
	* sysdeps/s390/Makefile: Build v1-longjmp.c and v1-sigjmp.c.
	* sysdeps/s390/Versions: New GLIBC_2.19 and GLIBC_PRIVATE symbols.
	* sysdeps/s390/__longjmp.c: New file.
	* sysdeps/s390/bits/setjmp.h: Add new fields to __s390_jmp_buf.
	* sysdeps/s390/longjmp.c: New file.
	* sysdeps/s390/setjmp.S: New file.
	* sysdeps/s390/sigjmp.S: New file.
	* sysdeps/s390/v1-longjmp.c: New file.
	* sysdeps/s390/v1-setjmp.h: New file.
	* sysdeps/s390/v1-sigjmp.c: New file.
	* sysdeps/unix/sysv/linux/s390/Makefile: Build __longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/Versions: Add __longjmp_chk with
	GLIBC_2.19 version.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/____longjmp_chk.c: Provide
	versioned symbols for ____longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/s390-64/____longjmp_chk.c:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/v1-longjmp_chk.c: New file.
	* sysdeps/s390/s390-32/__longjmp.c: Rename to ...
	* sysdeps/s390/s390-32/__longjmp-common.c: ... this.
	* sysdeps/s390/s390-32/setjmp.S: Rename and adjust to ...
	* sysdeps/s390/s390-32/setjmp-common.S: ... this.
	* sysdeps/s390/s390-64/__longjmp.c: Rename to ...
	* sysdeps/s390/s390-64/__longjmp-common.c: ... this.
	* sysdeps/s390/s390-64/setjmp.S: Rename and adjust to ...
	* sysdeps/s390/s390-64/setjmp-common.S: ... this.
	* sysdeps/s390/rtld-__longjmp.c: New file.
	* sysdeps/s390/rtld-setjmp.S: New file.

2014-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16400]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r):
	Return -__logl (x) for small positive arguments without evaluating
	a polynomial.

2014-01-06  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sys/ptrace.h (ptrace_peeksiginfo_args):
	Rename to ...
	(__ptrace_peeksiginfo_args): ... this.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.

2014-01-06  Allan McRae  <allan@archlinux.org>

	* inet/netinet/in.h: Fix typo in comment.

2014-01-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2014-01-05  Allan McRae  <allan@archlinux.org>

	* po/libc.pot: Regenerated.

	* malloc/memusagestat.c: Fix gettext call formatting.

2014-01-04  Sami Kerola  <kerolasa@iki.fi>

	* nscd/nscd.c: Improve usage() output.

2014-01-04  Mike Frysinger  <vapier@gentoo.org>

	* config.h.in: Add HAVE_LINUX_FANOTIFY_H template.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Call AC_DEFINE.
	* sysdeps/unix/sysv/linux/tst-fanotify.c: Include config.h.

2014-01-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16390]
	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = math]
	(CFLAGS-e_atan2l.c): Use -fno-builtin-fabsl.

2014-01-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power7.S: Remove
	extra tokens at end of #undef directive.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c: Likewise.

2014-01-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* math/auto-libm-test-in: Mark various tests with
	xfail-rounding:ldbl-128ibm.
	* math/auto-libm-test-out: Regenerated.

2014-01-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16386]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Adjust
	numbers with subnormal high part when calculating exponent.

	[BZ #16385]
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Use fabsl not
	fabs.

	[BZ #16384]
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (ln2): Initialize with
	M_LN2l.
	(__ieee754_acoshl): Use __log1pl not __log1p.

2013-01-02  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/arena.c (malloc_atfork, free_atfork, ptmalloc_lock_all)
	(ptmalloc_unlock_all, ptmalloc_unlock_all2, next_env_entry)
	(__failing_morecore, ptmalloc_init, dump_heap, new_heap)
	(grow_heap, heap_trim, _int_new_arena, get_free_list)
	(reused_arena, arena_get2): Convert to GNU style.
	* malloc/hooks.c (memalign_hook_ini, __malloc_check_init)
	(mem2mem_check, mem2chunk_check, top_check, realloc_check)
	(memalign_check, __malloc_set_state): Likewise.
	* malloc/mallocbug.c (main): Likewise.
	* malloc/malloc.c (__malloc_assert, malloc_init_state)
	(free_perturb, do_check_malloced_chunk, do_check_malloc_state)
	(sysmalloc, systrim, mremap_chunk, __libc_malloc, __libc_free)
	(__libc_realloc, _mid_memalign, _int_malloc, malloc_consolidate)
	(_int_realloc, _int_memalign, mtrim, musable, __libc_mallopt)
	(__posix_memalign, malloc_info): Likewise.
	* malloc/malloc.h: Likewise.
	* malloc/mcheck.c (checkhdr, unlink_blk, link_blk, freehook)
	(mallochook, memalignhook, reallochook, mabort): Likewise.
	* malloc/mcheck.h: Likewise.
	* malloc/memusage.c (update_data, me, malloc, realloc, calloc)
	(free, mmap, mmap64, mremap, munmap, dest): Likewise.
	* malloc/memusagestat.c (main, parse_opt, more_help): Likewise.
	* malloc/morecore.c (__default_morecore): Likewise.
	* malloc/mtrace.c (tr_break, lock_and_info, mtrace): Likewise.
	* malloc/obstack.c (_obstack_begin, _obstack_newchunk)
	(_obstack_allocated_p, obstack_free, _obstack_memory_used)
	(print_and_abort): Likewise.
	* malloc/obstack.h: Likewise.
	* malloc/set-freeres.c (__libc_freeres): Likewise.
	* malloc/tst-mallocstate.c (main): Likewise.
	* malloc/tst-mtrace.c (main): Likewise.
	* malloc/tst-realloc.c (do_test): Likewise.

2013-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16366]
	* nscd/netgroupcache.c (do_notfound): New function.
	(addgetnetgrentX): Use it.

	[BZ # 16365]
	* nscd/netgroupcache.c (addgetnetgrentX): Break if status is
	NSS_STATUS_NOTFOUND.

2014-01-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-01-01  Allan McRae  <allan@archlinux.org>

	* scripts/update-copyrights: Update configure input file suffix.

	* NEWS: Update copyright year.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/memusagestat.c: Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nscd/nscd.c: Likewise.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* posix/getconf.c: Likewise.
	* scripts/test-installation.pl: Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2013-12-31  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Call AC_CHECK_HEADER on
	the linux/fanotify.h header.
	* sysdeps/unix/sysv/linux/tst-fanotify.c: Check if
	HAVE_LINUX_FANOTIFY_H is defined.

2013-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/cos-inputs: New inputs.
	* benchtests/sin-inputs: Likewise.

	* benchtests/atan-inputs: New inputs. Fix name of multiple
	precision fallback inputs.

	* benchtests/atanh-inputs: New inputs.
	* benchtests/tanh-inputs: Likewise.

	* benchtests/acosh-inputs: New inputs.
	* benchtests/asinh-inputs: Likewise.

	* benchtests/cosh-inputs: New inputs.
	* benchtests/sinh-inputs: Likewise.

	* benchtests/acos-inputs: Add more inputs.
	* benchtests/asin-inputs: Likewise.

2013-12-30  Ville Skytta  <ville.skytta@iki.fi>

	[BZ #16375]
	* manual/arith.texi: Fix spelling.
	* manual/charset.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/time.texi: Likewise.

2013-12-27  Carlos O'Donell  <carlos@redhat.com>

	* po/sl.po: New file.

2013-12-27  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Add core/.gdbinit/.gdb_history.

2013-12-27  Allan McRae  <allan@archlinux.org>

	[BZ #16369]
	* sysdeps/ieee754/dbl-64/s_sin.c (csloww): Fix variable name.
	Reported by Il'ya Malakhov <ilmalakhov@yandex.ru>

2013-12-24  Brooks Moses  <bmoses@google.com>

	* string/string.h (__CORRECT_ISO_CPP_STRING_H_PROTO): Define for
	all compilers that claim C++98 compliance, not just GCC.
	* string/strings.h (__CORRECT_ISO_CPP_STRINGS_H_PROTO):
	Likewise.

2013-12-24  Maxim Kuvyrkov  <maxim@kugelworks.com>

	* NEWS: Restore accidentally deleted bug-fix entries.

2013-12-24  Maxim Kuvyrkov  <maxim@kugelworks.com>
	    Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15073]
	* malloc/malloc.c (_int_free): Perform sanity check only if we
	have_lock.

2013-12-23  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #12986]
	* manual/stdio.texi (String Input Conversions): Clarify that character
	classes are not supported.

2013-12-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16337]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r):
	Calculate results for small negative arguments directly rather
	than using reflection formula with special underflow handling.

	* sysdeps/mach/hurd/Implies: Change unix/bsd/bsd4.4 to unix/bsd.
	* sysdeps/unix/bsd/syscalls.list (chflags): Add entry from
	sysdeps/unix/bsd/bsd4.4/syscalls.list.
	(fchflags): Likewise.
	(revoke): Likewise.
	(setlogin): Likewise.
	(sigaltstack): Likewise.
	(wait4): Likewise.
	(sigblock): Remove.
	(sigsetmask): Likewise.
	(wait3): Likewise.
	(waitpid): Likewise.
	* sysdeps/unix/bsd/bsd4.4/syscalls.list: Remove file.
	* sysdeps/unix/sysv/linux/wait3.c: Update directory of included
	file.
	* sysdeps/unix/bsd/bsd4.4/Makefile: Move to ...
	* sysdeps/unix/bsd/Makefile: ... here.
	* sysdeps/unix/bsd/bsd4.4/Versions: Move to ...
	* sysdeps/unix/bsd/Versions: ... here.
	* sysdeps/unix/bsd/bsd4.4/bits/sockaddr.h: Move to ...
	* sysdeps/unix/bsd/bits/sockaddr.h: ... here.
	* sysdeps/unix/bsd/bsd4.4/cmsg_nxthdr.c: Move to ...
	* sysdeps/unix/bsd/cmsg_nxthdr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigblock.c: Move to ...
	* sysdeps/unix/bsd/sigblock.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigsetmask.c: Move to ...
	* sysdeps/unix/bsd/sigsetmask.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigvec.c: Move to ...
	* sysdeps/unix/bsd/sigvec.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcdrain.c: Move to ...
	* sysdeps/unix/bsd/tcdrain.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcgetattr.c: Move to ...
	* sysdeps/unix/bsd/tcgetattr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcsetattr.c: Move to ...
	* sysdeps/unix/bsd/tcsetattr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/wait.c: Move to ...
	* sysdeps/unix/bsd/wait.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/wait3.c: Move to ...
	* sysdeps/unix/bsd/wait3.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/waitpid.c: Move to ...
	* sysdeps/unix/bsd/waitpid.c: ... here.

2013-12-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16356]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Also set
	round-to-nearest for [!USE_AS_EXPM1L].
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Likewise.
	* math/auto-libm-test-in: Do not expect cosh tests to fail.  Add
	more tests of exp and exp10.  Expect some exp10 tests to miss
	exceptions or fail in directed rounding modes.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (exp10_tonearest_test_data): New array.
	(exp10_test_tonearest): New function.
	(exp10_towardzero_test_data): New array.
	(exp10_test_towardzero): New function.
	(exp10_downward_test_data): New array.
	(exp10_test_downward): New function.
	(exp10_upward_test_data): New array.
	(exp10_test_upward): New function.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-20  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acos, acosh, asin,
	asinh, atan, atan2, atanh, cbrt, cos and cosh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (acosh_test_data): Add more tests.
	(atanh_test_data): Likewise.
	(ceil_test_data): Likewise.
	(copysign_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* timezone/checktab.awk: Update from tzcode 2013i.
	* timezone/private.h: Likewise.
	* timezone/scheck.c: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.

	* math/auto-libm-test-in: Add tests of cpow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cpow_test_data): Use AUTO_TESTS_cc_c.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_cc_c.
	(func_calc_desc): Add mpc_cc_c union field.
	(test_functions): Add cpow.
	(special_fill_2pi): New function.
	(special_real_inputs): Add 2pi.
	(calc_generic_results): Handle mpc_cc_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of ccos, ccosh, cexp, clog,
	csqrt, ctan and ctanh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): New macro.
	(TEST_COND_x86): Likewise.
	(ccos_test_data): Use AUTO_TESTS_c_c.
	(ccosh_test_data): Likewise.
	(cexp_test_data): Likewise.
	(clog_test_data): Likewise.
	(csqrt_test_data): Likewise.
	(ctan_test_data): Likewise.
	(ctan_tonearest_test_data): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctanh_test_data): Likewise.
	(ctanh_tonearest_test_data): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_upward_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_c_c.
	(func_calc_desc): Add mpc_c_c union field.
	(FUNC_mpc_c_c): New macro.
	(test_functions): Add cacos, cacosh, casin, casinh, catan, catanh,
	ccos, ccosh, cexp, clog, clog10, csin, csinh, csqrt, ctan and
	ctanh.
	(special_fill_min_subnorm_p120): New function.
	(special_real_inputs): Add min_subnorm_p120.
	(calc_generic_results): Handle mpc_c_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos, do_cos_slow, do_sin)
	(do_sin_slow): New functions.
	(__sin, __cos, slow1, slow2, sloww1, sloww2, bsloww1, bsloww2)
	(cslow2, csloww1, csloww2): Use the new functions.

	* sysdeps/ieee754/dbl-64/s_sin.c (sloww1): Add new argument M.
	Use M to change sign of result instead of X.  Assume X is
	positive.
	(csloww1): Likewise.
	(__sin): Adjust.
	(__cos): Adjust.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): Remove
	arguments A and DA.
	(__sin): Adjust.
	(__cos): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use DA directly.
	(__cos): Likewise.
	(sloww1): Don't adjust sign of DX.
	(csloww1): Likewise.
	(sloww2): Use X directly and don't adjust sign of DX.
	(csloww2): Likewise.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of cabs and carg.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cabs_test_data): Use AUTO_TESTS_c_f.
	(carg_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_c_f.
	(func_calc_desc): Add mpc_c_f union field.
	(test_functions): Add cabs and carg.
	(calc_generic_results): Handle mpc_c_f.

	* sysdeps/powerpc/powerpc32/libgcc-compat.S
	[_SOFT_FLOAT || __NO_FPRS__] (__fixdfdi_v_glibc20): Do not define
	as a macro and a compat symbol.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixsfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixunsdfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixunssfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__floatdidf_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__floaddisf_v_glibc20): Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixdfdi): Do
	not use .hidden.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixsfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixunsdfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixunssfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__floaddidf):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__floaddisf):
	Likewise.
	* sysdeps/powerpc/nofpu/Versions (libc): Remove __fixdfdi,
	__fixsfdi, __fixunsdfdi, __fixunssfdi, __floatdidf and __floatdisf
	from GLIBC_2.3.2.

2013-12-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2013-11-26.10 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2013-11-29.
	* scripts/config.sub: Update to version 2013-10-01.

	* math/auto-libm-test-in: Add tests of sincos.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (sincos_test_data): Use AUTO_TESTS_fFF_11.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_f_11.
	(func_calc_desc): Add mpfr_f_11 union field.
	(test_functions): Add sincos.
	(calc_generic_results): Handle mpfr_f_11.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-19  Andreas Schwab  <schwab@suse.de>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Fix argument of
	CALL_MCOUNT.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S
	[USE_IN_EXTENDED_LOCALE_MODEL]: Likewise.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (%beautify): Remove M_* constants.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16293]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]: Set
	round-to-nearest mode when using frndint.
	* sysdeps/i386/fpu/s_expm1.S (__expm1): Likewise.
	* sysdeps/i386/fpu/s_expm1f.S (__expm1f): Likewise.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add more tests of expm1.  Do not expect
	sinh test to fail.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): Remove macro.
	(TEST_COND_x86): Likewise.
	(expm1_tonearest_test_data): New array.
	(expm1_test_tonearest): New function.
	(expm1_towardzero_test_data): New array.
	(expm1_test_towardzero): New function.
	(expm1_downward_test_data): New array.
	(expm1_test_downward): New function.
	(expm1_upward_test_data): New array.
	(expm1_test_upward): New function.
	(main): Run the new test functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* include/features.h: Update comment documenting feature test
	macros.  Mention _DEFAULT_SOURCE in comment.
	[_GNU_SOURCE] (_DEFAULT_SOURCE): Undefine and redefine.
	[_DEFAULT_SOURCE]: Undefine and redefine _DEFAULT_SOURCE,
	_BSD_SOURCE and _SVID_SOURCE.
	[!__STRICT_ANSI__ && !_ISOC99_SOURCE && !_POSIX_SOURCE &&
	!_POSIX_C_SOURCE && !_XOPEN_SOURCE && !_BSD_SOURCE &&
	!_SVID_SOURCE]: Likewise.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(__USE_POSIX_IMPLICITLY): Define.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(_POSIX_SOURCE): Undefine and redefine.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(_POSIX_C_SOURCE): Likewise.
	* manual/creature.texi (_DEFAULT_SOURCE): Document.
	(Feature Test Macros): Update documentation of default features.

2013-12-19  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/Makefile: Add bench-strtok.
	* benchtests/bench-strtok.c: New file: strtok benchtest.

2013-12-19  Allan McRae  <allan@archlinux.org>

	* manual/install.texi: Suppress menu for plain text output.
	* INSTALL: Regenerated.

2013-12-18  Brooks Moses  <bmoses@google.com>

	[BZ #15846]
	* misc/getauxval.c: Include errno.h.
	(__getauxval): Set errno to ENOENT if the requested type is not
	found.
	* misc/sys/auxv.h (getauxval): Document that it may set errno;
	don't declare with __attribute_const__.
	* elf/tst-auxv.c: Add tests for errno and type-not-found case.
	* manual/startup.texi: Document that getauxval sets errno.

2013-12-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of jn and yn.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (jn_test_data): Use AUTO_TESTS_if_f.
	(yn_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_if_f.
	(func_calc_desc): Add mpfr_if_f union field.
	(FUNC_mpfr_if_f): New macro.
	(test_functions): Add jn and yn.
	(calc_generic_results): Assert type of second input for
	mpfr_ff_f.  Handle mpfr_if_f.
	(output_for_one_input_case): Disable all checking for arguments
	fitting floating-point types in case of an integer argument.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Don't expect fegetround reference in libm.so.

2013-12-17  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* sysdeps/ieee754/dbl-64/Makefile (CFLAGS-e_sqrt.c): Add
	$(config-cflags-nofma).

2013-12-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Mark some hypot tests no-test-inline.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16338]
	* sysdeps/ieee754/ldbl-128/e_logl.c (__ieee754_logl): Use __frexpl
	to determine exponent and adjust argument to have exponent of -1.
	* math/auto-libm-test-in: Add more tests of log, log10, log1p and
	log2.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-18  Ondřej Bílka  <neleai@seznam.cz>

	* manual/probes.texi: Remove cases when per-thread arenas are
	disabled.

2013-12-18  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/i686/multiarch/strstr.c: Remove.
	* sysdeps/i386/i686/multiarch/strstr-c.c: Remove.
	* sysdeps/i386/i686/multiarch/strcasestr.c: Remove.
	* sysdeps/i386/i686/multiarch/strcasestr-nonascii.c: Remove.
	* sysdeps/i386/i686/multiarch/Makefile: Update.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: Update.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/bsd/bsd4.4/bits/errno.h: Remove file.
	* sysdeps/unix/bsd/bsd4.4/bits/ioctls.h: Likewise.

2013-12-17  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #15968]
	Support TZ transition times < 00:00:00.
	This is needed for version-3 tz-format files; it supports time
	stamps past 2037 for America/Godthab (the only entry in the tz
	database for which this change is relevant).
	* manual/time.texi (TZ Variable): Document transition times
	from -167:59:59 through -00:00:01.
	* time/tzset.c (tz_rule): Time of day is now signed.
	(__tzset_parse_tz): Parse negative time of day.

	Document TZ transition times >= 25:00:00.
	* manual/time.texi (TZ Variable): Document transition times from
	25:00:00 through 167:59:59.  These are already supported, and this
	support will help with version-3 tz-format files.

	* manual/time.texi (TZ Variable): Modernize North America example
	to reflect current (i.e., 2007-and-later) daylight saving rules.

	* manual/time.texi (TZ Variable): POSIX.1 hour can be 24.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/bsd/bits/posix_opt.h: Remove file.
	* sysdeps/unix/bsd/bits/stat.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/environments.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/sys/sysmacros.h: Likewise.
	* sysdeps/unix/bsd/bsdstat.h: Likewise.
	* sysdeps/unix/bsd/clock.c: Likewise.
	* sysdeps/unix/bsd/i386/vfork.S: Likewise.
	* sysdeps/unix/bsd/i386/wait3.S: Likewise.
	* sysdeps/unix/bsd/init-posix.c: Likewise.
	* sysdeps/unix/bsd/poll.c: Likewise.
	* sysdeps/unix/bsd/ptsname.c: Likewise.
	* sysdeps/unix/bsd/seekdir.c: Likewise.
	* sysdeps/unix/bsd/setegid.c: Likewise.
	* sysdeps/unix/bsd/seteuid.c: Likewise.
	* sysdeps/unix/bsd/setgid.c: Likewise.
	* sysdeps/unix/bsd/setrgid.c: Likewise.
	* sysdeps/unix/bsd/setruid.c: Likewise.
	* sysdeps/unix/bsd/setsid.c: Likewise.
	* sysdeps/unix/bsd/setuid.c: Likewise.
	* sysdeps/unix/bsd/sigaction.c: Likewise.
	* sysdeps/unix/bsd/sigprocmask.c: Likewise.
	* sysdeps/unix/bsd/sigsuspend.c: Likewise.
	* sysdeps/unix/bsd/sys/reboot.h: Likewise.
	* sysdeps/unix/bsd/telldir.c: Likewise.
	* sysdeps/unix/bsd/times.c: Likewise.
	* sysdeps/unix/bsd/usleep.c: Likewise.

	* misc/Makefile (install-lib): Remove libbsd-compat.a.
	($(objpfx)libbsd-compat.a): Remove rule.

	* include/features.h (__FAVOR_BSD): Do not define.
	* manual/creature.texi (_BSD_SOURCE): Do not document as enabling
	features conflicting with POSIX.
	(_GNU_SOURCE): Do not mention interaction with _BSD_SOURCE.
	(_BSD_SOURCE): Remove description of not being a subset of other
	feature test macros.
	* manual/job.texi (getpgrp): Do not document BSD version.
	(getpgid): Do not document by reference to BSD getpgrp.
	* posix/unistd.h [__FAVOR_BSD]: Remove conditional code.
	* setjmp/setjmp.h [__FAVOR_BSD]: Likewise.
	* signal/signal.h [__FAVOR_BSD]: Likewise.
	* sysdeps/gnu/netinet/tcp.h (struct tcphdr): Use anonymous unions
	instead of making contents conditional on [__FAVOR_BSD].
	* sysdeps/gnu/netinet/udp.h (struct udphdr): Likewise.

2013-12-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16314]
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Adjust up
	values below 2**-450, not 2**-500.
	* math/auto-libm-test-in: Don't allow spurious underflow from
	hypot.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16316]
	[BZ #16330]
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Update
	values of ha and hb and sort them after adjusting subnormal
	arguments.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Update
	values of ea and eb and sort them after adjusting subnormal
	arguments.
	* math/auto-libm-test-in: Do not expect some hypot tests of
	subnormals to fail.  Add more hypot tests.
	* math/auto-libm-test-out: Regenerated.

2013-12-16  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	[BZ #13304]
	* sysdeps/sh/s_fma.c: New file.
	* sysdeps/sh/s_fmaf.c: New file.
	* sysdeps/sh/soft-fp/sfp-machine.h: New file.  Based on arm
	version.
	* sysdeps/sh/Implies: Add sh/soft-fp.

2013-12-16  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-error.c (struct catch): Add new member `errcode'.  Add a
	level of indirection to members `objname', `errstring', `malloced'.
	(_dl_signal_error): Store through pointers in *LCATCH rather modifying
	*LCATCH itself.  Set *LCATCH->errcode to ERRCODE rather than passing
	it as the __longjmp argument (just pass 1 instead).
	(_dl_catch_error): Initialize C with argument pointers and address of
	volatile local ERRCODE rather than copying values out of C at return.

2013-12-16  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of atan2, hypot and pow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (atan2_test_data): Use AUTO_TESTS_ff_f.
	(hypot_test_data): Likewise.
	(pow_test_data): Likewise.
	(pow_tonearest_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_ff_f.
	(func_calc_desc): Add mpfr_ff_f union field.
	(FUNC_mpfr_ff_f): New macro.
	(test_functions): Add atan2, hypot and pow.
	(special_fill_min): New function.
	(special_fill_minus_min): Likewise.
	(special_fill_min_subnorm): Likewise.
	(special_fill_minus_min_subnorm): Likewise.
	(special_real_inputs): Add min, -min, min_subnorm and
	-min_subnorm.
	(calc_generic_results): Handle mpfr_ff_f.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-16  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Mention aligned_alloc.
	(Aligned Memory Blocks): Add documentation for aligned_alloc
	and suggest it as an alternative to posix_memalign.
	(Hooks for Malloc): Document __memalign_hook is also called
	for aligned_alloc.  (Summary of Malloc): Add summary for
	aligned alloc.  Document __memalign_hook is also called
	for aligned_alloc.

2013-12-16  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Clarify default
	alignment documentation.  Suggest posix_memalign rather
	than memalign or valloc.
	(Aligned Memory Blocks): Remove suggestion to use memalign
	or valloc.  Remove obsolete comment about BSD.
	Document memalign errno values and mark the function obsolete.
	Document posix_memalign returned error codes.  Mark valloc
	as obsolete.  (Hooks for Malloc): __memalign_hook is also
	called for posix_memalign and valloc.
	(Summary of Malloc): Add posix_memalign to function summary.
	__memalign_hook is also called for posix_memalign and valloc.

2013-12-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (TAYLOR_SINCOS): Rename to
	TAYLOR_SIN.
	(__sin): Adjust.
	(__cos): Likewise.
	(sloww): Use mynumber union.  Expand ternary operator into
	if-else statements.
	(cslow): use mynumber union.

2013-12-16  Allan McRae  <allan@archlinux.org>

	* configure.ac: Set AUTOCONF when maintainer-mode is not used.
	* configure: Regenerated.

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update file name.

	[BZ #14120]
	* configure.ac: Added --enable-maintainer-mode. Check for
	autoconf when enabled.
	* configure: Regenerated.

	* nscd/nscd.service: New file.
	* nscd/nscd.tmpfiles: New file.

2013-12-14  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #12100]
	* sysdeps/x86_64/multiarch/strstr-sse2-unaligned.S: New file
	* sysdeps/x86_64/multiarch/strstr-c.c: Moved to ...
	* sysdeps/x86_64/multiarch/strstr.c: ... here.
	(strstr): Add __strstr_sse2_unaligned ifunc.
	* sysdeps/x86_64/multiarch/strcasestr-c.c: Moved to ...
	* sysdeps/x86_64/multiarch/strcasestr.c ... here.
	(strcasestr): Remove __strcasestr_sse42 ifunc.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: Remove.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Update.

2013-12-14  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/bits/fenv.h: Move to ...
	* sysdeps/sh/bits/fenv.h: ... here.
	* sysdeps/sh/sh4/fpu/bits: Remove directory.

2013-12-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* NEWS: Mention ppc64 STT_GNU_IFUNC support.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add hypot and
	hypotf multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot.c: New file:
	multiarch hypot for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf.c : New file:
	multiarch hypotf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add modf and
	modff multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf-power5+.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf.c: New file:
	multiarch modf for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff-power5+.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff.c : New file:
	multiarch modff for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add logb, logbf,
	and logl multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb.c: New file:
	multiarch logb for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf.c: New file:
	multiarch logb for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl.c: New file:
	multiarch logb for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isinf and
	isinff multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c: New file:
	multiarch isinf for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff-ppc64.c: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff.c: New file:
	multiarch isinff for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add finite and
	finitef multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c: New file:
	multiarch finite for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef-ppc64.c: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef.c: New file:
	multiarch finitef for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llrint and
	lrint multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint.c: New file:
	multiarch llrint for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_lrint.c: New file:
	multiarch lrint for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add copysign/
	copysignf multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign-power6.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign.c: New file:
	multiarch copysign for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysignf.c: New file:
	multiarch copysignf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add trunc/truncf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc.c: New file:
	multiarch trunc for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf.c: New file:
	multiarch truncf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add round/roundf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round.c: New file:
	multiarch round for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf.c: New file:
	multiarch roundf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add floor/floorf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor.c: New file:
	multiarch floor for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf.c: New file:
	multiarch floorf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add ceil/ceilf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil.c: New file:
	multiarch ceil for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf.c: New file:
	multiarch ceilf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llround
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround.c: New file:
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_lround.c: New file:
	multiarch lround for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isnan
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power5.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power6.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power7.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c: New file:
	multiarch isnan for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnanf.c: New file:
	multiarch isnanf for PPC64.

	* sysdeps/powerpc/powerpc64/power5+/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power5/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6x/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power7/fpu/multiarch/Implies: New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/Implies: Remove.

	* sysdeps/powerpc/fpu/w_sqrt.c: Remove file
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add stpcpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c : New file:
	multiarch stpcpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c : New file:
	multiarch strcpy for PPC64.

	* string/wordcopy.c (_wordcopy_fwd_aligned): Add define to
	redefine function name.
	(_wordcopy_fwd_dest_aligned): Likewise.
	(_wordcopy_bwd_aligned): Likewise.
	(_wordcopy_bwd_dest_aligned): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wordcopy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c : New file:
	multiarch wcscpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcscpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c : New file:
	multiarch wcscpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcsrchr
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr.c : New file:
	multiarch wcsrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcschr
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c : New file:
	multiarch wcschr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strchrnul
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul.c: New file:
	multiarch strchrnul for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strchr multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rtld-strchr.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c: New file: multiarch
	strchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncmp multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c: New file: multiarch
	strncmp for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncasecmp
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncase.c: New file: multiarch
	strncasecmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l.c: New file:
	multiarch strncasecmp_l for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcasecmp
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp.c: New file:
	multiarch strcasecmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l.c: new file:
	multiarch strcasecmp_l for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strnlen multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c: New file: multiarch
	strnlen for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strlen multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c: New file: multiarch
	strlen for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add rawmemch multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr.c: New file: multiarch
	rawmemrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memrchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr.c: New file: multiarch
	memrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memchr.c: New file: multiarch
	memchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add mempcpy multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c: New file: multiarch
	mempcpy for PPC64.

	* sysdeps/powerpc/powerpc64/memset.S (NO_BZERO_IMPL): Add macro to
	avoid cretion of __bzero symbol.
	* sysdeps/powerpc/powerpc64/power4/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memset/bzero
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c: New file: multiarch
	bzero for PPC32.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c: New file: multiarch
	memset for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/rtld-memset.c: New file.

	* string/memcmp.c (memcmp): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memcpy multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c: New file: multiarch
	memcmp for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: New file to support
	multiarch for POWER/PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/init-arch.h: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-a2.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-cell.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c: New file: multiarch
	memcpy for PPC64.

	* sysdeps/powerpc/powerpc64/power4/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64/power4/fpu/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power4/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5+/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power6/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power6/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power7/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power7/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/fpu/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/multiarch/Implies: New File.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5+/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power8/Implies: Remove.

2013-12-12  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Use $$ver.

2013-12-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add exp2 and log2.
	(LDLIBS-bench-exp2): Add -lm.
	(LDLIBS-bench-log2): Likewise.
	* benchtests/exp2-inputs: New inputs file.
	* benchtests/log2-inputs: New inputs file.
	* benchtests/log-inputs: Add new inputs.
	* benchtests/tan-inputs: Likewise.

2013-12-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (t22): Consolidate const
	definition...
	(slow1, slow2, sloww1, sloww2, bsloww1, bsloww2, cslow2, csloww1)
	(csloww2): ... from here.

	* sysdeps/ieee754/dbl-64/usncs.h: Define constants as double
	instead of structures.
	* sysdeps/ieee754/dbl-64/s_sin.c (POLYNOMIAL2): Adjust.
	(POLYNOMIAL): Likewise.
	(TAYLOR_SLOW): Likewise.
	(__sin): Likewise.
	(__cos): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1); Likewise.
	(sloww2): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.

2013-12-10  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/malloc.c (MALLOC_COPY, MALLOC_ZERO): Delete.
	(__malloc_assert, __libc_realloc, __libc_calloc, _int_realloc):
	Expand MALLOC_COPY and MALLOC_ZERO to memcpy and memset.
	* malloc/hooks.c (realloc_check): Likewise.

	* malloc/Makefile (CPPFLAGS-malloc.c): Remove -DPER_THREAD flag.
	* malloc/arena.c: Remove PER_THREAD conditional.
	[!PER_THREAD]: Remove code.
	(ptmalloc_unlock_all2): Likewise.
	(ptmalloc_init): Likewise.
	(_int_new_arena): Likewise.
	(arena_get2): Likewise.
	* malloc/hooks.c (__malloc_get_state): Likewise.
	(__malloc_set_state): Likewise.
	* malloc/malloc.c: Likewise.
	(struct malloc_state): Likewise.
	(struct malloc_par): Likewise.
	(__libc_realloc): Likewise.
	(__libc_mallopt): Likewise.

2013-12-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* Versions.def (libm): Add GLIBC_2.3 and GLIBC_2.19.

2013-12-09  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/malloc.c (alloc_perturb, free_perturb): Convert from
	macro to a function.  Check for zero perturb_byte.
	(_int_malloc, _int_free): Remove zero perturb_byte checks.

	* malloc/malloc.c: (force_reg): Remove.
	(__malloc_assert, __libc_malloc, __libc_free, __libc_realloc)
	(_mid_memalign, __libc_calloc, sysmalloc, systrim): Replace
	force_reg by atomic_forced_read.
	* malloc/arena.c (ptmalloc_init): Likewise.
	* malloc/hooks.c (top_check): Likewise.

2013-12-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-09  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-12-08  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of lgamma.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (M_LOG_SQRT_PIl): Remove macro.
	(M_LOG_2_SQRT_PIl): Likewise.
	(lgamma_test_data): Use AUTO_TESTS_f_f1.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_f_f1.
	(func_calc_desc): Add mpfr_f_f1 union field.
	(ARGS1): New macro.
	(ARGS2): Likewise.
	(ARGS3): Likewise.
	(ARGS4): Likewise.
	(RET1): Likewise.
	(RET2): Likewise.
	(CALC): Likewise.
	(FUNC): Likewise.
	(FUNC_mpfr_f_f): Use new macros FUNC, ARGS1, RET1 and CALC.
	(test_functions): Add lgamma.
	(calc_generic_results): Handle mpfr_f_f1.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/add_n.S: New file: optimized
	__mpn_add_n for PowerPC64/POWER7.
	* sysdeps/powerpc/powerpc64/power7/sub_n.S: New file: optimized
	__mpn_sub_n for PowerPC64/POWER7.

	* sysdeps/powerpc/powerpc64/addmul_1.S: New file: optimized
	__mpn_addmul_1 for PowerPC64.
	* sysdeps/powerpc/powerpc64/submul_1.S: New file: optimized
	__mpn_submul_1 for PowerPC64.
	* sysdeps/powerpc/powerpc64/lshift.S: New file: optimized __mpn_lshift
	for PowerPC64.
	* sysdeps/powerpc/powerpc64/mul_1.S: New file: optimized __mpn_mul_1
	for PowerPC64.

2013-12-06  Fernando J. V. da Silva  <fernandojvdasilva@gmail.com>

	[BZ #15089]
	* malloc/malloc.c: Exit systrim() if pad is bigger than heap top size.

2013-12-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* NEWS: Mention ppc32/power4+ STT_GNU_IFUNC support.

	* sysdeps/powerpc/powerpc32/power5+/fpu/multiarch/Implies: New file:
	add multiarch folders.
	* sysdeps/powerpc/powerpc32/power5+/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power5/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power7/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power8/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power8/multiarch/Implies: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5+/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power8/Implies: Remove.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add
	__ieee754_hypot and __ieee754_hypotf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot-power7.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot.c: New file:
	multiarch __ieee754_hypot for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf-power7.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf.c: New file:
	multiarch __ieee754_hypotf for PowerPC32.

	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Define
	long_double_symbol only if __logbl is defined.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: Moved to ...
	* sysdeps/powerpc/power7/fpu/s_logb.c: ... here.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbf.c: Move to ...
	* sysdeps/powerpc/power7/fpu/s_logbf.c: ... here.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c: Move to ...
	* sysdeps/powerpc/power7/fpu/s_logbl.c: ... here.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logb.c: Adjust to use new
	path for implementation.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbl.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add logbf,
	logb, and logbl multiarch implementations for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb.c: New file:
	multiarch logb for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf.c: New file:
	multiarch logbf for PowerPC32.
	* sysdeps/powerpc/power4/fpu/multiarch/s_logbl-power7.c: New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbl-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbl.c: New file:
	multiarch logbl implementation for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add modf
	and modff multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf-power5+.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf.c: New file:
	multiarch modf for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff-power5+.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff.c: New file:
	multiarch modff for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add lrint
	and lrintf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint-power6x.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint.c: New file:
	multiarch lrint for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrintf.c: New
	file: multiarch lrintf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add lround
	and lroundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround.c: New file:
	multiarch lround for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lroundf.c: New
	file: multiarch lroundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add
	copysign and copysignf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign.c: New
	file: multiarch copysign for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysignf.c: New
	file: multiarch copysignf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add trunc
	and truncf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc.c: New file:
	multiarch trunc for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf.c: New file:
	multiarch truncf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add round
	and roundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round.c: New file:
	multiarch round for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf.c: New file:
	multiarch roundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add floor
	and floorf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor.c: New file:
	multiarch floor for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf.c: New file:
	multiarch floorf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add ceil
	and ceilf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil.c: New file:
	multiarch ceil for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf.c: New file:
	multiarch ceilf for PowerPC32.

	* sysdeps/ieee754/dbl-64/s_finite.c (__finite): Redefine it if FINITE
	is defined.
	* sysdeps/ieee754/flt-32/s_finitef.c (__finitef): Redefine it if
	FINITEF is defined.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add finite
	and finitef multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite.c: New file:
	multiarch finite for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finitef-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finitef.c: New
	file: multiarch finitef for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add isinf
	and isinff multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf.c: New file:
	multiarch isinf for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinff-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinff.c: New file:
	multiarch isinff for PowerPC32.

	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S (__isnan): Only implement
	alias when __isnan is defined.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add isnan
	and isnanf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan.c: New file:
	multiarch isnan for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf.c: New file:
	multiarch isnanf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add sqrt
	and sqrtf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt.c: New file:
	multiarch sqrt for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf.c: New file:
	multiarch sqrtf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add llround
	and llroundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround.c: New
	file: multiarch llround for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llroundf.c: New
	file: multiarch llroundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: New file:
	multiarch PowerPC32 fpu implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint.c: New file:
	multiarch llrint for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf.c: New
	file.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/Implies: Remove.

	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy.c: New file:
	multiarch wordcopy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcscpy
	wordcopy objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power4/wordcopy.c: Move ...
	* sysdeps/powerpc/power4/wordcopy.c: ... to here.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Move ...
	* sysdeps/powerpc/power6/wordcopy.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Remove uneeded file.
	* sysdeps/powerpc/powerpc64/power4/wordcopy.c: Likewise.

	* wcsmbs/wcscpy.c (wcscpy): Using macro to redefine symbol name
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy.c: New file:
	multiarch wcscpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcscpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c: Move ...
	* sysdeps/powerpc/power6/wcsrchr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcscpy.c: Adjust to use
	sysdeps/powerpc/power6/wcscpy.c.

	* wcsmbs/wcsrchr.c (wcsrchr): Using macro to redefine symbol name
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr.c: New file:
	multiarch wcsrchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcschr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c: Move ...
	* sysdeps/powerpc/power6/wcsrchr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcsrchr.c: Adjust to use
	sysdeps/powerpc/power6/wcsrchr.c.

	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c: New file:
	multiarch wcschr for PPc32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcschr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcschr.c: Move ...
	* sysdeps/powerpc/power6/wcschr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcschr.c: Adjust to use
	sysdeps/powerpc/power6/wcschr.c.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-strchr.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr-ppc32.S: New file.
	* sysdeps/powerpc/powerpc/powerpc32/power4/multiarch/strchr.c: New
	file: multiarch strchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* string/strchrnul.c (__strchrnul): Using macro to redefine symbol
	name.
	* sysdeps/powerpc/powerpc32/power4//multiarch/strchrnul-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul.c: New file:
	multiarch strchrnul for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strchrnul
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase.c: New file:
	multiarch strncasecmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l.c: New file:
	multiarch strncasecmp_l for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added
	strncasecmp multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp.c: New file:
	multiarch strncasecmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l.c: New file:
	multiarch strcasecmp_l for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strcasecmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp.c: New file:
	multiarch strncmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strncmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-strnlen.c: New file.
	* sysdeps/powerpc/powerpc32//power4/multiarch/strnlen-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen-ppc32.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strnlen
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strlen
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr.c: New file:
	multiarch rawmemchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added rawmemchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr.c: New
	file: memrchr multiarch for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added memrchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* string/memchr.c (__memchr): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c: New File.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c: New file:
	multiarch memchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* string/mempcpy.c (__mempcpy): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c: New
	file: multiarch mempcpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add mempcpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-power6.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-power7.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-ppc32.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: New file:
	multiarch bzero for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-ppc32.S: New file.
	* sysdeps/powerpc/powerpc/powerpc32/power4/multiarch/memset.c: New
	file: multiarch memset for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-memset.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add bzero and
	memset multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-ppc32.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp.c: multiarch
	memcmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-memcmp.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memcmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-a2.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-cell.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy.c: New file:
	multiarch memcpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memcpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: New file to
	support multiarch for POWER/PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/Implies: Remove
	Implies file to make multiarch folder appers before the fpu and
	default folder for power4 configuration.

2013-12-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Append volatile keyword to type.

2013-12-05  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sotruss-lib.c: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/c++-types.data: New file.

2013-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6810]
	* math/w_tgamma.c: Include <errno.h>.
	(__tgamma): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/w_tgammaf.c: Include <errno.h>.
	(__tgammaf): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/w_tgammal.c: Include <errno.h>.
	(__tgammal): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/auto-libm-test-in: Do not allow missing errno on tgamma
	underflow.  Add more tgamma tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of log, log10, log1p, log2,
	sin, sinh, tan, tanh, tgamma, y0 and y1.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): New macro.
	(TEST_COND_x86): Likewise.
	(M_E2l): Remove macro.
	(M_E3l): Likewise.
	(M_2_SQRT_PIl): Likewise.
	(M_SQRT_PIl): Likewise.
	(M_1_DIV_El): Likewise.
	(log_test_data): Use AUTO_TESTS_f_f.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(sin_test_data): Likewise.
	(sin_tonearest_test_data): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_upward_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sinh_tonearest_test_data): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_upward_test_data): Likewise.
	(tan_test_data): Likewise.
	(tan_tonearest_test_data): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_upward_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	* math/gen-auto-libm-tests.c (special_fill_pi_4): New function.
	(special_real_inputs): Add pi/4.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Add "longjmp" and
	"longjmp_target" static probes.
	(__longjmp): Rename to __longjmp_symbol.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp.S: Define __longjmp_symbol based
	on which longjmp to generate.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Add "setjmp" static
	probe.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	(__sigjmp_save): Rename to __sigjmp_save_symbol.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Define __sigsetjmp_symbol
	and __sigjmp_save_symbol based on which sigsetjmp to generated.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/____longjmp_chk.S: Define
	__longjmp_symbol based on which __longjmp to generate.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Add "setjmp" static
	probe.
	(setjmp): Rename to setjmp_symbol.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	(_setjmp): Rename to _setjmp_symbol.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	* sysdeps/powerpc/powerpc64/setjmp.S: Define setjmp_symbol,
	_setjmp_symbol, __sigsetjmp_symbol, and __sigjmp_save_symbol based on
	which setjmp to generate.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Add "longjmp" and
	"longjmp_target" static probes.

2013-12-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/README: Add note about output arguments.
	* benchtests/bench-sincos.c: Remove file.
	* benchtests/sincos-inputs: New file.
	* scripts/bench.pl: Identify output arguments and define
	static variables for them.

	* debug/stpncpy_chk.c (__stpncpy_chk): Remove unused variables.

	[BZ #15941]
	* Makefile (INSTALL): Add install-plain.texi as the primary
	dependency.
	* manual/install-plain.texi: New file.
	* manual/install.texi: Include node directive only for
	non-plaintext output.

2013-12-04  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/longlong.h: Update from GCC.

	[BZ #6807]
	[BZ #15901]
	* math/w_j0.c (y0): Raise FE_DIVBYZERO on zero argument.
	* math/w_j0f.c (y0f): Likewise.
	* math/w_j0l.c (__y0l): Likewise.
	* math/w_j1.c (y1): Likewise.
	* math/w_j1f.c (y1f): Likewise.
	* math/w_j1l.c (__y1l): Likewise
	* math/w_jn.c (yn): Likewise.
	* math/w_jnf.c (ynf): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Use ERANGE for
	Bessel function pole errors in _POSIX_ mode.  Use NAN as return
	value for Bessel function domain errors outside _SVID_ mode.
	Adjust sign of return value for yn (negative integer, 0).
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_ynl): Use division
	by zero in return for negative x and set sign appropriately for
	negative n.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Likewise.
	* math/libm-test.inc (y0_test_data): Add more tests and adjust
	expectations in error cases.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-11-12  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/Makefile (abi-variants): Rename
	"64" to "64-v1".  Add "64-v2".
	(abi-64-options): Rename to ...
	(abi-64-v1-options): ... this.   Redefine _CALL_ELF.
	(abi-64-condition): Rename to ...
	(abi-64-v1-condition): ... this.  Add _CALL_ELF check.,
	(abi-64-ld-soname): Rename to ...
	(abi-64-v1-ld-soname): ... this.
	(abi-64-v2-options): Define.
	(abi-64-v2-condition): Likewise.
	(abi-64-v2-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add "/lib64/ld64.so.2".
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Makefile: Delete file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Generate.

2013-11-12  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/bits/link.h (La_ppc64v2_regs, La_ppc64v2_retval):
	New versions for use with the ELFv2 ABI.
	(la_ppc64v2_gnu_pltenter, la_ppc64v2_gnu_pltexit): Add prototypes.
	* sysdeps/powerpc/lsdodefs.h (struct La_ppc64v2_regs): Add forward
	declaration.
	(struct La_ppc64v2_retval): Likewise.
	(ARCH_PLTENTER_MEMBERS): Add ppc64v2_gnu_pltenter.
	(ARCH_PLTEXIT_MEMBERS): Add ppc64v2_gnu_pltexit.
	* sysdeps/powerpc/powerpc64/dl-machine.h (ARCH_LA_PLTENTER): Define
	to ppc64v2_gnu_pltenter if _CALL_ELF == 2.
	(ARCH_LA_PLTEXIT): Define to ppc64v2_gnu_pltexit if _CALL_ELF == 2.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve):
	Do not save or restore CR.
	(FRAME_SIZE, VR_RTN): Provide updated values for _CALL_ELF == 2.
	(_dl_profile_resolve): Do no save or restore CR.  Support extended
	return values for ELFv2 ABI.  Fix location of FPR return registers.
	* sysdeps/powerpc/powerpc64/tst-audit.h (pltenter, pltexit): Provide
	updated values for _CALL_ELF == 2.
	(La_regs, La_retval, int_retval): Likewise.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/powerpc/powerpc64/sysdep.h (FRAME_MIN_SIZE): Define.
	(FRAME_MIN_SIZE_PARM): Likewise.
	(FRAME_BACKCHAIN): Likewise.
	(FRAME_CR_SAVE): Likewise.
	(FRAME_LR_SAVE): Likewise.
	(FRAME_TOC_SAVE): Likewise.
	(FRAME_PARM_SAVE): Likewise.
	(FRAME_PARM1_SAVE, FRAME_PARM2_SAVE, FRAME_PARM3_SAVE,
	FRAME_PARM4_SAVE, FRAME_PARM5_SAVE, FRAME_PARM6_SAVE,
	FRAME_PARM7_SAVE, FRAME_PARM8_SAVE, FRAME_PARM9_SAVE): Likewise.
	(call_mcount_parm_offset): New macro.
	(SAVE_ARG, REST_ARG, CFI_SAVE_ARG): Use it.
	(PROF): Use symbolic stack frame offsets.
	(TAIL_CALL_SYSCALL_ERROR): Likewise.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (FRAME_SIZE, INT_PARMS):
	Redefine in terms of FRAME_MIN_SIZE.
	(_dl_runtime_resolve): Use symbolic stack frame offsets.
	(_dl_profile_resolve): Likewise.  Update comment.
	* sysdeps/powerpc/powerpc64/setjmp-common.S (__GI__setjmp): Use
	symbols stack frame offsets.
	(__sigsetjmp): Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S (__longjmp): Likewise.
	* sysdeps/powerpc/powerpc64/ppc-mcount.S (_mcount): Likewise.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Likewise.
	* sysdeps/powerpc/powerpc64/crtn.S (_init, _fini): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ucontext_i.sym
	(FRAME_BACKCHAIN): Remove.
	(FRAME_CR_SAVE): Likewise.
	(FRAME_LR_SAVE): Likewise.
	(FRAME_COMPILER_DW): Likewise.
	(FRAME_LINKER_DW): Likewise.
	(FRAME_TOC_SAVE): Likewise.
	(FRAME_PARM_SAVE): Likewise.
	(FRAME_PARM1_SAVE, FRAME_PARM2_SAVE, FRAME_PARM3_SAVE)
	(FRAME_PARM4_SAVE, FRAME_PARM5_SAVE, FRAME_PARM6_SAVE)
	(FRAME_PARM7_SAVE, FRAME_PARM8_SAVE, FRAME_PARM9_SAVE): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/____longjmp_chk.S
	(CHECK_SP): Use symbolic stack frame offsets.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S (__brk): Use "red
	zone" instead of caller's parameter save area for temp storage.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Likewise.  Also, use symbolic stack frame offsets.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S (FRAMESIZE,
	stackblock): Redefine for _CALL_ELF == 2 to save parameters into
	our own stack frame instead of the caller's.
	(__socket): Use symbolic stack frame offsets.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* elf/elf.h (DT_PPC64_OPT, PPC64_OPT_TLS, PPC64_OPT_MULTI_TOC):
	Define.
	(STO_PPC64_LOCAL_BIT, STO_PPC64_LOCAL_MASK)
	(PPC64_LOCAL_ENTRY_OFFSET): Define.
	* sysdeps/powerpc/powerpc64/dl-machine.h (ppc64_local_entry_offset):
	New function.
	(elf_machine_fixup_plt): Call it.
	(elf_machine_plt_conflict): Likewise.  Add map, sym_map, and
	reloc arguments.
	(elf_machine_rela): Update call to elf_machine_plt_conflict.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve)
	(_dl_profile_resolve) [_CALL_ELF == 2]: Restore caller's TOC into
	r2 before calling target.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h [_CALL_ELF == 2]
	(PPC64_LOAD_FUNCPTR, DOT_LABEL, BODY_LABEL, ENTRY_2, END_2): New
	versions of macros to support ELFv2 ABI.
	(LOCALENTRY): New macro.
	(ENTRY, EALIGN): Use it.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Use LOCALENTRY.
	* sysdeps/powerpc/powerpc64/setjmp-common.S (__GI__setjmp): Do not
	fall through into ENTRY entry point.
	* libc/sysdeps/powerpc/powerpc64/dl-machine.h (Elf64_FuncDesc):
	Only define if _CALL_ELF != 2.

	(elf_machine_matches_host): Verify ABI version matches.
	(RTLD_START): Use LOCALENTRY.
	(elf_machine_type_class): Use SHN_UNDEF PLT handling for ELFv2 ABI.
	(PLT_INITIAL_ENTRY_WORDS): New version for _CALL_ELF != 2.
	(PLT_ENTRY_WORDS): New macro.
	(GLINK_INITIAL_ENTRY_WORDS, GLINK_ENTRY_WORDS): Likewise.
	(elf_machine_runtime_setup): Support ELFv2 ABI.
	(elf_machine_fixup_plt): Likewise.
	(elf_machine_plt_conflict): Likewise.
	(resolve_ifunc): Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ldsodefs.h
	(DL_ADDR_SYM_MATCH): Only define if _CALL_ELF != 2.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(makecontext): Support ELFv2 ABI.
	* elf/elf.h (EF_PPC64_ABI): Define.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/powerpc/powerpc64/sysdep.h
	(PPC64_LOAD_FUNCPTR) [ASSEMBLER]: New assembler macro.
	(ENTRY_1) [ASSEMBLER]: Do not switch to .text section here ...
	(ENTRY) [ASSEMBLER]: ... but instead here ...
	(EALIGN) [ASSEMBLER]: ... and here.
	(PPC64_LOAD_FUNCPTR) [!ASSEMBLER]: New macro.
	(ENTRY_1) [!ASSEMBLER]: New macro; set up .opd entry.
	(ENTRY_2) [!ASSEMBLER]: Use it.
	* sysdeps/powerpc/powerpc64/dl-machine.h (RTLD_START): Update for
	ENTRY_2 changes.  Use PPC64_LOAD_FUNCPTR.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve)
	(_dl_profile_resolve): Use PPC64_LOAD_FUNCPTR.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Use ENTRY_2.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (clone):
	Use PPC64_LOAD_FUNCPTR.

	* sysdeps/powerpc/tls.h (tcbhead_t): Add __private_ss field.

2013-12-04  Alan Modra  <amodra@gmail.com>

	* elf/elf.h (R_PPC64_TLSGD, R_PPC64_TLSLD, R_PPC64_TOCSAVE): Define.
	(R_PPC64_ADDR16_HIGH, R_PPC64_ADDR16_HIGHA): Likewise.
	(R_PPC64_TPREL16_HIGH, R_PPC64_TPREL16_HIGHA): Likewise.
	(R_PPC64_DTPREL16_HIGH, R_PPC64_DTPREL16_HIGHA): Likewise.

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Add
	overflow checking for R_PPC64_ADDR16_HI, R_PPC64_ADDR16_HA,
	R_PPC64_TPREL16_HI, and R_PPC64_TPREL16_HA.
	Support new R_PPC64_ADDR16_HIGH, R_PPC64_ADDR16_HIGHA,
	R_PPC64_TPREL16_HIGH, and R_PPC64_TPREL16_HIGHA relocations.
	Fix overflow checking for R_PPC64_ADDR30 and R_PPC64_ADDR32.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext): Fix incorrect CFI when backtracing out of
	context created via makecontext.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/secontext.S
	(__setcontext): Fix incorrect CFI during switch to new context.
	(__novec_setcontext): Likewise.

2013-12-04  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #4772]
	* time/strptime_l.c (__strptime_internal): Allow modifiers
	in strptime.
	* time/tst-strptime.c (day_tests): Add testcase.

2013-12-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Skip over blank lines.

2013-12-04  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #926]
	* manual/time.texi (Calendar Time): Clarify what timezone functions
	use.

2013-12-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-04  Ondřej Bílka  <neleai@seznam.cz>

	* debug/memcpy_chk.c (__memcpy_chk): Use call instead of custom
	implementation.
	* debug/memmove_chk.c (MEMMOVE_CHK): Likewise.
	* debug/mempcpy_chk.c (__mempcpy_chk): Likewise.
	* debug/memset_chk.c (__memset_chk): Likewise.
	* debug/stpncpy_chk.c (__stpncpy_chk): Likewise.
	* debug/strncpy_chk.c: Likewise.

2013-12-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15268]
	[BZ #15425]
	* sysdeps/ieee754/dbl-64/e_exp.c: Include <float.h>.
	(__ieee754_exp): For possibly underflowing results, check size of
	result and force underflow exception if required.
	* math/auto-libm-test-in: Add more tests of exp.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16283]
	* math/w_exp2.c (__exp2): Handle a zero result as underflow.
	* math/w_exp2f.c (__exp2f): Likewise.
	* math/w_exp2l.c (__exp2l): Likewise.
	* math/auto-libm-test-in: Do not allow missing errno on exp2
	underflow.
	* math/auto-libm-test-out: Regenerated.

2013-12-03  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #16274]
	* sysdeps/unix/sysv/linux/shm_open.c (shm_open): Correctly
	handle filename validation.
	* rt/tst-shm.c (do_test): Do not skip a test when shm_open fails.
	(do_open): Delete.

2013-12-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6786]
	* sysdeps/ieee754/dbl-64/s_erf.c: Include <errno.h> and <float.h>.
	(__erfc): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/flt-32/s_erff.c: Include <errno.h> and
	<float.h>.
	(__erfcf): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* math/auto-libm-test-in: Don't allow missing errno from erfc.
	Add more erfc tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of erf, erfc, exp, exp10,
	exp2, expm1, j0 and j1.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (erf_test_data): Use AUTO_TESTS_f_f.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_tonearest_test_data): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_upward_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	* math/gen-auto-libm-tests.c: Mention "xfail-rounding" in comment.
	(input_flag_type): Add flag_xfail_rounding.
	(input_flags): Add xfail-rounding.
	(adjust_real): Assert mpfr_number_p not mpfr_regular_p.
	(output_for_one_input_case): Handle flag_xfail_rounding.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-03  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16289]
	* locale/loadarchive.c (_nl_load_locale_from_archive): Avoid
	division by 0.

2013-12-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16195]
	* include/stap-probe.h [!USE_STAP_PROBE && !__ASSEMBLER__]
	(LIBC_PROBE): Change definition to call STAP_PROBE* macros.
	(STAP_PROBE0): New macro.
	(STAP_PROBE1): Likewise.
	(STAP_PROBE2): Likewise.
	(STAP_PROBE3): Likewise.
	(STAP_PROBE4): Likewise.

2013-12-02  Ondřej Bílka  <neleai@seznam.cz>

	* manual/llio.texi (Memory-mapped I/O): Add shm_open and shm_close.

2013-12-02  Steve Ellcey  <sellcey@mips.com>

	* benchtests/Makefile (bench): Add sqrt.
	(LDLIBS-bench-sqrt): New.
	* benchtests/sqrt-input: New.

2013-12-02  Pavel Simerda  <psimerda@redhat.com>

	* sysdeps/posix/getaddrinfo.c (GAIH_OKIFUNSPEC): Remove macro.
	(GAIH_EAI): Likewise.
	(gaih_inet_serv): Don't use GAIH_OKIFUNSPEC.
	(gaih_inet): Likewise.
	(getaddrinfo): Don't use GAIH_EAI.

	* sysdeps/posix/getaddrinfo.c (UNIX_PATH_MAX): Remove macro.
	(struct gaih): Remove definition.

2013-12-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nss/nss_files/files-hosts.c (_nss_files_gethostbyname4_r):
	Use HERRNOP directly.

2013-12-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-11-30  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-auto-libm-tests.c (test_functions): Add more
	single-argument functions.
	(special_fill_pi_2): New function.
	(special_fill_minus_pi_2): Likewise.
	(special_fill_pi_6): Likewise.
	(special_fill_minus_pi_6): Likewise.
	(special_fill_pi_3): Likewise.
	(special_fill_2pi_3): Likewise.
	(special_fill_e): Likewise.
	(special_fill_1_e): Likewise.
	(special_fill_e_minus_1): Likewise.
	(special_real_inputs): Add more special inputs.
	(output_for_one_input_case): Do not require ERANGE on underflow to
	zero if round-to-nearest result does not underflow to zero, unless
	exact results required.
	* math/auto-libm-test-in: Add tests of acos, acosh, asin, asinh,
	atan, atanh, cbrt, cos and cosh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (acos_test_data): Use AUTO_TESTS_f_f.
	(acos_tonearest_test_data): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_upward_test_data): Likewise.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asin_tonearest_test_data): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_upward_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(cos_test_data): Likewise.
	(cos_tonearest_test_data): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_upward_test_data): Likewise.
	(cosh_test_data): Likewise.
	(cosh_tonearest_test_data): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_upward_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-11-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6787]
	* math/w_exp10.c (__exp10): Handle a zero result as underflow.
	* math/w_exp10f.c (__exp10f): Likewise.
	* math/w_exp10l.c (__exp10l): Likewise.
	* math/libm-test.inc (exp10_test_data): Add more tests and expect
	errno settings in existing tests.

	[BZ #14032]
	* sysdeps/i386/fpu/e_sqrt.S (__ieee754_sqrt): Do fsqrt with
	precision control set to double precision.
	* sysdeps/i386/fpu/w_sqrt.c: New file.
	* math/auto-libm-test-in: Add more tests.
	* math/auto-libm-test-out: Update.

	* math/libm-test.inc (sqrt_tonearest_test_data): New variable.
	(sqrt_test_tonearest): New function.
	(sqrt_towardzero_test_data): New variable.
	(sqrt_test_towardzero): New function.
	(sqrt_downward_test_data): New variable.
	(sqrt_test_downward): New function.
	(sqrt_upward_test_data): New variable.
	(sqrt_test_upward): New function.
	(main): Call the new functions.

	* math/gen-auto-libm-tests.c: New file.
	* math/auto-libm-test-in: Likewise.
	* math/auto-libm-test-out: New generated file.
	* math/gen-libm-test.pl ($auto_input, %auto_tests): New global
	variables.
	(%beautify): Add generated representations of zero.
	(top level): Set $auto_input and call parse_auto_input.
	(beautify): Remove trailing "f" from hex float constants.
	(parse_args): Handle XFAIL_TEST.
	(convert_condition): New function.
	(or_value): Likewise.
	(or_cond_value): Likewise.
	(generate_testfile): Handle AUTO_TESTS_* lines.
	(parse_auto_input): New function.
	* math/libm-test.inc (XFAIL_TEST): New macro.
	(ERRNO_UNCHANGED): Update value.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(TEST_COND_flt_32): New macro.
	(TEST_COND_dbl_64): Likewise.
	(TEST_COND_ldbl_96_intel): Likewise.
	(TEST_COND_ldbl_96_m68k): Likewise.
	(TEST_COND_ldbl_128): Likewise.
	(TEST_COND_ldbl_128ibm): Likewise.
	(TEST_COND_long32): Likewise.
	(TEST_COND_long64): Likewise.
	(TEST_COND_before_rounding): Likewise.
	(TEST_COND_after_rounding): Likewise.
	(enable_test): Handle XFAIL_TEST flag.
	(sqrt_test_data): Use AUTO_TESTS_f_f for tests of finite inputs
	with finite results.
	* math/Makefile ($(objpfx)libm-test.stmp): Depend on
	auto-libm-test-out.

2013-11-29  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #16214]
	* sysdeps/s390/dl-tls.h (__TLS_GET_ADDR): Invoke
	__tls_get_addr_internal instead of __tls_get_offset in order to
	avoid GOT pointer dependency.  Make rtld export
	__tls_get_addr_internal@@GLIBC_PRIVATE while still hiding
	__tls_get_addr since we are a __tls_get_offset platform.
	* sysdeps/s390/s390-64/tls-macros.h (TLS_IE PIC): Don't rely on
	GOT pointer being set up before.
	* sysdeps/s390/s390-32/tls-macros.h (TLS_IE PIC): Likewise.

2013-11-28  Joseph Myers  <joseph@codesourcery.com>

	* manual/math.texi (Errors in Math Functions): Document accuracy
	goals.

	[BZ #15004]
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Remove file.
	* sysdeps/ieee754/ldbl-96/e_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_truncl.c: Likewise.

	* sysdeps/powerpc/nofpu/atomic-feclearexcept.c: New file.
	* sysdeps/powerpc/nofpu/atomic-feholdexcept.c: Likewise.
	* sysdeps/powerpc/nofpu/atomic-feupdateenv.c: Likewise.
	* sysdeps/powerpc/nofpu/flt-rounds.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feclearexcept.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feholdexcept.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feupdateenv.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/flt-rounds.c: Likewise.
	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = soft-fp]
	(sysdep_routines): Add atomic-feholdexcept, atomic-feclearexcept,
	atomic-feupdateenv and flt-rounds.
	* sysdeps/powerpc/nofpu/Versions (libc): Add
	__atomic_feholdexcept, __atomic_feclearexcept,
	__atomic_feupdateenv and __flt_rounds to GLIBC_2.19.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h
	(__feraiseexcept_soft): Declare and use libc_hidden_proto here.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcept-soft.c
	(__feraiseexcept_soft): Don't declare and use libc_hidden_proto
	here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libc.abilist:
	Update.

	* manual/arith.texi (FP Exceptions): Document that exceptions may
	not be raised when matherr is used.
	(Math Error Reporting): Document overflow in directed rounding
	modes.  Document that errno may not be set when finite values are
	returned on overflow.  Document intent to set errno on underflow
	only for underflow to zero.

	[BZ #16271]
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Set
	round-to-nearest then adjust result for other rounding modes.
	* include/fenv.h (fegetround): Use libm_hidden_proto.
	* math/fegetround.c (fegetround): Use libm_hidden_def.
	* sysdeps/i386/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c (fegetround):
	Likewise.
	* sysdeps/s390/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sparc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/x86_64/fpu/fegetround.c (fegetround): Likewise.

2013-11-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16077]
	* nss/Versions (libnss_files): Add
	_nss_files_gethostbyname3_r.
	* nss/nss_files/files-hosts.c (_nss_files_gethostbyname3_r):
	New function.
	(HOST_DB_LOOKUP): Remove macro.
	(_nss_files_gethostbyname_r): Implement function without the
	HOST_DB_LOOKUP macro.
	(_nss_files_gethostbyname2_r): Likewise.

2013-11-28  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/malloc.c (__libc_calloc): Make memset a tail call.

2013-11-26  Uros Bizjak  <ubizjak@gmail.com>

	* soft-fp/op-4.h (_FP_FRAC_ASSEMBLE_4): Check rsize against
	_FP_W_TYPE_SIZE to avoid "left shift count >= width of type"
	warning.

2013-11-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Use
	__fe_nomask_env_priv instead of __fe_nomask_env to avoid a PLT call.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_nomask_env): Rename to
	__fe_nomask_env_priv and attribute_hidden.
	* sysdeps/powerpc/fpu/fenv_private.h (libc_fesetenv_ppc): Likewise.
	(libc_feupdateenv_test_ppc): Likewise.
	(libc_feresetround_ppc): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Rename to __fe_nomask_env_priv and adjust
	compat_symbol macro.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Likewise.
	* sysdeps/powerpc/fpu/fe_nomask.c (__fe_nomask_env): Likewise.

2013-11-26  Ondřej Bílka  <neleai@seznam.cz>

	* string/Makefile: Remove ifunc tests.
	* string/test-string.h: Define TEST_IFUNC.
	* string/test-bcopy-ifunc.c: Remove.
	* string/test-bzero-ifunc.c: Likewise.
	* string/test-memccpy-ifunc.c: Likewise.
	* string/test-memchr-ifunc.c: Likewise.
	* string/test-memcmp-ifunc.c: Likewise.
	* string/test-memcpy-ifunc.c: Likewise.
	* string/test-memmem-ifunc.c: Likewise.
	* string/test-memmove-ifunc.c: Likewise.
	* string/test-mempcpy-ifunc.c: Likewise.
	* string/test-memrchr-ifunc.c: Likewise.
	* string/test-memset-ifunc.c: Likewise.
	* string/test-rawmemchr-ifunc.c: Likewise.
	* string/test-stpcpy-ifunc.c: Likewise.
	* string/test-stpncpy-ifunc.c: Likewise.
	* string/test-strcasecmp-ifunc.c: Likewise.
	* string/test-strcasestr-ifunc.c: Likewise.
	* string/test-strcat-ifunc.c: Likewise.
	* string/test-strchr-ifunc.c: Likewise.
	* string/test-strchrnul-ifunc.c: Likewise.
	* string/test-strcmp-ifunc.c: Likewise.
	* string/test-strcpy-ifunc.c: Likewise.
	* string/test-strcspn-ifunc.c: Likewise.
	* string/test-strlen-ifunc.c: Likewise.
	* string/test-strncasecmp-ifunc.c: Likewise.
	* string/test-strncat-ifunc.c: Likewise.
	* string/test-strncmp-ifunc.c: Likewise.
	* string/test-strncpy-ifunc.c: Likewise.
	* string/test-strnlen-ifunc.c: Likewise.
	* string/test-strpbrk-ifunc.c: Likewise.
	* string/test-strrchr-ifunc.c: Likewise.
	* string/test-strspn-ifunc.c: Likewise.
	* string/test-strstr-ifunc.c: Likewise.

2013-11-26  Ondřej Bílka  <neleai@seznam.cz>

	* benchtests/Makefile: Remove ifunc tests.
	* benchtests/bench-string.h: Define TEST_IFUNC.
	* benchtests/bench-bcopy-ifunc.c: Remove.
	* benchtests/bench-bzero-ifunc.c: Likewise.
	* benchtests/bench-memccpy-ifunc.c: Likewise.
	* benchtests/bench-memchr-ifunc.c: Likewise.
	* benchtests/bench-memcmp-ifunc.c: Likewise.
	* benchtests/bench-memcpy-ifunc.c: Likewise.
	* benchtests/bench-memmem-ifunc.c: Likewise.
	* benchtests/bench-memmove-ifunc.c: Likewise.
	* benchtests/bench-mempcpy-ifunc.c: Likewise.
	* benchtests/bench-memrchr-ifunc.c: Likewise.
	* benchtests/bench-memset-ifunc.c: Likewise.
	* benchtests/bench-rawmemchr-ifunc.c: Likewise.
	* benchtests/bench-stpcpy_chk-ifunc.c: Likewise.
	* benchtests/bench-stpcpy-ifunc.c: Likewise.
	* benchtests/bench-stpncpy-ifunc.c: Likewise.
	* benchtests/bench-strcasecmp-ifunc.c: Likewise.
	* benchtests/bench-strcasestr-ifunc.c: Likewise.
	* benchtests/bench-strcat-ifunc.c: Likewise.
	* benchtests/bench-strchr-ifunc.c: Likewise.
	* benchtests/bench-strchrnul-ifunc.c: Likewise.
	* benchtests/bench-strcmp-ifunc.c: Likewise.
	* benchtests/bench-strcpy_chk-ifunc.c: Likewise.
	* benchtests/bench-strcpy-ifunc.c: Likewise.
	* benchtests/bench-strcspn-ifunc.c: Likewise.
	* benchtests/bench-strlen-ifunc.c: Likewise.
	* benchtests/bench-strncasecmp-ifunc.c: Likewise.
	* benchtests/bench-strncat-ifunc.c: Likewise.
	* benchtests/bench-strncmp-ifunc.c: Likewise.
	* benchtests/bench-strncpy-ifunc.c: Likewise.
	* benchtests/bench-strnlen-ifunc.c: Likewise.
	* benchtests/bench-strpbrk-ifunc.c: Likewise.
	* benchtests/bench-strrchr-ifunc.c: Likewise.
	* benchtests/bench-strsep-ifunc.c: Likewise.
	* benchtests/bench-strspn-ifunc.c: Likewise.
	* benchtests/bench-strstr-ifunc.c: Likewise.

2013-11-26  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/dl-tlsdesc.S (_dl_tlsdesc_resolve_hold): Fix typo.

2013-11-26  Ondřej Bílka  <neleai@seznam.cz>

	* resolv/netdb.h: Use __glibc_reserved instead __unused.
	* rt/aio.h: Likewise.
	* sysdeps/gnu/bits/utmp.h: Likewise.
	* sysdeps/gnu/bits/utmpx.h: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/ntp_gettimex.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/utmpx.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmp32.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmpx32.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstatconv.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timex.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.c: Likewise.
	* sysdeps/x86/fpu/bits/fenv.h: Likewise.

2013-11-25  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16245]
	* sysdeps/unix/sysv/linux/sys/ptrace.h (__ptrace_eventcodes):
	Rename PTRAVE_EVENT_SECCOMP to PTRACE_EVENT_SECCOMP.

2013-11-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/fenv_libc.h (__fegetround): New macro.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h (__fegetround):
	Likewise.

2013-11-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (__ieee754_expl): Use
	SET_RESTORE_ROUND instead of feholdexcept/fesetround/fesetenv.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fegetround): Remove define.
	(__fesetround): Remove define.
	* sysdeps/powerpc/fpu/fenv_private.h: New file: Inline floating point
	rounding and exceptions handling.
	* sysdeps/powerpc/fpu/math_private.h: Include fenv_private.h.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_mask_env): Define as hidden.
	(__fe_nomask_env): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c (__llrintl): Use
	__fegetround instead of fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c (__rintl): Likewise.

2013-11-21  Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc.c: Move #include <sys/param.h> to the top; comment why
	it's there.

	* sysdeps/generic/sys/swap.h (swapon): Add FLAGS argument to prototype.

2013-11-21  Meador Inge  <meadori@codesourcery.com>

	[BZ #11157]
	* crypt/crypt.h (encrypt): Use __glibc_block instead of __block.
	(encrypt_r): Likewise.
	* malloc/obstack.h (obstack_free): Likewise.
	* posix/unistd.h (encrypt): Likewise.

2013-11-21  Guy Martin  <gmsoft@tuxicoman.be>

	* sysdeps/generic/ldsodefs.h: Replace DL_DT_INIT_ADDRESS() and
	DL_DT_FINI_ADDRESS() macro with DL_CALL_DT_INIT() and
	DL_CALL_DT_FINI() that call the functions directly.
	* elf/dl-init.c: Use the new DL_CALL_DT_INIT() macro.
	* elf/dl-close.c: Use the new DL_CALL_DT_FINI() macro.
	* elf/dl-fini.c: Likewise.

2013-11-20  Ondřej Bílka  <neleai@seznam.cz>

	* malloc/hooks.c (memalign_check): Add alignment rounding.
	* malloc/malloc.c (_mid_memalign): New function.
	(__libc_valloc, __libc_pvalloc, __libc_memalign, __posix_memalign):
	Implement by calling _mid_memalign.
	* manual/probes.texi (Memory Allocation Probes): Remove
	memory_valloc_retry and memory_pvalloc_retry.

2013-11-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/programs/locarchive.c (open_archive): Add const
	qualifier to ARCHIVEFNAME and copy default fname to
	DEFAULT_FNAME.

	[BZ #15601]
	* libio/tst-widetext.input: Rename Oriya to Odia.
	* locale/iso-639.def: Likewise.

	* manual/probes.texi (Mathematical Function Probes): Add
	documentation for sin, cos, asin and acos probes.
	* sysdeps/ieee754/dbl-64/sincos32.c: Include stap-probe.h.
	(__sin32): Add slowasin probe.
	(__cos32): Add slowacos probe.
	(__mpsin): Add slowsin probe.
	(__mpcos): Add slowcos probe.

2013-11-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15483]
	* sysdeps/powerpc/nofpu/sim-full.c (__sim_exceptions): Change to
	thread-local __sim_exceptions_thread and global
	__sim_exceptions_global.
	(__sim_disabled_exceptions): Change to thread-local
	__sim_disabled_exceptions_thread and global
	__sim_disabled_exceptions_global.
	(__sim_round_mode): Change to thread-local __sim_round_mode_thread
	and global __sim_round_mode_global.
	(__simulate_exceptions): Use thread-local floating-point state and
	set global state from it as needed.
	* sysdeps/powerpc/nofpu/Versions (GLIBC_PRIVATE): Add
	__sim_exceptions_thread, __sim_disabled_exceptions_thread and
	__sim_round_mode_thread.
	* sysdeps/powerpc/nofpu/soft-supp.h: Include <shlib-compat.h>.
	(__sim_exceptions): Change to thread-local __sim_exceptions_thread
	and global __sim_exceptions_global.
	(__sim_disabled_exceptions): Change to thread-local
	__sim_disabled_exceptions_thread and global
	__sim_disabled_exceptions_global.
	(__sim_round_mode): Change to thread-local __sim_round_mode_thread
	and global __sim_round_mode_global.
	[SIM_GLOBAL_COMPAT] (SIM_COMPAT_SYMBOL): New macro.
	(SIM_SET_GLOBAL): Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	[!(__NO_FPRS__ && !_SOFT_FLOAT)] (FP_ROUNDMODE): Use
	__sim_round_mode_thread.
	[!(__NO_FPRS__ && !_SOFT_FLOAT)] (FP_TRAPPING_EXCEPTIONS): Use
	__sim_disabled_exceptions_thread.
	(__sim_exceptions): Change to __sim_exceptions_thread.
	(__sim_disabled_exceptions): Change to
	__sim_disabled_exceptions_thread.
	(__sim_round_mode): Change to __sim_round_mode_thread.
	* sysdeps/powerpc/nofpu/fclrexcpt.c (__feclearexcept): Use
	thread-local floating-point state and set global state from it as
	needed.
	* sysdeps/powerpc/nofpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/powerpc/nofpu/feenablxcpt.c: Include "soft-supp.h".
	(__sim_disabled_exceptions): Remove extern declaration.
	(feenableexcept): Use thread-local floating-point state and set
	global state from it as needed.
	* sysdeps/powerpc/nofpu/fegetenv.c (__sim_exceptions): Remove
	extern declaration.
	(__sim_disabled_exceptions): Likewise.
	(__sim_round_mode): Likewise.
	(__fegetenv): Use thread-local floating-point state.
	* sysdeps/powerpc/nofpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/nofpu/fesetenv.c (__fesetenv): Use thread-local
	floating-point state and set global state from it as needed.
	* sysdeps/powerpc/nofpu/fesetround.c (fesetround): Likewise.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/nofpu/fgetexcptflg.c (__fegetexceptflag):
	Likewise.
	* sysdeps/powerpc/nofpu/fraiseexcpt.c (__feraiseexcept): Likewise.
	* sysdeps/powerpc/nofpu/fsetexcptflg.c (__fesetexceptflag):
	Likewise.
	sysdeps/powerpc/nofpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/powerpc/nofpu/get-rounding-mode.h (get_rounding_mode):
	Use __sim_round_mode_thread.
	* math/test-fenv-tls.c: New file.
	* math/Makefile (tests): Add test-fenv-tls.
	($(objpfx)test-fenv-tls): Depend on
	$(common-objpfx)nptl/libpthread.so.

2013-11-19  Andreas Schwab  <schwab@suse.de>

	* locale/programs/locale.c (show_info): Decode wordarray elements.
	* locale/categories.def (LC_MONETARY): Add element for
	_NL_MONETARY_CRNCYSTR.
	* locale/C-monetary.c (conversion_rate): New variable.
	(_nl_C_LC_MONETARY): Use it for _NL_MONETARY_CONVERSION_RATE
	element.

2013-11-18  Chris Metcalf  <cmetcalf@tilera.com>

	* math/test-fpucw-ieee.c [!defined _FPU_IEEE] (FPU_CONTROL):
	Omit definition of FPU_CONTROL and use default if no _FPU_IEEE.

2013-11-18  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/Makefile (tst-auxv): New test.
	* elf/tst-auxv.c: New
	* elf/rtld.c (dl_main): Adjust AT_EXECFN

2013-11-18  Joseph Myers  <joseph@codesourcery.com>

	* include/libc-symbols.h (__hidden_proto): Add argument "thread".
	(hidden_proto): Caller changed.
	(hidden_tls_proto): New macro.
	(libc_hidden_tls_proto): Likewise.
	(rtld_hidden_tls_proto): Likewise.
	(libm_hidden_tls_proto): Likewise.
	(libresolv_hidden_tls_proto): Likewise.
	(librt_hidden_tls_proto): Likewise.
	(libdl_hidden_tls_proto): Likewise.
	(libnss_files_hidden_tls_proto): Likewise.
	(libnsl_hidden_tls_proto): Likewise.
	(libnss_nisplus_hidden_tls_proto): Likewise.
	(libutil_hidden_tls_proto): Likewise.

2013-11-18  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #10253]
	* elf/dl-load.c (fillin_rpath): Add linkmap parameter and expand path.
	(decompose_rpath): Defer expansion to fillin_rpath.
	(_dl_init_paths): Pass linkmap to fillin_rpath.

2013-11-18  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/Makefile: Add strsep.
	* benchtests/bench-strsep.c: New file: strsep benchtest.
	* benchtests/bench-strsep-ifunc.c: New file: strsep benchtest.

2013-11-18  Andreas Schwab  <schwab@suse.de>

	* locale/programs/locale.c (show_info) [case byte]: Check for
	'\377' instead of '\177'.
	* locale/C-monetary.c (not_available): Always use "\377".
	* stdlib/strfmon_l.c (__vstrfmon_l): Use -2 as marker for
	unspecified p_sign_posn and n_sign_posn.  Check for '\377' to
	detect unavailable sign_posn locale elements.
	* locale/localeconv.c (__localeconv): For grouping and
	mon_grouping handle "\177" and "\377" like no grouping.
	(INT_ELEM): New macro.  Use it to set all numeric members.
	* locale/programs/ld-monetary.c (monetary_read)
	<tok_mon_grouping>: Normalize single -1 to the empty string.
	* locale/programs/ld-numeric.c (numeric_read) <tok_grouping>:
	Likewise.

2013-11-07  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #16055]
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Limit width
	when we match (nil).
	* stdio-common/tst-sscanf.c (struct test): Add testcase.

2013-11-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (TEST_NAN_SIGN): New macro.
	(NO_TEST_INLINE): Update value.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(check_float_internal): Check signs of NaN results if
	TEST_NAN_SIGN used.
	(check_complex): Pass TEST_NAN_SIGN flag through to second
	check_float_internal call.
	(copysign_test_data): Add tests with quiet NaNs as second
	argument.  Use TEST_NAN_SIGN.
	(fabs_test_data): Add test of negative quiet NaN argument.  Use
	TEST_NAN_SIGN.
	(signbit_test_data): Add tests of quiet NaN argument.
	* math/gen-libm-test.pl (parse_args): Handle TEST_NAN_SIGN.

	* math/gen-libm-test.pl (show_exceptions): Take extra argument
	$ignore_result.
	(parse_args): Handle function results specified as IGNORE.
	* math/libm-test.inc (IGNORE_RESULT): New macro.
	(check_float_internal): Do not check numerical result if flag
	IGNORE_RESULT set.
	(check_complex): Pass through IGNORE_RESULT to second
	check_float_internal call.
	(check_int): Do not check numerical result if flag IGNORE_RESULT
	set.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(lrint_test_data): Add tests of infinite and NaN arguments.
	(lrint_tonearest_test_data): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_upward_test_data): Likewise.
	(llrint_test_data): Likewise.
	(llrint_tonearest_test_data): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_upward_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.

	* math/libm-test.inc (NO_TEST_INLINE): New macro.
	(ERRNO_UNCHANGED): Update value.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(NO_TEST_INLINE_FLOAT): New macro.
	(NO_TEST_INLINE_DOUBLE): Likewise.
	(enable_test): New function.
	(RUN_TEST_f_f): Check enable_test before running test.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_fFF_11): Likewise.
	(asinh_test_data): Use NO_TEST_INLINE instead of [!TEST_INLINE]
	conditionals.
	(cosh_test_data): Likewise.
	(exp_test_data): Likewise.
	(expm1_test_data): Likewise.
	(hypot_test_data): Likewise.
	(pow_test_data): Likewise.
	(sinh_test_data): Likewise.
	(tanh_test_data): Likewise.
	* math/gen-libm-test.pl (parse_args): Allow NO_TEST_INLINE as
	flags argument.

	* libm-test.inc (acos_test_data): Disallow inexact exceptions for
	tests with quiet NaN input and output.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(cos_test_data): Likewise.
	(cosh_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(hypot_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Likewise.
	(scalb_test_data): Likewise.
	(sin_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(tan_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	[BZ #16167]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Check for first
	argument being NaN and avoid computations with second argument in
	that case.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.

2013-11-15  Arun Kumar Pyasi <arun@chitwanix.com>

	* locale/iso-639.def: Add Chitwani Tharu (the).

2013-11-14  Andreas Schwab  <schwab@suse.de>

	* locale/C-address.c (_nl_C_LC_ADDRESS): Set country_num to zero
	word instead of empty string.

2013-11-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Fir compat symbol to be remove for GLIBC_2.19.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Likewise.

2013-11-13  Steve Ellcey  <sellcey@mips.com>

	* benchtests/bench-timing.h: Include time.h.

2013-11-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #15997]
	* sysdeps/unix/sysv/linux/configure.ac (arch_minimum_kernel): Set
	to 3.4.0 for x32.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2013-11-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16151]
	* stdlib/strtod_l.c (round_and_return): Do not consider
	retval[RETURN_LIBM_SIZE - 1] when determining more_bits for an
	exponent one less than half the least subnormal exponent.
	* stdlib/test-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2013-11-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #14143]
	* sysdeps/powerpc/bits/fenv.h (__fe_nomask_env): Remove declaration.
	(__fe_mask_env): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_nomask_env): Remove
	libm_hidden_proto and add function prototype.
	(__fe_mask_env): Add function prototype.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Add compat symbol for GLIBC_2.1.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c
	(__fe_mask_env): Remove compiler warnings regarding ununsed variables.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Add compat symbol for GLIBC_2.3.

2013-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/dl-lookup.c (_dl_lookup_symbol_x): If UNDEF_MAP is false
	set reference_name to "" to avoid passing NULL to DSO_FILENAME.

2013-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/tlsdeschtab.h (_dl_make_tlsdesc_dynamic): Handle failure
	of htab_find_slot().

2013-11-11  David S. Miller  <davem@davemloft.net>

	[BZ #16150]
	* sysdeps/sparc/sparc64/multiarch/add_n.S: Resolve to the correct generic
	symbol in the non-vis3 case in static builds.
	* sysdeps/sparc/sparc64/multiarch/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/mul_1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/sub_n.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/submul_1.S: Likewise.

2013-11-11  Jan Kratochvil  <jan.kratochvil@redhat.com>

	[BZ #387]
	* elf/dl-object.c (_dl_new_object): Initialize L_NAME from NEWNAME if
	it is empty.

2013-11-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/Makefile: Add bench-strtod.
	* benchtests/bench-strtod.c: New file: strtod benchtest

2013-11-11  Andreas Schwab  <schwab@suse.de>

	[BZ #16153]
	* nscd/nscd_getserv_r.c (__nscd_getservbyport_r): Don't include
	terminating NUL in key length.

2013-11-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET):
	Add artificial ODP entry for vDSO symbol for PPC64.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Adjust includes.
	* sysdeps/unix/sysv/linux/powerpc/time.c: Likewise.

2013-11-07  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15374]
	* nss/getent.c (services_keys): Recognize services starting with digit.

2013-11-06  David S. Miller  <davem@davemloft.net>

	[BZ #15985]
	* sysdeps/sparc/sparc32/fpu/s_fdim.S (__fdim): Do not use fnegd
	on pre-v9 cpus, use a fnegs+fmovs sequence instead.

2013-11-06  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Remove register
	keyword from examples.

2013-11-04  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Correct Walaita (wal) and add Unami Delaware (unm).

2013-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6981]
	* include/stdc-predef.h [__GCC_IEC_559] (__STDC_IEC_559__): Define
	depending on [__GCC_IEC_559 > 0].
	[__GCC_IEC_559_COMPLEX] (__STDC_IEC_559_COMPLEX__): Define
	depending on [__GCC_IEC_559_COMPLEX > 0].

2013-11-03  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Quechua, Southern (quz) and Silesian (szl)
	to iso-639.def.

2013-11-03  Ondřej Bílka  <neleai@seznam.cz>

	* elf/rtld.c: Remove unused NONTLS_INIT_TP.

2013-11-01  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #16112]
	* malloc/malloc (malloc_info): Do not handle first bin as
	special case.

2013-11-01  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Central Nahuatl (nhn).

2013-11-01  Bruno Haible  <bruno@clisp.org>

	[BZ #7003]
	* manual/math.texi (BSD Random): Specify range upper bound as
	in POSIX.

2013-10-31  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Meadow Mari (mhr).

2013-10-31  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14752], [BZ #15763]
	* sysdeps/unix/sysv/linux/shm_open.c (shm_open, shm_unlink):
	Validate name.
	* rt/tst_shm.c: Add test for escaping directory.

2013-10-31  Andreas Schwab  <schwab@suse.de>

	[BZ #15917]
	* stdio-common/vfscanf.c (_IO_vfwscanf): Handle leading '0' not
	followed by 'x' as part of digit sequence.
	* stdio-common/tst-sscanf.c (double_tests2): New tests.

2013-10-31  Marc-Antoine Perennou <Marc-Antoine@Perennou.com>

	[BZ #16037]
	* configure.ac: allow GNU Make 4.0 and greater.
	* configure: Regenerated.

2013-10-30  Will Newton  <will.newton@linaro.org>

	[BZ #16038]
	* malloc/hooks.c (memalign_check): Limit alignment to the
	maximum representable power of two.
	* malloc/malloc.c (__libc_memalign): Likewise.
	* malloc/tst-memalign.c (do_test): Add test for very
	large alignment values.
	* malloc/tst-posix_memalign.c (do_test): Likewise.

2013-10-30  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #11087]
	* malloc/malloc.c (sysmalloc): Compute statistics atomically.
	(munmap_chunk): Likewise.
	(mremap_chunk): Likewise.

2013-10-30  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15799]
	* stdlib/div.c (div): Remove obsolete code.
	* stdlib/ldiv.c (ldiv): Likewise.
	* stdlib/lldiv.c (lldiv): Likewise.

2013-10-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16071]
	* nss/nss_files/files-XXX.c (get_contents_ret): New
	enumerator.
	(get_contents): New function.
	(internal_getent): Use it.  Expand size of LINEBUFLEN.

2013-10-30  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Moved to ...
	* configure.ac: ... here. Change reference to configure.in
	to configure.ac.
	* sysdeps/arm/preconfigure.ac: ... here.
	configure.in to configure.ac.
	* sysdeps/gnu/configure.in: Moved to ...
	* sysdeps/gnu/configure.ac: ... here.
	* sysdeps/i386/configure.in: Moved to ...
	* sysdeps/i386/configure.ac: ... here.
	* sysdeps/ieee754/ldbl-opt/configure.in: Moved to ...
	* sysdeps/ieee754/ldbl-opt/configure.ac: ... here.
	* sysdeps/mach/configure.in: Moved to ...
	* sysdeps/mach/configure.ac: ... here.
	* sysdeps/mach/hurd/configure.in: Moved to ...
	* sysdeps/mach/hurd/configure.ac: ... here.
	* sysdeps/powerpc/configure.in: Moved to ...
	* sysdeps/powerpc/configure.ac: ... here.
	* sysdeps/powerpc/powerpc32/configure.in: Moved to ...
	* sysdeps/powerpc/powerpc32/configure.ac: ... here.
	* sysdeps/powerpc/powerpc64/configure.in: Moved to ...
	* sysdeps/powerpc/powerpc64/configure.ac: ... here.
	* sysdeps/s390/s390-32/configure.in: Moved to ...
	* sysdeps/s390/s390-32/configure.ac: ... here.
	* sysdeps/s390/s390-64/configure.in: Moved to ...
	* sysdeps/s390/s390-64/configure.ac: ... here.
	* sysdeps/sh/configure.in: Moved to ...
	* sysdeps/sh/configure.ac: ... here.
	* sysdeps/sparc/configure.in: Moved to ...
	* sysdeps/sparc/configure.ac: ... here.
	* sysdeps/unix/sysv/linux/configure.in: Moved to ...
	* sysdeps/unix/sysv/linux/configure.ac: ... here.
	* sysdeps/unix/sysv/linux/powerpc/configure.in: Moved to ...
	* sysdeps/unix/sysv/linux/powerpc/configure.ac: ... here.
	* sysdeps/x86_64/configure.in: Moved to ...
	* sysdeps/x86_64/configure.ac: ... here.
	* sysdeps/x86_64/preconfigure.in: Moved to ...
	* sysdeps/x86_64/preconfigure.ac: ... here.
	* aclocal.m4: Change reference to configure.in to configure.ac.
	* config.h.in: Likewise.
	* manual/install.texi: Likewise.
	* manual/maint.texi: Likewise.
	* Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* nscd/Makefile: Likewise.
	* Makeconfig: Change reference to configure.in and
	preconfigure.in to configure.ac and preconfigure.ac
	respectively.
	* INSTALL: Regenerated.
	* configure: Likewise.
	* sysdeps/gnu/configure: Likewise.
	* sysdeps/i386/configure: Likewise.
	* sysdeps/ieee754/ldbl-opt/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/mach/hurd/configure: Likewise.
	* sysdeps/powerpc/configure: Likewise.
	* sysdeps/powerpc/powerpc32/configure: Likewise.
	* sysdeps/powerpc/powerpc64/configure: Likewise.
	* sysdeps/s390/s390-32/configure: Likewise.
	* sysdeps/s390/s390-64/configure: Likewise.
	* sysdeps/sh/configure: Likewise.
	* sysdeps/sparc/configure: Likewise.
	* sysdeps/unix/sysv/linux/configure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/x86_64/preconfigure: Likewise.

2013-10-29  Andreas Schwab  <schwab@suse.de>

	* stdio-common/Makefile (tst-swscanf-ENV): Define.

2013-10-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/pow-inputs: Add new inputs.

	* benchtests/exp-inputs: Add new inputs.

	* sysdeps/ieee754/dbl-64/sincos32.c (__sin32): Consolidate
	conditional check for return value.
	(__cos32): Likewise.

2013-10-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/strcpy.S (strcpy): Add word load/store
	to provide a boost for large inputs with word alignment.
	* sysdeps/powerpc/powerpc64/stpcpy.S (__stpcpy): Rewrite
	implementation based on optimized PPC64 strcpy.
	* sysdeps/powerpc/powerpc64/power7/strcpy.S: New file: optimized
	strcpy for PPC64/POWER7 based on both doubleword and word load/store.
	* sysdeps/powerpc/powerpc64/power7/stpcpy.S: New file: optimized
	stpcpy for PPC64/POWER7 based on PPC64/POWER7 strcpy.

2013-10-25   Ondřej Bílka  <neleai@seznam.cz>

	[BZ #2801]
	* manual/socket.texi (Host Names): Fix gethostbyname_r example.

2013-10-25   Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14876]
	* time/strptime_l.c (__strptime_internal): 14876 Read timezone entry.
	* time/tst-strptime.c (day_tests): Add testcase.

2013-10-25   Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14029]
	* manual/pattern.texi: Acknowledge that fnmatch can fail.

2013-10-25  Fabrice Bauzac  <fbauzac@debian71.nce.amadeus.net>

	[BZ #16074]
	* manual/llio.texi (Memory-mapped I/O): Indicate that mmap returns
	MAP_FAILED on error.

2013-10-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16072]
	* sysdeps/posix/getaddrinfo.c (gethosts): Allocate tmpbuf on
	heap for large requests.

2013-10-25  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #9954]
	* sysdeps/posix/getaddrinfo.c (rfc3484_sort): do not assign native
	result if the result has no associated interface.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): correctly detect
	interface for all 127.X.Y.Z addresses.

2013-10-24  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Ligurian (lij)

2013-10-21  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15825]
	* sunrpc/rpc_main.c: Document rpcgen -5.

2013-10-19  Michael Stahl  <mstahl@redhat.com>

	* elf/rtld.c (do_preload): Print the reason why preloading failed.

2013-10-19  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #10278]
	* posix/glob.c: Match only directories when trailing slash is present.
	* posix/tst-gnuglob.c (my_opendir): Do not open files.
	(main): Add testcase.

2013-10-19  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15670]
	* time/tzfile.c (__tzfile_read): Replace alloca with malloc.

2013-10-18  Carlos O'Donell  <carlos@redhat.com>

	* manual/crypt.texi (Cryptographic Functions): Using SunRPC and
	AUTH_DES will prevent FIPS 140-2 compliance. Add vindex for
	AUTH_DES and cindex for FIPS 140-2.
	(DES Encryption): Add cindex FIPS 46-3.

	* locale/locarchive.h (struct locarhandle): Add fname.
	* locale/programs/localedef.c (main): Pass ARGV[remaining]
	if an optional argument was specified to --list-archive,
	otherwise NULL.
	* locale/programs/locarchive.c (show_archive_content): Take new
	argument fname and pass it via ah.fname to open_archive.
	* locale/programs/localedef.h: Update decl.
	(open_archive): If AH->fname is non-null, open that file
	rather than the default file name, and don't ignore ENOENT.
	(create_archive): Set AH.fname to NULL.
	(delete_locales_from_archive): Likewise.
	(add_locales_to_archive): Likewise.
	* locale/programs/locfile.c (write_all_categories): Likewise.

2013-10-18  Joseph Myers  <joseph@codesourcery.com>
	    Aldy Hernandez  <aldyh@redhat.com>

	* sysdeps/powerpc/powerpc32/e500/nofpu/Makefile: New file.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fclrexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fe_note_change.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fedisblxcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feenablxcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetexcept.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feholdexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_const.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetround.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_from_prctl.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_from_spe.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_to_prctl.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_to_spe.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcept-soft.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fsetexcptflg.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/ftestexcept.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/get-rounding-mode.h:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/s_fabsf.S: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/spe-raise.c: Likewise.
	* sysdeps/powerpc/preconfigure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/e500/nofpu/Implies:
	Likewise.
	* sysdeps/powerpc/nofpu/soft-supp.h [__NO_FPRS__ && !_SOFT_FLOAT]:
	Replace contents of file by #include of <fenv_libc.h>.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	[__NO_FPRS__ && !_SOFT_FLOAT]: Include <fenv_libc.h>, <sysdep.h>
	and <sys/prctl.h>.
	[__NO_FPRS__ && !_SOFT_FLOAT] (__feraiseexcept_soft): Declare.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_INEXACT): Define macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_INVALID): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_DIVZERO): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_UNDERFLOW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_OVERFLOW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FP_DECL_EX): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_INIT_ROUNDMODE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_INIT_EXCEPTIONS): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_HANDLE_EXCEPTIONS): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_ROUNDMODE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_TRAPPING_EXCEPTIONS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Allow copysignl PLT reference to be missing.

2013-10-18  Richard Sandiford  <richard@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com

	[BZ #15948]
	* locale/programs/ld-collate.c (new_element): Handle <U0000> as a
	single character.
	(add_to_tablewc): Assert sequence of wide characters is nonempty.

2013-10-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/tst-tls-dlinfo.c: Don't include tls.h.
	* elf/tst-tls1.c: Likewise.
	* elf/tst-tls10.h: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tls2.c: Likewise.
	* elf/tst-tls3.c: Likewise.
	* elf/tst-tls4.c: Likewise.
	* elf/tst-tls5.c: Likewise.
	* elf/tst-tls6.c: Likewise.
	* elf/tst-tls7.c: Likewise.
	* elf/tst-tls8.c: Likewise.
	* elf/tst-tls9.c: Likewise.
	* elf/tst-tlsmod1.c: Likewise.
	* elf/tst-tlsmod13.c: Likewise.
	* elf/tst-tlsmod13a.c: Likewise.
	* elf/tst-tlsmod14a.c: Likewise.
	* elf/tst-tlsmod16a.c: Likewise.
	* elf/tst-tlsmod16b.c: Likewise.
	* elf/tst-tlsmod2.c: Likewise.
	* elf/tst-tlsmod3.c: Likewise.
	* elf/tst-tlsmod4.c: Likewise.
	* elf/tst-tlsmod5.c: Likewise.
	* elf/tst-tlsmod6.c: Likewise.

2013-10-18  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #12486]
	* malloc/malloc.c: remove checks for statistics.

2013-10-17  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15277]
	* inet/inet_net.c (inet_network): Detect additional invalid strings.
	* inet/tst-network.c: Add testcase.

2013-10-17  Andreas Schwab  <schwab@suse.de>

	[BZ #15218]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't use gethostbyaddr
	to determine canonical name.

2013-10-17  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/ieee754/dbl-64/dbl2mpn.c: Fix formatting.
	* sysdeps/ieee754/dbl-64/dla.h: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/MathLib.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa-arch.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpn2dbl.c: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mydefs.h: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_cbrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.

2013-10-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16041]
	* soft-fp/op-common.h (FP_EXTEND): When input is a signaling NaN,
	make result into a quiet NaN.

2013-10-16  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/adddf3.c: Fix horizontal whitespace.
	* soft-fp/addsf3.c: Likewise.
	* soft-fp/addtf3.c: Likewise.
	* soft-fp/divdf3.c: Likewise.
	* soft-fp/divsf3.c: Likewise.
	* soft-fp/divtf3.c: Likewise.
	* soft-fp/double.h: Likewise.
	* soft-fp/eqdf2.c: Likewise.
	* soft-fp/eqsf2.c: Likewise.
	* soft-fp/eqtf2.c: Likewise.
	* soft-fp/extenddftf2.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/extendsfdf2.c: Likewise.
	* soft-fp/extendsftf2.c: Likewise.
	* soft-fp/extendxftf2.c: Likewise.
	* soft-fp/fixdfdi.c: Likewise.
	* soft-fp/fixdfsi.c: Likewise.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfdi.c: Likewise.
	* soft-fp/fixsfsi.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfdi.c: Likewise.
	* soft-fp/fixtfsi.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfdi.c: Likewise.
	* soft-fp/fixunsdfsi.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfdi.c: Likewise.
	* soft-fp/fixunssfsi.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfdi.c: Likewise.
	* soft-fp/fixunstfsi.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floatdidf.c: Likewise.
	* soft-fp/floatdisf.c: Likewise.
	* soft-fp/floatditf.c: Likewise.
	* soft-fp/floatsidf.c: Likewise.
	* soft-fp/floatsisf.c: Likewise.
	* soft-fp/floatsitf.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatundidf.c: Likewise.
	* soft-fp/floatundisf.c: Likewise.
	* soft-fp/floatunditf.c: Likewise.
	* soft-fp/floatunsidf.c: Likewise.
	* soft-fp/floatunsisf.c: Likewise.
	* soft-fp/floatunsitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmasf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.
	* soft-fp/gedf2.c: Likewise.
	* soft-fp/gesf2.c: Likewise.
	* soft-fp/getf2.c: Likewise.
	* soft-fp/ledf2.c: Likewise.
	* soft-fp/lesf2.c: Likewise.
	* soft-fp/letf2.c: Likewise.
	* soft-fp/muldf3.c: Likewise.
	* soft-fp/mulsf3.c: Likewise.
	* soft-fp/multf3.c: Likewise.
	* soft-fp/negdf2.c: Likewise.
	* soft-fp/negsf2.c: Likewise.
	* soft-fp/negtf2.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* soft-fp/sqrtdf2.c: Likewise.
	* soft-fp/sqrtsf2.c: Likewise.
	* soft-fp/sqrttf2.c: Likewise.
	* soft-fp/subdf3.c: Likewise.
	* soft-fp/subsf3.c: Likewise.
	* soft-fp/subtf3.c: Likewise.
	* soft-fp/truncdfsf2.c: Likewise.
	* soft-fp/trunctfdf2.c: Likewise.
	* soft-fp/trunctfsf2.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.
	* soft-fp/unorddf2.c: Likewise.
	* soft-fp/unordsf2.c: Likewise.
	* soft-fp/unordtf2.c: Likewise.

2013-10-15  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-2.h (_FP_DIV_MEAT_2_gmp): Remove macro.
	* soft-fp/soft-fp.h (FP_UNSET_EXCEPTION): Likewise.

2013-10-15   Ondřej Bílka  <neleai@seznam.cz>

	* elf/dl-libc.c: Clear initfini list after freeing.

2013-10-14  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/adddf3.c: Fix vertical whitespace and indentation.
	* soft-fp/addsf3.c: Likewise.
	* soft-fp/addtf3.c: Likewise.
	* soft-fp/divdf3.c: Likewise.
	* soft-fp/divsf3.c: Likewise.
	* soft-fp/divtf3.c: Likewise.
	* soft-fp/double.h: Likewise.
	* soft-fp/eqdf2.c: Likewise.
	* soft-fp/eqsf2.c: Likewise.
	* soft-fp/eqtf2.c: Likewise.
	* soft-fp/extenddftf2.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/extendsfdf2.c: Likewise.
	* soft-fp/extendsftf2.c: Likewise.
	* soft-fp/extendxftf2.c: Likewise.
	* soft-fp/fixdfdi.c: Likewise.
	* soft-fp/fixdfsi.c: Likewise.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfdi.c: Likewise.
	* soft-fp/fixsfsi.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfdi.c: Likewise.
	* soft-fp/fixtfsi.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfdi.c: Likewise.
	* soft-fp/fixunsdfsi.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfdi.c: Likewise.
	* soft-fp/fixunssfsi.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfdi.c: Likewise.
	* soft-fp/fixunstfsi.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floatdidf.c: Likewise.
	* soft-fp/floatdisf.c: Likewise.
	* soft-fp/floatditf.c: Likewise.
	* soft-fp/floatsidf.c: Likewise.
	* soft-fp/floatsisf.c: Likewise.
	* soft-fp/floatsitf.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatundidf.c: Likewise.
	* soft-fp/floatundisf.c: Likewise.
	* soft-fp/floatunsidf.c: Likewise.
	* soft-fp/floatunsisf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmasf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.
	* soft-fp/gedf2.c: Likewise.
	* soft-fp/gesf2.c: Likewise.
	* soft-fp/getf2.c: Likewise.
	* soft-fp/ledf2.c: Likewise.
	* soft-fp/lesf2.c: Likewise.
	* soft-fp/letf2.c: Likewise.
	* soft-fp/muldf3.c: Likewise.
	* soft-fp/mulsf3.c: Likewise.
	* soft-fp/multf3.c: Likewise.
	* soft-fp/negdf2.c: Likewise.
	* soft-fp/negsf2.c: Likewise.
	* soft-fp/negtf2.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* soft-fp/sqrtdf2.c: Likewise.
	* soft-fp/sqrtsf2.c: Likewise.
	* soft-fp/sqrttf2.c: Likewise.
	* soft-fp/subdf3.c: Likewise.
	* soft-fp/subsf3.c: Likewise.
	* soft-fp/subtf3.c: Likewise.
	* soft-fp/truncdfsf2.c: Likewise.
	* soft-fp/trunctfdf2.c: Likewise.
	* soft-fp/trunctfsf2.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.
	* soft-fp/unorddf2.c: Likewise.
	* soft-fp/unordsf2.c: Likewise.
	* soft-fp/unordtf2.c: Likewise.

2013-10-14   Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15672]
	* misc/error.c (error_tail): Fix possible buffer overflow.

2013-10-14  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #13028]
	* res_send.c(__libc_res_nsend): Correctly copy the nameserver
	address.

2013-10-14  P. J. McDermott  <pj@pehjota.net>

	[BZ #832]
	* elf/ldd.bash.in (try_trace): New function.  Delete previous code
	testing pipefail option.

2013-10-12  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/double.h: Indent preprocessor directives inside #if.
	* soft-fp/extended.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.

2013-10-12   Yuri Chornoivan <yurchor@ukr.net>

	* iconv/iconv_prog.c: Fix typos.
	* stdio-common/psiginfo-data.h: Likewise.

2013-10-12   Reuben Thomas <rrt@sc3d.org>

	[BZ #15764]
	* locale/setlocale.c: Fix typo.

2013-10-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16036]
	* soft-fp/unorddf2.c (__unorddf2): Raise "invalid" exception for
	signaling NaN arguments.
	* soft-fp/unordsf2.c (__unordsf2): Likewise.
	* soft-fp/unordtf2.c (__unordtf2): Likewise.

	[BZ #14910]
	* soft-fp/gedf2.c (__gedf2): Raise "invalid" exception for all
	unordered operands.
	* soft-fp/gesf2.c (__gesf2): Likewise.
	* soft-fp/getf2.c (__getf2): Likewise.
	* soft-fp/ledf2.c (__ledf2): Likewise.
	* soft-fp/lesf2.c (__lesf2): Likewise.
	* soft-fp/letf2.c (__letf2): Likewise.

	* soft-fp/eqdf2.c (__eqdf2): Use FP_INIT_EXCEPTIONS.
	* soft-fp/eqsf2.c (__eqsf2): Likewise.
	* soft-fp/eqtf2.c (__eqtf2): Likewise.
	* soft-fp/fixdfdi.c (__fixdfdi): Likewise.
	* soft-fp/fixdfsi.c (__fixdfsi): Likewise.
	* soft-fp/fixdfti.c (__fixdfti): Likewise.
	* soft-fp/fixsfdi.c (__fixsfdi): Likewise.
	* soft-fp/fixsfsi.c (__fixsfsi): Likewise.
	* soft-fp/fixsfti.c (__fixsfti): Likewise.
	* soft-fp/fixtfdi.c (__fixtfdi): Likewise.
	* soft-fp/fixtfsi.c (__fixtfsi): Likewise.
	* soft-fp/fixtfti.c (__fixtfti): Likewise.
	* soft-fp/fixunsdfdi.c (__fixunsdfdi): Likewise.
	* soft-fp/fixunsdfsi.c (__fixunsdfsi): Likewise.
	* soft-fp/fixunsdfti.c (__fixunsdfti): Likewise.
	* soft-fp/fixunssfdi.c (__fixunssfdi): Likewise.
	* soft-fp/fixunssfsi.c (__fixunssfsi): Likewise.
	* soft-fp/fixunssfti.c (__fixunssfti): Likewise.
	* soft-fp/fixunstfdi.c (__fixunstfdi): Likewise.
	* soft-fp/fixunstfsi.c (__fixunstfsi): Likewise.
	* soft-fp/fixunstfti.c (__fixunstfti): Likewise.
	* soft-fp/floatdidf.c (__floatdidf): Use FP_INIT_ROUNDMODE.
	* soft-fp/floatdisf.c (__floatdisf): Likewise.
	* soft-fp/floatsisf.c (__floatsisf): Likewise.
	* soft-fp/floattidf.c (__floattidf): Likewise.
	* soft-fp/floattisf.c (__floattisf): Likewise.
	* soft-fp/floattitf.c (__floattitf): Likewise.
	* soft-fp/floatundidf.c (__floatundidf): Likewise.
	* soft-fp/floatundisf.c (__floatundisf): Likewise.
	* soft-fp/floatunsisf.c (__floatunsisf): Likewise.
	* soft-fp/floatuntidf.c (__floatuntidf): Likewise.
	* soft-fp/floatuntisf.c (__floatuntisf): Likewise.
	* soft-fp/floatuntitf.c (__floatuntitf): Likewise.
	* soft-fp/gedf2.c (__gedf2): Use FP_INIT_EXCEPTIONS.
	* soft-fp/gesf2.c (__gesf2): Likewise.
	* soft-fp/getf2.c (__getf2): Likewise.
	* soft-fp/ledf2.c (__ledf2): Likewise.
	* soft-fp/lesf2.c (__lesf2): Likewise.
	* soft-fp/letf2.c (__letf2): Likewise.

	* soft-fp/soft-fp.h [FP_NO_EXCEPTIONS] (FP_SET_EXCEPTION):
	Undefine and redefine.
	[FP_NO_EXCEPTIONS] (FP_CUR_EXCEPTIONS): Likewise.
	[FP_NO_EXCEPTIONS] (FP_TRAPPING_EXCEPTIONS): Likewise.
	[FP_NO_EXCEPTIONS] (FP_ROUNDMODE): Likewise.
	* soft-fp/floatditf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatditf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatsidf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatsidf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatsitf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatsitf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunditf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunditf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunsidf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunsidf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunsitf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunsitf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.

	[BZ #16032]
	* soft-fp/op-2.h (_FP_DIV_MEAT_2_udiv): Shift numerator right
	without decrementing exponent if mantissa >= that for the
	denominator, not >.
	(_FP_DIV_MEAT_2_gmp): Test numerator mantissa >= that for the
	denominator, not >.  Decrement exponent in < case instead of
	incrementing in >= case.
	* soft-fp/op-4.h (_FP_DIV_MEAT_4_udiv): Shift numerator right
	without decrementing exponent if mantissa >= that for the
	denominator, not >.

	* soft-fp/op-common.h (_FP_TO_INT): Reverse test of sign for
	computing saturated result for unsigned overflow.

2013-10-11  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jeff Law  <law@redhat.com>

	* sysdeps/ieee754/dbl-64/e_atan2.c: Include stap-probe.h.
	(atan2Mp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/e_log.c: include stap-probe.h.
	(__ieee754_log): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/s_atan.c: Include stap-probe.h.
	(atanMp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/s_tan.c: Include stap-probe.h.
	(tanMp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/slowexp.c: Include stap-probe.h.
	(__slowexp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/slowpow.c: Include stap-probe.h.
	(__slowpow): Add systemtap probe marker.
	* manual/probes.texi: Document probes.

2013-10-11  Eric Biggers  <ebiggers3@gmail.com>

	[BZ #15362]
	* libio/fileops.c (_IO_new_file_write): Return count of bytes
	written.
	(_IO_new_file_xsputn): Don't return EOF if nothing has been
	written.
	* libio/iofwrite.c (_IO_fwrite): Return count if bytes were
	written to buffer but not flushed.
	* libio/iofwrite_u.c:  Likewise.
	* libio/iopadn.c:  Return bytes returned even if EOF was
	encountered.
	* libio/iowpadn.c:  Likewise.
	* stdio-common/vfprintf.c [COMPILE_WPRINTF] (PAD): Return error
	if _IO_padn does not write the whole buffer.
	[!COMPILE_WPRINTF] (PAD): Likewise.

2013-10-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/posix/dirstream.h (struct __dirstream): Fix alignment of
	directory block.

2013-10-10  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/extendxftf2.c: Use copyright year range.  Use URL
	instead of FSF address.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.

	* soft-fp/extendxftf2.c: New file.  Copied from libgcc.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.

2013-10-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-10-10  Joseph Myers  <joseph@codsourcery.com>

	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = math]
	(CFLAGS-e_hypotl.c): Add -fno-builtin-fabsl.
	[$(subdir) = math] (CFLAGS-w_acosl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_asinl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_atanhl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_j0l.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_j1l.c): Likewise.

	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Check
	for NaNs before doing comparisons on argument.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl):
	Likewise.

2013-10-10  Will Newton  <will.newton@linaro.org>

	* malloc/hooks.c (memalign_check): Ensure the value of bytes
	passed to _int_memalign does not overflow.

2013-10-10  Torvald Riegel  <triegel@redhat.com>

	* scripts/bench.pl: Add include-sources directive.
	* benchtests/README: Update documentation.

2013-10-10  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h (FP_INIT_EXCEPTIONS): New macro.
	* soft-fp/extenddftf2.c (__extenddftf2): Use FP_INIT_EXCEPTIONS
	instead of FP_INIT_ROUNDMODE.
	* soft-fp/extendsfdf2.c (__extendsfdf2): Likewise.
	* soft-fp/extendsftf2.c (__extendsftf2): Likewise.

	[BZ #16034]
	* soft-fp/op-common.h (_FP_NEG): Document input as raw.  Do not
	copy class of input value.
	* soft-fp/negdf2.c (__negdf2): Use raw unpacking and packing.  Do
	not handle exceptions.
	* soft-fp/negsf2.c (__negsf2): Likewise.
	* soft-fp/negtf2.c (__negtf2): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_neg.c (_Q_neg): Likewise.

2013-10-09  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-4.h (_FP_FRAC_DISASSEMBLE_4): Remove trailing
	semicolon.  From Linux kernel.

2013-10-09  Adam Buchbinder  <adam.buchbinder@gmail.com>

	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Fix typo in comment.

2013-10-08  Yogesh Chaudhari  <mr.yogesh@gmail.com>

	[BZ #156]
	* manual/socket.texi: Added statement about buffer
	for gethostbyname2_r.

2013-10-08  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S (ALIGN): Macro removed.
	Use .p2align directive instead, throughout.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/strchr.S: Likewise.
	* sysdeps/x86_64/strrchr.S: Likewise.

2013-10-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/e_pow.c: Fix code formatting.

	* sysdeps/ieee754/dbl-64/e_exp.c: Fix code formatting.

	* sysdeps/generic/math_private.h (__mpsin1): Remove
	declaration.
	(__mpcos1): Likewise.
	(__mpsin): New argument __range_reduce.
	(__mpcos): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	(slow): Use __mpsin and __mpcos.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (__mpsin): Add argument
	range_reduce.  Merge in __mpsin1.
	(__mpcos): Likewise.
	(__mpsin1): Remove.
	(__mpcos1): Likewise.

2013-10-07  Joseph Myers  <joseph@codesourcery.com>

	* locale/loadlocale.c (_nl_intern_locale_data): Use
	LOCFILE_ALIGNED_P.
	* locale/programs/3level.h (CONCAT(add_locale_,TABLE)): Use
	LOCFILE_ALIGN_UP and LOCFILE_ALIGN.
	* locale/programs/ld-collate.c (obstack_int32_grow): Assert that
	obstack data is appropriately aligned.
	(obstack_int32_grow_fast): Likewise.
	* locale/programs/ld-ctype.c (ctype_output): Use LOCFILE_ALIGN.
	* locale/programs/locfile.c (add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.

2013-10-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Remove ARGLIST and RET variables.
	($(objpfx)bench-%.c): Pass only function name to the script.
	* benchtests/README: Update documentation.
	* benchtests/acos-inputs: Add new directives.
	* benchtests/acosh-inputs: Likewise.
	* benchtests/asin-inputs: Likewise.
	* benchtests/asinh-inputs: Likewise.
	* benchtests/atan-inputs: Likewise.
	* benchtests/atanh-inputs: Likewise.
	* benchtests/cos-inputs: Likewise.
	* benchtests/cosh-inputs: Likewise.
	* benchtests/exp-inputs: Likewise.
	* benchtests/log-inputs: Likewise.
	* benchtests/pow-inputs: Likewise.
	* benchtests/rint-inputs: Likewise.
	* benchtests/sin-inputs: Likewise.
	* benchtests/sinh-inputs: Likewise.
	* benchtests/tan-inputs: Likewise.
	* benchtests/tanh-inputs: Likewise.
	* scripts/bench.pl: Add support for new directives.

2013-10-07  Alan Modra  <amodra@gmail.com>

	* README: Fix careless merge.

2013-10-05  Alan Modra  <amodra@gmail.com>

	* NEWS: Mention powerpc64le support and bugs fixed.
	* README: Both big-endian and little-endian powerpc64 supported.

2013-10-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/fork.c (_hurd_atfork_prepare_hook)
	(_hurd_atfork_child_hook, _hurd_atfork_parent_hook): New hooks.
	(__fork): Call _hurd_atfork_prepare_hook hooks before all locking, call
	_hurd_atfork_parent_hook or _hurd_atfork_child_hook after all unlocking.

2013-10-04  Ryan S. Arnold  <ryan.arnold@linaro.org>

	* misc/swapon.c (swapon): Update definition, adding FLAGS parameter to
	match prototype.

2013-10-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/Makefile [$(with-fp) = yes] (+cflags):
	Move -mhard-float appending from
	ports/sysdeps/powerpc/powerpc32/Makefile.
	[$(with-fp) = yes] (ASFLAGS): Likewise.
	[$(with-fp) = yes] (sysdep-LDFLAGS): Likewise.
	* sysdeps/powerpc/nofpu: Move directory from
	ports/sysdeps/powerpc/nofpu.
	* sysdeps/powerpc/soft-fp: Move directory from
	ports/sysdeps/powerpc/soft-fp.
	* sysdeps/powerpc/powerpc32/405: Move directory from
	ports/sysdeps/powerpc/powerpc32/405.
	* sysdeps/powerpc/powerpc32/440: Move directory from
	ports/sysdeps/powerpc/powerpc32/440.
	* sysdeps/powerpc/powerpc32/464: Move directory from
	ports/sysdeps/powerpc/powerpc32/464.
	* sysdeps/powerpc/powerpc32/476: Move directory from
	ports/sysdeps/powerpc/powerpc32/476.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/405: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/405.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/440: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/440.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/464: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/464.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/476: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/476.
	* README: Update for powerpc-*-linux-gnu software floating point
	support in libc.

	* sysdeps/unix/sysv/linux/configure.in (powerpc/powerpc32): Change
	case to powerpc/powerpc32*.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* sysdeps/powerpc/fpu_control.h [__NO_FPRS__ && !_SOFT_FLOAT]
	(_FPU_MASK_OM): Define as 0x04.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_UM): Define as 0x08.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RESERVED): Define as
	0x00c10080.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_DEFAULT): Define as
	0x0000003c.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_IEEE): Define as _FPU_DEFAULT.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use
	getcontext_e500.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use
	setcontext_e500.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use getcontext_e500
	and setcontext_e500.

2013-10-04  Chris Leonard  <cjl@sugarlabs,.org>

	* locale/iso-3166.def: Update iso-1366.def and related occurrences

2013-10-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/threads.texi (Default Thread Attributes): Fix typo.

2013-10-04  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-memalign.
	* malloc/tst-memalign.c: New file.

	* malloc/tst-posix_memalign.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Add space after cast.

	* malloc/tst-pvalloc.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Remove duplicate check for NULL pointer.
	Add space after cast.

	* malloc/tst-valloc.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Remove duplicate check for NULL pointer.
	Add space after cast.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Use stdint types in rather than __attribute__((mode())).
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Correct handling of unaligned relocs for little-endian.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* configure.in: Map powerpc64le and powerpcle to base_machine/machine.
	* configure: Regenerate.
	* nptl/shlib-versions: Powerpc*le starts at 2.18.
	* shlib-versions: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* string/tester.c (test_memrchr): Increment reported test cycle.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* string/test-memcpy.c (do_one_test): When reporting errors, print
	string address and don't overrun end of string.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Replace rlwimi with
	insrdi.  Make better use of reg selection to speed exit slightly.
	Schedule entry path a little better.  Remove useless "are we done"
	checks on entry to main loop.  Handle wrapping around zero address.
	Correct main loop count.  Handle single left-over word from main
	loop inline rather than by using loop_small.  Remove extra word
	case in loop_small caused by wrong loop count.  Add little-endian
	support.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.  Use proper
	cache hint.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Add little-endian
	support.  Avoid rlwimi.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/memset.S: Replace rlwimi with
	insrdi.  Formatting.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memset.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/memcpy.S: Add little endian support.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Likewise.  Make better
	use of regs.  Use power7 mtocrf.  Tidy function tails.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Add little-endian support.
	Formatting.  Consistently use rXXX register defines or rN defines.
	Use early exit labels that avoid restoring unused non-volatile regs.
	Make cr field use more consistent with rWORDn compares.  Rename
	regs used as shift registers for unaligned loop, using rN defines
	for short lifetime/multiple use regs.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.  Exit with
	addi 1,1,64 to pop stack frame.  Simplify return value code.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strchr.S (strchr): Add little-endian
	support.  Correct typos, formatting.  Optimize tail.  Use insrdi
	rather than rlwimi.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S (__strchrnul): Add
	little-endian support.  Correct typos.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: Likewise.  Use insrdi
	rather than rlwimi.
	* sysdeps/powerpc/powerpc64/strchr.S (rTMP4, rTMP5): Define.  Use
	in loop and entry code to keep "and." results.
	(strchr): Add little-endian support.  Comment.  Move cntlzd
	earlier in tail.
	* sysdeps/powerpc/powerpc32/strchr.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/strcpy.S: Add little-endian support:
	* sysdeps/powerpc/powerpc32/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/stpcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/stpcpy.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/strcmp.S (rTMP2): Define as r0.
	(rTMP): Define as r11.
	(strcmp): Add little-endian support.  Optimise tail.
	* sysdeps/powerpc/powerpc32/strcmp.S: Similarly.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strnlen.S (strnlen): Add
	little-endian support.  Remove unnecessary "are we done" tests.
	Handle "s" wrapping around zero and extremely large "size".
	Correct main loop count.  Handle single left-over word from main
	loop inline rather than by using small_loop.  Correct comments.
	Delete "zero" tail, use "end_max" instead.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strlen.S (strlen): Add little-endian
	support.  Don't branch over align.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S (strlen): Add little-endian
	support.  Rearrange tmp reg use to suit.  Comment.
	* sysdeps/powerpc/powerpc32/strlen.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/sigstack.h: New file.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/makecontext.S: Use
	conditional form of branch and link when obtaining pc.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Use
	HIWORD/LOWORD.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Ditto.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Ditto.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/longjmp.c: Use proper symbol versioning macros.
	* sysdeps/powerpc/novmx-longjmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/mcount.c: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: Likewise.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>
	    Alistair Popple <alistair@ozlabs.au.ibm.com>
	    Alan Modra <amodra@gmail.com>

	[BZ #15723]
	* sysdeps/powerpc/jmpbuf-offsets.h: Comment fix.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Correct
	_dl_hwcap access for little-endian.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Likewise.  Don't
	destroy vmx regs when saving unaligned.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Correct CR load.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise CR save.  Don't
	destroy vmx regs when saving unaligned.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/hp-timing.h (HP_TIMING_NOW):
	Don't use a union to pack hi/low value.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/s_ceilf.S: Correct float constants
	for little-endian.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S: Increase alignment of
	constants to usual value for .cst8 section, and remove redundant
	high address load.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llround.S: Use float
	constant for 0x1p52.  Load little-endian words of double from
	correct stack offsets.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/sysdep.h (LOWORD, HIWORD, HISHORT): Define.
	* sysdeps/powerpc/powerpc32/fpu/s_copysign.S: Load little-endian
	words of double from correct stack offsets.
	* sysdeps/powerpc/powerpc32/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Use HISHORT.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isinf.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu_control.h (_FPU_GETCW): Rewrite using
	64-bit int/double union.
	(_FPU_SETCW): Likewise.
	* sysdeps/powerpc/fpu/tst-setcontext-fpscr.c (_GET_DI_FPSCR): Likewise.
	(_SET_DI_FPSCR, _GET_SI_FPSCR, _SET_SI_FPSCR): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu/s_llround.c (__llround): Rewrite.
	* sysdeps/powerpc/fpu/s_llroundf.c (__llroundf): Rewrite.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu/s_float_bitwise.h (__float_and_test28): Don't
	use vector int constants.
	(__float_and_test24, __float_and8, __float_get_exp): Likewise.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/fpu/fenv_libc.h (fenv_union_t): Replace int
	array with long long.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Adjust.
	* sysdeps/powerpc/fpu/e_sqrtf.c (__slow_ieee754_sqrtf): Adjust.
	* sysdeps/powerpc/fpu/fclrexcpt.c (__feclearexcept): Adjust.
	* sysdeps/powerpc/fpu/fedisblxcpt.c (fedisableexcept): Adjust.
	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Adjust.
	* sysdeps/powerpc/fpu/fegetexcept.c (__fegetexcept): Adjust.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Adjust.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Adjust.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Adjust.
	* sysdeps/powerpc/fpu/fgetexcptflg.c (__fegetexceptflag): Adjust.
	* sysdeps/powerpc/fpu/fraiseexcpt.c (__feraiseexcept): Adjust.
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Adjust.
	* sysdeps/powerpc/fpu/ftestexcept.c (fetestexcept): Adjust.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/bits/mathinline.h (__signbitf): Use builtin.
	(__signbit): Likewise.  Correct for little-endian.
	(__signbitl): Call __signbit.
	(lrint): Correct for little-endian.
	(lrintf): Call lrint.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (mynumber): Replace
	union 32-bit int array member with 64-bit int array.
	(t515, tm256): Double rather than long double.
	(__ieee754_sqrtl): Rewrite using 64-bit arithmetic.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/ieee754.h (union ieee854_long_double):
	Delete.
	(IEEE854_LONG_DOUBLE_BIAS): Delete.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Don't include ieee854
	version of math_ldbl.h.

2013-10-04  Alan Modra  <amodra@gmail.com>

	[BZ #15734], [BZ #15735]
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Rewrite
	all uses of ieee875 long double macros and unions.  Simplify test
	for 0.0L.  Correct |x|<|y| and |x|=|y| test.  Use
	ldbl_extract_mantissa value for ix,iy exponents.  Properly
	normalize after ldbl_extract_mantissa, and don't add hidden bit
	already handled.  Don't treat low word of ieee854 mantissa like
	low word of IBM long double and mask off bit when testing for
	zero.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl): Rewrite
	all uses of ieee875 long double macros and unions.  Simplify tests
	for 0.0L and inf.  Correct double adjustment of k.  Delete dead code
	adjusting ha,hb.  Simplify code setting kld.  Delete two600 and
	two1022, instead use their values.  Recognise that tests for large
	"a" and small "b" are mutually exclusive.  Rename vars.  Comment.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c (__ieee754_remainderl):
	Rewrite all uses of ieee875 long double macros and unions.  Simplify
	test for 0.0L and nan.  Correct negation.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfl): Rewrite all uses of
	ieee875 long double macros and unions.  Correct output for large
	magnitude x.  Correct absolute value calculation.
	(__erfcl): Likewise.
	* math/libm-test.inc: Add tests for errors discovered in IBM long
	double versions of fmodl, remainderl, erfl and erfcl.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c (__ieee754_atan2l): Rewrite
	all uses of ieee854 long double macros and unions.  Simplify tests
	for long doubles that are fully specified by the high double.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c (__ieee754_ilogbl): Likewise.
	Remove dead code too.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Likewise.
	(__ieee754_ynl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Likewise.
	Remove dead code too.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c (__kernel_tanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (__expm1l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c (__isinf_nsl): Likewise.
	Simplify.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c (___isinfl): Likewise.
	Simplify.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c (__modfl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl): Likewise.
	Comment on variable precision.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c (__tanhl): Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust tan_towardzero ulps.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_high): Define.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (__ieee754_acoshl): Rewrite
	all uses of ieee854 long double macros and unions.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (__ieee754_rem_pio2l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c (__kernel_cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Likewise.
	Simplify sign and nan test too.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c (__cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c (__fabsl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c (___finitel): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c (___fpclassifyl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c (___isnanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_issignalingl.c (__issignalingl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c (___signbitl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c (__sincosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c (__sinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c (__tanl): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c (__logbl): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* stdio-common/printf_size.c (__printf_size): Don't use
	union ieee854_long_double in fpnum union.
	* stdio-common/printf_fphex.c (__printf_fphex): Likewise.  Use
	signbit macro to retrieve sign from long double.
	* stdio-common/printf_fp.c (___printf_fp): Use signbit macro to
	retrieve sign from long double.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Adjust for fpnum change.
	* sysdeps/ieee754/ldbl-128/printf_fphex.c: Likewise.
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Likewise.
	* sysdeps/x86_64/fpu/printf_fphex.c: Likewise.
	* math/test-misc.c (main): Don't use union ieee854_long_double.

2013-10-04  Alan Modra  <amodra@gmail.com>

	[BZ #15680]
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c: Comment fix.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c
	(PRINT_FPHEX_LONG_DOUBLE): Tidy code by moving -53 into ediff
	calculation.  Remove unnecessary test for denormal exponent.
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c (__mpn_extract_long_double):
	Correct handling of denormals.  Avoid undefined shift behaviour.
	Correct normalisation of low mantissa when low double is denormal.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h
	(ldbl_extract_mantissa): Likewise.  Comment.  Use uint64_t* for hi64.
	(ldbl_insert_mantissa): Make both hi64 and lo64 parms uint64_t.
	Correct normalisation of low mantissa.  Test for overflow of high
	mantissa and normalise.
	(ldbl_nearbyint): Use more readable constant for two52.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c
	(__mpn_construct_long_double): Fix test for overflow of high
	mantissa and correct normalisation.  Avoid undefined shift.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/ieee754.h
	(union ibm_extended_long_double): Define as an array of ieee754_double.
	(IBM_EXTENDED_LONG_DOUBLE_BIAS): Delete.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Update all references
	to ibm_extended_long_double and IBM_EXTENDED_LONG_DOUBLE_BIAS.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Likewise.

2013-10-03  Joseph Myers  <joseph@codesourcery.com>

	* locale/programs/locarchive.c (add_locale): Use constant 4096 for
	page size instead of calling getpagesize.

	* locale/localeinfo.h (LOCFILE_ALIGN): New macro.
	(LOCFILE_ALIGN_MASK): Likewise.
	(LOCFILE_ALIGN_UP): Likewise.
	(LOCFILE_ALIGNED_P): Likewise.
	* locale/programs/ld-collate.c (collate_output): Use the new
	macros instead of __alignof__ (int32_t).
	* locale/weight.h (findidx): Likewise.

2013-10-03  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #431]
	* manual/string.texi: Fix strncat and wcsncat.

2013-10-03  Brooks Moses  <bmoses@google.com>

	[BZ #15915]
	* Makefile (linkobj/libc_pic.a, linkobj/libc.so): Move rules to...
	* Makerules: ...here, and adjust associated comments.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-pvalloc.
	* malloc/tst-pvalloc.c: New file.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/tst-valloc.c: Rewrite to use test-skeleton.c and
	improve test coverage.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-posix_memalign.
	* malloc/tst-posix_memalign.c: New file.

2013-10-01  Eric Blake  <eblake@redhat.com>

	* posix/glob.c (next_brace_sub, prefix_array, collated_compare):
	Use __THROWNL rather than __THROW on static functions.

2013-09-30  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (R_AARCH64_ABS16): New macro.
	(R_AARCH64_PREL64, R_AARCH64_PREL32): Likewise.
	(R_AARCH64_PREL16, R_AARCH64_MOVW_UABS_G0): Likewise.
	(R_AARCH64_MOVW_UABS_G0_NC, R_AARCH64_MOVW_UABS_G1): Likewise.
	(R_AARCH64_MOVW_UABS_G1_NC, R_AARCH64_MOVW_UABS_G2): Likewise.
	(R_AARCH64_MOVW_UABS_G2_NC, R_AARCH64_MOVW_UABS_G3): Likewise.
	(R_AARCH64_MOVW_SABS_G0, R_AARCH64_MOVW_SABS_G1): Likewise.
	(R_AARCH64_MOVW_SABS_G2, R_AARCH64_LD_PREL_LO19): Likewise.
	(R_AARCH64_ADR_PREL_LO21, R_AARCH64_ADR_PREL_PG_HI21): Likewise.
	(R_AARCH64_ADR_PREL_PG_HI21_NC, R_AARCH64_ADD_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST8_ABS_LO12_NC, R_AARCH64_LDST16_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST32_ABS_LO12_NC, R_AARCH64_LDST64_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST128_ABS_LO12_NC, R_AARCH64_TSTBR14): Likewise.
	(R_AARCH64_CONDBR19, R_AARCH64_JUMP26, R_AARCH64_CALL26): Likewise.
	(R_AARCH64_MOVW_PREL_G0, R_AARCH64_MOVW_PREL_G0_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G1, R_AARCH64_MOVW_PREL_G1_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G2, R_AARCH64_MOVW_PREL_G2_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G3, R_AARCH64_MOVW_GOTOFF_G0): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G0_NC, R_AARCH64_MOVW_GOTOFF_G1): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G1_NC, R_AARCH64_MOVW_GOTOFF_G2): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G2_NC, R_AARCH64_MOVW_GOTOFF_G3): Likewise.
	(R_AARCH64_GOTREL64, R_AARCH64_GOTREL32): Likewise.
	(R_AARCH64_GOT_LD_PREL19, R_AARCH64_LD64_GOTOFF_LO15): Likewise.
	(R_AARCH64_ADR_GOT_PAGE, R_AARCH64_LD64_GOT_LO12_NC): Likewise.
	(R_AARCH64_LD64_GOTPAGE_LO15, R_AARCH64_TLSGD_ADR_PREL21): Likewise.
	(R_AARCH64_TLSGD_ADR_PAGE21, R_AARCH64_TLSGD_ADD_LO12_NC): Likewise.
	(R_AARCH64_TLSGD_MOVW_G1, R_AARCH64_TLSGD_MOVW_G0_NC): Likewise.
	(R_AARCH64_TLSLD_ADR_PREL21, R_AARCH64_TLSLD_ADR_PAGE21): Likewise.
	(R_AARCH64_TLSLD_ADD_LO12_NC, R_AARCH64_TLSLD_MOVW_G1): Likewise.
	(R_AARCH64_TLSLD_MOVW_G0_NC, R_AARCH64_TLSLD_LD_PREL19): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G2): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G1): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G1_NC): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G0): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G0_NC): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_HI12): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST8_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST8_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST16_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST16_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST32_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST32_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST64_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST64_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST128_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST128_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSIE_MOVW_GOTTPREL_G1): Likewise.
	(R_AARCH64_TLSIE_MOVW_GOTTPREL_G0_NC): Likewise.
	(R_AARCH64_TLSIE_ADR_GOTTPREL_PAGE21): Likewise.
	(R_AARCH64_TLSIE_LD64_GOTTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSIE_LD_GOTTPREL_PREL19): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G2): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G1): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G1_NC): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G0): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G0_NC): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_HI12): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST8_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST8_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST16_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST16_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST32_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST32_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST64_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST64_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST128_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST128_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSDESC_LD_PREL19): Likewise.
	(R_AARCH64_TLSDESC_ADR_PREL21): Likewise.
	(R_AARCH64_TLSDESC_ADR_PAGE21): Likewise.
	(R_AARCH64_TLSDESC_LD64_LO12): Likewise.
	(R_AARCH64_TLSDESC_ADD_LO12): Likewise.
	(R_AARCH64_TLSDESC_OFF_G1): Likewise.
	(R_AARCH64_TLSDESC_OFF_G0_NC): Likewise.
	(R_AARCH64_TLSDESC_LDR): Likewise.
	(R_AARCH64_TLSDESC_ADD): Likewise.
	(R_AARCH64_TLSDESC_CALL): Likewise.

2013-09-30  Andreas Schwab  <schwab@suse.de>

	[BZ #15048]
	* nscd/aicache.c (addhstaiX): Properly use the cache variable for
	the nss database lookup.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2013-09-28  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c (do_test): Fix style.

2013-09-28  P. J. McDermott  <pj@pehjota.net>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Don't use
	${Bash-specific parameter/pattern/string} parameter expansion.
	* sysdeps/unix/make-syscalls.sh: Likewise.

2013-09-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/stackguard-macros.h: New file.

2013-09-26  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Update.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Remove strrchr ifunc.
	* sysdeps/x86_64/multiarch/strend-sse4.S Remove.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/strrchr.S (strrchr): Use optimized implementation.

2013-09-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/stackguard-macros.h (POINTER_CHK_GUARD:
	Fix thread ID register.

2013-09-25  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sched.h-data [XPG3 || XPG4]: Disable whole file.
	[POSIX || UNIX98]: Require rather than permitting all symbols from
	<time.h>.
	[POSIX || UNIX98] (sched_ss_low_priority): Do not specify optional
	element of struct sched_param.
	[POSIX || UNIX98] (sched_ss_repl_period): Likewise.
	[POSIX || UNIX98] (sched_ss_init_budget): Likewise.
	[POSIX || UNIX98] (sched_ss_max_repl): Likewise.
	[POSIX || UNIX98] (SCHED_SPORADIC): Do not specify optional
	constant.

2013-09-24  Olivier Langlois  <olivier@olivierlanglois.net>

	* stdio-common/tst-long-dbl-fphex.c (do_test): Fix swprintf length
	argument calculation.

2013-09-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pthread.h-data [POSIX] (PTHREAD_MUTEX_INITIALIZER):
	Expect macro.
	[POSIX] (pthread_attr_t): Do not require type.
	[POSIX] (pthread_cond_t): Likewise.
	[POSIX] (pthread_condattr_t): Likewise.
	[POSIX] (pthread_key_t): Likewise.
	[POSIX] (pthread_mutex_t): Likewise.
	[POSIX] (pthread_mutexattr_t): Likewise.
	[POSIX] (pthread_once_t): Likewise.
	[POSIX] (pthread_t): Likewise.
	[POSIX-based standards] (pthread_atfork): Expect function.

2013-09-24  Joseph Myers  <joseph@codesourcery.com>
	    Richard Sandiford  <richard@codesourcery.com>

	* locale/programs/locfile.h: Include <byteswap.h> and <stdbool.h>.
	(swap_endianness_p): New extern variable.
	(set_big_endian): New inline function.
	(maybe_swap_uint32): Likewise.
	(maybe_swap_uint32_array): Likewise.
	(maybe_swap_uint32_obstack): Likewise.
	* locale/programs/locfile.c: Include <stdbool.h>.
	(swap_endianness_p): New variable.
	(add_locale_uint32): Call maybe_swap_uint32.
	(add_locale_uint32_array): Call maybe_swap_uint32_obstack.
	(write_locale_data): Call maybe_swap_uint32_array.
	* locale/programs/ld-collate.c (obstack_int32_grow): Call
	maybe_swap_uint32.
	(obstack_int32_grow_fast): Likewise.
	(output_weightwc): Call maybe_swap_uint32_obstack.
	(collate_output): Likewise.
	* locale/programs/localedef.c (OPT_LITTLE_ENDIAN): New macro.
	(OPT_LITTLE_ENDIAN): Likewise.
	(options): Add --little-endian and --big-endian options.
	(parse_opt): Handle OPT_LITTLE_ENDIAN and OPT_BIG_ENDIAN.
	* locale/programs/locarchive.c: Include "locfile.h".
	(GET): New macro.
	(SET): Likewise.
	(INC): Likewise.
	(create_archive): Use the new macros to access fields of
	structures directly mapped from or written to locale archives.
	(oldlocrecentcmp): Likewise.
	(enlarge_archive): Likewise.
	(insert_name): Likewise.
	(add_alias): Likewise.
	(add_locale): Likewise.
	(delete_locales_from_archive): Likewise.
	(show_archive_content): Likewise.
	(add_locale_to_archive): Likewise.  Use maybe_swap_uint32 on
	locale data.

2013-09-24  Roland McGrath  <roland@hack.frob.com>

	* manual/freemanuals.texi: Updated from (newly) canonical copy at
	http://www.gnu.org/doc/freemanuals.texi.
	* manual/libc.texinfo (Free Manuals): Put the @appendix line here.

2013-09-24  Will Newton  <will.newton@linaro.org>

	* sysdeps/mach/hurd/i386/tls.h (TLS_INIT_TP_EXPENSIVE): Remove
	macro.

2013-09-23  Joseph Myers  <joseph@codesourcery.com>

	* locale/hashval.h (compute_hashval): Interpret bytes of key as
	unsigned char.

2013-09-23  Maciej W. Rozycki  <macro@codesourcery.com>

	* manual/threads.texi (POSIX Threads): Fix a typo.

2013-09-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14547]
	* string/tst-strcoll-overflow.c: New test case.
	* string/Makefile (xtests): Add tst-strcoll-overflow.
	* string/strcoll_l.c (STRCOLL): Skip allocating memory for
	cache if string sizes may cause integer overflow.

	[BZ #14547]
	* string/strcoll_l.c (coll_seq): New members rule, idx,
	save_idx and back_us.
	(get_next_seq_nocache): New function.
	(do_compare_nocache): New function.
	(STRCOLL): Use get_next_seq_nocache and do_compare_nocache
	when malloc fails.

2013-09-23  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15754]
	* sysdeps/generic/stackguard-macros.h: If PTRGUARD_LOCAL use
	__pointer_chk_guard_local, otherwise __pointer_chk_guard.
	* elf/Makefile: Define CFLAGS-tst-ptrguard1-static.c.

	[BZ #15754]
	* elf/Makefile (tests): Add tst-ptrguard1.
	(tests-static): Add tst-ptrguard1-static.
	(tst-ptrguard1-ARGS): Define.
	(tst-ptrguard1-static-ARGS): Define.
	* elf/tst-ptrguard1.c: New file.
	* elf/tst-ptrguard1-static.c: New file.
	* sysdeps/x86_64/stackguard-macros.h: Define POINTER_CHK_GUARD.
	* sysdeps/i386/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc32/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc32/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc64/stackguard-macros.h: Likewise.

2013-09-23  Hector Marco  <hecmargi@upv.es>
	    Ismael Ripoll  <iripoll@disca.upv.es>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #15754]
	* sysdeps/generic/stackguard-macros.h: Define
	__pointer_chk_guard_local and POINTER_CHK_GUARD.
	* csu/libc-start.c [!SHARED && !THREAD_SET_POINTER_GUARD]:
	Define __pointer_chk_guard_local.
	(LIBC_START_MAIN) [!SHARED]: Call _dl_setup_pointer_guard.
	Use THREAD_SET_POINTER_GUARD or set __pointer_chk_guard_local.

2013-09-15  Vinitha Vijayan <vinitha.vijayann@gmail.com>

	[BZ #15859]
	* elf/dl-deps.c (_dl_map_object_deps): Remove duplicate declaration.

2013-09-20  Andreas Schwab  <schwab@linux-m68k.org>

	* include/string.h (__ffs): Declare as hidden.
	* string/ffs.c (__ffs): Define as hidden.
	* sysdeps/i386/ffs.c (__ffs): Likewise.
	* sysdeps/i386/i686/ffs.c (__ffs): Likewise.
	* sysdeps/powerpc/ffs.c (__ffs): Likewise.
	* sysdeps/s390/ffs.c (__ffs): Likewise.
	* sysdeps/x86_64/ffs.c (__ffs): Likewise.

2013-09-20  Alexandre Oliva <aoliva@redhat.com>

	* NEWS: Mention malloc probes.

	* malloc/arena.c (new_heap): New memory_heap_new probe.
	(grow_heap): New memory_heap_more probe.
	(shrink_heap): New memory_heap_less probe.
	(heap_trim): New memory_heap_free probe.
	* malloc/malloc.c (sysmalloc): New memory_sbrk_more probe.
	(systrim): New memory_sbrk_less probe.
	* manual/probes.texi: Document them.

	* malloc/arena.c (arena_get_retry): Add memory_arena_retry probe.
	* manual/probes.texi: Document it.

	* malloc/malloc.c (__libc_malloc): Add memory_malloc_retry probe.
	(__libc_realloc): Add memory_realloc_retry probe.
	(__libc_memalign): Add memory_memalign_retry probe.
	(__libc_valloc): Add memory_valloc_retry probe.
	(__libc_pvalloc): Add memory_pvalloc_retry probe.
	(__libc_calloc): Add memory_calloc_retry probe.
	* manual/probes.texi: Document them.

	* malloc/arena.c (get_free_list): Add probe
	memory_arena_reuse_free_list.
	(reused_arena) [PER_THREAD]: Add probes memory_arena_reuse_wait
	and memory_arena_reuse.
	(arena_get2) [!PER_THREAD]: Likewise.
	* malloc/malloc.c (__libc_realloc) [!PER_THREAD]: Add probe
	memory_arena_reuse_realloc.
	* manual/probes.texi: Document them.

	* malloc/malloc.c (__libc_free): Add
	memory_mallopt_free_dyn_thresholds probe.
	(__libc_mallopt): Add multiple memory_mallopt probes.
	* manual/probes.texi: Document them.

	* malloc/malloc.c: Include stap-probe.h.
	(__libc_mallopt): Add memory_mallopt probe.
	* malloc/arena.c (_int_new_arena): Add memory_arena_new probe.
	* manual/probes.texi: New.
	* manual/Makefile (chapters): Add probes.
	* manual/threads.texi: Set next node.

2013-09-19  Wei-Lun Chao  <bluebat@member.fsf.org>

	[BZ #15963, #13985]
	* locale/iso-639.def: Add Chiga (cgg) and Chinese (gan, hak,
	czh, cjy, lzh, cmn, mnp, cdo, czo, cpx, wuu, hsn, yue).
	Add `Chinese' to `nan' entry name.

2013-09-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (POLYNOMIAL2): New macro.
	(POLYNOMIAL): Likewise.
	(TAYLOR_SINCOS): Likewise.
	(TAYLOR_SLOW): Likewise.
	(__sin): Use TAYLOR_SINCOS.
	(__cos): Likewise.
	(slow): Use TAYLOR_SLOW.
	(sloww): Likewise.
	(bsloww): Likewise.
	(csloww): Likewise.

2013-09-19  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* stdlib/strtod_l.c: Fix buffer overrun.

2013-09-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add sincos.
	* benchtests/bench-sincos.c: New file.

	* math/libm-test.inc (cos_test_data): New test inputs.
	(sin_test_data): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (SINCOS_TABLE_LOOKUP): New
	macro.
	(__sin): Use it.
	(__cos): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): New
	function.
	(__sin): Use it.
	(__cos): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Remove redundant
	gotos.
	(__cos): Likewise.

2013-09-18  Maciej W. Rozycki  <macro@codesourcery.com>

	* config.h.in (HAVE_MIPS_NAN2008): New macro.
	* elf/elf.h (EF_MIPS_NAN2008): Likewise.
	* sysdeps/generic/ldconfig.h (FLAG_MIPS_LIB32_NAN2008): Likewise.
	(FLAG_MIPS64_LIBN32_NAN2008): Likewise.
	(FLAG_MIPS64_LIBN64_NAN2008): Likewise.
	* elf/cache.c (print_entry): Handle the new cache flags.

2013-09-18  Joseph Myers  <joseph@codesourcery.com>
	    Aldy Hernandez  <aldyh@redhat.com>

	* sysdeps/powerpc/fpu_control.h [_SOFT_FLOAT || __NO_FPRS__]:
	Change condition to [_SOFT_FLOAT].
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_NEAREST): New macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_DOWN): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_UP): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_ZERO): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_ZM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_OM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_UM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_XM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_IM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RESERVED): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_DEFAULT): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_IEEE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (fpu_control_t): New typedef.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_GETCW): New macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_SETCW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (__fpu_control): New variable
	declaration.

2013-09-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/__longjmp-common.S (LOAD_GP): Define
	macro conditional on [__SPE__ || (__NO_FPRS__ && !_SOFT_FLOAT)].
	(__longjmp): Use LOAD_GP to load saved GPRs.
	* sysdeps/powerpc/powerpc32/setjmp-common.S (SAVE_GP): Define
	macro conditional on [__SPE__ || (__NO_FPRS__ && !_SOFT_FLOAT)].
	(__sigsetjmp): Use SAVE_GP to save GPRs.

	* sysdeps/powerpc/powerpc32/Makefile [$(with-fp) = no] (+cflags):
	Do not append -msoft-float.
	[$(with-fp) = no] (sysdep-LDFLAGS): Likewise.

2013-09-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/sincos32.c: Fix code formatting.

2013-09-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15966]
	* sysdeps/powerpc/fpu_control.h [!_SOFT_FLOAT && !__NO_FPRS__]
	(_FPU_GETCW): Use initial "__" on variable and field names but not
	on macro parameter name.
	[!_SOFT_FLOAT && !__NO_FPRS__] (_FPU_SETCW): Likewise.  Use
	parentheses around reference to macro parameter.

2013-09-13  Richard Sandiford  <richard@codesourcery.com>

	* locale/programs/ld-ctype.c (find_idx): Use uint32_t in
	prototype.
	(ctype_startup): Use uint32_t in cast and sizeof for
	ctype->charnames.

2013-09-11  Jia Liu  <proljc@gmail.com>

	* sunrpc/rpc/types.h [__APPLE_CC__]: Define __u_char_defined and
	__daddr_t_defined.
	[__FreeBSD__]: Likewise.

2013-09-11  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove: __strchr_sse42.
	* sysdeps/x86_64/multiarch/strchr.S (__strchr_sse42): Remove.
	(strchr): Remove __strchr_sse42 ifunc selection.
	* sysdeps/x86_64/strchr.S (strchr): Use optimized implementation.
	* sysdeps/x86_64/strchrnul.S: Include sysdeps/x86_64/strchr.S.

2013-09-11  Will Newton  <will.newton@linaro.org>

	* benchtests/bench-timing.h (TIMING_INIT): Rename ITERS
	parameter to RES. Remove hardcoded 1000 value.
	* benchtests/bench-skeleton.c (main): Pass RES parameter
	to TIMING_INIT and multiply result by 1000.

2013-09-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-09-11  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (__O_TMPFILE): Define
	if not defined.
	(O_TMPFILE) [__USE_GNU]: Define.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (__O_TMPFILE):
	Define.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15857]
	* malloc/malloc.c (__libc_memalign): Check the value of bytes
	does not overflow.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15856]
	* malloc/malloc.c (__libc_valloc): Check the value of bytes
	does not overflow.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15855]
	* malloc/malloc.c (__libc_pvalloc): Check the value of bytes
	does not overflow.

2013-09-10  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/ieee754/dbl-64/e_j0.c: Remove DO_NOT_USE_THIS conditionals.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.

2013-09-10  Allan McRae  <allan@archlinux.org>

	[BZ #15748]
	* manual/arith.texi (Parsing of Floats): Clarify
	cross-reference.

	[BZ #15849]
	* manual/install.texi (Running make install): Mention
	--enable-pt-chown.
	* INSTALL: Regenerated.

2013-09-09  Maciej W. Rozycki  <macro@codesourcery.com>

	* csu/init-first.c (_init): Remove the !SHARED condition around
	FPU control word initialization.
	* elf/dl-support.c (_dl_fpu_control): New variable.
	(_dl_aux_init) <AT_FPUCW>: Initialize it.
	* math/test-fpucw.c [!FPU_CONTROL] (FPU_CONTROL): New macro.
	(main): Replace _FPU_DEFAULT with FPU_CONTROL throughout.
	* math/test-fpucw-static.c: New file.
	* math/test-fpucw-ieee.c: New file.
	* math/test-fpucw-ieee-static.c: New file.
	* math/Makefile (tests): Add `test-fpucw-ieee' and
	`$(tests-static)'.
	(tests-static): New variable.
	[($(build-shared),yes)] ($(addprefix $(objpfx),$(tests))): Move
	dependency to...
	[($(build-shared),yes)]
	($(addprefix $(objpfx),$(filter-out $(tests-static),$(tests)))):
	... this.
	[($(build-shared),yes)] ($(addprefix $(objpfx),$(tests-static))):
	New dependency.

2013-09-09  Allan McRae  <allan@archlinux.org>

	[BZ #15939]
	* manual/string.texi (Collation Functions): Fix typo in
	strcoll example.
	Reported by Suren Karapetyan <me@suren.karapetyan.name>.

	[BZ #15893]
	* stdlib/isomac.c (get_null_defines): Fix memory leak.

	[BZ #15892]
	* libio/memstream.c (open_memstream): Fix memory leak.
	* libio/wmemstream.c (open_wmemstream): Likewise.

	[BZ #15895]
	* nscd/netgroupcache.c: Fix nesting of ifdefs.

2013-09-09  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-realloc to tests.
	* malloc/tst-realloc.c: New file.

2013-09-09  Allan McRae  <allan@archlinux.org>

	[BZ #15844]
	* COPYING: Update from GNU website to fix FSF address.
	* COPYING.LIB: Likewise.

2013-09-06  David S. Miller  <davem@davemloft.net>

	* po/zh_TW.po: Update Chinese (traditional) translation from
	translation project.

2013-09-06  Richard Sandiford  <richard@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* locale/programs/locfile.c: Include <assert.h>, <wchar.h> and
	"localeinfo.h".
	(obstack_chunk_alloc): New macro.
	(obstack_chunk_free): Likewise.
	(record_offset): New function.
	(init_locale_data): Likewise.
	(align_locale_data): Likewise.
	(add_locale_empty): Likewise.
	(add_locale_raw_data): Likewise.
	(add_locale_raw_obstack): Likewise.
	(add_locale_string): Likewise.
	(add_locale_wstring): Likewise.
	(add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.
	(add_locale_char): Likewise.
	(start_locale_structure): Likewise.
	(end_locale_structure): Likewise.
	(start_locale_prelude): Likewise.
	(end_locale_prelude): Likewise.
	(write_locale_data): Take locale_file structure rather than an
	iovec.
	* locale/programs/locfile.h: Include "obstack.h".
	(struct locale_file): Change to store locale file contents instead
	of header.
	(init_locale_data): New prototype.
	(align_locale_data): Likewise.
	(add_locale_empty): Likewise.
	(add_locale_raw_data): Likewise.
	(add_locale_raw_obstack): Likewise.
	(add_locale_string): Likewise.
	(add_locale_wstring): Likewise.
	(add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.
	(add_locale_char): Likewise.
	(start_locale_structure): Likewise.
	(end_locale_structure): Likewise.
	(start_locale_prelude): Likewise.
	(end_locale_prelude): Likewise.
	(write_locale_data): Update prototype.
	* locale/programs/3level.h (struct TABLE): Remove result field.
	(CONCAT(TABLE,_finalize)): Change to CONCAT(add_locale_,TABLE).
	Use new locale_file interface.
	[!NO_FINALIZE]: Change condition to [!NO_ADD_LOCALE].
	(NO_FINALIZE): Change #undef to #undef of NO_ADD_LOCALE.
	* locale/programs/ld-address.c (address_output): Use new
	locale_file interface.
	* locale/programs/ld-collate.c (NO_FINALIZE): Change to
	NO_ADD_LOCALE.
	(collate_finish): Don't call collseq_table_finalize.
	(collate_output): Use new locale_file interface.
	* locale/programs/ld-ctype.c: Move includes of "3level.h" earlier
	in file.
	(NO_FINALIZE): Change to NO_ADD_LOCALE.
	(TABLE): Move defines earlier in file.
	(ELEMENT): Likewise.
	(DEFAULT): Likewise.
	(wctrans_table_add): Move macro and inline function earlier in
	file.
	(struct wctype_table): Move type earlier in file.
	(add_locale_wctype_table): New static prototype.
	(struct locale_ctype_t): Use logical types instead of struct iovec
	pointers for members.
	(ctype_output): Use new locale_file interface.
	(wctype_table_finalize): Change to add_locale_wctype_table.  Use
	new locale_file interface.
	(allocate_arrays): Update for use of new locale_file interface.
	* locale/programs/ld-identification.c (identification_output): Use
	new locale_file interface.
	* locale/programs/ld-measurement.c (measurement_output): Likewise.
	* locale/programs/ld-messages.c (messages_output): Likewise.
	* locale/programs/ld-monetary.c (monetary_output): Likewise.
	* locale/programs/ld-name.c (name_output): Likewise.
	* locale/programs/ld-numeric.c (numeric_output): Likewise.
	* locale/programs/ld-paper.c (paper_output): Likewise.
	* locale/programs/ld-telephone.c (telephone_output): Likewise.
	* locale/programs/ld-time.c (time_output): Likewise.

2013-09-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/Makefile: Add memrchr benchmark.
	* benchtests/bench-memchr.c (USE_AS_MEMRCHR): Add define to use
	benchmark as memrchr.
	* benchtests/bench-memrchr-ifunc.c: New file.
	* benchtests/bench-memrchr.c: New file.

2013-09-06   Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (string-bench): Add memcpy.

2013-09-05  Carlos O'Donell  <carlos@redhat.com>
	    Cong Wang  <amwang@redhat.com>

	[BZ #15850]
	* sysdeps/unix/sysv/linux/bits/in.h
	[_UAPI_LINUX_IN6_H]: Define __USE_KERNEL_IPV6_DEFS.
	* inet/netinet/in.h: Move in_addr definition and bits/in.h inclusion
	before __USE_KERNEL_IPV6_DEFS uses.
	* inet/netinet/in.h [!__USE_KERNEL_IPV6_DEFS]: Define IPPROTO_MH, and
	IPPROTO_BEETPH.
	[__USE_KERNEL_IPV6_DEFS]: Don't define any of IPPROTO_*, in6_addr,
	sockaddr_in6, or ipv6_mreq.

2013-09-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memrchr.S (__memrchr): Fix invalid
	memory access for final bytes in some large inputs.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S (__memrchr): Likewise.

2013-09-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* string/test-memrchr.c: New file.
	* string/test-memrchr-ifunc.c: New file.
	* string/Makefile: Add new memrchr testcase.

2013-09-05  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c (do_test): Skip test when
	fanotify_init returns EPERM.

2013-09-04  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl (newtoken): Treat tokens not allowed as
	errors.
	(top level): Treat second token from macro or constant entries for
	allowed headers as allowed.
	* include/complex.h: Condition internal declarations on
	[!_ISOMAC].
	* include/fenv.h: Condition include of <stdbool.h> and internal
	declarations on [!_ISOMAC].

2013-09-04  Chris Leonard  <cjl@sugarlabs,.org>

	[BZ #15923]
	* locale/iso-4217.def: Update iso-1427.def and related occurrences.

2013-09-04  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (--enable-versioning): Remove configure option.
	(libc_cv_asm_symver_directive): Remove configure test.
	(libc_cv_ld_version_script_option): Likewise.
	(VERSIONING): Remove variable and AC_SUBST.
	(DO_VERSIONING): Remove AC_DEFINE.
	* configure: Regenerated.
	* config.h.in (DO_VERSIONING): Remove macro.
	* Makerules [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* config.make.in (versioning): Remove variable.
	* dlfcn/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* dlfcn/modstatic2.c (test) [DO_VERSIONING]: Remove conditional.
	* dlfcn/tststatic2.c (main) [DO_VERSIONING]: Likewise.
	* elf/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* extra-lib.mk [$(versioning) = yes]: Likewise.
	* hurd/Makefile [$(versioning) = yes]: Likewise.
	* hurd/geteuids.c [SHARED && DO_VERSIONING]: Change conditional to
	[SHARED].
	* include/libc-symbols.h [DO_VERSIONING]: Change conditional to
	[SHARED].
	[SHARED && DO_VERSIONING && !NO_HIDDEN]: Change conditional to
	[SHARED && !NO_HIDDEN].
	* include/shlib-compat.h [DO_VERSIONING]: Change conditional to
	[SHARED].
	[SHARED && DO_VERSIONING]: Likewise..
	* libio/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* manual/install.texi (--disable-versioning): Remove
	documentation.
	* INSTALL: Regenerated.
	* resolv/res_libc.c [SHARED && DO_VERSIONING]: Change conditional
	to [SHARED].
	* sunrpc/Makefile [$(versioning) = yes]: Change conditional to
	[$(build-shared) = yes].
	* sysdeps/gnu/Makefile [$(versioning) = yes]: Likewise.
	* sysdeps/i386/i686/multiarch/strstr-c.c
	[SHARED && DO_VERSIONING && !NO_HIDDEN]: Change conditional to
	[SHARED && !NO_HIDDEN].
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h
	[SHARED && DO_VERSIONING]: Change conditional to [SHARED].
	* sysdeps/powerpc/powerpc32/dl-machine.c
	[SHARED && !(DO_VERSIONING - 0)]: Remove conditional error.
	* sysdeps/powerpc/powerpc32/sysdep.h
	[SHARED && DO_VERSIONING && PIC && !NO_HIDDEN]: Change conditional
	to [SHARED && PIC && !NO_HIDDEN].
	* sysdeps/wordsize-32/divdi3.c [SHARED && DO_VERSIONING]: Change
	conditional to [SHARED].

2013-09-04   Will Newton  <will.newton@linaro.org>

	* benchtests/bench-timing.h (TIMING_PRINT_MEAN): New macro.
	* benchtests/bench-string.h: Include bench-timing.h instead
	of including hp-timing.h directly. (INNER_LOOP_ITERS): New
	define. (HP_TIMING_BEST): Delete macro. (test_init): Remove
	call to HP_TIMING_DIFF_INIT.
	* benchtests/bench-memccpy.c: Use bench-timing.h macros
	instead of hp-timing.h macros.
	* benchtests/bench-memchr.c: Likewise.
	* benchtests/bench-memcmp.c: Likewise.
	* benchtests/bench-memcpy.c: Likewise.
	* benchtests/bench-memmem.c: Likewise.
	* benchtests/bench-memmove.c: Likewise.
	* benchtests/bench-memset.c: Likewise.
	* benchtests/bench-rawmemchr.c: Likewise.
	* benchtests/bench-strcasecmp.c: Likewise.
	* benchtests/bench-strcasestr.c: Likewise.
	* benchtests/bench-strcat.c: Likewise.
	* benchtests/bench-strchr.c: Likewise.
	* benchtests/bench-strcmp.c: Likewise.
	* benchtests/bench-strcpy.c: Likewise.
	* benchtests/bench-strcpy_chk.c: Likewise.
	* benchtests/bench-strlen.c: Likewise.
	* benchtests/bench-strncasecmp.c: Likewise.
	* benchtests/bench-strncat.c: Likewise.
	* benchtests/bench-strncmp.c: Likewise.
	* benchtests/bench-strncpy.c: Likewise.
	* benchtests/bench-strnlen.c: Likewise.
	* benchtests/bench-strpbrk.c: Likewise.
	* benchtests/bench-strrchr.c: Likewise.
	* benchtests/bench-strspn.c: Likewise.
	* benchtests/bench-strstr.c: Likewise.

2013-09-04  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile: Use LDLIBS instead of LDFLAGS.

2013-09-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15427]
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r): Use
	2**-30 instead of 2**-70 as threshold for returning -log(|x|).
	* math/libm-test.inc (lgamma_test_data): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-09-03   Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add ifunc.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Add strcmp-sse2-unaligned
	* sysdeps/x86_64/multiarch/strcmp.S (strcmp): Add ifunc.

2013-09-02  Mike Frysinger  <vapier@gentoo.org>

	* Versions.def (libc): Add GLIBC_2.19.

2013-09-02  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c: New test.
	* sysdeps/unix/sysv/linux/Makefile (tests): Add tst-fanotify.

2013-09-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14155]
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Use double for
	intermediate calculations in recurrence.
	(__ieee754_ynf): Likewise.
	* math/libm-test.inc (jn_test_data): Do not allow spurious
	underflow exception.  Add more tests.
	(yn_test_data): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-09-02   Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Fix typo.

2013-08-30   Ondřej Bílka  <neleai@seznam.cz>

	* csu/init-first.c: Fix then/than typos.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/linereader.h: Likewise.
	* manual/charset.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* sysdeps/i386/stpncpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.

2013-08-30   Ondřej Bílka  <neleai@seznam.cz>

	* elf/dl-open.c: Fix typos.
	* iconvdata/gbbig5.c: Likewise.
	* iconvdata/iso-2022-jp.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/loop.c: Likewise.
	* nis/rpcsvc/nis.h: Likewise.
	* resolv/ns_name.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* streams/stropts.h: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sysdeps/i386/strpbrk.S: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c: Likewise.
	* sysdeps/mach/hurd/profil.c: Likewise.
	* sysdeps/s390/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/makecontext.c: Likewise.
	* sysdeps/x86_64/dl-trampoline.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Likewise.

2013-08-30  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Delete.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Remove rawmemchr ifunc.

2013-08-29  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/unix/sysv/linux/powerpc/aix/aix-dirent.h: Remove
	aix specific files.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-errno.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-termios.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/direntconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/errnoconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/statconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/tcgetattr.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/tcsetattr.c: Likewise.

2013-08-29  Thomas Schwinge  <thomas@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/errnos.awk (BEGIN): Emit ESUCCESS.
	* sysdeps/mach/hurd/bits/errno.h: Regenerate.

2013-08-29  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/init-first.c (init1): Use
	__executable_start symbol instead of _start.

2013-08-29  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/ldsodefs.h (VALID_ELF_HEADER)
	(VALID_ELF_OSABI, VALID_ELF_ABIVERSION, MORE_ELF_HEADER_DATA):
	Move macros to...
	* sysdeps/gnu/ldsodefs.h: ... this new file.

	* sysdeps/unix/sysv/linux/ldsodefs.h (VALID_ELF_OSABI)
	(VALID_ELF_ABIVERSION, MORE_ELF_HEADER_DATA): Use ELFOSABI_GNU
	instead of ELFOSABI_LINUX.

	[BZ #15522] strtod ("nan(N)") returning a sNaN in some cases
	* stdlib/strtof_l.c (SET_MANTISSA): Rewrite.
	* stdlib/strtod_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-64-128/strtold_l.c (SET_MANTISSA):
	Likewise.
	* sysdeps/ieee754/ldbl-96/strtold_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-128/strtold_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c (SET_MANTISSA):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/ieee754.h
	(ibm_extended_long_double): Add ieee_nan member.
	* stdlib/tst-strtod6.c (test): New function, renamed from do_test.
	(do_test): New function.

	* math/basic-test.c (TEST_CONVERT): New macro, renamed from
	TEST_TRUNC.
	(convert_dfsf_test, convert_tfsf_test, convert_tfdf_test): New
	functions, renamed from truncdfsf_test, trunctfsf_test,
	trunctfdf_test.
	(convert_sfdf_test, convert_sftf_test, convert_dftf_test): New
	functions.
	(do_test): Run all these.

2013-08-29   Ondřej Bílka  <neleai@seznam.cz>

	* argp/argp-help.c: Fix typos.
	* argp/argp-parse.c: Likewise.
	* debug/backtracesyms.c: Likewise.
	* elf/elf.h: Likewise.
	* malloc/malloc.c: Likewise.
	* nis/nis_print.c: Likewise.
	* resolv/res_comp.c: Likewise.
	* stdlib/stdlib.h: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sysdeps/unix/bsd/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.

2013-08-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nscd/aicache.c (addhstaiX): Use __glibc_unlikely.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2013-08-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #15897]
	* dlfcn/Makefile (tests): Add bug-dl-leaf.
	(modules-names): Add bug-dl-leaf-lib and bug-dl-leaf-lib-cb.
	($(objpfx)bug-dl-leaf): New rule.
	($(objpfx)bug-dl-leaf.so): Likewise.
	($(objpfx)bug-dl-leaf.out): Likewise.
	($(objpfx)bug-dl-leaf-lib.so): Likewise.
	($(objpfx)bug-dl-leaf-lib-cb.so): Likewise.
	* dlfcn/bug-dl-leaf.c: New test.
	* dlfcn/bug-dl-leaf-lib.c: Likewise.
	* dlfcn/bug-dl-leaf-lib-cb.c: Likewise.
	* dlfcn/dlfcn.h (dlopen): Change __THROW to __THROWNL.
	(dlclose): Likewise.
	(dlmopen): Likewise.

2013-08-27  Roland McGrath  <roland@hack.frob.com>

	* include/netdb.h [!_ISOMAC]:
	Don't include <tls.h>.
	(h_errno, __libc_h_errno): Move declaration and macros out of
	[_LIBC_REENTRANT].

	* include/resolv.h [_RESOLV_H_]:
	Don't include <tls.h>.
	(__resp, _res): Move declaration and macro out of [_LIBC_REENTRANT].
	* resolv/res_libc.c: Don't include <tls.h>.
	(_res): Use __attribute__ ((nocommon)) in place of
	__attribute__ ((section (".bss"))).

	* Makefile ($(common-objpfx)linkobj/libc_pic.a):
	If [sunrpc not in $(subdirs)], define to use libc_pic.a directly.

	* resolv/res_send.c (send_dg): Don't try to use ioctl unless [FIONREAD].

	* resolv/res_hconf.c [!NOT_IN_libc] (ifaddrs): Declare
	only under [SIOCGIFCONF && SIOCGIFNETMASK].

	* resolv/res_mkquery.c: Include <sys/time.h>.

	* inet/ifreq.c: Moved to ...
	* sysdeps/unix/ifreq.c: ... here.
	* inet/ifreq.c: New file, true stub version.

	* socket/sa_len.c: New file.
	* socket/Makefile (aux): Add it.
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = socket] (sysdep_routines): Don't add sa_len here.
	* sysdeps/unix/sysv/linux/sa_len.c: Just #define HAVE_NET*_H
	and #include <socket/sa_len.c>.
	* sysdeps/unix/sysv/linux/s390/sa_len.c: Just #define
	HAVE_NETIUCV_IUCV_H and #include <sysdeps/unix/sysv/linux/sa_len.c>.

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h: Moved to ...
	* bits/socket.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h (enum __socket_type):
	Add SOCK_CLOEXEC, SOCK_NONBLOCK with values from FreeBSD.
	(SOCK_MAX, SOCK_TYPE_MASK): New macros.

2013-08-27  Andreas Schwab  <schwab@suse.de>

	[BZ #15736]
	* locale/categories.def (LC_CTYPE): Add "nonascii-case" element.
	* string/Makefile (test-strcasecmp-ENV, test-strncasecmp-ENV)
	(test-strcasecmp-ifunc-ENV, test-strncasecmp-ifunc-ENV): Define.
	* string/test-strcasecmp.c (test_main): Run tests in several
	locales.
	* string/test-strncasecmp.c (test_main): Likewise.

	* sysdeps/i386/i686/multiarch/strcmp-sse4.S (__strcasecmp_sse4_2)
	(__strncasecmp_sse4_2) [PIC]: Restore %ebx before falling through
	to __strcasecmp_nonascii and __strncasecmp_nonascii.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S (__strcasecmp_ssse3)
	(__strncasecmp_ssse3) [PIC]: Likewise.

2013-08-26  Roland McGrath  <roland@hack.frob.com>

	* io/lxstat64.c: Just call __xstat64, for parity with stub __lxstat.

	* nss/nss_files/files-key.c: Include <rpc/des_crypt.h>
	instead of explicitly declaring xdecrypt.
	* nis/nss_nis/nis-publickey.c: Likewise.

2013-08-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15890]
	* nscd/aicache.c: Include res_hconf.h.
	(addhstaiX): Initialize res_hconf.

2013-08-26  Andreas Schwab  <schwab@suse.de>

	* stdlib/Makefile (LDFLAGS-tst-tls-atexit): Remove.
	($(objpfx)tst-tls-atexit): Add dependencies here instead.

2013-08-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nscd/aicache.c (addhstaiX): Fix indentation.

2013-08-25  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac: Quote $build_pt_chown test.
	* configure: Regenerated.

2013-08-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15532]
	* math/s_cexp.c (__cexp): Return NaN + i0 for NaN + i0 argument.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/libm-test.inc (cexp_test_data): Correct expected return
	value for NaN + i0.  Add another test.

2013-08-22  David S. Miller  <davem@davemloft.net>

	* po/ca.po: Update Catalan translation from translation project.
	* po/uk.po: Add Ukrainian translations from translation project.

2013-08-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15797]
	* math/s_fdim.c (__fdim): Check for infinite arguments if result
	is infinite, not alongside NaN test.
	* math/s_fdimf.c (__fdimf): Likewise.
	* math/s_fdiml.c (__fdiml): Likewise.
	* math/libm-test.inc (fdim_test_data): Add more tests.  Test that
	errno is unchanged.

2013-08-21   Ondřej Bílka  <neleai@seznam.cz>

	* argp/argp-help.c: Fix typos.
	* crypt/speeds.c: Likewise.
	* csu/check_fds.c: Likewise.
	* elf/dl-load.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/reldep3.c: Likewise.
	* elf/reldep.c: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* iconv/strtab.c: Likewise.
	* io/lockf64.c: Likewise.
	* libio/libioP.h: Likewise.
	* resolv/gai_notify.c: Likewise.
	* resolv/ns_name.c: Likewise.
	* resolv/ns_samedomain.c: Likewise.
	* resolv/res_send.c: Likewise.
	* stdlib/random.c: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/mach/hurd/check_fds.c: Likewise.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/pthread/aio_notify.c: Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/unix/sysv/linux/socketcall.h: Likewise.
	* sysdeps/x86_64/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86/fpu/bits/fenv.h: Likewise.

2013-08-21  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/strcmp.S: Skip SSE4_2
	version if bit_Slow_SSE4_2 is set.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.

2013-07-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15867]
	* sysdeps/powerpc/powerpc32/backtrace.c (__backtrace): Handle signal
	trampoline stack frame information.
	* sysdeps/powerpc/powerpc64/backtrace.c (__backtrace): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h
	(__vdso_sigtramp_rt64): New variable: PPC64 signal trampoline.
	(__vdso_sigtramp32): New variable: PPC32 signal trampoline.
	(__vdso_sigtramp_rt32): New variable: PPC32 signal trampoline.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c
	(_libc_vdso_platform_setup): Initialize the signal trampolines.
	* debug/tst-backtrace5.c (fn): Add an option set modify sigaction
	sa_flags value.
	* debug/tst-backtrace6.c: New file: check backtrace for signal frames,
	interrupting a syscall and set with option SA_SIGINFO.

2013-08-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15531]
	* math/s_cproj.c (__cproj): Only return an infinity if one part of
	argument is infinite.
	* math/s_cprojf.c (__cprojf): Likewise.
	* math/s_cprojl.c (__cprojl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cprojl.c (__cprojl): Likewise.
	* math/libm-test.inc (cproj_test_data): Add more tests.

	* sysdeps/unix/sysv/linux/mmap64.c: Include <string.h>.

	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64)
	[MMAP2_PAGE_SHIFT == -1]: Use __getpagesize to determine page
	size.  Use __ffs to determine corresponding shift.

2013-08-20  Joseph Myers  <joseph@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	* Makefile (INSTALL): Remove trailing blank lines from output of
	makeinfo.

2013-08-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/sys/procfs.h (struct elf_prstatus):
	Align 32 bit compat elf_greg to 8 bytes.

2013-08-20  Andreas Arnez  <arnez@linux.vnet.ibm.com>

	* elf/setup-vdso.h (setup_vdso): Fix missing string termination.

2013-08-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/strcoll_l.c (coll_seq): New structure.
	(get_next_seq_cached): New function.
	(get_next_seq): New function.
	(do_compare): New function.
	(STRCOLL): Use GNU style definition.  Simplify implementation
	by using get_next_seq, get_next_seq_cached and do_compare.

2013-08-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #14699]
	CVE-2013-4237
	* sysdeps/posix/dirstream.h (struct __dirstream): Add errcode
	member.
	* sysdeps/posix/opendir.c (__alloc_dir): Initialize errcode
	member.
	* sysdeps/posix/rewinddir.c (rewinddir): Reset errcode member.
	* sysdeps/posix/readdir_r.c (__READDIR_R): Enforce NAME_MAX limit.
	Return delayed error code.  Remove GETDENTS_64BIT_ALIGNED
	conditional.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir_r.c: Do not define
	GETDENTS_64BIT_ALIGNED.
	* sysdeps/unix/sysv/linux/i386/readdir64_r.c: Likewise.
	* manual/filesys.texi (Reading/Closing Directory): Document
	ENAMETOOLONG return value of readdir_r.  Recommend readdir more
	strongly.
	* manual/conf.texi (Limits for Files): Add portability note to
	NAME_MAX, PATH_MAX.
	(Pathconf): Add portability note for _PC_NAME_MAX, _PC_PATH_MAX.

2013-08-13  Andreas Schwab  <schwab@suse.de>

	[BZ #15749]
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c (__cbrtl): Use fabsl instead
	of fabs.
	* math/libm-test.inc (cbrt_test_data) [TEST_LDOUBLE &&
	LDBL_MAX_EXP >= 16384]: Add tests for it.

2013-08-12  David S. Miller  <davem@davemloft.net>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.18.90".
	* NEWS: Add 2.19 section.

2013-08-03  David S. Miller  <davem@davemloft.net>

	* po/ko.po: Update Korean translation from translation project.

2013-08-01  David S. Miller  <davem@davemloft.net>

	* manual/contrib.texi: Update entry for Siddhesh Poyarekar.  Add
	entries for Will Newton, Andi Kleen, David Holsgrove, and Ondrej
	Bilka.

2013-07-30  David S. Miller  <davem@davemloft.net>

	* po/fr.po: Update French translation from translation project.

2013-07-28  David S. Miller  <davem@davemloft.net>

	* po/cs.po: Update Czech translation from translation project.

	* po/sv.po: Update Swedish translation from translation project.

2013-07-27  David S. Miller  <davem@davemloft.net>

	* po/eo.po: Update Esperanto translation from translation project.

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/de.po: Update German translation from translation project.

2013-07-26  David S. Miller  <davem@davemloft.net>

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.
	* po/pl.po: Update Polish translation from translation project.
	* po/ru.po: Update Russian translation from translation project.

2013-07-24  David S. Miller  <davem@davemloft.net>

	* po/libc.pot: Update.

2013-07-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/dl-static.c: New file to support
	variable page size.
	* sysdeps/unix/sysv/linux/powerpc/ldsodefs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Makefile: Build dl-static in elf.
	* sysdeps/unix/sysv/linux/powerpc/Versions: Add _dl_var_init.

2013-07-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Refresh.

2013-07-21  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Andreas Schwab  <schwab@suse.de>
	    Roland McGrath  <roland@hack.frob.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #15755]
	* config.h.in: Define HAVE_PT_CHOWN.
	* config.make.in (build-pt-chown): New variable.
	* configure.in (--enable-pt_chown): New configure option.
	* configure: Regenerate.
	* login/Makefile: Include Makeconfig.  Build pt_chown only if
	build-pt-chown is enabled.
	* sysdeps/unix/grantpt.c (grantpt) [HAVE_PT_CHOWN]: Spawn
	pt_chown to fix pty ownership.
	* sysdeps/unix/sysv/linux/grantpt.c [HAVE_PT_CHOWN]: Define
	CLOSE_ALL_FDS.
	* manual/install.texi (Configuring and compiling): Mention
	--enable-pt_chown. Add @findex for grantpt.
	* INSTALL: Regenerate.

2013-07-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update ULPs to handle minor
	difference between 32-bit and 64-bit.

2013-07-15  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15711]
	* sysdeps/unix/sysv/linux/Makefile ($(objpfx)bits/syscall%h):
	Avoid system header dependency with -ffreestanding.
	($(objpfx)bits/syscall%d): Likewise.

2013-07-13  David S. Miller  <davem@davemloft.net>

	* math/libm-test.inc (casin_test_data): Annotate more cases of missing
	underflows from atanl/atan2l due to bug 15319.
	(casinh_test_data): Likewise.

2013-07-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerate from scratch.

2013-07-05  Jeroen Albers  <_jeroen_@yahoo.com>

	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-07-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* configure.in (--enable-lock-elision): Fix message text.
	* INSTALL: Regenerate.
	* configure: Regenerate.

2013-07-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-07-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_LISTEN): Add
	define.
	(PTRACE_PEEKSIGINFO): Add new value from Linux 3.10.
	(ptrace_peeksiginfo_args): Add.
	(__ptrace_peeksiginfo_flags): Add.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.

2013-07-03  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-07-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-07-02  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-07-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-07-02  Andi Kleen <ak@linux.intel.com>

	* config.h.in (ENABLE_LOCK_ELISION): Add.
	* configure.in (--enable-lock-elision): Add option.
	* manual/install.texi: Document --enable lock elision.
	* configure: Regenerate
	* INSTALL: Regenerate.

2013-07-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcasecmp.S (__strcasecmp): Enable
	SSE4.2 strcasecmp for libc.a.
	* sysdeps/i386/i686/multiarch/strncase.S (__strncasecmp): Likewise.

2013-07-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13304]
	* soft-fp/op-common.h (_FP_FMA): New macro.
	* soft-fp/op-1.h (_FP_FRAC_HIGHBIT_DW_1): New macro.
	(_FP_MUL_MEAT_DW_1_imm): Likewise.  Split out of ...
	(_FP_MUL_MEAT_1_imm): ... here.
	(_FP_MUL_MEAT_DW_1_wide): New macro.  Split out of ...
	(_FP_MUL_MEAT_1_wide): ... here.
	(_FP_MUL_MEAT_DW_1_hard): Likewise.  Split out of ...
	(_FP_MUL_MEAT_1_hard): ... here.
	* soft-fp/op-2.h (_FP_FRAC_HIGHBIT_DW_2): New macro.
	(_FP_MUL_MEAT_DW_2_wide): Likewise.  Split out of ...
	(_FP_MUL_MEAT_2_wide): ... here.
	(_FP_MUL_MEAT_DW_2_wide_3mul): New macro.  Split out of ...
	(_FP_MUL_MEAT_2_wide_3mul): ... here.
	(_FP_MUL_MEAT_DW_2_gmp): New macro.  Split out of ...
	(_FP_MUL_MEAT_2_gmp): ... here.
	* soft-fp/op-4.h (_FP_FRAC_HIGHBIT_DW_4): New macro.
	(_FP_MUL_MEAT_DW_4_wide): Likewise.  Split out of ...
	(_FP_MUL_MEAT_4_wide): ... here.
	(_FP_MUL_MEAT_DW_4_gmp): New macro.  Split out of ...
	(_FP_MUL_MEAT_4_gmp): ... here.
	* soft-fp/single.h (_FP_FRACTBITS_DW_S): New macro.
	(_FP_WFRACBITS_DW_S): Likewise.
	(_FP_WFRACXBITS_DW_S): Likewise.
	(_FP_HIGHBIT_DW_S): Likewise.
	(FP_FMA_S): Likewise.
	(_FP_FRAC_HIGH_DW_S): Likewise.
	* soft-fp/double.h (_FP_FRACTBITS_DW_D): New macro.
	(_FP_WFRACBITS_DW_D): Likewise.
	(_FP_WFRACXBITS_DW_D): Likewise.
	(_FP_HIGHBIT_DW_D): Likewise.
	(FP_FMA_D): Likewise.
	(_FP_FRAC_HIGH_DW_D): Likewise.
	* soft-fp/extended.h (_FP_FRACTBITS_DW_E): New macro.
	(_FP_WFRACBITS_DW_E): Likewise.
	(_FP_WFRACXBITS_DW_E): Likewise.
	(_FP_HIGHBIT_DW_E): Likewise.
	(FP_FMA_E): Likewise.
	(_FP_FRAC_HIGH_DW_E): Likewise.
	* soft-fp/quad.h (_FP_FRACTBITS_DW_Q): New macro.
	(_FP_WFRACBITS_DW_Q): Likewise.
	(_FP_WFRACXBITS_DW_Q): Likewise.
	(_FP_HIGHBIT_DW_Q): Likewise.
	(FP_FMA_Q): Likewise.
	(_FP_FRAC_HIGH_DW_Q): Likewise.
	* soft-fp/fmasf4.c: New file.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.

2013-06-28  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Set
	bit_Slow_SSE4_2 and bit_Prefer_PMINUB_for_stringop for Intel
	Silvermont.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Slow_SSE4_2): New
	macro.
	(index_Slow_SSE4_2): Likewise.
	(index_Prefer_PMINUB_for_stringop): Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Skip SSE4.2 version if
	bit_Slow_SSE4_2 is set.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.

2013-06-28  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile: Add comment about generating an offset to
	rtld_global._dl_hwcap2.
	* sysdeps/powerpc/bits/hwcap.h: Added PPC_FEATURE2_* definitions for
	POWER8.
	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_cap_flags): Extend for
	POWER8 feature descriptions defined in _dl_hwcap2.
	* sysdeps/powerpc/dl-procinfo.h (_dl_procinfo): Implement AT_HWCAP2
	string handling for POWER8 feature bits.
	(_DL_HWCAP_COUNT): Increment to 64 to cover AT_HWCAP2 bits.
	(_DL_HWCAP_LAST): New definition for position of last AT_HWCAP bit in
	_dl_powerpc_cap_flags.
	(_DL_HWCAP2_LAST): New definition for last usable bit of AT_HWCAP2.
	* sysdeps/powerpc/rtld-global-offsets.sym
	(RTLD_GLOBAL_RO_DL_HWCAP2_OFFSET): New offset macro to locate
	_dl_hwcap2 in the rtld_global_ro structure.

2013-06-28  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* elf/dl-support.c (_dl_hwcap2): Add a new hwcap field for more
	hardware capabilities in support of AT_HWCAP2.
	(_dl_aux_init): Read AT_HWCAP2 into GLRO(dl_hwcap2).
	* elf/dl-sysdep.c (_dl_sysdep_start): Read AT_HWCAP2 into
	GLRO(dl_hwcap2).
	(_dl_show_auxv): Add support for calling _dl_procinfo to display
	AT_HWCAP2.  If a platform doesn't chose to handle displaying AT_HWCAP2
	explicitly the unknown a_type display mechanism is used.
	* misc/getauxval.c (__getauxval): Return GLRO(dl_hwcap2) on AT_HWCAP2.
	* sysdeps/generic/ldsodefs.h (rtld_global_ro): Add _dl_hwcap2 as a new
	struct member.
	* sysdeps/generic/dl-procinfo.h (_dl_procinfo): Add TYPE parameter
	to macro prototype for AT_HWCAP2 support.
	* sysdeps/i386/dl-procinfo.h: Likewise.
	* sysdeps/s390/dl-procinfo.h: Likewise.
	* sysdeps/powerpc/dl-procinfo.h (_dl_procinfo): Add TYPE parameter to
	macro prototype for AT_HWCAP2 support.  Make WORD unsigned long int
	rather than signed int.  Stub in handler for TYPE == AT_HWCAP2 to
	return -1 for unknown a_type display fallback.
	* sysdeps/sparc/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/dl-procinfo.h: Likewise.

2013-06-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Shift by page_shift
	instead of MMAP2_PAGE_SHIFT in call to INLINE_SYSCALL.

2013-06-28  Pierre Ynard  <linkfanel@yahoo.fr>

	[BZ #12492]
	* elf/dl-load.c (_dl_map_object_from_fd): Test for failure of
	mprotect making __stack_prot writable.

2013-06-28  Nathan Froyd  <froydnj@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* elf/dl-profile.c (struct here_cg_arc_record): Declare 'count'
	as being properly aligned.

2013-06-28  Maciej W. Rozycki  <macro@codesourcery.com>

	* dlfcn/modstatic5.c: New file.
	* dlfcn/tststatic5.c: New file.
	* dlfcn/Makefile (tests): Add tststatic5.
	(tests-static): Likewise.
	(modules-names): Add modstatic5.
	(tststatic5-ENV): New variable.
	($(objpfx)tststatic5, $(objpfx)tststatic5.out): New dependencies.

	[BZ #15022]
	* elf/dl-support.c (_dl_main_map): New variable.
	(_dl_ns): Use it to initialize [LM_ID_BASE] element.
	(_dl_nns, _dl_load_adds): Set to 1.
	(_dl_initial_searchlist): Refer to _dl_main_map.
	(_dl_non_dynamic_init): Initialize _dl_main_map.l_origin.
	* elf/dl-load.c (_dl_dst_substitute) [!SHARED]: Remove fallback
	call to _dl_get_origin.
	* elf/dl-open.c (dl_open_worker): Remove !SHARED special casing
	around call_map.
	(_dl_open) [!SHARED]: Remove code to initialize GL(dl_nns).
	* dlfcn/modstatic3.c: New file.
	* dlfcn/tststatic3.c: New file.
	* dlfcn/tststatic4.c: New file.
	* dlfcn/Makefile (tests): Add tststatic3 and tststatic4.
	(tests-static): Likewise.
	(modules-names): Add modstatic3.
	(tststatic3-ENV, tststatic4-ENV): New variables.
	($(objpfx)tststatic3, $(objpfx)tststatic3.out): New dependencies.
	($(objpfx)tststatic4, $(objpfx)tststatic4.out): Likewise.

2013-06-26  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (CC): Require GCC version 4.4 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Update GCC version
	requirement.
	* INSTALL: Regenerated.

2013-06-26  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	[BZ #15674]
	* string/test-memcmp.c (check2): New.
	(main): Call check2.

	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Fix buffers overrun.

2013-06-26  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #15022]
	* elf/dl-open.c (_dl_open) [!SHARED]: Move call to DL_STATIC_INIT
	over to...
	(dl_open_worker) [!SHARED]: ... here.

2013-06-26  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* elf/elf.h (AT_HWCAP2): Add a new a_type entry.

2013-06-25  Richard Henderson  <rth@redhat.com>

	* locale/programs/locarchive.c: Include <libc-internal.h>

2013-06-25  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2013-06-21.17, with
	trailing whitespace removed.

2013-06-24  Mike Frysinger  <vapier@gentoo.org>

	[BZ #10283]
	* locale/locarchive.h (struct locarhandle): Add mmap_base and mmap_len.
	* locale/programs/locarchive.c: Include libc-mmap.h.
	(prepare_address_space): Take two new outputs (the mmap base and len).
	Align p to MAP_FIXED_ALIGNMENT.  Set mmap base and len to the right
	values.
	(create_archive): Declare new mmap base and len values for
	prepare_address_space, and store the result in ah.
	(file_data_available_p): Replace pagesz with MAP_FIXED_ALIGNMENT.
	(enlarge_archive): If ah->mmap_base is not NULL, use that and
	ah->mmap_len to unmap rather than ah->addr and ah->reserved.
	Declare new mmap base and len values for
	prepare_address_space, and store the result in new_ah.
	(open_archive): Declare new mmap base and len values for
	prepare_address_space, and store the result in ah.
	(close_archive): If ah->mmap_base is not NULL, use that and
	ah->mmap_len to unmap rather than ah->addr and ah->reserved.
	* sysdeps/generic/libc-mmap.h: New file.

2013-06-24  Mike Frysinger  <vapier@gentoo.org>

	* include/libc-internal.h (ALIGN_DOWN): New helper macro.
	(ALIGN_UP): Likewise.
	(PTR_ALIGN_DOWN): Likewise.
	(PTR_ALIGN_UP): Likewise.

2013-06-24  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_platforms): Add "power8"
	entry mapped to PPC_PLATFORM_POWER8.
	* sysdeps/powerpc/dl-procinfo.h (_DL_PLATFORMS_COUNT): Increment for
	POWER8.
	(PPC_PLATFORM_POWER8): Add new platform bit for POWER8 processor.
	(_dl_string_platform): Add case for exporting platform position for
	POWER8.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power8/Implies: Chain
	search path to sysdeps/powerpc/powerpc32/power8 directory.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power8/Implies: Chain
	search path to sysdeps/powerpc/powerpc64/power8 directory.
	* sysdeps/powerpc/powerpc32/power8/Implies: Chain search path to
	power7 directories.
	* sysdeps/powerpc/powerpc64/power8/Implies: Chain search path to
	power7 directories.

2013-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* INSTALL: Regenerate.

	* nscd/connections.c (nscd_init): Fix comment.

2013-06-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/libc_fatal.c: Include <string.h>.

	[BZ #15667]
	* soft-fp/op-4.h (__FP_FRAC_ADD_3): Rename variables _c1 and _c2
	to __FP_FRAC_ADD_3_c1 and __FP_FRAC_ADD_3_c2.

2013-06-21  Maciej W. Rozycki  <macro@codesourcery.com>

	* elf/dl-dst.h (DL_DST_REQUIRED): Remove call to
	DL_DST_REQ_STATIC.
	(DL_DST_REQ_STATIC): Remove macro.

2013-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #7006]
	* soft-fp/op-common.h (_FP_FROM_INT): Do not call _FP_FRAC_SLL
	with a shift of 0 bits.

2013-06-21  Maciej W. Rozycki  <macro@codesourcery.com>

	* dlfcn/Makefile (tststatic2-ENV): Redefine in terms of
	$(tststatic-ENV).

2013-06-21  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	[BZ #15655]
	* sysdeps/sh/sh4/fpu/fgetexcptflg.c: New file.

2013-06-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* config.h.in (HAVE_CC_INHIBIT_LOOP_TO_LIBCALL): New define.
	* configure.in (libc_cv_cc_loop_to_function): Check if compiler
	accepts -fno-tree-loop-distribute-patterns.
	* include/libc-symbols.h (inhibit_loop_to_libcall): New macro.
	* string/memmove.c (MEMMOVE): Disable loop transformation to avoid
	recursive call.
	* string/memset.c (memset): Likewise.
	* string/test-memmove.c (simple_memmove): Disable loop transformation
	to library calls.
	* string/test-memset.c (simple_memset): Likewise.
	* benchtests/bench-memmove.c (simple_memmove): Likewise.
	* benchtests/bench-memset.c (simple_memset): Likewise.
	* configure: Regenerated.

2013-06-20  Joseph Myers  <joseph@codesourcery.com>

	* math/test-misc.c (main): Ignore fesetround failure when failures
	of subsequent rounding tests would be ignored.

	[BZ #15654]
	* math/fedisblxcpt.c (fedisableexcept): Return 0.
	* math/feenablxcpt.c (feenableexcept): Return 0 for argument 0.
	* math/fegetenv.c (__fegetenv): Return 0.
	* math/fegetexcept.c (fegetexcept): Return 0.
	* math/fegetround.c (fegetround) [FE_TONEAREST]: Return
	FE_TONEAREST.
	* math/feholdexcpt.c (feholdexcept): Return 0.
	* math/fesetenv.c (__fesetenv): Return 0.
	* math/fesetround.c (fesetround) [FE_TONEAREST]: Return 0 for
	argument FE_TONEAREST.
	* math/feupdateenv.c (__feupdateenv): Return 0.
	* math/fgetexcptflg.c (__fegetexceptflag): Return 0.

2013-06-18  Roland McGrath  <roland@hack.frob.com>

	* elf/rtld-Rules (rtld-compile-command.S): New variable.
	(rtld-compile-command.s, rtld-compile-command.c): New variables.
	($(objpfx)rtld-%.os rules): Use them.

2013-06-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/powerpc/tls.h (tcbhead_t): Add Event-Based Branch
	fields.

2013-06-17  Roland McGrath  <roland@hack.frob.com>

	* scripts/sysd-rules.awk: Sort sysd_rules_patterns by descending
	length of target pattern, then descending length of dependency pattern.
	* configure.in (AWK): Require gawk 3.1.2 or newer.
	* manual/install.texi (Tools for Compilation): Say that we do.
	* configure: Regenerated.

	* Makerules [inhibit-sysdep-asm] (check-inhibit-asm): Variable removed.
	($(common-objpfx)sysd-rules): Replace shell logic with running ...
	* scripts/sysd-rules.awk: ... this new script.
	* sysdeps/mach/hurd/Makefile (inhibit-sysdep-asm): Use a regexp rather
	than a glob-style pattern.

2013-06-17  Joseph Myers  <joseph@codesourcery.com>

	* math/test-misc.c (main): Do not treat incorrectly rounded
	conversions as failure unless ROUNDING_TESTS passes.

2013-06-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15631]
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Save and
	restore exception state around main square root computation, then
	check for inexactness explicitly.

	* math/libm-test.inc (fma_test_data): Add another test.

2013-06-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/threads.texi (Non-POSIX Extensions): New document
	node.  Document pthread_getattr_default_np and
	pthread_setattr_default_np.

	* Versions.def (libpthread): Add GLIBC_2.18.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist:
	Likewise.

2013-06-14  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Fast_Unaligned_Load for Intel Silvermont architecture.

2013-06-14  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    H.J. Lu  <hjl.tools@gmail.com>

	[BZ #15627]
	* sysdeps/x86_64/rtld-memset.c: Remove file.
	* sysdeps/x86_64/rtld-memset.S: New file.

2013-06-14  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/tst-strtod-round.c: Include <math-tests.h>.
	(test_in_one_mode): Take arguments for whether the rounding mode
	is supported for each floating-point type.
	(do_test): Pass new arguments to test_in_one_mode using
	ROUNDING_TESTS.

2013-06-13  Roland McGrath  <roland@hack.frob.com>

	* posix/tst-waitid.c (do_test): Distinguish different instances of
	stopped/continued in CHECK_SIGCHLD uses.  Insert a delay between
	sending SIGSTOP and calling waitpid to ensure SIGCHLD gets delivered
	before entering the kernel for waitpid.

2013-06-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* NEWS: Fix note on clock function precision.  Text by Roland
	McGrath.

2013-06-13  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile ($(objpfx)ld.so): Link into a temporary file and move
	it into place only when and if the sanity check passes.

2013-06-13  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/gen-tst-strtod-round.c (round_str): Always generate
	output for whether conversion result is exact.  Take argument
	indicating whether type is IBM long double.
	(round_for_all): Change need_exact field to ibm_ld.
	* stdlib/tst-strtod-round.c (struct exactness): New type.
	(struct test): Change bool ld_ok field to struct exactness exact.
	(TEST): Update all definitions for change to field.
	(tests): Regenerate array contents.
	(test_in_one_mode): Take pointer to new field instead of old ld_ok
	field value.  Check for IBM long double here.
	(do_test): Update calls to test_in_one_mode.

2013-06-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12515]
	* sysdeps/unix/sysv/linux/clock.c (clock): Use result from
	CLOCK_PROCESS_CPUTIME_ID clock instead of __times.

2013-06-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15605]
	* sysdeps/generic/symbol-hacks.h: Add workaround for memset/memmove calls
	generated by the compiler on loop optimizations.
	* sysdeps/wordsize-32/symbol-hacks.h: Include next symbol-hacks.h for
	general definitions.

2013-06-12  Joseph Myers  <joseph@codesourcery.com>

	* math/bug-nextafter.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.
	* math/bug-nexttoward.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.
	* math/test-misc.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.

2013-06-12  Andreas Jaeger  <aj@suse.de>

	* po/ia.po: Update Interlingua translation from translation
	project.

2013-06-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/fenv.h: Include stdbool.h.
	(struct rm_ctx): New structure.
	* sysdeps/generic/math_private.h (SET_RESTORE_ROUND_GENERIC):
	Define macro.
	(SET_RESTORE_ROUND): Define using SET_RESTORE_ROUND_GENERIC.
	(SET_RESTORE_ROUNDF): Likewise.
	(SET_RESTORE_ROUNDL): Likewise.
	(SET_RESTORE_ROUND_NOEX): Likewise.
	(SET_RESTORE_ROUND_NOEXF): Likewise.
	(SET_RESTORE_ROUND_NOEXL): Likewise.
	(SET_RESTORE_ROUND_53BIT): Likewise.
	[HAVE_RM_CTX] (libc_feresetround_noex_ctx): Define macro.
	(libc_feresetround_noexf_ctx): Likewise.
	(libc_feresetround_noexl_ctx): Likewise.
	(libc_feholdsetround_53bit_ctx): Likewise.
	(libc_feresetround_53bit_ctx): Likewise.
	* sysdeps/i386/fpu/fenv_private.h (HAVE_RM_CTX): Define macro.
	(libc_feholdexcept_setround_sse_ctx): New function.
	(libc_fesetenv_sse_ctx): Likewise.
	(libc_feupdateenv_sse_ctx): Likewise.
	(libc_feholdexcept_setround_387_prec_ctx): Likewise.
	(libc_feholdexcept_setround_387_ctx): Likewise.
	(libc_feholdexcept_setround_387_53bit_ctx): Likewise.
	(libc_feholdsetround_387_prec_ctx): Likewise.
	(libc_feholdsetround_387_ctx): Likewise.
	(libc_feholdsetround_387_53bit_ctx): Likewise.
	(libc_feholdsetround_sse_ctx): Likewise.
	(libc_feresetround_sse_ctx): Likewise.
	(libc_feresetround_387_ctx): Likewise.
	(libc_feupdateenv_387_ctx): Likewise.
	(libc_feholdexcept_setroundf_ctx): Define macro.
	(libc_fesetenvf_ctx): Likewise.
	(libc_feupdateenvf_ctx): Likewise.
	(libc_feholdsetroundf_ctx): Likewise.
	(libc_feresetroundf_ctx): Likewise.
	(libc_feholdexcept_setround_ctx): Likewise.
	(libc_fesetenv_ctx): Likewise.
	(libc_feupdateenv_ctx): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feresetround_ctx): Likewise.
	(libc_feholdexcept_setroundl_ctx): Likewise.
	(libc_feupdateenvl_ctx): Likewise.
	(libc_feholdsetroundl_ctx): Likewise.
	(libc_feresetroundl_ctx): Likewise.
	[!__SSE2_MATH__] (libc_feholdsetround_53bit_ctx): Likewise.
	(libc_feresetround_53bit_ctx): Likewise.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/iso-639.def: Convert to UTF-8.

2013-06-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/math-tests.h (EXCEPTION_TESTS_float): New macro.
	(EXCEPTION_TESTS_double): Likewise.
	(EXCEPTION_TESTS_long_double): Likewise.
	(EXCEPTION_TESTS): Likewise.
	* math/libm-test.inc (test_exceptions): Only test exceptions if
	EXCEPTION_TESTS (FLOAT).

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (string-bench): Add strcpy_chk and
	stpcpy_chk.
	* benchtests/bench-stpcpy_chk-ifunc.c: New file.
	* benchtests/bench-stpcpy_chk.c: New file.
	* benchtests/bench-strcpy_chk-ifunc.c: New file.
	* benchtests/bench-strcpy_chk.c: New file.
	* debug/test-strcpy_chk.c (do_one_test): Remove HP_TIMING
	code.
	(do_test): Likewise.

2013-06-11  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_platforms): Add ppc405,
	ppc440, ppc464, and ppc476, merging from ports/ dl-procinfo.c.
	* sysdeps/powerpc/dl-procinfo.h: Fix whitespace by correcting spaces
	with tabs where appropriate.
	[PPC_PLATFORM_PPC405]: Define new platform merging from ports/
	dl-procinfo.h.
	[PPC_PLATFORM_PPC440]: Likewise.
	[PPC_PLATFORM_PPC464]: Likewise.
	[PPC_PLATFORM_PPC476]: Likewise.
	(_dl_string_platform): Add support for detecting ppc405, ppc440,
	ppc464, and ppc476 platform strings merging from ports/
	dl-procinfo.h.

2013-06-11  Andreas Schwab  <schwab@suse.de>

	[BZ #14991]
	* iconvdata/big5hkscs.c (big5hkscs_to_ucs, from_ucs4)
	(from_ucs4_idx): Regenerate.
	(MIN_NEEDED_FROM, MAX_NEEDED_FROM, MIN_NEEDED_TO): Remove macros.
	(FROM_LOOP_MIN_NEEDED_FROM, FROM_LOOP_MAX_NEEDED_FROM)
	(FROM_LOOP_MIN_NEEDED_TO, FROM_LOOP_MAX_NEEDED_TO)
	(TO_LOOP_MIN_NEEDED_FROM, TO_LOOP_MAX_NEEDED_FROM)
	(TO_LOOP_MIN_NEEDED_TO, TO_LOOP_MAX_NEEDED_TO, PREPARE_LOOP)
	(EXTRA_LOOP_ARGS, SAVE_RESET_STATE, EMIT_SHIFT_TO_INIT)
	(EXTRA_LOOP_DECLS, MAX_NEEDED_OUTPUT): New macros.
	(MIN_NEEDED_INPUT, MAX_NEEDED_INPUT, MIN_NEEDED_OUTPUT): Define
	from FROM_LOOP and TO_LOOP specific macros.
	(BODY): Handle combining characters.
	* iconvdata/BIG5HKSCS.irreversible: Update.
	* iconvdata/BIG5HKSCS.precomposed: New file.
	* iconvdata/testdata/BIG5HKSCS: Regenerate to cover all assigned
	characters.
	* iconvdata/testdata/BIG5HKSCS..UTF8: Update.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/sys/time.h: Fix indentation and add copyright header.

	* string/test-memccpy.c (do_one_test): Remove HP_TIMING code.
	(do_test): Likewise.
	* string/test-memchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memcmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memcpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memmem.c (do_one_test): Likewise.
	(do_test): Likewise.
	(do_random_tests): Likewise.
	* string/test-memmove.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memset.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-rawmemchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcasecmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcasestr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcat.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-string.h: Likewise.
	(test_init): Likewise.
	* string/test-strlen.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncasecmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncat.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncmp.c (do_one_test): Likewise.
	(do_test_limit): Likewise.
	(do_test): Likewise.
	* string/test-strncpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strnlen.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strpbrk.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strrchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strspn.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strstr.c (do_one_test): Likewise.
	(do_test): Likewise.

	* benchtests/Makefile (string-bench): Add string benchmarks.
	* benchtests/bench-bcopy-ifunc.c: New file.
	* benchtests/bench-bcopy.c: New file.
	* benchtests/bench-bzero-ifunc.c: New file.
	* benchtests/bench-bzero.c: New file.
	* benchtests/bench-memccpy-ifunc.c: New file.
	* benchtests/bench-memccpy.c: New file.
	* benchtests/bench-memchr-ifunc.c: New file.
	* benchtests/bench-memchr.c: New file.
	* benchtests/bench-memcmp-ifunc.c: New file.
	* benchtests/bench-memcmp.c: New file.
	* benchtests/bench-memmem-ifunc.c: New file.
	* benchtests/bench-memmem.c: New file.
	* benchtests/bench-memmove-ifunc.c: New file.
	* benchtests/bench-memmove.c: New file.
	* benchtests/bench-mempcpy-ifunc.c: New file.
	* benchtests/bench-mempcpy.c: New file.
	* benchtests/bench-memset-ifunc.c: New file.
	* benchtests/bench-memset.c: New file.
	* benchtests/bench-rawmemchr-ifunc.c: New file.
	* benchtests/bench-rawmemchr.c: New file.
	* benchtests/bench-stpcpy-ifunc.c: New file.
	* benchtests/bench-stpcpy.c: New file.
	* benchtests/bench-stpncpy-ifunc.c: New file.
	* benchtests/bench-stpncpy.c: New file.
	* benchtests/bench-strcasecmp-ifunc.c: New file.
	* benchtests/bench-strcasecmp.c: New file.
	* benchtests/bench-strcasestr-ifunc.c: New file.
	* benchtests/bench-strcasestr.c: New file.
	* benchtests/bench-strcat-ifunc.c: New file.
	* benchtests/bench-strcat.c: New file.
	* benchtests/bench-strchr-ifunc.c: New file.
	* benchtests/bench-strchr.c: New file.
	* benchtests/bench-strchrnul-ifunc.c: New file.
	* benchtests/bench-strchrnul.c: New file.
	* benchtests/bench-strcmp-ifunc.c: New file.
	* benchtests/bench-strcmp.c: New file.
	* benchtests/bench-strcpy-ifunc.c: New file.
	* benchtests/bench-strcpy.c: New file.
	* benchtests/bench-strcspn-ifunc.c: New file.
	* benchtests/bench-strcspn.c: New file.
	* benchtests/bench-strlen-ifunc.c: New file.
	* benchtests/bench-strlen.c: New file.
	* benchtests/bench-strncasecmp-ifunc.c: New file.
	* benchtests/bench-strncasecmp.c: New file.
	* benchtests/bench-strncat-ifunc.c: New file.
	* benchtests/bench-strncat.c: New file.
	* benchtests/bench-strncmp-ifunc.c: New file.
	* benchtests/bench-strncmp.c: New file.
	* benchtests/bench-strncpy-ifunc.c: New file.
	* benchtests/bench-strncpy.c: New file.
	* benchtests/bench-strnlen-ifunc.c: New file.
	* benchtests/bench-strnlen.c: New file.
	* benchtests/bench-strpbrk-ifunc.c: New file.
	* benchtests/bench-strpbrk.c: New file.
	* benchtests/bench-strrchr-ifunc.c: New file.
	* benchtests/bench-strrchr.c: New file.
	* benchtests/bench-strspn-ifunc.c: New file.
	* benchtests/bench-strspn.c: New file.
	* benchtests/bench-strstr-ifunc.c: New file.
	* benchtests/bench-strstr.c: New file.

	* benchtests/Makefile: Disable parallel execution of targets.
	(string-bench): Add memcpy.
	(benchset): New variable to store a list of benchmark sets.
	(bench-func): Renamed from bench.
	(bench-set): New target.
	(bench): Depend on bench-func and bench-set.
	* benchtests/README: Add section on benchmark sets.
	* benchtests/bench-memcpy-ifunc.c: New file.
	* benchtests/bench-memcpy.c: New file.
	* benchtests/bench-string.h: New file.

2013-06-11  Andreas Schwab  <schwab@suse.de>

	[BZ #15577]
	* nscd/connections.c (nscd_run_worker): Always zero-terminate key.
	* nscd/netgroupcache.c (addgetnetgrentX): Properly handle absent
	values in the triple.
	* nscd/nscd_netgroup.c (__nscd_setnetgrent): Include zero
	terminator in the group key.

2013-06-11  Andreas Jaeger  <aj@suse.de>

	* po/zh_TW.po: Update Chinese (traditional) translation from
	translation project.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/time.h (__clock_gettime): Add libc_hidden_proto.
	* rt/clock_getcpuclockid.c (clock_getcpuclockid): Rename to
	__clock_getcpuclockid.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	(clock_getcpuclockid): Likewise.
	* rt/clock_getres.c (clock_getres): Rename to __clock_getres.
	Add weak_alias and libc_hidden_def.
	* sysdeps/posix/clock_getres.c (clock_getres): Likewise.
	* rt/clock_gettime.c (clock_gettime): Rename to
	__clock_gettime.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_gettime.c (clock_gettime): Likewise.
	* rt/clock_nanosleep.c (clock_nanosleep): Rename to
	__clock_nanosleep.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_nanosleep.c (clock_nanosleep): Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c (clock_nanosleep):
	Likewise.
	* rt/clock_settime.c (clock_settime): Rename to
	__clock_settime.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_settime.c (clock_settime): Likewise.

2013-06-10  Joseph Myers  <joseph@codesourcery.com>

	* mach/err_boot.sub: Remove trailing whitespace.
	* mach/err_ipc.sub: Likewise.
	* mach/err_mach.sub: Likewise.

	* sysdeps/generic/math-tests.h (ROUNDING_TESTS_float): New macro.
	(ROUNDING_TESTS_double): Likewise.
	(ROUNDING_TESTS_long_double): Likewise.
	(ROUNDING_TESTS): Likewise.
	* math/libm-test.inc: Include <math-tests.h>.
	(IF_ROUND_INIT_FE_DOWNWARD): Use ROUNDING_TESTS.
	(IF_ROUND_INIT_FE_TONEAREST): Likewise.
	(IF_ROUND_INIT_FE_TOWARDZERO): Likewise.
	(IF_ROUND_INIT_FE_UPWARD): Likewise.

2013-06-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (CPPFLAGS-nonlib): Append values instead
	of assigning.

2013-06-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/gnu/errlist.awk: Do not generate space at end of
	otherwise empty TRANS lines.
	* sysdeps/gnu/errlist.c: Regenerated.

	* catgets/gencat.c (error_print): Use (void) in function
	definition.
	* crypt/crypt_util.c (__init_des): Likewise.
	* crypt/speeds.c (Stop): Likewise.
	(main): Likewise.
	* hurd/hurdmalloc.c (print_malloc_free_list): Likewise.
	* inet/ruserpass.c (token): Likewise.
	* intl/finddomain.c (_nl_finddomain_subfreeres): Likewise.
	* intl/localealias.c (extend_alias_table): Likewise.
	* intl/plural-exp.c (init_germanic_plural): Likewise.
	* libio/fcloseall.c (__fcloseall): Likewise.
	* libio/genops.c (_IO_flush_all): Likewise.
	(_IO_flush_all_linebuffered): Likewise.
	(_IO_cleanup): Likewise.
	(_IO_iter_begin): Likewise.
	(_IO_iter_end): Likewise.
	(_IO_list_lock): Likewise.
	(_IO_list_unlock): Likewise.
	(_IO_list_resetlock): Likewise.
	* libio/getchar.c (getchar): Likewise.
	* libio/getchar_u.c (getchar_unlocked): Likewise.
	* libio/getwchar.c (getwchar): Likewise.
	* libio/getwchar_u.c (getwchar_unlocked): Likewise.
	* libio/oldstdfiles.c (_IO_check_libio): Likewise.
	* login/getpt.c (__getpt): Likewise.
	* login/tst-utmp.c (main): Likewise.
	* malloc/hooks.c (__malloc_check_init): Likewise.
	* malloc/malloc.c (__malloc_stats): Likewise.
	* malloc/mtrace.c (tr_break): Likewise.
	(mtrace): Likewise.
	(muntrace): Likewise.
	* misc/fstab.c (endfsent): Likewise.
	* misc/getclktck.c (__getclktck): Likewise.
	* misc/getdtsz.c (__getdtablesize): Likewise.
	* misc/gethostid.c (gethostid): Likewise.
	* misc/getpagesize.c (__getpagesize): Likewise.
	* misc/getsysstats.c (__get_nprocs_conf): Likewise.
	(__get_nprocs): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* misc/getttyent.c (getttyent): Likewise.
	(setttyent): Likewise.
	(endttyent): Likewise.
	* misc/getusershell.c (getusershell): Likewise.
	(endusershell): Likewise.
	(setusershell): Likewise.
	(initshells): Likewise.
	* misc/hsearch.c (__hdestroy): Likewise.
	* misc/sync.c (sync): Likewise.
	* misc/syslog.c (closelog_internal): Likewise.
	(closelog): Likewise.
	* misc/ttyslot.c (ttyslot): Likewise.
	* misc/vhangup.c (vhangup): Likewise.
	* posix/fork.c (__fork): Likewise.
	* posix/getegid.c (__getegid): Likewise.
	* posix/geteuid.c (__geteuid): Likewise.
	* posix/getgid.c (__getgid): Likewise.
	* posix/getpid.c (__getpid): Likewise.
	* posix/getppid.c (__getppid): Likewise.
	* posix/getuid.c (__getuid): Likewise.
	* posix/pause.c (pause): Likewise.
	* posix/setpgrp.c (setpgrp): Likewise.
	* posix/setsid.c (__setsid): Likewise.
	* posix/test-vfork.c (noop): Likewise.
	* resolv/gethnamaddr.c (_endhtent): Likewise.
	(_gethtent): Likewise.
	(ht_endhostent): Likewise.
	(gethostent): Likewise.
	(dns_service): Likewise.
	* stdlib/drand48.c (drand48): Likewise.
	* stdlib/lrand48.c (lrand48): Likewise.
	* stdlib/mrand48.c (mrand48): Likewise.
	* stdlib/rand.c (rand): Likewise.
	* stdlib/random.c (__random): Likewise.
	* stdlib/setenv.c (clearenv): Likewise.
	* sunrpc/clnt_tcp.c (clnttcp_abort): Likewise.
	* sunrpc/clnt_unix.c (clntunix_abort): Likewise.
	* sysdeps/mach/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/mach/getsysstats.c (__get_nprocs_conf): Likewise.
	(__get_nprocs): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c (__getpid): Likewise.
	* sysdeps/mach/hurd/getclktck.c (__getclktck): Likewise.
	* sysdeps/mach/hurd/getdtsz.c (__getdtablesize): Likewise.
	* sysdeps/mach/hurd/getegid.c (__getegid): Likewise.
	* sysdeps/mach/hurd/geteuid.c (__geteuid): Likewise.
	* sysdeps/mach/hurd/getgid.c (__getgid): Likewise.
	* sysdeps/mach/hurd/gethostid.c (gethostid): Likewise.
	* sysdeps/mach/hurd/getlogin.c (getlogin): Likewise.
	* sysdeps/mach/hurd/getpid.c (__getpid): Likewise.
	* sysdeps/mach/hurd/getppid.c (__getppid): Likewise.
	* sysdeps/mach/hurd/getuid.c (__getuid): Likewise.
	* sysdeps/mach/hurd/sync.c (sync): Likewise.
	* sysdeps/posix/clock.c (clock): Likewise.
	* sysdeps/unix/bsd/setsid.c (__setsid): Likewise.
	* sysdeps/unix/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/unix/sysv/linux/getclktck.c (__getclktck): Likewise.
	* sysdeps/unix/sysv/linux/gethostid.c (gethostid): Likewise.
	* sysdeps/unix/sysv/linux/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Likewise.
	(__get_nprocs_conf): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* time/clock.c (clock): Likewise.
	* time/tzset.c (__tzname_max): Likewise.

2013-06-07  Joseph Myers  <joseph@codesourcery.com>

	* bits/byteswap.h [__GNUC__ && !__GNUC_PREREQ (4, 3)]
	(__bswap_32): Do not use "register".
	* crypt/crypt.c (_ufc_doit_r): Likewise.
	* debug/stpcpy_chk.c (__stpcpy_chk): Likewise.
	* debug/wcscat_chk.c (__wcscat_chk): Likewise.
	* gmon/gmon.c (__monstartup): Likewise.
	* gmon/mcount.c (_MCOUNT_DECL(frompc, selfpc)): Likewise.
	* hurd/hurdmalloc.c (more_memory): Likewise.
	(malloc): Likewise.
	(free): Likewise.
	(realloc): Likewise.
	(malloc_fork_prepare): Likewise.
	(malloc_fork_parent): Likewise.
	(malloc_fork_child): Likewise.
	* include/rpc/auth_des.h (xdr_authdes_verf): Likewise.
	(_svcauth_des): Likewise.
	* inet/inet_lnaof.c (inet_lnaof): Likewise.
	* inet/inet_net.c (inet_network): Likewise.
	* inet/inet_netof.c (inet_netof): Likewise.
	* inet/rcmd.c (__validuser2_sa): Likewise.
	* io/fts.c (fts_open): Likewise.
	(fts_load): Likewise.
	(fts_close): Likewise.
	(fts_read): Likewise.
	(fts_children): Likewise.
	(fts_build): Likewise.
	(fts_stat): Likewise.
	(fts_sort): Likewise.
	(fts_alloc): Likewise.
	(fts_lfree): Likewise.
	* libio/fileops.c (_IO_new_file_xsputn): Likewise.
	(_IO_file_xsgetn): Likewise.
	(_IO_file_xsgetn_mmap): Likewise.
	* libio/iofopncook.c (_IO_cookie_read): Likewise.
	(_IO_cookie_write): Likewise.
	* libio/oldfileops.c (_IO_old_file_xsputn): Likewise.
	* libio/wfileops.c (_IO_wfile_xsputn): Likewise.
	* mach/msgserver.c (__mach_msg_server_timeout): Likewise.
	* malloc/obstack.c (_obstack_begin): Likewise.
	(_obstack_begin_1): Likewise.
	(_obstack_newchunk): Likewise.
	(_obstack_allocated_p): Likewise.
	(obstack_free): Likewise.
	(_obstack_memory_used): Likewise.
	* misc/getttyent.c (getttynam): Likewise.
	(getttyent): Likewise.
	(skip): Likewise.
	(value): Likewise.
	* misc/getusershell.c (initshells): Likewise.
	* misc/syslog.c (__vsyslog_chk): Likewise.
	* misc/ttyslot.c (ttyslot): Likewise.
	* nis/nis_hash.c (__nis_hash): Likewise.
	* posix/fnmatch_loop.c (FCT): Likewise.
	* posix/getconf.c (print_all): Likewise.
	(main): Likewise.
	* posix/getopt.c (exchange): Likewise.
	* posix/glob.c (globfree): Likewise.
	(prefix_array): Likewise.
	(__glob_pattern_type): Likewise.
	* resolv/arpa/nameser.h (NS_GET16): Likewise.
	(NS_GET32): Likewise.
	(NS_PUT16): Likewise.
	(NS_PUT32): Likewise.
	* resolv/gethnamaddr.c (getanswer): Likewise.
	(gethostbyname2): Likewise.
	(gethostbyaddr): Likewise.
	(_gethtent): Likewise.
	(_gethtbyname2): Likewise.
	(_gethtbyaddr): Likewise.
	* resolv/ns_print.c (dst_s_get_int16): Likewise.
	* resolv/nss_dns/dns-host.c (getanswer_r): Likewise.
	* resolv/res_init.c (__res_vinit): Likewise.
	(net_mask): Likewise.
	* resolv/res_mkquery.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_fp.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_fphex.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_size.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/test_rdwr.c (main): Likewise.
	* stdio-common/tfformat.c (matches): Likewise.
	* stdio-common/vfprintf.c (outchar): Likewise.
	(printf_unknown): Likewise.
	(buffered_vfprintf): Likewise.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Likewise.
	* stdio-common/xbug.c (AppendToBuffer): Likewise.
	(ReadFile): Likewise.
	* stdlib/qsort.c (SWAP): Likewise.
	(_quicksort): Likewise.
	* stdlib/setenv.c (__add_to_environ): Likewise.
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Likewise.
	* stdlib/strtol_l.c (__strtol_l): Likewise.
	* stdlib/tst-strtod.c (main): Likewise.
	* stdlib/tst-strtol.c (main): Likewise.
	* stdlib/tst-strtoll.c (main): Likewise.
	* string/bits/string2.h (__strcmp_cc): Likewise.
	(__strcmp_cg): Likewise.
	(__strcspn_c1): Likewise.
	(__strcspn_c2): Likewise.
	(__strcspn_c3): Likewise.
	(__strspn_c1): Likewise.
	(__strspn_c2): Likewise.
	(__strspn_c3): Likewise.
	(__strsep_1c): Likewise.
	(__strsep_2c): Likewise.
	(__strsep_3c): Likewise.
	* string/memccpy.c (__memccpy): Likewise.
	* string/stpcpy.c (__stpcpy): Likewise.
	* string/strcmp.c (strcmp): Likewise.
	* string/strrchr.c (strrchr): Likewise.
	* sysdeps/generic/sigset-cvt-mask.h (sigset_get_old_mask):
	Likewise.
	* sysdeps/mach/hurd/getcwd.c
	(_hurd_canonicalize_directory_name_internal): Likewise.
	* sysdeps/mach/i386/sysdep.h (SNARF_ARGS): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcschr.c (wcschr): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c (wcsrchr): Likewise.
	* sysdeps/x86/bits/byteswap-16.h [__GNUC__] (__bswap_16):
	Likewise, in both definitions.
	* sysdeps/x86/bits/byteswap.h (__bswap_32): Likewise, in multiple
	definitions.
	[__GNUC_PREREQ (2, 0) && !__GNUC_PREREQ (4, 3) && __WORDSIZE ==
	64] (__bswap_64): Likewise.
	* time/test_time.c (main): Likewise.
	* time/tzfile.c (__tzfile_read): Likewise.
	(__tzfile_compute): Likewise.
	* time/tzset.c (__tzset_parse_tz): Likewise.
	(tzset_internal): Likewise.
	(compute_change): Likewise.
	* wcsmbs/wcscat.c (__wcscat): Likewise.
	* wcsmbs/wcschr.c (wcschr): Likewise.
	* wcsmbs/wcschrnul.c (__wcschrnul): Likewise.
	* wcsmbs/wcscspn.c (wcscspn): Likewise.
	* wcsmbs/wcspbrk.c (wcspbrk): Likewise.
	* wcsmbs/wcsrchr.c (wcsrchr): Likewise.
	* wcsmbs/wcsspn.c (wcsspn): Likewise.
	* wcsmbs/wcsstr.c (wcsstr): Likewise.
	* wcsmbs/wmemchr.c (wmemchr): Likewise.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.
	* wcsmbs/wmemset.c (wmemset): Likewise.

2013-06-06  Joseph Myers  <joseph@codesourcery.com>

	* scripts/config.guess: Update to version 2013-05-16.
	* scripts/config.sub: Update to version 2013-04-24.
	* scripts/install-sh: Update to version 2011-11-20.07.
	* scripts/mkinstalldirs: Update to version 2009-04-28.21.
	* scripts/move-if-change: Update to version 2012-01-06 07:23.

2013-06-06   Ondřej Bílka  <neleai@seznam.cz>

	* debug/fgetws_u_chk.c: Fix leading whitespaces.
	* elf/sln.c: Likewise.
	* hurd/hurd/ioctl.h: Likewise.
	* hurd/hurdmalloc.c: Likewise.
	* hurd/xattr.c: Likewise.
	* include/shlib-compat.h: Likewise.
	* inet/ruserpass.c: Likewise.
	* libio/iofgets_u.c: Likewise.
	* libio/iofgetws_u.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* mach/msg-destroy.c: Likewise.
	* nss/nss_files/files-netgrp.c: Likewise.
	* resolv/res_data.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdlib/strtod_l.c: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sysdeps/generic/framestate.c: Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Likewise.
	* sysdeps/i386/bsd-setjmp.S: Likewise.
	* sysdeps/i386/__longjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/support.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/lshift.S: Likewise.
	* sysdeps/sparc/sparc32/__longjmp.S: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmp.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmpe.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_feq.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fge.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fgt.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fle.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_flt.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fne.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_mul.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoi.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoui.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoux.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtox.c: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Likewise.

2013-06-05  Ondřej Bílka  <neleai@seznam.cz>

	* posix/transbug.c: Remove executable mode.

2013-06-05  Joseph Myers  <joseph@codesourcery.com>

	* crypt/speeds.c: Remove trailing whitespace.
	* dlfcn/default.c: Likewise.
	* elf/ifuncdep2.c: Likewise.
	* elf/ifuncmain1.c: Likewise.
	* elf/ifuncmain1vis.c: Likewise.
	* elf/testobj.h: Likewise.
	* elf/tst-stackguard1.c: Likewise.
	* gmon/sys/gmon.h: Likewise.
	* hurd/hurdmsg.c: Likewise.
	* hurd/new-fd.c: Likewise.
	* hurd/ports-get.c: Likewise.
	* iconvdata/ibm1008_420.c: Likewise.
	* inet/tst-getni1.c: Likewise.
	* inet/tst-getni2.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* manual/libm-err-tab.pl: Likewise.
	* math/w_dremf.c: Likewise.
	* misc/ftruncate.c: Likewise.
	* posix/bug-glob2.c: Likewise.
	* posix/tst-pcre.c: Likewise.
	* posix/wait4.c: Likewise.
	* resolv/README: Likewise.
	* resolv/res_debug.h: Likewise.
	* resolv/tst-inet_ntop.c: Likewise.
	* setjmp/bug269-setjmp.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/testit.c: Likewise.
	* stdio-common/bug16.c: Likewise.
	* stdlib/random.c: Likewise.
	* sunrpc/rpcsvc/rquota.x: Likewise.
	* sysdeps/ieee754/dbl-64/powtwo.tbl: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/s_lib_version.c: Likewise.
	* sysdeps/mach/hurd/check_fds.c: Likewise.
	* sysdeps/mach/hurd/getsockname.c: Likewise.
	* sysdeps/mach/hurd/net/if_ppp.h: Likewise.
	* sysdeps/mach/hurd/recvfrom.c: Likewise.
	* sysdeps/powerpc/bits/link.h: Likewise.
	* sysdeps/powerpc/dl-procinfo.c: Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c: Likewise.
	* sysdeps/powerpc/fpu/fenv_const.c: Likewise.
	* sysdeps/powerpc/fpu/fesetenv.c: Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fpu/s_rintf.c: Likewise.
	* sysdeps/powerpc/fpu/t_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llroundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncl.S: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/s390/s390-64/sub_n.S: Likewise.
	* sysdeps/sh/dl-trampoline.S: Likewise.
	* sysdeps/sh/memset.S: Likewise.
	* sysdeps/sh/sh4/fpu/fclrexcpt.c: Likewise.
	* sysdeps/sh/strlen.S: Likewise.
	* sysdeps/sparc/sparc32/dl-trampoline.S: Likewise.
	* sysdeps/sparc/sparc32/dotmul.S: Likewise.
	* sysdeps/sparc/sparc32/memcpy.S: Likewise.
	* sysdeps/sparc/sparc32/rem.S: Likewise.
	* sysdeps/sparc/sparc32/sdiv.S: Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_neg.c: Likewise.
	* sysdeps/sparc/sparc32/strchr.S: Likewise.
	* sysdeps/sparc/sparc32/udiv.S: Likewise.
	* sysdeps/sparc/sparc32/urem.S: Likewise.
	* sysdeps/sparc/sparc64/add_n.S: Likewise.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/rawmemchr.S: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/s_frexpl.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h: Likewise.
	* sysdeps/sparc/sparc64/stpncpy.S: Likewise.
	* sysdeps/sparc/sparc64/strncmp.S: Likewise.
	* sysdeps/sparc/sparc64/strncpy.S: Likewise.
	* sysdeps/unix/bsd/times.c: Likewise.
	* sysdeps/unix/sysv/linux/a.out.h: Likewise.
	* sysdeps/unix/sysv/linux/net/if_ppp.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/posix_fadvise64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/scsi/scsi_ioctl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/brk.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/a.out.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sys/personality.h: Likewise.
	* sysdeps/x86_64/fpu/s_ceill.S: Likewise.
	* sysdeps/x86_64/fpu/s_llrintl.S: Likewise.
	* sysdeps/x86_64/strcspn.S: Likewise.

2013-06-05  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* locale/C-translit.h: Revert #include <stdint.h> because this is a
	generated file.  Regenerate properly from gen-translit.pl.
	* locale/gen-translit.pl: Add #include <stdint.h>.  This generates
	locale/C-translit.h.

2013-06-05  Andreas Schwab  <schwab@suse.de>

	[BZ #15100]
	* time/strptime_l.c (__strptime_internal): Count Sunday in a %W
	week as 6 instead of -1.
	* time/tst-strptime.c (day_tests): Add test case.

2013-06-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/math_private.h
	(libc_feholdexcept_setround_53bit): Replace with
	libc_feholdsetround_53bit.
	(libc_feupdateenv_53bit): Replace with
	libc_feresetround_53bit.
	(SET_RESTORE_ROUND_53BIT): Adjust.

2013-06-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/test-strchrnul.c: Add copyright header.

	* posix/tst-getaddrinfo4.c: Increase test timeout.

2013-06-03  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15536]
	* math/libm-test.inc (MAX_EXP): Remove
	(MIN_EXP): Define.
	(ulp): Use MIN_EXP - MANT_DIG.
	(check_ulp): Verify subnormal ulps. Only allow a range of +/- 1 ulp.

2013-05-31  Carlos O'Donell  <carlos@redhat.com>

	* po/be.po: Revert last change.
	* po/zh_CN.po: Likewise.
	* po/header.pot: Likewise.

2013-05-31  Joseph Myers  <joseph@codesourcery.com>

	* Makefile ($(common-objpfx)linkobj/libc.so): Define
	link-libc-deps to empty as target-specific variable.
	* Makerules (link-libc-args): New variable.
	(libc-for-link): Likewise.
	(link-libc-deps): Likewise.
	(lib%.so): Depend on $(link-libc-deps).  Link with
	$(link-libc-args).
	(build-module): Link with $(link-libc-args).
	(build-module-asneeded): Likewise.
	(build-module-helper-objlist): Filter out $(link-libc-deps) from
	list of objects.
	($(common-objpfx)libc.so): Define link-libc-deps to empty as
	target-specific variable.
	($(extra-modules-build:%=$(objpfx)%.so)): Depend on
	$(link-libc-deps) instead of libc.so and libc_nonshared.a.
	* crypt/Makefile ($(objpfx)libcrypt.so): Remove dependencies on
	libc.
	* debug/Makefile ($(objpfx)libSegFault.so): Remove dependencies on
	libc and ld.so.
	($(objpfx)libpcprofile.so): Likewise.
	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Remove ld.so and
	libc_nonshared.a.
	($(objpfx)libdl.so): Remove dependencies on libc and ld.so.
	* hesiod/Makefile ($(objpfx)libnss_hesiod.so): Likewise.
	* iconvdata/extra-module.mk ($(objpfx)$(mod).so): Depend on
	$(link-libc-deps).
	($(objpfx)$(mod).so): Remove dependencies on libc and ld.so.
	* locale/Makefile ($(objpfx)libBrokenLocale.so): Likewise.
	* login/Makefile ($(objpfx)libutil.so): Likewise.
	* malloc/Makefile ($(objpfx)libmemusage.so): Likewise.
	* math/Makefile ($(objpfx)libm.so): Likewise.
	* nis/Makefile ($(services:%=$(objpfx)libnss_%.so)
	$(objpfx)libnsl.so): Define libc-for-link as target-specific
	variable instead of depending directly on libc.
	* nss/Makefile ($(services:%=$(objpfx)libnss_%.so)): Likewise.
	($(objpfx)/libnss_test1.so): Change dependencies on libc to
	$(link-libc-deps).
	* resolv/Makefile ($(objpfx)libresolv.so): Remove dependencies on
	libc.
	[$(have-ssp) = yes] (LDLIBS-resolv.so): Remove variable.
	($(objpfx)libnss_dns.so): Remove dependencies on libc.
	($(objpfx)libanl.so): Likewise.
	* rt/Makefile ($(objpfx)librt.so): Remove dependencies on libc and
	ld.so.
	* stdlib/Makefile ($(objpfx)tst-putenvmod.so): Depend on
	$(link-libc-deps).
	* sysdeps/i386/fpu/Makefile: Remove file.
	* sysdeps/powerpc/fpu/Makefile [$(subdir) = math]
	($(objpfx)libm.so): Remove dependency on ld.so.

2013-05-30  Patsy Franklin  <pfrankli@redhat.com>

	[BZ # 15553]
	* nis/yp_xdr.c (XDRMAXNAME): Define.
	(XDRMAXRECORD): Define.
	(xdr_domainname): Use XDRMAXNAME.
	(xdr_mapname): Likewise.
	(xdr_peername): Likewise.
	(xdr_keydat): Use XDRMAXRECORD.
	(xdr_valdat): Likewise.

2013-05-30  Jeff Law  <law@redhat.com>

	[BZ #14256]
	* manual/errno.texi (ESTALE): Update to account for more than
	just NFS file systems.
	* sysdeps/gnu/errlist.c: Regenerated.

2013-05-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15465]
	* elf/Makefile (tests): Add tst-null-argv.
	(modules-names):  Add tst-null-argv-lib.
	($(objpfx)tst-null-argv): Depend on tst-null-argv-lib.so.
	(tst-null-argv-ENV): Set environment for tst-null-argv.
	* sysdeps/generic/ldsodefs.h (DSO_FILENAME): New macro.
	(RTLD_PROGNAME): New macro.
	* elf/tst-null-argv.c: New test case.
	* elf/tst-null-argv-lib.c: Library for test case.
	* elf/dl-conflict.c (_dl_resolve_conflicts): Use DSO_FILENAME.
	* elf/dl-deps.c (_dl_map_object_deps): Likewise.
	* elf/dl-error.c (_dl_signal_error): Use RTLD_PROGNAME.
	* elf/dl-fini.c (_dl_fini): Use DSO_FILENAME.
	* elf/dl-init.c (call_init): Likewise.
	(_dl_init): Likewise.
	* elf/dl-load.c (print_search_path): Likewise.
	(_dl_map_object): Likewise.
	* elf/dl-lookup.c (do_lookup_x): Likewise.
	(add_dependency): Likewise.
	(_dl_lookup_symbol_x): Likewise.
	(_dl_debug_bindings): Likewise.
	* elf/dl-open.c (_dl_show_scope): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.
	* elf/dl-version.c (match_symbol): Likewise.
	(_dl_check_map_versions): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	(print_unresolved): Use RTLD_PROGNAME.
	(print_missing_version): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c
	(__process_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.

2013-05-28  Carlos O'Donell  <carlos@redhat.com>

	* po/be.po: Add descriptive title.
	* po/zh_CN.po: Likewise.
	* po/header.pot: Likewise.

2013-05-28  Mike Frysinger  <vapier@gentoo.org>

	* locale/programs/locarchive.c (create_archive): Inlucde fname in
	error message.
	(enlarge_archive): Likewise.

2013-05-28  Ben North  <ben@redfrontdoor.org>

	* manual/arith.texi (frexp): It is the magnitude of the return
	value which lies in [0.5, 1), not the return value itself.

2013-05-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-26  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/bug26.c (main): Correct fscanf template.

	* sysdeps/mach/hurd/dl-sysdep.c (_dl_sysdep_start:go): Don't
	declare _dl_skip_args.

	* sysdeps/mach/hurd/i386/init-first.c (_dl_non_dynamic_init):
	Don't declare.

	* manual/platform.texi: Add missing @end deftypefun.

2013-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15529]
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Set high
	bit of mantissa of 2^16382.
	* math/libm-test.inc (hypot_test_data): Add more tests.

	* math/libm-test.inc: Add drem and pow10 to list of tested
	functions.
	(pow10_test): New function.
	(drem_test): Likewise.
	(drem_test_tonearest): Likewise.
	(drem_test_towardzero): Likewise.
	(drem_test_downward): Likewise.
	(drem_test_upward): Likewise.
	(main): Call the new functions.

	* math/libm-test.inc (finite_test_data): Remove.
	(finite_test): Run tests from isfinite_test_data.
	(gamma_test_data): Remove.
	(gamma_test): Run tests from lgamma_test_data.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* manual/platform.texi: Add PowerPC PPR function set documentation.
	* sysdeps/powerpc/sys/platform/ppc.h: Add PowerPC PPR set function
	implementation.

2013-05-24  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (MAX_EXP): Define.
	(ULPDIFF): Define.
	(ulp): New function.
	(check_float_internal): Use ULPDIFF.
	(cpow_test): Disable failing test.
	(check_ulp): Test ulp() implemetnation.
	(main): Call check_ulp before starting tests.

2013-05-24  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (generate_testfile): Do not handle
	START_DATA and END_DATA.
	* math/libm-test.inc (acos_test_data): Do not use START_DATA and
	END_DATA.
	(acos_tonearest_test_data): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_upward_test_data): Likewise.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asin_tonearest_test_data): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_downward_test_data): Likewise.
	(asin_upward_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cabs_test_data): Likewise.
	(cacos_test_data): Likewise.
	(cacosh_test_data): Likewise.
	(carg_test_data): Likewise.
	(casin_test_data): Likewise.
	(casinh_test_data): Likewise.
	(catan_test_data): Likewise.
	(catanh_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(ccos_test_data): Likewise.
	(ccosh_test_data): Likewise.
	(ceil_test_data): Likewise.
	(cexp_test_data): Likewise.
	(cimag_test_data): Likewise.
	(clog_test_data): Likewise.
	(clog10_test_data): Likewise.
	(conj_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cos_test_data): Likewise.
	(cos_tonearest_test_data): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_upward_test_data): Likewise.
	(cosh_test_data): Likewise.
	(cosh_tonearest_test_data): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_upward_test_data): Likewise.
	(cpow_test_data): Likewise.
	(cproj_test_data): Likewise.
	(creal_test_data): Likewise.
	(csin_test_data): Likewise.
	(csinh_test_data): Likewise.
	(csqrt_test_data): Likewise.
	(ctan_test_data): Likewise.
	(ctan_tonearest_test_data): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctanh_test_data): Likewise.
	(ctanh_tonearest_test_data): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_upward_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_tonearest_test_data): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_upward_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(fabs_test_data): Likewise.
	(fdim_test_data): Likewise.
	(finite_test_data): Likewise.
	(floor_test_data): Likewise.
	(fma_test_data): Likewise.
	(fma_towardzero_test_data): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_upward_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(gamma_test_data): Likewise.
	(hypot_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(isfinite_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(ldexp_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(lrint_test_data): Likewise.
	(lrint_tonearest_test_data): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_upward_test_data): Likewise.
	(llrint_test_data): Likewise.
	(llrint_tonearest_test_data): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_upward_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(logb_test_data): Likewise.
	(logb_downward_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.
	(modf_test_data): Likewise.
	(nearbyint_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(pow_test_data): Likewise.
	(pow_tonearest_test_data): Likewise.
	(pow_towardzero_test_data): Likewise.
	(pow_downward_test_data): Likewise.
	(pow_upward_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remainder_tonearest_test_data): Likewise.
	(remainder_towardzero_test_data): Likewise.
	(remainder_downward_test_data): Likewise.
	(remainder_upward_test_data): Likewise.
	(remquo_test_data): Likewise.
	(rint_test_data): Likewise.
	(rint_tonearest_test_data): Likewise.
	(rint_towardzero_test_data): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_upward_test_data): Likewise.
	(round_test_data): Likewise.
	(scalb_test_data): Likewise.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sin_test_data): Likewise.
	(sin_tonearest_test_data): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_upward_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sinh_tonearest_test_data): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_upward_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(tan_test_data): Likewise.
	(tan_tonearest_test_data): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_upward_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(trunc_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	(significand_test_data): Likewise.

	* math/gen-libm-test.pl (@functions): Remove variable.
	(generate_testfile): Don't handle START and END lines.
	* math/libm-test.inc (START): New macro.
	(END): Likewise.
	(END_COMPLEX): Likewise.
	(acos_test): Use END macro without arguments.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Use END_COMPLEX macro without arguments.
	(cacosh_test): Likewise.
	(carg_test): Use END macro without arguments.
	(casin_test): Use END_COMPLEX macro without arguments.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Use END macro without arguments.
	(ccos_test): Use END_COMPLEX macro without arguments.
	(ccosh_test): Likewise.
	(ceil_test): Use END macro without arguments.
	(cexp_test): Use END_COMPLEX macro without arguments.
	(cimag_test): Use END macro without arguments.
	(clog_test): Use END_COMPLEX macro without arguments.
	(clog10_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Use END macro without arguments.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Use END_COMPLEX macro without arguments.
	(cproj_test): Likewise.
	(creal_test): Use END macro without arguments.
	(csin_test): Use END_COMPLEX macro without arguments.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Use END macro without arguments.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fabs_test): Likewise.
	(fdim_test): Likewise.
	(finite_test): Likewise.
	(floor_test): Likewise.
	(fma_test): Likewise.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(gamma_test): Likewise.
	(hypot_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(ldexp_test): Likewise.
	(lgamma_test): Likewise.
	(lrint_test): Likewise.
	(lrint_test_tonearest): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test): Likewise.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test): Likewise.
	(logb_test_downward): Likewise.
	(lround_test): Likewise.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nearbyint_test): Likewise.
	(nextafter_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(remainder_test_tonearest): Likewise.
	(remainder_test_towardzero): Likewise.
	(remainder_test_downward): Likewise.
	(remainder_test_upward): Likewise.
	(remquo_test): Likewise.
	(rint_test): Likewise.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward): Likewise.
	(round_test): Likewise.
	(scalb_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(signbit_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(trunc_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.
	(significand_test): Likewise.

2013-05-24  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #15381]
	* libio/genops.c (_IO_no_init): Initialize wide struct info.

2013-05-23  Edjunior Machado  <emachado@linux.vnet.ibm.com>

	[BZ #14894]
	* sysdeps/powerpc/sys/platform/ppc.h: Add __ppc_yield,
	__ppc_mdoio and __ppc_mdoom.
	* manual/platform.texi: Document new functions __ppc_yield,
	__ppc_mdoio and __ppc_mdoom.

2013-05-22  Carlos O'Donell  <carlos@redhat.com>

	* elf/ldconfig.c (is_hwcap_platform): Make comments full setences.
	(main): Mention "tls" pseudo-hwcap is legacy.
	* elf/dl-hwcaps.c (_dl_important_hwcaps): Correct rounding comment.

2013-05-22  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Output only string of
	arguments as text for test name, not full call or descriptions of
	tests for extra outputs.
	(generate_testfile): Do not pass function name to parse_args.
	Generate this_func variable from START.
	* math/libm-test.inc (struct test_f_f_data): Rename test_name
	field to arg_str.
	(struct test_ff_f_data): Likewise.
	(test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Likewise.  Remove field extra_name.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Rename test_name field to arg_str.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_fFF_11_data): Likewise.  Remove fields extra1_name
	and extra2_name.
	(COMMON_TEST_SETUP): New macro.
	(EXTRA_OUTPUT_TEST_SETUP): Likewise.
	(COMMON_TEST_CLEANUP): Likewise.
	(EXTRA_OUTPUT_TEST_CLEANUP): Likewise.
	(RUN_TEST_f_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_f): Update call to RUN_TEST_f_f.
	(RUN_TEST_2_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_2_f): Update call to RUN_TEST_2_f.
	(RUN_TEST_fff_f): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fff_f): Update call to RUN_TEST_fff_f.
	(RUN_TEST_c_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_c_f): Update call to RUN_TEST_c_f.
	(RUN_TEST_f_f1): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_f1): Update call to RUN_TEST_f_f1.
	(RUN_TEST_fF_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fF_f1): Update call to RUN_TEST_fF_f1.
	(RUN_TEST_fI_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fI_f1): Update call to RUN_TEST_fI_f1.
	(RUN_TEST_ffI_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_ffI_f1): Update call to RUN_TEST_ffI_f1.
	(RUN_TEST_c_c): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_c_c): Update call to RUN_TEST_c_c.
	(RUN_TEST_cc_c): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_cc_c): Update call to RUN_TEST_cc_c.
	(RUN_TEST_f_i): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_i): Update call to RUN_TEST_f_i.
	(RUN_TEST_f_i_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_f_i_tg): Update call to RUN_TEST_f_i_tg.
	(RUN_TEST_ff_i_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_ff_i_tg): Update call to RUN_TEST_ff_i_tg.
	(RUN_TEST_f_b): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_b): Update call to RUN_TEST_f_b.
	(RUN_TEST_f_b_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_f_b_tg): Update call to RUN_TEST_f_b_tg.
	(RUN_TEST_f_l): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_l): Update call to RUN_TEST_f_l.
	(RUN_TEST_f_L): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_L): Update call to RUN_TEST_f_L.
	(RUN_TEST_fFF_11): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fFF_11): Update call to RUN_TEST_fFF_11.

2013-05-22  Edjunior Barbosa Machado  <emachado@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/bits/siginfo.h (siginfo_t): Add si_addr_lsb
	to _sifields.sigfault.
	(si_addr_lsb): Define new macro.
	(BUS_MCEERR_AR, BUS_MCEERR_AO): Define new values.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h: Likewise.

2013-05-03  Carlos O'Donell  <carlos at redhat.com>

	[BZ #15441]
	* intl/dcigettext.c (DCIGETTEXT): Skip translating if _nl_find_msg
	returns -1.
	(_nl_find_msg): Return -1 if recursive call returned -1. If newmem is
	null return -1.
	* intl/loadmsgcat.c (_nl_load_domain): If _nl_find_msg returns -1 abort
	loading the domain.

2013-05-22  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Do not include expected
	result in test name.
	* sysdeps/i386/fpu/libm-test-ulps: Update test names.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Sort function entries.

	* benchtests/Makefile (bench): Add asin, acos, sinh, cosh,
	tanh, asinh, acosh, atanh.
	* benchtests/acos-inputs: New file.
	* benchtests/acosh-inputs: New file.
	* benchtests/asin-inputs: New file.
	* benchtests/asinh-inputs: New file.
	* benchtests/atanh-inputs: New file.
	* benchtests/cosh-inputs: New file.
	* benchtests/log-inputs: New file.
	* benchtests/sinh-inputs: New file.
	* benchtests/tanh-inputs: New file.

2013-05-21  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #15339]
	* posix/tst-getaddrinfo4.c: New test.
	* posix/Makefile (tests): Add it.

2013-05-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15339]
	* nss/getXXbyYY_r.c (REENTRANT_NAME): Set NETDB_INTERNAL only
	when no services were used.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Set h_errno.
	Return EAI_SYSTEM if h_errno is NETDB_INTERNAL.

2013-05-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15014]
	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME))
	[HANDLE_DIGITS_DOTS]: Set any_service when digits-dots parsing was
	successful.
	* nss/digits_dots.c (__nss_hostname_digits_dots): Remove
	redundant variable declarations and reallocation of buffer when
	parsing as IPv6 address.  Always set NSS status when called from
	reentrant functions.  Use NETDB_INTERNAL instead of TRY_AGAIN when
	buffer too small.  Correct computation of needed size.
	* nss/Makefile (tests): Add test-digits-dots.
	* nss/test-digits-dots.c: New test.

2013-05-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Remove instructions for adding
	benchmark tests.
	* benchtests/README: New file to explain how to execute and
	enhance the benchmark tests.

2013-05-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15493]
	* setjmp/Makefile (tests): Add tst-sigsetjmp.
	* setjmp/tst-sigsetjmp.c: New test.

2013-05-20  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S (memset): New implementation.
	(__bzero): Likewise.
	(__memset_tail): New function.

2013-05-20  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Add
	__memcpy_sse2_unaligned ifunc selection.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Add memcpy-sse2-unaligned.S.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add: __memcpy_sse2_unaligned.

2013-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15490]
	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Use
	math_force_eval before restoring floating-point envrionment.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c (__nearbyintf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Include
	<math_private.h>.
	(__nearbyintl): Use math_force_eval before restoring
	floating-point environment.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c (__nearbyintl): Likewise.

	* math/gen-libm-test.pl (special_functions): Remove.
	(parse_args): Don't handle TEST_extra.  Handle functions with no
	return value.
	* math/libm-test.inc (struct test_sincos_data): Replace with
	struct test_fFF_11_data.
	(RUN_TEST_sincos): Replace with RUN_TEST_fFF_11.
	(RUN_TEST_LOOP_sincos): Replace with RUN_TEST_LOOP_fFF_11.
	(sincos_test_data): Change element type to struct
	test_fFF_11_data.  Use TEST_fFF_11 instead of TEST_extra.
	(sincos_test): Use RUN_TEST_LOOP_fFF_11 instead of
	RUN_TEST_LOOP_sincos.
	* math/README.libm-test: Don't mention special handling of
	individual functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update names of sincos tests.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/gen-libm-test.pl (get_variable): Remove function.
	(parse_args): Don't show pointer parameters to call in test
	names.  Use "extra output N" in test names for extra outputs
	rather than naming variables.

2013-05-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15488]
	* math/complex.h [__USE_ISOC11 && __GNUC_PREREQ (4, 7) &&
	__NO_LONG_DOUBLE_MATH] (CMPLXL): Define macro.
	* math/tst-CMPLX.c (do_test) [NO_LONG_DOUBLE]: Do not disable long
	double tests.
	* make/tst-CMPLX2.c [NO_LONG_DOUBLE] (check_long_double): Do not
	disable.
	(do_test) [NO_LONG_DOUBLE]: Do not disable call to
	check_long_double.

	* math/gen-libm-test.pl (@tests): Remove variable.
	($count): Likewise.
	(new_test): Remove function.
	(show_exceptions): New function.
	(special_functions): Use show_exceptions instead of new_test.
	(parse_args): Likewise.
	(generate_testfile): Pass only function name in generated call to
	print_max_error or print_complex_max_error.
	(get_ulps): Do not handle complex tests specially.
	(output_test): Rename to ...
	(get_all_ulps_for_test): ... this.  Return a string rather than
	printing to a file.  Require ulps to be present.
	(output_ulps): Generate arrays rather than #defines.
	* math/libm-test.inc: Move down #include of "libm-test-ulps.h".
	(struct ulp_data): New type.
	(BUILD_COMPLEX_ULP): Remove macro.
	(compare_ulp_data): New function.
	(find_ulps): Likewise.
	(find_test_ulps): Likewise.
	(find_function_ulps): Likewise.
	(find_complex_function_ulps): Likewise.
	(print_max_error): Determine allowed ulps using
	find_function_ulps.
	(print_complex_max_error): Determine allowed ulps using
	find_complex_function_ulps.
	(check_float_internal): Determine max ulps using find_test_ulps.
	(check_float): Do not take max_ulp parameter.  Update call to
	check_float_internal.
	(check_complex): Likewise.
	(check_int): Do not take max_ulp parameter.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(struct test_f_f_data): Remove max_ulp field.
	(struct test_ff_f_data): Likewise.
	(struct test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Remove max_ulp and extra_ulp fields.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Remove max_ulp field.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_sincos_data): Likewise.
	(RUN_TEST_f_f): Do not handle ulps.
	(RUN_TEST_LOOP_f_f): Likewise.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_LOOP_2_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_LOOP_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_LOOP_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_LOOP_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_LOOP_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_LOOP_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_LOOP_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_LOOP_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_LOOP_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_LOOP_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_LOOP_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_LOOP_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_LOOP_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_LOOP_f_L): Likewise.
	(RUN_TEST_sincos): Likewise.
	(RUN_TEST_LOOP_sincos): Likewise.

2013-05-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15480]
	[BZ #15485]
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder): For
	main case of finite arguments, set rounding mode to FE_TONEAREST
	and discard exceptions.
	* math/libm-test.inc (remainder_test_data): Disallow "inexact"
	exceptions.
	(remainder_tonearest_test_data): New variable.
	(remainder_test_tonearest): New function.
	(remainder_towardzero_test_data): New variable.
	(remainder_test_towardzero): New function.
	(remainder_downward_test_data): New variable.
	(remainder_test_downward): New function.
	(remainder_upward_test_data): New variable.
	(remainder_test_upward): New function.
	(main): Call the new test functions.

	* math/libm-test.inc (struct test_f_f1_data): Remove field
	extra_init.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(RUN_TEST_f_f1): Remove argument EXTRA_INIT.  Initialize EXTRA_VAR
	based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_f_f1): Update call to RUN_TEST_f_f1.
	(RUN_TEST_fF_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_fF_f1): Update call to RUN_TEST_fF_f1.
	(RUN_TEST_fI_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_fI_f1): Update call to RUN_TEST_fI_f1.
	(RUN_TEST_ffI_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_ffI_f1): Update call to RUN_TEST_ffI_f1.
	* math/gen-libm-test.pl (parse_args): Don't output initializers
	for extra output values.

	* math/libm-test.inc (check_int): Expect result to be exactly
	equal to expected value and do not handle ulps.
	(check_long): Likewise.
	(check_longlong): Likewise.

	* math/libm-test.inc (ceil_test_data): Test for "inexact"
	exceptions.
	(cimag_test_data): Likewise.
	(conj_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cproj_test_data): Likewise.
	(creal_test_data): Likewise.
	(fabs_test_data): Likewise.
	(fdim_test_data): Likewise.
	(finite_test_data): Likewise.
	(floor_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(isfinite_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(ldexp_test_data): Likewise.
	(lrint_test_data): Likewise.
	(lrint_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_tonearest_test_data): Test for "inexact" exceptions.
	(lrint_tonearest_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_tonearest_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_tonearest_test_data) [TEST_LDOUBLE]: Use "L" suffix on that
	test input.
	(lrint_towardzero_test_data): Test for "inexact" exceptions.
	(lrint_towardzero_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_towardzero_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_towardzero_test_data) [TEST_LDOUBLE]: Use "L" suffix on
	that test input.
	(lrint_downward_test_data): Test for "inexact" exceptions.
	(lrint_downward_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_downward_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_downward_test_data) [TEST_LDOUBLE]: Use "L" suffix on that
	test input.
	(lrint_upward_test_data): Test for "inexact" exceptions.
	(lrint_upward_test_data) [TEST_LDOUBLE]: Use "L" suffix on one
	test input.
	(llrint_test_data): Test for "inexact" exceptions.
	(llrint_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_tonearest_test_data): Test for "inexact" exceptions.
	(llrint_tonearest_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_towardzero_test_data): Test for "inexact" exceptions.
	(llrint_towardzero_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_downward_test_data): Test for "inexact" exceptions.
	(llrint_downward_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_upward_test_data): Test for "inexact" exceptions.
	(logb_test_data): Likewise.
	(logb_downward_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(significand_test_data): Likewise.

2013-05-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15424]
	* benchtests/bench-modf.c (struct args): Mark arg0 as
	volatile.
	* scripts/bench.pl: Mark members of struct args as volatile.

2013-05-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ # 15497]
	* sysdeps/powerpc/fpu/e_hypot.c (GET_TWO_FLOAT_WORD): Fix test for
	negative infinity on POWER6 or lower.
	* sysdeps/powerpc/fpu/e_hypotf.c (GET_TWO_FLOAT_WORD): Likewise.

2013-05-16  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #15442]
	* soft-fp/op-common.h (_FP_FRAC_SNANP): New macro.
	(_FP_FRAC_SNANP_SEMIRAW): Likewise.
	(_FP_UNPACK_CANONICAL): Use _FP_FRAC_SNANP.
	(_FP_CHECK_SIGNAN_SEMIRAW): Use _FP_FRAC_SNANP_SEMIRAW.
	(_FP_SETQNAN): New macro.
	(_FP_SETQNAN_SEMIRAW): Likewise.
	(_FP_PACK_SEMIRAW): Use _FP_SETQNAN.
	(_FP_PACK_CANONICAL): Use _FP_SETQNAN.
	(_FP_ISSIGNAN): Use _FP_FRAC_SNANP.
	(FP_EXTEND): Use _FP_FRAC_SNANP.
	(FP_TRUNC): Use _FP_SETQNAN_SEMIRAW.
	* soft-fp/testit.c (gen_special_double): Take _FP_QNANNEGATEDP
	into account.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h (_FP_QNANNEGATEDP):
	New macro.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h (_FP_QNANNEGATEDP):
	Likewise.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (atanh_test_data): Use ERRNO_ERANGE together
	with DIVIDE_BY_ZERO_EXCEPTION.
	(gamma_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log2_test_data): Likewise.
	(tgamma_test_data): Likewise.

	* math/libm-test.inc (acos_test): Don't test for ENOSYS error.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Likewise.
	(cacosh_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Likewise.
	(ccos_test): Likewise.
	(ccosh_test): Likewise.
	(cexp_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fmod_test): Likewise.
	(gamma_test): Likewise.
	(hypot_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(lgamma_test): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test_downward): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(remquo_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.

	* math/gen-libm-test.pl (adjust_arg): Remove function.
	(special_function): Remove argument $in_func.  Only handle
	generating output for tables of tests, not inside functions.
	(parse_args): Likewise.
	(generate_testfile): Remove variable $in_func.  Update call to
	parse_args.
	* math/libm-test.inc (PLUS_ZERO_INIT): Rename macro to plus_zero.
	(MINUS_ZERO_INIT): Rename macro to minus_zero.
	(PLUS_INFTY_INIT): Rename macro to plus_infty.
	(MINUS_INFTY_INIT): Rename macro to minus_infty.
	(QNAN_VALUE_INIT): Rename macro to qnan_value.
	(MAX_VALUE_INIT): Rename macro to max_value.
	(MIN_VALUE_INIT): Rename macro to min_value.
	(MIN_SUBNORM_VALUE_INIT): Rename macro to min_subnorm_value.
	(plus_zero): Remove variable.
	(minus_zero): Likewise.
	(plus_infty): Likewise.
	(minus_infty): Likewise.
	(qnan_value): Likewise.
	(max_value): Likewise.
	(min_value): Likewise.
	(min_subnorm_value): Likewise.

2013-05-16  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* crypt/sha512-block.c: Add missing #include <stdint.h> due to
	uint64_t or uint32_t usage.
	* crypt/sha256-block.c: Likewise.
	* crypt/sha256-crypt.c: Likewise.
	* crypt/sha256.c: Likewise.
	* crypt/sha512-block.c: Likewise.
	* crypt/sha512-crypt.c: Likewise.
	* crypt/sha512.c: Likewise.
	* debug/backtrace-tst.c: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* elf/cache.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-misc.c: Likewise.
	* elf/dl-profile.c: Likewise.
	* elf/dl-support.c: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/dummy-repertoire.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/cp737.h: Likewise.
	* iconvdata/cp775.h: Likewise.
	* iconvdata/ibm1008.h: Likewise.
	* iconvdata/ibm1025.h: Likewise.
	* iconvdata/ibm1046.h: Likewise.
	* iconvdata/ibm1097.h: Likewise.
	* iconvdata/ibm1112.h: Likewise.
	* iconvdata/ibm1122.h: Likewise.
	* iconvdata/ibm1123.h: Likewise.
	* iconvdata/ibm1124.h: Likewise.
	* iconvdata/ibm1129.h: Likewise.
	* iconvdata/ibm1130.h: Likewise.
	* iconvdata/ibm1132.h: Likewise.
	* iconvdata/ibm1133.h: Likewise.
	* iconvdata/ibm1137.h: Likewise.
	* iconvdata/ibm1140.h: Likewise.
	* iconvdata/ibm1141.h: Likewise.
	* iconvdata/ibm1142.h: Likewise.
	* iconvdata/ibm1143.h: Likewise.
	* iconvdata/ibm1144.h: Likewise.
	* iconvdata/ibm1145.h: Likewise.
	* iconvdata/ibm1146.h: Likewise.
	* iconvdata/ibm1147.h: Likewise.
	* iconvdata/ibm1148.h: Likewise.
	* iconvdata/ibm1149.h: Likewise.
	* iconvdata/ibm1153.h: Likewise.
	* iconvdata/ibm1154.h: Likewise.
	* iconvdata/ibm1155.h: Likewise.
	* iconvdata/ibm1156.h: Likewise.
	* iconvdata/ibm1157.h: Likewise.
	* iconvdata/ibm1158.h: Likewise.
	* iconvdata/ibm1160.h: Likewise.
	* iconvdata/ibm1161.h: Likewise.
	* iconvdata/ibm1162.h: Likewise.
	* iconvdata/ibm1163.h: Likewise.
	* iconvdata/ibm1164.h: Likewise.
	* iconvdata/ibm1166.h: Likewise.
	* iconvdata/ibm1167.h: Likewise.
	* iconvdata/ibm12712.h: Likewise.
	* iconvdata/ibm1390.h: Likewise.
	* iconvdata/ibm1399.h: Likewise.
	* iconvdata/ibm16804.h: Likewise.
	* iconvdata/ibm4517.h: Likewise.
	* iconvdata/ibm4899.h: Likewise.
	* iconvdata/ibm4909.h: Likewise.
	* iconvdata/ibm4971.h: Likewise.
	* iconvdata/ibm5347.h: Likewise.
	* iconvdata/ibm803.h: Likewise.
	* iconvdata/ibm856.h: Likewise.
	* iconvdata/ibm901.h: Likewise.
	* iconvdata/ibm902.h: Likewise.
	* iconvdata/ibm9030.h: Likewise.
	* iconvdata/ibm9066.h: Likewise.
	* iconvdata/ibm921.h: Likewise.
	* iconvdata/ibm922.h: Likewise.
	* iconvdata/ibm9448.h: Likewise.
	* iconvdata/isiri-3342.h: Likewise.
	* iconvdata/jis0201.h: Likewise.
	* include/link.h: Likewise.
	* include/netdb.h: Likewise.
	* inet/check_native.c: Likewise.
	* inet/check_pf.c: Likewise.
	* inet/getipv4sourcefilter.c: Likewise.
	* inet/getnameinfo.c: Likewise.
	* inet/getsourcefilter.c: Likewise.
	* inet/htonl.c: Likewise.
	* inet/setipv4sourcefilter.c: Likewise.
	* inet/setsourcefilter.c: Likewise.
	* inet/test-inet6_opt.c: Likewise.
	* inet/tst-network.c: Likewise.
	* locale/C-collate.c: Likewise.
	* locale/C-ctype.c: Likewise.
	* locale/C-time.c: Likewise.
	* locale/C-translit.h: Likewise.
	* locale/loadarchive.c: Likewise.
	* locale/programs/3level.h: Likewise.
	* locale/programs/charmap.c: Likewise.
	* locale/programs/charmap.h: Likewise.
	* locale/programs/ld-address.c: Likewise.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-measurement.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-telephone.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* locale/programs/linereader.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/locarchive.c: Likewise.
	* locale/programs/locfile.h: Likewise.
	* locale/programs/repertoire.c: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* locale/programs/simple-hash.h: Likewise.
	* malloc/memusage.c: Likewise.
	* malloc/memusagestat.c: Likewise.
	* nis/nis_defaults.c: Likewise.
	* nis/nis_hash.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_xdr.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/hstcache.c: Likewise.
	* nscd/nscd_gethst_r.c: Likewise.
	* nscd/nscd_getserv_r.c: Likewise.
	* nscd/nscd_helper.c: Likewise.
	* nscd/servicescache.c: Likewise.
	* nss/makedb.c: Likewise.
	* nss/nss_db/db-XXX.c: Likewise.
	* nss/nss_db/db-initgroups.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-parse.c: Likewise.
	* posix/bug-regex5.c: Likewise.
	* posix/fnmatch_loop.c: Likewise.
	* posix/regcomp.c: Likewise.
	* posix/regexec.c: Likewise.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.
	* posix/tst-rfc3484.c: Likewise.
	* resolv/nss_dns/dns-canon.c: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/tst-aton.c: Likewise.
	* stdlib/cxa_atexit.c: Likewise.
	* stdlib/cxa_finalize.c: Likewise.
	* stdlib/gen-fpioconst.c: Likewise.
	* stdlib/strtol_l.c: Likewise.
	* string/tst-endian.c: Likewise.
	* sunrpc/auth_des.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/generic/memusage.h: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/test-gettimebase.c: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/getipv4sourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/getsourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/netlinkaccess.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/setipv4sourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/setsourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/arch_prctl.c: Likewise.
	* sysdeps/x86_64/dl-tls.h: Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h: Likewise.
	* time/alt_digit.c: Likewise.
	* time/era.c: Likewise.
	* wcsmbs/tst-c16c32-1.c: Likewise.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_sincos_data): New type.
	(RUN_TEST_LOOP_sincos): New macro.
	(sincos_test_data): New variable.
	(sincos_test): Run tests with RUN_TEST_LOOP_sincos.

2013-05-16  Richard Henderson  <rth@redhat.com>

	* math/atest-exp2.c (LIMB64): New macro.
	(CONSTSZ): New macro.
	(mp_exp1, mp_exp_m1, mp_log2): New variables.
	(hexdig): Move ...
	(print_mpn_fp): ... to function scope.
	(read_mpn_hex): Remove.
	(get_log2): Remove.
	(exp2_mpn): Use mp_log2.
	(main): Use mp_exp1.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: Remove comment about not testing "inexact"
	exceptions.
	(INEXACT_EXCEPTION): New macro.
	(NO_INEXACT_EXCEPTION): Likewise.
	(INVALID_EXCEPTION_OK): Update value.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(test_exceptions): Handle testing "inexact" exceptions.
	(nearbyint_test_data): Use NO_INEXACT_EXCEPTION on all tests.
	(rint_test_data): Use NO_INEXACT_EXCEPTION and INEXACT_EXCEPTION.
	(rint_test_data) [LDBL_MANT_DIG <= 100]: Disable some tests.
	(rint_tonearest_test_data): Use NO_INEXACT_EXCEPTION and
	INEXACT_EXCEPTION.
	(rint_towardzero_test_data): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_upward_test_data): Likewise.

	* math/libm-test.inc (exp_test_data): Use ERRNO_ERANGE together
	with OVERFLOW_EXCEPTION.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(pow_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(yn_test_data): Remove duplicate test of overflow.

	* math/libm-test.inc (struct test_cc_c_data): New type.
	(RUN_TEST_LOOP_cc_c): New macro.
	(cpow_test_data): New variable.
	(cpow_test): Run tests with RUN_TEST_LOOP_cc_c.

	* math/libm-test.inc (struct test_f_L_data): New type.
	(RUN_TEST_LOOP_f_L): New macro.
	(llrint_test_data): New variable.
	(llrint_test): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_tonearest_test_data): New variable.
	(llrint_test_tonearest): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_towardzero_test_data): New variable.
	(llrint_test_towardzero): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_downward_test_data): New variable.
	(llrint_test_downward): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_upward_test_data): New variable.
	(llrint_test_upward): Run tests with RUN_TEST_LOOP_f_L.
	(llround_test_data): New variable.
	(llround_test): Run tests with RUN_TEST_LOOP_f_L.

2013-05-13  Peter Collingbourne  <pcc@google.com>

	* math/atest-exp2.c (get_log2): Remove const attribute.

2013-05-15  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_f_l_data): New type.
	(RUN_TEST_LOOP_f_l): New macro.
	(lrint_test_data): New variable.
	(lrint_test): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_tonearest_test_data): New variable.
	(lrint_test_tonearest): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_towardzero_test_data): New variable.
	(lrint_test_towardzero): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_downward_test_data): New variable.
	(lrint_test_downward): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_upward_test_data): New variable.
	(lrint_test_upward): Run tests with RUN_TEST_LOOP_f_l.
	(lround_test_data): New variable.
	(lround_test): Run tests with RUN_TEST_LOOP_f_l.

2013-05-15  Peter Collingbourne  <pcc@google.com>

	* sysdeps/x86_64/fpu/math_private.h (MOVQ): New macro.
	(EXTRACT_WORDS64) Use where appropriate.
	(INSERT_WORDS64) Likewise.

	* sysdeps/x86_64/fpu/multiarch/s_fma.c (__fma_fma4): Replace xm
	constraints with x constraints.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c (__fmaf_fma4): Likewise.

	* malloc/obstack.c (_obstack_compat): Add initializer.

2013-05-15  Edjunior Machado  <emachado@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (siginfo_t): Remove
	si_trapno and add si_addr_lsb to _sifields.sigfault.
	(si_trapno): Remove macro.
	(si_addr_lsb): Define new macro.
	(BUS_MCEERR_AR, BUS_MCEERR_AO): Define new values.

2013-05-15  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (llrint_test): Consistently use TEST_f_L
	instead of TEST_f_l.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(llround_test): Likewise.

	* math/libm-test.inc (struct test_f_i_data): Add comment.
	(RUN_TEST_LOOP_f_b): New macro.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(finite_test_data): New variable.
	(finite_test): Run tests with RUN_TEST_LOOP_f_b.
	(isfinite_test_data): New variable.
	(isfinite_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isinf_test_data): New variable.
	(isinf_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isnan_test_data): New variable.
	(isnan_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isnormal_test_data): New variable.
	(isnormal_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(issignaling_test_data): New variable.
	(issignaling_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(signbit_test_data): New variable.
	(signbit_test): Run tests with RUN_TEST_LOOP_f_b_tg.

	* math/libm-test.inc (acos_test_data): Use ERRNO_EDOM together
	with INVALID_EXCEPTION.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(atanh_test_data): Likewise.
	(fmod_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	* math/libm-test.inc (test_single_errno) [TEST_INLINE]: Disable
	function contents.

	* math/libm-test.inc (struct test_ff_i_data): New type.
	(RUN_TEST_LOOP_ff_i_tg): New macro.
	(isgreater_test_data): New variable.
	(isgreater_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isgreaterequal_test_data): New variable.
	(isgreaterequal_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isless_test_data): New variable.
	(isless_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(islessequal_test_data): New variable.
	(islessequal_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(islessgreater_test_data): New variable.
	(islessgreater_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isunordered_test_data): New variable.
	(isunordered_test): Run tests with RUN_TEST_LOOP_ff_i_tg.

2013-05-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-05-14  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (RUN_TEST_LOOP_2_f): Fix whitespace.

	* math/libm-test.inc (struct test_fF_f1_data): Change type of
	extra_test to int.
	(struct test_f_i_data): Change type of max_ulp to int.

	* math/libm-test.inc (test_ffI_f1_data): New type.
	(RUN_TEST_LOOP_ffI_f1): New macro.
	(remquo_test_data): New variable.
	(remquo_test): Run tests with RUN_TEST_LOOP_ffI_f1.

	* setjmp/tst-setjmp-fp.c: New file.
	* setjmp/Makefile (tests): Add tst-setjmp-fp.
	(link-libm): New variable.
	($(objpfx)tst-setjmp-fp): Depend on $(link-libm).

	* math/libm-test.inc (struct test_f_i_data): New type.
	(RUN_TEST_LOOP_f_i): New macro.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(fpclassify_test_data): New variable.
	(fpclassify_test): Run tests with RUN_TEST_LOOP_f_i_tg.
	(ilogb_test_data): New variable.
	(ilogb_test): Run tests with RUN_TEST_LOOP_f_i.

	* math/libm-test.inc (scalbln_test): Correct function name in END
	call.

	* math/libm-test.inc (struct test_f_f1_data): Add comment.
	(RUN_TEST_LOOP_fI_f1): New macro.
	(frexp_test_data): New variable.
	(frexp_test): Run tests with RUN_TEST_LOOP_fI_f1.

	* math/libm-test.inc (struct test_fF_f1_data): New type.
	(RUN_TEST_LOOP_fF_f1): New macro.
	(modf_test_data): New variable.
	(modf_test): Run tests with RUN_TEST_LOOP_fF_f1.

	* math/libm-test.inc (struct test_f_f1_data): New type.
	(RUN_TEST_LOOP_f_f1): New macro.
	(gamma_test_data): New variable.
	(gamma_test): Run tests with RUN_TEST_LOOP_f_f1.
	(lgamma_test_data): New variable.
	(lgamma_test): Run tests with RUN_TEST_LOOP_f_f1.

2013-05-13  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-hwcaps.c (_dl_important_hwcaps): Comment vDSO hwcap loading.
	* elf/ldconfig.c (is_hwcap_platform): Comment each hwcap check.
	(main): Comment "tls" pseudo-hwcap.

2013-05-13  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_fl_f_data): New type.
	(RUN_TEST_LOOP_fl_f): New variable.
	(scalbln_test_data): New variable.
	(scalbln_test): Run tests with RUN_TEST_LOOP_fl_f.

	* math/libm-test.inc (struct test_fi_f_data): New type.
	(RUN_TEST_LOOP_fi_f): New macro.
	(ldexp_test_data): New variable.
	(ldexp_test): Run tests with RUN_TEST_LOOP_fi_f.
	(scalbn_test_data): New variable.
	(scalbn_test): Run tests with RUN_TEST_LOOP_fi_f.

	* math/libm-test.inc (struct test_c_f_data): New type.
	(RUN_TEST_LOOP_c_f): New macro.
	(cabs_test_data): New variable.
	(cabs_test): Run tests with RUN_TEST_LOOP_c_f.
	(carg_test_data): New variable.
	(carg_test): Run tests with RUN_TEST_LOOP_c_f.
	(cimag_test_data): New variable.
	(cimag_test): Run tests with RUN_TEST_LOOP_c_f.
	(creal_test_data): New variable.
	(creal_test): Run tests with RUN_TEST_LOOP_c_f.

	* math/libm-test.inc (struct test_if_f_data): New type.
	(RUN_TEST_LOOP_if_f): New macro.
	(jn_test_data): New variable.
	(jn_test): Run tests with RUN_TEST_LOOP_if_f.
	(yn_test_data): New variable.
	(yn_test): Run tests with RUN_TEST_LOOP_if_f.

	* math/libm-test.inc (scalbln_test): Consistently use TEST_fl_f.

2013-05-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* math/libm-test.inc (M_1_DIV_El): Define using decimal constant.
	(log_test_data): Use M_1_DIV_El instead of 1.0 / M_El.

2013-05-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (CPPFLAGS-nonlib): Add
	-DUSE_CLOCK_GETTIME if USE_CLOCK_GETTIME is defined.
	(bench-deps): Add bench-timing.h.
	* benchtests-bench-skeleton.c: Include bench-timing.h.
	(main): Use TIMING_* macros instead of clock_gettime.
	* benchtests/bench-timing.h: New file.

	[BZ #14582]
	* sysdeps/ieee754/s_lib_version.c (_LIB_VERSION_INTERNAL):
	Renamed from _LIB_VERSION.
	(_LIB_VERSION): Set as weak alias of _LIB_VERSION_INTERNAL.

2013-05-12  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_fff_f_data): New type.
	(RUN_TEST_LOOP_fff_f): New macro.
	(fma_test_data): New variable.
	(fma_test): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_towardzero_test_data): New variable.
	(fma_test_towardzero): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_downward_test_data): New variable.
	(fma_test_downward): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_upward_test_data): New variable.
	(fma_test_upward): Run tests with RUN_TEST_LOOP_fff_f.

	* math/libm-test.inc (BUILD_COMPLEX_ULP): New macro.
	(struct test_c_c_data): New type.
	(RUN_TEST_LOOP_c_c): New macro.
	(cacos_test_data): New variable.
	(cacos_test): Run tests with RUN_TEST_LOOP_c_c.
	(cacosh_test_data): New variable.
	(cacosh_test): Run tests with RUN_TEST_LOOP_c_c.
	(casin_test_data): New variable.
	(casin_test): Run tests with RUN_TEST_LOOP_c_c.
	(casinh_test_data): New variable.
	(casinh_test): Run tests with RUN_TEST_LOOP_c_c.
	(catan_test_data): New variable.
	(catan_test): Run tests with RUN_TEST_LOOP_c_c.
	(catanh_test_data): New variable.
	(catanh_test): Run tests with RUN_TEST_LOOP_c_c.
	(ccos_test_data): New variable.
	(ccos_test): Run tests with RUN_TEST_LOOP_c_c.
	(ccosh_test_data): New variable.
	(ccosh_test): Run tests with RUN_TEST_LOOP_c_c.
	(cexp_test_data): New variable.
	(cexp_test): Run tests with RUN_TEST_LOOP_c_c.
	(clog_test_data): New variable.
	(clog_test): Run tests with RUN_TEST_LOOP_c_c.
	(clog10_test_data): New variable.
	(clog10_test): Run tests with RUN_TEST_LOOP_c_c.
	(conj_test_data): New variable.
	(conj_test): Run tests with RUN_TEST_LOOP_c_c.
	(cproj_test_data): New variable.
	(cproj_test): Run tests with RUN_TEST_LOOP_c_c.
	(csin_test_data): New variable.
	(csin_test): Run tests with RUN_TEST_LOOP_c_c.
	(csinh_test_data): New variable.
	(csinh_test): Run tests with RUN_TEST_LOOP_c_c.
	(csqrt_test_data): New variable.
	(csqrt_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_test_data): New variable.
	(ctan_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_tonearest_test_data): New variable.
	(ctan_test_tonearest): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_towardzero_test_data): New variable.
	(ctan_test_towardzero): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_downward_test_data): New variable.
	(ctan_test_downward): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_upward_test_data): New variable.
	(ctan_test_upward): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_test_data): New variable.
	(ctanh_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_tonearest_test_data): New variable.
	(ctanh_test_tonearest): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_towardzero_test_data): New variable.
	(ctanh_test_towardzero): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_downward_test_data): New variable.
	(ctanh_test_downward): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_upward_test_data): New variable.
	(ctanh_test_upward): Run tests with RUN_TEST_LOOP_c_c.
	* math/gen-libm-test.pl (get_ulps): Use BUILD_COMPLEX_ULP instead
	of BUILD_COMPLEX.

	* math/libm-test.inc (struct test_ff_f_data): New type.
	(struct test_ff_f_data_nexttoward): Likewise.
	(RUN_TEST_LOOP_2_f): New macro.
	(RUN_TEST_LOOP_ff_f): Likewise.
	(atan2_test_data): New variable.
	(atan2_test): Run tests with RUN_TEST_LOOP_ff_f.
	(copysign_test_data): New variable.
	(copysign_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fdim_test_data): New variable.
	(fdim_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmax_test_data): New variable.
	(fmax_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmin_test_data): New variable.
	(fmin_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmod_test_data): New variable.
	(fmod_test): Run tests with RUN_TEST_LOOP_ff_f.
	(hypot_test_data): New variable.
	(hypot_test): Run tests with RUN_TEST_LOOP_ff_f.
	(nextafter_test_data): New variable.
	(nextafter_test): Run tests with RUN_TEST_LOOP_ff_f.
	(nexttoward_test_data): New variable.
	(nexttoward_test): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_test_data): New variable.
	(pow_test): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_tonearest_test_data): New variable.
	(pow_test_tonearest): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_towardzero_test_data): New variable.
	(pow_test_towardzero): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_downward_test_data): New variable.
	(pow_test_downward): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_upward_test_data): New variable.
	(pow_test_upward): Run tests with RUN_TEST_LOOP_ff_f.
	(remainder_test_data): New variable.
	(remainder_test): Run tests with RUN_TEST_LOOP_ff_f.
	(scalb_test_data): New variable.
	(scalb_test): Run tests with RUN_TEST_LOOP_ff_f.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-05-11  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fma_test): Use max_value instead of local
	variable fltmax.
	(nextafter_test): Likewise.

	* math/libm-test.inc (acos_towardzero_test_data): New variable.
	(acos_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(acos_downward_test_data): New variable.
	(acos_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(acos_upward_test_data): New variable.
	(acos_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(acosh_test_data): New variable.
	(acosh_test): Run tests with RUN_TEST_LOOP_f_f.
	(asin_test_data): New variable.
	(asin_test): Run tests with RUN_TEST_LOOP_f_f.
	(asin_tonearest_test_data): New variable.
	(asin_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(asin_towardzero_test_data): New variable.
	(asin_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(asin_downward_test_data): New variable.
	(asin_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(asin_upward_test_data): New variable.
	(asin_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(asinh_test_data): New variable.
	(asinh_test): Run tests with RUN_TEST_LOOP_f_f.
	(atan_test_data): New variable.
	(atan_test): Run tests with RUN_TEST_LOOP_f_f.
	(atanh_test_data): New variable.
	(atanh_test): Run tests with RUN_TEST_LOOP_f_f.
	(cbrt_test_data): New variable.
	(cbrt_test): Run tests with RUN_TEST_LOOP_f_f.
	(ceil_test_data): New variable.
	(ceil_test): Run tests with RUN_TEST_LOOP_f_f.
	(cos_test_data): New variable.
	(cos_test): Run tests with RUN_TEST_LOOP_f_f.
	(cos_tonearest_test_data): New variable.
	(cos_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(cos_towardzero_test_data): New variable.
	(cos_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(cos_downward_test_data): New variable.
	(cos_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(cos_upward_test_data): New variable.
	(cos_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_test_data): New variable.
	(cosh_test): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_tonearest_test_data): New variable.
	(cosh_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_towardzero_test_data): New variable.
	(cosh_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_downward_test_data): New variable.
	(cosh_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_upward_test_data): New variable.
	(cosh_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(erf_test_data): New variable.
	(erf_test): Run tests with RUN_TEST_LOOP_f_f.
	(erfc_test_data): New variable.
	(erfc_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp_test_data): New variable.
	(exp_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp_tonearest_test_data): New variable.
	(exp_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(exp_towardzero_test_data): New variable.
	(exp_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(exp_downward_test_data): New variable.
	(exp_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(exp_upward_test_data): New variable.
	(exp_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(exp10_test_data): New variable.
	(exp10_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp2_test_data): New variable.
	(exp2_test): Run tests with RUN_TEST_LOOP_f_f.
	(expm1_test_data): New variable.
	(expm1_test): Run tests with RUN_TEST_LOOP_f_f.
	(fabs_test_data): New variable.
	(fabs_test): Run tests with RUN_TEST_LOOP_f_f.
	(floor_test_data): New variable.
	(floor_test): Run tests with RUN_TEST_LOOP_f_f.
	(j0_test_data): New variable.
	(j0_test): Run tests with RUN_TEST_LOOP_f_f.
	(j1_test_data): New variable.
	(j1_test): Run tests with RUN_TEST_LOOP_f_f.
	(log_test_data): New variable.
	(log_test): Run tests with RUN_TEST_LOOP_f_f.
	(log10_test_data): New variable.
	(log10_test): Run tests with RUN_TEST_LOOP_f_f.
	(log1p_test_data): New variable.
	(log1p_test): Run tests with RUN_TEST_LOOP_f_f.
	(log2_test_data): New variable.
	(log2_test): Run tests with RUN_TEST_LOOP_f_f.
	(logb_test_data): New variable.
	(logb_test): Run tests with RUN_TEST_LOOP_f_f.
	(logb_downward_test_data): New variable.
	(logb_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(nearbyint_test_data): New variable.
	(nearbyint_test): Run tests with RUN_TEST_LOOP_f_f.
	(rint_test_data): New variable.
	(rint_test): Run tests with RUN_TEST_LOOP_f_f.
	(rint_tonearest_test_data): New variable.
	(rint_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(rint_towardzero_test_data): New variable.
	(rint_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(rint_downward_test_data): New variable.
	(rint_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(rint_upward_test_data): New variable.
	(rint_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(round_test_data): New variable.
	(round_test): Run tests with RUN_TEST_LOOP_f_f.
	(sin_test_data): New variable.
	(sin_test): Run tests with RUN_TEST_LOOP_f_f.
	(sin_tonearest_test_data): New variable.
	(sin_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(sin_towardzero_test_data): New variable.
	(sin_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(sin_downward_test_data): New variable.
	(sin_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(sin_upward_test_data): New variable.
	(sin_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_test_data): New variable.
	(sinh_test): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_tonearest_test_data): New variable.
	(sinh_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_towardzero_test_data): New variable.
	(sinh_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_downward_test_data): New variable.
	(sinh_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_upward_test_data): New variable.
	(sinh_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(sqrt_test_data): New variable.
	(sqrt_test): Run tests with RUN_TEST_LOOP_f_f.
	(tan_test_data): New variable.
	(tan_test): Run tests with RUN_TEST_LOOP_f_f.
	(tan_tonearest_test_data): New variable.
	(tan_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(tan_towardzero_test_data): New variable.
	(tan_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(tan_downward_test_data): New variable.
	(tan_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(tan_upward_test_data): New variable.
	(tan_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(tanh_test_data): New variable.
	(tanh_test): Run tests with RUN_TEST_LOOP_f_f.
	(tgamma_test_data): New variable.
	(tgamma_test): Run tests with RUN_TEST_LOOP_f_f.
	(trunc_test_data): New variable.
	(trunc_test): Run tests with RUN_TEST_LOOP_f_f.
	(y0_test_data): New variable.
	(y0_test): Run tests with RUN_TEST_LOOP_f_f.
	(y1_test_data): New variable.
	(y1_test): Run tests with RUN_TEST_LOOP_f_f.
	(significand_test_data): New variable.
	(significand_test): Run tests with RUN_TEST_LOOP_f_f.

2013-05-10  Christian Grönke  <cgr_bugs@sysgo.com>

	[BZ #12387]
	* sysdeps/unix/sysv/linux/sh/getgid.c: New file.

2013-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/bits/statvfs.h: Add ST_NOATIME.

2013-05-10  Andreas Jaeger  <aj@suse.de>

	[BZ #15448]
	* sysdeps/unix/sysv/linux/bits/sched.h (__CPU_SET_S)
	(__CPU_CLR_S, __CPU_ISSET_S): Avoid integer overflow.

2013-05-10  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (adjust_arg): New function.
	(special_functions): Handle generating output in both functions
	and arrays.
	(parse_args): Likewise.
	(generate_testfile): Handle START_DATA and END_DATA.  Pass extra
	$in_func argument to parse_args.
	* math/libm-test.inc (struct test_f_f_data): New type.
	(IF_ROUND_INIT_): New macro.
	(IF_ROUND_INIT_FE_DOWNWARD): Likewise.
	(IF_ROUND_INIT_FE_TONEAREST): Likewise.
	(IF_ROUND_INIT_FE_TOWARDZERO): Likewise.
	(IF_ROUND_INIT_FE_UPWARD): Likewise.
	(ROUND_RESTORE_): Likewise.
	(ROUND_RESTORE_FE_DOWNWARD): Likewise.
	(ROUND_RESTORE_FE_TONEAREST): Likewise.
	(ROUND_RESTORE_FE_TOWARDZERO): Likewise.
	(ROUND_RESTORE_FE_UPWARD): Likewise.
	(RUN_TEST_LOOP_f_f): New macro.
	(acos_test_data): New variable.
	(acos_test): Run tests with RUN_TEST_LOOP_f_f.
	(acos_tonearest_test_data): New variable.
	(acos_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.

2013-05-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/bench-skeleton.c (startup): Fix coding style.

2013-05-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6809]
	* math/w_tgamma.c (__tgamma): Also call __kernel_standard for
	negative infinity argument.
	* math/w_tgammaf.c (__tgammaf): Also call __kernel_standard_f for
	negative infinity argument.
	* math/w_tgammal.c (__tgammal): Also call __kernel_standard_l for
	negative infinity argument.
	* math/libm-test.inc (tgamma_test): Expect errno to be set for
	domain errors.

2013-05-10  Florian Weimer  <fweimer@redhat.com>

	* elf/sprof.c (load_profdata): Use fstat64 instead of fstat.
	* iconv/iconv_charmap.c (charmap_conversion): Likewise.
	* iconv/iconv_prog.c (main): Likewise.
	* locale/programs/charmap-dir.c (charmap_readdir)
	(fopen_uncompressed): Likewise.
	* locale/programs/locfile.c (siblings_uncached)
	(write_locale_data): Use lstat64 instead of lstat.
	* sunrpc/rpc_main.c (find_cpp, checkfiles): Use stat64 instead of
	stat.

2013-05-10  Andreas Jaeger  <aj@suse.de>

	[BZ #15395]
	* sunrpc/rpc_main.c (main): Invoke setlocale and textdomain for
	localization.
	Include <locale.h>.

2013-05-09  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-close.c (_dl_close_worker): Add comments.

2013-05-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15359]
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (c): Use 106 bits for
	high part of pi/2.
	(__ieee754_rem_pio2l): Update comments.

	[BZ #15429]
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c (c): Use 113 bits for
	high part of pi/2.
	(__ieee754_rem_pio2l): Update comments.

	* math/libm-test.inc (M_SQRT_2_2): Remove macro.
	(csqrt_test): Use M_SQRT1_2l instead of M_SQRT_2_2.

	* math/libm-test.inc (carg_test): Use M_PI_34l instead of 3 *
	M_PI_4l.

	* math/libm-test.inc (M_PI_34l): Define using decimal constant.
	(M_PI_34_LOG10El): Likewise.
	(M_PI2_LOG10El): Likewise.
	(M_PI4_LOG10El): Likewise.
	(M_PI_LOG10El): Likewise.

2013-05-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (PLUS_ZERO_INIT): New macro.
	(MINUS_ZERO_INIT): Likewise.
	(PLUS_INFTY_INIT): Likewise.
	(MINUS_INFTY_INIT): Likewise.
	(QNAN_VALUE_INIT): Likewise.
	(MAX_VALUE_INIT): Likewise.
	(MIN_VALUE_INIT): Likewise.
	(MIN_SUBNORM_VALUE_INIT): Likewise.
	(plus_zero): Initialize with PLUS_ZERO_INIT.
	(minus_zero): Initialize with MINUS_ZERO_INIT.
	(plus_infty): Initialize with PLUS_INFTY_INIT.
	(minus_infty): Initialize with MINUS_INFTY_INIT.
	(qnan_value): Initialize with QNAN_VALUE_INIT.
	(max_value): Initialize with MAX_VALUE_INIT.
	(min_value): Initialize with MIN_VALUE_INIT.
	(min_subnorm_value): Initialize with MIN_SUBNORM_VALUE_INIT.

	* math/libm-test.inc (RUN_TEST_if_f): New macro.
	(jn_test): Use TEST_if_f instead of TEST_ff_f.
	(ldexp_text): Use TEST_fi_i instead of TEST_ff_f.
	(yn_test): Use TEST_if_f instead of TEST_ff_f.

	* math/libm-test.inc (RUN_TEST_f_f): New macro.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_ff_f): Likewise.
	(RUN_TEST_fi_f): Likewise.
	(RUN_TEST_fl_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_sincos): Likewise.
	* math/gen-libm-test.pl (new_test): Take new argument to indicate
	whether to show exceptions.  Do not include ");\n" in return
	value.
	(special_functions): Output call to RUN_TEST_sincos instead of
	check_float calls.  Update calls to new_test.
	(parse_args): Output call to single RUN_TEST_* macro instead of
	check_* calls and other assignments.  Update calls to new_test.

	[BZ #2546]
	[BZ #2560]
	[BZ #5159]
	[BZ #15426]
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Copy sign of
	input to result for tgamma overflow.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gamma_positive): New function.
	(__ieee754_gamma_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammaf_positive): New function.
	(__ieee754_gammaf_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	(__ieee754_gammal_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	(__ieee754_gammal_r): Handle positive infinity, overflow and
	underflow here.  Handle NaN the same as positive infinity.  Remove
	check x < 0xffffffff for negative integers.  Use gamma_positive
	instead of exp (lgamma) for other arguments.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	* sysdeps/ieee754/dbl-64/gamma_product.c: New file.
	* sysdeps/ieee754/dbl-64/gamma_productf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/gamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/gamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_product.c: Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_productl.c: Likewise.
	* sysdeps/generic/math_private.h (__gamma_productf): New
	prototype.
	(__gamma_product): Likewise.
	(__gamma_productl): Likewise.
	* math/Makefile (libm-calls): Add gamma_product.
	* math/libm-test.inc (tgamma_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-08  Ondřej Bílka  <neleai@seznam.cz>

	* benchtests/bench-skeleton.c (main): Preheat CPU.

2013-05-07  Aurelien Jarno <aurelien@aurel32.net>

	* misc/sys/param.h (DEV_BSIZE): Define only if not already defined.

2013-05-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/ldsodefs.h [IS_IN_rtld]: Declare _dl_skip_args
	and _dl_skip_args_internal.

2013-05-07  Carlos O'Donell  <carlos@redhat.com>

	* manual/message.texi (Message Translation): Talk about users.
	Message to key mapping impacts design.

2013-05-06  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/wordsize-64/glob64.c: New file.

	* elf/dl-open.c: Remove declaration of _dl_sysdep_start.

	* sysdeps/unix/sysv/linux/wordsize-64/glob64.c: Moved to ...
	* sysdeps/wordsize-64/glob64.c: ... here.

	* sysdeps/generic/not-cancel.h (NO_CANCELLATION): New macro.
	(pause_not_cancel, nanosleep_not_cancel, sigsuspend_not_cancel):
	New macros.

	* debug/getlogin_r_chk.c: Moved to ...
	* login/getlogin_r_chk.c: ... here.
	* debug/Makefile (routines): Move getlogin_r_chk to ...
	* login/Makefile (routines): ... here.
	* debug/Versions (libc: GLIBC_2.4): Move getlogin_r_chk to ...
	* login/Versions (libc: GLIBC_2.4): ... here.

	* io/poll.c (__poll): Renamed from poll.
	Add libc_hidden_def.
	(poll): Define as weak alias.

	* debug/ptsname_r_chk.c: Moved to ...
	* login/ptsname_r_chk.c: ... here.
	* debug/Makefile (routines): Move ptsname_r_chk to ...
	* login/Makefile (routines): ... here.
	* debug/Versions (libc: GLIBC_2.4): Move __ptsname_r_chk to ...
	* login/Versions (libc: GLIBC_2.4): ... here.

	* posix/getlogin.c: Moved to ...
	* login/getlogin.c: ... here.
	* posix/getlogin_r.c: Moved to ...
	* login/getlogin_r.c: ... here.
	* posix/getlogin_r.c: Moved to ...
	* login/getlogin_r.c: ... here.
	* posix/Makefile (routines): Move getlogin, getlogin_r, setlogin to ...
	* login/Makefile (routines): ... here.
	* posix/Versions (libc: GLIBC_2.0): Move setlogin to ...
	* login/Versions (libc: GLIBC_2.0): ... here.

	* resource/setrlimit.c (__setrlimit): Renamed from setrlimit.
	(setrlimit): Define as weak alias.

	* sysdeps/posix/truncate.c (__truncate): Renamed from truncate.
	Call __ names for open, ftruncate, and close.
	For LENGTH==0 case, just use O_TRUNC rather than calling ftruncate.
	(truncate): Define as weak alias.

2013-05-06  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Initialize x before each
	test of frexp, modf and remquo.

	* math/libm-test.inc (gamma_test): Consistently use TEST_f_f1 to
	test signgam value.

2013-05-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15418]
	[BZ #15419]
	* sysdeps/powerpc/fpu/e_hypot.c: Fix spurious FP exception generated by
	internal tests.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.

2013-05-06  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-writev.h: New file.
	* elf/dl-misc.c: Include it.
	(_dl_debug_vdprintf): Call _dl_writev instead of __writev et al.
	* sysdeps/unix/sysv/linux/dl-writev.h: New file.

2013-05-04  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (noXFails): Remove variable.
	(noXPasses): Likewise.
	(BUILD_COMPLEX_INT): Remove macro.
	(print_screen): Remove xfail argument.
	(print_screen_max_error): Likewise.
	(update_stats): Likewise.
	(print_max_error): Likewise.  Update calls to other affected
	functions.
	(print_complex_max_error): Likewise.
	(test_single_exception): Update calls to print_screen.
	(test_single_errno): Likewise.
	(check_float_internal): Remove xfail argument.  Update calls to
	other affected functions.
	(check_float): Likewise.
	(check_complex): Likewise.
	(check_int): Likewise.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(main): Don't print noXFails and noXPasses.
	* math/gen-libm-test.pl (top level): Don't mention expected
	failure handling in comment.
	(new_test): Don't handle expected failures.
	(parse_args): Don't mention expected failure handling in comment.
	(generate_testfile): Don't handle expected failures.
	(parse_ulps): Likewise.
	(print_ulps_file): Likewise.
	(get_failure): Remove function.
	(output_test): Don't handle expected failures.
	* make/README.libm-test: Don't mention expected failure handling.

	* math/libm-test.inc (plus_zero): Make const.  Add initializer.
	(minus_zero): Likewise.
	(plus_infty): Likewise.
	(minus_infty): Likewise.
	(qnan_value): Likewise.
	(max_value): Likewise.
	(min_value): Likewise.
	(min_subnorm_value): Likewise.
	(initialize): Do not initialize those variables dynamically.

2013-05-03  Roland McGrath  <roland@hack.frob.com>

	* io/open.c (__open_2): Moved to ...
	* io/open_2.c: ... this new file.
	* io/open64.c (__open64_2): Moved to ...
	* io/open64_2.c: ... this new file.
	* io/openat.c (__openat_2): Moved to ...
	* io/openat_2.c: ... this new file.
	* io/openat64.c (__openat64_2): Moved to ...
	* io/openat64_2.c: ... this new file.
	* io/Makefile (routines): Add them.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove them.
	* sysdeps/unix/sysv/linux/open_2.c: File removed.
	* sysdeps/unix/sysv/linux/open64_2.c: File removed.
	* sysdeps/unix/sysv/linux/openat.c (__OPENAT_2): Removed.
	* sysdeps/unix/sysv/linux/openat64.c (__OPENAT_2): Removed.
	* sysdeps/unix/sysv/linux/wordsize-64/openat.c (__openat_2): Removed.
	(__openat64): Add hidden_ver.
	* sysdeps/mach/hurd/open.c (__open_2, __open64_2): Removed.
	* sysdeps/mach/hurd/openat.c (__openat_2): Removed.

	* elf/dl-sysdep.c (_dl_sysdep_start) [NEED_DL_SYSINFO]:
	Separately conditionalize setting of GLRO(dl_sysinfo) so
	that the GLRO(dl_sysinfo_dso) test is under [NEED_DL_SYSINFO_DSO]
	as well, but the actual setting is only under [NEED_DL_SYSINFO].

2013-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/Versions: Add __vdso_time symbol.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h: Add __vdso_time
	definition.
	(VDSO_IFUNC_RET): Cast to void * to silence compiler warning.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c
	(_libc_vdso_platform_setup): Add __vdso_time initialization.
	* sysdeps/unix/sysv/linux/powerpc/time.c: New file: time implementation
	for PowerPC using vDSO where is avaliable or gettimeofday as a fallback.

2013-05-03  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (lgamma_test): Consistently use TEST_f_f1 to
	test signgam value.

	* math/libm-test.inc (hypot_test): Do not use
	IGNORE_ZERO_INF_SIGN.

2013-05-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/gnu/netinet/tcp.h (TCP_TIMESTAMP): New value, from
	Linux 3.9.
	* sysdeps/unix/sysv/linux/bits/socket.h (PF_VSOCK, AF_VSOCK): Add.
	(PF_MAX): Adjust for VSOCK change.

2013-05-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-02  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15264]
	* localedata/locales/en_CA (LC_MESSAGES): Define yesstr and nostr.
	* localedata/locales/es_AR (LC_MESSAGES): Copy es_ES.
	* localedata/locales/es_ES (LC_MESSAGES): Define yesstr and nostr.

2013-05-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-05-01  Ondřej Bílka  <neleai@seznam.cz>

	* string/bits/string2.h (__strcmp_cg): Call __strcmp_gc.

2013-05-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/opendir.c: Include <sys/param.h> to get MIN/MAX macros.

2013-05-01  Richard Smith  <richard@metafoo.co.uk>

	[BZ #14952]
	* misc/sys/cdefs.h (__extern_inline, __extern_always_inline)
	[__GNUC__ && (__GNUC_STDC_INLINE__ || __GNUC_GNU_INLINE__)]:
	Use __attribute__ ((__gnu_inline__)).
	[__GNUC__ && !(__GNUC_STDC_INLINE__ || __GNUC_GNU_INLINE__)]:
	Don't use __attribute__ ((__gnu_inline__)).

2013-05-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15423]
	* math/s_catan.c (__catan): Handle small real or imaginary part of
	input specially to avoid spurious underflow.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15416]
	* math/s_catan.c (__catan): Compute expressions 1 - x^2 - y^2 more
	accurately for denominator in atan2.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c: Format code.

	* benchtests/Makefile (bench): Remove slow benchmarks.
	* benchtests/atan-inputs: Add slow benchmark inputs.
	* benchtests/bench-modf.c (NUM_VARIANTS): Define.
	(BENCH_FUNC): Accept variant offset.
	(VARIANT): Define.
	* benchtests/bench-skeleton.c (main): Run benchmark for each
	variant.
	* benchtests/cos-inputs: Add slow benchmark inputs.
	* benchtests/exp-inputs: Likewise.
	* benchtests/pow-inputs: Likewise.
	* benchtests/sin-inputs: Likewise.
	* benchtests/slowatan-inputs: Remove.
	* benchtests/slowatan.c: Remove.
	* benchtests/slowcos-inputs: Remove.
	* benchtests/slowcos.c: Remove.
	* benchtests/slowexp-inputs: Remove.
	* benchtests/slowexp.c: Remove.
	* benchtests/slowpow-inputs: Remove.
	* benchtests/slowpow.c: Remove.
	* benchtests/slowsin-inputs: Remove.
	* benchtests/slowsin.c: Remove.
	* benchtests/slowtan-inputs: Remove.
	* benchtests/slowtan.c: Remove.
	* benchtests/tan-inputs: Add slow benchmark inputs.
	* scripts/bench.pl: Parse comments and directives.

	* benchtests/Makefile: Remove *-ITER.  Define BENCH_DURATION
	in CPPFLAGS.
	($(objpfx)bench-%.c): Remove *-ITER.
	* benchtests/bench-modf.c: Remove definition of ITER.
	* benchtests/bench-skeleton.c (TIMESPEC_AFTER): New macro.
	(main): Loop for DURATION seconds instead of fixed number of
	iterations.
	* scripts/bench.pl: Don't expect iterations in parameters.

2013-04-29  Roland McGrath  <roland@hack.frob.com>

	* io/fchdir.c (__fchdir): Renamed from fchdir.
	(fchdir): Define as weak alias.

2013-04-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (ERRNO_UNCHANGED): New macro.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(noErrnoTests): New variable.
	(init_max_error): Set errno to 0.
	(test_single_errno): New function.
	(test_errno): Likewise.
	(check_float_internal): Call test_errno.  Set errno to 0.
	(check_complex): Refer to errno tests in comment.
	(check_int): Call test_errno.  Set errno to 0.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(cos_test): Use ERRNO_* flags for errno tests instead of
	check_int.
	(expm1_test): Likewise.
	(fmod_test): Likewise.
	(ilogb_test): Likewise.
	(lgamma_test): Likewise.
	(pow_test): Likewise.
	(remainder_test): Likewise.
	(sin_test): Likewise.
	(tan_test): Likewise.
	(yn_test): Likewise.
	(initialize): Set errno to 0.
	(main): Print number of errno tests.
	* math/gen-libm-test.pl (parse_args): Allow ERRNO flags on tests.

2013-04-29  Andreas Jaeger  <aj@suse.de>

	[BZ #15084]
	* resolv/res_debug.c (p_option): Fix strings for RES_USEBSTRING
	and RES_USEVC.

	[BZ #15085]
	* resolv/resolv.h (RES_NOCHECKNAME): Mark as unimplemented.
	* resolv/res_debug.c (p_option): Mark RES_NOCHECKNAME as
	unimplemented.

	[BZ #15380]
	* stdlib/random.c (__initstate): Return NULL if
	__initstate fails.

	[BZ #15086]
	* resolv/res_debug.c (p_option): Handle RES_NOALIASES,
	RES_KEEPTSIG, RES_BLAST, RES_NOIP6DOTINT, RES_SNGLKUP,
	RES_SNGLKUPREOP.

2013-04-29  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-04-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (cacos_test): Add missing semicolons at ends
	of individual tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.

2013-04-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15409]
	* math/s_catan.c (__catan): Handle arguments with large real or
	imaginary part separately without squaring.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	(__catanhl): Handle arguments with large real or imaginary part
	separately without squaring.
	* math/s_catanl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	(__catanl): Handle arguments with large real or imaginary part
	separately without squaring.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-27  Andreas Jaeger  <aj@suse.de>

	[BZ #15007]
	* stdlib/stdlib.h: Update guards for qecvt.
	* stdlib/bits/stdlib-ldbl.h: Sync guards for qecvt etc with
	<stdlib.h>.

2013-04-27  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-04-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15406]
	* math/s_catan.c: Include <float.h>.
	(__catan): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanf.c: Include <float.h>.
	(__catanf): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanh.c: Include <float.h>.
	(__catanh): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanhf.c: Include <float.h>.
	(__catanhf): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanhl.c: Include <float.h>.
	(__catanhl): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanl.c: Include <float.h>.
	(__catanl): Ensure underflow exception occurs for underflowed
	result.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.

	[BZ #15405]
	* math/s_ccosh.c (__ccosh): Ensure underflow exception occurs for
	underflowed result.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/libm-test.inc (ccos_test): Add more tests.
	(ccosh_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.

2013-04-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5/fpu/s_modf.c: Moved to ...
	* sysdeps/powerpc/power5+/fpu/s_modf.c: ... this.
	* sysdeps/powerpc/power5/fpu/s_modff.c: Moved to ...
	* sysdeps/powerpc/power5+/fpu/s_modff.c: ... this.
	* sysdeps/powerpc/powerpc32/power5+/Implies: Add powerpc/power5+ and
	powerpc/power5+/fpu folders.
	* sysdeps/powerpc/powerpc64/power5+/Implies: Likewise.


2013-04-26  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-04-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile [$(config-machine) = x86_64] (tests): Remove
	additions to variable.
	[$(config-machine) = x86_64] (modules-names): Likewise.
	($(objpfx)tst-audit3): Remove dependency.
	($(objpfx)tst-audit3.out): Likewise.
	($(objpfx)tst-audit4): Likewise.
	($(objpfx)tst-audit4.out): Likewise.
	($(objpfx)tst-audit5): Likewise.
	($(objpfx)tst-audit5.out): Likewise.
	($(objpfx)tst-audit6): Likewise.
	($(objpfx)tst-audit6.out): Likewise.
	($(objpfx)tst-audit7): Likewise.
	($(objpfx)tst-audit7.out): Likewise.
	(tst-audit3-ENV): Remove variable.
	(tst-audit4-ENV): Likewise.
	(tst-audit5-ENV): Likewise.
	(tst-audit6-ENV): Likewise.
	(tst-audit7-ENV): Likewise.
	[$(config-cflags-avx) = yes] (AVX-CFLAGS): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-audit4.c): Remove
	addition to variable.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod4a.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod4b.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod6b.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod6c.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod7b.c): Likewise.
	* sysdeps/x86_64/Makefile [$(subdir) = elf] (tests): Add
	tst-audit3, tst-audit4 and tst-audit5.
	[$(subdir) = elf && $(config-cflags-avx) = yes] (tests): Add
	tst-audit6 and tst-audit7.
	[$(subdir) = elf] (modules-names): Add audit modules for those
	tests.
	[$(subdir) = elf] ($(objpfx)tst-audit3): New dependency.
	[$(subdir) = elf] ($(objpfx)tst-audit3.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit4): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit4.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit5): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit5.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit6): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit6.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit7): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit7.out): Likewise.
	[$(subdir) = elf] (tst-audit3-ENV): New variable.
	[$(subdir) = elf] (tst-audit4-ENV): Likewise.
	[$(subdir) = elf] (tst-audit5-ENV): Likewise.
	[$(subdir) = elf] (tst-audit6-ENV): Likewise.
	[$(subdir) = elf] (tst-audit7-ENV): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes] (AVX-CFLAGS):
	Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-audit4.c): Append $(AVX-CFLAGS).
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod4a.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod4b.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod6b.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod6c.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod7b.c): Likewise.
	* elf/tst-audit3.c: Move to ...
	* sysdeps/x86_64/tst-audit3.c: ... here.
	* elf/tst-audit4.c: Move to ...
	* sysdeps/x86_64/tst-audit4.c: ... here.
	* elf/tst-audit5.c: Move to ...
	* sysdeps/x86_64/tst-audit5.c: ... here.
	* elf/tst-audit6.c: Move to ...
	* sysdeps/x86_64/tst-audit6.c: ... here.
	* elf/tst-audit7.c: Move to ...
	* sysdeps/x86_64/tst-audit7.c: ... here.
	* elf/tst-auditmod3a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod3a.c: ... here.
	* elf/tst-auditmod3b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod3b.c: ... here.
	* elf/tst-auditmod4a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod4a.c: ... here.
	* elf/tst-auditmod4b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod4b.c: ... here.
	* elf/tst-auditmod5a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod5a.c: ... here.
	* elf/tst-auditmod5b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod5b.c: ... here.
	* elf/tst-auditmod6a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6a.c: ... here.
	* elf/tst-auditmod6b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6b.c: ... here.
	* elf/tst-auditmod6c.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6c.c: ... here.
	* elf/tst-auditmod7a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod7a.c: ... here.
	* elf/tst-auditmod7b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod7b.c: ... here.

2013-04-25  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #15366]
	* sysdeps/generic/inttypes.h (PRId8, PRId16, etc.):
	define unconditionally.
	* sysdeps/generic/stdint.h (INT8_MIN, INT16_MIN, etc.):
	define unconditionally.
	(INT8_C, INT16_C, etc.): Likewise.

2013-04-25  Maciej W. Rozycki  <macro@codesourcery.com>

	* csu/libc-start.c (__libc_start_main) [!SHARED]: Declare
	__ehdr_start with hidden visibility.

	* soft-fp/op-common.h (_FP_SQRT): s/sNAN/NAN/ in a comment.

2013-04-24  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (cos_test): Use accurate hex constants.
	(sincost_test): Likewise.

2013-04-24  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.

	* math/s_catanf.c (__catanf): Use suffixed floating-point
	constants.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.

	[BZ #15394]
	* math/s_catan.c (__catan): Calculate imaginary part of result
	with log1p not log unless computing log of number close to 0.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/s_catanh.c (__catanh): Calculate real part of result with
	log1p not log unless computing log of number close to 0.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Mention files in which fast and slow
	paths of math functions are implemented.

2013-04-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/timespec_get.c: New file.

2013-04-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5/fpu/s_modf.c: New file: modf optimization for
	POWER.
	* sysdeps/powerpc/power5/fpu/s_modff.c: New file: modff optimization
	for POWER.
	* sysdeps/powerpc/powerpc64/power5/Implies: Add powerpc/power5 and
	powerpc/power5/fpu folders.
	* sysdeps/powerpc/powerpc32/power5/Implies: Likewise.
	* benchtests/Makefile: Add modf testcase.
	* benchtests/bench-modf.c: New file: Benchmark test for mo

2013-04-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14888]
	* time/Makefile (tests): Add tst-strptime-whitespace.
	* time/strptime_l.c (get_number): Use ISSPACE.
	(__strptime_internal): Likewise.
	* time/tst-strptime-whitespace.c: New test case.

2013-04-23  Andreas Schwab  <schwab@linux-m68k.org>

	* nss/nss_files/files-init.c (TF): Don't initialize flexible array
	member.
	(_nss_files_init): Set it here.

2013-04-23  Heiko Carstens  <heiko.carstens@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/bits/statfs.h: Change types of
	f_type, f_bsize, f_namelen, f_frsize, f_flags,and f_spare to
	unsigned.

2013-04-22  Jan-Benedict Glaw  <jbglaw@getslash.de>

	* nss/getent.c (shadow_keys): Call endspent, not endpwent.

2013-04-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Compute results
	size just once.

2013-04-21  David S. Miller  <davem@davemloft.net>

	* po/ru.po: Update Russion translation from translation project.

2013-04-17  Adam Conrad  <adconrad@0c3.net>

	* sysdeps/unix/sysv/linux/sys/fsuid.h: Remove __wur from setfsuid
	and setfsgid.

2013-04-17  Carlos O'Donell  <carlos@redhat.com>

	* configure.in: Remove i386 configure warning. Remove i386 case.
	* configure: Regenerate.
	* sysdeps/i386/configure.in: Raise error if config_machine is i386.
	Add example to error message.
	* sysdeps/i386/configure: Regenerate.

2013-04-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add cos, tan, slowcos and
	slowtan.
	* benchtests/cos-inputs: New file.
	* benchtests/slowcos-inputs: New file.
	* benchtests/slowcos.c: New file.
	* benchtests/slowtan-inputs: New file.
	* benchtests/slowtan.c: New file.
	* benchtests/tan-inputs: New file.

2013-04-16  Roland McGrath  <roland@hack.frob.com>

	* rt/tst-aio7.c (do_test): Don't test O_RDONLY fd case, which is now
	considered kosher.

2013-04-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Include cppflags-iterator.mk to add
	-DNOT_IN_libc=1 to CPPFLAGS of all benchmark programs.

	* Makefile.in (bench-clean): New target.
	* benchtests/Makefile (bench-clean): Likewise.

2013-04-16  David Holsgrove  <david.holsgrove@xilinx.com>

	* elf/elf.h: Add EM_MICROBLAZE and MicroBlaze relocations.

2013-04-15  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/tstdiomisc.c: Fix coding-style violation.

2013-04-15  Andreas Schwab  <schwab@suse.de>

	* nscd/grpcache.c (cache_addgr): Properly check for short write.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.  Don't write
	more than recsize.

2013-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Write all output to
	bench-out.tmp together.

2013-04-15  Andreas Schwab  <schwab@suse.de>

	* nscd/nscd.c (main): Don't fork again after closing files.

2013-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/tst-fwrite-error.c (do_test): Fix BUF array definition.

	* benchtests/Rules (bench-deps): Collect dependencies into a
	single variable.  Add Makefile to dependencies.
	($(objpfx)bench-%.c): Depend on bench-deps.

2013-04-12  Roland McGrath  <roland@hack.frob.com>
	    Xavier Roche  <roche+kml2@exalead.com>

	[BZ #15361]
	* sysdeps/pthread/aio_fsync.c (aio_fsync): Don't check open modes,
	just that it's a file descriptor.
	* manual/llio.texi (Synchronizing AIO Operations): Update description
	for EBADF error from aio_fsync.

2013-04-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules (bench): Move target definition...
	* benchtests/Makefile: ... here.

2013-04-11  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (cos_test): Fix PI/2 test.
	(sincos_test): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerate.
	* sysdeps/i386/fpu/libm-test-ulps: Regenerate.

2013-04-11  Andreas Schwab  <schwab@suse.de>

	[BZ #13988]
	* stdio-common/vfscanf.c (_IO_vfwscanf): When parsing a float
	accept exponent character only when digits were seen.
	* stdio-common/Makefile (tests): Add bug26.
	* stdio-common/bug26.c: New file.

	[BZ #14293]
	* elf/dl-load.c (_dl_init_paths): Mark decomposed RUNPATH as
	non-freeable.

2013-04-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Makeconfig (rtld-prefix): Define built linker prefix.
	* Rules (run-bench): Use it.
	* math/Makefile (run-regen-ulps): Likewise.

	* Rules (bench): Remove eval.

2013-04-10  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Roland McGrath  <roland@hack.frob.com>
	    Ondrej Bilka  <neleai@seznam.cz>

	[BZ #15346]
	* time/getdate.c: Include ctype.h and alloca.h.
	(__getdate_r): Trim leading and trailing spaces of input.
	* time/tst-getdate.c (tests): Add tests with leading and
	trailing spaces.

2013-04-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #14280]
	* sysdeps/mach/hurd/bits/ioctls.h (_IOTS): Cast to enum __ioctl_datum
	when computing value.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* math/README.libm-test (How can I generate "libm-test-ulps"?):
	Use testrun.sh to run libm tests.

	[BZ #15309]
	* elf/dl-open.c (dl_open_worker): memset all of seen array.

2013-04-06  Marko Myllynen  <myllynen@redhat.com>

	[BZ #15264]
	* locales/fi_FI (LC_MESSAGES): Define yesstr and nostr.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* Makefile.in (regen-ulps): New target.
	* math/Makefile [ifneq (no,$(PERL)]: Declare regen-ulps with .PHONY.
	[ifneq (no,$(PERL)] (run-regen-ulps): New variable.
	[ifneq (no,$(PERL)] (regen-ulps): New target.
	[ifeq (no,$(PERL)] (regen-ulps): New target.
	* math/libm-test.inc (ulps_file_name): Define.
	(output_dir): New variable.
	(options): Add "output-dir" option.
	(parse_opt): Handle 'o' case.
	(main): If output_dir is non-NULL use it as a prefix
	otherwise use "".
	* math/README.libm-test: Update `How can I generate "libm-test-ulps"?'

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	[BZ #10060, #10062]
	* aclocal.m4 (LIBC_COMPILER_BUILTIN_INLINED): New macro.
	* sysdeps/i386/configure.in: Use LIBC_COMPILER_BUILTIN_INLINED and
	fail configure if __sync_val_compare_and_swap is not inlined.
	* sysdeps/i386/configure: Regenerate.
	* configure.in: Build for i686 when configured for i386.
	* configure: Regenerate.
	* README: Remove i386 reference.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/s390/s390-32/sysdep.h: Undefine PSEUDO before redefinition.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.

2013-04-05  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/tstdiomisc.c (snanval, msnanval, lsnanval)
	(lmsnanval): New variables.
	(F): Add conversion tests.
	* stdlib/tst-strtod6.c (do_test): Add issignaling tests.
	* stdlib/Makefile ($(objpfx)tst-strtod6): Depend on $(link-libm).

	* stdio-common/tstdiomisc.c (F): Properly collect individual
	tests' results.

	[BZ #14686, #15336]
	* sysdeps/ieee754/dbl-64/urem.h (nNAN, NAN): Remove definitions.
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder):
	Instead, use input NaN values or generate a qNaN by arithmetic
	operation.  Also fix bugs to comply with the standard.
	* math/libm-test.inc (remainder_test): Add more tests.

	[BZ #15335, #15342]
	* sysdeps/ieee754/dbl-64/upow.h (NaNQ): Remove definitions.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Instead, use
	input NaN values or generate a qNaN by arithmetic operation.

	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Remove
	unreachable code.

	* sysdeps/ieee754/dbl-64/usncs.h (NAN): Removed unused
	definitions.

2013-04-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14478]
	* math/s_cexp.c (__cexp): Ensure underflow exception occurs for
	underflowed result.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.

2013-04-03  Andreas Schwab  <schwab@suse.de>

	[BZ #15330]
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Allocate results and
	order arrays from heap if bigger than alloca cutoff.

2013-04-03  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/i386/fpu/math-tests.h (SNAN_TESTS_float)
	(SNAN_TESTS_double): Refer to GCC PR56831.
	* sysdeps/powerpc/math-tests.h (SNAN_TESTS_TYPE_CAST): Refer to
	GCC PR56828.

2013-04-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules (bench): Move bench.out after the run is complete.

	* Rules (bench): Echo currently running benchmark.

	* benchtests/Makefile (bench): Add atan and slowatan.
	* benchtests/atan-inputs: New file.
	* benchtests/slowatan-inputs: New file.
	* benchtests/slowatan.c: New file.

	* sysdeps/ieee754/dbl-64/mpa.h (TWO): Remove definition.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Replace TWO with
	its value.

	[BZ #15305]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x02061d]: Define
	__ASSUME_XFS_RESTRICTED_CHOWN.
	* sysdeps/unix/sysv/linux/pathconf.c
	(__statfs_chown_restricted) [!__ASSUME_XFS_RESTRICTED_CHOWN]:
	Save and restore errno.

2013-04-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15327]
	* math/s_cacosh.c (__cacosh): Implement for finite nonzero
	arguments using __kernel_casinh.
	* math/s_cacoshf.c (__cacoshf): Implement for finite nonzero
	arguments using __kernel_casinhf.
	* math/s_cacoshl.c (__cacoshl): Implement for finite nonzero
	arguments using __kernel_casinhl.
	* math/libm-test.inc (cacosh_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.h (HALFRAD): Define as TWO23.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Use mantissa_t.

	* bench/Makefile (bench): Add sin and slowsin.
	* benchtests/sin-inputs: New file.
	* benchtests/slowsin-inputs: New file.
	* benchtests/slowsin.c: New file.

	* benchtests/Makefile: Add benchmarks for slowpow and slowexp.
	(bench): Add slowexp and slowpow.
	(exp-ITER): Increase iterations.
	(pow-ITER): Likewise.
	* benchtests/exp-inputs: Change input.
	* benchtests/pow-inputs: Likewise.
	* benchtests/slowexp-inputs: New file.
	* benchtests/slowexp.c: New file.
	* benchtests/slowpow-inputs: New file.
	* benchtests/slowpow.c: New file.

2013-04-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/fpu/s_rint.S: Remove branch prediction
	instructions.
	* sysdeps/powerpc/powerpc32/fpu/s_rintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S: Likewise.
	* benchtests/Makefile: Add rint benchtest.
	* benchtests/rint-inputs: Input for rint benchtest.

2013-04-02  Thomas Schwinge  <thomas@codesourcery.com>

	* Versions.def (libm): Add GLIBC_2.18.
	* include/math.h [!_ISOMAC] (__issignaling, __issignalingf): Add
	hidden libm prototypes.
	[!_ISOMAC && !__NO_LONG_DOUBLE_MATH] (__issignalingl): Likewise.
	* math/Makefile (libm-calls): Add s_issignaling.
	* math/Versions (libm: GLIBC_2.18): Add __issignaling,
	__issignalingf, __issignalingl.  Adjust all libm.abilist files.
	* math/bits/mathcalls.h [__USE_GNU] (__issignaling): New prototype
	declaration.
	* math/math.h [__USE_GNU] (issignaling): New macro.
	* sysdeps/ieee754/flt-32/s_issignalingf.c: New file.
	* sysdeps/ieee754/dbl-64/s_issignaling.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_issignaling.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_issignalingl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_issignalingl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_issignalingl.c: Likewise.
	* manual/arith.texi (issignaling): New section.
	* manual/libm-err-tab.pl (@all_functions): Update comment.
	* math/gen-libm-test.pl (parse_args): Apply special handling for
	issignaling.
	* math/libm-test.inc (print_float, issignaling_test): New
	functions.
	(check_float_internal): Add issignaling checks.
	* sysdeps/generic/math-tests.h (SNAN_TESTS_TYPE_CAST): Provide
	default definition.
	* sysdeps/powerpc/math-tests.h: New file.
	* math/basic-test.c (TEST_FUNC, TEST_TRUNC): Add issignaling
	tests.
	* math/test-snan.c (TEST_FUNC): Likewise.

2013-03-30  David S. Miller  <davem@davemloft.net>

	* po/de.po: Update from translation team.

2013-03-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10357]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part less than 1.0 and real part less than 0.5
	specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (UNDERFLOW_EXCEPTION_OK_DOUBLE): New macro.
	(cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/power4/fpu/mpa-arch.h (INTEGER_OF): Replace
	ONE with its value.

	* sysdeps/ieee754/dbl-64/mpa.h (ONE, MONE): Remove defines.
	(__pow_mp): Replace ONE and MONE with their values.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c (__mptan): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.

	* sysdeps/ieee754/dbl-64/s_tan.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/mpa.h (ZERO, MZERO): Remove defines.
	(__pow_mp): Replace ZERO and MZERO with their values.
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/powerpc/power4/fpu/mpa.c (__mul): Likewise.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/s_atan.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/e_log.c: Fix formatting.

2013-03-28  Roland McGrath  <roland@hack.frob.com>

	* include/stdlib.h [!SHARED] (__call_tls_dtors):
	Declare with __attribute__ ((weak)).
	* stdlib/exit.c (__libc_atexit) [!SHARED]:
	Call __call_tls_dtors only if it's not NULL.

2013-03-28  Roland McGrath  <roland@hack.frob.com>

	* csu/libc-start.c (__libc_start_main) [!SHARED]: If _dl_aux_init
	didn't do it already, then set _dl_phdr and _dl_phnum based on the
	magic __ehdr_start linker symbol if it's defined.
	* sysdeps/mach/hurd/i386/init-first.c (init1) [!SHARED]: Don't set
	them up here if it was already done.

	* elf/dl-support.c (_dl_phdr): Make pointer to const.
	(_dl_aux_init): Use const in cast when setting it.
	* sysdeps/mach/hurd/i386/init-first.c (init1): Remove superfluous cast.
	* sysdeps/generic/ldsodefs.h [!SHARED] (_dl_phdr): Update decl.
	* csu/libc-tls.c (__libc_setup_tls): Make PHDR pointer to const.

	* sysdeps/generic/ldsodefs.h [!SHARED] (_dl_phdr, _dl_phnum):
	Declare them here.
	* elf/dl-iteratephdr.c [!SHARED] (_dl_phdr, _dl_phnum): Not here.
	* csu/libc-tls.c: Nor here.
	* sysdeps/mach/hurd/i386/init-first.c (init1): Nor here.

	* sysdeps/posix/libc_fatal.c: Don't include <sys/syslog.h>.
	(__libc_message): Never call vsyslog.

2013-03-28  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/start.S (cfi_startproc, cfi_endproc):
	Define as empty.
	* sysdeps/powerpc/powerpc64/start.S (cfi_startproc, cfi_endproc):
	Likewise.

2013-03-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15214]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Fix spurious
	underflow.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-03-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15304]
	* hesiod/nss_hesiod/hesiod-grp.c (_nss_hesiod_initgroups_dyn):
	Don't add gid passed as argument.

	* sysdeps/ieee-754/dbl-64/e_atan2.c: Reformat.

2013-03-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15307]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part between 1.0 and 1.5 and real part less than 0.5
	specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__acr): Use integral
	constants.
	(norm): Likewise.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

	* sysdeps/ieee754/dbl-64/branred.c (__branred): Remove
	commented code.
	* sysdeps/ieee754/dbl-64/dosincos.c (__dubsin): Likewise.
	(__dubcos): Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_asin): Likewise.
	(__ieee754_acos): Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Likewise.
	(__exp1): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Likewise.
	(log1): Likewise.
	(my_log2): Likewise.
	(checkint): Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c
	(__ieee754_remainder): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Likewise.
	(bsloww): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.

	* sysdeps/ieee754/dbl-64/mpa-arch.h: New file.
	* sysdeps/ieee754/dbl-64/mpa.c (norm): Use MANTISSA_T and
	MANTISSA_STORE_T to store computations on mantissa.  Use
	macros for rounding and division.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Include mpa-arch.h.  Define
	powers of two in terms of TWOPOW macro.
	(mp_no): Make type of mantissa as MANTISSA_T.
	[!RADIXI]: Define RADIXI.
	[!TWO52]: Define TWO52.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: New file.

2013-03-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/s_llround.c: Fix libm ABI issue with missing
	llroundl symbol when building for PPC32.

2013-03-24  Mark H Weaver  <mhw@netris.org>

	* manual/arith.texi (Normalization Functions): Fix prototypes for
	scalbn, scalbnf, scalbnl, scalbln, scalblnf, and scalblnl.

2013-03-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13889]
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (__ieee754_expl): Increase the
	high value to check if expl overflow.
	* sysdeps/ieee754/ldbl-128ibm/w_expl.c (__expl): Fix threshold constants
	to check for underflow and overflow.
	* math/libm-test.inc: Add exp test.

2013-03-21  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #11120]
	* sysdeps/x86_64/strcmp.S: Replace all occurrences of NOT_IN_lib
	with NOT_IN_libc.

2013-03-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/w_sqrt.c (compat_symbol): Add sqrtl compat
	symbol.

2013-03-21  Thomas Schwinge  <thomas@codesourcery.com>

	* math/gen-libm-test.pl (parse_args, special_functions): Properly
	wrap blocks consisting of several statements.

	* sysdeps/generic/math-tests.h: New file.
	* sysdeps/i386/fpu/math-tests.h: Likewise.
	* math/test-snan.c: Include it.
	(TEST_FUNC): Use SNAN_TESTS to short-circuit certain tests.

2013-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15285]
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Include <float.h>.
	(__ieee754_j0l): Do not improve calculations using cos of twice
	input for inputs above LDBL_MAX / 2.0L.
	(__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Include <float.h>.
	(__ieee754_j1l): Do not improve calculations using cos of twice
	input for inputs above LDBL_MAX / 2.0L.
	(__ieee754_y1l): Likewise.
	* math/libm-test.inc (j0_test): Add another test.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules ($(objpfx)bench-%.c): Include code from a C source
	file.

2013-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15287]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part 1.0 and real part less than 0.5 specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Use HALFRAD.
	* sysdeps/ieee754/dbl-64/sincos32.c (__mpranred): Likewise.

2013-03-20  Joseph Myers  <joseph@codesourcery.com>

	* aclocal.m4 (LIBC_CONFIG_VAR): New autoconf macro.
	* config.make.in (config-cflags-sse4): Remove variable.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(config-cflags-novzeroupper): Likewise.
	(config-asflags-i686): Likewise.
	(have-mfma4): Likewise.
	(have-as-vis3): Likewise.
	(MIG): Likewise.
	* configure.in (MIG): Do not AC_SUBST.
	(libc_cv_cc_nofma): Move AC_SUBST next to configure test.
	(libc_cv_cc_sse4): Do not AC_SUBST.
	(libc_cv_cc_avx): Likewise.
	(libc_cv_cc_sse2avx): Likewise.
	(libc_cv_cc_novzeroupper): Likewise.
	(libc_cv_cc_fma4): Likewise.
	(libc_cv_as_i686): Likewise.
	(libc_cv_sparc_as_vis3): Likewise.
	* sysdeps/i386/configure.in (config-cflags-sse4): Set using
	LIBC_CONFIG_VAR.
	(config-asflags-i686): Likewise.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(have-mfma4): Likewise.
	(config-cflags-novzeroupper): Likewise.
	* sysdeps/mach/configure.in (MIG): Likewise.
	* sysdeps/sparc/configure.in (have-as-vis3): Likewise.
	* sysdeps/x86_64/configure.in (config-cflags-sse4): Set using
	LIBC_CONFIG_VAR.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(have-mfma4): Likewise.
	(config-cflags-novzeroupper): Likewise.
	* configure: Regenerated.
	* sysdeps/i386/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/sparc/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.

2013-03-20  Roland McGrath  <roland@hack.frob.com>

	[BZ #14812]
	* locale/programs/localedef.c (options): Put N_ translation marker
	on argument names, not just descriptions.

2013-03-20  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* Makerules ($(inst_libdir)/libc.so): Use $(rtlddir).

2013-03-20  Ondřej Bílka  <neleai@seznam.cz>

	[BZ #14176]
	* stdlib/stdlib.h (mblen, mbtowc, wctomb): Remove __wur.

2013-03-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/libc_fatal.c: Include <sys/mman.h>.
	[!WRITEV_FOR_FATAL] (writev_for_fatal): New function.
	[!WRITEV_FOR_FATAL] (WRITEV_FOR_FATAL): New macro; call that.
	[!BEFORE_ABORT] (before_abort): New function.
	[!BEFORE_ABORT] (BEFORE_ABORT): New macro; call that.
	* sysdeps/unix/sysv/linux/libc_fatal.c: Trim includes.
	(writev_for_fatal): New function.
	(WRITEV_FOR_FATAL): New macro; call that.
	(backtrace_and_maps): New function.
	(BEFORE_ABORT): New macro; call that.
	(struct str_list): Type removed.
	(__libc_message, __libc_fatal): Functions removed.
	Include <sysdeps/posix/libc_fatal.c> instead.

2013-03-19  Joseph Myers  <joseph@codesourcery.com>

	* math/k_casinhf.c (__kernel_casinhf): Consistently use float
	constants.
	* math/k_casinhl.c (__kernel_casinhl): Consistently use long
	double constants.

2013-03-19  Andreas Schwab  <schwab@suse.de>

	* sysdeps/gnu/configure.in: Set libc_cv_rtldir for s390x.
	* sysdeps/gnu/configure: Regenerate.

	* configure.in: Substitute libc_cv_rtlddir.
	* configure: Regenerate.
	* config.make.in (rtlddir): Set from libc_cv_rtlddir.
	* Makeconfig (rtlddir, inst_rtlddir): New variables.
	(rtld-LDFLAGS): Use them with $(rtld-installed-name).
	* elf/Makefile (install-others, CFLAGS-interp.c)
	(ldso_install, common-ldd-rewrite): Likewise.
	($(inst_rtlddir)/$(rtld-installed-name)): Renamed from
	$(inst_slibdir)/$(rtld-installed-name).
	* scripts/rellns-sh: Add -p option.
	* Makerules (make-shlib-link): Use rellns-sh to get relative name
	for source.

2013-03-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/nptl.texi: Renamed to ...
	* manual/threads.texi: ... this.
	* manual/Makefile (chapters): Update.

2013-03-18  Roland McGrath  <roland@hack.frob.com>

	[BZ #14812]
	* argp/argp-parse.c (argp_default_options): Put N_ translation marker
	on argument names, not just descriptions.
	* malloc/memusagestat.c (options): Likewise.
	* nss/getent.c (options): Likewise.

2013-03-18  Benno Schulenberg  <bensberg@justemail.net>

	[BZ #14812]
	* iconv/iconv_prog.c (options): Put N_ translation marker
	on argument names, not just descriptions.
	* iconv/iconvconfig.c (options): Likewise.

2013-03-18  Ondrej Bilka  <neleai@seznam.cz>

	* sysdeps/x86_64/strlen.S: Replace with new SSE2 based
	implementation which is faster on all x86_64 architectures.
	Tested on AMD, Intel Nehalem, SNB, IVB.
	* sysdeps/x86_64/strnlen.S: Likewise.

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Remove all multiarch strlen and strnlen versions.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update.
	Remove strlen and strnlen related parts.

	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: Update.
	Inline strlen part.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Likewise.

	* sysdeps/x86_64/multiarch/strlen.S: Remove.
	* sysdeps/x86_64/multiarch/strlen-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse2-pminub.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen-sse2-no-bsf.S: Likewise.

2013-03-17  Carlos O'Donell  <carlos@redhat.com>

	* manual/memory.texi (Malloc Tunable Parameters):
	Sort parameters alphabetically. Add comments for missing entries.

2013-03-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-03-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15283]
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_y1l): Correct test
	for arguments at most half maximum finite value.
	* math/libm-test.inc (j0_test): Add more tests.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14155]
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_j0l): Do not compute
	1 / x and functions P and Q for arguments above 0x1p256L.
	(__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): Likewise.
	(__ieee754_y1l): Likewise.
	* math/libm-test.inc (j0_test): Do not allow spurious underflows.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.

2013-03-16  Thomas Schwinge  <thomas@codesourcery.com>

	* math/test-snan.c (TEST_FUNC): Add and use minus_sNaN_var
	variable.

2013-03-15  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-support.c (_dl_aux_init): Ignore zero value for AT_PAGESZ.
	(_dl_non_dynamic_init): Don't set _dl_pagesize; it will never be
	zero since it's initialized to EXEC_PAGESIZE.

	* sysdeps/unix/sysv/linux/ldsodefs.h
	(_dl_non_dynamic_init, _dl_aux_init): Move declarations to ...
	* sysdeps/generic/ldsodefs.h: ... here.

2013-03-15  Thomas Schwinge  <thomas@codesourcery.com>

	* math/libm-test.inc (ldexp_test): Add missing START/END markers.

	* sysdeps/powerpc/fpu/test-powerpc-snan.c: Rename to
	math/test-snan.c.
	* math/test-snan.c: Renamed from
	sysdeps/powerpc/fpu/test-powerpc-snan.c.
	* math/Makefile (tests): Add test-snan.
	* sysdeps/powerpc/fpu/Makefile (libm-tests): Don't add
	test-powerpc-snan.

	* math/basic-test.c (TEST_FUNC): Replace NANFUNC argument with
	SUFFIX.  Initialize qNaN_var with __builtin_nan family of
	functions.
	(TEST_TRUNC): Add SUFFIX argument.  Initialize qNaN_var with
	__builtin_nan family of functions.
	* math/libm-test.inc (initialize): Initialize qnan_value with
	__builtin_nan family of functions.
	* sysdeps/powerpc/fpu/test-powerpc-snan.c (SNANf, SNAN, SNANl):
	Remove variables.
	(init_signaling_nan, snan_float, snan_double, snan_ldouble):
	Remove functions.
	(TEST_FUNC): Add SUFFIX argument.  Move sNaN_var into static
	storage class.  Initialize qNaN_var and sNaN_var with
	__builtin_nan and __builtin_nans families of functions,
	respectively.

	* math/libm-test.inc (acosh_test): Also test with qNaN input.
	(sqrt_test): Remove duplicate test with qNaN input.
	(lrint_test, llrint_test, lround_test, llround_test, rint_test)
	(round_test, signbit_test, significand_test): Note missing +/-Inf
	as well as qNaN tests.

	* math/basic-test.c (TEST_FUNC, TEST_TRUNC): Rename NaN_var to
	qNaN_var.  Fix a few strings, too.
	* math/libm-test.inc (nan_value): Rename to qnan_value.
	* math/gen-libm-test.pl (%beautify): Adjust to that.
	* math/bits/mathcalls.h (nan): Refer to qNaN instead of NaN.
	* math/test-misc.c (main): Likewise.
	* sysdeps/ieee754/bits/nan.h (__nan_bytes, __nan_union): Rename
	to __qnan_bytes, and __qnan_union, respectively.
	* ports/sysdeps/mips/bits/nan.h (__nan_bytes, __nan_union):
	Likewise.
	* stdio-common/tstdiomisc.c (nanval, lnanval): Rename to qnanval,
	and lqnanval, respectively.
	* sysdeps/powerpc/bits/fenv.h: Fix usage of NaN/qNaN/sNaN.
	* sysdeps/powerpc/fpu/fenv_libc.h: Likewise.
	* sysdeps/powerpc/fpu/test-powerpc-snan.c (TEST_FUNC): Likewise,
	and rename NaN_var to qNaN_var, and SNaN_var to sNaN_var.

	* math/libm-test.inc (fpstack_test) [__x86_64__]: Enable test.
	* math/test-misc.c (main) [__x86_64__]: Enable test for long
	doubles.

	* math/test-misc.c (main): Fix copy'n'pastos.
	* misc/tst-efgcvt.c (special): Likewise.

	* stdio-common/printf_fp.c (__isinfl_internal, __isnanl_internal):
	Remove declarations.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa-arch.h: Remove.
	* sysdeps/ieee754/dbl-64/mpa.c: Revert last change.
	* sysdeps/ieee754/dbl-64/mpa.h: Revert last change.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: Remove.

2013-03-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET): Add
	macro to return vdso values correctly in IFUNC implementations.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c (__gettimeofday):
	Optimization by using IFUNC.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Richard Henderson  <rth@redhat.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* Makefile.in (bench): New target.
	* NEWS: Mention the benchmark framework.
	* Rules (bench): Likewise.
	(binaries-bench): Generate binaries for functions to
	benchmark.
	* benchtests/Makefile: New makefile for benchmark tests.
	* benchtests/bench-skeleton.c: New skeleton file for benchmark
	programs.
	* benchtests/exp-inputs: New input file for EXP function.
	* benchtests/pow-inputs: New input file for POW function.
	* scripts/bench.pl: New script to generate source files for
	benchmark programs.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa-arch.h: New file.
	* sysdeps/ieee754/dbl-64/mpa.c (norm): Use MANTISSA_T to store
	computations on mantissa.  Use macros for rounding and
	division.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Include mpa-arch.h.  Define
	powers of two in terms of TWOPOW macro.
	(mp_no): Make type of mantissa as MANTISSA_T.
	[!RADIXI]: Define RADIXI.
	[!TWO52]: Define TWO52.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: New file.

	* manual/nptl.texi (cindex): Modify threads to pthreads.

2013-03-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/preconfigure: Regenerated.

2013-03-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14155]
	* sysdeps/ieee754/dbl-64/e_j0.c (pzero): Return 1.0 for arguments
	0x1p28 and above.
	(qzero): Return -0.125 / x for arguments 0x1p28 and above.
	* sysdeps/ieee754/dbl-64/e_j1.c (pzero): Return 1.0 for arguments
	0x1p28 and above.
	(qzero): Return 0.375 / x for arguments 0x1p28 and above.
	* math/libm-test.inc (j0_test): Do not allow one spurious
	underflow exception.
	(y1_test): Likewise.

2013-03-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/Makefile (chapters): Add nptl.
	* manual/debug.texi (Debugging Support): Add link to Threads
	chapter.
	* manual/nptl.texi: New file.

	* sysdeps/unix/sysv/linux/times.c (__times): Fix formatting.

2013-03-14  Petr Baudis  <pasky@ucw.cz>

	* sysdeps/unix/sysv/linux/times.c (__times): On EFAULT, test
	for non-NULL pointer before the memory validity test. Pointed
	out by Holger Brunck <holger.brunck@keymile.com>.

2013-03-13  Andreas Schwab  <schwab@suse.de>

	* extra-lib.mk (extra-objs): Add static-only-routines as .oS
	instead of .os.

2013-03-13  Joseph Myers  <joseph@codesourcery.com>

	* timezone/zic.c: Update from tzcode 2013b.

2013-03-12  Carlos O'Donell  <carlos@redhat.com>

	* manual/install.texi (Configuring and compiling):
	Mention i686 and i586.
	* INSTALL: Regenerate.

2013-03-12  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/init_array/elf-init.c: New file.
	* csu/elf-init.c
	(__libc_csu_init) [!NO_INITFINI]: Conditionalize _init call on this.
	(__libc_csu_fini) [!NO_INITFINI]: Conditionalize _fini call on this.

	* csu/gmon-start.c [GMON_START_ARRAY_SECTION]: Don't define
	__gmon_start__ as global, but as static with a .preinit_array pointer.
	* sysdeps/init_array/gmon-start.c: New file.  Use that.
	* sysdeps/init_array/crti.S: New file, empty except for comments.
	* sysdeps/init_array/crtn.S: Likewise.

2013-03-11  Ondřej Bílka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S: Remove USE_MULTIARCH conditional for
	definining bcopy.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Remove Prefer_SSE_for_memop.
	* sysdeps/x86_64/multiarch/init-arch.h: Remove
	bit_Prefer_SSE_for_memop, index_Prefer_SSE_for_memop,
	HAS_PREFER_SSE_FOR_MEMOP.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	memset-x86-64.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Remove bzero, memset ifunc support.
	* sysdeps/x86_64/multiarch/bzero.S: Remove file.
	* sysdeps/x86_64/multiarch/memset-x86-64.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.

2013-03-11  Andreas Schwab  <schwab@suse.de>

	[BZ #15234]
	* Versions.def (libpthread): Add GLIBC_2.3, so that it can be used
	by SHLIB_COMPAT.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist
	(GLIBC_2.16): Remove pthread_atfork.

2013-03-08  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* posix/Makefile (testcases.h): Set LC_ALL=C before sed.
	(ptestcases.h): Likewise.

2013-03-08  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig ($(common-objpfx)config.status): Depend on
	sysdeps/*/preconfigure{,.in} too.

2013-03-08  Joseph Myers  <joseph@codesourcery.com>

	* malloc/malloc.h (__malloc_ptr_t): Remove macro.
	(__free_hook): Use void * instead of __malloc_ptr_t.
	(__malloc_hook): Likewise.
	(__realloc_hook): Likewise.
	(__memalign_hook): Likewise.
	(__after_morecore_hook): Likewise.
	* malloc/arena.c (save_malloc_hook): Likewise.
	(save_free_hook): Likewise.
	* malloc/hooks.c (malloc_hook_ini): Likewise.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	* malloc/malloc.c (malloc_hook_ini): Likewise.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	(__free_hook): Likewise.
	(__malloc_hook): Likewise.
	(__realloc_hook): Likewise.
	(__memalign_hook): Likewise.
	(__libc_malloc): Likewise.
	(__libc_free): Likewise.
	(__libc_realloc): Likewise.
	(__libc_memalign): Likewise.
	(__libc_valloc): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.
	(__posix_memalign): Likewise.
	* malloc/morecore.c (__sbrk): Likewise.
	(__default_morecore): Likewise.

	* malloc/morecore.c (__default_morecore): Use ISO C prototype.

	* malloc/malloc.h (__malloc_ptrdiff_t): Remove macro.
	* malloc/morecore.c (__default_morecore): Use ptrdiff_t instead of
	__malloc_ptrdiff_t.

	* malloc/malloc.h (__malloc_size_t): Remove macro.
	* malloc/mcheck.c (old_malloc_hook): Use size_t instead of
	__malloc_size_t.
	(old_memalign_hook): Likewise.
	(old_realloc_hook): Likewise.
	(struct hdr): Likewise.
	(flood): Likewise.
	(mallochook): Likewise.
	(memalignhook): Likewise.
	(reallochook): Likewise.
	* malloc/mtrace.c (tr_old_malloc_hook): Likewise.
	(tr_old_realloc_hook): Likewise.
	(tr_old_memalign_hook): Likewise.
	(tr_mallochook): Likewise.
	(tr_reallochook): Likewise.
	(tr_memalignhook): Likewise.

2013-03-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_pack): Rename to
	default_ldbl_pack and using as default implementation.
	(ldbl_unpack): Rename to default_ldbl_unpack and using as default
	implementation.
	* sysdeps/powerpc/fpu/math_ldbl.h (ldbl_extract_mantissa): Remove
	redundant definition.
	(ldbl_insert_mantissa): Likewise.
	(ldbl_canonicalize): Likewise.
	(ldbl_nearbyint): Likewise.
	(ldbl_pack): Rename to ldbl_pack_ppc.
	(ldbl_unpack): Rename to ldbl_unpack_ppc.
	* sysdeps/unix/sysv/linux/powerpc/Implies: Remove file.
	* sysdeps/powerpc/Implies: Add ieee754/ldbl-opt after ieee754/ldbl-128ibm.

2013-03-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Move file...
	* sysdeps/powerpc/power4/fpu/mpa.c: ... here.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile: Move file...
	* sysdeps/powerpc/power4/fpu/Makefile: ... here.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Remove file.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile: Remove file.
	* sysdeps/powerpc/powerpc32/power4/Implies: New file.
	* sysdeps/powerpc/powerpc64/power4/Implies: New file.

2013-03-07  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/mman-linux.h.

2013-03-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/slowexp.c [!USE_LONG_DOUBLE_FOR_MP]:
	Include mpa.h and declare __MPEXP.
	[USE_LONG_DOUBLE_FOR_MP] (__slowexp): Call __IEEE754_EXPL.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile
	(CPPFLAGS-slowexp.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Remove.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile
	(CPPFLAGS-slowexp.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Remove.

	* sysdeps/ieee754/dbl-64/slowpow.c [USE_LONG_DOUBLE_FOR_MP]
	(__slowpow): Use long double EXPL and LOGL functions to
	compute POW.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile
	(CPPFLAGS-slowpow.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Remove.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile
	(CPPFLAGS-slowpow.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Remove.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Use
	intermediate variable to calculate exponent.
	(__sqr): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul):
	Likewise.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c [!NO__MUL]: Define __mul.
	[!NO__SQR]: Define __sqr.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: define NO__MUL
	and NO__SQR.  Remove all code except __mul and __sqr.  Include
	sysdeps/ieee754/dbl-64/mpa.c.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

	[BZ #12723]
	* posix/Makefile (tests): Add tst-pathconf.
	* posix/tst-pathconf.c: New test case.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Remove
	_PC_PIPE_BUF.
	* sysdeps/unix/sysv/linux/pathconf.c (__pathconf): Likewise.

2013-03-06  Patsy Franklin  <pfrankli@redhat.com>

	* io/fcntl.h: Added a comment about AT_EACCESS and AT_REMOVEDIR.

2013-03-06  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/mman-linux.h (MAP_ANONYMOUS): Allow
	definition via __MAP_ANONYMOUS.

	* sysdeps/unix/sysv/linux/s390/bits/mman.h (MAP_GROWSUP): Remove,
	it's not part of Linux headers.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h (MAP_HUGE_SHIFT): Define.
	(MAP_HUGE_MASK): Define.

	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h (PTRACE_O_EXITKILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.

	* sysdeps/unix/sysv/linux/x86/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/generic/bits/msq.h (MSG_COPY): Define.
	* sysdeps/unix/sysv/linux/powerpc/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h (MSG_COPY): Define.

	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_filesize_max):
	Handle f2fs.

	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle f2fs and efivarfs.

	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_link_max): Handle
	f2fs.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (F2FS_SUPER_MAGIC): Add.
	(EFIVARFS_MAGIC): Add.
	(F2FS_LINK_MAX): Add.

2013-03-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfprintf.c: Replace __builtin_expect with
	__glibc_unlikely.

2013-03-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-sym.h: Remove file.
	* sysdeps/powerpc/powerpc64/bp-asm.h: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/memcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/memset.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__mempcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memrchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(__bzero): Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__rawmemchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__STRCMP): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strchrnul): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strnlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__GI__setjmp): Don't use BP_SYM.
	(_setjmp): Likewise.
	(__sigsetjmp): Likewise.
	* sysdeps/powerpc/powerpc64/start.S: Don't include "bp-sym.h".
	(L(start_addresses)): Don't use BP_SYM.
	(_start): Likewise.
	* sysdeps/powerpc/powerpc64/stpcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__stpcpy): Don't use BP_SYM, CHECK_BOUNDS_LOW,
	STORE_RETURN_BOUNDS, CHECK_BOUNDS_HIGH and STORE_RETURN_VALUE.
	(__stpcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__stpcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strchr.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strchr): Don't use BP_SYM, CHECK_BOUNDS_LOW, STORE_RETURN_BOUNDS,
	CHECK_BOUNDS_HIGH_RTN and STORE_RETURN_VALUE.  Remove comment
	about bounded pointers.
	(strchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strchr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strcmp.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcmp): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove comment
	about bounded pointers.  Remove GKM FIXME comments.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc64/strcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcpy): Don't use BP_SYM, CHECK_BOUNDS_LOW and
	STORE_RETURN_BOUNDS.  Remove comment about bounded pointers.
	Remove GKM FIXME comments.
	(strcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strlen.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strlen): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove comment
	about bounded pointers.  Remove GKM FIXME comment.
	* sysdeps/powerpc/powerpc64/strncmp.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__brk): Don't use BP_SYM and DISCARD_BOUNDS.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Don't use BP_SYM and DISCARD_BOUNDS.  Remove GKM FIXME
	comment.

2013-03-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfprintf.c (vfprintf): Check malloc return; don't
	call free(NULL).

2013-03-05  David S. Miller  <davem@davemloft.net>

	* po/es.po: Update from translation team.

2013-03-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Include
	<bits/mman-linux.h>.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h [!MCL_CURRENT]
	(MCL_CURRENT, MCL_FUTURE): Define here.

2013-03-05  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #15232]
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Use
	attribute_hidden.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.

2013-03-05  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Set the
	fourth parameter needed for rt_sigprocmask syscall.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S:
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym: Define _NSIG8.

2013-03-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/powerpc/powerpc32/power4/strncmp.S (strncmp): Remove
	comment about bounded pointers.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S (strncmp): Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S (strncmp): Likewise.

2013-03-04  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/mman-linux.h: New file, with Linux
	common definitions.

	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Remove all defines
	provided by bits/mman-linux.h and include <bits/mman-linux.h>.
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.

2013-03-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15055]
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (__ieee754_acoshl): Use
	__ieee754_sqrl instead of __sqrl.

2013-03-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/fpu/fpu_control.h: Move to ...
	* sysdeps/powerpc/fpu_control.h: ... here.
	* sysdeps/powerpc/fpu/bits/fenvinline.h: Move to ...
	* sysdeps/powerpc/bits/fenvinline.h: ... here.
	* sysdeps/powerpc/fpu/bits/mathinline.h: Move to ...
	* sysdeps/powerpc/bits/mathinline.h: ... here.

2013-03-01  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-hwcaps.c (_dl_important_hwcaps):
	Change [NEED_DL_SYSINFO || NEED_DL_SYSINFO_DSO] conditionals
	to just [NEED_DL_SYSINFO_DSO].
	* elf/dl-support.c: Likewise.
	* elf/dl-sysdep.c (_dl_sysdep_start): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	* elf/setup-vdso.h (setup_vdso): Likewise.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c
	(_dl_discover_osversion): Likewise.

2013-03-01  Carlos O'Donell  <carlos@redhat.com>

	* csu/libc-start.c (__pthread_initialize_minimal): Revert last change.
	* csu/libc-tls.c (__pthread_initialize_minimal): Likewise.

2013-03-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* NEWS: Mention libm performance improvements and non-x86 PI
	futex support.

	* csu/libc-start.c (__pthread_initialize_minimal): Change
	function arguments.
	* csu/libc-tls.c (__pthread_initialize_minimal): Likewise.

2013-02-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/powerpc/powerpc32/bp-asm.h: Remove file.
	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/a2/memcpy.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/add_n.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_add_n): Don't use BP_SYM.
	(__mpn_add_n) [__BOUNDED_POINTERS_]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/addmul_1.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(__mpn_addmul_1): Don't use BP_SYM.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Don't include
	<bp-sym.h>.
	(_setjmp): Don't use BP_SYM.
	(__novmx_setjmp): Likewise.
	(__GI__setjmp): Likewise.
	(__vmx_setjmp): Likewise.
	* sysdeps/powerpc/powerpc32/bsd-setjmp.S: Don't include
	<bp-sym.h>.
	* sysdeps/powerpc/powerpc32/bzero.S: Don't include <bp-sym.h>.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__sigsetjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/lshift.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_lshift): Don't use BP_SYM.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/memset.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/mul_1.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_mul_1): Don't use BP_SYM.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__mempcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memrchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__rawmemchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__STRCMP): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strchrnul): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strnlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/rshift.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_rshift): Don't use BP_SYM.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__sigsetjmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/start.S: Don't include "bp-sym.h".
	(L(start_addresses)): Don't use BP_SYM.
	(_start): Likewise.
	* sysdeps/powerpc/powerpc32/stpcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__stpcpy): Don't use BP_SYM and macros from bp-asm.h.
	(__stpcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__stpcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strchr.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strchr): Don't use BP_SYM.h and macros from bp-asm.h.
	(strchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strchr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strcmp.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcmp): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove GKM FIXME
	comments.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/strcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcpy): Don't use BP_SYM and macros from bp-asm.h.  Remove GKM
	FIXME comments.
	(strcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strlen.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strlen): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove GKM FIXME
	comment.
	* sysdeps/powerpc/powerpc32/strncmp.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(strncmp): Don't use BP_SYM,
	* sysdeps/powerpc/powerpc32/sub_n.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_sub_n): Don't use BP_SYM.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/submul_1.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(__mpn_submul_1): Don't use BP_SYM.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/brk.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__brk): Don't use BP_SYM and DISCARD_BOUNDS.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Don't use BP_SYM and DISCARD_BOUNDS.  Remove GKM FIXME
	comment.

2013-02-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (add_magnitudes):
	Use ZK to minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (add_magnitudes):
	Use ZK to minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.

2013-02-27  Roland McGrath  <roland@hack.frob.com>

	* csu/gmon-start.c: Add special exception to license text.

2013-02-27  Richard Henderson  <rth@redhat.com>

	* scripts/config.guess: Update from config.git.
	* scripts/config.sub: Likewise.

2013-02-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpsqrt.c: Reformat.

	* sysdeps/ieee754/dbl-64/mpatan2.c: Reformat.

	* sysdeps/ieee754/dbl-64/mpatan.c: Reformat.

	* sysdeps/ieee754/dbl-64/mptan.c: Reformat.

	* sysdeps/ieee754/dbl-64/mplog.c: Reformat.

2013-02-26  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (%.v.i, %.v): Move these pattern rules outside of
	[$(build-shared = yes].

2013-02-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Include alloca.h.
	(__mul): Reduce iterations for calculating mantissa.

	* sysdeps/ieee754/dbl-64/sincos32.c (__c32): Use MPONE and
	MPTWO.
	(__mpranred): Likewise.

	[BZ #15160]
	* malloc/memusagestat.c (main): Draw graphs for heap and stack
	only if MAXSIZE_HEAP and MAXSIZE_STACK are non-zero.

2013-02-26  Paul Eggert  <eggert@cs.ucla.edu>

	* posix/regex_internal.h [__GNUC__ < 3 + (__GNUC_MINOR__ < 1]:
	Define __attribute__.

2013-02-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/elem-hash.h (elem_hash): Mark as pure and possibly
	unused.
	* posix/regex_internal.h (__attribute): Remove.
	[!_LIBC && __i386__]: Use __attribute__ instead of __attribute.
	(re_string_context_at): Likewise.
	(bitset_not): Use __attribute__ and mark function as possibly
	unused.
	(bitset_merge): Likewise.
	(bitset_mask): Likewise.
	(re_string_char_size_at): Likewise.
	(re_string_wchar_at): Likewise.
	(re_string_elem_size_at): Likewise.

2013-02-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/sincos32.c (ss32): Remove commented
	code.
	(cc32): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (mcr): Use long instead of int.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.

	* sysdeps/ieee754/dbl-64/slowexp.c: Reformat in GNU coding
	style.

	* sysdeps/ieee754/dbl-64/slowpow.c: Reformat in GNU coding
	style.

	* sysdeps/ieee754/dbl-64/slowexp.c (__slowexp): Remove commented
	code.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mp_dbl): Sync
	up changes with default code.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mp_dbl):
	Likewise.

2013-02-24  Allan McRae  <allan@archlinux.org>

	* manual/socket.texi (The Internet Namespace): Order menu items
	to match that in the file.

	* manual/libc-texinfo.sh: Use @detailmenu around the detailed
	node listing of the info page menu.

2013-02-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/i386/bp-asm.h: Remove file.
	* sysdeps/i386/add_n.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM
	* sysdeps/i386/addmul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_addmul_1): Do not use BP_SYM
	* sysdeps/i386/bsd-_setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(_setjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/bsd-setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(setjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/fpu/s_frexp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexp): Do not use BP_SYM.
	(frexp): Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexpf): Do not use BP_SYM.
	(frexpf): Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexpl): Do not use BP_SYM.
	(frexpl): Likewise.
	* sysdeps/i386/fpu/s_remquo.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquo): Do not use BP_SYM.
	(remquo): Likewise.
	* sysdeps/i386/fpu/s_remquof.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquof): Do not use BP_SYM.
	(remquof): Likewise.
	* sysdeps/i386/fpu/s_remquol.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquol): Do not use BP_SYM.
	(remquol): Likewise.
	* sysdeps/i386/i486/strcat.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(strcat): Remove GKM FIXME comment.  Do not use BP_SYM.
	* sysdeps/i386/i486/strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(strlen): Do not use BP_SYM.
	* sysdeps/i386/i586/add_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM.
	* sysdeps/i386/i586/addmul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_addmul_1): Do not use BP_SYM.
	* sysdeps/i386/i586/bzero.S (__bzero): Do not use BP_SYM in
	weak_alias.
	(bzero): Likewise.
	* sysdeps/i386/i586/lshift.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_lshift): Do not use BP_SYM.
	* sysdeps/i386/i586/memcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memcpy): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i586/mempcpy.S (__mempcpy): Do not use BP_SYM in
	libc_hidden_def and weak_alias.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i586/memset.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(LEN): Likewise.
	[!BZERO_P] (CHR): Likewise.
	(memset): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i586/mul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_mul_1): Do not use BP_SYM.
	* sysdeps/i386/i586/rshift.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_rshift): Do not use BP_SYM.
	* sysdeps/i386/i586/strchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strchr): Likewise.  Do not use BP_SYM.
	(index): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i586/strcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(STRCPY): Likewise.  Remove GKM FIXME comment.  Do not use BP_SYM.
	* sysdeps/i386/i586/strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(strlen): Do not use BP_SYM.
	* sysdeps/i386/i586/sub_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_sub_n): Do not use BP_SYM.
	* sysdeps/i386/i586/submul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_submul_1): Do not use BP_SYM.
	* sysdeps/i386/i686/add_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM.
	* sysdeps/i386/i686/bzero.S (__bzero): Do not use BP_SYM in
	weak_alias.
	(bzero): Likewise.
	* sysdeps/i386/i686/memcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(BLK2): Likewise.
	(LEN): Likewise.
	(memcmp): Do not use BP_SYM.
	(bcmp): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i686/memcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memcpy): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/memmove.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memmove): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/mempcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(__mempcpy): Likewise.  Do not use BP_SYM.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i686/memset.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(LEN): Likewise.
	[!BZERO_P] (CHR): Likewise.
	(memset): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/strcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR2): Likewise.
	(strcmp): Do not use BP_SYM.
	* sysdeps/i386/i686/strtok.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(DELIM): Likewise.
	[USE_AS_STRTOK_R] (SAVE): Likewise.
	(FUNCTION): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/strtok_r.S (__strtok_r): Do not use BP_SYM in
	aliases.
	(strtok_r): Likewise.
	(__GI___strtok_r): Likewise.
	* sysdeps/i386/lshift.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_lshift): Do not use BP_SYM.
	* sysdeps/i386/memchr.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__memchr): Do not use BP_SYM.
	(memchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/memcmp.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(BLK2): Likewise.
	(LEN): Likewise.
	(memcmp): Do not use BP_SYM.
	(bcmp): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/mul_1.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_mul_1): Do not use BP_SYM.
	* sysdeps/i386/rawmemchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__rawmemchr): Do not use BP_SYM.
	(rawmemchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/rshift.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_rshift): Do not use BP_SYM.
	* sysdeps/i386/setjmp.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(__sigsetjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/start.S: Do not include "bp-sym.h".
	(_start): Do not use BP_SYM.
	* sysdeps/i386/stpcpy.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(__stpcpy): Likewise.  Do not use BP_SYM.
	(stpcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/stpncpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(__stpncpy): Likewise.  Do not use BP_SYM.
	(stpncpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/strchr.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strchr): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strchrnul.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__strchrnul): Likewise.  Do not use BP_SYM.
	(strchrnul): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/strcspn.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STOP): Likewise.
	(strcspn): Do not use BP_SYM.
	* sysdeps/i386/strpbrk.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(STOP): Likewise.
	(strpbrk): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strrchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strrchr): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strspn.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SKIP): Likewise.
	(strspn): Do not use BP_SYM.
	* sysdeps/i386/strtok.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(DELIM): Likewise.
	(SAVE): Likewise.
	(FUNCTION): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strtok_r.S (__strtok_r): Do not use BP_SYM in
	aliases.
	(strtok_r): Likewise.
	(__GI___strtok_r): Likewise.
	* sysdeps/i386/sub_n.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_sub_n): Do not use BP_SYM.
	* sysdeps/i386/submul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_submul_1): Do not use BP_SYM.
	* sysdeps/unix/i386/sysdep.S: Do not include <bp-asm.h> and
	<bp-sym.h>.
	* sysdeps/unix/sysv/linux/i386/clone.S: Do not include <bp-sym.h>
	and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(FLAGS): Likewise.
	(PTID): Likewise.
	(TLS): Likewise.
	(CTID): Likewise.
	(__clone): Do not use BP_SYM.
	(clone): Do not use BP_SYM in weak_alias.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Do not include <bp-sym.h>
	and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(LEN): Likewise.
	(__mmap64): Do not use BP_SYM.
	(mmap64): Do not use BP_SYM in weak_alias.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Do not include
	<bp-sym.h> and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(__posix_fadvise64_l64): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S
	(PARMS): Do not use macros from bp-asm.h.
	(NSOPS): Likewise.
	(semtimedop): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Do not include <bp-sym.h>
	and <bp-asm.h>.

2013-02-21  Allan McRae  <allan@archlinux.org>

	* manual/message.texi (Charset conversion in gettext):
	Move @end statement to beginning of line.

2013-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__inv): Mark as
	static.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__inv):
	Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (norm): Fix whitespace.
	(denorm): Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (norm): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (norm): Likewise.

2013-02-21  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/dl-trampoline.S (_dl_runtime_profile): Do a
	tail-call to the resolved function if pltexit isn't needed.

2013-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Mark X
	or Y being zero as being unlikely.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul):
	Likewise.

2013-02-20  Carlos O'Donell  <carlos@redhat.com>

	* manual/nss.texi (System Databases and Name Service Switch):
	Remove frobnicate @pxref.

2013-02-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/ieee754/bits/nan.h [!__GNUC__] (__nan_union): Change
	__attribute__ ((unused)) to __attribute__ ((__unused__)).

2013-02-20  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (R_ARM_TARGET1): New macro.
	(R_ARM_SBREL31, R_ARM_V4BX, R_ARM_TARGET2): Likewise.
	(R_ARM_PREL31, R_ARM_MOVW_ABS_NC, R_ARM_MOVT_ABS): Likewise.
	(R_ARM_MOVW_PREL_NC, R_ARM_MOVT_PREL): Likewise.
	(R_ARM_THM_MOVW_ABS_NC, R_ARM_THM_MOVT_ABS): Likewise.
	(R_ARM_THM_MOVW_PREL_NC, R_ARM_THM_MOVT_PREL): Likewise.
	(R_ARM_THM_JUMP19, R_ARM_THM_JUMP6): Likewise.
	(R_ARM_THM_ALU_PREL_11_0, R_ARM_THM_PC12): Likewise.
	(R_ARM_ABS32_NOI, R_ARM_REL32_NOI): Likewise.
	(R_ARM_ALU_PC_G0_NC, R_ARM_ALU_PC_G0): Likewise.
	(R_ARM_ALU_PC_G1_NC, R_ARM_ALU_PC_G1): Likewise.
	(R_ARM_ALU_PC_G2, R_ARM_LDR_PC_G1, R_ARM_LDR_PC_G2): Likewise.
	(R_ARM_LDRS_PC_G0, R_ARM_LDRS_PC_G1): Likewise.
	(R_ARM_LDRS_PC_G2, R_ARM_LDC_PC_G0): Likewise.
	(R_ARM_LDC_PC_G1, R_ARM_LDC_PC_G2): Likewise.
	(R_ARM_ALU_SB_G0_NC, R_ARM_ALU_SB_G0): Likewise.
	(R_ARM_ALU_SB_G1_NC, R_ARM_ALU_SB_G1): Likewise.
	(R_ARM_ALU_SB_G2, R_ARM_LDR_SB_G0, R_ARM_LDR_SB_G1): Likewise.
	(R_ARM_LDR_SB_G2, R_ARM_LDRS_SB_G0): Likewise.
	(R_ARM_LDRS_SB_G1, R_ARM_LDRS_SB_G2): Likewise.
	(R_ARM_LDC_SB_G0, R_ARM_LDC_SB_G1, R_ARM_LDC_SB_G2): Likewise.
	(R_ARM_MOVW_BREL_NC, R_ARM_MOVT_BREL): Likewise.
	(R_ARM_MOVW_BREL, R_ARM_THM_MOVW_BREL_NC): Likewise.
	(R_ARM_THM_MOVT_BREL, R_ARM_THM_MOVW_BREL): Likewise.
	(R_ARM_PLT32_ABS, R_ARM_GOT_ABS, R_ARM_GOT_PREL): Likewise.
	(R_ARM_GOT_BREL12, R_ARM_GOTOFF12, R_ARM_GOTRELAX): Likewise.
	(R_ARM_TLS_LDO12, R_ARM_TLS_LE12, R_ARM_TLS_IE12GP): Likewise.
	(R_ARM_PRIVATE_0, R_ARM_PRIVATE_1, R_ARM_PRIVATE_2): Likewise.
	(R_ARM_PRIVATE_3, R_ARM_PRIVATE_4, R_ARM_PRIVATE_5): Likewise.
	(R_ARM_PRIVATE_6, R_ARM_PRIVATE_7, R_ARM_PRIVATE_8): Likewise.
	(R_ARM_PRIVATE_9, R_ARM_PRIVATE_10): Likewise.
	(R_ARM_PRIVATE_11, R_ARM_PRIVATE_12): Likewise.
	(R_ARM_PRIVATE_13, R_ARM_PRIVATE_14): Likewise.
	(R_ARM_PRIVATE_15, R_ARM_ME_TOO): Likewise.
	(R_ARM_THM_TLS_DESCSEQ16, R_ARM_THM_TLS_DESCSEQ32): Likewise.
	(R_ARM_THM_GOT_BREL12): Likewise.
	(R_ARM_PC24, R_ARM_PLT32): Updated a comment at this macro.
	(R_ARM_THM_PC11, R_ARM_THM_PC9): Likewise.
	(R_ARM_THM_ABS5, R_ARM_THM_PC22): Added a comment to this macro.
	(R_ARM_THM_PC8, R_ARM_THM_SWI8, R_ARM_XPC25): Likewise.
	(R_ARM_THM_XPC22, R_ARM_ALU_PCREL_7_0): Likewise.
	(R_ARM_ALU_PCREL_15_8, R_ARM_ALU_PCREL_23_15): Likewise.
	(R_ARM_LDR_SBREL_11_0, R_ARM_ALU_SBREL_19_12): Likewise.
	(R_ARM_ALU_SBREL_27_20, R_ARM_TLS_DESCSEQ): Likewise.
	(R_ARM_THM_TLS_DESCSEQ): Fixed whitespace.

2013-02-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/ieee754/bits/nan.h [!__GNUC__] (__nan_union): Change
	__attribute_used__ to __attribute__ ((unused)).

2013-02-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): Copy over comment from
	powerpc mpa.c.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Fix
	comment formatting.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul): Likewise.

2013-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/i386/bp-asm.h [__BOUNDED_POINTERS__] (BOUNDS_VIOLATED):
	Remove macro.
	(ENTER): Remove both macro definitions.
	(LEAVE): Likewise.
	(CHECK_BOUNDS_LOW): Likewise.
	(CHECK_BOUNDS_HIGH): Likewise.
	(CHECK_BOUNDS_BOTH): Likewise.
	(CHECK_BOUNDS_BOTH_WIDE): Likewise.
	(RETURN_BOUNDED_POINTER): Likewise.
	(RETURN_NULL_BOUNDED_POINTER): Likewise.
	(PUSH_ERRNO_LOCATION_RETURN): Likewise.
	(POP_ERRNO_LOCATION_RETURN): Likewise.
	* sysdeps/i386/add_n.S (__mpn_add_n): Do not use removed macros.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/addmul_1.S (__mpn_addmul_1): Do not use removed
	macros.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/bsd-_setjmp.S (_setjmp): Do not use removed macros.
	* sysdeps/i386/bsd-setjmp.S (setjmp): Likewise.
	* sysdeps/i386/fpu/s_frexp.S (__frexp): Likewise.
	* sysdeps/i386/fpu/s_frexpf.S (__frexpf): Likewise.
	* sysdeps/i386/fpu/s_frexpl.S (__frexpl): Likewise.
	* sysdeps/i386/fpu/s_remquo.S (__remquo): Likewise.
	* sysdeps/i386/fpu/s_remquof.S (__remquof): Likewise.
	* sysdeps/i386/fpu/s_remquol.S (__remquol): Likewise.
	* sysdeps/i386/i486/strcat.S (strcat): Likewise.
	* sysdeps/i386/i486/strlen.S (strlen): Likewise.
	* sysdeps/i386/i586/add_n.S (__mpn_add_n): Likewise.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/addmul_1.S (__mpn_addmul_1): Do not use
	removed macros.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/lshift.S (__mpn_lshift): Do not use removed
	macros.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/memcpy.S (memcpy): Do not use removed macros.
	* sysdeps/i386/i586/memset.S (memset): Likewise.
	* sysdeps/i386/i586/mul_1.S (__mpn_mul_1): Likewise.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/rshift.S (__mpn_rshift): Do not use removed
	macros.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/strchr.S (strchr): Do not use removed macros.
	Change uses of L(2) to L(out).
	* sysdeps/i386/i586/strcpy.S (STRCPY): Do not use removed macros.
	* sysdeps/i386/i586/strlen.S (strlen): Likewise.
	* sysdeps/i386/i586/sub_n.S (__mpn_sub_n): Likewise.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/submul_1.S (__mpn_submul_1): Do not use
	removed macros.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/add_n.S (__mpn_add_n): Do not use removed
	macros.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/memcmp.S (ENTRANCE): Do not use macro ENTER.
	(RETURN): Do not use macro LEAVE.
	* sysdeps/i386/i686/memcpy.S (memcpy): Do not use removed macros.
	* sysdeps/i386/i686/memmove.S (memmove): Likewise.
	* sysdeps/i386/i686/mempcpy.S (mempcpy): Likewise.
	* sysdeps/i386/i686/memset.S (memset): Likewise.
	* sysdeps/i386/i686/strcmp.S (strcmp): Likewise.
	(strcmp) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/strtok.S (save_ptr) [__BOUNDED_POINTERS__]:
	Likewise.
	(save_ptr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(FUNCTION): Do not use removed macros.  Combine labels L(1_1),
	L(1_2) and L(1_3) into L(1).
	(FUNCTION) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/lshift.S (__mpn_lshift): Do not use removed macros.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/memchr.S (__memchr): Do not use removed macros.
	(__memchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/memcmp.S (memcmp): Do not use removed macros.
	* sysdeps/i386/mul_1.S (__mpn_mul_1): Likewise.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/rawmemchr.S (__rawmemchr): Do not use removed
	macros.
	* sysdeps/i386/rshift.S (__mpn_rshift): Likewise.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/setjmp.S (__sigsetjmp): Do not use removed macros.
	* sysdeps/i386/stpcpy.S (__stpcpy): Likewise.
	* sysdeps/i386/stpncpy.S (__stpncpy): Likewise.
	(__stpncpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/strchr.S (strchr): Do not use removed macros.
	* sysdeps/i386/strchrnul.S (__strchrnul): Likewise.
	* sysdeps/i386/strcspn.S (strcspn): Likewise.
	* sysdeps/i386/strpbrk.S (strpbrk): Likewise.
	* sysdeps/i386/strrchr.S (strrchr): Likewise.
	* sysdeps/i386/strspn.S (strspn): Likewise.
	* sysdeps/i386/strtok.S (save_ptr) [__BOUNDED_POINTERS__]: Remove
	conditional code.
	(save_ptr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(FUNCTION) [!__BOUNDED_POINTERS__]: Likewise.
	(FUNCTION) [__BOUNDED_POINTERS__]: Remove conditional code.
	(FUNCTION): Do not use removed macros.  Combine labels L(1_2) and
	L(1_3) into L(1_1).
	* sysdeps/i386/sub_n.S (__mpn_sub_n): Do not use removed macros.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/submul_1.S (__mpn_submul_1): Do not use removed
	macros.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.

2013-02-19  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/strtod_l.c (__mpn_lshift_1): Rewritten as function-like
	macro.

2013-02-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* math/atest-exp.c (exp_mpn): Remove ROUND.
	* math/atest-exp2.c (exp_mpn): Likewise.
	* math/atest-sincos.c (sincosx_mpn): Remove ROUND and CHK.

	* stdlib/cxa_thread_atexit_impl.c: Fix Copyright year.
	* stdlib/tst-tls-atexit-lib.c: Likewise.
	* stdlib/tst-tls-atexit.c: Likewise.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* stdlib/stdlib.h (aligned_alloc): Use __attribute_malloc__
	and __attribute_alloc_size__.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* include/programs/xmalloc.h: Change __attribute_alloc_size to
	__attribute_alloc_size__.
	* include/sys/cdefs.h (__attribute_alloc_size): Macro removed.
	* misc/sys/cdefs.h (__attribute_alloc_size__): New macro.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* include/programs/xmalloc.h: New file.
	* catgets/gencat.c: Include it.
	(xmalloc, xcalloc, xrealloc, xstrdup): Don't declare them.
	* elf/pldd.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/strtab.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.h: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* nscd/nscd.h: Likewise.
	* nss/makedb.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.

2013-02-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Versions.def: Add GLIBC_2.18.
	* include/link.h (struct link_map): New member l_tls_dtor_count.
	* include/stdlib.h (__cxa_thread_atexit_impl): Declare.
	(__call_tls_dtors): Likewise.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Add
	__cxa_thread_atexit_impl.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist:
	Likewise.
	* stdlib/Makefile (routines): Add __cxa_thread_atexit_impl.
	(tests): Add test case tst-tls-atexit.
	(modules-names): Add shared library for tst-tls-atexit.
	* stdlib/Versions (GLIBC_2.18): Add __cxa_thread_atexit_impl.
	(GLIBC_PRIVATE): Add __call_tls_dtors.
	* stdlib/cxa_thread_atexit_impl.c: New file with helper function
	for libstdc++.
	* stdlib/exit.c (__run_exit_handlers): Call __call_tls_dtors.
	* stdlib/tst-tls-atexit.c: New test case.
	* stdlib/tst-tls-atexit-lib.c: New test case.

	* misc/tst-pselect.c: Include stdlib.h for declaration of exit.

	* elf/Versions (ld): Add _dl_find_dso_for_object.
	* elf/dl-addr.c (_dl_addr): Use _dl_find_dso_for_object.
	* elf/dl-open.c (_dl_find_dso_for_object): New function.
	(dl_open_worker): Use _dl_find_dso_for_object.
	* elf/dl-sym.c (do_sym): Likewise.
	* sysdeps/generic/ldsodefs.h: Declare _dl_find_dso_for_object.

2013-02-18  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-64/dl-trampoline.S (_dl_runtime_resolve):
	Syntactic changes only.
	(_dl_runtime_profile): Do a tail-call to the resolved function.

2013-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/x86_64/bp-asm.h: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Do not include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Do not include
	<bp-sym.h> and <bp-asm.h>.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/bsd-_setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(_setjmp): Do not use BP_SYM.
	* sysdeps/x86_64/bsd-setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(setjmp): Do not use BP_SYM.
	* sysdeps/x86_64/mempcpy.S (__mempcpy): Do not use BP_SYM in
	libc_hidden_def.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/x86_64/rtld-strchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(strchr): Do not use BP_SYM.
	* sysdeps/x86_64/rtld-strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	* sysdeps/x86_64/setjmp.S (__sigsetjmp): Do not use BP_SYM.
	* sysdeps/x86_64/start.S: Do not include "bp-sym.h".
	(_start): Do not use BP_SYM.
	* sysdeps/x86_64/strcat.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(strcat): Do not use BP_SYM.
	* sysdeps/x86_64/strcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(STRCMP): Do not use BP_SYM.
	* sysdeps/x86_64/strcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(STRCPY): Do not use BP_SYM.
	* sysdeps/x86_64/strcpy_chk.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	* sysdeps/x86_64/strtok.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(FUNCTION): Do not use BP_SYM.
	* sysdeps/x86_64/strtok_r.S (strtok_r): Do not use BP_SYM in
	weak_alias.
	(__GI___strtok_r): Do not use BP_SYM in strong_alias.

2013-02-17  Andreas Jaeger  <aj@suse.de>

	* time/Versions: Sort entries.
	* string/Versions: Likewise.
	* resolv/Versions: Likewise.
	* posix/Versions: Likewise.
	* iconv/Versions: Likewise.
	* elf/Versions: Likewise.
	* wcsmbs/Versions: Likewise.

2013-02-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): Avoid using LIM in
	loop termination condition.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Use intermediate
	variable to calculate EZ.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Fix determination of
	the lower precision input.

2013-02-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* Makeconfig [!+link-bounded] (+link-bounded): Remove variable.
	[!link-extra-libs] (link-extra-libs-bounded): Likewise.
	(run-via-rtld-prefix): Do not handle %-bp tests.
	(test-via-rtld-prefix): Do not mention %-bp tests in comment.
	(all-object-suffixes): Remove .ob.
	(bppfx): Remove variable.
	[$(build-bounded) = yes] (object-suffixes): Do not add .ob.
	[$(build-bounded) = yes] (CPPFLAGS-.ob): Remove variable.
	[$(build-bounded) = yes] (CFLAGS-.ob): Likewise.
	[$(build-bounded) = yes] (libtype.ob): Likewise.
	* Makerules (elide-routines.ob): Remove variable.
	(do-tests-clean): Do not handle *-bp.out.
	(common-mostlyclean): Do not handle *-bp and *-bp.out.
	* Rules [$(build-bounded) = yes] (tests-bp.out): Remove variable.
	[$(build-bounded) = yes] (xtests-bp.out): Likewise.
	(tests): Do not include $(tests-bp.out).
	(xtests): Do not include $(xtests-bp.out).
	[$(build-bounded) = yes] (binaries-bounded): Remove variable.
	[$(build-bounded) = yes] ($(addprefix
	$(objpfx),$(binaries-bounded))): Remove rule.
	($(objpfx)%-bp.out): Remove rule.
	* config.make.in (build-bounded): Remove variable.
	* crypt/Makefile [$(build-bounded) = yes]
	($(tests:%=$(objpfx)%-bp)): Remove dependency.
	* csu/Makefile [$(build-bounded) = yes] (extra-objs): Do not
	append to variable.
	[$(build-bounded) = yes] (install-lib): Likewise.
	[$(build-bounded) = yes] (generated): Likewise.
	[!start-installed-name-rule] ($(objpfx)b$(start-installed-name)):
	Remove rule.
	* intl/Makefile [$(build-bounded) = yes]
	($(multithread-test-srcs:%=$(objpfx)%-bp)): Remove dependency.
	* math/Makefile [$(build-bounded) = yes]
	($(tests:%=$(objpfx)%-bp): Likewise.
	* misc/Makefile [$(build-bounded) = yes]
	($(objpfx)tst-tsearch-bp): Likewise.
	* nptl/Makeconfig (bounded-thread-library): Remove variable.
	* rt/Makefile [$(build-bounded) = yes] ($(tests:%=$(objpfx)%-bp)):
	Remove dependency.
	* string/Makefile (o-objects.ob): Remove variable.
	* sysdeps/i386/i686/Makefile [$(config-asflags-i686) = yes]
	(CFLAGS-.ob): Remove variable.
	[$(config-asflags-i686) = yes] (ASFLAGS-.ob): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-.ob): Remove
	both definitions of variable.
	* sysdeps/sparc/sparc64/Makefile [$(have-as-vis3) = yes]
	(ASFLAGS-.ob): Remove variable.

2013-02-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* config.h.in [USE_REGPARMS && !PROF && !__BOUNDED_POINTERS__]:
	Remove __BOUNDED_POINTERS__ from condition.
	* elf/dl-runtime.c [!PROF && !__BOUNDED_POINTERS__]: Likewise.
	* string/bits/string2.h [!__NO_STRING_INLINES &&
	!__BOUNDED_POINTERS__]: Likewise.
	* sysdeps/i386/dl-machine.h [!PROF && !__BOUNDED_POINTERS__]:
	Likewise.
	* sysdeps/unix/sysv/linux/shmat.c (shmat) [__BOUNDED_POINTERS__]:
	Remove conditional code.
	* sysdeps/x86/bits/string.h [!__NO_STRING_INLINES &&
	__USE_STRING_INLINES && __GNUC__ && __GNUC__ >= 2 &&
	!__BOUNDED_POINTERS__]: Remove __BOUNDED_POINTERS__ from
	condition.

	[BZ #13550]
	* csu/libc-start.c: Do not include <bp-sym.h>.
	[!LIBC_START_MAIN] (LIBC_START_MAIN): Do not use BP_SYM.
	* elf/dl-open.c: Do not include <bp-sym.h>.
	(_dl_sysdep_start): Do not use BP_SYM in weak_extern.
	* math/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* nptl/sysdeps/pthread/bits/libc-lockP.h
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]: Do not include
	<bp-sym.h>.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_init): Do not use BP_SYM in weak_extern.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_lock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_trylock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_unlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_init): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_settype): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_init): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_rdlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_tryrdlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_wrlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_trywrlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_unlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_key_create): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_setspecific): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_getspecific): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern] (__pthread_once):
	Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(_pthread_cleanup_push_defer): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(_pthread_cleanup_pop_restore): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(pthread_setcancelstate): Likewise.
	* string/memchr.c [HAVE_BP_SYM_H || _LIBC]: Do not include
	<bp-sym.h>.
	[!(HAVE_BP_SYM_H || _LIBC)] (BP_SYM): Remove macro definition.
	(memchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/fpu/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/fesetenv.c: Do not include <bp-sym.h>.
	(fesetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/feupdateenv.c: Do not include <bp-sym.h>.
	(feupdateenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/fsetexcptflg.c: Do not include <bp-sym.h>.
	(fesetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/posix/open64.c: Do not include <bp-sym.h>.
	(__open64): Do not use BP_SYM in weak_alias and libc_hidden_weak.
	(open64): Do not use BP_SYM in weak_alias.
	* sysdeps/powerpc/fpu/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fesetenv.c: Do not include <bp-sym.h>.
	(fesetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/feupdateenv.c: Do not include <bp-sym.h>.
	(feupdateenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fgetexcptflg.c: Do not include <bp-sym.h>.
	(fegetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fraiseexcpt.c: Do not include <bp-sym.h>.
	(feraiseexcept): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fsetexcptflg.c: Do not include <bp-sym.h>.
	(fesetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Do not include
	<bp-sym.h>.
	(__libc_start_main): Do not use BP_SYM.

2013-02-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__cpy): Remove
	redundant return line.
	(norm): Likewise.
	(denorm): Likewise.
	(dbl_mp): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(dbl_mp): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Use __sqr
	instead of __mul.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (ss32): Likewise.
	(cc32): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): New function.
	* sysdeps/ieee754/dbl-64/mpa.h (__sqr): Declare.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): use __sqr instead
	of __mul for squares.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__sqr): New
	function
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__sqr):
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: Define __sqr.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.

2013-02-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* misc/sys/cdefs.h [!__BOUNDED_POINTERS__]: Remove conditional
	code.
	* csu/libc-start.c (LIBC_START_MAIN): Do not use __unbounded in
	prototype or function definition.  Rename ubp_* variables and
	parameters.  Remove argv definitions conditional on
	[__BOUNDED_POINTERS__].
	* debug/backtrace.c (__backtrace): Do not use __unbounded.
	* elf/dl-runtime.c (_dl_fixup): Likewise.
	* include/set-hooks.h (RUN_HOOK): Likewise.
	* stdio-common/vfprintf.c (JUMP): Do not use __unbounded in either
	definition.
	* string/strcpy.c (strcpy): Do not use __unbounded.
	* sysdeps/generic/frame.h (struct layout): Likewise.
	* sysdeps/gnu/bits/msq.h (struct msqid_ds): Likewise.
	* sysdeps/i386/dl-machine.h (_dl_fixup): Likewise.
	* sysdeps/powerpc/powerpc32/backtrace.c (struct layout): Likewise.
	* sysdeps/powerpc/powerpc64/backtrace.c (struct layout): Likewise.
	* sysdeps/sparc/backtrace.c (struct layout): Likewise.
	(__backtrace): Likewise.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c (__aio_sigqueue): Do not
	use __ptrvalue.
	* sysdeps/unix/sysv/linux/fxstat.c (__fxstat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/gai_sigqueue.c (__gai_sigqueue):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/brk.c (__brk): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/msgctl.c (struct __old_msqid_ds):
	Do not use __unbounded.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c (__new_setrlimit):
	Rename __unboundedrlimits parameter to rlimits in prototype.
	* sysdeps/unix/sysv/linux/i386/shmctl.c (struct __old_shmid_ds):
	Do not use __unbounded.
	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_sigaction): Do
	not use __ptrvalue.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/llseek.c (__llseek): Likewise.
	* sysdeps/unix/sysv/linux/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Do not use
	__ptrvalue or __unbounded.
	(__mmap64) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/msgctl.c (struct __old_msqid_ds): Do not
	use __unbounded.
	(__new_msgctl): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/msgrcv.c (struct ipc_kludge): Do not use
	__unbounded.
	(__libc_msgrcv): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c (struct
	startup_info): Do not use __unbounded.
	(__libc_start_main): Likewise.  Rename ubp_* variables and
	parameters.  Remove argv definitions conditional on
	[__BOUNDED_POINTERS__].
	* sysdeps/unix/sysv/linux/ptrace.c (ptrace): Do not use
	__ptrvalue.
	* sysdeps/unix/sysv/linux/semctl.c (struct __old_semid_ds): Do not
	use __unbounded.
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Do not use __unbounded
	or __ptrvalue.
	* sysdeps/unix/sysv/linux/shmctl.c (struct __old_shmid_ds): Do not
	use __unbounded.
	(__new_shmctl): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/shmdt.c (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/sigqueue.c (__sigqueue): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c
	(__libc_sigaction): Likewise.
	* sysdeps/unix/sysv/linux/sysctl.c (__sysctl): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/xstat.c (__xstat): Likewise.

2013-02-13   Ondřej Bílka  <neleai@seznam.cz>

	* stdlib/Makefile (headers): Add bits/stdlib-bsearch.h.

	* string/mempcpy.c: Implement by calling memcpy.

2013-02-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove NFA.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Faster polynomial
	evaluation.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Don't bother with zero
	values in the mantissa.

	* sysdeps/ieee754/dbl-64/mpa.c (add_magnitudes): Use ZK to
	minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.

2013-02-12  Roland McGrath  <roland@hack.frob.com>

	* include/libc-symbols.h (stub_warning): Remove "warning: " prefix
	from the message.  The linker prefixes all warnings with that already.

2013-02-12  Andreas Schwab  <schwab@suse.de>

	[BZ #15078]
	* posix/regexec.c (extend_buffers): Add parameter min_len.
	(check_matching): Pass minimum needed length.
	(clean_state_log_if_needed): Likewise.
	(get_subexp): Likewise.
	* posix/Makefile (tests): Add bug-regex34.
	(bug-regex34-ENV): Define.
	* posix/bug-regex34.c: New file.

	[BZ #11561]
	* posix/regcomp.c (parse_bracket_exp): When looking up collating
	elements compare against the byte sequence of it, not its name.
	* posix/Makefile (tests): Add bug-regex35.
	(bug-regex35-ENV): Define.
	* posix/bug-regex35.c: New file.

2013-02-11  Tom de Vries  <tom@codesourcery.com>

	* string/str-two-way.h:  Fix typo RESULT_TYPE -> RETURN_TYPE in
	comment.
	Add RET0_IF_0 and CHECK_EOL to macro list in comment.
	(AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J): Remove superfluous undef.
	(CHECK_EOL): Add undef.

2013-02-11   Ondřej Bílka  <neleai@seznam.cz>

	* bits/stdlib-bsearch.h: New file.
	* stdlib/bsearch.c: Include bits/stdlib-bsearch.h.
	* stdlib/stdlib.h: Likewise.

2013-02-11  Roland McGrath  <roland@hack.frob.com>

	* manual/conf.texi (General Limits): Fix SSIZE_MAX type to ssize_t.
	* manual/errno.texi (Error Messages): Fix typo in error_print_progname
	declaration.
	* manual/search.texi (Array Search Function): Add missing const in
	lfind prototype.
	* manual/resource.texi (Limits on Resources): Fix RLIM_INFINITY
	declaration to use rlim_t.
	(Basic Scheduling Functions): Remove erroneous const from
	sched_getparam prototype.  Remove erroneous * from
	sched_get_priority_max and sched_get_priority_min prototypes.
	(Resource Usage): Fix summary @comment on vtimes to refer to
	sys/vtimes.h rather than vtimes.h.
	Add missing *s in vtimes prototype.
	(Limits on Resources): Fix ulimit prototype to return long int.
	* manual/math.texi (SVID Random): Fix lrand48_r and mrand48_r
	prototypes to use long int rather than double.
	(BSD Random): Fix initstate and setstate to use char *, not void *.
	* manual/llio.texi (Asynchronous Reads/Writes): Fix lio_listio64
	prototype to make second argument 'struct aiocb64 *const[]'.
	Fix aio_read64 and aio_write64 prototypes to use struct aiocb64.
	(Status of AIO Operations): Remove erroneous const in aio_return and
	aio_return64 prototypes.
	(Synchronizing I/O): Fix sync prototype to return void.
	* manual/startup.texi (Suboptions): Remove an erroneous const in
	getsubopt prototype.
	* manual/getopt.texi (Using Getopt): Add a const in getopt prototype.
	* manual/users.texi (Lookup Netgroup): Fix getnetgrent_r prototype to
	use size_t rather than int.
	(Scanning All Users): Likewise for getpwent_r.
	(Setting Groups): Add missing const to setgroups prototype.
	* manual/sysinfo.texi (mtab): Fix typo in getmntent_r prototype.
	* manual/socket.texi (Host Names): Fix gethostbyaddr and
	gethostbyaddr_r prototypes to use socklen_t rather than size_t and
	'const void *' rather than 'const char *'.
	(Host Address Functions): Likewise for inet_ntop.
	(Networks Database): Fix getnetbyaddr prototype to use uint32_t.
	(Receiving Data): Fix recv, recvfrom, recvmsg prototypes to use
	ssize_t for return value.
	(Sending Data): Likewise for send, sendto, sendmsg.
	(Socket Option Functions): Add a missing const in setsockopt prototype.
	* manual/stdio.texi (Simple Output): Fix fputwc_unlocked prototype to
	use wchar_t for the argument.
	(Formatted Input Functions): Fix swscanf prototype to use wchar_t *.
	* manual/arith.texi (Control Functions): Fix fegetexcept prototype to
	take no arguments.
	(Normalization Functions): Fix scalb, scalbf, scalbl prototypes to use
	double/float/long double for second argument.
	Fix return types of significand, significandf, significandl.
	* manual/filesys.texi (Setting Permissions): Use mode_t for second
	argument in fchmod prototype.
	(File Owner): Use uid_t and gid_t in fchown prototype.
	(File Times): Add const to utimes, futimes, and lutimes prototypes.
	(Making Special Files): Use mode_t and dev_t in mknod prototype.
	(Scanning Directory Content): Fix scandir and scandir64 prototypes to
	use 'const struct dirent **' as argument types to CMP function pointer
	argument.
	(Symbolic Links): Fix readlink prototype with ssize_t as return value.
	(File Times): Fix summary magic @comment for struct utimbuf and utime
	to refer to utime.h, not time.h.
	* manual/string.texi (Argz Functions): Add missing const in
	argz_extract and argz_next prototypes.
	(Finding Tokens in a String): Likewise for basename.
	(String/Array Comparison): Fix typo in wcscasecmp prototype.
	(Copying and Concatenation): Fix typo in wmemmove prototype.
	* manual/signal.texi (Using Pause): Use (void) in pause prototype.
	(Signal Stack): Remove erroneous const in sigstack prototype.
	* manual/time.texi (Setting an Alarm): Add missing const in setitimer
	prototype.
	(Simple Calendar Time): Likewise for stime.
	* manual/terminal.texi (BSD Terminal Modes): Add missing const in stty
	prototype.
	* manual/sysinfo.texi (System Parameters): Fix mentions of sysctl.h to
	say sys/sysctl.h instead.
	* manual/syslog.texi (syslog; vsyslog): Add missing const in syslog
	and vsyslog prototypes.

2013-02-11  Tom de Vries  <tom@codesourcery.com>

	* string/Makefile (CFLAGS-bug-strstr1.c, CFLAGS-bug-strcasestr1.c):
	Remove.

2013-02-11  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/mman.h: Fix typo in mremap comment.

2013-02-08  Roland McGrath  <roland@hack.frob.com>

	* manual/examples/mkfsock.c (make_named_socket): Don't add one for
	the '\0' terminator.

2013-02-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* debug/segfault.c: Don't include <bp-checks.h>.
	* sysdeps/generic/bp-checks.h: Remove file.
	* sysdeps/unix/sysv/linux/getdents.c: Don't include <bp-checks.h>.
	(__GETDENTS): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/i386/brk.c: Don't include <bp-checks.h>.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Likewise.
	(__getgroups): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.
	(setgroups): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/mmap64.c: Don't include <bp-checks.h>.
	* sysdeps/unix/sysv/linux/msgrcv.c: Likewise.
	(__libc_msgrcv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/msgsnd.c: Don't include <bp-checks.h>.
	(__libc_msgsnd): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c: Don't include
	<bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c: Don't
	include <bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Don't include
	<bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Don't
	include <bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pread.c: Don't include <bp-checks.h>.
	(do_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pread64.c: Don't include <bp-checks.h>.
	(do_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pwrite.c: Don't include <bp-checks.h>.
	(do_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pwrite64.c: Don't include <bp-checks.h>.
	(do_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/readv.c: Don't include <bp-checks.h>.
	(__libc_readv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/semop.c: Don't include <bp-checks.h>.
	(semop): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/semtimedop.c: Don't include
	<bp-checks.h>.
	(semtimedop): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pread.c: Don't include <bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Don't include
	<bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Don't include
	<bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Don't include
	<bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c: Don't include
	<bp-checks.h>.
	(__libc_msgrcv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sysctl.c: Don't include <bp-checks.h>.
	(__sysctl): Don't use CHECK_N.  Remove GKM FIXME comment.
	* sysdeps/unix/sysv/linux/writev.c: Don't include <bp-checks.h>.
	(__libc_writev): Don't use CHECK_N.

2013-02-08  Roland McGrath  <roland@hack.frob.com>

	* string/strcpy.c: Removed unused variable.

	* Makeconfig (+sysdep-includes): Define with := rather than =.
	Use an existing include/ subdir of each sysdeps dir before it.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	* nscd/connection.c (register_traced_file): Comment function.
	[HAVE_INOTIFY] (union __inev): Define.
	[HAVE_INOTIFY] (inotify_check_files): New function.
	[HAVE_INOTIFY] (clear_db_cache): Likewise.
	[HAVE_INOTIFY] (main_loop_poll): Call inotify_check_files and
	clear_db_cache.
	[HAVE_INOTIFY] (main_loop_epoll): Likewise.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-cache.c (_dl_load_cache_lookup): Comment that cache is
	loaded if not already and that a failure is permanent.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15006]
	* sysdeps/generic/ldconfig.h: Define FLAG_ARM_LIBSF.
	* elf/cache.c (print_entry): Add FLAG_ARM_LIBSF support.

2013-02-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_1): Remove all definitions.
	(CHECK_1_NULL_OK): Likewise.
	* sysdeps/unix/sysv/linux/fxstat.c: Do not include <bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstat64.c: Do not include
	<bp-checks.h>.
	(___fxstat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstatat64.c: Do not include
	<bp-checks.h>.
	(__fxstatat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Do not include
	<bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Do not include
	<bp-checks.h>.
	(__getresgid): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Do not include
	<bp-checks.h>.
	(__getresuid): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Do not include
	<bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Do not include
	<bp-checks.h>.
	(__old_msgctl): Do not use CHECK_1.
	(__new_msgctl): Likewise.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Do not include
	<bp-checks.h>.
	(__new_setrlimit): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Do not include
	<bp-checks.h>.
	(__old_shmctl): Do not use CHECK_1.
	(__new_shmctl): Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Do not include
	<bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/lxstat.c: Do not include <bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/lxstat64.c: Do not include
	<bp-checks.h>.
	(___lxstat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/msgctl.c: Do not include <bp-checks.h>.
	(__old_msgctl): Do not use CHECK_1.
	(__new_msgctl): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Do not include
	<bp-checks.h>.
	(__gettimeofday): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/ptrace.c: Do not include <bp-checks.h>.
	(ptrace) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Do not include
	<bp-checks.h>.
	(__gettimeofday): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/shmctl.c: Do not include <bp-checks.h>.
	(__old_shmctl): Do not use CHECK_1_NULL_OK.
	(__new_shmctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: Do not include
	<bp-checks.h>.
	(do_sigtimedwait): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Do not include
	<bp-checks.h>.
	(do_sigwaitinfo): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgctl.c: Do not include
	<bp-checks.h>.
	(msgctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shmctl.c: Do not include
	<bp-checks.h>.
	(shmctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/ustat.c: Do not include <bp-checks.h>.
	(ustat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstat.c: Do not include
	<bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/lxstat.c: Do not include
	<bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/xstat.c: Do not include
	<bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/xstat.c: Do not include <bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/xstat64.c: Do not include <bp-checks.h>.
	(___xstat64): Do not use CHECK_1.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_BOUNDS_LOW): Remove all
	definitions.
	(CHECK_BOUNDS_HIGH): Likewise.
	* string/strcpy.c: Do not include <bp-checks.h>.
	(strcpy): Do not use CHECK_BOUNDS_LOW and CHECK_BOUNDS_HIGH.

2013-02-07  Roland McGrath  <roland@hack.frob.com>

	* nscd/nscd-client.h (__nscd_drop_map_ref):
	Add __attribute__ ((unused)).
	* nis/nss-nisplus.h (niserr2nss): Likewise.

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu): Define it only
	under [!(USE_AS_STRCASESTR && STRCASESTR_NONASCII)].

	* csu/libc-tls.c (init_static_tls, init_slotinfo):
	Remove inline keyword.
	* include/rounding-mode.h (round_away): Likewise.
	* libio/wfileops.c (adjust_wide_data): Likewise.
	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu): Likewise.
	(__m128i_strloadu_tolower): Likewise.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c
	(__m128i_strloadu_tolower): Likewise.
	* time/mktime.c (ydhms_diff): Likewise.
	* locale/elem-hash.h (elem_hash): Likewise.
	* locale/setlocale.c (setdata): Likewise.
	* posix/regex_internal.h (re_string_char_size_at): Likewise.
	(re_string_wchar_at): Likewise.
	(bitset_not, bitset_merge, bitset_mask): Likewise.
	[!(__GNUC__ > 3)] (inline): Remove macro.
	* nscd/nscd-client.h (__nscd_drop_map_ref): Remove inline keyword.
	* elf/dl-deps.c (_dl_map_object_deps: preload): Likewise.
	* elf/tlsdeschtab.h (_dl_tlsdesc_resolve_early_return_p): Likewise.
	(_dl_tlsdesc_wake_up_held_fixups): Likewise.
	* string/memcmp.c (memcmp_bytes): Likewise.
	* locale/programs/locarchive.c (compute_hashval): Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c (mul_split): Likewise.
	* sysdeps/unix/sysv/linux/fips-private.h (fips_enabled_p): Likewise.
	* resolv/res_send.c (evNowTime, evCmpTime): Likewise.
	* nss/getent.c (print_rpc, print_protocols): Likewise.
	(print_passwd, print_group, print_aliases): Likewise.
	* nis/nss-nisplus.h (niserr2nss): Likewise.
	* nscd/connections.c (restart_p): Likewise.
	Change return type to bool.

2013-02-05  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (all-Depend-files): Add existing
	$(sorted-subdirs:=/Depend) files.
	(all-subdirs): Remove nss.
	* sysdeps/unix/inet/Subdirs: Add it here instead.
	* hesiod/Depend: New file.

	* elf/dl-hwcaps.c (_dl_important_hwcaps): Use a variable-length array
	instead of calling alloca.

	* io/lseek.c (__lseek): Rename to __libc_lseek.
	Define __lseek as an alias.

	* sysdeps/generic/malloc-sysdep.h: Include <stdbool.h> and <unistd.h>.

2013-02-04  Carlos O'Donell  <carlos@redhat.com>

	* stdlib/getenv.c (getenv): Assume __BIG_ENDIAN in the
	else clause and remove check for non-standard endianness.

2013-02-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-02-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h [__BOUNDED_POINTERS__]
	(__ubp_memchr): Remove prototype.
	[__BOUNDED_POINTERS__] (_CHECK_STRING): Remove macro.
	[__BOUNDED_POINTERS__] (CHECK_STRING): Likewise.
	[__BOUNDED_POINTERS__] (CHECK_STRING_NULL_OK): Likewise.
	[!__BOUNDED_POINTERS__] (CHECK_STRING): Likewise.
	* sysdeps/i386/memchr.S [!__BOUNDED_POINTERS__] (__ubp_memchr):
	Remove alias.
	* sysdeps/sparc/sparc32/memchr.S [!__BOUNDED_POINTERS__]
	(__ubp_memchr): Likewise.
	* sysdeps/sparc/sparc64/memchr.S [!__BOUNDED_POINTERS__]
	(__ubp_memchr): Likewise.
	* sysdeps/unix/sysv/linux/execve.c: Do not include <bp-checks.h>.
	(__execve) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__execve) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Do not use
	CHECK_STRING.
	* sysdeps/unix/sysv/linux/fxstatat64.c (__fxstatat64): Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Do not include <bp-checks.h>.
	(__getcwd): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/chown.c: Do not include
	<bp-checks.h>.
	(__real_chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/fchownat.c: Do not include
	<bp-checks.h>.
	(fchownat): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Do not use
	CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Do not include
	<bp-checks.h>.
	(__lchown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/lxstat64.c (___lxstat64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Do not
	include <bp-checks.h>.
	(truncate64): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Do not include
	<bp-checks.h>.
	(__real_chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Do not include
	<bp-checks.h>.
	(__lchown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/sh/chown.c: Do not include
	<bp-checks.h>.
	(__chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/truncate64.c: Do not include
	<bp-checks.h>.
	(truncate64): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/wordsize-64/lxstat.c (__lxstat):
	Likewise.
	* sysdeps/unix/sysv/linux/xmknod.c: Do not include <bp-checks.h>.
	(__xmknod): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/xmknodat.c: Do not include
	<bp-checks.h>.
	(__xmknodat): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c (___xstat64): Likewise.

2013-02-04  Andreas Schwab  <schwab@suse.de>

	[BZ #14142]
	* include/errno.h: Redefine errno only if !NOT_IN_libc || IN_LIB.
	* include/netdb.h: Likewise for h_errno.
	* elf/tst-stackguard1.c: Include <tls.h>.

2013-02-02  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* elf/link.h (struct link_map): Extend the l_addr comment.
	* include/link.h (struct link_map): Likewise.

2013-02-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (BOUNDED_N): Remove all definitions.
	(BOUNDED_1): Remove macro.
	* debug/backtrace.c: Don't include <bp-checks.h>.
	(ADVANCE_STACK_FRAME): Don't use BOUNDED_1.
	(__backtrace): Likewise.
	* sysdeps/powerpc/powerpc32/backtrace.c: Don't include
	<bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/powerpc/powerpc64/backtrace.c: Don't include
	<bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/sparc/backtrace.c: Don't include <bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/unix/sysv/linux/shmat.c: Don't include <bp-checks.h>.
	(shmat): Don't use BOUNDED_N.

2013-01-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-start.h: Remove file.
	* csu/libc-start.c: Don't include <bp-start.h>.
	(LIBC_START_MAIN): Set up __environ directly instead of using
	INIT_ARGV_and_ENVIRON.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Don't include
	<bp-start.h>.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_IOCTL): Remove both
	definitions.
	(CHECK_FCNTL): Likewise.
	(CHECK_N_PAGES): Likewise.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_SIGSET): Remove both
	definitions.
	(CHECK_SIGSET_NULL_OK): Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c: Don't include
	<bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Don't include
	<bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Don't include
	<bp-checks.h>.
	(do_sigsuspend): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigtimedwait.c (do_sigtimedwait): Don't
	use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigwait.c: Don't include <bp-checks.h>.
	(do_sigwait): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c (do_sigwaitinfo): Don't
	use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigpending.c: Don't
	include <bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigprocmask.c: Don't
	include <bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.
	* sysdeps/unix/sysv/linux/x86_64/sigpending.c: Don't include
	<bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/x86_64/sigprocmask.c: Don't include
	<bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.

	[BZ #13550]
	* sysdeps/generic/bp-semctl.h: Remove file.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/semctl.c: Don't include <bp-checks.h>
	and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(semctl): Don't use CHECK_SEMCTL.

	[BZ #13550]
	* Makerules (elide-bp-thunks): Remove variable.
	(elide-routines.oS): Don't use $(elide-bp-thunks).
	(elide-routines.os): Likewise.
	(elide-routines.o): Likewise.
	(elide-routines.op): Likewise.
	(elide-routines.og): Likewise.
	(objects): Don't use $(bp-thunks).
	* sysdeps/unix/Makefile ($(common-objpfx)s-proto-bp.d): Do not
	include.
	(common-generated): Do not add s-proto-bp.d.
	* sysdeps/unix/make-syscalls.sh (ptr): Remove variable.
	(int): Likewise.
	(typ): Likewise.
	Do not generate makefile rules for bounded-pointer thunks.
	* sysdeps/generic/bp-thunks.h: Remove file.
	* sysdeps/unix/sysv/linux/i386/bp-thunks.h: Likewise.
	* sysdeps/unix/s-proto-bp.S: Likewise.

	[BZ #15062]
	* math/k_casinh.c (__kernel_casinh): Compute real and imaginary
	parts of result separately when argument is not close to line from
	-i to i and one part of argument is small.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-31  David S. Miller  <davem@davemloft.net>

	* po/de.po: Update from translation team.

2013-01-25  Maxim Kuvyrkov  <maxim.kuvyrkov@gmail.com>

	* time/tzfile.c: Include stdint.h for SIZE_MAX.

2013-01-25  Thomas Schwinge  <thomas@codesourcery.com>

	* configure.in (_AC_PROG_CC_C89): New definition.
	* configure: Regenerate.

	* configure.in (AC_PROG_CPP): New definition.
	* configure: Regenerate.

2013-01-23  Joseph Myers  <joseph@codesourcery.com>

	* debug/tst-backtrace.h: New file.
	* debug/tst-backtrace2.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(fn1): Use match function instead of strstr.
	* debug/tst-backtrace3.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(fn): Use match function instead of strstr.
	* debug/tst-backtrace4.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(handle_signal): Use match function instead of strstr.
	* debug/tst-backtrace5.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(handle_signal): Use match function instead of strstr.

2013-01-23  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/cdefs.h (__glibc_unlikely, __glibc_likely): Fix whitespace.

2013-01-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h
	(__arch_compare_and_exchange_val_32_acq): Use %g0 as second
	argument of CAS if possible.
	* sysdeps/sparc/sparc64/bits/atomic.h
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(__arch_compare_and_exchange_val_64_acq): Likewise.

2013-01-23  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/unix/sysv/linux/ulimit.c: Moved to ...
	* sysdeps/posix/ulimit.c: ... this.
	Include <limits.h>.
	* sysdeps/unix/bsd/ulimit.c: Remove file.

2013-01-23  Adam Conrad  <adconrad@0c3.net>

	* elf/Makefile (LDFLAGS-tst-array2): Add $(no-as-needed).
	(LDFLAGS-tst-array5): Likewise.

2013-01-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15036]
	* bits/wchar.h (__WCHAR_MAX): Define based on __WCHAR_MAX__, or
	based on [L'\0' - 1 > 0] if [!__WCHAR_MAX__].
	(__WCHAR_MIN): Likewise, using __WCHAR_MIN__.
	* sysdeps/unix/sysv/linux/x86/bits/wchar.h: Remove.

2013-01-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/backtrace.c: New file.
	* sysdeps/sparc/sparc32/backtrace.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/backtrace.h: New file.
	* sysdeps/sparc/sparc64/backtrace.h: New file.
	* sysdeps/sparc/sparc64/backtrace.c: Delete.
	* sysdeps/sparc/Makefile (CFLAGS-backtrace.c): Add
	-funwind-tables.

2013-01-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15020]
	* posix/wordexp.c (exec_comm): Avoid busy loop when command has
	closed its stdout.

2013-01-20  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Don't include
	"mpa2.h".
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

2013-01-18  Joseph Myers  <joseph@codesourcery.com>
	    Mark Mitchell  <mark@codesourcery.com>
	    Tom de Vries  <tom@codesourcery.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* debug/tst-backtrace2.c: New file.
	* debug/tst-backtrace3.c: Likewise.
	* debug/tst-backtrace4.c: Likewise.
	* debug/tst-backtrace5.c: Likewise.
	* debug/Makefile (CFLAGS-tst-backtrace2.c): New variable.
	(CFLAGS-tst-backtrace3.c): Likewise.
	(CFLAGS-tst-backtrace4.c): Likewise.
	(CFLAGS-tst-backtrace5.c): Likewise.
	(LDFLAGS-tst-backtrace2): Likewise.
	(LDFLAGS-tst-backtrace3): Likewise.
	(LDFLAGS-tst-backtrace4): Likewise.
	(LDFLAGS-tst-backtrace5): Likewise.
	(tests): Add new tests tst-backtrace2, tst-backtrace3,
	tst-backtrace4 and tst-backtrace5.

2013-01-18  Anton Blanchard  <anton@samba.org>
	    Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Rename
	__kernel_vdso_get_tbfreq to __kernel_get_tbfreq.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Add parameter to
	INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK to specify return type.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Change "=&r" in inline asm output regs list to
	"+r" and remove output regs list as redundant.  Add explicit inline
	asm to specify register of return val to work around compiler codegen
	bug.  Remove (int) cast on return value.  Add return type parameter to
	use in macro so that this macro does not truncate return value for
	64-bit values.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Add return type parameter and
	pass to INTERNAL_VSYSCALL_NCS.
	(INLINE_VSYSCALL): Add 'long int' as return type to
	INTERNAL_VSYSCALL_NCS macro invocation.
	(INTERNAL_VSYSCALL): Add 'long int' as return type to
	INTERNAL_VSYSCALL_NCS macro invocation.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.

2013-01-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14496]
	* sysdeps/i386/fpu/fenv_private.h (libc_feupdateenv_test_sse):
	Fix application of SIMD FP exception mask.

	* sysdeps/ieee754/dbl-64/mpa.h (__pow_mp): New function to get an
	mp_no from a power of two.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove
	__mpexp_twomm1.  Use __pow_mp.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove unnecessary
	multiplication.

2013-01-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15023]
	* include/complex.h: Condition contents on [!_COMPLEX_H].
	(__kernel_casinhf): New prototype.
	(__kernel_casinh): Likewise.
	(__kernel_casinhl): Likewise.
	* math/Makefile (libm_calls): Add k_casinh.
	* math/k_casinh.c: New file.
	* math/k_casinhf.c: Likewise.
	* math/k_casinhl.c: Likewise.
	* math/s_cacos.c (__cacos): Implement using __kernel_casinh for
	finite nonzero arguments.
	* math/s_cacosf.c (__cacosf): Implement using __kernel_casinhf for
	finite nonzero arguments.
	* math/s_cacosl.c (__cacosl): Implement using __kernel_casinhl for
	finite nonzero arguments.
	* math/s_casinh.c: Do not include <float.h>.
	(__casinh): Move code for finite nonzero arguments to k_casinh.c.
	* math/s_casinhf.c: Do not include <float.h>.
	(__casinhf): Move code for finite nonzero arguments to
	k_casinhf.c.
	* math/s_casinhl.c: Do not include <float.h>.
	[LDBL_MANT_DIG == 106] (LDBL_EPSILON): Do not undefine and
	redefine.
	(__casinhl): Move code for finite nonzero arguments to
	k_casinhl.c.
	* math/libm-test.inc (cacos_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-17  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/unix/sysv/linux/malloc-sysdep.h (HAVE_MREMAP): New define.
	* malloc/malloc.c: Include <unistd.h> and <malloc-sysdep.h>.
	[!HAVE_MREMAP]: Remove [defined linux] case.
	* malloc/arena.c: Do not include <malloc-sysdep.h>.

2013-01-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Fix header comment.

2013-01-17  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/elf.h (R_386_SIZE32): New relocation.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Handle
	R_386_SIZE32.
	(elf_machine_rela): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Handle
	R_X86_64_SIZE64 and R_X86_64_SIZE32.

2013-01-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/mathdef.h [_SOFT_FLOAT || __NO_FPRS__]
	(FP_FAST_FMA): Do not define.
	[_SOFT_FLOAT || __NO_FPRS__] (FP_FAST_FMAF): Likewise.
	* sysdeps/powerpc/fpu/bits/fenvinline.h [__GNUC__ && !_SOFT_FLOAT
	&& !__NO_MATH_INLINES]: Add [!__NO_FPRS__] condition.
	* sysdeps/powerpc/fpu/bits/mathinline.h [__GNUC__ &&
	!_SOFT_FLOAT]: Likewise.
	* sysdeps/powerpc/fpu/fpu_control.h [_SOFT_FLOAT || __NO_FPRS__]
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_RESERVED): Define with generic
	value.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_DEFAULT): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (fpu_control_t): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_GETCW): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_SETCW): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fpu_control): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__]: Condition previous contents of
	file.

2013-01-16  Andreas Schwab  <schwab@suse.de>

	[BZ #14327]
	* include/stdlib.h (__mktemp): Add declaration.
	* misc/mktemp.c (__mktemp): Renamed from mktemp, add weak alias.
	* misc/Versions (GLIBC_PRIVATE): Add __mktemp.

2013-01-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/atnat.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/atnat2.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Do not include mpa2.h.
	* sysdeps/ieee754/dbl-64/mpa.h: Move all constant value
	definitions here.
	* sysdeps/ieee754/dbl-64/mpa2.h: Remove.
	* sysdeps/ieee754/dbl-64/mpatan.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Remove ZERO
	and ONE.
	* sysdeps/ieee754/dbl-64/mpexp.c: Do not include mpexp.h.
	* sysdeps/ieee754/dbl-64/mpexp.h: Remove.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/mptan.c (__mptan): Remove MONE.
	* sysdeps/ieee754/dbl-64/ulog.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/utan.h: Likewise.

	* sysdeps/ieee754/dbl-64/mpa2.h: Fix the value of TWO.

2013-01-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	trunc{,f} to libm-sysdep_routes.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_trunc.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_truncf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_trunc.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_truncf.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	nearbyint{,f} to libm-sysdep_routes.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyint-vis3.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyintf-vis3.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_nearbyintf.S: New file.

	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Use
	libc_feholdexcept and libc_fesetenv.

2013-01-15  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/scsi/sg.h: Include stddef.h.

2013-01-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc-ifunc.h (SPARC_ASM_IFUNC2): New macro.
	(SPARC_ASM_VIS2_IFUNC): Likewise.
	(SPARC_ASM_VIS3_VIS2_IFUNC): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: Make
	use of 'siam' instruction.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis2.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis2.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Hook in
	new VIS2 routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S:
	Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add new VIS2
	routines to libm-sysdep_routines.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	fdim/fdimf to libm-sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdimf.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_fdimf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fdimf.S: New file.

2013-01-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Add a local variable
	to optimize copies.

	* sysdeps/ieee754/dbl-64/mpa.c: Fix formatting.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__inv): Remove
	local variable MPTWO.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__inv):
	Likewise.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (Flags for Globbing): Move GLOB_NOSORT after
	GLOB_NOESCAPE.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (Flags for Globbing): Highlight GNU extensions.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (glob_t): Document gl_flags.
	(glob64_t): Likewise.

2013-01-11  David S. Miller  <davem@davemloft.net>

	* math/Makefile (gmp-objs): Use $(gmp-sysdep_routines).
	* sysdeps/sparc/sparc64/multiarch/Makefile [$(subdir) = math]
	(gmp-sysdep_routines): New variable.  Add VIS3 optimized GMP routines.
	* sysdeps/sparc/sparc64/multiarch/add_n-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/add_n.S: New file.
	* sysdeps/sparc/sparc64/multiarch/addmul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/addmul_1.S: New file.
	* sysdeps/sparc/sparc64/multiarch/mul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/mul_1.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sub_n-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sub_n.S: New file.
	* sysdeps/sparc/sparc64/multiarch/submul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/submul_1.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Properly optimize for 32-bit
	sparc V9 rather than using V8 code.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/fpu/unix/sysv/linux/multiarch/Implies:
	Move to...
	* sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/fpu/multiarch/Implies:
	Here.

2013-01-11  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Use $multi_arch_d in setting up $mach list,
	not in the main loop.
	* configure: Regenerated.

2013-01-11  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h (__GLIBC_HAVE_LONG_LONG): Remove.
	* bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change #elif condition
	to just #else.
	* bits/types.h [__GLIBC_HAVE_LONG_LONG]: Likewise.  Remove
	[!__GLIBC_HAVE_LONG_LONG] case.
	* posix/sys/types.h [__GLIBC_HAVE_LONG_LONG]: Change #elif
	condition to just #else.
	* stdlib/stdlib.h [__USE_ISOC99 || (__GLIBC_HAVE_LONG_LONG &&
	__USE_MISC)]: Change all uses to [__USE_ISOC99 || __USE_MISC].
	[__GLIBC_HAVE_LONG_LONG && __USE_BSD]: Change to [__USE_BSD].
	* string/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Make code
	unconditional.
	* string/endian.h [__GLIBC_HAVE_LONG_LONG]: Likewise.
	* sysdeps/s390/bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change
	#elif condition to just #else.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h
	[__GLIBC_HAVE_LONG_LONG]: Make code unconditional.
	* sysdeps/x86/bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change
	#elif condition to just #else.

2013-01-11  Steve Ellcey  <sellcey@mips.com>

	* elf/elf.h (EF_MIPS_ARCH_32): Fix value.
	(EF_MIPS_ARCH_64): Fix value.
	(EF_MIPS_ARCH_32R2): New.
	(EF_MIPS_ARCH_64R2): New.

2013-01-11  H.J. Lu  <hongjiu.lu@intel.com>

	* Makeconfig (+link-pie-before-libc): New.
	(+link-pie-after-libc): Likewise.
	(+link-pie-tests): Likewise.
	(+link-pie): Rewritten.
	(link-before-libc): Remove $(config-LDFLAGS).
	(+link): Add $(rtld-LDFLAGS) after $(+link-before-libc).
	(+link-tests): Add $(rtld-tests-LDFLAGS) after $(+link-before-libc).
	(config-LDFLAGS): Renamed to ...
	(rtld-LDFLAGS): This.
	(rtld-tests-LDFLAGS): New macro.
	(link-libc-rpath-link): Likewise.
	(link-libc-tests-rpath-link): Likewise.
	(link-libc-before-gnulib): Remove -Wl,-rpath-link=$(rpath-link).
	(link-libc): Prepand $(link-libc-rpath-link).
	(link-libc-tests): Prepand $(link-libc-tests-rpath-link).
	(test-program-prefix): New macro.
	(test-via-rtld-prefix): Likewise.
	(test-program-cmd): Likewise.
	(host-test-program-cmd): Likewise.
	* Makefile ($(common-objpfx)testrun.sh): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* Makerules ($(LINK.o)): Replace $(config-LDFLAGS) with
	$(rtld-LDFLAGS).
	($(common-objpfx)shlib.lds): Likewise.
	(build-module-helper): Likewise.
	($(common-objpfx)format.lds): Likewise.
	* Rules (binaries-pie-tests): New.
	(binaries-pie-notests): Likewise.
	(binaries-pie): Rewritten.
	($(addprefix $(objpfx),$(binaries-pie))): Renamed to ...
	($(addprefix $(objpfx),$(binaries-pie-notests))): This.
	($(addprefix $(objpfx),$(binaries-pie-tests))): New.
	(make-test-out): Replace $(host-built-program-cmd) with
	$(host-test-program-cmd).
	* config.make.in (build-hardcoded-path-in-tests): New variable.
	* configure.in (--enable-hardcoded-path-in-tests): New configure
	option.
	(hardcoded_path_in_tests): New AC_SUBST.
	* configure: Regenerated.
	* catgets/Makefile ($(objpfx)test-gencat.out): Replace
	$(built-program-cmd) with $(test-program-cmd).
	* catgets/test-gencat.sh (run_program_cmd): Renamed to ...
	(test_program_cmd): This.
	* elf/Makefile ($(objpfx)order.out): Run test with
	$(test-program-prefix).
	($(objpfx)order2.out): Likewise.
	($(objpfx)tst-initorder.out): Likewise.
	($(objpfx)tst-initorder2.out): Likewise.
	($(objpfx)tst-array1.out): Replace $(built-program-cmd) with
	$(test-program-cmd).
	($(objpfx)tst-array1-static.out): Likewise.
	($(objpfx)tst-array2.out): Likewise.
	($(objpfx)tst-array3.out): Likewise.
	($(objpfx)tst-array4.out): Likewise.
	($(objpfx)tst-array5.out): Likewise.
	($(objpfx)tst-array5-static.out): Likewise.
	(tst-stackguard1-ARGS): Replace $(built-program-cmd) with
	$(test-program-cmd).
	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* grp/tst_fgetgrent.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* iconvdata/Makefile ($(objpfx)tst-tables.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* iconvdata/tst-table.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* iconvdata/tst-tables.sh: Likewise.
	* intl/Makefile ($(objpfx)tst-gettext.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	($(objpfx)tst-translit.out): Likewise.
	($(objpfx)tst-gettext2.out): Likewise.
	($(objpfx)tst-gettext4.out): Likewise.
	($(objpfx)tst-gettext6.out): Likewise.
	* intl/tst-gettext.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh  Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/Makefile ($(objpfx)ftwtest.out): Replace $(run-program-cmd)
	with $(test-program-cmd).
	* libio/Makefile ($(objpfx)test-freopen.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* libio/test-freopen.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* malloc/tst-mtrace.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* manual/install.texi: Document --enable-hardcoded-path-in-tests.
	* posix/Makefile ($(objpfx)globtest.out): Replace
	$(run-via-rtld-prefix) and $(test-wrapper) with
	$(test-program-prefix) and $(test-via-rtld-prefix).
	($(objpfx)wordexp-tst.out): Replace $(run-program-prefix) with
	$(test-program-prefix).
	(tst-exec-ARGS): Replace $(host-built-program-cmd) with
	$(host-test-program-cmd).
	(tst-spawn-ARGS): Likewise.
	($(objpfx)tst-rxspencer-mem): Replace $(run-program-prefix) with
	$(test-program-prefix).
	* posix/globtest.sh (un_via_rtld_prefix): Renamed to ...
	(test_via_rtld_prefix): This.
	(test_wrapper): Renamed to ...
	(test_program_prefix): This.
	(run_program_prefix): Replaced by test_program_prefix.
	* posix/wordexp-tst.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* rt/Makefile (tst-mqueue7-ARGS): Replace $(host-built-program-cmd)
	with $(host-test-program-cmd).
	* stdio-common/Makefile ($(objpfx)tst-unbputc.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	($(objpfx)tst-printf.out): Likewise.
	($(objpfx)tst-setvbuf1.out): Replace $(built-program-cmd) with
	$(test-program-cmd).
	* stdio-common/tst-printf.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/Makefile ($(objpfx)tst-fmtmsg.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* stdlib/tst-fmtmsg.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* string/Makefile ($(objpfx)tst-svc.out):  Replace
	$(built-program-cmd) with $(test-program-cmd).

2013-01-11  Andreas Jaeger  <aj@suse.de>

	[BZ #15003]
	* sysdeps/unix/sysv/linux/bits/socket.h (MSG_FASTOPEN): New
	value. Sync with Linux 3.7.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Revert previous changes.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

2013-01-10  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Drop use of $m0sub and $msub, which are
	never set.
	* configure: Regenerated.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Properly optimize for 32-bit
	sparc V9 rather than using V8 code.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

2013-01-10  Roland McGrath  <roland@hack.frob.com>

	* elf/elf.h (DT_SPARC_REGISTER, DT_SPARC_NUM): Fix whitespace.
	(EF_MIPS_NOREORDER, EF_MIPS_PIC, EF_MIPS_CPIC, EF_MIPS_XGOT): Likewise.
	(EF_MIPS_64BIT_WHIRL, EF_MIPS_ABI2, EF_MIPS_ABI_ON32): Likewise.
	(EF_MIPS_ARCH, EF_MIPS_ARCH_1, EF_MIPS_ARCH_2): Likewise.
	(EF_MIPS_ARCH_3, EF_MIPS_ARCH_4, EF_MIPS_ARCH_5): Likewise.
	(EF_MIPS_ARCH_32, EF_MIPS_ARCH_64): Likewise.
	(E_MIPS_ARCH_1): Define in terms of EF_MIPS_ARCH_* counterpart.
	(E_MIPS_ARCH_2, E_MIPS_ARCH_3, E_MIPS_ARCH_4, E_MIPS_ARCH_5): Likewise.
	(E_MIPS_ARCH_32, E_MIPS_ARCH_64): Likewise.
	(SHN_MIPS_ACOMMON, SHN_MIPS_TEXT, SHN_MIPS_DATA): Fix whitespace.
	(SHN_MIPS_SCOMMON, SHN_MIPS_SUNDEFINED): Likewise.
	(SHT_MIPS_LIBLIST, SHT_MIPS_MSYM, SHT_MIPS_CONFLICT): Likewise.
	(SHT_MIPS_GPTAB, SHT_MIPS_UCODE, SHT_MIPS_DEBUG): Likewise.
	(SHT_MIPS_REGINFO, SHT_MIPS_PACKAGE, SHT_MIPS_PACKSYM): Likewise.
	(SHT_MIPS_RELD, SHT_MIPS_IFACE, SHT_MIPS_CONTENT): Likewise.
	(SHT_MIPS_OPTIONS, SHT_MIPS_SHDR, SHT_MIPS_FDESC): Likewise.
	(SHT_MIPS_EXTSYM, SHT_MIPS_DENSE, SHT_MIPS_PDESC): Likewise.
	(SHT_MIPS_LOCSYM, SHT_MIPS_AUXSYM, SHT_MIPS_OPTSYM): Likewise.
	(SHT_MIPS_LOCSTR, SHT_MIPS_LINE, SHT_MIPS_RFDESC): Likewise.
	(SHT_MIPS_DELTASYM, SHT_MIPS_DELTAINST, SHT_MIPS_DELTACLASS): Likewise.
	(SHT_MIPS_DELTADECL, SHT_MIPS_SYMBOL_LIB, SHT_MIPS_EVENTS): Likewise.
	(SHT_MIPS_TRANSLATE, SHT_MIPS_PIXIE, SHT_MIPS_XLATE): Likewise.
	(SHT_MIPS_XLATE_DEBUG, SHT_MIPS_WHIRL, SHT_MIPS_EH_REGION): Likewise.
	(SHT_MIPS_XLATE_OLD, SHT_MIPS_PDR_EXCEPTION): Likewise.
	(SHF_MIPS_GPREL, SHF_MIPS_MERGE, SHF_MIPS_ADDR): Likewise.
	(SHF_MIPS_STRINGS, SHF_MIPS_NOSTRIP, SHF_MIPS_LOCAL): Likewise.
	(SHF_MIPS_NAMES, SHF_MIPS_NODUPE): Likewise.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-10  H.J. Lu  <hongjiu.lu@intel.com>

	* posix/Makefile (tests-static): New variable.
	(tests): Add $(tests-static).
	(tst-exec-static-ARGS): New variable.
	(tst-spawn-static-ARGS): Likewise.
	* posix/tst-exec-static.c: New file.
	* posix/tst-spawn-static.c: Likewise.
	* posix/tst-exec.c: Support run directly.
	* posix/tst-spawn.c: Likewise.

2013-01-10  Joseph Myers  <joseph@codesourcery.com>

	* elf/link.h (struct dl_phdr_info): Use __extension__ with long
	long.
	* math/bits/mathcalls.h (llrint): Likewise.
	(llround): Likewise.
	* stdlib/stdlib.h (struct drand48_data): Likewise.
	* sysdeps/generic/inttypes.h (imaxdiv_t): Likewise.
	* sysdeps/s390/bits/byteswap.h (__bswap_64): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h (struct ipc_perm):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (struct fpu):
	Likewise.
	* sysdeps/unix/sysv/linux/x86/sys/procfs.h [__x86_64__]
	(elf_greg_t): Likewise.
	* sysdeps/x86/bits/setjmp.h [__x86_64__ && __WORDSIZE != 64]
	(__jmp_buf): Likewise.
	* sysdeps/x86/fpu/bits/mathinline.h (llrintf): Likewise, for all
	definitions.
	(llrint): Likewise, for all definitions.
	(llrintl): Likewise.

	* string/string.h [__USE_BSD && __USE_GNU && __GNUC__] (ffsll):
	Remove [__GNUC__] condition.
	* wcsmbs/wchar.h [__USE_ISOC99 || (__GNUC__ && __USE_GNU)]: Change
	condition to just [__USE_ISOC99].
	[__GNUC__ && __USE_GNU]: Change condition to just [__USE_GNU].

2013-01-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14200]
	* sysdeps/unix/sysv/linux/x86/bits/environments.h
	(_POSIX_V7_ILP32_OFF32): Defined as 1 only if __x86_64__ isn't
	defined.
	(_POSIX_V6_ILP32_OFF32): Likewise.
	(_XBS5_ILP32_OFF32): Likewise.
	(__ILP32_OFFBIG_CFLAGS): Defined as "-mx32" for x32.
	(__ILP32_OFFBIG_LDFLAGS): Likewise.

2013-01-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): New array of
	doubles __mpexp_twomm1.  Adjust usage.
	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_twomm1):
	Remove.

2013-01-10  Andreas Schwab  <schwab@suse.de>

	[BZ #14964]
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (FALLOC_FL_KEEP_SIZE)
	(FALLOC_FL_PUNCH_HOLE) [__USE_GNU]: New macros.

2013-01-09  David S. Miller  <davem@davemloft.net>

	[BZ #15003]
	* sysdeps/gnu/netinet/tcp.h (TCP_COOKIE_TRANSACTIONS)
	(TCP_THIN_LINEAR_TIMEOUTS, TCP_THIN_DUPACK, TCP_USER_TIMEOUT)
	(TCP_REPAIR, TCP_REPAIR_QUEUE, TCP_QUEUE_SEQ, TCP_REPAIR_OPTIONS)
	(TCP_FASTOPEN): Define.
	(tcp_repair_opt): New structure.
	(TCP_NO_QUEUE, TCP_RECV_QUEUE, TCP_SEND_QUEUE, TCP_QUEUES_NR): New
	enum values.
	(TCP_COOKIE_MIN, TCP_COOKIE_MAX, TCP_COOKIE_PAIR_SIZE)
	(TCP_COOKIE_IN_ALWAYS, TCP_COOKIE_OUT_NEVER, TCP_S_DATA_IN)
	(TCP_S_DATA_OUT, TCP_MSS_DEFAULT, TCP_MSS_DESIRED): Define.
	(tcp_cookie_transactions): New structure.

2013-01-09  Anton Blanchard  <anton@samba.org>

	* sysdeps/unix/sysv/linux/powerpc/sched_getcpu.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/Versions: Add __vdso_getcpu.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Likewise.

2013-01-09  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h (__USE_ANSI): Remove.

2013-01-09  Roland McGrath  <roland@hack.frob.com>

	* posix/Makefile (others): Depend on $(objpfx)getconf.speclist.

	* misc/error.c (error_tail: ALLOCA_LIMIT): Remove unused macro.

2013-01-09  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/dbl-64/mpa.c (mcr): Reword comment.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (mcr): Likewise.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (mcr): Likewise.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

2013-01-08  Joseph Myers  <joseph@codesourcery.com>

	* io/sys/stat.h [__GNUC__ && __GNUC__ >= 2 &&
	__USE_EXTERN_INLINES]: Change condition to [__USE_EXTERN_INLINES].
	* sysdeps/unix/sysv/linux/sys/sysmacros.h [__GNUC__ && __GNUC__ >=
	2 && __USE_EXTERN_INLINES]: Likewise.

2013-01-08  Andreas Jaeger  <aj@suse.de>

	[BZ# 14985]
	* sysdeps/unix/sysv/linux/sparc/bits/epoll.h (EPOLL_NONBLOCK):
	Remove.
	* sysdeps/unix/sysv/linux/bits/epoll.h (EPOLL_NONBLOCK): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/epoll.h (EPOLL_NONBLOCK): Likewise.

2013-01-07  Anton Blanchard  <anton@samba.org>

	* sysdeps/powerpc/fpu/feholdexcpt.c: Fixed spelling errors.
	* sysdeps/powerpc/fpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fpu/math_ldbl.h: Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-start.S: Likewise.
	* sysdeps/powerpc/powerpc32/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintl.S: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.

2013-01-07  Joseph Myers  <joseph@codesourcery.com>

	* malloc/malloc.h (__MALLOC_P): Remove all definitions.
	(__MALLOC_PMT): Likewise.
	[__GNUC__] (__MALLOC_HOOK_VOLATILE): Make not conditional on
	[__GNUC__], only on [_LIBC].
	[__GNUC__] (__MALLOC_DEPRECATED): Likewise.
	[!__GNUC__] (__MALLOC_HOOK_VOLATILE): Remove definition.
	[!__GNUC__] (__MALLOC_DEPRECATED): Likewise.
	* malloc/malloc.c (malloc_hook_ini): Do not use __MALLOC_P in
	forward declaration.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	(__libc_memalign): Do not use __MALLOC_PMT in variable
	declaration.
	(__libc_valloc): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.
	(__posix_memalign): Likewise.

	[BZ #14996]
	* math/s_casinh.c: Include <float.h>.
	(__casinh): Do not do computation with squaring and square root
	for large arguments.
	* math/s_casinhf.c: Include <float.h>.
	(__casinhf): Do not do computation with squaring and square root
	for large arguments.
	* math/s_casinhl.c: Include <float.h>.
	[LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine and redefine.
	(__casinhl): Do not do computation with squaring and square root
	for large arguments.
	* math/libm-test.inc (casin_test): Add more tests.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/cacheinfo.c (__x86_64_data_cache_size): Removed.
	(__x86_64_raw_data_cache_size): Likewise.
	(__x86_64_data_cache_size_half): Likewise.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_shared_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.
	* sysdeps/x86_64/cacheinfo.c (__x86_64_data_cache_size): Renamed
	to ...
	(__x86_data_cache_size): This.
	(__x86_64_raw_data_cache_size): Renamed to ...
	(__x86_raw_data_cache_size): This.
	(__x86_64_data_cache_size_half): Renamed to ...
	(__x86_data_cache_size_half): This.
	(__x86_64_raw_data_cache_size_half): Renamed to ...
	(__x86_raw_data_cache_size_half): This.
	(__x86_64_shared_cache_size): Renamed to ...
	(__x86_shared_cache_size): This.
	(__x86_64_raw_shared_cache_size): Renamed to ...
	(__x86_raw_shared_cache_size): This.
	(__x86_64_shared_cache_size_half): Renamed to ...
	(__x86_shared_cache_size_half): This.
	(__x86_64_raw_shared_cache_size_half): Renamed to ...
	(__x86_raw_shared_cache_size_half): This.
	* sysdeps/x86_64/memcpy.S: Updated.
	* sysdeps/x86_64/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.

2013-01-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/test-powerpc-snan.c (_GNU_SOURCE): Define as
	1 to avoid redefinition warning.
	(__USE_GNU): Don't define.
	(init_signaling_nan): Protoize.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-01-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Remove commented code.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__cr): Remove.
	(__cpymn): Likewise.
	(norm): Remove commented code.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__cr): Remove.
	(__cpymn): Likewise.
	(norm): Remove commented code.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (mpone): Define
	mp_no value for 1.0 and 2.0.
	(norm): Use RADIXI instead of radixi.d.
	(denorm): Likewise.
	(__mul): Use 0.0 instead of zero.d.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (mpone): Define
	mp_no value for 1.0 and 2.0.
	(norm): Use RADIXI instead of radixi.d.
	(denorm): Likewise.
	(__mul): Use 0.0 instead of zero.d.

2013-01-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14994]
	* math/s_casinh.c (__casinh): Reduce finite argument to first
	quadrant then set signs of results at the end.
	* math/s_casinhf.c (__casinhf): Likewise.
	* math/s_casinhl.c (__casinhl): Likewise.
	* math/libm-test.inc (casin_test): Add more tests.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.h: Fix code formatting.

	* sysdeps/ieee754/dbl-64/mpa.h: Clean up comment for MP_NO.

	* sysdeps/ieee754/dbl-64/mpa.c(norm): Remove commented
	declarations.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.h: Remove commented declarations
	and adjust the header comment.

	* sysdeps/ieee754/dbl-64/mpa.h (__mpexp): Remove unnecessary
	variable name from declaration.

2013-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Initialize COMMON_CPUID_INDEX_7 element.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_RTM): New macro.
	(CPUID_RTM): Likewise.
	(HAS_RTM): Likewise.
	(COMMON_CPUID_INDEX_7): New enum.

2013-01-03  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14981]
	* malloc/mtrace.c (tr_reallochook): If realloc returns NULL when
	size is zero, record memory as freed.

2013-01-03  Andreas Jaeger  <aj@suse.de>

	* po/ia.po: Add new Interlingua translation.

2012-01-03  Allan McRae  <allan@archlinux.org>

	* locale/programs/localedef.c: Fix description of '--posix' flag.

2013-01-02  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Update dates in second copyright notice.
	* README: Update copyright dates in example.
	* manual/libc.texinfo: Update copyright dates.
	* scripts/test-installation.pl: Update copyright date in --version
	output.

	* hurd/ctty-input.c: Fix copyright notice formatting.
	* hurd/ctty-output.c: Likewise.
	* hurd/dtable.c: Likewise.
	* hurd/hurd-raise.c: Likewise.
	* hurd/hurdprio.c: Likewise.
	* hurd/msgportdemux.c: Likewise.
	* misc/sys/file.h: Likewise.
	* misc/sys/ioctl.h: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h: Likewise.
	* sysdeps/mach/hurd/chdir.c: Likewise.
	* sysdeps/mach/hurd/fchdir.c: Likewise.
	* sysdeps/mach/hurd/rename.c: Likewise.
	* sysdeps/mach/hurd/rmdir.c: Likewise.
	* sysdeps/mach/hurd/seekdir.c: Likewise.
	* sysdeps/mach/hurd/setsid.c: Likewise.
	* sysdeps/posix/wait3.c: Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2013-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_twomm1): Fix first
	four values.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Split mantissa
	calculation loop and add branch prediction.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Add assert to
	check access beyond bounds of m1np.

	* sysdeps/ieee754/dbl-64/mpa.c [! NO__CONST]: New constant
	MPTWO.
	(__inv): Remove local variable MPTWO to use the global
	constant.
	* sysdeps/ieee754/dbl-64/mpa.h: Declare MPTWO.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove local
	variable MPTWO.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Make MPHALF and
	MP3HALFS static const.

2013-01-01  David S. Miller  <davem@davemloft.net>

	* po/ca.po: Update from translation team.

2013-01-01  Joseph Myers  <joseph@codesourcery.com>

	* scripts/update-copyrights: New file.
	* Makeconfig: Reformat copyright notice.
	* ctype/ctype.h: Likewise.
	* debug/swprintf_chk.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-debug.c: Likewise.
	* elf/dl-object.c: Likewise.
	* grp/initgroups.c: Likewise.
	* hurd/Makefile: Likewise.
	* hurd/hurd/signal.h: Likewise.
	* hurd/hurdfault.c: Likewise.
	* hurd/hurdioctl.c: Likewise.
	* hurd/hurdlookup.c: Likewise.
	* hurd/intr-msg.c: Likewise.
	* iconv/gconv_open.c: Likewise.
	* libio/swprintf.c: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/nl_langinfo.c: Likewise.
	* mach/Machrules: Likewise.
	* mach/Makefile: Likewise.
	* malloc/obstack.h: Likewise.
	* manual/Makefile: Likewise.
	* manual/tsort.awk: Likewise.
	* misc/bits/stab.def: Likewise.
	* nis/nis_print_group_entry.c: Likewise.
	* nis/nis_table.c: Likewise.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* po/Makefile: Likewise.
	* posix/fnmatch.c: Likewise.
	* posix/regex.h: Likewise.
	* resolv/Makefile: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.
	* resolv/res_hconf.c: Likewise.
	* scripts/gen-sorted.awk: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/random.c: Likewise.
	* stdlib/random_r.c: Likewise.
	* sysdeps/generic/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Likewise.
	* sysdeps/mach/hurd/errnos.awk: Likewise.
	* sysdeps/mach/hurd/fork.c: Likewise.
	* sysdeps/mach/hurd/getcwd.c: Likewise.
	* sysdeps/mach/hurd/i386/trampoline.c: Likewise.
	* sysdeps/mach/hurd/mmap.c: Likewise.
	* sysdeps/mach/hurd/utimes.c: Likewise.
	* sysdeps/mach/hurd/xmknod.c: Likewise.
	* sysdeps/posix/profil.c: Likewise.
	* sysdeps/posix/readdir_r.c: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/powerpc/bits/setjmp.h: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/pthread/lio_listio.c: Likewise.
	* sysdeps/sparc/dl-procinfo.h: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Likewise.
	* sysdeps/unix/sysv/linux/fstatvfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/getdents.c: Likewise.
	* sysdeps/unix/sysv/linux/msgctl.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/speed.c: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.h: Likewise.
	* sysdeps/wordsize-32/divdi3.c: Likewise.
	* time/sys/time.h: Likewise.
	* wcsmbs/Makefile: Likewise.

2013-01-01  David S. Miller  <davem@davemloft.net>

	* po/fr.po: Update from translation team.

	* catgets/gencat.c: Update copyright year.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/memusagestat.c: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c: Likewise.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* posix/getconf.c: Likewise.

2012-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__mp_dbl): Favour normal
	numbers.

2012-12-30  Mike Frysinger  <vapier@gentoo.org>

	* math/bits/mathcalls.h (modf): Use __nonnull.

2012-12-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/branred.h: Include dla.h.
	(split): Use macro CN instead of the bare value.
	* sysdeps/ieee754/dbl-64/dla.h: Add comment to explain why CN
	could be used.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use CN
	instead of the bare value.
	(power1): Likewise.

2012-12-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove
	__ATAN_TWOM.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.

	* sysdeps/ieee754/dbl-64/atnat.h: Replaced constants with
	their values.
	* sysdeps/ieee754/dbl-64/atnat2.h: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.
	* sysdeps/ieee754/dbl-64/ulog.h: Likewise.
	* sysdeps/ieee754/dbl-64/utan.h: Likewise.

2012-12-28  Andreas Jaeger  <aj@suse.de>

	* elf/elf.h (NT_S390_TDB, NT_FILE, NT_SIGINFO): Define.  New
	values are from Linux 3.7.

	* sysdeps/gnu/netinet/tcp.h (TCPI_OPT_SYN_DATA)
	(TCPI_OPT_ECN_SEEN): Define.  Sync with Linux 3.7.

2012-12-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* misc/sys/cdefs.h (__glibc_likely): Wrap __builtin_expect for
	TRUE case.

	* sysdeps/ieee754/dbl-64/mpa.c (norm): Define R as RADIXI.
	(norm): Likewise.
	* sysdeps/ieee754/dbl-64/mpa2.h: Remove all static const
	variables with preprocessor constants.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Likewise.

2012-12-27  Bruno Haible  <bruno@clisp.org>

	[BZ #14317]
	* string/xpg-strerror.c (__xpg_strerror_r): Optimize, call strlen
	only if needed.

2012-12-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Eliminate __mpexp_nn
	and use variable directly.
	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_nn): Remove.

	* sysdeps/ieee754/dbl-64/mpa.c [! NO__CONST]: New constant
	MPONE.
	* sysdeps/ieee754/dbl-64/mpa.h: Declare MPONE.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove local
	variable MPONE.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c (__mplog): Remove mplog.h
	include directive.  Remove local variable MPONE.
	* sysdeps/ieee754/dbl-64/mplog.h: Remove.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: Define NO__CONST.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.

2012-12-25  David S. Miller  <davem@davemloft.net>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.17.90".
	* NEWS: Add 2.18 section.

2012-12-21  David S. Miller  <davem@davemloft.net>

	* po/hr.po: Update from translation team.

2012-12-21  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Refreshed.

2012-12-19  Steve Ellcey  <sellcey@mips.com>

	* NEWS:  Mention new memcpy for MIPS.

2012-12-18  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* manual/contrib.texi (Contributors): Spelling correction.

2012-12-15  David S. Miller  <davem@davemloft.net>

	* po/ru.po: Update from translation team.

2012-12-13  David S. Miller  <davem@davemloft.net>

	* NEWS: Mention IFUNC testsuite enhancements.

	* po/pl.po: Update from translation team.
	* po/bg.po: Likewise.

	* manual/contrib.texi (Contributors): Update entries for Hongjiu
	Lu and Joseph S. Myers.  Add entry for Marcus Shawcroft.

2012-12-11  David S. Miller  <davem@davemloft.net>

	* po/sv.po: Update from translation team.

	* po/vi.po: Update from translation team.

	* po/cs.po: Update from translation team.

	* po/de.po: Update from translation team.
	* po/eo.po: Likewise.
	* po/nl.po: Likewise.

2012-12-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14246]
	* manual/argp.texi (Argp Helper Functions): Move node to follow
	Argp Parsing State.

	[BZ #14872]
	* manual/conf.texi (Limits on File System Capacity): Mention if
	terminating null is included in the max size.

2012-12-10  Andreas Jaeger  <aj@suse.de>

	* po/cs.po: Update from translation team.

2012-12-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/jmpbuf-unwind.h (_jmpbuf_sp): Declare SP as
	void pointer and cast to uintptr_t.
	* sysdeps/s390/s390-64/memcmp.S: Pick sysdep.h from include
	path.
	* sysdeps/s390/s390-64/memcpy.S: Likewise.
	* sysdeps/s390/s390-64/memset.S: Likewise.

2012-12-08  Benno Schulenberg  <bensberg@justemail.net>

	[BZ #14833]
	* menual/message.texi (Message Translation): Fix typos.
	(Helper programs for gettext): Likewise.

2012-12-07  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14898]
	* include/link.h (FORCED_DYNAMIC_TLS_OFFSET) [NO_TLS_OFFSET == 0]:
	Change to -1.

2012-12-07  David S. Miller  <davem@davemloft.net>

	* po/libc.pot: Update.

2012-12-07  Richard Henderson  <rth@redhat.com>

	[BZ #10114]
	* soft-fp/op-common.h (_FP_MUL): Pull computation of R_e from the
	normal/normal case to before the switch.
	(_FP_DIV): Likewise.

2012-12-06  Carlos O'Donell  <carlos@systemhalted.org>
	    Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/posix_fadvise.c (posix_fadvise): Also
	check for __NR_fadvise64_64.

2012-12-06  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/generic/fpu_control.h (_FPU_GETCW): Define to set cw to
	0, not just to plain "0" as a statement.
	(_FPU_SETCW): Define to (void) (cw), rather than doing nothing
	with cw.

2012-12-06  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Use sourceware.org in Bugzilla URL.

2012-12-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	* stdio-common/tst-put-error.c (do_test): Add newline to the
	padded test to ensure flush.

2012-12-05  Jeff Law  <law@redhat.com>

	* sunrpc/etc.rpc (fedfs_admin): Add entry.

2012-12-05  Joseph Myers  <joseph@codesourcery.com>

	* README: Don't refer to ports add-on as distributed separately.
	Mention AArch64 in list of systems supported in the ports add-on.

	* LICENSES: Add more non-FSF copyright and license notices.

	* soft-fp/op-common.h (_FP_DECL): Declare X##_s with __attribute__
	((unused)).

	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Include <stdlib.h>.

	* stdio-common/tst-put-error.c (do_test): Use 10000000 instead of
	10000 as width of padded output.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/sysdep.h (_SYS_AUXV_H): Define to 1 not empty.

	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Mark
	variable LX with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (__ieee754_rem_pio2l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c (___isnanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Mark variable LY
	with __attribute__ ((unused)).

2012-12-04  David S. Miller  <davem@abraco.davemloft.net>

	* sysdeps/generic/memcopy.h: Add multiple inclusion protection.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-opt/Makefile [$(subdir) = math]
	(CFLAGS-nldbl-acos.c): New variable.
	[$(subdir) = math] (CFLAGS-nldbl-acosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-carg.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cbrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ceil.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cimag.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-conj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-copysign.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cpow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cproj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-creal.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-drem.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erfc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-expm1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fdim.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-finite.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-floor.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmax.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmod.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-frexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-gamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-hypot.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ilogb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isinf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isnan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-jn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ldexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma_r.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log1p.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-logb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-modf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nearbyint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nextafter.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttoward.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttowardf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remainder.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remquo.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-rint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-round.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbln.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-significand.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sincos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-trunc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-yn.c): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	[BZ #14914]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Clear
	whole low double instead of just low 47 bits when splitting values
	into two parts.

2012-12-03  Allan McRae  <allan@archlinux.org>

	* manual/stdio.texi (Predefined Printf Handlers): Remove
	@hsep and @vsep usage.

2012-12-03  Mike Frysinger  <vapier@gentoo.org>

	* bits/byteswap.h [__GNUC__]: Change __GNUC_PREREQ from 4.2 to 4.3.
	* sysdeps/x86/bits/byteswap.h [__GNUC__]: Likewise.

2012-12-03  Jeff Law  <law@redhat.com>

	* time/sys/time.h (settimeofday): Do not mark TV argument
	as __nonnull.

2012-12-01  Mike Frysinger  <vapier@gentoo.org>

	* libio/fileops.c (_IO_new_file_close_it): Do not always flush
	when currently writing and seek to current position when not.
	* libio/Makefile (tests): Remove bug-fclose1.
	* libio/bug-fclose1.c: Delete.

2012-12-01  Joseph Myers  <joseph@codesourcery.com>

	* manual/arith.texi (feenableexcept): Fix typo.
	(fedisableexcept): Likewise.

2012-11-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/powerpc/powerpc64/entry.h (TEXT_START): Define using a
	second, differently-typed declaration, rather than a cast.

2012-11-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sunrpc/rpc/svc.h (__svc_accept_failed): Move declaration...
	* include/rpc/svc.h: ... here.

2012-11-30  Aurelien Jarno  <aurel32@debian.org>

	[BZ #13013]
	* resolv/res_query.c(__libc_res_nquery): Assign hp and hp2
	depending n and resplen2 to catch cases where answer
	equals answerp2.

2012-11-29  Carlos O'Donell  <carlos@systemhalted.org>

	* elf/get-dynamic-info.h (elf_get_dynamic_info): Warn
	for unsupported DF_1_* bits when DL_DEBUG_FILES is set.

2012-11-29  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c (HAS_CPUCLOCK): Delete.

2012-11-29  Roland McGrath  <roland@hack.frob.com>

	* inet/tst-inet6_rth.c (do_test): Use a union rather than type punning.

2012-11-28  Jeff Law  <law@redhat.com>

	[BZ #13761]
	* nscd/grpcache.c (cache_addgr): Rename alloca_used to
	dataset_temporary.  Track alloca usage into alloca_used.
	If dataset is large allocate and release it via malloc/free.

2012-06-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #14197]
	* debug/test-strcpy_chk.c: Mention __chk_fail ABI test.

2012-11-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14803]
	* sysdeps/ieee754/ldbl-96/e_asinl.c (pio2_hi): Use hex float value
	of pi/2 rounded to nearest to 64 bits.
	(pio2_lo): Use hex float value of pi/2 - pio2_hi rounded to
	nearest to 64 bits.
	(pio4_hi): Use hex float value of pi/4 rounded to nearest to 64
	bits.

2012-11-28  Jeff Law <law@redhat.com>
	    Martin Osvald <mosvald@redhat.com>

	[BZ #14889]
	* sunrpc/rpc/svc.h (__svc_accept_failed): New prototype.
	* sunrpc/svc.c: Include time.h.
	(__svc_accept_failed): New function.
	* sunrpc/svc_tcp.c (rendezvous_request): If the accept fails for
	any reason other than EINTR, call __svc_accept_failed.
	* sunrpc/svc_udp.c (svcudp_recv): Similarly.
	* sunrpc/svc_unix.c (rendezvous_request): Similarly.

2012-11-28  Andreas Schwab  <schwab@suse.de>

	* scripts/abilist.awk: Also handle indirect functions in .opd
	section.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13881]
	* sysdeps/x86/fpu/powl_helper.c: New file.
	* sysdeps/x86/fpu/Makefile: Likewise.
	* sysdeps/i386/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* sysdeps/x86_64/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* math/libm-test.inc (pow_test): Add more tests and enable some
	previously disabled tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-11-28  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* nss/makedb.c (is_prime): Assert that input is odd and greater
	than 4.  Note that fact in a comment too.
	(next_prime): Add 4 to input.

2012-11-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/Makefile (tests): Add test case tst-fwrite-error.
	* libio/iofwrite.c (_IO_fwrite): Return 0 on EOF.
	* libio/iofwrite_u.c (fwrite_unlocked): Likewise.
	* libio/tst-fwrite-error.c: New test case.

2012-11-26  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Cast to uintptr_t
	before casting to void *.
	* include/libc-internal.h (__pointer_type): New macro.
	(__integer_if_pointer_type_sub): Likewise.
	(__integer_if_pointer_type): Likewise.
	(cast_to_integer): Likewise.
	* sysdeps/x86_64/bits/atomic.h: Include <libc-internal.h>.
	(__arch_c_compare_and_exchange_val_64_acq): Use cast_to_integer
	before casting to atomic64_t.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-11-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/unwind-dw2-fde.c (get_pc_begin): New function.
	(fde_unencoded_compare): Use get_pc_begin instead of type-punning.
	(add_fdes): Likewise.
	(linear_search_fdes): Likewise.
	(binary_search_unencoded_fdes): Likewise.

2012-11-26  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/sotruss.ksh: Correctly locate argument of -F and -T options.

2012-11-24  Adam Conrad  <adconrad@0c3.net>

	* configure.in: Autodetect C++ header directories.
	* configure: Regenerated.

2012-11-23  Mike Frysinger  <vapier@gentoo.org>

	* elf/Makefile ($(objpfx)ld.so): Change readelf to $(READELF).

2012-11-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-11-22  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fma_test_towardzero) [TEST_LDOUBLE &&
	LDBL_MANT_DIG == 106]: Disable some tests.
	(fma_test_downward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.
	(fma_test_upward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.

	[BZ #14871]
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Return the
	input for small inputs.  Return +/- pi/2 for large inputs.
	* math/libm-test.inc (atan_test): Add more tests.

	* sysdeps/generic/unwind-dw2-fde-glibc.c
	(_Unwind_IteratePhdrCallback): Declare P_DYNAMIC with
	__attribute__ ((unused)).

	[BZ #14645]
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c (__fmal): Compute result as
	x * y if x and y are nonzero and z is zero.

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-117 to +/-
	0x1p-117.

	[BZ #14869]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl): Scale
	up arguments below 2**-450, not just those below 2**-500.
	* math/libm-test.inc (hypot_test): Add another test.

	[BZ #14868]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl):
	Return a+b for ratio over 2**120, not 2**60.
	* math/libm-test.inc (hypot_test): Add another test.

	* math/libm-test.inc (clog_test): Use
	UNDERFLOW_EXCEPTION_LDOUBLE_IBM on two tests.
	(clog10_test): Likewise.

	[BZ #6778]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (big): Change to 1e290L.

2012-11-22  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-11-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/x86_64/multiarch/test-multiarch.c (get_cpuinfo): Terminate
	printf output with newline.

2012-11-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14865]
	* aclocal.m4 (LIBC_LINKER_FEATURE): New macro.
	* configure.in: Use LIBC_LINKER_FEATURE to check -z nodelete,
	-z nodlopen, -z initfirst and -z execstack support.
	* configure: Regenerated.

	* elf/elf.h (DF_1_NODIRECT): New macro.
	(DF_1_IGNMULDEF): Likewise.
	(DF_1_NOKSYMS): Likewise.
	(DF_1_NOHDR): Likewise.
	(DF_1_EDITED): Likewise.
	(DF_1_NORELOC): Likewise.
	(DF_1_SYMINTPOSE): Likewise.
	(DF_1_GLOBAUDIT): Likewise.
	(DF_1_SINGLETON): Likewise.
	* elf/get-dynamic-info.h (elf_get_dynamic_info): Assert
	DT_1_SUPPORTED_MASK bits.
	* include/elf.h (DT_1_SUPPORTED_MASK): New macro.

2012-11-20  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/unix/make-syscalls.sh: Document prefixes.

2012-11-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/dl-machine.h (ELF_MACHINE_RUNTIME_FIXUP_PARAMS): New
	macro.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr, recvmmsg)
	(sendmmsg): Move declarations...
	* socket/sys/socket.h: ... here.
	* sysdeps/unix/sysv/linux/recvmmsg.c [!defined __NR_recvmmsg &&
	!defined __NR_socketcall] (recvmmsg): Move ENOSYS stub into and
	include it from...
	* socket/recvmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S [__ASSUME_SENDMMSG]
	(sendmmsg): Rename to __sendmmsg, create weak alias and make
	definition of __sendmmsg hidden.
	* sysdeps/unix/sysv/linux/sendmmsg.c (sendmmsg): Likewise.
	[!defined __NR_sendmmsg && !defined __NR_socketcall] (sendmmsg):
	Move ENOSYS stub into and include it from...
	* socket/sendmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket]
	(sysdep_routines): Move recvmmsg and sendmmsg...
	* socket/Makefile (routines): ... here.
	* socket/Versions (GLIBC_2.17): Add recvmmsg and sendmmsg.
	(GLIBC_PRIVATE): Add __sendmmsg.
	* include/sys/socket.h (__sendmmsg): Add declarations.
	* resolv/res_send.c (send_dg): Invoke __sendmmsg instead of
	sendmmsg.

2012-11-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Mark
	variable I1 with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/_itowa.c (_itowa) [BITS_PER_MP_LIMB == 64]: Declare
	DUMMY variables with __attribute__ ((unused)).

	* bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): Use __uint64_t instead of unsigned long long int.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptsname.c (ptsname): Change the type of PEERNAME to
	string_t.  Do not manually set errno.
	(__ptsname_r): Change the type of PEERNAME to string_t, and check its
	length with __strnlen.  Make sure to both set errno and return it on
	failure.

2012-11-19  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/ldbl-128/s_atanl.c (__atanl): Handle tiny and
	very large arguments properly.
	* math/libm-test.inc (atan_test): New tests.
	(atan2_test): New tests.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14856]
	* posix/bits/posix1_lim.h [!__USE_XOPEN2K] (_POSIX_TZNAME_MAX):
	Define to 3.

	* conform/data/errno.h-data [POSIX] (EADDRINUSE): Do not expect.
	[POSIX] (EADDRNOTAVAIL): Likewise.
	[POSIX] (EAFNOSUPPORT): Likewise.
	[POSIX] (EALREADY): Likewise.
	[POSIX] (ECONNABORTED): Likewise.
	[POSIX] (ECONNREFUSED): Likewise.
	[POSIX] (ECONNRESET): Likewise.
	[POSIX] (EDESTADDRREQ): Likewise.
	[POSIX] (EDQUOT): Likewise.
	[POSIX] (EHOSTUNREACH): Likewise.
	[POSIX] (EIDRM): Likewise.
	[POSIX] (EISCONN): Likewise.
	[POSIX] (ELOOP): Likewise.
	[POSIX] (EMULTIHOP): Likewise.
	[POSIX] (ENETDOWN): Likewise.
	[POSIX] (ENETUNREACH): Likewise.
	[POSIX] (ENOBUFS): Likewise.
	[POSIX] (ENODATA): Likewise.
	[POSIX] (ENOLINK): Likewise.
	[POSIX] (ENOMSG): Likewise.
	[POSIX] (ENOPROTOOPT): Likewise.
	[POSIX] (ENOSR): Likewise.
	[POSIX] (ENOSTR): Likewise.
	[POSIX] (ENOTCONN): Likewise.
	[POSIX] (ENOTSOCK): Likewise.
	[POSIX] (EOPNOTSUPP): Likewise.
	[POSIX] (EOVERFLOW): Likewise.
	[POSIX] (EPROTO): Likewise.
	[POSIX] (EPROTONOSUPPORT): Likewise.
	[POSIX] (EPROTOTYPE): Likewise.
	[POSIX] (ESTALE): Likewise.
	[POSIX] (ETIME): Likewise.
	[POSIX] (ETXTBSY): Likewise.
	[POSIX] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (E*): Do not allow.
	* conform/data/fcntl.h-data [POSIX] (SEEK_SET): Allow.
	[POSIX] (SEEK_CUR): Likewise.
	[POSIX] (SEEK_END): Likewise.
	[POSIX || UNIX98] (mode_t): Do not require.
	[POSIX] (off_t): Likewise.
	[POSIX] (pid_t): Likewise.
	[POSIX] (sys/stat.h): Do not allow header.
	[POSIX] (unistd.h): Likewise.
	[!ISO && !ISO99 && !ISO11] (timespec): Do not allow.
	[!ISO && !ISO99 && !ISO11] (tv_nsec): Likewise.
	[!ISO && !ISO99 && !ISO11] (tv_sec): Likewise.
	* conform/data/locale.h-data [POSIX] (LC_MESSAGES): Do not
	require.
	* conform/data/mqueue.h-data [!ISO && !ISO99 && !ISO11] (struct
	sigevent): Specify elements.
	[XOPEN2K8 || POSIX2008] (struct sigevent): Remove duplicate type
	entry.
	[!ISO && !ISO99 && !ISO11] (mq_*): Allow.
	[!ISO && !ISO99 && !ISO11] (MQ_*): Likewise.

	* conform/data/cpio.h-data [POSIX]: Disable whole file.
	* conform/data/glob.h-data [POSIX] (GLOB_NOSYS): Do not expect.
	* conform/data/limits.h-data [!ISO && !ISO99 && !ISO11]
	(AIO_LIST_MAX): Change to AIO_LISTIO_MAX.
	[!ISO && !ISO99 && !ISO11] (ATEXT_MAX): Remove.
	[!ISO && !ISO99 && !ISO11 && !POSIX && !XPG3] (ATEXIT_MAX): Allow.
	[POSIX || POSIX2008 || XPG3] (IOV_MAX): Do not allow.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (MQ_PRIO_MAX): Allow.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Remove duplicate entry.
	[POSIX || XPG3 || XPG4 || UNIX98] (SS_REPL_MAX): Do not allow.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLOOP_MAX): Likewise.
	[POSIX || XPG3 || XPG4] (FILESIZEBITS): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_ALLOC_SIZE_MIN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_INCR_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_MAX_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_XFER_ALIGN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SS_REPL_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLOOP_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_BASE_MAX): Use macro-constant.
	Specify lower bound on value.
	[!ISO && !ISO99 && !ISO11] (BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (COLL_WEIGHTS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Likewise
	[POSIX || XPG3 || XPG4] (CHARCLASS_NAME_MAX): Do not allow.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CLOCKRES_MIN): Specify exact
	value.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_LISTIO_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_ARG_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CHILD_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_DELAYTIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LINK_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LOGIN_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_CANON): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_INPUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_PRIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NGROUPS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PATH_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PIPE_BUF): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Remove duplicate
	entry.
	[!ISO && !ISO99 && !ISO11] (_POSIX_RTSIG_MAX): Do not specify as
	optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_NSEMS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_VALUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SIGQUEUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SSIZE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_STREAM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_DESTRUCTOR_ITERATIONS):
	Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_KEYS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_THREADS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TTY_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TZNAME_MAX): Likewise.  Give
	value as 3 for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_BASE_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_CHARCLASS_NAME_MAX):
	Likewise.  Do not allow for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_COLL_WEIGHTS_MAX): Do not
	specify as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_LINE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Likewise.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Do not allow.
	[POSIX || XPG3] (NL_ARGMAX): Do not allow.
	[XPG3] (NL_LANGMAX): Likewise.
	[POSIX || XPG3] (NL_MSGMAX): Likewise.
	[POSIX || XPG3] (NL_NMAX): Likewise.
	[POSIX || XPG3] (NL_SETMAX): Likewise.
	[POSIX || XPG3] (NL_TEXTMAX): Likewise.
	[XPG3] (NZERO): Likewise.
	[XPG4 || UNIX98] (TMP_MAX): Only enable for these conditions.
	[POSIX || XPG3 || XPG4 || UNIX98] (*_MIN): Do not allow.
	[!ISO && !ISO99 && !ISO11] (*_t): Allow.
	* conform/data/regex.h-data [!ISO && !ISO99 && !ISO11]
	(REG_ERANGE): Expect.
	* conform/data/stdio.h-data [POSIX] (L_cuserid): Use
	optional-constant.
	[POSIX || XOPEN2K || XOPEN2K8 || POSIX2008] (getchar_unlocked):
	Use (void) in prototype.
	[POSIX] (*_t): Allow.
	* conform/data/sys/times.h-data [POSIX]: Enable whole file.
	* conform/data/wordexp.h-data [!ISO && !ISO99 && !ISO11]
	(WRDE_BADVAL): Expect.

	* conform/data/fcntl.h-data [XPG3 || XPG4] (O_DSYNC): Do not
	expect.
	[XPG3 || XPG4] (O_RSYNC): Likewise.
	* conform/data/signal.h-data [XPG3 || XPG4] (pthread_kill):
	Likewise.
	[XPG3 || XPG4] (pthread_sigmask): Likewise.
	[XPG3 || XPG4] (sigqueue): Likewise.
	[XPG3 || XPG4] (sigtimedwait): Likewise.
	[XPG3 || XPG4] (sigwaitinfo): Likewise.
	* conform/data/stdio.h-data [XPG3 || XPG4] (snprintf): Likewise.
	[XPG3 || XPG4] (vsnprintf): Likewise.
	* conform/data/sys/stat.h-data [XPG3 || XPG4] (blkcnt_t):
	Likewise.
	[XPG3 || XPG4] (blksize_t): Likewise.
	* conform/data/time.h-data [XPG3 || XPG4] (struct timespec):
	Likewise.
	[XPG3 || XPG4] (CLOCK_PROCESS_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (CLOCK_THREAD_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (struct itimerspec): Likewise.
	[XPG3 || XPG4] (CLOCK_REALTIME): Likewise.
	[XPG3 || XPG4] (TIMER_ABSTIME): Likewise.
	[XPG3 || XPG4] (CLOCK_MONOTONIC): Likewise.
	[XPG3 || XPG4] (clockid_t): Likewise.
	[XPG3 || XPG4] (timer_t): Likewise.
	[XPG3 || XPG4] (clock_getres): Likewise.
	[XPG3 || XPG4] (clock_gettime): Likewise.
	[XPG3 || XPG4] (clock_settime): Likewise.
	[XPG3 || XPG4] (nanosleep): Likewise.
	[XPG3 || XPG4] (timer_create): Likewise.
	[XPG3 || XPG4] (timer_delete): Likewise.
	[XPG3 || XPG4] (timer_gettime): Likewise.
	[XPG3 || XPG4] (timer_getoverrun): Likewise.
	[XPG3 || XPG4] (timer_settime): Likewise.
	* conform/data/unistd.h-data [XPG3 || XPG4] (fdatasync): Likewise.
	[XPG3 || XPG4] (getlogin_r): Likewise.
	[XPG3 || XPG4] (pread): Likewise.
	[XPG3 || XPG4] (pthread_atfork): Likewise.
	[XPG3 || XPG4] (pwrite): Likewise.

	[BZ #14835]
	* signal/signal.h [__USE_XOPEN_EXTENDED]: Include
	<bits/siginfo.h>.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* malloc/mtrace.c (muntrace): Reset MALLSTREAM and the hooks before
	finalizing MALLSTREAM.

	* sysdeps/mach/hurd/syncfs.c: New file.

2012-11-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14719]
	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Set h_errno to
	NETDB_INTERNAL when NSS_STATUS_UNAVAIL.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Set
	h_errno to NETDB_INTERNAL when errno is EMFILE or ENFILE.
	(_nss_dns_gethostbyname4_r): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Set result to
	EAI_SYSTEM if NSS_STATUS_UNAVAIL.

2012-11-19  Peng Haitao  <penght@cn.fujitsu.com>

	[BZ #13763]
	* sunrpc/bindrsvprt.c: Add lock to protect static variable.

2012-11-19  Steve McIntyre  <steve.mcintyre@linaro.org>

	* sysdeps/generic/ldconfig.h (FLAG_AARCH64_LIB64): New macro.
	* elf/cache.c (print_entry): Print ",AArch64" for
	FLAG_AARCH64_LIB64

	* sysdeps/generic/ldconfig.h (FLAG_ARM_LIBHF): New macro.
	* elf/cache.c (print_entry): Print ",hard-float" for
	FLAG_ARM_LIBHF.

2012-11-18  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/flt-32/e_j0f.c (__ieee754_y0f): Adjust tinyness
	cutoff to 2**-13.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Adjust tinyness
	cutoff to 2**-25.
	* sysdeps/ieee754/ldbl-128/e_j0l.c (U0): New constant.
	( __ieee754_y0l): Avoid arithmetic underflow when 'x' is very
	small.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l): Likewise.
	* math/libm-test.inc (y0_test): New tests.
	(y1_test): New tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-18  Andreas Schwab  <schwab@linux-m68k.org>

	* configure.in (libc_cv_ld_gnu_indirect_function): Use .quad on
	64-bit targets.
	* configure: Regenerated.

2012-11-17  David S. Miller  <davem@davemloft.net>

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-128 to +/-
	0x1p-128.

2012-11-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/fxstatat.c: Include <string.h>.

	* elf/dl-runtime.c [!ELF_MACHINE_NO_PLT]: Make code unconditional.

	* posix/getconf-speclist.c: New file.
	* posix/posix-envs.def: Likewise.
	* posix/confstr.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENV_STRING): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(confstr): Include posix-envs.def instead of handling
	_CS_V7_WIDTH_RESTRICTED_ENVS, _CS_V6_WIDTH_RESTRICTED_ENVS and
	_CS_V5_WIDTH_RESTRICTED_ENVS directly here.
	* sysdeps/posix/sysconf.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(__sysconf): Include posix-envs.def instead of handling associated
	cases directly here.
	* posix/Makefile ($(objpfx)getconf.speclist): Generate by
	preprocessing getconf-speclist.c rather than running getconf or
	generating empty file.

2012-11-16  Pino Toscano  <toscano.pino@tiscali.it>

	* scripts/check-local-headers.sh: Ignore 'mach' headers.

2012-11-16  Andrej Lajovic  <natrij@gmail.com>

	[BZ #14672]
	* iconv/iconv_prog.c (main): Fix -c handling of '/'.

2012-11-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): If xm1 is
	smaller than LDBL_EPSILON/2.0L, just return xm1.

2012-11-16  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-array1.c (init): Set constructor priority to 1000.
	(fini): Set destructor priority to 1000.
	* elf/tst-array2dep.c: Likewise.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/fileops.c (_IO_new_file_write): Correctly return error.
	(_IO_new_file_xsputn): Also return EOF if none of the input
	data was written when overflow failed.
	* libio/iopadn.c (_IO_padn): Likewise.
	* libio/iowpadn.c (_IO_wpadn): Likewise.
	* stdio-common/tst-put-error.c: Add copyright notice.
	(do_test): Add case for printing padded string.
	* stdio-common/vfprintf [!COMPILE_WPRINTF] (PAD): Flag error if
	_IO_padn returned error.
	[COMPILE_WPRINTF] (PAD): Flag error if _IO_wpadn returned error.
	* libio/libioP.h (_IO_xsputn_t): Note in comment that xsputn can
	return EOF.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/libioP.h: Add comment note that the references to C++
	bits are now obsolete.

2012-11-15  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* math/libm-test.inc (check_complex): Use asprintf.

2012-11-14  Joseph Myers  <joseph@codesourcery.com>

	* debug/pcprofiledump.c (print_version): Update copyright year.
	* malloc/memusagestat.c (print_version): Likewise.

2012-11-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14831]
	* elf/Makefile (tests): Add tst-audit8.
	($(objpfx)tst-audit8): Also depend on $(common-objpfx)math/libm.so.
	($(objpfx)tst-audit8.out): New target.
	(tst-audit8-ENV): New variable.
	* elf/dl-runtime.c (_dl_profile_fixup): Call _dl_fixup to skip
	audit if l_reloc_result is NULL.
	(ELF_MACHINE_RUNTIME_FIXUP_PARAMS): Issue an error if it isn't
	defined and ELF_MACHINE_RUNTIME_FIXUP_ARGS is defined.
	* elf/tst-audit8.c: New file.

2012-11-14  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* io/Makefile (CFLAGS-open.c, CFLAGS-open64.c): Define.
	* misc/Makefile (CFLAGS-select.c): Define.
	* posix/Makefile (CFLAGS-pause.c): Define.

2012-11-13  David S. Miller  <davem@davemloft.net>

	* crypt/Makefile: Move test targets after toplevel Rules
	inclusion.  Grab any necessary sysdep routines when linking.
	* crypt/md5.c (md5_process_block): Remove define, we will always
	name it __md5_process_block.
	(md5_finish_ctx): Update md5_process_block call.
	(md5_stream): Likewise.
	(md5_process_bytes): Likewise.
	(md5_process_block): Rename to __md5_process_block and move to ...
	* crypt/md5-block.c: ... here.
	* crypt/sha256.c (sha256_process_block): Move to ...
	* crypt/sha256-block.c: ... here.
	* crypt/sha512.c (sha512_process_block): Move to ...
	* crypt/sha512-block.c: ... here.
	* locale/Makefile (CFLAGS-md5.c): Define to add crypt/ to include
	path.
	* sysdeps/sparc/sparc-ifunc.c (sparc_libc_ifunc): Define.
	* sysdeps/sparc/sparc64/multiarch/Makefile
	(libcrypt-sysdep_routines): Add crypto assembler sysdeps when in
	crypt subdir.
	(localedef-aux): Add md5 crypto assembler when in locale subdir.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Mirror sparc64
	multiarch changes.
	* sysdeps/sparc/sparc64/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-crop.S: New file.

2012-11-13  Joseph Myers  <joseph@codesourcery.com>

	* timezone/tzselect.ksh: Update from tzcode git revision
	a435f9f0ecafa56d9e0263835836bd0c64cd7307.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.
	* timezone/Makefile ($(objpfx)version.h): Only include $(version)
	in TZVERSION setting, not $(PKGVERSION).
	($(objpfx)tzselect): Likewise.  Also substitute PKGVERSION and
	REPORT_BUGS_TO settings.

	[BZ #14838]
	* resolv/netdb.h [__USE_XOPEN_EXTENDED] (IPPORT_RESERVED): Define
	macro.

2012-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Move underflow
	detection to immediately after _FP_ROUND().
	* soft-fp/soft-fp.h (_FP_ROUND): Don't round if working
	bits are 0.

2012-11-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Include
	inttypes.h
	(__get_clockfreq_via_proc_openprom): Use __open, __read, and
	__close rather than their public counterparts.

2012-11-10  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/semaphore.h-data [XPG3 || XPG4]: Disable whole
	file.
	[UNIX98] (sem_timedwait): Do not expect.
	* conform/data/sys/socket.h-data [XPG3]: Disable whole file.
	[XPG4 || UNIX98] (sockatmark): Do not expect.
	* conform/data/time.h-data [XPG3 || XPG4 || UNIX98]
	(clock_getcpuclockid): Do not expect.
	[XPG3 || XPG4 || UNIX98] (clock_nanosleep): Do not expect.
	* conform/data/unistd.h-data [XPG3 || XPG4 || UNIX98] (setegid):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (seteuid): Likewise.
	* conform/data/wchar.h-data [UNIX98] (vfwscanf): Do not expect.
	[UNIX98] (vwscanf): Likewise.
	[UNIX98] (vswscanf): Likewise.

2012-11-09  Joseph Myers  <joseph@codesourcery.com>

	* timezone/version.h: Remove file.
	* timezone/README: Do not refer to version.h.
	* timezone/Makefile ($(objpfx)zic.o): New dependency on
	$(objpfx)version.h.
	($(objpfx)zdump.o): Likewise.
	($(objpfx)version.h): New target.

	* timezone/tzselect.ksh: Change to verbatim copy from tzcode
	2012i.
	* timezone/README: Don't mention modification to tzselect.ksh.
	* timezone/Makefile ($(objpfx)tzselect): Update substitutions to
	work on unmodified tzselect.ksh.  Substitute version numbers in
	tzselect.ksh.

	* Makefile (format-me): Remove.
	(INSTALL): Adjust indentation.  Use commands directly instead of
	using $(format-me).

	* aclocal.m4 (ACX_PKGVERSION): New macro.
	(ACX_BUGURL): Likewise.
	* configure.in: Use ACX_PKGVERSION and ACX_BUGURL.
	(PKGVERSION): New AC_DEFINE_UNQUOTED.
	(REPORT_BUGS_TO): Likewise.
	* configure: Regenerated.
	* config.h.in (PKGVERSION): New macro.
	(REPORT_BUGS_TO): Likewise.
	* config.make.in (PKGVERSION): New variable.
	(PKGVERSION_TEXI): Likewise.
	(REPORT_BUGS_TO): Likewise.
	(REPORT_BUGS_TEXI): Likewise.
	* Makefile (format-me): Use -I$(common-objpfx)manual.
	(INSTALL): Depend on $(common-objpfx)manual/pkgvers.texi.
	($(common-objpfx)manual/%): New target.
	(manual/%): Remove target.
	* catgets/gencat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* csu/version.c (banner): Use PKGVERSION and REPORT_BUGS_TO.
	* debug/Makefile ($(objpfx)catchsegv): Also substitute PKGVERSION
	and REPORT_BUGS_TO.
	($(objpfx)xtrace): Likewise.
	* debug/catchsegv.sh: Use PKGVERSION and REPORT_BUGS_TO.
	* debug/pcprofiledump.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* debug/xtrace.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* elf/Makefile ($(objpfx)sotruss): Also substitute PKGVERSION and
	REPORT_BUGS_TO.
	(common-ldd-rewrite): Likewise.
	* elf/dl-close.c (_dl_close_worker): Use REPORT_BUGS_TO.
	* elf/ldconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* elf/ldd.bash.in: Use PKGVERSION and REPORT_BUGS_TO.
	* elf/pldd.c (argp_program_bug_address): Remove variable.
	(more_help): New function.
	(argp): Use more_help.
	(print_version): Use PKGVERSION.
	* elf/sln.c (main): Use PKGVERSION.
	(usage): Use REPORT_BUGS_TO.
	* elf/sotruss.ksh (do_help): Use REPORT_BUGS_TO.
	(top level): Use PKGVERSION.
	* elf/sprof.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconv_prog.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconvconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/locale.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/localedef.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* login/programs/pt_chown.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/Makefile ($(objpfx)mtrace): Also substitute PKGVERSION
	and BUGURL.
	($(objpfx)memusage): Likewise.
	* malloc/memusage.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* malloc/memusagestat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/mtrace.pl ($PACKAGE): Remove variable.
	($PKGVERSION): New variable.
	($REPORT_BUGS_TO): Likewise.
	(usage): Use $REPORT_BUGS_TO.
	(top level): Use $PKGVERSION.
	* manual/Makefile (libc-texi-generated): Add pkgvers.texi.
	($(objpfx)pkgvers.texi): New rule.
	($(objpfx)stamp-pkgvers): Likewise.
	* manual/install.texi: Include pkgvers.texi.
	(--with-pkgversion): Document new configure option.
	(--with-bugurl): Likewise.
	(Reporting Bugs): Describe Bugzilla as upstream tracker rather
	than necessarily for this particular distribution.  Use
	REPORT_BUGS_TO for where to report bugs.
	* INSTALL: Regenerated.
	* manual/libc.texinfo: Include pkgvers.texi.
	[!PKGVERSION_DEFAULT]: Include PKGVERSION in version information.
	* nscd/nscd.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/getent.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/makedb.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* posix/getconf.c (main): Use PKGVERSION and REPORT_BUGS_TO.
	* sunrpc/proto.h [IS_IN_build] (_libc_intl_domainname): Remove
	macro.
	* sunrpc/rpc_main.c (options_usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sunrpc/rpcinfo.c (usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Use REPORT_BUGS_TO
	and PKGVERSION.

	* timezone/checktab.awk: Update from tzcode 2012i.
	* timezone/ialloc.c: Likewise.
	* timezone/private.h: Likewise.
	* timezone/scheck.c: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Merge in changes from tzcode 2012i.
	(TZVERSION): Hardcode tzcode version number.
	* timezone/zdump.c: Update from tzcode 2012i.
	* timezone/zic.c: Likewise.
	* timezone/version.h: New file.
	* timezone/README: Describe version.h.  Update upstream location.

	[BZ #14824]
	* stdlib/stdlib.h [__USE_XOPEN_EXTENDED && __USE_XOPEN2K]
	(mktemp): Enable declaration.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (ecvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (fcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (gcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qecvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qfcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qgcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (ecvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (fcvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (gcvt_r):
	Likewise.

	[BZ #14821]
	* sunrpc/clnt_tcp.c (clnttcp_control): Access values at fixed
	offset in buffer as u_int32_t not u_long.  Consistently use memcpy
	for copies of such integer values.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2012-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-11-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Add "te".
	* sysdeps/s390/dl-procinfo.h (HWCAP_S390_TE): Add enum value.
	* sysdeps/unix/sysv/linux/s390/hwcap.h (HWCAP_S390_TE): Add macro
	definition.

2012-11-08  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h: Update comment before AArch64 relocations.

2012-11-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/__start_context.S: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__start_context): Declare.
	(__makecontext_ret): Delete.
	(__makecontext): Hook up __start_context instead of
	__makecontext_ret.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile
	(sysdep_routines): Add __start_context when in stdlib.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/Makefile ($(objpfx)tst-xmmymm.out): Pass $(NM),
	$(OBJDUMP) and $(READELF) to tst-xmmymm.sh.
	* sysdeps/x86/tst-xmmymm.sh (NM): New variable.  Use it instead of
	hardcoded "nm".
	(OBJDUMP): New variable.  Use it instead of hardcoded "objdump".
	(READELF): New variable.  Use it instead of hardcoded "readelf".

2012-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile ($(objpfx)tst-xmmymm.out): Moved to ...
	* sysdeps/x86/Makefile: Here.
	* sysdeps/x86_64/tst-xmmymm.sh: Renamed to ...
	* sysdeps/x86/tst-xmmymm.sh: This.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pthread.h-data [XPG3 || XPG4]: Disable all
	expectations.
	[UNIX98] (pthread_barrier_t): Do not expect.
	[UNIX98] (pthread_barrierattr_t): Likewise.
	[UNIX98] (pthread_spinlock_t): Likewise.
	[UNIX98] (pthread_barrier_destroy): Likewise.
	[UNIX98] (pthread_barrier_init): Likewise.
	[UNIX98] (pthread_barrier_wait): Likewise.
	[UNIX98] (pthread_barrierattr_destroy): Likewise.
	[UNIX98] (pthread_barrierattr_getpshared): Likewise.
	[UNIX98] (pthread_barrierattr_init): Likewise.
	[UNIX98] (pthread_barrierattr_setpshared): Likewise.
	[UNIX98] (pthread_getcpuclockid): Likewise.
	[UNIX98] (pthread_mutex_timedlock): Likewise.
	[UNIX98] (pthread_rwlock_timedrdlock): Likewise.
	[UNIX98] (pthread_rwlock_timedwrlock): Likewise.
	[UNIX98] (pthread_sigmask): Likewise.
	[UNIX98] (pthread_spin_destroy): Likewise.
	[UNIX98] (pthread_spin_init): Likewise.
	[UNIX98] (pthread_spin_lock): Likewise.
	[UNIX98] (pthread_spin_trylock): Likewise.
	[UNIX98] (pthread_spin_unlock): Likewise.
	* conform/data/sys/types.h-data [XPG3 || XPG4] (pthread_attr_t):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (pthread_barrier_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_barrierattr_t): Likewise.
	[XPG3 || XPG4] (pthread_cond_t): Likewise.
	[XPG3 || XPG4] (pthread_condattr_t): Likewise.
	[XPG3 || XPG4] (pthread_key_t): Likewise.
	[XPG3 || XPG4] (pthread_mutex_t): Likewise.
	[XPG3 || XPG4] (pthread_mutexattr_t): Likewise.
	[XPG3 || XPG4] (pthread_once_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlock_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlockattr_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_spinlock_t): Likewise.
	[XPG3 || XPG4] (pthread_t): Likewise.

	* conform/data/stdlib.h-data [XPG3 || XPG4 || UNIX98] (setenv): Do
	not expect.
	[XPG3 || XPG4 || UNIX98] (unsetenv): Likewise.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (isnan):
	Change function return type to int.

	* conform/data/sys/mman.h-data [!POSIX] (POSIX_MADV_NORMAL):
	Change condition to [!POSIX && !XPG3 && !XPG4 && !UNIX98].
	[!POSIX] (POSIX_MADV_SEQUENTIAL): Likewise.
	[!POSIX] (POSIX_MADV_RANDOM): Likewise.
	[!POSIX] (POSIX_MADV_WILLNEED): Likewise.
	[!POSIX] (POSIX_MADV_DONTNEED): Likewise.
	[!POSIX] (posix_madvise): Likewise.
	(POSIX_TYPED_MEM_ALLOCATE): Condition on [!POSIX && !XPG3 && !XPG4
	&& !UNIX98].
	(POSIX_TYPED_MEM_ALLOCATE_CONTIG): Likewise.
	(POSIX_TYPED_MEM_MAP_ALLOCATABLE): Likewise.
	(mode_t): Likewise.
	(posix_mem_offset): Likewise.
	(posix_typed_mem_get_info): Likewise.
	(posix_typed_mem_open): Likewise.

	* conform/data/sys/stat.h-data [!POSIX && !POSIX2008] (mknodat):
	Change condition to [XOPEN2K8].

	* conform/conformtest.pl: Preprocess allow-header data with -x c
	instead of from stdin.
	(@headers): Add stdalign.h, stdbool.h and stdnoreturn.h.
	* conform/data/complex.h-data [C99-based standards] (cerf): Allow.
	[C99-based standards] (cerfc): Likewise.
	[C99-based standards] (cexp2): Likewise.
	[C99-based standards] (cexpm1): Likewise.
	[C99-based standards] (clog10): Likewise.
	[C99-based standards] (clog1p): Likewise.
	[C99-based standards] (clog2): Likewise.
	[C99-based standards] (clgamma): Likewise.
	[C99-based standards] (ctgamma): Likewise.
	[C99-based standards] (cerff): Likewise.
	[C99-based standards] (cerfcf): Likewise.
	[C99-based standards] (cexp2f): Likewise.
	[C99-based standards] (cexpm1f): Likewise.
	[C99-based standards] (clog10f): Likewise.
	[C99-based standards] (clog1pf): Likewise.
	[C99-based standards] (clog2f): Likewise.
	[C99-based standards] (clgammaf): Likewise.
	[C99-based standards] (ctgammaf): Likewise.
	[C99-based standards] (cerfl): Likewise.
	[C99-based standards] (cerfcl): Likewise.
	[C99-based standards] (cexp2l): Likewise.
	[C99-based standards] (cexpm1l): Likewise.
	[C99-based standards] (clog10l): Likewise.
	[C99-based standards] (clog1pl): Likewise.
	[C99-based standards] (clog2l): Likewise.
	[C99-based standards] (clgammal): Likewise.
	[C99-based standards] (ctgammal): Likewise.
	* conform/data/inttypes.h-data [C99-based standards]: Include
	stdint.h-data.  Remove all expectations for stdint.h contents.
	[C99-based standards] (PRI*): Do not allow.
	[C99-based standards] (SCN*): Likewise.
	[C99-based standards] (*_t): Likewise.
	[C99-based-standards] (PRId8): Expect macro.
	[C99-based-standards] (PRIi8): Likewise.
	[C99-based-standards] (PRIo8): Likewise.
	[C99-based-standards] (PRIu8): Likewise.
	[C99-based-standards] (PRIx8): Likewise.
	[C99-based-standards] (PRIX8): Likewise.
	[C99-based-standards] (SCNd8): Likewise.
	[C99-based-standards] (SCNi8): Likewise.
	[C99-based-standards] (SCNo8): Likewise.
	[C99-based-standards] (SCNu8): Likewise.
	[C99-based-standards] (SCNx8): Likewise.
	[C99-based-standards] (PRIdLEAST8): Likewise.
	[C99-based-standards] (PRIiLEAST8): Likewise.
	[C99-based-standards] (PRIoLEAST8): Likewise.
	[C99-based-standards] (PRIuLEAST8): Likewise.
	[C99-based-standards] (PRIxLEAST8): Likewise.
	[C99-based-standards] (PRIXLEAST8): Likewise.
	[C99-based-standards] (SCNdLEAST8): Likewise.
	[C99-based-standards] (SCNiLEAST8): Likewise.
	[C99-based-standards] (SCNoLEAST8): Likewise.
	[C99-based-standards] (SCNuLEAST8): Likewise.
	[C99-based-standards] (SCNxLEAST8): Likewise.
	[C99-based-standards] (PRIdFAST8): Likewise.
	[C99-based-standards] (PRIiFAST8): Likewise.
	[C99-based-standards] (PRIoFAST8): Likewise.
	[C99-based-standards] (PRIuFAST8): Likewise.
	[C99-based-standards] (PRIxFAST8): Likewise.
	[C99-based-standards] (PRIXFAST8): Likewise.
	[C99-based-standards] (SCNdFAST8): Likewise.
	[C99-based-standards] (SCNiFAST8): Likewise.
	[C99-based-standards] (SCNoFAST8): Likewise.
	[C99-based-standards] (SCNuFAST8): Likewise.
	[C99-based-standards] (SCNxFAST8): Likewise.
	[C99-based-standards] (PRId16): Likewise.
	[C99-based-standards] (PRIi16): Likewise.
	[C99-based-standards] (PRIo16): Likewise.
	[C99-based-standards] (PRIu16): Likewise.
	[C99-based-standards] (PRIx16): Likewise.
	[C99-based-standards] (PRIX16): Likewise.
	[C99-based-standards] (SCNd16): Likewise.
	[C99-based-standards] (SCNi16): Likewise.
	[C99-based-standards] (SCNo16): Likewise.
	[C99-based-standards] (SCNu16): Likewise.
	[C99-based-standards] (SCNx16): Likewise.
	[C99-based-standards] (PRIdLEAST16): Likewise.
	[C99-based-standards] (PRIiLEAST16): Likewise.
	[C99-based-standards] (PRIoLEAST16): Likewise.
	[C99-based-standards] (PRIuLEAST16): Likewise.
	[C99-based-standards] (PRIxLEAST16): Likewise.
	[C99-based-standards] (PRIXLEAST16): Likewise.
	[C99-based-standards] (SCNdLEAST16): Likewise.
	[C99-based-standards] (SCNiLEAST16): Likewise.
	[C99-based-standards] (SCNoLEAST16): Likewise.
	[C99-based-standards] (SCNuLEAST16): Likewise.
	[C99-based-standards] (SCNxLEAST16): Likewise.
	[C99-based-standards] (PRIdFAST16): Likewise.
	[C99-based-standards] (PRIiFAST16): Likewise.
	[C99-based-standards] (PRIoFAST16): Likewise.
	[C99-based-standards] (PRIuFAST16): Likewise.
	[C99-based-standards] (PRIxFAST16): Likewise.
	[C99-based-standards] (PRIXFAST16): Likewise.
	[C99-based-standards] (SCNdFAST16): Likewise.
	[C99-based-standards] (SCNiFAST16): Likewise.
	[C99-based-standards] (SCNoFAST16): Likewise.
	[C99-based-standards] (SCNuFAST16): Likewise.
	[C99-based-standards] (SCNxFAST16): Likewise.
	[C99-based-standards] (PRId32): Likewise.
	[C99-based-standards] (PRIi32): Likewise.
	[C99-based-standards] (PRIo32): Likewise.
	[C99-based-standards] (PRIu32): Likewise.
	[C99-based-standards] (PRIx32): Likewise.
	[C99-based-standards] (PRIX32): Likewise.
	[C99-based-standards] (SCNd32): Likewise.
	[C99-based-standards] (SCNi32): Likewise.
	[C99-based-standards] (SCNo32): Likewise.
	[C99-based-standards] (SCNu32): Likewise.
	[C99-based-standards] (SCNx32): Likewise.
	[C99-based-standards] (PRIdLEAST32): Likewise.
	[C99-based-standards] (PRIiLEAST32): Likewise.
	[C99-based-standards] (PRIoLEAST32): Likewise.
	[C99-based-standards] (PRIuLEAST32): Likewise.
	[C99-based-standards] (PRIxLEAST32): Likewise.
	[C99-based-standards] (PRIXLEAST32): Likewise.
	[C99-based-standards] (SCNdLEAST32): Likewise.
	[C99-based-standards] (SCNiLEAST32): Likewise.
	[C99-based-standards] (SCNoLEAST32): Likewise.
	[C99-based-standards] (SCNuLEAST32): Likewise.
	[C99-based-standards] (SCNxLEAST32): Likewise.
	[C99-based-standards] (PRIdFAST32): Likewise.
	[C99-based-standards] (PRIiFAST32): Likewise.
	[C99-based-standards] (PRIoFAST32): Likewise.
	[C99-based-standards] (PRIuFAST32): Likewise.
	[C99-based-standards] (PRIxFAST32): Likewise.
	[C99-based-standards] (PRIXFAST32): Likewise.
	[C99-based-standards] (SCNdFAST32): Likewise.
	[C99-based-standards] (SCNiFAST32): Likewise.
	[C99-based-standards] (SCNoFAST32): Likewise.
	[C99-based-standards] (SCNuFAST32): Likewise.
	[C99-based-standards] (SCNxFAST32): Likewise.
	[C99-based-standards] (PRId64): Likewise.
	[C99-based-standards] (PRIi64): Likewise.
	[C99-based-standards] (PRIo64): Likewise.
	[C99-based-standards] (PRIu64): Likewise.
	[C99-based-standards] (PRIx64): Likewise.
	[C99-based-standards] (PRIX64): Likewise.
	[C99-based-standards] (SCNd64): Likewise.
	[C99-based-standards] (SCNi64): Likewise.
	[C99-based-standards] (SCNo64): Likewise.
	[C99-based-standards] (SCNu64): Likewise.
	[C99-based-standards] (SCNx64): Likewise.
	[C99-based-standards] (PRIdLEAST64): Likewise.
	[C99-based-standards] (PRIiLEAST64): Likewise.
	[C99-based-standards] (PRIoLEAST64): Likewise.
	[C99-based-standards] (PRIuLEAST64): Likewise.
	[C99-based-standards] (PRIxLEAST64): Likewise.
	[C99-based-standards] (PRIXLEAST64): Likewise.
	[C99-based-standards] (SCNdLEAST64): Likewise.
	[C99-based-standards] (SCNiLEAST64): Likewise.
	[C99-based-standards] (SCNoLEAST64): Likewise.
	[C99-based-standards] (SCNuLEAST64): Likewise.
	[C99-based-standards] (SCNxLEAST64): Likewise.
	[C99-based-standards] (PRIdFAST64): Likewise.
	[C99-based-standards] (PRIiFAST64): Likewise.
	[C99-based-standards] (PRIoFAST64): Likewise.
	[C99-based-standards] (PRIuFAST64): Likewise.
	[C99-based-standards] (PRIxFAST64): Likewise.
	[C99-based-standards] (PRIXFAST64): Likewise.
	[C99-based-standards] (SCNdFAST64): Likewise.
	[C99-based-standards] (SCNiFAST64): Likewise.
	[C99-based-standards] (SCNoFAST64): Likewise.
	[C99-based-standards] (SCNuFAST64): Likewise.
	[C99-based-standards] (SCNxFAST64): Likewise.
	[C99-based-standards] (PRIdMAX): Likewise.
	[C99-based-standards] (PRIiMAX): Likewise.
	[C99-based-standards] (PRIoMAX): Likewise.
	[C99-based-standards] (PRIuMAX): Likewise.
	[C99-based-standards] (PRIxMAX): Likewise.
	[C99-based-standards] (PRIXMAX): Likewise.
	[C99-based-standards] (SCNdMAX): Likewise.
	[C99-based-standards] (SCNiMAX): Likewise.
	[C99-based-standards] (SCNoMAX): Likewise.
	[C99-based-standards] (SCNuMAX): Likewise.
	[C99-based-standards] (SCNxMAX): Likewise.
	[C99-based-standards] (PRIdPTR): Likewise.
	[C99-based-standards] (PRIiPTR): Likewise.
	[C99-based-standards] (PRIoPTR): Likewise.
	[C99-based-standards] (PRIuPTR): Likewise.
	[C99-based-standards] (PRIxPTR): Likewise.
	[C99-based-standards] (PRIXPTR): Likewise.
	[C99-based-standards] (SCNdPTR): Likewise.
	[C99-based-standards] (SCNiPTR): Likewise.
	[C99-based-standards] (SCNoPTR): Likewise.
	[C99-based-standards] (SCNuPTR): Likewise.
	[C99-based-standards] (SCNxPTR): Likewise.
	* conform/data/iso646.h-data [ISO C standards] (*_t): Do not
	allow.
	* conform/data/stdint.h-data: Update comments to clarify
	requirements.
	[C99-based standards] (INT8_MIN): Use macro-int-constant.  Specify
	type.
	[C99-based standards] (INT8_MAX): Likewise.
	[C99-based standards] (INT16_MIN): Likewise.
	[C99-based standards] (INT16_MAX): Likewise.
	[C99-based standards] (INT32_MIN): Likewise.
	[C99-based standards] (INT32_MAX): Likewise.
	[C99-based standards] (INT64_MIN): Likewise.
	[C99-based standards] (INT64_MAX): Likewise.
	[C99-based standards] (UINT8_MAX): Likewise.
	[C99-based standards] (UINT16_MAX): Likewise.
	[C99-based standards] (UINT32_MAX): Likewise.
	[C99-based standards] (UINT64_MAX): Likewise.
	[C99-based standards] (INT_LEAST8_MIN): Likewise.
	[C99-based standards] (INT_LEAST8_MAX): Likewise.
	[C99-based standards] (INT_LEAST16_MIN): Likewise.
	[C99-based standards] (INT_LEAST16_MAX): Likewise.
	[C99-based standards] (INT_LEAST32_MIN): Likewise.
	[C99-based standards] (INT_LEAST32_MAX): Likewise.
	[C99-based standards] (INT_LEAST64_MIN): Likewise.
	[C99-based standards] (INT_LEAST64_MAX): Likewise.
	[C99-based standards] (UINT_LEAST8_MAX): Likewise.
	[C99-based standards] (UINT_LEAST16_MAX): Likewise.
	[C99-based standards] (UINT_LEAST32_MAX): Likewise.
	[C99-based standards] (UINT_LEAST64_MAX): Likewise.
	[C99-based standards] (INT_FAST8_MIN): Likewise.
	[C99-based standards] (INT_FAST8_MAX): Likewise.
	[C99-based standards] (INT_FAST16_MIN): Likewise.
	[C99-based standards] (INT_FAST16_MAX): Likewise.
	[C99-based standards] (INT_FAST32_MIN): Likewise.
	[C99-based standards] (INT_FAST32_MAX): Likewise.
	[C99-based standards] (INT_FAST64_MIN): Likewise.
	[C99-based standards] (INT_FAST64_MAX): Likewise.
	[C99-based standards] (UINT_FAST8_MAX): Likewise.
	[C99-based standards] (UINT_FAST16_MAX): Likewise.
	[C99-based standards] (UINT_FAST32_MAX): Likewise.
	[C99-based standards] (UINT_FAST64_MAX): Likewise.
	[C99-based standards] (INTPTR_MIN): Likewise.
	[C99-based standards] (INTPTR_MAX): Likewise.
	[C99-based standards] (UINTPTR_MAX): Likewise.
	[C99-based standards] (INTMAX_MIN): Likewise.
	[C99-based standards] (INTMAX_MAX): Likewise.
	[C99-based standards] (UINTMAX_MAX): Likewise.
	[C99-based standards] (PTRDIFF_MIN): Likewise.
	[C99-based standards] (PTRDIFF_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MAX): Likewise.
	[C99-based standards] (SIZE_MAX): Likewise.
	[C99-based standards] (WCHAR_MAX): Likewise.
	[C99-based standards] (WINT_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MIN): Likewise.  Do not specify
	constraint on value.
	[C99-based standards] (WCHAR_MIN): Likewise.
	[C99-based standards] (WINT_MIN): Likewise.
	[C99-based standards] (*_t): Allow.
	* conform/data/tgmath.h-data [XOPEN2K || POSIX2008]: Change
	condition to [!ISO && !POSIX && !XPG3 && !XPG4 && !UNIX98].
	Include math.h-data and complex.h-data.  Remove all expectations
	of math.h and complex.h contents.
	* conform/data/uchar.h-data [ISO11] (c16rtomb): Remove stray "16"
	at end of line.
	* conform/data/wchar.h-data [!ISO && !POSIX && !XPG3 && !XPG4]
	(struct tm): Expect tag.
	[C99-based-standards] (wcstof): Expect function.
	[C99-based-standards] (wcstold): Likewise.
	[C99-based-standards] (wcstoll): Likewise.
	[C99-based-standards] (wcstoull): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MIN): Use
	macro-int-constant.  Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MAX): Likewise.  Specify
	constraint on value.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (NULL): Use macro-constant.
	Specify value.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (wcs*): Change to
	wcs[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/wctype.h-data [C99-based standards] (iswblank):
	Expect function.
	[XOPEN2K8 || POSIX2008] (iswblank_l): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (is*): Change to
	is[abcdefghijklmnopqrstuvwxyz]*.
	[!ISO && !POSIX && !XPG3 && !XPG4] (to*): Change to
	to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/stdalign.h-data: New file.
	* conform/data/stdbool.h-data: Likewise.
	* conform/data/stdnoreturn.h-data: Likewise.

2012-11-07  Roland McGrath  <roland@hack.frob.com>

	[BZ #14815]
	* manual/filesys.texi (Directory Entries): Typo fix.
	Reported by <h-iwamoto@kit.hi-ho.ne.jp>.

2012-11-07  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h (EM_AARCH64): New macro.
	(R_AARCH64_NONE, R_AARCH64_ABS64, R_AARCH64_ABS32): Likewise.
	(R_AARCH64_COPY, R_AARCH64_GLOB_DAT, R_AARCH64_JUMP_SLOT): Likewise.
	(R_AARCH64_RELATIVE, R_AARCH64_TLS_DTPMOD64): Likewise.
	(R_AARCH64_TLS_DTPREL64, R_AARCH64_TLS_TPREL64): Likewise.
	(R_AARCH64_TLSDESC): Likewise.
	(NT_ARM_TLS): Likewise.
	(NT_ARM_HW_BREAK): Likewise.
	(NT_ARM_HW_WATCH): Likewise.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14811]
	* sysdeps/i386/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Saturate nonzero
	exponents with absolute value below 0x1p-64 to +/- 0x1p-64.
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Saturate
	nonzero exponents with absolute value below 0x1p-32 to +/-
	0x1p-32.
	* sysdeps/x86_64/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* math/libm-test.inc (pow_test): Add more tests.

2012-11-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Sync
	_dl_s390_cap_flags with kernel. Increase string length.
	(_dl_s390_platforms): Add z196 and zEC12.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data [!XOPEN21K && !XOPEN2K8 && !POSIX2008]:
	Change XOPEN21K to XOPEN2K.

2012-11-06  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/memmove.c: Use memcpy when possible.

2012-11-06  Andreas Jaeger  <aj@suse.de>

	* po/eo.po: Update from translation team.

2012-11-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14793]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): In case of large z
	exponent and small x and y exponents, scale x or y up.  Increase
	by 2 the exponent used in scaling up.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14805]
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_DFL_ENV): Use cast to const
	fenv_t *.

	[BZ #14801]
	* sysdeps/s390/fpu/bits/fenv.h (fenv_t): Use implementation
	namespace for names of struct fields.
	* sysdeps/s390/fpu/fegetenv.c (fegetenv): Update references to
	fenv_t fields.
	* sysdeps/s390/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/s390/fpu/fesetenv.c (fesetenv): Likewise.

2012-11-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3665]
	* sysdeps/mach/hurd/bits/errno.h: Regenerated.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	* csu/libc-start.c (LIBC_START_MAIN): Conditionalize use of
	PTR_DEMANGLE.

	[BZ #5246]
	* sysdeps/mach/hurd/i386/____longjmp_chk.S: Conditionalize use of
	PTR_DEMANGLE.

2012-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14797]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute cases that
	definitely overflow as x * y not x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #157]

	* include/stub-tag.h: Remove file.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Don't emit
	'#include' of it.
	* manual/maint.texi (Porting): Don't reference it.
	* Makerules ($(objpfx)stubs): Likewise.
	* dirent/closedir.c: Don't include <stub-tag.h>.
	* dirent/dirfd.c: Likewise.
	* dirent/fdopendir.c: Likewise.
	* dirent/getdents.c: Likewise.
	* dirent/getdents64.c: Likewise.
	* dirent/opendir.c: Likewise.
	* dirent/readdir.c: Likewise.
	* dirent/readdir64.c: Likewise.
	* dirent/readdir64_r.c: Likewise.
	* dirent/readdir_r.c: Likewise.
	* dirent/rewinddir.c: Likewise.
	* dirent/seekdir.c: Likewise.
	* dirent/telldir.c: Likewise.
	* gmon/profil.c: Likewise.
	* grp/setgroups.c: Likewise.
	* inet/if_index.c: Likewise.
	* io/access.c: Likewise.
	* io/chdir.c: Likewise.
	* io/chmod.c: Likewise.
	* io/chown.c: Likewise.
	* io/close.c: Likewise.
	* io/dup.c: Likewise.
	* io/dup2.c: Likewise.
	* io/dup3.c: Likewise.
	* io/euidaccess.c: Likewise.
	* io/faccessat.c: Likewise.
	* io/fchdir.c: Likewise.
	* io/fchmod.c: Likewise.
	* io/fchmodat.c: Likewise.
	* io/fchown.c: Likewise.
	* io/fchownat.c: Likewise.
	* io/fcntl.c: Likewise.
	* io/flock.c: Likewise.
	* io/fstatfs.c: Likewise.
	* io/fstatfs64.c: Likewise.
	* io/fstatvfs.c: Likewise.
	* io/fstatvfs64.c: Likewise.
	* io/futimens.c: Likewise.
	* io/fxstat.c: Likewise.
	* io/fxstat64.c: Likewise.
	* io/fxstatat.c: Likewise.
	* io/fxstatat64.c: Likewise.
	* io/getcwd.c: Likewise.
	* io/isatty.c: Likewise.
	* io/lchmod.c: Likewise.
	* io/lchown.c: Likewise.
	* io/link.c: Likewise.
	* io/linkat.c: Likewise.
	* io/lseek.c: Likewise.
	* io/lseek64.c: Likewise.
	* io/lxstat64.c: Likewise.
	* io/mkdir.c: Likewise.
	* io/mkdirat.c: Likewise.
	* io/mkfifo.c: Likewise.
	* io/mkfifoat.c: Likewise.
	* io/open.c: Likewise.
	* io/open64.c: Likewise.
	* io/openat.c: Likewise.
	* io/openat64.c: Likewise.
	* io/pipe.c: Likewise.
	* io/pipe2.c: Likewise.
	* io/poll.c: Likewise.
	* io/posix_fadvise.c: Likewise.
	* io/posix_fadvise64.c: Likewise.
	* io/posix_fallocate.c: Likewise.
	* io/posix_fallocate64.c: Likewise.
	* io/read.c: Likewise.
	* io/readlink.c: Likewise.
	* io/readlinkat.c: Likewise.
	* io/rmdir.c: Likewise.
	* io/sendfile.c: Likewise.
	* io/sendfile64.c: Likewise.
	* io/statfs.c: Likewise.
	* io/statfs64.c: Likewise.
	* io/statvfs.c: Likewise.
	* io/statvfs64.c: Likewise.
	* io/symlink.c: Likewise.
	* io/symlinkat.c: Likewise.
	* io/ttyname.c: Likewise.
	* io/ttyname_r.c: Likewise.
	* io/umask.c: Likewise.
	* io/unlink.c: Likewise.
	* io/unlinkat.c: Likewise.
	* io/utime.c: Likewise.
	* io/utimensat.c: Likewise.
	* io/write.c: Likewise.
	* io/xmknod.c: Likewise.
	* io/xmknodat.c: Likewise.
	* io/xstat.c: Likewise.
	* io/xstat64.c: Likewise.
	* login/getpt.c: Likewise.
	* login/grantpt.c: Likewise.
	* login/unlockpt.c: Likewise.
	* math/e_acoshl.c: Likewise.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_expl.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/fclrexcpt.c: Likewise.
	* math/fedisblxcpt.c: Likewise.
	* math/feenablxcpt.c: Likewise.
	* math/fegetenv.c: Likewise.
	* math/fegetexcept.c: Likewise.
	* math/fegetround.c: Likewise.
	* math/feholdexcpt.c: Likewise.
	* math/fesetenv.c: Likewise.
	* math/fesetround.c: Likewise.
	* math/feupdateenv.c: Likewise.
	* math/fgetexcptflg.c: Likewise.
	* math/fraiseexcpt.c: Likewise.
	* math/fsetexcptflg.c: Likewise.
	* math/ftestexcept.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_rem_pio2l.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_asinhl.c: Likewise.
	* math/s_atanl.c: Likewise.
	* math/s_cbrtl.c: Likewise.
	* math/s_erfl.c: Likewise.
	* math/s_expm1l.c: Likewise.
	* math/s_log1pl.c: Likewise.
	* math/s_tanhl.c: Likewise.
	* misc/acct.c: Likewise.
	* misc/brk.c: Likewise.
	* misc/chflags.c: Likewise.
	* misc/chroot.c: Likewise.
	* misc/fchflags.c: Likewise.
	* misc/fgetxattr.c: Likewise.
	* misc/flistxattr.c: Likewise.
	* misc/fremovexattr.c: Likewise.
	* misc/fsetxattr.c: Likewise.
	* misc/fsync.c: Likewise.
	* misc/ftruncate.c: Likewise.
	* misc/futimes.c: Likewise.
	* misc/futimesat.c: Likewise.
	* misc/getdomain.c: Likewise.
	* misc/getdtsz.c: Likewise.
	* misc/gethostid.c: Likewise.
	* misc/gethostname.c: Likewise.
	* misc/getloadavg.c: Likewise.
	* misc/getpagesize.c: Likewise.
	* misc/getsysstats.c: Likewise.
	* misc/getxattr.c: Likewise.
	* misc/gtty.c: Likewise.
	* misc/ioctl.c: Likewise.
	* misc/lgetxattr.c: Likewise.
	* misc/listxattr.c: Likewise.
	* misc/llistxattr.c: Likewise.
	* misc/lremovexattr.c: Likewise.
	* misc/lsetxattr.c: Likewise.
	* misc/lutimes.c: Likewise.
	* misc/madvise.c: Likewise.
	* misc/mincore.c: Likewise.
	* misc/mlock.c: Likewise.
	* misc/mlockall.c: Likewise.
	* misc/mmap.c: Likewise.
	* misc/mprotect.c: Likewise.
	* misc/msync.c: Likewise.
	* misc/munlock.c: Likewise.
	* misc/munlockall.c: Likewise.
	* misc/munmap.c: Likewise.
	* misc/preadv.c: Likewise.
	* misc/preadv64.c: Likewise.
	* misc/ptrace.c: Likewise.
	* misc/pwritev.c: Likewise.
	* misc/pwritev64.c: Likewise.
	* misc/readv.c: Likewise.
	* misc/reboot.c: Likewise.
	* misc/remap_file_pages.c: Likewise.
	* misc/removexattr.c: Likewise.
	* misc/revoke.c: Likewise.
	* misc/select.c: Likewise.
	* misc/setdomain.c: Likewise.
	* misc/setegid.c: Likewise.
	* misc/seteuid.c: Likewise.
	* misc/sethostid.c: Likewise.
	* misc/sethostname.c: Likewise.
	* misc/setregid.c: Likewise.
	* misc/setreuid.c: Likewise.
	* misc/setxattr.c: Likewise.
	* misc/sstk.c: Likewise.
	* misc/stty.c: Likewise.
	* misc/swapoff.c: Likewise.
	* misc/swapon.c: Likewise.
	* misc/sync.c: Likewise.
	* misc/syncfs.c: Likewise.
	* misc/syscall.c: Likewise.
	* misc/truncate.c: Likewise.
	* misc/ualarm.c: Likewise.
	* misc/usleep.c: Likewise.
	* misc/ustat.c: Likewise.
	* misc/utimes.c: Likewise.
	* misc/vhangup.c: Likewise.
	* misc/writev.c: Likewise.
	* posix/_exit.c: Likewise.
	* posix/alarm.c: Likewise.
	* posix/execve.c: Likewise.
	* posix/fexecve.c: Likewise.
	* posix/fork.c: Likewise.
	* posix/fpathconf.c: Likewise.
	* posix/getaddrinfo.c: Likewise.
	* posix/getegid.c: Likewise.
	* posix/geteuid.c: Likewise.
	* posix/getgid.c: Likewise.
	* posix/getgroups.c: Likewise.
	* posix/getlogin.c: Likewise.
	* posix/getlogin_r.c: Likewise.
	* posix/getpgid.c: Likewise.
	* posix/getpid.c: Likewise.
	* posix/getppid.c: Likewise.
	* posix/getresgid.c: Likewise.
	* posix/getresuid.c: Likewise.
	* posix/getsid.c: Likewise.
	* posix/getuid.c: Likewise.
	* posix/glob64.c: Likewise.
	* posix/nanosleep.c: Likewise.
	* posix/pathconf.c: Likewise.
	* posix/pause.c: Likewise.
	* posix/posix_madvise.c: Likewise.
	* posix/pread.c: Likewise.
	* posix/pread64.c: Likewise.
	* posix/pwrite.c: Likewise.
	* posix/pwrite64.c: Likewise.
	* posix/sched_getaffinity.c: Likewise.
	* posix/sched_getp.c: Likewise.
	* posix/sched_gets.c: Likewise.
	* posix/sched_primax.c: Likewise.
	* posix/sched_primin.c: Likewise.
	* posix/sched_rr_gi.c: Likewise.
	* posix/sched_setaffinity.c: Likewise.
	* posix/sched_setp.c: Likewise.
	* posix/sched_sets.c: Likewise.
	* posix/sched_yield.c: Likewise.
	* posix/setgid.c: Likewise.
	* posix/setlogin.c: Likewise.
	* posix/setpgid.c: Likewise.
	* posix/setresgid.c: Likewise.
	* posix/setresuid.c: Likewise.
	* posix/setsid.c: Likewise.
	* posix/setuid.c: Likewise.
	* posix/sleep.c: Likewise.
	* posix/spawni.c: Likewise.
	* posix/sysconf.c: Likewise.
	* posix/times.c: Likewise.
	* posix/wait.c: Likewise.
	* posix/wait3.c: Likewise.
	* posix/wait4.c: Likewise.
	* posix/waitpid.c: Likewise.
	* resolv/gai_sigqueue.c: Likewise.
	* resource/getpriority.c: Likewise.
	* resource/getrlimit.c: Likewise.
	* resource/getrusage.c: Likewise.
	* resource/nice.c: Likewise.
	* resource/setpriority.c: Likewise.
	* resource/setrlimit.c: Likewise.
	* resource/ulimit.c: Likewise.
	* rt/aio_cancel.c: Likewise.
	* rt/aio_fsync.c: Likewise.
	* rt/aio_read.c: Likewise.
	* rt/aio_sigqueue.c: Likewise.
	* rt/aio_suspend.c: Likewise.
	* rt/aio_write.c: Likewise.
	* rt/clock_getres.c: Likewise.
	* rt/clock_gettime.c: Likewise.
	* rt/clock_nanosleep.c: Likewise.
	* rt/clock_settime.c: Likewise.
	* rt/lio_listio.c: Likewise.
	* rt/mq_close.c: Likewise.
	* rt/mq_getattr.c: Likewise.
	* rt/mq_notify.c: Likewise.
	* rt/mq_open.c: Likewise.
	* rt/mq_receive.c: Likewise.
	* rt/mq_send.c: Likewise.
	* rt/mq_setattr.c: Likewise.
	* rt/mq_timedreceive.c: Likewise.
	* rt/mq_timedsend.c: Likewise.
	* rt/mq_unlink.c: Likewise.
	* rt/shm_open.c: Likewise.
	* rt/shm_unlink.c: Likewise.
	* rt/timer_create.c: Likewise.
	* rt/timer_delete.c: Likewise.
	* rt/timer_getoverr.c: Likewise.
	* rt/timer_gettime.c: Likewise.
	* rt/timer_settime.c: Likewise.
	* setjmp/__longjmp.c: Likewise.
	* setjmp/setjmp.c: Likewise.
	* signal/kill.c: Likewise.
	* signal/killpg.c: Likewise.
	* signal/raise.c: Likewise.
	* signal/sigaction.c: Likewise.
	* signal/sigaltstack.c: Likewise.
	* signal/sigblock.c: Likewise.
	* signal/sigignore.c: Likewise.
	* signal/sigintr.c: Likewise.
	* signal/signal.c: Likewise.
	* signal/sigpause.c: Likewise.
	* signal/sigpending.c: Likewise.
	* signal/sigqueue.c: Likewise.
	* signal/sigreturn.c: Likewise.
	* signal/sigset.c: Likewise.
	* signal/sigsetmask.c: Likewise.
	* signal/sigstack.c: Likewise.
	* signal/sigsuspend.c: Likewise.
	* signal/sigtimedwait.c: Likewise.
	* signal/sigvec.c: Likewise.
	* signal/sigwait.c: Likewise.
	* signal/sigwaitinfo.c: Likewise.
	* signal/sysv_signal.c: Likewise.
	* socket/accept.c: Likewise.
	* socket/accept4.c: Likewise.
	* socket/bind.c: Likewise.
	* socket/connect.c: Likewise.
	* socket/getpeername.c: Likewise.
	* socket/getsockname.c: Likewise.
	* socket/getsockopt.c: Likewise.
	* socket/isfdtype.c: Likewise.
	* socket/listen.c: Likewise.
	* socket/recv.c: Likewise.
	* socket/recvfrom.c: Likewise.
	* socket/recvmsg.c: Likewise.
	* socket/send.c: Likewise.
	* socket/sendmsg.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/setsockopt.c: Likewise.
	* socket/shutdown.c: Likewise.
	* socket/sockatmark.c: Likewise.
	* socket/socket.c: Likewise.
	* socket/socketpair.c: Likewise.
	* stdio-common/ctermid.c: Likewise.
	* stdio-common/cuserid.c: Likewise.
	* stdio-common/remove.c: Likewise.
	* stdio-common/rename.c: Likewise.
	* stdio-common/renameat.c: Likewise.
	* stdio-common/tempname.c: Likewise.
	* stdlib/getcontext.c: Likewise.
	* stdlib/makecontext.c: Likewise.
	* stdlib/setcontext.c: Likewise.
	* stdlib/swapcontext.c: Likewise.
	* stdlib/system.c: Likewise.
	* streams/fattach.c: Likewise.
	* streams/fdetach.c: Likewise.
	* streams/getmsg.c: Likewise.
	* streams/getpmsg.c: Likewise.
	* streams/putmsg.c: Likewise.
	* streams/putpmsg.c: Likewise.
	* sysdeps/unix/bsd/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/epoll_pwait.c: Likewise.
	* sysdeps/unix/sysv/linux/futimens.c: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Likewise.
	* sysdeps/unix/sysv/linux/readahead.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c: Likewise.
	* sysvipc/msgctl.c: Likewise.
	* sysvipc/msgget.c: Likewise.
	* sysvipc/msgrcv.c: Likewise.
	* sysvipc/msgsnd.c: Likewise.
	* sysvipc/semctl.c: Likewise.
	* sysvipc/semget.c: Likewise.
	* sysvipc/semop.c: Likewise.
	* sysvipc/semtimedop.c: Likewise.
	* sysvipc/shmat.c: Likewise.
	* sysvipc/shmctl.c: Likewise.
	* sysvipc/shmdt.c: Likewise.
	* sysvipc/shmget.c: Likewise.
	* termios/tcdrain.c: Likewise.
	* termios/tcflow.c: Likewise.
	* termios/tcflush.c: Likewise.
	* termios/tcgetattr.c: Likewise.
	* termios/tcgetpgrp.c: Likewise.
	* termios/tcsendbrk.c: Likewise.
	* termios/tcsetattr.c: Likewise.
	* termios/tcsetpgrp.c: Likewise.
	* time/adjtime.c: Likewise.
	* time/clock.c: Likewise.
	* time/getitimer.c: Likewise.
	* time/gettimeofday.c: Likewise.
	* time/setitimer.c: Likewise.
	* time/settimeofday.c: Likewise.
	* time/stime.c: Likewise.
	* time/time.c: Likewise.

2012-11-04  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/generic/paths.h (_PATH_STDPATH): Remove /usr/contrib/bin and
	/usr/old/bin.

	* sysdeps/generic/paths.h (_PATH_MNTTAB, _PATH_MOUNTED): Use tabs
	instead of spaces.
	* sysdeps/unix/sysv/linux/paths.h (_PATH_UTMP, _PATH_WTMP): Likewise.

2012-11-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14796]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Set rounding mode to
	FE_TONEAREST before applying Dekker multiplication and Knuth
	addition.  Clear inexact exceptions and check for exact zero
	results afterwards.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	* sysdeps/generic/math_private.h (default_libc_fesetround): New
	function.
	(libc_fesetround): New macro.
	(libc_fesetroundf): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/i386/fpu/fenv_private.h (libc_fesetround_sse): New
	function.
	(libc_fesetround_387): Likewise.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/sparc/fpu/fenv_private.h (libc_fesetround): New
	function.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* include/fenv.h (feclearexcept): Add libm_hidden_proto.
	* math/fclrexcpt.c (feclearexcept): Add libm_hidden_ver.
	* sysdeps/i386/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/powerpc/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/s390/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.
	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/sparc/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/x86_64/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.

	[BZ #3439]
	* sysdeps/powerpc/bits/fenv.h (FE_INEXACT): Define macro to
	integer constant usable in #if and use that to give value to enum
	constant.
	(FE_DIVBYZERO): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_INVALID): Likewise.
	(FE_INVALID_SNAN): Likewise.
	(FE_INVALID_ISI): Likewise.
	(FE_INVALID_IDI): Likewise.
	(FE_INVALID_ZDZ): Likewise.
	(FE_INVALID_IMZ): Likewise.
	(FE_INVALID_COMPARE): Likewise.
	(FE_INVALID_SOFTWARE): Likewise.
	(FE_INVALID_SQRT): Likewise.
	(FE_INVALID_INTEGER_CONVERSION): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/s390/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_INEXACT): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INVALID): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/x86/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.

2012-11-02  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (R_TILEGX_IMM16_X[01]_HW[012]_(|LAST_)PLT_PCREL): Add.

2012-11-03  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/cross-test-ssh.sh (command): Use newlines to separate
	commands.  Quote $PWD.
	(blacklist_exports): Don't use remove_newlines.  Replace "declare
	-x" by "export".
	(remove_newlines): Remove.

2012-11-02  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/Makefile (headers): Add bits/stdlib-float.h.
	* stdlib/stdlib.h (atof): Moved to ...
	* include/bits/stdlib-float.h: Here.  New file.
	* stdlib/stdlib.h: Include <bits/stdlib-float.h>.
	* stdlib/bits/stdlib-float.h: New file.
	* sysdeps/x86/Makefile (CFLAGS-.os): Compile rtld routines with
	-mno-sse -mno-mmx.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: Include
	<xmmintrin.h>.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl (@headers): Add fenv.h.
	* conform/data/fenv.h-data: New file.
	* include/fenv.h [_ISOMAC]: Disable all contents of file except
	include of <math/fenv.h>.

	* conform/data/complex.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Change condition to [!ISO && !POSIX && !XPG3 && !XPG4
	&& !UNIX98].  Enables tests for XOPEN2K8.
	* conform/data/inttypes.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Likewise.

	* conform/data/sys/wait.h-data [XPG3 || XOPEN2K8 || POSIX2008]
	(struct rusage): Do not expect type or its members.

	[BZ #3439]
	* math/math.h (FP_NAN): Define macro to integer constant usable in
	#if and use that to give value to enum constant.
	(FP_INFINITE): Likewise.
	(FP_ZERO): Likewise.
	(FP_SUBNORMAL): Likewise.
	(FP_NORMAL): Likewise.

2012-11-02  Andreas Schwab  <schwab@linux-m68k.org>

	* iconvdata/bug-iconv8.c (do_test): Use %z for size_t arguments.
	* iconvdata/bug-iconv9.c (do_test): Use %t for ptrdiff_t
	arguments.

2012-11-02  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_AUTOCONF_VERSION): New macro.
	Check that AC_AUTOCONF_VERSION matches it and m4_fatal at
	autoconf-time if not.
	* configure.in: Remove AC_PREREQ.

2012-11-02  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/sys/platform/ppc.h (__ppc_get_timebase): Use
	__builtin_ppc_get_timebase when building with GCC >= 4.8 instead
	of the internal implementation.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/syslog.h [_ISOMAC]: Disable all contents of file
	except include of <misc/sys/syslog.h>.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: If the
	function returns with a NULL context exit with zero.

2012-11-01  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile (cflags): Remove -mnew-mnemonics.

2012-11-01  H.J. Lu  <hongjiu.lu@intel.com>

	* catgets/test-gencat.sh (run_program_prefix): Renamed to ...
	(run_program_cmd): This.
	* localedata/tst-langinfo.sh (run_program_prefix): Removed.
	(tst_langinfo): New variable.  Use it.

2012-11-01  Sebastan Andrzej Siewior  <bigeasy@linutronix.de>

	* sysdeps/powerpc/powerpc32/dl-trampoline.S: Put __NO_FPRS__ around
	floating point opcodes.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/Makefile (link-libc-static-tests): New
	variable.

	* elf/dl-support.c: Unconditionally include "setup-vdso.h".

	* sysdeps/mach/hurd/powerpc: Remove directory.
	* sysdeps/mach/powerpc: Likewise.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/check-local-headers.sh: Ignore c++ headers.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* libio/genops.c (_IO_flush_all_lockp): Use NULL rather than 0 for
	__libc_cleanup_region_start argument.

2012-11-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14784]
	[BZ #14785]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle cases with small
	x * y using scaling, not as x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/bits/param.h: Remove stray #endif.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/Makefile [$(subdir) = debug] (CFLAGS-backtrace.c):
	New variable.

2012-10-31  Thomas Schwinge  <thomas@codesourcery.com>

	* rt/tst-shm.c (worker): Correct checking for mmap failure.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix sort order.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix the order of the list for glibc 2.17.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14610]
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c (__ieee754_atan2l): Check
	for low part of x being zero before using __atanl (y).
	* math/libm-test.inc (atan2_test): Add another test.

	* manual/install.texi (Configuring and compiling): Document
	general use of test-wrapper and test-wrapper-env.
	* INSTALL: Regenerated.

	* sysdeps/ieee754/dbl-64/s_fma.c: Include <tininess.h>.
	(__fma): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* math/libm-test.inc (UNDERFLOW_EXCEPTION_BEFORE_ROUNDING): New
	macro.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-10-30  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/tininess.h: Renamed to ...
	* sysdeps/x86/tininess.h: This.
	* sysdeps/x86_64/tininess.h: Removed.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-array1.out): Depend on comparison
	input.  Use $(build-program-cmd).
	($(objpfx)tst-array1-static.out): Likewise.
	($(objpfx)tst-array2.out): Likewise.
	($(objpfx)tst-array3.out): Likewise.
	($(objpfx)tst-array4.out): Likewise.
	($(objpfx)tst-array5.out): Likewise.
	($(objpfx)tst-array5-static.out): Likewise.

2012-10-30  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Call DL_AFTER_LOAD
	if defined.

	* nss/nsswitch.h (nss_interface_function): Provide new
	macro for use with NSS functions.
	* grp/initgroups.c: Use new macro.
	* nss/getXXbyYY.c: Likewise.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update Russion translation from translation project.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14152]
	[BZ #14783]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Extract low bits of
	result and shift together with sticky bit instead of replicating
	round-to-nearest rounding.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.  Do not permit
	missing underflow exceptions.
	(fma_test_towardzero): Add more tests.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

	[BZ #14047]
	* sysdeps/generic/tininess.h: New file.
	* sysdeps/i386/tininess.h: Likewise.
	* sysdeps/sh/tininess.h: Likewise.
	* sysdeps/x86_64/tininess.h: Likewise.
	* stdlib/tst-strtod-underflow.c: Likewise.
	* stdlib/tst-tininess.c: Likewise.
	* stdlib/strtod_l.c: Include <tininess.h>.
	(round_and_return): Do not set errno for exact underflow cases.
	Force an underflow exception when setting errno for underflow.
	Determine underflow based on rounding to normal precision if
	TININESS_AFTER_ROUNDING.
	* stdlib/tst-strtod.c (tests): Do not expect errno to be set to
	ERANGE for exact underflow cases.
	* stdlib/Makefile (tests): Add tst-tininess and
	tst-strtod-underflow.
	($(objpfx)tst-tininess): Use $(link-libm).
	($(objpfx)tst-strtod-underflow): Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	[BZ#14767]
	* elf/Makefile (tests): Remove conditional for have-initfini-array
	since this is now always required and the variable does not exist
	anymore.
	(tests-static): Likewise.
	(modules-names): Likewise.

	* po/eo.po: Add Esperanto translation from translation project.

	* elf/tst-array1.c (fini_array): Make writeable so that it can be
	merged with constructor/destructor.
	(init_array): Likewise.
	* elf/tst-array2dep.c (fini_array): Likewise.
	(init_array): Likewise.

2012-10-29  Mike Frysinger  <vapier@gentoo.org>

	* manual/message.texi: Delete @cartouche tags.

2012-10-29  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/fdatasync.c: Turn ERR into EINVAL if it is
	EOPNOTSUPP.
	* sysdeps/mach/hurd/fsync.c: Likewise.

	* sysdeps/pthread/aio_notify.c (__aio_notify_only)
	[_POSIX_REALTIME_SIGNALS]: Change condition to
	[_POSIX_REALTIME_SIGNALS > 0].

2012-10-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (__O_LARGEFILE)
	[!__x86_64]: Do not define, take value from <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE):
	[__WORDSIZE != 64]: Likewise.

2012-10-26  H.J. Lu  <hongjiu.lu@intel.com>

	*  iconvdata/tst-table.sh: Remove ${SHELL}.
	*  iconvdata/tst-tables.sh: Likewise.

2012-10-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use strtoumax instead
	of strtoull.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add comments for
	ifunc-impl-list.c
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/ifunc-impl-list.c: New
	file.

2012-10-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use __getdents instead of
	__getdirentries.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* scripts/cross-test-ssh.sh: New file.
	* manual/install.texi (Configuring and compiling): Document use of
	cross-test-ssh.sh.
	* INSTALL: Regenerated.

2012-10-25  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptrace.c (ptrace): Use __hurd_fail to return
	EOPNOTSUPP.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-program-prefix): Fix comment.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (test-wrapper): New variable,
	(test-wrapper-env): Likewise.
	[$(cross-compiling) = yes && $(test-wrapper) != ""]
	(run-built-tests): Define to yes.
	(run-program-prefix): Use $(test-wrapper).
	(built-program-cmd): Likewise.
	* Rules (make-test-out): Use $(test-wrapper-env) and
	$(host-built-program-cmd).
	* elf/Makefile ($(objpfx)order.out): Use $(test-wrapper).
	($(objpfx)tst-pathopt.out): Pass $(test-wrapper-env) to
	tst-pathopt.sh.
	($(objpfx)tst-rtld-load-self.out): Pass $(test-wrapper) and
	$(test-wrapper-env) to tst-rtld-load-self.sh.
	($(objpfx)order2.out): Use $(test-wrapper).
	($(objpfx)tst-initorder.out): Likewise.
	($(objpfx)tst-initorder2.out): Likewise.
	($(objpfx)tst-unused-dep.out): Use $(test-wrapper-env).
	* elf/tst-pathopt.sh (run_program_prefix): Remove unused variable.
	(test_wrapper_env): New variable.  Use it to run ld.so.
	* elf/tst-rtld-load-self.sh (test_wrapper): New variable.
	Use it to run ld.so.
	(test_wrapper_env): Likewise.
	* iconvdata/Makefile ($(objpfx)iconv-test.out): Pass
	$(test-wrapper) to run-iconv-test.sh.
	* iconvdata/run-iconv-test.sh (test_wrapper): New variable.
	(ICONV): Use $test_wrapper.
	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-via-rtld-prefix), $(test-wrapper) and $(test-wrapper-env) to
	globtest.sh, not $(run-program-prefix).
	* posix/globtest.sh (run_via_rtld_prefix): New variable.
	(test_wrapper): Likewise.
	(test_wrapper_env): Likewise.  Use it to run globtest with HOME
	set together with run_via_rtld_prefix.
	(run_program_prefix): Define in terms of test_wrapper and
	run_via_rtld_prefix.

2012-10-24  Roland McGrath  <roland@hack.frob.com>

	* nscd/Makefile ($(objpfx)nscd): Remove librt dependency.
	* posix/Makefile ($(objpfx)tst-regex, $(objpfx)tst-regex2):
	Targets	removed.

	[BZ #14743]
	* include/time.h: Remove librt_hidden_proto (clock_gettime).
	Declare __clock_getres, __clock_gettime, __clock_settime,
	__clock_nanosleep, and __clock_getcpuclockid.
	* rt/clock_gettime.c: Define __clock_gettime as an alias.
	Remove librt_hidden_def (clock_gettime).
	* sysdeps/unix/clock_gettime.c: Likewise.
	* rt/clock_getcpuclockid.c: Define __clock_getcpuclockid as an alias.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c: Likewise.
	* rt/clock_getres.c: Define __clock_getres as an alias.
	* sysdeps/posix/clock_getres.c: Likewise.
	* rt/clock_settime.c: Define __clock_settime as an alias.
	* sysdeps/unix/clock_settime.c: Likewise.
	* rt/clock_nanosleep.c: Define __clock_nanosleep as an alias.
	* sysdeps/unix/clock_nanosleep.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c: Likewise.
	* rt/clock-compat.c: New file.
	* rt/Makefile (librt-routines): Add clock-compat and move
	$(clock-routines) to ...
	(routines): ... here, new variable.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_routines):
	Don't add get_clockfreq here.
	* rt/Versions (libc: GLIBC_2.17): New version set.
	Add clock_* symbols here.
	(libc: GLIBC_PRIVATE): New version set.  Add __clock_* symbols here.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist
	(GLIBC_2.17): Add clock_* symbols.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* NEWS: Mention the move.

	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c (__get_clockfreq):
	Use __open, __read, __close rather than their public counterparts.
	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_cpuinfo): Likewise.
	(__get_clockfreq_via_proc_openprom): Likewise, and __getdirentries.
	(__get_clockfreq_via_dev_openprom): Likewise, and __ioctl.

	* config.h.in (HAVE_IFUNC): New #undef.
	* configure.in: Define it if libc_cv_ld_gnu_indirect_function
	was successful.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move READELF check to start of file.
	(libc_cv_ld_gnu_indirect_function): Change to a link test. Rename from
	libc_cv_asm_gnu_indirect_function in the process.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in (libc_cv_gcc_static_libgcc): Drop -q flag to grep and
	send the output to /dev/null.
	(libc_cv_cc_with_libunwind): Likewise.
	(libc_cv_as_noexecstack): Likewise.
	* configure: Regenerate.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>

	* io/ftwtest-sh (tmp): Define to ${objpfx}io, not using `pwd`.

	* posix/globtest.sh (TMPDIR): Do not set.
	(testdir): Define using ${common_objpfx}posix not $TMPDIR.
	(testout): Likewise.

2012-10-24  Andreas Jaeger  <aj@suse.de>

	* io/fcntl.h: Always define mode_t, off_t, pid_t and use these
	types for creat, creat64, lockf, posix_fadvise, posix_fallocate.
	[__USE_LARGEFILE64 && !__off64_t_defined]: Define off64_t.
	[__USE_LARGEFILE64]: Use off64_t in declaration of lock64,
	posix_fadvise64, posix_fallocate64.

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__x86_64]: Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [!__USE_FILE_OFFSET64 && !__x86_64__]:
	Likewise.
	(F_GETLK, F_SETLK, F_SETLKW) [__USE_FILE_OFFSET64 && ! __x86_64__]:
	Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [!__x86_64__]: Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__USE_FILE_OFFSET64]: Remove, provided by
	<bits/fcntl-linux.h>.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [__WORDSIZE == 64]: Likewise.

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (F_DUPFD, F_GETFD)
	(F_SETFD, F_GETFL, F_SETFL): Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [__WORDSIZE == 64]: Likewise.
	(F_GETLK, F_SETLK, F_SETLKW, F_GETLK64, F_SETLK64, F_SETLKW64)
	[__WORDSIZE != 64]: Likewise.

2012-10-23  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-built-tests): New variable.
	* Rules [$(cross-compiling) = yes]: Change condition to
	[$(run-built-tests) = no].
	* catgets/Makefile [$(cross-compiling) != yes]: Change condition
	to [$(run-built-tests) = yes].
	* elf/Makefile [$(cross-compiling) = no]: Likewise
	* grp/Makefile [$(cross-compiling) = no]: Likewise.
	* iconv/Makefile [$(cross-compiling) != yes]: Likewise.
	* iconvdata/Makefile [$(cross-compiling) = no]: Likewise.
	* intl/Makefile [$(cross-compiling) = no]: Likewise.
	* io/Makefile [$(cross-compiling) = no]: Likewise.
	* libio/Makefile [$(cross-compiling) = no]: Likewise.
	* malloc/Makefile [$(cross-compiling) = no]: Likewise.
	* misc/Makefile [$(cross-compiling) = no]: Likewise.
	* posix/Makefile [$(cross-compiling) = no]: Likewise.
	* resolv/Makefile [$(cross-compiling) = no]: Likewise.
	* stdio-common/Makefile [$(cross-compiling) = no]: Likewise.
	* stdlib/Makefile [$(cross-compiling) = no]: Likewise.
	* string/Makefile [$(cross-compiling) = no]: Likewise.

	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-program-prefix) to globtest.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/globtest.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use for running globtest
	binary.

2012-10-23  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (host-built-program-cmd): New variable.
	* elf/Makefile (tst-stackguard1-ARGS): Use
	$(host-built-program-cmd).
	* posix/Makefile (tst-exec-ARGS): Use $(host-built-program-cmd).
	(tst-spawn-ARGS): Likewise.
	* rt/Makefile (tst-mqueue7-ARGS): Use $(host-built-program-cmd).

2012-10-23  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (run-via-rtld-prefix): New variable.
	(run-program-prefix): Define in terms of $(run-via-rtld-prefix).
	(built-program-cmd): Likewise.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (O_RSYNC): Define to
	__O_RSYNC if it exists, otherwise to O_SYNC.

2012-10-22  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* iconvdata/run-iconv-test.sh: Redirect iconv stdin in loops from
	/dev/null.
	* iconvdata/tst-tables.sh: Redirect tst-table.sh stdin in loop
	from /dev/null
	* posix/tst-getconf.sh: Redirect getconf stdin in loop from
	/dev/null.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (__O_LARGEFILE):
	Define always.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE): Likewise.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/fcntl-linux.h.

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (F_GETLK, F_SETLK)
	(F_SETLKW) [!F_GETLK]: Define values for [!__USE_FILE_OFFSET64].

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.

2012-10-21  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* config.make.in (NM): New variable.

2012-10-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14683]
	* elf/Makefile (tests-static): Add tst-leaks1-static.
	(tests): Also depend on $(objpfx)tst-leaks1-static-mem.
	($(objpfx)tst-leaks1-static): New rule.
	($(objpfx)tst-leaks1-static-mem): Likewise.
	(tst-leaks1-static-ENV): New macro.
	* elf/dl-open.c (dl_open_worker): Check the main application
	only if SHARED is defined.
	* elf/tst-leaks1-static.c: New file.

2012-10-20  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: New file, contains
	generic values for Linux.
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: Remove all definitions
	and declarations that are provided by <bits/fcntl-linux.h> and
	include <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.

2012-10-20  Roland McGrath  <roland@hack.frob.com>

	* io/fcntl.h: Move include of <bits/types.h> to the top and
	include it unconditionally.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	* wcsmbs/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* wcsmbs/test-wcschr-ifunc.c: New file.
	* wcsmbs/test-wcscmp-ifunc.c: Likewise.
	* wcsmbs/test-wcscpy-ifunc.c: Likewise.
	* wcsmbs/test-wcslen-ifunc.c: Likewise.
	* wcsmbs/test-wcsrchr-ifunc.c: Likewise.
	* wcsmbs/test-wmemcmp-ifunc.c: Likewise.

	* string/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* string/test-memccpy.c (TEST_NAME): New macro.
	* string/test-memchr.c (TEST_NAME): Likewise.
	* string/test-memcmp.c (TEST_NAME): Likewise.
	* string/test-memcpy.c (TEST_NAME): Likewise.
	* string/test-memmem.c (TEST_NAME): Likewise.
	* string/test-memmove.c (TEST_NAME): Likewise.
	* string/test-memset.c (TEST_NAME): Likewise.
	* string/test-rawmemchr.c (TEST_NAME): Likewise.
	* string/test-stpcpy.c (TEST_NAME): Likewise.
	* string/test-stpncpy.c (TEST_NAME): Likewise.
	* string/test-strcasecmp.c (TEST_NAME): Likewise.
	* string/test-strcasestr.c (TEST_NAME): Likewise.
	* string/test-strcat.c (TEST_NAME): Likewise.
	* string/test-strchr.c (TEST_NAME): Likewise.
	* string/test-strcmp.c(TEST_NAME): Likewise.
	* string/test-strcpy.c (TEST_NAME): Likewise.
	* string/test-strcspn.c (TEST_NAME): Likewise.
	* string/test-strlen.c (TEST_NAME): Likewise.
	* string/test-strncasecmp.c (TEST_NAME): Likewise.
	* string/test-strncmp.c (TEST_NAME): Likewise.
	* string/test-strncpy.c (TEST_NAME): Likewise.
	* string/test-strnlen.c (TEST_NAME): Likewise.
	* string/test-strpbrk.c (TEST_NAME): Likewise.
	* string/test-strrchr.c (TEST_NAME): Likewise.
	* string/test-strspn.c (TEST_NAME): Likewise.
	* string/test-strstr.c (TEST_NAME): Likewise.
	* string/test-bcopy-ifunc.c: New file.
	* string/test-bzero-ifunc.c: Likewise.
	* string/test-memccpy-ifunc.c: Likewise.
	* string/test-memchr-ifunc.c: Likewise.
	* string/test-memcmp-ifunc.c: Likewise.
	* string/test-memcpy-ifunc.c: Likewise.
	* string/test-memmem-ifunc.c: Likewise.
	* string/test-memmove-ifunc.c: Likewise.
	* string/test-mempcpy-ifunc.c: Likewise.
	* string/test-memset-ifunc.c: Likewise.
	* string/test-rawmemchr-ifunc.c: Likewise.
	* string/test-stpcpy-ifunc.c: Likewise.
	* string/test-stpncpy-ifunc.c: Likewise.
	* string/test-strcasecmp-ifunc.c: Likewise.
	* string/test-strcasestr-ifunc.c: Likewise.
	* string/test-strcat-ifunc.c: Likewise.
	* string/test-strchr-ifunc.c: Likewise.
	* string/test-strchrnul-ifunc.c: Likewise.
	* string/test-strcmp-ifunc.c: Likewise.
	* string/test-strcpy-ifunc.c: Likewise.
	* string/test-strcspn-ifunc.c: Likewise.
	* string/test-strlen-ifunc.c: Likewise.
	* string/test-strncasecmp-ifunc.c: Likewise.
	* string/test-strncat-ifunc.c: Likewise.
	* string/test-strncmp-ifunc.c: Likewise.
	* string/test-strncpy-ifunc.c: Likewise.
	* string/test-strnlen-ifunc.c: Likewise.
	* string/test-strpbrk-ifunc.c: Likewise.
	* string/test-strrchr-ifunc.c: Likewise.
	* string/test-strspn-ifunc.c: Likewise.
	* string/test-strstr-ifunc.c: Likewise.

	* debug/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* debug/test-stpcpy_chk.c (TEST_NAME): New macro.
	* debug/test-strcpy_chk.c (TEST_NAME): Likewise.
	* debug/test-stpcpy_chk-ifunc.c: New file.
	* debug/test-strcpy_chk-ifunc.c: Likewise.

2012-10-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13601]
	* elf/dl-load.c (open_verify): Retry read if the entire ELF
	header is not read in.

2012-10-19  Joseph Myers  <joseph@codesourcery.com>

	* io/Makefile ($(objpfx)ftwtest.out): Depend on ftwtest-sh.  Pass
	script to $(SHELL) as $<.  Pass $(common-objpfx) to script
	directly.  Pass built executable to script as
	$(built-program-cmd).
	* io/ftwtest-sh (ldso): Remove variable.  Run ftwtest directly as
	$testprogram without using LD_LIBRARY_PATH and $ldso.

	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Pass
	$(run-program-prefix) to tst_fgetgrent.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* grp/tst_fgetgrent.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use it to run tst_fgetgrent.
	* iconvdata/Makefile ($(objpfx)tst-tables.out): Pass
	$(run-program-prefix) to tst-tables.sh.
	* iconvdata/tst-table.sh (run_program_prefix): New variable.  Use
	it to run tst-table-from and tst-table-to.
	* iconvdata/tst-tables.sh (run_program_prefix): New variable.
	Pass it to tst-table.sh.
	* intl/Makefile ($(objpfx)tst-gettext.out): Pass
	$(run-program-prefix) to tst-gettext.sh.
	($(objpfx)tst-translit.out): Pass $(run-program-prefix) to
	tst-translit.sh.
	($(objpfx)tst-gettext2.out): Pass $(run-program-prefix) to
	tst-gettext2.sh.
	* intl/tst-gettext.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext.
	* intl/tst-gettext2.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext2.
	* intl/tst-translit.sh (run_program_prefix): New variable.  Use it
	to run tst-translit.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Pass
	$(run-program-prefix) to tst-mtrace.sh.
	* malloc/tst-mtrace.sh (run_program_prefix): New variable.  Use it
	to run tst-mtrace.
	* posix/Makefile ($(objpfx)wordexp-tst.out): Pass
	$(run-program-prefix) to wordexp-tst.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/wordexp-tst.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(run_program_prefix): New variable.  Use it to run wordexp-test.

	* Makeconfig (ARCH): Remove all definitions.
	(machine): Likewise.
	[ARCH]: Remove conditional code.
	[!objdir]: Give error.
	[!objdir] (objpfx): Remove.
	[!objdir] (common-objpfx): Likewise.
	[!objdir] (common-objdir): Likewise.
	* configure.in (config_makefile): Remove.  Hardcode Makefile in
	AC_CONFIG_FILES call.
	* configure: Regenerated.

	[BZ #13888]
	* io/ftwtest-sh (tmp): Set to use the working directory, not /tmp
	or TMPDIR.
	(testout): Likewise.

	* posix/Makefile ($(objpfx)tst-getconf.out): Pass
	$(built-program-cmd) to tst-getconf.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/tst-getconf.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likwise.
	(runit): Remove function.
	(run_getconf): New variable,  Use it for running getconf binary.

2012-10-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14716]
	* string/test-memmem.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.

2012-10-18  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* math/Makefile: Comment on slow compilation of test-tgmath2.c.

2012-10-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* libio/fileops.c (mmap_remap_check) [_G_MMAP64]: Make code
	unconditional.  Call __mmap64 directly.
	(mmap_remap_check) [!_G_MMAP64]: Remove conditional code.
	(mmap_remap_check) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(mmap_remap_check) [!_G_LSEEK64]: Remove conditional code.
	(decide_maybe_mmap) [_G_MMAP64]: Make code unconditional.  Call
	__mmap64 directly.
	(decide_maybe_mmap) [!_G_MMAP64]: Remove conditional code.
	(decide_maybe_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(decide_maybe_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_sync_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_sync_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_seek) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_seek) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_stat) [_G_FSTAT64]: Make code unconditional.  Call
	__fxstat64 directly.
	(_IO_file_stat) [!_G_FSTAT64]: Remove conditional code.
	* libio/freopen64.c (freopen64) [_G_OPEN64]: Make code
	unconditional.
	(freopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/fseeko64.c (fseeko64) [_G_LSEEK64]: Make code
	unconditional.
	(fseeko64) [!_G_LSEEK64]: Remove conditional code.
	* libio/ftello64.c (ftello64) [_G_LSEEK64]: Make code
	unconditional.
	(ftello64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofgetpos64.c (_IO_new_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofopen64.c (_IO_fopen64) [_G_OPEN64]: Make code
	unconditional.
	(_IO_fopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/iofsetpos64.c (_IO_new_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fsetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofgetpos64.c (_IO_old_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofsetpos64.c (_IO_old_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fsetpos64) [!_G_LSEEK64]: Remove conditional code.

2012-10-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12140]
	* manual/memory.texi (Malloc Tunable Parameters): Add note
	about free list pointers overwriting some perturb bytes.
	Wording suggested by Roland McGrath.

2012-10-17  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (gamma_test): Do not call feclearexcept.
	(lgamma_test): Likewise.
	(tgamma_test): Likewise.

2012-10-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #14700]
	* sysdeps/posix/opendir.c (MAX_DIR_BUFFER_SIZE): New constant.
	(__alloc_dir): Limit buffer to MAX_DIR_BUFFER_SIZE.

2012-10-16  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Mention BZ #14716.
	* string/str-two-way.h (two_way_short_needle): Fix thinko introduced
	when removing AVAILABLE1_USES_J macro.

2012-10-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): __uint64_t for unsigned 64-bit int.

2012-10-12  Andreas Schwab  <schwab@linux-m68k.org>

	* include/string.h (memmem): Declare libc hidden alias.
	* string/memmem.c (memmem): Define libc hidden alias.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Use __open,
	__read, __close instead of open, read, close.

2012-10-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/x86_64/multiarch/memcmp.S (__memcmp_sse2): Make it
	global and hidden.
	* sysdeps/x86_64/multiarch/memcpy.S (__memcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S (__rawmemchr_sse42):
	Likewise.
	(__rawmemchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcat.S (STRCAT_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strchr.S (__strchr_sse42): Likewise.
	(__strchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S (STRCMP_SSE42): Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S (STRCMP_SSE2): Likewise.
	(__strcasecmp_sse2): Likewise.
	(__strncasecmp_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S (STRCPY_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (__strlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S (__strnlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S (__strrchr_sse42): Likewise.
	(__strrchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S: Likewise.
	* sysdeps/x86_64/multiarch/stpcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/stpncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strncat.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.

	* sysdeps/i386/i686/multiarch/bcopy.S (__bcopy_ia32): Make it
	global and hidden.
	* sysdeps/i386/i686/multiarch/bzero.S (__bzero_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S (__memcmp_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S (__memcpy_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S (__memmove_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S (__mempcpy_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S (STRCAT_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S (__STRCMP_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S (STRCPY_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strpbrk.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strstr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: New file.

	* Rules [$(multi-arch) = no] (tests): Filter out $(tests-ifunc).
	[$(multi-arch) = no] (xtests): Filter out $(xtests-ifunc).
	* include/ifunc-impl-list.h: New file.
	* misc/ifunc-impl-list.c: Likewise.
	* misc/Makefile (routines): Add ifunc-impl-list.
	* misc/Versions (GLIBC_PRIVATE): Add __libc_ifunc_impl_list.
	* string/test-string.h: Include <ifunc-impl-list.h>.
	(func_list, func_count, impl_count, impl_array) [TEST_IFUNC &&
	TEST_NAME]: New variables.
	(FOR_EACH_IMPL): Support func_list if TEST_IFUNC and TEST_NAME
	are defined.
	(test_init): Call __libc_ifunc_impl_list to initialize
	func_list if TEST_IFUNC and TEST_NAME are defined.

	* string/Makefile (strop-tests): Add bcopy and bzero.
	* string/test-bcopy.c: New file.
	* string/test-bzero.c: Likewise.
	* string/test-memmove.c: Support bcopy test if TEST_BCOPY is
	defined.
	* string/test-memset.c: Support bzero test if TEST_BZERO is
	defined.
	* sysdeps/x86_64/multiarch/bcopy.S (bcopy): Jump to
	__libc_memmove.
	* sysdeps/x86_64/multiarch/bzero.S (__bzero): Jump to
	__libc_memset.
	* sysdeps/x86_64/multiarch/memset.S (__libc_memset): New alias
	of memset.

2012-10-10  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Run $CXX, not cc1plus, to locate C++ headers.
	* configure: Regenerated.

	* Makeconfig (+link-static-before-libc): Don't include
	$(link-static-libc).

	* libio/libio.h (_IO_pos_t): Remove.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* NEWS: Add note about FIPS mode.  Wording suggested by Roland
	McGrath.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-entry.c: Include fips-private.h.
	(__crypt_r, __crypt): Disable MD5 and DES if FIPS is enabled.
	* crypt/md5c-test.c (main): Tolerate disabled MD5.
	* sysdeps/unix/sysv/linux/fips-private.h: New file.
	* sysdeps/generic/fips-private.h: New file, dummy fallback.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-private.h: Include stdbool.h.
	(_ufc_setup_salt_r): Return bool.
	* crypt/crypt-entry.c: Include errno.h.
	(__crypt_r): Return NULL with EINVAL for bad salt.
	* crypt/crypt_util.c (bad_for_salt): New.
	(_ufc_setup_salt_r): Check that salt is long enough and within
	the specified alphabet.
	* crypt/badsalttest.c: New file.
	* crypt/Makefile (tests): Add it.
	($(objpfx)badsalttest): New.

2012-10-09  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Add entry for BZ #14602.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle comparison macros as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(isgreater_test): New function.
	(isgreaterequal_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isunordered_test): Likewise.
	(main): Call the new functions.

2012-10-09  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_PROVIDES): Provide _AS_BASENAME_PREPARE,
	_AS_ME_PREPARE, _AS_VAR_ARITH_PREPARE, AS_SHELL_FN_as_fn_set_status,
	AS_SHELL_FN_as_fn_exit, AS_SHELL_FN_ac_fn_c_try_compile.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/ieee754/ldbl-opt/configure: Regenerated.
	* sysdeps/mach/configure: Regenerated.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/powerpc/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

	* dlfcn/dlerror.c (check_free): Call _dl_addr only if SHARED is
	defined.  Don't check if MAP is NULL.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Use struct stat64
	instead of struct _G_stat64.
	* libio/fileops.c (mmap_remap_check): Likewise.
	(decide_maybe_mmap): Likewise.
	(_IO_new_file_seekoff): Likewise.
	(_IO_file_stat): Likewise.
	* libio/libio.h (_IO_off64_t): Define to __off64_t, not
	_G_off64_t.
	* libio/oldfileops.c (_IO_old_file_seekoff): Use struct stat64
	instead of struct _G_stat64.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-10-08  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #14602]
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with ...
	(CHECK_EOL): New macro.
	(two_way_short_needle): Check beginning of haystack for EOL.  Use
	CHECK_EOL.
	* string/strcasestr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.
	* string/strstr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.

2012-10-08  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle isinf and isnan as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(finite_test): New function.
	(isinf_test): Likewise.
	(isnan_test): Likewise.
	(fpclassify_test): Test subnormal input.
	(isfinite_test): Likewise.
	(isnormal_test): Likewise.
	(main): Call the new functions.

2012-10-08  Jonathan Nieder  <jrnieder@gmail.com>

	[BZ #14660]
	* Makerules (%.dynsym): Force C locale when running
	$(OBJDUMP) --dynamic-syms.

2012-10-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Include
	<stdint.h>.

2012-10-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: On 32-bit, clear
	upper 32-bits of the length value in %o2 since we use branch-on-register
	tests which consider the entire 64-bit register.

2012-10-06  H.J. Lu  <hongjiu.lu@intel.com>

	* string/test-strstr.c (check2): Add a test for page boundary.

2012-10-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memset-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memset-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Use Niagara-4 memset
	and bzero when HWCAP_SPARC_CRYPTO is present.

2012-10-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14602]
	* string/test-strstr.c (check2): New function.
	(test_main): Call check2.

	* string/Makefile (tests): Remove bug-strstr1, bug-strcasestr1
	and bug-strchr1.
	* string/bug-strcasestr1.c (do_test): Moved to ...
	* string/test-strcasestr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strchr1.c (do_test): Moved to ...
	* string/test-strchr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strstr1.c (main): Moved to ...
	* string/test-strstr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strcasestr1.c: Removed.
	* string/bug-strchr1.c: Likewise.
	* string/bug-strstr1.c: Likewise.

	* elf/Makefile (dl-routines): Add hwcaps.
	* elf/dl-support.c (_dl_important_hwcaps): Removed.
	* elf/dl-sysdep.c (_DL_FIRST_EXTRA): Likewise.
	(_dl_important_hwcaps): Moved to ...
	* elf/dl-hwcaps.c: Here.  New file.
	* sysdeps/mach/hurd/dl-sysdep.c (_dl_important_hwcaps): Removed.

	[BZ #14557]
	* elf/setup-vdso.h (setup_vdso): Set GL(dl_nns) to 1 for vDSO
	if IS_IN_rtld isn't defined.

	* elf/dl-support.c (_dl_sysinfo_map): New.
	Include "get-dynamic-info.h" and "setup-vdso.h".
	(_dl_non_dynamic_init): Call setup_vdso.
	* elf/dynamic-link.h: Don't include <assert.h>.
	(elf_get_dynamic_info): Moved to ...
	* elf/get-dynamic-info.h: Here.  New file.
	* elf/dynamic-link.h: Include "get-dynamic-info.h".
	* elf/rtld.c (dl_main): Break out vDSO setup code into ...
	* elf/setup-vdso.h: Here.  New file.
	* elf/rtld.c: Include "setup-vdso.h".
	(dl_main): Call setup_vdso.

2012-10-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: List nexttoward, cimag, clog10, conf and
	creal in comment listing functions tested.  List finite, isinf,
	isnan, isless, islessequal, isgreater, isgreaterequal,
	islessgreater, isunordered, lgamma_r and pow10 as functions and
	macros not tested.  Mention which functions not tested are aliases
	for other functions.  Fix typo.  Note that signs of NaNs are not
	tested.

	* scripts/config.guess: Update from config.git.
	* scripts/config.sub: Likewise.

2012-10-04  Roland McGrath  <roland@hack.frob.com>

	* misc/Versions (GLIBC_PRIVATE): New set, add __madvise.
	* misc/madvise.c (madvise): Renamed to __madvise.
	Make madvise a weak alias.
	* include/sys/mman.h: Declare __madvise.
	Replace libc_hidden_proto (madvise) with libc_hidden_proto (__madvise).
	* sysdeps/unix/syscalls.list
	(madvise): Make __madvise the strong name, and madvise a weak alias.
	* sysdeps/unix/sysv/linux/syscalls.list
	(madvise, mmap): Remove redundant entries.
	* malloc/arena.c (shrink_heap): Use __madvise, not madvise.
	* malloc/malloc.c (mtrim): Likewise.
	* sysdeps/mach/hurd/malloc-machine.h (madvise): Renamed to __madvise.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/dl-cache.c: File removed.
	* config.h.in (USE_LDCONFIG): New #undef.
	* configure.in (use_ldconfig): If set, define USE_LDCONFIG.
	* configure: Regenerated.
	* elf/Makefile (dl-routines): Add dl-cache only under
	[$(use-ldconfig) = yes].
	* elf/dl-load.c (_dl_map_object): Conditionalize code consulting the
	cache on [USE_LDCONFIG].
	* elf/dl-open.c (_dl_open): Call _dl_unload_cache only under
	[USE_LDCONFIG].
	* elf/rtld.c (dl_main): Likewise.

2012-10-03  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/posix/sysconf.c (__sysconf): Return 0 also for
	_SC_LEVEL4_CACHE_LINESIZE.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/bsd/confstr.h: File removed.

2012-10-02  Alexandre Oliva <aoliva@redhat.com>

	* scripts/check-local-headers.sh: Exclude sys/sdt.h and
	sys/sdt-config.h.

2012-10-02  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd: struct loadcmd):
	Make 'mapoff' field ElfW(Off) rather than off_t.

2012-10-02  Dmitry V. Levin  <ldv@altlinux.org>

	* nscd/Makefile: Remove nscd-cflags and all its users.
	(CPPFLAGS-nonlib): Add preprocessor flags for nscd modules.
	(CFLAGS-nonlib): Add compiler flags for nscd modules.

	[BZ #10631]
	* malloc.c (malloc_printerr): Clarify error message.

2012-10-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14648]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_FMA_Usable if FMA is supported.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_FMA_Usable): New
	macro.
	(bit_FMA4_Usable): Updated.
	(index_FMA_Usable): New macro.
	(CPUID_FMA): Likewise
	(HAS_FMA): Defined with bit_FMA_Usable.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* bits/types.h (__swblk_t): Type removed.
	* bits/typesizes.h (__SWBLK_T_TYPE): Macro removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.

2012-10-01  Patsy Franklin <pfrankli@redhat.com>
	    Honza Horak <hhorak@redhat.com>

	* nis/yp_xdr.c (xdr_domainname): Use YPMAXDOMAIN as maxsize.
	(xdr_mapname): Use YPMAXMAP as maxsize.
	(xdr_peername): Use YPMAXPEER as maxsize.
	(xdr_keydat): Use YPAXRECORD as maxsize.
	(xdr_valdat): Use YPMAXRECORD as maxsize.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* io/openat.c [!__ASSUME_ATFCTS] (__have_atfcts): New global variable.

	* sysdeps/unix/sysv/linux/init-first.c: Moved to ...
	* csu/init-first.c: ... here.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Update #include.
	* sysdeps/unix/sysv/linux/s390/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: Likewise.
	* sysdeps/i386/init-first.c: File removed.
	* sysdeps/sh/init-first.c: File removed.

2012-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14645]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute result as x * y
	if x * y might underflow to zero and z is zero.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (min_subnorm_value): New variable.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise
	(fma_test_upward): Likewise.
	(initialize): Set min_subnorm_value.

2012-09-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14638]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use x * y + z for exact
	0 + 0.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Use original rounding
	mode for addition resulting in exact zero.
	* sysdeps/ieee754/ldbl-128/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Use x * y + z for
	exact 0 + 0.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): New function.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(main): Call the new functions.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Fix garbage in file.

2012-09-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/sleep.c (__sleep): Rewritten using __nanosleep
	instead of SIGALRM.

	* sysdeps/gnu/_G_config.h: Moved to ...
	* sysdeps/unix/sysv/linux/_G_config.h: ... here.
	* sysdeps/mach/hurd/_G_config.h: Moved to ...
	* sysdeps/generic/_G_config.h: ... here.

	* io/open.c (__open): Renamed to __libc_open.  Make __open an alias.

	* posix/Makefile ($(objpfx)config-name.h): Do $(make-target-directory).

	* nss/Makefile ($(objpfx)/libnss_test1.so$(libnss_test1.so-version)):
	Conditionalize target on [libnss_test1.so-version].

	* elf/dl-sysdep.c: Conditionalize whole contents on [SHARED].

	* Makeconfig (nssobjdir, resolvobjdir): Remove variables.
	(elfobjdir): Move out of conditionals.

	* nss/nsswitch.c (nss_new_service): Conditionalize definition and
	declaration on [!DO_STATIC_NSS || SHARED], matching its only caller.
	(__nss_lookup_function): Conditionalize label remove_from_tree on
	[!DO_STATIC_NSS || SHARED], matching its only use.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memcpy-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use Niagara-4 memcpy
	when HWCAP_SPARC_CRYPTO is present.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* io/tst-mknodat.c: Create a FIFO instead of a socket.

2012-09-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #6530]
	* stdio-common/vfprintf.c (process_string_arg): Revert
	2000-07-22 change.

2011-09-28  Jonathan Nieder  <jrnieder@gmail.com>

	* stdio-common/Makefile (tst-sprintf-ENV): Set environment
	for testcase.
	* stdio-common/tst-sprintf.c: Include <locale.h>
	(main): Test sprintf's handling of incomplete multibyte
	characters.

2012-09-28  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-runtime.c (VERSYMIDX): Removed.
	* elf/dl-version.c (VERSYMIDX): Likewise.
	* elf/do-rel.h (VERSYMIDX): Likewise.
	(VALIDX): Likewise.
	* elf/dynamic-link.h (VERSYMIDX): Likewise.
	* elf/rtld.c (VALIDX): Likewise.
	(ADDRIDX): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (VALIDX): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (VALIDX): Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h (ADDRIDX): Likewise.
	* sysdeps/generic/ldsodefs.h (VERSYMIDX): New macro.
	(VALIDX): Likewise.
	(ADDRIDX): Likewise.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/pthread/aio_fsync.c: Fix the file mode checking.

2012-09-28  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #11438]
	* sysdeps/posix/getaddrinfo.c (default_scopes): Map RFC 1918 addresses
	to global scope.
	* posix/tst-rfc3484.c: Verify 10/8, 172.16/12 and 196.128/16
	addresses are in the same scope as 192.0.2/24.
	* posix/gai.conf: Document new scope table defaults.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #5298]
	* libio/fileops.c (_IO_new_file_seekoff): Don't flush buffer
	for ftell.  Compute offsets from write pointers instead.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14543]
	* libio/Makefile (tests): New test case tst-fseek.
	* libio/tst-fseek.c: New test case to verify that fseek/ftell
	combination works in wide mode.
	* libio/wfileops.c (_IO_wfile_seekoff): Adjust internal buffer
	state when the external buffer state changes.

2012-09-27  David S. Miller  <davem@davemloft.net>

	[BZ #14376]
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Do not
	pass reloc->r_addend in as the 'high' argument to
	sparc64_fixup_plt when handling R_SPARC_JMP_IREL relocations.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* rt/tst-aio2.c: Include <pthread.h>.
	* rt/tst-aio3.c: Likewise.

2012-09-27  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/ieee754/ldbl-128/bits/huge_vall.h: Remove.

2012-09-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strncmp-ssse3.S: Conditionalize
	contents on [SHARED].

2012-09-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14530]
	[BZ #13741]
	* misc/sys/cdefs.h: Define __extern_inline and __extern_always_inline
	for C++ and GCC <4.3 as well as for non GCC compilers.

2012-09-26  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-09-25  Roland McGrath  <roland@hack.frob.com>

	* Makefile.in (all, install): Declare with .PHONY.
	Reported by Michael Hope <michael.hope@linaro.org>.

2012-09-25  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* manual/platform.texi (PowerPC): Document __ppc_get_timebase_freq.
	* sysdeps/powerpc/sys/platform/ppc.h: Include the operating
	system header.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_headers):
	Likewise.
	(sydep_routines): Add the new and the internal functions.
	* sysdeps/unix/sysv/linux/powerpc/bits/ppc.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Versions
	(GLIBC_2.17): Add the new function.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c: New file.

2012-09-25  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/pthread_once.c (__pthread_once):
	Add release barrier before setting once_control to say
	initialisation is done.  Add hints on lwarx.  Use macro in
	place of isync.
	(clear_once_control): Add release barrier.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Handle more values close to |z| = 1
	specially.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/Makefile (libm-calls): Add x2y2m1.
	* sysdeps/generic/math_private.h (__x2y2m1f): Declare.
	(__x2y2m1): Likewise.
	(__x2y2m1l): Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c: New file.
	* sysdeps/ieee754/dbl-64/x2y2m1f.c: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1l.c: Likewise.
	* math/libm-test.inc (clog_test, clog10_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14621]
	* posix/glob.c (next_brace_sub): Use size_t instead of unsigned
	int as type of variable DEPTH.
	(glob): Use size_t instead of int as type of variables NEWCOUNT
	and OLD_PATHC.

2012-09-25  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sincosf-sse2.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf-sse2.S: New file.
	* sysdeps/ieee754/flt-32/s_sincosf.c (SINCOSF, SINCOSF_FUNC): Add
	macros for using routine as __sincosf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* sysdeps/x86_64/fpu/s_sincosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/s_ccoshf.c (__ccoshf): Fix wrong usage of sincos for
	subnormal argument.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ccosh.c (__ccoshf): Likewise.
	* math/s_cexp.c (__cexpl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanh.c (ctanh): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h (_IO_size_t): Define to size_t, not _G_size_t.
	(_IO_ssize_t): Define to __ssize_t, not _G_ssize_t.
	(_IO_off_t): Define to __off_t, not _G_off_t.
	(_IO_pid_t): Define to __pid_t, not _G_pid_t.
	(_IO_uid_t): Define to __uid_t, not _G_uid_t.
	(_IO_wint_t): Define to wint_t, not _G_wint_t.
	* libio/libioP.h (struct _IO_jump_t): Use size_t not _G_size_t as
	type of __dummy and __dummy2 fields.
	* sysdeps/generic/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/gnu/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c: Include malloc-sysdep.h.
	(shrink_heap): Use check_may_shrink_heap to decide if madvise
	is sufficient to shrink the heap or an unmap is needed.
	* sysdeps/generic/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.
	* sysdeps/unix/sysv/linux/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c (_IO_new_file_seekoff): Fix typos in
	comments.

2012-09-24  Dmitry V. Levin  <ldv@altlinux.org>

	* catgets/test-gencat.sh: Add "set -e".
	* elf/tst-pathopt.sh: Likewise.
	* grp/tst_fgetgrent.sh: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.
	* intl/tst-gettext.sh: Likewise.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/ftwtest-sh: Likewise.
	* libio/test-freopen.sh: Likewise.
	* malloc/tst-mtrace.sh: Likewise.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* stdio-common/tst-printf.sh: Likewise.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/tst-fmtmsg.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.
	* catgets/Makefile: Do not specify -e option when running
	testsuite shell scripts.
	* elf/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* io/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* sysdeps/x86_64/Makefile: Likewise.

	* io/ftwtest-sh: Add copyright header.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.

2012-09-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13679]
	* Makeconfig (+link): Defined as $(+link-static) if
	$(build-shared) isn't yes.
	(link-tests): Defined as $(+link-static-tests) if $(build-shared)
	isn't yes.
	(static-gnulib): Add -lgcc_eh if $(build-shared) isn't yes.

	* Makeconfig (+postctorT): Replace crtendS.o with crtend.o.

	[BZ #14562]
	* malloc/arena.c (heap_trim): Properly get fencepost and adjust
	new chunk size with MALLOC_ALIGN_MASK.

2012-09-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fphex.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(__printf_fphex): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c (struct hex_test): New
	structure.
	(hex_tests): New variable.
	(test_hex_in_one_mode): New function.
	(do_test): Also run tests for hex float output.

2012-09-21  Joseph Myers  <joseph@codesourcery.com>

	* libio/iopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* libio/libio.h (_IO_HAVE_SYS_WAIT): Remove.
	* libio/oldiopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* sysdeps/generic/_G_config.h (_G_HAVE_SYS_WAIT): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.

2012-09-20  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [_G_NEED_STDARG_H]: Make code unconditional.
	* sysdeps/generic/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/gnu/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_NEED_STDARG_H): Remove.

2012-09-19  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #14579]
	* elf/rtld.c (dl_main): Limit the check for self loading to normal
	mode only.
	* elf/tst-rtld-load-self.sh: New test.
	* elf/Makefile: Run it.

2012-09-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/wordsize-64/Makefile [$(subdir) = misc]
	(tst-writev-ENV): Remove.
	* sysdeps/wordsize-64/tst-writev.c (TIMEOUT): Define.

2012-09-17  Chris Metcalf  <cmetcalf@tilera.com>

	* crypt/md5test-giant.c (TIMEOUT): Increase to 8 minutes for tilegx.

2012-09-17  Joseph Myers  <joseph@codesourcery.com>

	* libio/iogetline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]: Make code
	unconditional.
	* libio/iogetwline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]:
	Likewise.
	* sysdeps/generic/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_IO_GETLINE_INFO):
	Likewise.

2012-09-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14587]
	* Makeconfig (ASFLAGS): Remove $(have-cpp-asm-debuginfo) check.
	* config.make.in (have-cpp-asm-debuginfo): Removed.
	* configure.in: Don't substitute libc_cv_cpp_asm_debuginfo.
	* configure: Regenerated.

2012-09-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fp.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(___printf_fp): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c: New file.
	* stdio-common/Makefile (tests): Add tst-printf-round.
	(link-libm): New variable.
	($(objpfx)tst-printf-round): Depend in $(link-libm).

2012-09-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14576]
	* bits/libc-lock.h (__rtld_lock_init_recursive): Removed.
	* sysdeps/mach/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.

2012-09-13  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [!_G_HAVE_PRINTF_FP] (_IO_USE_DTOA): Remove.
	* sysdeps/generic/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/gnu/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.

2012-09-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14518]
	* include/rounding-mode.h: New file.
	* sysdeps/generic/get-rounding-mode.h: Likewise.
	* sysdeps/s390/fpu/get-rounding-mode.h: Likewise.
	* stdlib/strtod_l.c: Include <rounding-mode.h>.
	(MAX_VALUE): New macro.
	(MIN_VALUE): Likewise.
	(overflow_value): New function.
	(underflow_value): Likewise.
	(round_and_return): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.  Use
	round_away to determine rounding depending on rounding mode.
	(____STRTOF_INTERNAL): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.
	* stdlib/tst-strtod-round.c: Include <fenv.h>.
	(struct test_results): New structure.
	(struct test): Use struct test_results to store expected results
	for all rounding modes.
	(TEST): Include expected results for all rounding modes.
	(test_in_one_mode): New function.
	(do_test): Use test_in_one_mode to compute and check results.
	Check results for all rounding modes.
	* stdlib/Makefile ($(objpfx)tst-strtod-round): Depend on
	$(link-libm).

2012-12-09  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update

2012-09-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/gnu/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.

2012-09-11  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c: Update copyright years.

2012-09-10  Joseph Myers  <joseph@codesourcery.com>

	* libioP.h [_G_USING_THUNKS]: Make code unconditional.
	[!_G_USING_THUNKS]: Remove conditional code.
	* sysdeps/gnu/_G_config.h (_G_USING_THUNKS): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_USING_THUNKS): Likewise.

	* libio/libioP.h [__GNUC__] (VTABLE_LABEL): Remove.
	[!builtinbuf_vtable && __cplusplus] (builtinbuf_vtable): Likewise.
	* sysdeps/generic/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	* sysdeps/gnu/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.

2012-09-10  H.J. Lu  <hongjiu.lu@intel.com>

	* libio/Makefile: Include ../Makeconfig before tests.
	(tests): Add tst-fopenloc and depend on $(objpfx)tst-fopenloc.check
	only if $(build-shared) is yes.

	* iconv/gconv_db.c: Update copyright years.

2012-09-10  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: Fix
	unwind info if defined PIC. Fix special cases description.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: Likewise.

	* sysdeps/x86_64/fpu/s_sinf.S: Fix special cases description, fix
	DP_HI_MASK entry.
	* sysdeps/x86_64/fpu/s_cosf.S: Likewise.

2012-09-07  H.J. Lu  <hongjiu.lu@intel.com>

	* scripts/check-local-headers.sh: Add "shopt -s nullglob".

	* iconv/gconv_db.c (free_derivation): Check if deriv->steps
	is NULL.

	* debug/Makefile (LDFLAGS-tst-chk4): Renamed to ...
	(LDLIBS-tst-chk4): This.
	(LDFLAGS-tst-chk5): Renamed to ...
	(LDLIBS-tst-chk5): This.
	(LDFLAGS-tst-chk6): Renamed to ...
	(LDLIBS-tst-chk6): This.
	(LDFLAGS-tst-lfschk4): Renamed to ...
	(LDLIBS-tst-lfschk4): This.
	(LDFLAGS-tst-lfschk5): Renamed to ...
	(LDLIBS-tst-lfschk5): This.
	(LDFLAGS-tst-lfschk6): Renamed to ...
	(LDLIBS-tst-lfschk6): This.

	* Makefile ($(inst_includedir)/gnu/stubs.h): Remove dependency
	on $(common-objpfx)soversions.mk.

2012-09-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/examples/inetcli.c (SERVERHOST): Use www.gnu.org as
	example host name.

2012-09-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c (arena_get_retry): New function that gets
	another arena for the caller to try its request on.
	* malloc/malloc.c (__libc_malloc): Use get_another_arena if the
	current arena cannot fulfill the request.
	(__libc_memalign): Likewise.
	(__libc_memalign): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.

2012-09-05  John Tobey  <john.tobey@gmail.com>

	[BZ #13542]
	* manual/arith.texi (Operations on Complex): Fix description
	of carg branch cut.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/socket.texi (Host Addresses): Use www.gnu.org as example
	host name.

	[BZ #10038]
	* manual/memory.texi (Memory): Make order of menu items match
	order of sections.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tls.c (DL_INITIAL_DTV): Removed.
	(_dl_initial_dtv): New.  Defined if SHARED isn't defined.
	(_dl_deallocate_tls): Restore GL(dl_initial_dtv).

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c (static_dtv): Renamed to ...
	(_dl_static_dtv): This.  Make it global.
	(_dl_initial_dtv): Removed.
	(__libc_setup_tls): Updated.
	* elf/dl-tls.c (DL_INITIAL_DTV): New macro.
	(_dl_deallocate_tls): Replace GL(dl_initial_dtv) with
	DL_INITIAL_DTV.

2012-09-06  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (NT_S390_HIGH_GPRS): New macro.
	(NT_S390_TIMER, NT_S390_TODCMP, NT_S390_TODPREG): Likewise.
	(NT_S390_CTRS, NT_S390_PREFIX, NT_S390_LAST_BREAK): Likewise.
	(NT_S390_SYSTEM_CALL, NT_ARM_VFP): Likewise.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14545]
	* csu/libc-tls.c (_dl_initial_dtv): New variable.
	* elf/dl-tls.c (_dl_deallocate_tls): Always check dtv before
	freeing dtv[-1].

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14544]
	* Makeconfig (link-static-before-libc): Replace $(+prector)
	with $(+prectorT).
	(link-static-after-libc): Replace $(+postctor) with
	$(+postctorT).
	(link-bounded): Replace $(+prector)/$(+postctor) with
	$(+prectorT)/$(+postctorT).
	(+prectorT): New macro.
	(+postctorT): Likewise.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/gen-tst-strtod-round.c: Include <assert.h>.
	(round_str): Handle values above the maximum for IBM long double
	as inexact.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2012-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/Makefile: Remove -mzarch
	assembler flag.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Use .machinemode
	zarch_nohighgprs around the zarch optimized routines.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Explicitly check
	for zarch.

2012-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/bits/hwcap.h (HWCAP_SPARC_PAUSE)
	(HWCAP_SPARC_CBCOND, HWCAP_SPARC_CRYPTO): Define.
	* sysdeps/sparc/dl-procinfo.h (_DL_HWCAP_COUNT): Increase to 27.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/arena.c: Fold copyright years.
	* malloc/mcheck.c, malloc/memusage.c: Likewise.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_MAX>: Fix indentation.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* manual/contrib.texi (Contributors): Fix typo.  Complete entry.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_THRESHOLD>: Do not
	change internal state upon failure.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/mcheck.c (mcheck_check_all): Fix typo.
	* malloc/memusage.c (mmap): Likewise.
	(mmap64, mremap): Likewise.  Adjust name in comment.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c: Fix typos in comments.
	* libio/oldfileops.c: Likewise.
	* libio/wfileops.c: Likewise.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #1349]
	* malloc/Makefile (tests): Add tst-malloc-usable test case.
	(tst-malloc-usable-ENV): Set environment for test case.
	* malloc/hooks.c (malloc_check_get_size): New function to get
	requested size.
	* malloc/malloc.c (musable): Use malloc_check_get_size.
	* malloc/tst-malloc-usable.c: New test case.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/tst-strtod-overflow.c (TIMEOUT): Define.

2012-09-05  Allan McRae  <allan@archlinux.org>

	[BZ #13966]
	* configure.in (CXX_SYSINCLUDES): Use compiler output to
	determine header location.
	* configure: Regenerated.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/gen-tst-strtod-round.c (formats): Add Motorola extended
	float format.
	* stdlib/tst-strtod-round.c (TEST) [LDBL_MANT_DIG == 64 &&
	LDBL_MAX_EXP == 16384]: Add case for Motorola extended float
	format.
	(test): Regenerate.

2012-09-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: New file.

2012-09-04  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c (alternative_main): Only warn on SGID
	failures.

	* stdlib/tst-secure-getenv.c: Fix whitespace in comments.

2012-09-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9914]
	* libio/iogetdelim.c: Include <limits.h>.
	(_IO_getdelim): Avoid integer overflow in testing whether cur_len
	+ len + 1 would overflow.

2012-09-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-09-03  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sinf-sse2, s_conf-sse2.

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sinf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf.c: New file.

	* sysdeps/ieee754/flt-32/s_sinf.c (SINF, SINF_FUNC): Add macros
	for using routine as __sinf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/ieee754/flt-32/s_cosf.c (COSF, COSF_FUNC): Add macros
	for using routine as __cosf_ia32.
	Use macro for function declaration and weak_alias.

	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Fix Copyright.
	* sysdeps/i386/i686/fpu/multiarch/e_expf.c: Fix Copyright.

	* sysdeps/x86_64/fpu/s_sinf.S: New file.
	* sysdeps/x86_64/fpu/s_cosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-09-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Make pointers to the specialized implementations
	hidden.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.

2012-09-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14538]
	* sysdeps/x86_64/dl-machine.h (elf_machine_dynamic): Use the
	first element of the GOT.
	(elf_machine_load_address): Return the difference between
	the runtime address of _DYNAMIC and elf_machine_dynamic ().

2012-09-01  Allan McRae  <allan@archlinux.org>

	[BZ #13412]
	* configure.in (AWK): Require gawk version 3.0 or later.
	* configure: Regenerated.

2012-09-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[__NR_clock_getres]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remoce conditional code.
	(clock_getcpuclockid): Remove code left unreachable by removal of
	conditionals.
	* sysdeps/unix/sysv/linux/clock_getres.c [__NR_clock_getres]: Make
	code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__NR_clock_gettime]:
	Make code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]: Remove
	conditional code.
	[__ASSUME_POSIX_CPU_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.

2012-08-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14476]
	* Makefile (install): Also pass LD_SO=$(ld.so-version) to
	scripts/test-installation.pl.

	* scripts/test-installation.pl: Use LD_SO to get $ld_so_name
	and $ld_so_version if it is set.

2012-08-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14516]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Don't return
	failure if reading from procfs failed.
	* sysdeps/unix/sysv/linux/ttyname_r.c (ttyname_r): Likewise.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STAT64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/fxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/fxstatat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/xstat.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/lxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstat.c: Do not include
	<kernel-features.h>.
	[__NR_stat64 && !__ASSUME_STAT64_SYSCALL] (__have_no_stat64):
	Remove.
	* sysdeps/unix/sysv/linux/xstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/xstatconv.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional.

2012-08-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #5400]
	* NEWS: Add fixed bug number.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14519]
	* stdlib/strtod_l.c (round_and_return): Return -0.0 for
	underflowing exponent in case of negative sign.
	* stdlib/tst-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

	[BZ #3479]
	* stdlib/strtod_l.c (NDIG): Remove.
	(HEXNDIG): Likewise.
	(MPNSIZE): Increase to represent 10^n where 2^-n is 1/4 ulp of the
	smallest representable value.
	(____STRTOF_INTERNAL): Use all fractional decimal digits that may
	lie within an exact representation of 1/2 ulp of the result.
	* stdlib/fpioconst.c (__tens): Include 10^2^9 and 10^2^10
	unconditionally.
	(TENS_P9_IDX): Define unconditionally.
	(TENS_P9_SIZE): Likewise.
	(TENS_P10_IDX): Likewise.
	(TENS_P10_SIZE): Likewise.
	[BITS_PER_MP_LIMB == 32]: Change condition for larger powers of 10
	to !defined __NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024] (__tens): Add
	entries for 10^2^13 and 10^2^14.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024]
	(TENS_P13_IDX): Define.
	(TENS_P13_SIZE): Likewise.
	(TENS_P14_IDX): Likewise.
	(TENS_P14_SIZE): Likewise.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.  Make entries for 10^2^9 and 10^2^10
	unconditional.
	(_fpioconst_pow10) [!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ >
	1024]: Add entries for 10^2^13 and 10^2^14.
	[LAST_POW10 > _LAST_POW10]: Remove #error.
	* stdlib/fpioconst.h (FPIOCONST_POW10_ARRAY_SIZE): Define.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.
	* stdlib/gen-fpioconst.c: New file.
	* stdlib/gen-tst-strtod-round.c: Likewise.
	* stdlib/tst-strtod-round-data: Likewise.
	* stdlib/tst-strtod-round.c: Likewise.
	* stdlib/Makefile (tests): Add tst-strtod-round.

	[BZ #14459]
	* stdlib/strtod_l.c: Include <stdint.h>.
	(NDEBUG): Do not define.
	(round_and_return): Change EXPONENT parameter to type intmax_t.
	Rearrange calculations to avoid internal overflow possibilities.
	(str_to_mpn): Change EXPONENT parameter to type intmax_t *.
	Rearrange calculations to avoid internal overflow possibilities.
	Assert that number fits inside MPNSIZE limbs.
	(____STRTOF_INTERNAL): Change EXPONENT variable to type intmax_t.
	Change DIG_NO, INT_NO and LEAD_ZERO to type size_t.  Rearrange
	calculations and add assertions to avoid internal overflow
	possibilities.  Add casts to avoid signed/unsigned operations.
	* stdlib/tst-strtod-overflow.c: New file.
	* stdlib/Makefile (tests): Add tst-strtod-overflow.

2012-08-25  Marek Polacek  <polacek@redhat.com>

	* time/time.h: Fix some typos in comments.

2012-08-23  Roland McGrath  <roland@hack.frob.com>

	* posix/tst-rfc3484.c: #undef USE_NSCD before including getaddrinfo.c.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

2012-08-23  Steve McIntyre  <steve.mcintyre@linaro.org>

	* elf/elf.h (EF_ARM_ABI_FLOAT_SOFT): New macro.
	(EF_ARM_ABI_FLOAT_HARD): Likewise.

2012-08-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/dl-fxstatat64.c: Use <> instead of "" in
	#include of fxstatat64.c.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* shadow/getspent.c: #undef USE_NSCD before #include that gets the code.
	* shadow/getspent_r.c: Likewise.
	* shadow/getspnam.c: Likewise.
	* shadow/getspnam_r.c: Likewise.
	* gshadow/getsgent.c: Likewise.
	* gshadow/getsgent_r.c: Likewise.
	* gshadow/getsgnam.c: Likewise.
	* gshadow/getsgnam_r.c: Likewise.
	* inet/getnetbyad.c: Likewise.
	* inet/getnetbyad_r.c: Likewise.
	* inet/getnetbynm.c: Likewise.
	* inet/getnetbynm_r.c: Likewise.
	* inet/getnetent.c: Likewise.
	* inet/getnetent_r.c: Likewise.
	* inet/getproto.c: Likewise.
	* inet/getproto_r.c: Likewise.
	* inet/getprtent.c: Likewise.
	* inet/getprtent_r.c: Likewise.
	* inet/getprtname.c: Likewise.
	* inet/getprtname_r.c: Likewise.
	* inet/getrpcbyname.c: Likewise.
	* inet/getrpcbyname_r.c: Likewise.
	* inet/getrpcbynumber.c: Likewise.
	* inet/getrpcbynumber_r.c: Likewise.
	* inet/getrpcent.c: Likewise.
	* inet/getrpcent_r.c: Likewise.
	* inet/getaliasent.c: Likewise.
	* inet/getaliasent_r.c: Likewise.
	* inet/getaliasname.c: Likewise.
	* inet/getaliasname_r.c: Likewise.
	* nscd/getgrgid_r.c: Likewise.
	* nscd/getgrnam_r.c: Likewise.
	* nscd/gethstbyad_r.c: Likewise.
	* nscd/gethstbynm3_r.c: Likewise.
	* nscd/getpwnam_r.c: Likewise.
	* nscd/getpwuid_r.c: Likewise.
	* nscd/getsrvbynm_r.c: Likewise.
	* nscd/getsrvbypt_r.c: Likewise.
	* nscd/gai.c: Likewise.

	* configure.in (build_nscd): New substituted variable, set
	by --disable-build-nscd and defaults to $use_nscd.
	* configure: Regenerated.
	* config.make.in (build-nscd): New substituted variable.
	* nscd/Makefile (others, others-pie, install-sbin, extra-objs):
	Change conditional to require [$(build-nscd) = yes] as well.
	* NEWS: Mention --disable-build-nscd in the --disable-nscd item.

	[BZ# 13696]
	* configure.in (use_nscd): New substituted variable, set by
	--disable-nscd.  If enabled, define USE_NSCD.
	* configure: Regenerated.
	* config.h.in: Add USE_NSCD.
	* config.make.in (use-nscd): New substituted variable.
	* inet/Makefile (CFLAGS-gethstbyad_r.c): Likewise.
	(CFLAGS-gethstbynm_r.c, CFLAGS-gethstbynm2_r.c): Likewise.
	(CFLAGS-getsrvbynm_r.c, CFLAGS-getsrvbypt_r.c): Variables removed.
	* grp/Makefile (CFLAGS-getgrgid_r.c): Remove -DUSE_NSCD.
	(CFLAGS-getgrnam_r.c): Likewise.
	(CFLAGS-initgroups.c): Likewise.
	* posix/Makefile (CFLAGS-getaddrinfo.c): Remove -DUSE_NSCD.
	* pwd/Makefile (CFLAGS-getpwuid_r.c, CFLAGS-getpwnam_r.c):
	Variables removed.
	* inet/getnetgrent_r.c
	(nscd_setnetgrent): New function, broken out of ...
	(setnetgrent): ... here.  Call it.
	(innetgr): Conditionalize nscd bits on [USE_NSCD].
	(nscd_getnetgrent): Conditionalize on [USE_NSCD].
	(__internal_getnetgrent_r): Conditionalize its use on [USE_NSCD].
	* nscd/Makefile (routines, aux): Move definitions after include of
	Makeconfig.  Conditionalize on [$(use-nscd) != no].
	* nss/nsswitch.c (nss_load_all_libraries, __nss_disable_nscd):
	Conditionalize on [USE_NSCD].
	(is_nscd, nscd_init_cb): Likewise.
	(nss_load_library): Conditionalize init callback on [USE_NSCD].
	* nss/nss_files/files-init.c: Conditionalize body on [USE_NSCD].
	* nss/nss_db/db-init.c: Likewise.
	* nscd/nscd.c (main): Conditionalize __nss_disable_nscd call on
	[USE_NSCD].
	* sysdeps/unix/sysv/linux/check_pf.c (get_nl_timestamp): New function.
	(make_request): Use it.
	(cache_valid_p): New function.
	(__check_pf): Use it.
	* NEWS: Add item for --disable-nscd.

2012-08-22  Dmitry V. Levin  <ldv@altlinux.org>

	* configure.in (SED): Update AC_CHECK_PROG_VER's version extract regexp
	to support sed >= 4.2.1-20-ga9bf076.
	* configure: Regenerated.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* csu/libc-start.c (apply_irel): Move extern declarations inside here.
	Conditionalize whole body on [IREL].

2012-08-22  Jeff Law <law@redhat.com>

	[BZ #14505]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only use gethostbyname4_r
	if the family is PF_UNSPEC.

2012-08-22  Mike Frysinger  <vapier@gentoo.org>

	* Makerules (lib-version): Rename from V.
	(install-lib-nosubdir): Change V to lib-version.

2012-08-22  Will Schmidt  <will_schmidt@vnet.ibm.com>

	[BZ #14252]
	* powerpc32/power6/wcschr.c: New file.
	* powerpc32/power6/wcscpy.c: New file.
	* powerpc32/power6/wcsrchr.c: New file.
	* powerpc64/power6/wcschr.c: New file.
	* powerpc64/power6/wcscpy.c: New file.
	* powerpc64/power6/wcsrchr.c: New file.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/str-two-way.h (AVAILABLE1_USES_J): New macro, define default.
	(two_way_short_needle): Use it.
	* string/strstr.c (AVAILABLE1_USES_J): Define.
	* string/strcasestr.c: Likewise.

	* string/str-two-way.h (two_way_short_needle): Use pointers instead of
	array references.
	* string/strcasestr.c (TOLOWER): Make side-effect safe.

	[BZ #11607]
	* NEWS: Add an entry.
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, RET0_IF_0): New macros,
	define their defaults.
	(two_way_short_needle): Detect end-of-string on-the-fly.
	* string/strcasestr.c, string/strstr.c (AVAILABLE): Update.
	(AVAILABLE1, AVAILABLE2, RET0_IF_0, AVAILABLE_USES_J): Define.
	* string/bug-strcasestr1.c: New test.
	* string/Makefile: Run it.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #11607]
	* string/str-two-way.h (two_way_short_needle): Optimize matching of
	the first character.

2012-08-21  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_irel): Function removed.
	* csu/libc-start.c (apply_irel): New function.
	(LIBC_START_MAIN): Call it instead of __libc_csu_irel.

2012-08-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_FADVISE64_64_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Do not include
	<kernel-features.h>.
	[__NR_fadvise64_64]: Make code unconditional.
	[!__ASSUME_FADVISE64_64_SYSCALL]: Remove conditional code.
	[__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64)]: Likewise.
	[!(__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64))]: Likewise.
	[__NR_fadvise64]: Make code unconditional.
	[!__NR_fadvise64]: Remove conditional code.
	* sysdeps/unix/sysv/linux/posix_fadvise64.c: Do not include
	<kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/posix_fadvise64.c: Do
	not include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/posix_fadvise64.c: Do not
	include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.

2012-08-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Unrolled short loop and
	slight instruction rearrangements per scrollpipe analysis.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.

2012-08-20  Roland McGrath  <roland@hack.frob.com>

	* manual/syslog.texi (syslog; vsyslog, closelog):
	Fix typo repeated twice: @file{dev/log} -> @file{/dev/log}.
	Reported by Ricardo Catalinas Jiménez <jimenezrick@gmail.com>.

	* elf/dl-sysdep.c (_dl_important_hwcaps): Fix conditional on using
	DSOCAPS to match condition on defining it.

2012-08-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SWAPCONTEXT_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__ &&
	__LINUX_KERNEL_VERSION >= 0x020616] (__ASSUME_UTIMES): Define.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_MMAP2_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/mmap64.c [__NR_mmap2]: Make code
	unconditional.
	[!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap64.S (__mmap64) [__NR_mmap2]:
	Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S (__mmap64)
	[__NR_mmap2]: Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.

2012-08-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/getrlimit.c: Remove.

2012-08-18  Andreas Jaeger  <aj@suse.de>

	* stdio-common/_itoa.c (_itoa): Add missing DUMMY variable.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	* include/sys/socket.h (__have_sock_cloexec): Add attribute_hidden.
	* include/unistd.h (__have_sock_cloexec): Likewise.
	(__have_pipe2): Likewise.
	(__have_dup3): Likewise.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	[BZ #9685]
	* include/unistd.h (__have_pipe2): Change define into an extern int.
	(__have_dup3): Likewise.
	* socket/have_sock_cloexec.c: Include fcntl.h.
	(__have_pipe2): New variable.
	(__have_dup3): Likewise.

2012-08-17  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/nice.c: Adjust #include.

2012-08-17  Marek Polacek  <polacek@redhat.com>

	* sysdeps/ieee754/ldbl-96/s_sincosl.c (__sincosl): Use __attribute__
	((unused)) on I1, which is set by GET_LDOUBLE_WORDS but never used.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* configure.in: Add AC_SUBST for sysheaders.
	* configure: Regenerated.
	* config.make.in (sysheaders): New substituted variable.

	* sysdeps/unix/mkfifo.c: Moved ...
	* sysdeps/posix/mkfifo.c: ... here.
	* sysdeps/unix/mkfifoat.c: Moved ...
	* sysdeps/posix/mkfifoat.c: ... here.

	* sysdeps/unix/utime.c: Moved ...
	* sysdeps/posix/utime.c: ... here.

	* sysdeps/unix/time.c: Moved ...
	* sysdeps/posix/time.c: ... here.
	* sysdeps/unix/sysv/linux/time.c: Adjust #include.
	* sysdeps/unix/sysv/linux/sparc/sparc64/time.c: Likewise.

	* sysdeps/unix/nice.c: Moved ...
	* sysdeps/posix/nice.c: ... here.

	* sysdeps/unix/alarm.c: Moved ...
	* sysdeps/posix/alarm.c: ... here.

	* intl/Makefile ($(codeset_mo)): Depend on the input file.

2012-08-17  Jeff Law <law@redhat.com>

	* intl/Makefile (codeset_mo): New variable.
	($(codeset_mo)): New target.
	(tst-codeset.out): Depend on that.  Remove explicit rule.
	(tst-gettext3.out, tst-gettext5.out): Likewise.
	(LOCPATH-ENV, tst-codeset-ENV): New variables.
	(tst-gettext3-ENV, tst-gettext5-ENV): Likewise.
	* intl/tst-codeset.sh: Remove.
	* intl/tst-gettext3.sh: Likewise.
	* intl/tst-gettext5.sh: Likewise.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/inet/syscalls.list: File removed.  Move contents into ...
	* sysdeps/unix/syscalls.list: ... here.

	* sysdeps/posix/getaddrinfo.c
	(save_gaiconf_mtime, check_gaiconf_mtime): New functions.
	(gaiconf_init, gaiconf_reload): Use them.
	[!_STATBUF_ST_NSEC]
	(gaiconf_mtime, save_gaiconf_mtime, check_gaiconf_mtime):
	Define using time_t rather than struct timespec.

	* sysdeps/generic/malloc-machine.h (MUTEX_INITIALIZER): New macro.
	(atomic_full_barrier, atomic_read_barrier, atomic_write_barrier):
	Macros removed.
	* malloc/arena.c (save_malloc_hook, save_free_hook): Conditionalize on
	[!NO_THREADS].
	(malloc_atfork, free_atfork, atfork_recursive_cntr): Likewise.
	(ptmalloc_lock_all, ptmalloc_unlock_all, ptmalloc_unlock_all2):
	Likewise.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Use NULL rather than 0 for
	__libc_cleanup_push argument.

	* bits/param.h: New file.
	* misc/sys/param.h: New file.
	* include/sys/param.h: New file.
	* misc/Makefile (headers): Add bits/param.h.
	* sysdeps/generic/sys/param.h: File removed.
	* sysdeps/unix/sysv/linux/bits/param.h: New file.
	* sysdeps/unix/sysv/linux/sys/param.h: File removed.
	* sysdeps/mach/hurd/bits/param.h: New file.
	* sysdeps/mach/hurd/sys/param.h: File removed.

	* elf/dl-close.c (_dl_close_worker): Add a cast and a comment to the
	last change.

	* libio/genops.c (_IO_unbuffer_write): Conditionalize locking code on
	[_IO_MTSAFE_IO].
	* libio/libioP.h [!_IO_MTSAFE_IO && !NOT_IN_libc]
	(_IO_acquire_lock, _IO_acquire_lock_clear_flags2, _IO_release_lock):
	New macros.

	* Makeconfig [$(libc-reentrant) = yes] (libio-mtsafe): New variable.
	* libio/Makefile (CPPFLAGS): Append $(libio-mtsafe) unconditionally
	rather than -D_IO_MTSAFE_IO conditionally.
	* stdio-common/Makefile (CPPFLAGS): Likewise.
	* wcsmbs/Makefile (CPPFLAGS): Likewise.
	* stdlib/Makefile (CFLAGS-strfmon.c, CFLAGS-strfmon_l.c):
	Use $(libio-mtsafe).
	* debug/Makefile (CFLAGS-sprintf_chk.c): Use $(libio-mtsafe) instead
	of -D_IO_MTSAFE_IO.
	(CFLAGS-snprintf_chk.c, CFLAGS-vsprintf_chk.c): Likewise.
	(CFLAGS-vsnprintf_chk.c, CFLAGS-asprintf_chk.c): Likewise.
	(CFLAGS-vasprintf_chk.c, CFLAGS-obprintf_chk.c): Likewise.
	(CFLAGS-dprintf_chk.c, CFLAGS-vdprintf_chk.c): Likewise.
	(CFLAGS-printf_chk.c, CFLAGS-fprintf_chk.c): Likewise.
	(CFLAGS-vprintf_chk.c, CFLAGS-vfprintf_chk.c): Likewise.
	(CFLAGS-gets_chk.c, CFLAGS-fgets_chk.c): Likewise.
	(CFLAGS-fgets_u_chk.c, CFLAGS-fread_chk.c): Likewise.
	(CFLAGS-fread_u_chk.c): Likewise.
	(CFLAGS-swprintf_chk.c, CFLAGS-vswprintf_chk.c): Likewise.
	(CFLAGS-wprintf_chk.c, CFLAGS-fwprintf_chk.c): Likewise.
	(CFLAGS-vwprintf_chk.c, CFLAGS-vfwprintf_chk.c): Likewise.
	(CFLAGS-fgetws_chk.c, CFLAGS-fgetws_u_chk.c): Likewise.
	* grp/Makefile (CFLAGS-fgetgrent_r.c, CFLAGS-putgrent.c): Likewise.
	* gshadow/Makefile (CFLAGS-fgetsgent_r.c, CFLAGS-putsgent.c): Likewise.
	* misc/Makefile (CFLAGS-mntent_r.c): Likewise.
	* pwd/Makefile (CFLAGS-fgetpwent_r.c): Likewise.
	* shadow/Makefile (CFLAGS-fgetspent_r.c, CFLAGS-putspent.c): Likewise.

	* libio/Makefile: Test [$(libc-reentrant) = yes]
	instead of [$(filter %REENTRANT, $(defines)) nonempty].

	* Makeconfig
	[$(libc-reentrant) = yes] (defines): Append -D_LIBC_REENTRANT.
	* sysdeps/pthread/configure: File removed.
	* sysdeps/pthread/Makeconfig: New file.
	* sysdeps/mach/hurd/Makeconfig (libc-reentrant): New variable.
	* sysdeps/mach/hurd/configure.in: Don't touch DEFINES here.

2012-08-16  Gary Benson  <gbenson@redhat.com>

	* elf/dl-close.c (_dl_close_worker): Also set r->r_map when
	unmapping the first object in a namespace.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* inet/getnetgrent_r.c (internal_setnetgrent): Renamed to ...
	(__internal_setnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(setnetgrent): Update caller.
	(internal_endnetgrent): Renamed to ...
	(__internal_endnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(endnetgrent): Update caller.
	(internal_getnetgrent_r): Renamed to ...
	(__internal_getnetgrent_r): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(__getnetgrent_r): Update caller.
	* inet/netgroup.h: Update declarations.  Add libc_hidden_proto uses.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/longlong.h: Update from GCC.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* stdlib/gmp-impl.h (udiv_qrnnd_preinv): Use __attribute__ ((unused))
	on _QL, which is set by umul_ppmm but never used.
	* stdio-common/_itoa.c (_itoa): Use __attribute__ ((unused)) on DUMMY
	variables, which are set by GMP macros but never used.
	* stdio-common/_itowa.c (_itowa): Likewise.
	* stdlib/divmod_1.c (mpn_divmod_1): Likewise.
	* stdlib/mod_1.c (mpn_mod_1): Likewise.

2012-08-16  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/sh/ldsodefs.h (ARCH_PLTENTER_MEMBERS) <sh_gnu_pltenter>:
	struct La_sh_regs is not constant.
	* sysdeps/sparc/ldsodefs.h (ARCH_PLTENTER_MEMBERS)
	<sparc32_gnu_pltenter, sparc64_gnu_pltenter>: struct La_sparc32_regs
	and struct La_sparc64_regs are not constant.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_getres.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c
	[__ASSUME_POSIX_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]
	(__libc_missing_posix_timers): Remove.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd) [SHARED]: Conditionalize
	check of GL(dl_error_catch_tsd) on [_LIBC_REENTRANT].

	* bits/libc-lock.h (__rtld_lock_initialize): New macro.

	* elf/dl-sym.c: Include <stdlib.h>.

	* posix/regcomp.c (init_word_char): Use temporaries to hold the 64-bit
	constants, which avoids warnings in 32-bit builds.

	* bits/fcntl.h [__USE_POSIX199309 || __USE_UNIX98]:
	(O_DSYNC, O_RSYNC): New macros (with NetBSD values).

	* misc/lseek.c: File moved to ...
	* io/lseek.c: ... here.

	* rt/clock_nanosleep.c: Include <time.h>, not <sys/time.h>.

	* crypt/sha512.c (sha512_process_block) [!USE_TOTAL128]: Avoid
	shifting LEN more than 31 bits at once.

2012-08-15  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #14195]
	* sysdeps/i386/i686/multiarch/strcmp-sssse3.S: Fix
	segmentation fault for a case of two empty input strings.
	* string/test-strncasecmp.c (check1): Renamed to...
	(bz12205): ...this.
	(bz14195): Add new testcase for two empty input strings and N > 0.
	(test_main): Call new testcase, adapt for renamed function.

2012-08-15  Andreas Jaeger  <aj@suse.de>

	[BZ #14090]
	* crypt/md5test2.c: New test, based on test supplied by Serge
	Belyshev <belyshev@depni.sinp.msu.ru>.
	* crypt/Makefile (xtests): Add md5test-giant..
	* crypt/Makefile ($(objpfx)md5test-giant): Add.

2012-08-15  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #14090]
	* crypt/md5.c (md5_process_block): Don't assume the buffer
	length is less than 2**32.
	* crypt/sha512.c (sha512_process_block): Don't assume the buffer
	length is less than 2**64.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* string/str-two-way.h: Include <sys/param.h>.
	(MAX): Macro removed.

	* sysdeps/x86_64/multiarch/strstr-c.c: Add copyright header.
	Move #define and #undef of memmove to just before and after
	including <string.h>.

	* sysdeps/x86_64/multiarch/memmove.c: Don't include <stddef.h>.
	[!NOT_IN_libc]: Move #define and #undef of memmove to just before
	and after including <string.h>.  Move declarations of
	__memmove_sse2, __memmove_ssse3, and __memmove_ssse3_back
	to before #include "string/memmove.c".

	* include/dirent.h: Declare __getdirentries.

	* sysdeps/posix/system.c (do_system): Cast SUB_REF () to void when not
	using its value, to avoid warnings in the [!_LIBC_REENTRANT] case.

2012-08-14  Mike Frysinger  <vapier@gentoo.org>

	* config.h.in (HAVE_CPP_ASM_DEBUGINFO): Delete.
	* sysdeps/i386/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/sysdep.h (ENTRY): Remove calls to STABS_CURRENT_FILE1,
	STABS_CURRENT_FILE, and STABS_FUN.
	(END): Remove call to STABS_FUN_END.
	(STABS_CURRENT_FILE1): Delete.
	(STABS_CURRENT_FILE): Likewise.
	(STABS_FUN): Likewise.
	(STABS_FUN_END): Likewise.
	(STABS_FUN2): Likewise.
	* sysdeps/x86_64/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/x86_64/configure: Regenerated.

2012-08-14  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-open.c: Include <atomic.h>.
	* elf/dl-lookup.c: Likewise.

2012-08-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Remove.
	* sysdeps/unix/sysv/linux/s390/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/sparc/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/system.c [!FORK] (FORK): Do not
	condition on __ASSUME_CLONE_THREAD_FLAGS.

2012-08-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-08-13  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* include/atomic.h (atomic_exchange_and_add): Split into ...
	(atomic_exchange_and_add_acq, atomic_exchange_and_add_rel): ... these.
	New atomic macros.

2012-08-13  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-08-13  Jeff Law <law@redhat.com>

	* manual/stdio.texi (snprintf): Clarify handling of the trailing
	null byte in the output string.

2012-08-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL): Define.
	[__LINUX_KERNEL_VERSION >= __LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL]
	(__ASSUME_ARG_MAX_STACK_BASED): Define.
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf)
	[__LINUX_KERNEL_VERSION < 0x020617]: Change condition to
	!__ASSUME_ARG_MAX_STACK_BASED.  Compare version with
	__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL.

2012-08-09  Jeff Law <law@redhat.com>

	[BZ #13939]
	* malloc.c/arena.c (reused_arena): New parameter, avoid_arena.
	When avoid_arena is set, don't retry in the that arena.  Pick the
	next one, whatever it might be.
	(arena_get2): New parameter avoid_arena, pass through to reused_arena.
	(arena_lock): Pass in new parameter to arena_get2.
	* malloc/malloc.c (__libc_memalign): Pass in new parameter to
	arena_get2.
	(__libc_malloc): Unify retrying after main arena failure with
	__libc_memalign version.
	(__libc_valloc, __libc_pvalloc, __libc_calloc): Likewise.

2012-08-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14166]
	* sysdeps/i386/i686/multiarch/strstr-c.c (strstr): Redefined
	to __redirect_strstr.
	(__strstr_sse42): Use typeof __redirect_strstr.
	(__strstr_ia32): Likewise.
	(__libc_strstr): New prototype.
	(strstr): Renamed to ...
	(__libc_strstr): This.
	(strstr): New strong alias of __libc_strstr.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/time.c (time): Redefined to
	__redirect_time.
	Include <time.h>.
	(__libc_time): New prototype.
	(time_ifunc): Replace time with __libc_time.
	(time): New strong alias and hidden definition of __libc_time.
	(__GI_time): Remove strong alias.
	* sysdeps/x86_64/multiarch/memmove.c: Don't include <string.h>.
	Include <stddef.h>.
	(memmove): Redefined to __redirect_memmove.
	(__memmove_sse2): Use typeof __redirect_memmove.
	(__memmove_ssse3): Likewise.
	(__memmove_ssse3_back): Likewise.
	(__libc_memmove): New prototype.
	(memmove): Renamed to ...
	(__libc_memmove): This.
	(memmove): New strong alias of __libc_memmove.

2012-08-08  Mark Salter  <msalter@redhat.com>

	* elf/elf.h
	(R_MN10300_TLS_GD): Define.
	(R_MN10300_TLS_LD): Likewise.
	(R_MN10300_TLS_LDO): Likewise.
	(R_MN10300_TLS_GOTIE): Likewise.
	(R_MN10300_TLS_IE): Likewise.
	(R_MN10300_TLS_LE): Likewise.
	(R_MN10300_TLS_DTPMOD): Likewise.
	(R_MN10300_TLS_DTPOFF): Likewise.
	(R_MN10300_TLS_TPOFF): Likewise.
	(R_MN10300_SYM_DIFF): Likewise.
	(R_MN10300_ALIGN): Likewise.
	(R_MN10300_NUM): Update.

2012-08-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_TGKILL):
	Remove.

2012-08-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/fdopendir.c: Include <stddef.h>.

	* sysdeps/unix/sysv/linux/readdir64_r.c: Update #include for
	sysdeps/unix -> sysdeps/posix move.
	* sysdeps/unix/sysv/linux/i386/readdir64_r.c: Likewise.

2012-08-07	Allan McRae	<allan@archlinux.org>

	[BZ #14303]
	* sunrpc/rpc_main.c (SVR4_CPP): Remove.
	(SUNOS_CPP): Likewise.
	(find_cpp): Fall back to selecting system cpp when /lib/cpp is
	not found.
	(open_input): Call CPP using execvp.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_PROT_GROWSUPDOWN): Remove.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/dl-execstack.c
	(_dl_make_stack_executable) [PROT_GROWSDOWN || PROT_GROWSUP]: Make
	code unconditional.
	(_dl_make_stack_executable) [!__ASSUME_PROT_GROWSUPDOWN]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS)
	[__ASSUME_GETDENTS32_D_TYPE]: Make code unconditional.
	(__GETDENTS) [!__ASSUME_GETDENTS32_D_TYPE]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/waitid.c [__NR_waitid]: Make code
	unconditional.
	[__ASSUME_WAITID_SYSCALL]: Likewise.
	[!__ASSUME_WAITID_SYSCALL]: Remove conditional code.

2012-08-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/closedir.c: Renamed to ...
	* sysdeps/posix/closedir.c: ... here.
	* sysdeps/unix/dirfd.c: Renamed to ...
	* sysdeps/posix/dirfd.c: ... here.
	* sysdeps/unix/dirstream.h: Renamed to ...
	* sysdeps/posix/dirstream.h: ... here.
	* sysdeps/unix/fdopendir.c: Renamed to ...
	* sysdeps/posix/fdopendir.c: ... here.
	* sysdeps/unix/opendir.c: Renamed to ...
	* sysdeps/posix/opendir.c: ... here.
	* sysdeps/unix/readdir.c: Renamed to ...
	* sysdeps/posix/readdir.c: ... here.
	* sysdeps/unix/readdir_r.c: Renamed to ...
	* sysdeps/posix/readdir_r.c: ... here.
	* sysdeps/unix/rewinddir.c: Renamed to ...
	* sysdeps/posix/rewinddir.c: ... here.
	* sysdeps/unix/seekdir.c: Renamed to ...
	* sysdeps/posix/seekdir.c: ... here.
	* sysdeps/unix/telldir.c: Renamed to ...
	* sysdeps/posix/telldir.c: ... here.
	* sysdeps/unix/sysv/linux/opendir.c: Update #include.
	* sysdeps/unix/sysv/linux/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir.c: Likewise.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h: Renamed to ...
	* bits/fcntl.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h (O_NOCTTY): Define to 0x8000,
	not 0.
	(O_ASYNC, O_FSYNC, O_SYNC): Move outside [__USE_MISC].
	[__USE_XOPEN2K8] (O_DIRECTORY, O_NOFOLLOW, O_CLOEXEC): New macros.
	(FCREAT, FEXCL, FTRUNC, FNOCTTY, FNONBLOCK): Macros removed.
	(struct flock): Move l_start, l_len to the beginning.
	Use __pid_t for l_pid.
	[__USE_XOPEN2K] (POSIX_FADV_NORMAL, POSIX_FADV_RANDOM): New macros.
	[__USE_XOPEN2K] (POSIX_FADV_SEQUENTIAL, POSIX_FADV_WILLNEED): Likewise.
	[__USE_XOPEN2K] (POSIX_FADV_DONTNEED, POSIX_FADV_NOREUSE): Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64): New macros.
	[__USE_XOPEN2K8] (F_DUPFD_CLOEXEC): New macro.
	[__USE_LARGEFILE64] (struct flock64): New type.
	(F_GETOWN, F_SETOWN): Also define for [__USE_XOPEN2K8].

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h: Renamed to ...
	* bits/dirent.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h
	[__INO_T_MATCHES_INO64_T] (_DIRENT_MATCHES_DIRENT64): New macro.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change from 2.6.0 to 2.6.16.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Define unconditionally.
	(__ASSUME_TGKILL): Define conditional on architectures, not kernel
	version.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_CLONE_STOPPED): Remove.
	(__ASSUME_FADVISE64_64_SYSCALL): Define conditional on
	architectures, not kernel version.
	(__ASSUME_PROT_GROWSUPDOWN): Define unconditionally.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	[__sparc__ && __arch64__] (__ASSUME_STAT64_SYSCALL): Do not
	condition definition on __LINUX_KERNEL_VERSION >= 0x02060c.
	* README: State 2.6.16 as minimum Linux kernel version.  Do not
	refer to older versions.

2012-08-06  Roland McGrath  <roland@hack.frob.com>

	* dirent/alphasort.c [_DIRENT_MATCHES_DIRENT64]:
	Define alphasort64 as an alias.
	* dirent/versionsort.c [_DIRENT_MATCHES_DIRENT64]:
	Define versionsort64 as an alias.
	* dirent/scandir.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandir64 as an alias.
	* dirent/scandirat.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandirat64 as an alias.
	* dirent/alphasort64.c (alphasort64):
	Conditionalize on [!_DIRENT_MATCHES_DIRENT64].
	* dirent/versionsort64.c: Likewise.
	* dirent/scandir64.c: Likewise.
	* dirent/scandirat64.c: Likewise.
	* sysdeps/wordsize-64/alphasort.c: File removed.
	* sysdeps/wordsize-64/alphasort64.c: File removed.
	* sysdeps/wordsize-64/scandir.c: File removed.
	* sysdeps/wordsize-64/scandir64.c: File removed.
	* sysdeps/wordsize-64/scandirat.c: File removed.
	* sysdeps/wordsize-64/scandirat64.c: File removed.
	* sysdeps/wordsize-64/versionsort.c: File removed.
	* sysdeps/wordsize-64/versionsort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: File removed.

	* bits/typesizes.h [__LP64__] (__INO_T_MATCHES_INO64_T): New macros.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__INO_T_MATCHES_INO64_T): New macro.
	* bits/dirent.h (_DIRENT_MATCHES_DIRENT64): New macro.
	* sysdeps/unix/sysv/linux/bits/dirent.h
	[defined __OFF_T_MATCHES_OFF64_T && defined __INO_T_MATCHES_INO64_T]
	(_DIRENT_MATCHES_DIRENT64): New macro.

	* io/lockf.c [__OFF_T_MATCHES_OFF64_T]:
	Define lockf64 as an alias.
	* libio/fseeko.c [__OFF_T_MATCHES_OFF64_T]:
	Define fseeko64 as an alias.
	* libio/ftello.c [__OFF_T_MATCHES_OFF64_T]:
	Define ftello64 as an alias.
	* libio/iofgetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fgetpos64 and fgetpos64 as aliases.
	* libio/iofsetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fsetpos64 and fsetpos64 as aliases.
	* io/lockf64.c [!__OFF_T_MATCHES_OFF64_T]:
	Conditionalize body on this.
	* libio/fseeko64.c: Likewise.
	* libio/ftello64.c: Likewise.
	* libio/iofgetpos64.c: Likewise.
	* libio/iofsetpos64.c: Likewise.
	* sysdeps/wordsize-64/lockf.c: File removed.
	* sysdeps/wordsize-64/lockf64.c: File removed.
	* sysdeps/wordsize-64/fseeko.c: File removed.
	* sysdeps/wordsize-64/fseeko64.c: File removed.
	* sysdeps/wordsize-64/ftello.c: File removed.
	* sysdeps/wordsize-64/ftello64.c: File removed.
	* sysdeps/wordsize-64/iofgetpos.c: File removed.
	* sysdeps/wordsize-64/iofgetpos64.c: File removed.
	* sysdeps/wordsize-64/iofsetpos.c: File removed.
	* sysdeps/wordsize-64/iofsetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: File removed.

	* bits/typesizes.h [__LP64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__OFF_T_MATCHES_OFF64_T): New macro.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/secure-getenv.c (__secure_getenv): Replace
	GLIBC_2_16 with GLIBC_2_17.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.

2012-08-03  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_AT_SECURE):
	Remove.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_BRK_PAGE_ROUNDED): Likewise.
	(__ASSUME_TMPFS_NAME): Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c (frob_brk)
	[!__ASSUME_BRK_PAGE_ROUNDED]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ldsodefs.h [__ASSUME_AT_SECURE]
	(HAVE_AUX_SECURE): Make definition unconditional.
	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs)
	[!__ASSUME_TMPFS_NAME]: Remove conditional code.

2012-08-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/sys/param.h (MAXSYMLINKS): Macro removed.
	* sysdeps/mach/hurd/bits/local_lim.h (SYMLOOP_MAX): Macro removed.
	* sysdeps/mach/hurd/eloop-threshold.h: New file.
	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__eloop_threshold instead of SYMLOOP_MAX.

	* sysdeps/generic/eloop-threshold.h: New file.
	* stdlib/canonicalize.c (__realpath): Use __eloop_threshold instead
	of MAXSYMLINKS.
	* elf/chroot_canon.c (chroot_canon): Likewise.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.6.0 everywhere.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SET_THREAD_AREA_SYSCALL): Remove.
	(__ASSUME_CLONE_THREAD_FLAGS): Condition on architectures, not
	kernel versions.
	(__ASSUME_POSIX_TIMERS): Define unconditionally.
	(__ASSUME_FUTEX_REQUEUE): Remove.
	(__ASSUME_STATFS64): Define unconditionally.
	(__ASSUME_AT_SECURE): Likewise.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_TGKILL): Define without depending on kernel version for
	i386.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_SWAPCONTEXT_SYSCALL): Condition on architecture, not
	kernel version.
	(__ASSUME_BRK_PAGE_ROUNDED): Define unconditionally.
	(__ASSUME_TMPFS_NAME): Likewise.
	* README: Update reference to Linux kernel versions.

2012-08-02  Marek Polacek  <polacek@redhat.com>

	[BZ# 14150]
	* configure.in (libc_cv_asm_type_prefix): Remove test.  Replace
	libc_cv_asm_type_prefix with %.
	* configure: Regenerated.
	* include/libc-symbols.h: Remove comment about
	ASM_TYPE_DIRECTIVE_PREFIX.  Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	(declare_symbol_alias_1_paste) [__ASSEMBLER__]: Do not define.
	(declare_symbol_alias_1_paste_1) [__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify) [!__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify_1) [!__ASSEMBLER__]: Likewise.
	* elf/tst-unique2mod2.c: Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define S.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define _S.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* config.h.in: Do not undef ASM_TYPE_DIRECTIVE_PREFIX.
	* sysdeps/s390/s390-32/sysdep.h: Do not define ASM_TYPE_DIRECTIVE.
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	Do not define ASM_TYPE_DIRECTIVE.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h:
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/i686/strtok.S: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/i386/strtok.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/strtok.S: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* libio/iofopen.c: Include <fcntl.h>.
	[_LIBC] [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(_IO_fopen64, fopen64): Define as aliases.
	* libio/iofopen64.c: Include <fcntl.h>.
	[!defined _LIBC || (defined O_LARGEFILE && O_LARGEFILE != 0)]:
	Conditionalize body on this.
	* sysdeps/wordsize-64/iofopen.c: File removed.
	* sysdeps/wordsize-64/iofopen64.c: File removed.

2012-08-01  Marek Polacek  <polacek@redhat.com>

	* libc/Makeconfig: Use elf in place of binfmt-subdir.
	Use dlfcn directly instead of a variable.
	(binfmt-subdir): Do not define.
	(dlfcn): Likewise.

2012-08-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_FCNTL64):
	Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/fcntl.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(miss_F_GETOWN_EX): Remove all definitions.
	[NO_CANCELLATION && !__ASSUME_FCNTL64] (__fcntl_nocancel): Remove
	macro definition.
	[!__ASSUME_FCNTL64]: Remove conditional code.
	[__ASSUME_FCNTL64]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lockf64.c: Do not include
	<kernel-features.h>.
	[__NR_fcntl64 && !__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(lockf64) [!__ASSUME_FCNTL64]: Remove conditional code.
	(lockf64) [__NR_fcntl64]: Make code unconditional.
	(lockf64) [__ASSUME_FCNTL64]: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_VFORK_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/vfork.S (__vfork) [__NR_vfork]:
	Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (NGROUPS): Define only if [NGROUPS_MAX].
	(MAXSYMLINKS): Define only if [SYMLOOP_MAX].

	* misc/mkstemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemp64 as an alias.
	* misc/mkstemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemps64 as an alias.
	* misc/mkostemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemp64 as an alias.
	* misc/mkostemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemps64 as an alias.
	* misc/mkstemp64.c [defined O_LARGEFILE && O_LARGEFILE != 0]:
	Conditionalize body on this.
	* misc/mkostemp64.c: Likewise.
	* misc/mkostemps64.c: Likewise.
	* misc/mkstemps64.c: Likewise.
	* sysdeps/wordsize-64/mkstemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp.c: File removed.
	* sysdeps/wordsize-64/mkstemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: File removed.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/syscalls.list: Add getrlimit/ugetrlimit line.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/sh/getrlimit.c: File removed.

	* sysdeps/unix/make-syscalls.sh: Emit uses of the versioned_symbol and
	compat_symbol macros from <shlib-compat.h> rather than the underlying
	default_symbol_version and symbol_version macros, so that DEFAULT
	lines in shlib-versions are respected.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Likewise.

2012-08-01  Florian Weimer  <fweimer@redhat.com>

	* posix/unistd.h (setuid, setreuid, seteuid, setresuid):
	Declare with warn_unused_result.
	(setgid, setregid, setegid, setresgid): Likewise.
	* sysdeps/unix/sysv/linux/sys/fsuid.h (setfsuid, setfsgid):
	Likewise.
	* WUR-REPORT: Remove set*id functions.

2012-07-31  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/renameat.c: New file, mostly copied from rename.c.

2012-07-31  Roland McGrath  <roland@hack.frob.com>

	[BZ #10191]
	* include/sys/socket.h (__libc_accept, __libc_accept4):
	Add attribute_hidden.
	* socket/accept4.c (__libc_accept4): Remove libc_hidden_def.

	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Conditionalize
	use of PTR_MANGLE.
	* inet/getnetgrent_r.c (setup): Likewise.

	* sysdeps/generic/siglist.h: Put SIGWINCH under #ifdef.

2012-07-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p if larger part has absolute
	value between 1.0 and 2.0 and smaller part has absolute value less
	than 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-31  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c: Use printf for error reporting.
	Exit with zero in case no suitable GID is found, and write a
	message to standard error.

2012-07-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (MAXSYMLINKS): Define to SYMLOOP_MAX
	rather than to 1.
	(NBBY, NGROUPS, CANBSIZ, NCARGS): New macros.
	(MAXPATHLEN): Removed.
	(NOGROUP, NODEV): New macros.
	(setbit, clrbit, isset, isclr): New macros.
	(howmany, roundup, powerof2): New macros.
	(DEV_BSIZE): New macro.

	* include/unistd.h: Add attribute_hidden on __libc_pwrite64.
	* sysdeps/posix/pwrite64.c: Remove libc_hidden_def (__libc_pwrite64).

	* sysdeps/ieee754/k_standard.c (__kernel_standard_l): Conditionalize
	definition on [!__NO_LONG_DOUBLE_MATH].

	* nss/nsswitch.c (__nss_lookup_function): Conditionalize use of
	PTR_MANGLE and PTR_DEMANGLE.

	* socket/accept4.c (accept4): Rename to __libc_accept4.
	Define accept4 as a weak alias.

	* sysdeps/posix/getcwd.c (__getcwd): Conditionalize d_type field use
	on [_DIRENT_HAVE_D_TYPE].
	* io/ftw.c (ftw_dir): Likewise.

	* io/xmknod.c (__xmknod): Don't check PATH for being null.

	* libio/genops.c (flush_cleanup): Move inside [_IO_MTSAFE_IO].

	* bits/signum.h (SIGSTOP, SIGCONT, SIGTSTP, SIGTTIN, SIGTTOU, SIGCHLD):
	Use the BSD numbers rather than the arbitrary ones we had.
	(SIGBUS, SIGIO, SIGPOLL, SIGPROF, SIGSYS): New macros.
	(SIGTRAP, SIGURG, SIGUSR1, SIGUSR2, SIGVTALRM): New macros.
	(SIGXCPU, SIGXFSZ): New macros.
	(_NSIG): Now 32.

	* elf/rtld.c (_rtld_global): Conditionalize .dl_ns[LM_ID_BASE]
	initializer on [_LIBC_REENTRANT].

	* iconv/iconv_charmap.c (charmap_conversion): Move ST, ADDR
	definitions inside [_POSIX_MAPPED_FILES].

	* posix/regex.c: Include <sys/param.h> for MIN/MAX.

	* dirent/opendir.c: Include <fcntl.h>.

	* bits/libc-lock.h (__libc_setspecific): Evaluate arguments.
	(__libc_getspecific): Likewise.
	(__libc_key_create): Likewise.

	* stdio-common/tmpfile64.c: Include <fcntl.h> first.
	[defined O_LARGEFILE && O_LARGEFILE != 0]: Conditionalize on this.
	* stdio-common/tmpfile.c [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(tmpfile64): Define as alias.
	* sysdeps/wordsize-64/tmpfile.c: File removed.
	* sysdeps/wordsize-64/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: File removed.

	* stdio-common/vfscanf.c: Include <stdbool.h>.
	* nss/makedb.c: Likewise.
	* stdio-common/_i18n_number.h: Likewise.
	* argp/argp-help.c: Likewise.
	* posix/wordexp.c: Likewise.
	* sysdeps/posix/spawni.c: Likewise.
	* nss/nss_files/files-initgroups.c: Likewise.
	* stdio-common/reg-modifier.c: Include <stdlib.h>.
	* nss/nss_files/files-initgroups.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-initgroups.c: Likewise.
	* io/fchmodat.c: Include <sys/stat.h>.

	* sysdeps/generic/ldsodefs.h (struct rtld_global): Use
	__rtld_lock_define_recursive macro instead of __rtld_lock_recursive_t.

	* intl/loadmsgcat.c (_nl_load_domain): Don't use MAP_FAILED outside of
	[HAVE_MMAP].

	* bits/stat.h: Fix inclusion guard to accept _FCNTL_H too.
	Add multiple inclusion protection.

2012-07-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-27  Gary Benson  <gbenson@redhat.com>

	[BZ #14298]
	* elf/rtld.c: Include <stap-probe.h>.
	(dl_main): Added static probes "init_start" and "init_complete".
	* elf/dl-load.c: Include <stap-probe.h>.
	(lose): Take new parameter "nsid".
	Added static probe "map_failed".
	(_dl_map_object_from_fd): Pass namespace id to lose.
	Added static probe "map_start".
	(open_verify): Pass namespace id to lose.
	* elf/dl-open.c: Include <stap-probe.h>.
	(dl_open_worker) Added static probes "map_complete", "reloc_start"
	and "reloc_complete".
	* elf/dl-close.c: Include <stap-probe.h>.
	(_dl_close_worker): Added static probes "unmap_start" and
	"unmap_complete".
	* elf/rtld-debugger-interface.txt: New file documenting the above.

2012-07-26  Roland McGrath  <roland@hack.frob.com>

	* sunrpc/rpc_hout.c (pdeclaration): Call f_print with a "%s" format
	rather than a string variable.
	* sunrpc/rpc_main.c (h_output): Likewise.
	* sunrpc/rpc_svcout.c (write_real_program): Likewise.

2012-07-26  Pino Toscano  <toscano.pino@tiscali.it>

	* inet/check_native.c: New file.

2012-07-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p or direct log1p calculation
	if larger part has absolute value 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* elf/tst-auditmod1.c (pltenter): Remove all definitions of macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	Update #error for removed macros to refer only to definitions in
	tst-audit.h.
	* elf/tst-auditmod3b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod4b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod5b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6c.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod7b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* sysdeps/generic/tst-audit.h: Update comment to refer only to
	macro definitions in tst-audit.h.
	* sysdeps/i386/tst-audit.h: New file.
	* sysdeps/powerpc/powerpc32/tst-audit.h: Likewise.
	* sysdeps/powerpc/powerpc64/tst-audit.h: Likewise.
	* sysdeps/s390/s390-32/tst-audit.h: Likewise.
	* sysdeps/s390/s390-64/tst-audit.h: Likewise.
	* sysdeps/sh/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc32/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc64/tst-audit.h: Likewise.
	* sysdeps/x86_64/tst-audit.h: Likewise.

2012-07-26  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Add __THROW for
	ptrace.

	* sysdeps/unix/sysv/linux/sys/ptrace.h (__ptrace_eventcodes): Add
	new value PTRACE_EVENT_SECCOMP from Linux 3.5.
	(__ptrace_setoptions): Add new value PTRACE_O_TRACESECCOMP, adjust
	PTRACE_O_MASK.
	* sysdeps/unix/sysv/linux/s390/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ptrace.h: Likewise.

	* sysdeps/unix/sysv/linux/sys/epoll.h (EPOLLWAKEUP): Add new
	value.

	* sysdeps/unix/sysv/linux/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new marcro.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (struct): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.21 where previously 2.4.1.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [(__powerpc__ ||
	__sh__) && !__powerpc64__] (__ASSUME_FCNTL64): Do not condition on
	Linux kernel version.
	(__ASSUME_STD_AUXV): Remove.
	[__powerpc__] (__ASSUME_VFORK_SYSCALL): Do not condition on Linux
	kernel version.
	[__powerpc__ && !__powerpc64] (__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_NEW_PRCTL_SYSCALL): Remove.
	(__ASSUME_FIXED_CLONE_SYSCALL): Likewise.
	(__ASSUME_NEW_RT_SIGRETURN_SYSCALL): Likewise.
	(__ASSUME_NETLINK_SUPPORT): Likewise.
	* nscd/gai.c [NEED_NETLINK && __ASSUME_NETLINK_SUPPORT == 0]
	(__no_netlink_support): Remove conditional definition.
	* sysdeps/unix/sysv/linux/check_pf.c (__no_netlink_support):
	Remove.
	(__check_pf) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_NETLINK_SUPPORT]
	(if_nameindex_ioctl): Remove.
	(if_nameindex_netlink): Do not handle __no_netlink_support.
	(if_nameindex) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/ifaddrs.c [!__ASSUME_NETLINK_SUPPORT]:
	Remove conditional code.
	(__netlink_open) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	(getifaddrs_internal) [__ASSUME_NETLINK_SUPPORT]: Make code
	unconditional.
	[!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT] (freeifaddrs): Make code unconditional.
	* sysdeps/unix/sysv/linux/netlinkaccess.h (__no_netlink_support):
	Remove.
	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c
	[!__ASSUME_STD_AUXV]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone)
	[!__ASSUME_FIXED_CLONE_SYSCALL]: Remove conditional code.
	[__ASSUME_FIXED_CLONE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_mask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_mask_handler): Remove.
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_nomask_handler): Remove.
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/getcontext.S
	(__novec_getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__makecontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S
	(__novec_setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S
	(__novec_swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.

2012-07-25  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/i386/accept4.S: Remove pseudo_end label.
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/epoll_pwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-07-25  Florian Weimer  <fweimer@redhat.com>

	* Versions.def: Add GLIBC_2.17.
	* stdlib/stdlib.h: Rename __secure_getenv to secure_getenv.
	* include/stdlib.h: Rename __secure_getenv to secure_getenv.
	Introduce __libc_secure_getenv.
	* stdlib/Versions (2.17): Add secure_getenv
	(GLIBC_PRIVATE): Add __libc_secure_getenv.
	* stdlib/secure-getenv.c: Rename __secure_getenv to
	__libc_secure_getenv.  Add secure_getenv alias.  Add compatibility
	symbol __secure_getenv for GLIBC_2.0.
	* stdlib/tst-secure-getenv.c: New.
	* stdlib/Makefile (tests): Add testcase.
	* manual/startup.texi (Environment Access): Document
	secure_getenv.
	* hesiod/hesiod.c (hesiod_init): Rename __secure_getenv to
	__libc_secure_getenv.
	* inet/ruserpass.c (ruserpass): Likewise.
	* malloc/mtrace.c (mtrace): Likewise.
	* sysdeps/mach/hurd/tmpfile.c (__tmpfile): Likewise.
	* sysdeps/posix/libc_fatal.c (__libc_fatal): Likewise.
	* sysdeps/posix/sysconf.c (__sysconf__check_spec): Likewise.
	* sysdeps/posix/tempname.c: Likewise.  Evaluate
	HAVE_SECURE_GETENV.
	* sysdeps/unix/sysv/linux/libc_fatal.c (__libc_message): Rename
	__secure_getenv to __libc_secure_getenv.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Add secure_getenv.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/ldsodefs.h (struct La_i86_regs): Remove.
	(struct La_i86_retval): Likewise.
	(struct La_x86_64_regs): Likewise.
	(struct La_x86_64_retval): Likewise.
	(struct La_x32_regs): Likewise.
	(struct La_x32_retval): Likewise.
	(struct La_ppc32_regs): Likewise.
	(struct La_ppc32_retval): Likewise.
	(struct La_ppc64_regs): Likewise.
	(struct La_ppc64_retval): Likewise.
	(struct La_sh_regs): Likewise.
	(struct La_sh_retval): Likewise.
	(struct La_s390_32_regs): Likewise.
	(struct La_s390_32_retval): Likewise.
	(struct La_s390_64_regs): Likewise.
	(struct La_s390_64_retval): Likewise.
	(struct La_sparc32_regs): Likewise.
	(struct La_sparc32_retval): Likewise.
	(struct La_sparc64_regs): Likewise.
	(struct La_sparc64_retval): Likewise.
	(struct audit_ifaces): Remove architecture-specific pltenter and
	pltexit members.
	* sysdeps/i386/ldsodefs.h: New file.
	* sysdeps/powerpc/ldsodefs.h: Likewise.
	* sysdeps/s390/ldsodefs.h: Likewise.
	* sysdeps/sh/ldsodefs.h: Likewise.
	* sysdeps/sparc/ldsodefs.h: Likewise.
	* sysdeps/x86_64/ldsodefs.h: Likewise.

2012-07-25  Marek Polacek  <polacek@redhat.com>

	[BZ #6808]
	* math/libm-test.inc (yn_test): Add another test.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_ynl): Set errno
	to ERANGE when the result is +-Inf.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_ynf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_yn): Likewise.

2012-07-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	(CLOCKS_PER_SEC): Use macro instead of constant.  Specify type as
	clock_t.
	[ISO11] (TIME_UTC): Use macro-int-constant.  Require value > 0.

2012-07-23  Thomas Schwinge  <thomas@codesourcery.com>

	* configure.in <sysdeps resolving>: Correct printing
	Implies_before.
	* configure: Regenerate.

2012-07-22  Thomas Schwinge  <thomas@codesourcery.com>

	* math/w_ilogb.c: Include <limits.h>.
	* math/w_ilogbl.c: Likewise.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (__va_copy): Document primarily as ISO C99
	va_copy.  Document allowing for unavailable va_copy only as
	pre-C99 compatibility.
	* manual/string.texi (Copying and Concatenation): Use va_copy
	instead of __va_copy in concat example.

2012-07-20  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/sendto.c (create_address_port): New subroutine.
	(__sendto): Use create_address_port.  Initialize APORT and deallocate
	it if not null.

	* sysdeps/mach/hurd/llistxattr.c: New file, copied from listxattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/lremovexattr.c: New file, copied from removexattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/getgroups.c: Return -1 and set EINVAL for
	negative N or less than NGIDS.

	* sysdeps/mach/hurd/getlogin_r.c: Make LOGIN non-static and change its
	type to string_t.  Set ERANGE as errno and return it if NAME is not big
	enough.  Use memcpy instead of strncpy.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile (check-data): Remove.
	(localplt.data): New vpath directive.
	($(objpfx)check-localplt.out): Use localplt.data from vpath
	instead of $(check-data).
	* scripts/data/localplt-generic.data: Move to ...
	* sysdeps/generic/localplt.data: ... here.
	* scripts/data/localplt-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/localplt.data: ... here.
	* scripts/data/localplt-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/localplt.data:
	... here.
	* scripts/data/localplt-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/localplt.data:
	... here.

2012-07-19 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/tls-macros.h: Split PowerPC definitions in
	PPC32 and PPC64 files.
	* sysdeps/powerpc/powerpc32/tls-macros.h: New file.
	* sysdeps/powerpc/powerpc64/tls-macros.h: Likewise.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile: Add
	__makecontext_ret.S.
	* sysdeps/unix/sysv/linux/s390/s390-64/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile: Add
	__makecontext_ret.S.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* elf/elf.h (R_390_IRELATIVE): New definition.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Invoke the
	resolver function for IFUNC symbols.  Support R_390_IRELATIVE.
	(elf_machine_lazy_rel): Support R_390_IRELATIVE.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela):
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/dl-irel.h: New file.
	* sysdeps/s390/s390-64/memcpy.S: New asm code.
	* sysdeps/s390/s390-64/memset.S: New asm code.
	* sysdeps/s390/s390-64/memcmp.S: New asm code.
	* sysdeps/s390/s390-64/multiarch/memset.S: New file.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-64/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-32/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-32/multiarch/memset.S: New file.
	* sysdeps/s390/s390-32/memcpy.S: New asm code.
	* sysdeps/s390/s390-32/memset.S: New asm code.
	* sysdeps/s390/s390-32/memcmp.S: New asm code.

2012-07-17  Marek Polacek  <polacek@redhat.com>

	[BZ #14349]
	* sysdeps/s390/s390-32/configure.in: Remove TLS check.
	* sysdeps/s390/s390-64/configure.in: Likewise.
	* sysdeps/sparc/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/configure.in: Likewise.
	* sysdeps/i386/configure.in: Likewise.
	* sysdeps/x86_64/configure.in: Likewise.
	* sysdeps/sh/configure.in: Likewise.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/sh/configure: Likewise.
	* sysdeps/powerpc/powerpc64/configure: Likewise.
	* sysdeps/powerpc/powerpc32/configure: Likewise.
	* sysdeps/sparc/configure: Likwise.
	* sysdeps/i386/configure: Likewise.

	* elf/dl-open.c: Comment fixes.

2012-07-17  Joseph Myers  <joseph@codesourcery.com>

	* Makefile [CXX] (check-data): Remove.
	[CXX] (c++-types.data): New vpath directive.
	[CXX] ($(objpfx)c++-types-check.out): Use c++-types.data from
	vpath.  Do not allow for C++ type data being missing.
	* scripts/data/c++-types-alpha-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/alpha/nptl/c++-types.data.
	* scripts/data/c++-types-ia64-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/ia64/nptl/c++-types.data.
	* scripts/data/c++-types-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/c++-types.data: ... here.
	* scripts/data/c++-types-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x32-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x86_64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/c++-types.data: ... here.

	* elf/tls-macros.h (TLS_LE): Move architecture-specific
	definitions to architecture-specific files.
	(TLS_IE): Likewise.
	(TLS_LD): Likewise.
	(TLS_GD): Likewise.
	* sysdeps/i386/tls-macros.h: New file.
	* sysdeps/powerpc/tls-macros.h: Likewise.
	* sysdeps/s390/s390-32/tls-macros.h: Likewise.
	* sysdeps/s390/s390-64/tls-macros.h: Likewise.
	* sysdeps/sh/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc32/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc64/tls-macros.h: Likewise.
	* sysdeps/x86_64/tls-macros.h: Likewise.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Preserve
	zero value for regular exit case.

	* sysdeps/unix/sysv/linux/x86_64/__start_context.S
	(__start_context): Preserve zero value for regular exit case.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>
	    Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* manual/setjmp.texi (setcontext): Clarify normal process
	termination when uc_link is the null pointer.
	* stdlib/tst-makecontext.c (cf): Exercise this: remove explicit
	exit call.

2012-07-16  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/bug-getcontext.c (do_test): Don't test FE_ALL_EXCEPT in
	preprocessor.  Test for each exception mask separately.

2012-07-16  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update from translation team.

2012-07-15  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/string.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	(wcs*): Change to wcs[abcdefghijklmnopqrstuvwxyz]*.
	(mem[abcdefghijklmnopqrstuvwxyz]*): Allow.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-07-13  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

2012-07-12  Marek Polacek  <polacek@redhat.com>

	[BZ #14173]
	* math/libm-test.inc (yn_test): Add test for BZ #14173.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Correct
	loop condition.

2012-07-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.1 where previously 2.4.0.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [!__sh__]
	(__ASSUME_ST_INO_64_BIT): Do not condition definition on kernel
	version.
	[__i386__ || __sparc__] (__ASSUME_FCNTL64): Likewise.
	(__ASSUME_AT_CLKTCK): Remove.
	(__ASSUME_AT_PAGESIZE): Likewise.
	(__ASSUME_AT_XID): Likewise.
	(__ASSUME_GETDENTS64_SYSCALL): Define unconditionally.
	[__i386__] (__ASSUME_VFORK_SYSCALL): Define unconditionally.
	* sysdeps/unix/sysv/linux/ldsodefs.h (HAVE_AUX_XID): Define
	unconditionally.
	(HAVE_AUX_PAGESIZE): Likewise.
	* sysdeps/unix/sysv/linux/prof-freq.c (__profile_frequency)
	[__ASSUME_AT_CLKTCK]: Make code unconditional.
	[!__ASSUME_AT_CLKTCK]: Remove conditional code.

2012-07-12  Jeroen van Bemmel  <jvb127@gmail.com>

	[BZ #14307]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Increase the size of
	the temporary buffer used to invoke __gethostbyname2_r,
	__gethostbyaddr_r and gethostbyname4_r to make room for struct
	host_data / struct gaih_addrtuple.
	* resolv/nss_dns/dns-host.c (global scope): Move definition of
	implementation constants MAX_NR_ALIASES and MAX_NR_ADDRS to
	header file nss/nsswitch.h.
	* nss/nsswitch.h (global scope): Add definition of implementation
	constants MAX_NR_ALIASES and MAX_NR_ADDRS (moved from
	resolv/nss_dns/dns-host.c).

2012-07-11  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

	* po/sv.po: Update from translation team
	* po/fr.po: Another update from translation team.

2012-07-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Do not call sinh and cosh
	for subnormals or multiply small sinh result by itself.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-07-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-10  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14347]
	* misc/sys/syslog.h (LOG_MAKEPRI): Don't shift first argument.
	(INTERNAL_MARK): Shift it here.

2012-07-10  Marek Polacek  <polacek@redhat.com>

	[BZ #14151]
	* configure.in (libc_cv_asm_global_directive): Remove test.  Replace
	libc_cv_asm_global_directive with .globl.
	* configure: Regenerated.
	* sysdeps/i386/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/x86_64/configure: Regenerated.
	* config.h.in: Do not undefine ASM_GLOBAL_DIRECTIVE.
	* include/libc-symbols.h: Replace ASM_GLOBAL_DIRECTIVE with .globl.
	* elf/tst-unique2mod2.c: Likewise.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave1.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprrest.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprsave.S: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest1.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave0.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest0.S: Likewise.
	* locale/localeinfo.h: Likewise.
	(_NL_CURRENT_DEFINE_STRINGIFY): Delete macro.
	(_NL_CURRENT_DEFINE_STRINGIFY_1): Likewise.

2012-07-09  Roland McGrath  <roland@hack.frob.com>

	[BZ #14336]
	* manual/charset.texi (Extended Char Intro): Word use fix, "operating
	system".
	* manual/message.texi (The Uniforum approach): Likewise.
	* manual/charset.texi (Extended Char Intro): Spelling fix, "affected".
	(glibc iconv Implementation): Likewise.

2012-07-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14337]
	* math/s_clog.c (__clog): Avoid scaling a value down where that
	could result in underflow.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14283]
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/ppc-mcount.S [SHARED]: Don't use PLT
	for call to __mcount_internal.
	* sysdeps/powerpc/powerpc32/Makefile (sysdep_routines)
	(shared-only-routines) [$(subdir) = gmon]: Add compat-ppc-mcount.
	* sysdeps/powerpc/powerpc32/compat-ppc-mcount.S: New file.

2012-07-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14154]
	* sysdeps/ieee754/flt-32/k_tanf.c (__kernel_tanf): Use linear
	approximation for values within 0x1p-13f of an odd multiple of
	pi/4.
	* math/libm-test.inc (tan_test): Do not allow spurious underflow
	exception.  Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #6778]
	* sysdeps/i386/fpu/s_expm1.S (__expm1): Check for large negative
	inputs and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/i386/fpu/s_expm1f.S (__expm1f): Likewise.
	* sysdeps/i386/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/x86_64/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not
	define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Mike Frysinger  <vapier@gentoo.org>

	* sunrpc/rpc_clntout.c: Change <rpc/types.h> to "rpc/types.h".

2012-07-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14157]
	[BZ #14331]
	* math/s_csqrt.c (__csqrt): Avoid multiplying by 0.5 where this
	could result in spurious underflow.  Scale down values above
	DBL_MAX / 4.0 instead of DBL_MAX / 2.0.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-04  Andreas Schwab  <schwab@linux-m68k.org>

	* catgets/Makefile ($(objpfx)de.msg): Use xopen-msg.awk instead of
	xopen-msg.sed.
	* catgets/xopen-msg.awk: New file.
	* catgets/xopen-msg.sed: Removed.

	* intl/Makefile ($(objpfx)msgs.h): Use po2test.awk instead of
	po2text.sed.
	* intl/po2test.awk: New file.
	* intl/po2test.sed: Removed.

2012-07-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14328]
	* math/s_ctan.c (__ctan): Do not call sinh and cosh for subnormals
	or multiply small sinh result by itself.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/libm-test.inc (ctan_test_tonearest): New function.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(main): Call these new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-03  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Delete /ports entry.

2012-07-03  Andreas Jaeger  <aj@suse.de>

	* po/bg.po: Update from translation team.
	* po/cs.po: Likewise.
	* po/de.po: Likewise.
	* po/hr.po: Likewise.
	* po/nl.pl: Likewise.
	* po/pl.po: Likewise.
	* po/vi.po: Likewise.

2012-07-03  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig [!+link] (+link-before-libc): New variable.
	[!+link] (+link-after-libc): Likewise.
	[!+link] (+link-tests): Likewise.
	[!+link] (+link): Define in terms of $(+link-before-libc) and
	$(+link-after-libc).
	[!+link-static] (+link-static-before-libc): New variable.
	[!+link-static] (+link-static-after-libc): Likewise.
	[!+link-static] (+link-static-tests): Likewise.
	[!+link-static] (+link-static): Define in terms of
	$(+link-static-before-libc) and $(+link-static-after-libc).
	[build-shared] (link-libc-before-gnulib): New variable.
	[build-shared] (link-libc-tests): Likewise.
	[build-shared] (link-libc): Define in terms of
	$(link-libc-before-gnulib).
	[!build-shared] (link-libc-tests): New variable.
	(link-libc-static-tests): New variable.
	[!gnulib] (gnulib-arch): New variable.
	[!gnulib] (gnulib-tests): Likewise.
	[!gnulib] (static-gnulib-arch): Likewise.
	[!gnulib] (static-gnulib-tests): Likewise.
	[!gnulib] (gnulib): Use $(gnulib-arch).  Do not use $(libgcc_eh).
	Define with "=" instead of ":=".
	[!gnulib] (static-gnulib): Use $(static-gnulib-arch).  Do not use
	-lgcc_eh $(libunwind).  Define with "=" instead of ":=".
	* Rules (binaries-all-notests): New variable.
	(binaries-all-tests): Likewise.
	(binaries-static-notests): Likewise.
	(binaries-static-tests): Likewise.
	(binaries-all): Define using $(binaries-all-notests) and
	$(binaries-all-tests).
	(binaries-static): Define using $(binaries-static-notests) and
	$(binaries-static-tests).
	(binaries-shared-tests): New variable.
	(binaries-shared-notests): Likewise.
	(binaries-shared): Remove variable.
	($(addprefix $(objpfx),$(binaries-shared-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-shared-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-shared))): Remove rule.
	($(addprefix $(objpfx),$(binaries-static-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-static-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-static))): Remove rule.
	* elf/Makefile (sln-modules): New variable.
	(extra-objs): Add $(sln-modules:=.o).
	(ldconfig-modules): Add static-stubs.
	($(objpfx)sln): Depend on $(sln-modules:%=$(objpfx)%.o).
	* elf/static-stubs.c: New file.

	[BZ #14283]
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.  Use volatile
	variables when splitting into final array of floats if
	__FLT_EVAL_METHOD__ != 0.
	* math/libm-test.inc (cos_test): Add another test.
	(sin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #14273]
	* math/libm-test.inc (cosh_test): Add more tests.

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.16.90".

2012-06-30  Carlos O'Donell  <carlos_odonell@mentor.com>

	* NEWS: Update copyright. Remove last-updated date.
	Mention math library bug fixes and timezone data changes.
	* README: Mention GNU/Hurd, x32, and HPPA support status.

2012-06-28  Thomas Schwinge  <thomas@codesourcery.com>

	* manual/contrib.texi (Contributors): Sort alphabetically by last name.

2012-06-27  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Add Samuel Thibault.

2012-06-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-06-23  Andreas Schwab  <schwab@linux-m68k.org>
	    Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/syscalls.list: Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/Versions (GLIBC_2.16): Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist (GLIBC_2.16): Add
	fanotify_mark.

2012-06-23  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/start.c: Remove file.
	* sysdeps/mach/hurd/i386/static-start.S: Fix start.S include.
	* sysdeps/i386/init-first.c: Fix comment regarding start.S.
	* sysdeps/sh/init-first.c: Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Preserve r12 and pr
	registers for frame unwinding purposes, add CFI directives.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Likewise
	* sysdeps/unix/sysv/linux/sh/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Don't plan for the call to
	__fortify_fail returning.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.

	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S: New file, based on
	sysdeps/sh/____longjmp_chk.S.
	* sysdeps/unix/sysv/linux/sh/sigaltstack-offsets.sym: New file, based
	on sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/sh/Makefile [subdir=misc]
	(gen-as-const-headers): Append sigaltstack-offsets.sym.

	* sysdeps/sh/abort-instr.h: New file.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Terminate the
	process in case exit returns.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Always
	initialize the GOT register before use.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (__makecontext): Fix
	calculation of ARGC > 4.

	* sysdeps/unix/sysv/linux/sh/makecontext.S: Add comments and give more
	meaningful names to some local labels.

2012-06-22  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>
	    Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h
	(__arch_compare_and_exchange_val_8_acq): Remove explicit nop.
	(__arch_compare_and_exchange_val_16_acq): Likewise.
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(atomic_exchange_and_add): Fix gUSA sequence.
	(atomic_add): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.
	(atomic_bit_test_set): Likewise.

2012-06-22  Andreas Schwab  <schwab@redhat.com>

	[BZ #13579]
	* include/link.h (struct link_map): Add l_free_initfini.
	* elf/dl-deps.c (_dl_map_object_deps): Set it when assigning
	l_initfini.
	* elf/dl-close.c (_dl_close_worker): Don't free l_initfini.
	* elf/rtld.c (dl_main): Clear it on all objects loaded on startup.
	* elf/dl-libc.c (free_mem): Free l_initfini if l_free_initfini is
	set.

2012-06-22  Carlos O'Donell  <carlos_odonell@mentor.com>

	* configure.in: Use AC_LANG_SOURCE.
	* configure: Regenerate.

2012-06-22  Roland McGrath  <roland@hack.frob.com>

	* configure.in (libc_cv_localstatedir): New substituted variable.
	* configure: Regenerated.
	* config.make.in (localstatedir): New variable, substituted from
	libc_cv_localstatedir.
	* Makeconfig (vardbdir): Use $(localstatedir) in place of /var.
	* sysdeps/gnu/configure.in (libc_cv_localstatedir): Change
	${prefix}/var to /var when we change ${prefix}/etc to /etc.
	* sysdeps/gnu/configure: Regenerated.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #14277]
	* intl/dcigettext.c (_nl_find_msg): Avoid use after potential
	free.  Simplify list management for _LIBC case.

2012-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14273]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c (__ieee754_cosh):
	Clear sign bit of 64-bit integer value before comparing against
	overflow value.

	* sysdeps/mach/configure: Regenerated.

2012-06-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14278]
	* sysdeps/i386/sysdep.h (SYSCALL_PIC_SETUP): Fix a typo.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #13882]
	* elf/dl-deps.c (_dl_map_object_deps): Fix cycle detection.  Use
	uint16_t for elements in the "seen" array to avoid char overflows.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.
	* elf/dl-open.c (dl_open_worker): Likewise.

2012-06-21  Carlos O'Donell  <carlos_odonell@mentor.com>

	* scripts/list-sources.sh: Scan PORTS for translations.
	* po/libc.pot: Regenerated.

2012-06-21  Andreas Jaeger  <aj@suse.de>

	[BZ #12194]
	* sysdeps/s390/bits/byteswap-16.h (__bswap_16): Avoid -Wconversion
	warning.
	* sysdeps/s390/bits/byteswap.h (__bswap_constant_16): Likewise.
	* bits/byteswap-16.h (__bswap_16): Likewise.
	* bits/byteswap.h (__bswap_constant_16): Likewise.

2012-06-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu_control.h: Removed.
	* sysdeps/x86_64/fpu_control.h: Moved to ...
	* sysdeps/x86/fpu_control.h: Here.

	* sysdeps/x86_64/fpu_control.h (_FPU_GETCW): Add __volatile__.
	(_FPU_SETCW): Likewise.

2012-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Renamed to ...
	* sysdeps/x86/fpu/bits/mathinline.h: This.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Removed.

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Disable x87 inline
	functions if __x86_64__ is defined.

2012-06-15  Chung-Lin Tang  <cltang@codesourcery.com>

	* string/endian.h: Add !__ASSEMBLER__ condition for including
	conversion interfaces.

2012-06-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14241]
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use 0.0 instead
	of ABS(x) in calculating zero to negative powers other than odd
	integers.
	* math/libm-test.inc (pow_test): Add more tests.

2012-06-15  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Update entry of Liubov
	Dmitrieva and add entries for Will Schmidt and Tulio Magno Quites
	Machado Filho.

2012-06-15  Cyril Hrubis  <metan@ucw.cz>

	* string/string.h: Add __wur to GNU version of strerror_r.

2012-06-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14229]
	* string/Makefile (tests): Add tst-strtok_r.
	* string/tst-strtok_r.c: New file.
	* sysdeps/x86_64/strtok.S: Use LP_SIZE on save_ptr and use
	RAX_LP/RDX_LP on SAVE_PTR.

2012-06-14  Roland McGrath  <roland@hack.frob.com>

	* manual/Makefile ($(objpfx)texis): Do $(make-target-directory).

2012-06-14  Joseph Myers  <joseph@codesourcery.com>

	* libm_test.inc (csqrt_test): Allow more spurious underflow
	exceptions.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.

2012-06-13  Carlos O'Donell  <carlos_odonell@mentor.com>

	* po/Makefile (libc.pot): Use UTF-8 charset.

2012-06-13  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14210]
	Suppress sign-conversion warning from FD_SET.
	See <http://sourceware.org/ml/libc-alpha/2012-05/msg01794.html>.
	* debug/fdelt_chk.c (__fdelt_chk): Accept and return long int,
	not unsigned long int.
	* misc/bits/select2.h (__fdelt_chk, __fdelt_warn, __FD_ELT): Likewise.

2012-06-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h (__MATH_INLINE): Check
	__extern_always_inline instead of __extern_inline.
	(__signbitf): Support __SSE2_MATH__ and C++ namespace.
	(__signbit): Likewise.
	(__signbitl): Support C++ namespace.
	(lrintf): New inline function.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-06-12  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Fix case for
	non-default versions.

2012-06-11  Roland McGrath  <roland@hack.frob.com>

	[BZ #14218]
	* manual/argp.texi (Argp): Reword argp_parse description slightly.

2012-06-09  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/bits/fenv.h (__FE_UNDEFINED): Define.
	(FE_UPWARD, FE_DOWNWARD): Don't define.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Adapt to that.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Do not re-write fpscr after
	reading it.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-06-09  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: Refreshed.

2012-06-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/fenv.h: Removed.
	* sysdeps/i386/fpu/Implies: New file.
	* sysdeps/x86_64/fpu/Implies: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Renamed to ...
	* sysdeps/x86/fpu/bits/fenv.h: This.

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Check
	__SSE_MATH__.

2012-06-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14134]
	* iconvdata/ibm930.c (BODY) [FROM_LOOP]: Check for invalid
	character 0xffff that matches the last element of the
	conversion table.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Fix for wrong ldbl128-ibm
	fmodl commit.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Fix spurious underflow for
	values higher than 25.6283.

2012-06-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Fix
	subnormal exponent extraction and add some __builtin_expect.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_extract_mantissa):
	Fix for subnormal mantissa calculation.

2012-06-04  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-getcpu.c (do_test): Call perror when
	cpu2 is -1 and errno is not ENOSYS.

2012-06-04  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/i486/bits/string.h: Renamed to ...
	* sysdeps/x86/bits/string.h: This.
	* sysdeps/x86_64/bits/string.h: Removed.

	* sysdeps/i386/i486/bits/string.h: Define inline functions only
	if not compiling for x86-64, but compiling for >= i486.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sigcontext.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h (FP_XSTATE_MAGIC1):
	New macro from Linux kernel 3.4.0.
	(FP_XSTATE_MAGIC2): Likewise.
	(FP_XSTATE_MAGIC2_SIZE): Likewise.
	(X86_FXSR_MAGIC): New macro from Linux i386 kernel.
	(struct _fpx_sw_bytes): New struct.
	(struct _xsave_hdr): Likewise.
	(struct _ymmh_state): Likewise.
	(struct _xstate): Likewise.

	* sysdeps/unix/sysv/linux/i386/sys/debugreg.h: Removed.
	* sysdeps/unix/sysv/linux/i386/sys/reg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/debugreg.h: This.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/reg.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/io.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/io.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/io.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/perm.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/perm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/perm.h: This.

2012-06-04  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13743]
	* sysdeps/powerpc/sys/platform/ppc.h: New file for PowerPC features.
	* sysdeps/powerpc/Makefile (tests): Add test-gettimebase.
	(sysdep_headers): Include sys/platform/ppc.h.
	* sysdeps/powerpc/test-gettimebase.c: Test for
	__ppc_get_timebase() to catch future ISA opcode/insn changes.
	* manual/Makefile (appendices): Include platform.texi.
	* manual/contrib.texi (Contributors): Update @node pointers.
	* manual/maint.texi (Maintenance): Likewise.
	(Platform): New node.
	* manual/platform.texi: New file.  Document the new features.

2012-06-04  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	[BZ #14188]
	* misc/sys/cdefs.h (__glibc_unlikely): New macro to wrap cases
	where __builtin_expect is unavailable.

2012-06-03  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-02  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/mcount.c: New file.
	* sysdeps/powerpc/powerpc32/Versions (GLIBC_2.16): Add
	__mcount_internal.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.16): Likewise.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (outsw): Fix a typo.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	(default-abi): New variable.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Makefile: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile (default-abi): New
	variable.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile (default-abi):
	Likewise.

	* Makeconfig [abi-variants && !default-abi] (default-abi): Remove
	definition.  Document in comment.

2012-06-01  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/Makefile (sysdep_headers):
	Don't add sys/elf.h sys/perm.h sys/reg.h sys/vm86.h
	sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/x86/Makefile (sysdep_headers): Add
	sys/elf.h sys/perm.h sys/reg.h sys/vm86.h sys/debugreg.h
	sys/io.h.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (sysdep_headers):
	Don't add sys/perm.h sys/reg.h sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/elf.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/vm86.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h (DR_LEN_8):
	Define only if __x86_64__ is defined.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14048]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c (__ieee754_fmod):
	Use int64_t for variable i.
	* math/libm-test.inc (fmod_test): Add more tests.

	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Ensure temp + (double)
	z computation is not scheduled after fetestexcept.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <math_private.h>.
	Use math_force_eval instead of asm to ensure calculation scheduled
	before exception test.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <math_private.h>.
	Ensure a1 + u.d computation is not scheduled after fetestexcept.

2012-06-01  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/wchar.h: This.

2012-06-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/k_cosf.c: Fix underflow generation.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Include
	<bits/wordsize.h>.
	(__WCHAR_MIN): Support __WORDSIZE == 64.
	(__WCHAR_MAX): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h: This.

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__FSWORD_T_TYPE):
	Defined with __SWORD_TYPE if __x86_64__ isn't defined.

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/stat.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_KERNEL):
	Defined to 1 if __x86_64__ isn't defined.
	(_STAT_VER_LINUX_OLD): New.
	(st_atime): Remove duplicate.
	(st_mtime): Likewise.
	(st_ctime): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Remove sqrt(2) and sqrt test
	entries.

2012-06-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Sort through
	gen-libm-test.pl.

	[BZ #14132]
	* elf/dl-reloc.c: Include <_itoa.h>.
	(_dl_reloc_bad_type): Remove use of INTUSE.
	* elf/dl-minimal.c (_itoa, _itoa_lower_digits): Likewise.
	* stdio-common/_itoa.c (_itoa_word, _itoa): Likewise.
	* stdio-common/psiginfo.c (psiginfo): Likewise.
	* stdio-common/psignal.c (psignal): Likewise.
	* string/strsignal.c (strsignal): Likewise.
	* include/signal.h (_sys_siglist): Declare hidden proto.
	* stdio-common/itoa-digits.c: Include <_itoa.h>.  Replace
	INTVARDEF with libc_hidden_data_def.
	* stdio-common/itoa-udigits.c: Likewise.
	* sysdeps/generic/_itoa.h (_itoa_upper_digits_internal)
	(_itoa_lower_digits_internal): Remove declaration.
	(_itoa_upper_digits, _itoa_lower_digits): Declare hidden proto.
	* sysdeps/gnu/siglist.c (_sys_siglist_internal)
	(_sys_sigabbrev_internal): Remove aliases.
	(_sys_siglist): Define hidden alias.

2012-05-31  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/sysctl.h.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sysctl.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/user.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/user.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/procfs.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (insb): Replace addr
	with __addr.
	(insw): Likewise.
	(insl): Likewise.
	(outsb): Likewise.
	(outsw): Likewise.
	(outsl): Likewise.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/msq.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sem.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/shm.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/ipctypes.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/epoll.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/environments.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/environments.h: Renamed
	to ...
	* sysdeps/unix/sysv/linux/x86/bits/environments.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/a.out.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/a.out.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Error when compiling
	for x86-64.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Likewise.

2012-05-31  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h (M_El): Use two more decimal places.
	(M_LOG2El): Likewise.
	(M_LOG10El): Likewise.
	(M_LN2l): Likewise.
	(M_LN10l): Likewise.
	(M_PIl): Likewise.
	(M_PI_2l): Likewise.
	(M_PI_4l): Likewise.
	(M_1_PIl): Likewise.
	(M_2_PIl): Likewise.
	(M_2_SQRTPIl): Likewise.
	(M_SQRT2l): Likewise.
	(M_SQRT1_2l): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcpy.S: Use fsrc2 to move 64-bit
	values between float registers.
	* sysdeps/sparc/sparc64/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.

2012-05-31  Mike Frysinger  <vapier@gentoo.org>

	* debug/Makefile (CFLAGS-tst-longjmp_chk.c): Delete
	-D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk.c): Define.
	(CFLAGS-tst-longjmp_chk2.c): Delete -D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk2.c): Define.
	* wcsmbs/Makefile (CPPFLAGS-tst-wchar-h.c): Rename from
	CFLAGS-tst-wchar-h.c.

2012-05-31  Marek Polacek  <polacek@redhat.com>

	[BZ #14132]
	* include/mntent.h (__setmntent_internal, __getmntent_r_internal
	__endmntent_internal): Remove declaration.
	(__setmntent, __endmntent, __getmntent_r) [NOT_IN_libc]: Remove macro.
	(__setmntent, __endmntent, __getmntent_r): Declare hidden proto.
	* misc/mntent_r.c: Replace INTDEF with libc_hidden_def.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c
	(___Q_simulate_exceptions): Use real FP ops rather than writing
	into the %fsr.
	* sysdeps/sparc/sparc32/soft-fp/q_util.c (__Qp_handle_exceptions):
	Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/x86_64/bits/xtitypes.h: Renamed to ...
	* sysdeps/x86/bits/xtitypes.h: This.

	* sysdeps/x86_64/bits/wordsize.h: Renamed to ...
	* sysdeps/x86/bits/wordsize.h: This.

	* sysdeps/i386/bits/huge_vall.h: Renamed to ...
	* sysdeps/x86/bits/huge_vall.h: This.

	* sysdeps/i386/bits/select.h: Removed.
	* sysdeps/x86_64/bits/select.h: Renamed to ...
	* sysdeps/x86/bits/select.h: This.

	* sysdeps/i386/bits/setjmp.h: Removed.
	* sysdeps/x86_64/bits/setjmp.h: Renamed to ...
	* sysdeps/x86/bits/setjmp.h: This.

	* sysdeps/i386/bits/mathdef.h: Removed.
	* sysdeps/x86_64/bits/mathdef.h: Renamed to ...
	* sysdeps/x86/bits/mathdef.h: This.

2012-05-30  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* include/sys/socket.h (__connect_internal)
	(__libc_sa_len_internal): Remove declaration.
	(__connect, __libc_sa_len): Declare hidden_proto.
	(SA_LEN): Remove use of INTUSE.
	* socket/connect.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/connect.c: Replace INTDEF by libc_hidden_def.
	* sysdeps/unix/sysv/linux/sa_len.c: Likewise.
	* sysdeps/unix/inet/syscalls.list: Remove __connect_internal
	alias.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Use libc_hidden_weak instead
	of adding _internal alias.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/bits/link.h: Removed.
	* sysdeps/i386/bits/linkmap.h: Likewise.
	* sysdeps/x86_64/bits/link.h: Renamed to ...
	* sysdeps/x86/bits/link.h: This.
	* sysdeps/x86_64/bits/linkmap.h: Renamed to ...
	* sysdeps/x86/bits/linkmap.h: This.

	* sysdeps/i386/bits/endian.h: Removed.
	* sysdeps/x86_64/bits/endian.h: Renamed to ...
	* sysdeps/x86/bits/endian.h: This.

	* sysdeps/i386/bits/byteswap.h: Removed.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Renamed to ...
	* sysdeps/x86/bits/byteswap.h: This.
	* sysdeps/x86_64/bits/byteswap-16.h: Renamed to ...
	* sysdeps/x86/bits/byteswap-16.h: This.
	* sysdeps/i386/Implies: Add x86.
	* sysdeps/x86_64/Implies: Likewise.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* soft-fp/soft-fp.h (FP_CUR_EXCEPTIONS): Define.
	(FP_TRAPPING_EXCEPTIONS): Provide default implementation.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Signal underflow for
	subnormals only when inexact has been signalled or underflow
	exceptions are enabled.
	(_FP_PACK_CANONICAL): Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__NLINK_T_TYPE):
	Defined with __UWORD_TYPE if __x86_64__ isn't defined.

2012-05-30  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/make-syscalls.sh: Protect symbol_version output
	with #ifndef NOT_IN_libc.

	* scripts/abilist.awk: Accept 8 fields.  Handle Alpha functions
	marked to avoid plt entry.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14112]
	* Makeconfig (default-abi): New macro.
	(abi-includes): Likewise.
	($(common-objpfx)soversions.mk): Remove WORDSIZE check.  Use
	$(abi-$(default-abi)-lib-soname) for soname if defined.
	($(common-objpfx)gnu/lib-names.stmp): Generate from
	abi-variants.
	* Makefile (installed-stubs): Likewise.
	* include/stubs-biarch.h: Removed.
	* scripts/lib-names.awk: Only handle one library at a time.
	* scripts/soversions.awk: Remove WORDSIZE support.
	* shlib-versions: Remove WORDSIZE and i.86/s390x/powerpc64 ld
	entries.
	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-default-condition): Likewise.
	(syscall-list-default-condition): Likewise.
	(syscall-list-includes): Likewise.
	($(objpfx)bits/syscall%h $(objpfx)bits/syscall%d): Replace
	syscall-list-* with abi-*.  Handle undefined abi-variants.
	* sysdeps/unix/sysv/linux/i386/Makefile (default-abi): New macro.
	* sysdeps/unix/sysv/linux/i386/Implies: New file.
	* sysdeps/unix/sysv/linux/x86/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/Implies: Add unix/sysv/linux/x86.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-32-options): Likewise.
	(syscall-list-32-condition): Likewise.
	(syscall-list-64-options): Likewise.
	(syscall-list-64-condition): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (default-abi): New
	macro.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	(abi-64-ld-soname): New macro.
	* sysdeps/unix/sysv/linux/s390/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/sparc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	* sysdeps/x86_64/64/shlib-versions: Remove ld entry.
	* sysdeps/x86_64/x32/shlib-versions: Likewise.

2012-05-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_TRUNCATE64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.

	* configure.in (libc_cv_fpie): Weaken to a compile test using
	LIBC_TRY_CC_OPTION.
	* configure: Regenerated.

2012-05-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Refreshed.

2012-05-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c (___Q_numbers): Delete.
	(___Q_zero): New.
	(__Q_simulate_exceptions): Return void.  Change to simulate
	exceptions by writing into the %fsr.
	* sysdeps/sparc/sparc64/soft-fp/qp_util.c
	(__Qp_handle_exceptions): Likewise.
	(numbers): Delete.
	* sysdeps/sparc/sparc64/soft-fp/Versions: Remove entry for
	__Qp_handle_exceptions.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Remove
	__Qp_handle_exceptions.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(FP_INHIBIT_RESULTS): Define.
	(___Q_simulate_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS): Use ___Q_zero and tidy inline asm
	formatting.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(__Qp_handle_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS, QP_NO_EXCEPTIONS): Tidy inline asm
	formatting.

2012-05-27  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Use fpu_control_t for
	the temporary FPU control word.
	* sysdeps/sh/sh4/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-05-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Restore fpscr flag
	fields.

2012-05-27  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/_mcount.S (_mount): Add CFI directives.
	* sysdeps/unix/sh/sysdep.S (__syscall_error): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/swapcontext.S (__swapcontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/swapcontext.S (__swapcontext):
	Likewise.

2012-05-27  Ulrich Drepper  <drepper@gmail.com>

	* po/h.po: Update from translation team.

2012-05-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-irel.h: Include <ldsodefs.h>.

	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Optimize
	handling of denormals.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logbf): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c (_logb): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c (_logbl):
	Likewise.

2012-05-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14152]
	* math/libm-test.inc (fma_test): Don't always expect underflow
	exception.

2012-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12416]
	* elf/tst-execstack.c: Include stackinfo.h.
	(do_test): Adjust test case to ensure that pthread_getattr_np
	behaviour remains the same after marking stack executable.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.

2012-05-25  H.J. Lu  <hongjiu.lu@intel.com>

	* configure.in: Define the default includes to being none.
	* configure: Regenerated.

2012-05-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/__longjmp.S: Add a static probe here.
	* sysdeps/x86_64/setjmp.S: Likewise.
	* sysdeps/i386/bsd-setjmp.S: Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/i386/__longjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S: Likewise.

	* include/stap-probe.h: New file.
	* configure.in: Handle --enable-systemtap.
	* configure: Regenerated.
	* config.h.in (USE_STAP_PROBE): New #undef.
	* extra-lib.mk (CPPFLAGS-$(lib)): Add -DIN_LIB=$(lib).
	* elf/Makefile (CPPFLAGS-.os): Add -DIN_LIB=rtld.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.4.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat)
	[__ASSUME_32BITUIDS]: Make code unconditional.
	(fchownat) [!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getegid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid] (__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid] (__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SETRESUID_SYSCALL): Remove.
	(__ASSUME_SETRESGID_SYSCALL): Likewise.
	(__ASSUME_32BITUIDS): Likewise.
	(__ASSUME_LDT_WORKS): Likewise.
	(__ASSUME_O_DIRECTORY): Likewise.
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Define conditional on
	architecture but not kernel version.
	(__ASSUME_TRUNCATE64_SYSCALL): Likewise.
	(__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_STAT64_SYSCALL): Likewise.
	(__ASSUME_IPC64): Likewise.
	* sysdeps/unix/sysv/linux/local-setxid.h: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/opendir.c: Do not include
	<kernel-features.h>.
	[__ASSUME_O_DIRECTORY]: Make code unconditional.
	* sysdeps/unix/sysv/linux/opensock.c [__LINUX_KERNEL_VERSION <
	132096]: Remove conditional code.
	[__LINUX_KERNEL_VERSION >= 132096]: Make code unconditional.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid || __ASSUME_SETRESGID_SYSCALL]: Make code
	unconditional.
	(__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid || __ASSUME_SETRESUID_SYSCALL]: Make code
	unconditional.
	(__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sh/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.

2012-05-25  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/powerpc32/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela): Use
	elf_ifunc_invoke.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc64/dl-machine.h (resolve_ifunc): Likewise.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14153]
	* sysdeps/ieee754/flt-32/e_acosf.c (__ieee754_acosf): Return pi/2
	for |x| <= 2**-26, not 2**-57.
	* math/libm-test.inc (acos_test): Do not allow spurious underflow
	exception.

2012-05-24  Jeff Law  <law@redhat.com>

	* stdio-common/Makefile (tests): Add bug25.
	* stdio-common/bug25.c: New test.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13576]
	* malloc/malloc.c (sYSMALLOc): Free the old top chunk with a
	multiple of MALLOC_ALIGNMENT in size.
	(_int_free): Check chunk size is a multiple of MALLOC_ALIGNMENT.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/stdio.h-data (BUFSIZ): Use macro-int-constant.
	Require >= 256.
	(FILENAME_MAX): Use macro-int-constant.
	(FOPEN_MAX): Use macro-int-constant.  Require >= 8.
	(_IOFBF): Use macro-int-constant.
	(_IOLBF): Likewise.
	(_IONBF): Likewise.
	(SEEK_CUR): Likewise.
	(SEEK_END): Likewise.
	(SEEK_SET): Likewise.
	(TMP_MAX): Likewise.
	(EOF): Use macro-int-constant.  Require < 0.
	(NULL): Use macro-constant.  Require == 0.
	(stdin): Require type to be FILE *.
	(stdout): Likewise.
	(stderr): Likewise.
	* conform/data/stdlib.h-data (EXIT_FAILURE): Use
	macro-int-constant.
	(EXIT_SUCCESS): Likewise.
	(NULL): Use macro-constant.  Require == 0.
	(RAND_MAX): Use macro-int-constant.
	[ISO99 || ISO11] (lldiv_t): Require also for these standards.
	[C99-based standards] (strtof): Require function.
	[C99-based standards] (strtold): Likewise.
	[C99-based standards] (strtoll): Likewise.
	[C99-based standards] (strtoull): Likewise.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	[ISO || ISO99 || ISO11] (limits.h): Likewise.
	[ISO || ISO99 || ISO11] (math.h): Likewise.
	[ISO || ISO99 || ISO11] (sys/wait.h): Likewise.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-05-24  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* argp/argp-help.c (dgettext) [_LIBC]: Remove use of INTUSE.
	* argp/argp-parse.c (dgettext) [_LIBC]: Likewise.
	* intl/dgettext.c (DCGETTEXT): Likewise.
	* intl/gettext.c (DCGETTEXT): Likewise.
	* intl/l10nflist.c (__argz_count, __argz_stringify): Likewise.
	* posix/regex_internal.h (gettext): Likewise.
	* include/libintl.h (__dcgettext_internal, __dcngettext_internal):
	Remove declaration.
	* include/argz.h (__argz_count_internal)
	(__argz_stringify_internal): Remove declaration.
	(__argz_count, __argz_stringify): Declare hidden proto.
	* intl/dcgettext.c: Remove use of INTDEF.
	* string/argz-count.c: Replace INTDEF with libc_hidden_def.
	* string/argz-stringify.c: Likewise.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/stdio.h (__asprintf_internal): Don't declare.
	(__asprintf): Don't define as macro.  Declare hidden proto.
	* include/stdio_ext.h (__fsetlocking_internal): Don't declare.
	(__fsetlocking): Declare hidden proto.
	* libio/iolibio.h (_IO_fdopen, _IO_fflush, _IO_ftell, _IO_fread)
	(_IO_fwrite, _IO_setbuffer, _IO_setvbuf, _IO_vsprintf): Declare
	hidden proto.
	(_IO_vprintf, _IO_freopen, _IO_freopen64, _IO_setbuf)
	(_IO_setlinebuf): Remove use of INTUSE.
	(_IO_setbuffer_internal, _IO_fread_internal, _IO_fdopen_internal)
	(_IO_vsprintf_internal, _IO_fflush_internal, _IO_fwrite_internal)
	(_IO_ftell_internal, _IO_fputs_internal, _IO_setvbuf_internal):
	Remove declaration.
	* libio/libioP.h (INTUSE, INTDEF, INTDEF2): Don't define.
	(_IO_do_flush): Remove use of INTUSE.
	(_IO_switch_to_get_mode, _IO_init, _IO_sputbackc, _IO_un_link)
	(_IO_link_in, _IO_doallocbuf, _IO_unsave_markers, _IO_setb)
	(_IO_adjust_column, _IO_least_wmarker)
	(_IO_switch_to_main_wget_area, _IO_switch_to_wbackup_area)
	(_IO_switch_to_wget_mode, _IO_wsetb, _IO_sputbackwc)
	(_IO_wdoallocbuf, _IO_default_uflow, _IO_wdefault_uflow)
	(_IO_default_doallocate, _IO_wdefault_doallocate)
	(_IO_default_finish, _IO_wdefault_finish, _IO_default_pbackfail)
	(_IO_wdefault_pbackfail, _IO_default_xsputn, _IO_wdefault_xsputn)
	(_IO_default_xsgetn, _IO_wdefault_xsgetn, _IO_do_write)
	(_IO_wdo_write, _IO_flush_all, _IO_flush_all_linebuffered)
	(_IO_file_doallocate, _IO_file_setbuf, _IO_file_seekoff)
	(_IO_file_xsputn, _IO_file_xsgetn, _IO_file_stat, _IO_file_close)
	(_IO_file_underflow, _IO_file_overflow, _IO_file_init)
	(_IO_file_attach, _IO_file_fopen, _IO_file_read, _IO_file_sync)
	(_IO_file_close_it, _IO_file_seek, _IO_file_finish)
	(_IO_wfile_xsputn, _IO_wfile_sync, _IO_wfile_underflow)
	(_IO_wfile_overflow, _IO_wfile_seekoff, _IO_str_underflow)
	(_IO_str_overflow, _IO_str_pbackfail, _IO_str_seekoff)
	(_IO_getline, _IO_getline_info, _IO_list_all): Declare hidden
	proto.
	(_IO_flush_all_internal, _IO_adjust_column_internal)
	(_IO_default_uflow_internal, _IO_default_finish_internal)
	(_IO_default_pbackfail_internal, _IO_default_xsputn_internal)
	(_IO_default_xsgetn_internal, _IO_default_doallocate_internal)
	(_IO_wdefault_finish_internal, _IO_wdefault_pbackfail_internal)
	(_IO_wdefault_xsputn_internal, _IO_wdefault_xsgetn_internal)
	(_IO_wdefault_doallocate_internal, _IO_wdefault_uflow_internal)
	(_IO_file_doallocate_internal, _IO_file_setbuf_internal)
	(_IO_file_seekoff_internal, _IO_file_xsputn_internal)
	(_IO_file_xsgetn_internal, _IO_file_stat_internal)
	(_IO_file_close_internal, _IO_file_close_it_internal)
	(_IO_file_underflow_internal, _IO_file_overflow_internal)
	(_IO_file_init_internal, _IO_file_attach_internal)
	(_IO_file_fopen_internal, _IO_file_read_internal)
	(_IO_file_sync_internal, _IO_file_seek_internal)
	(_IO_file_finish_internal, _IO_wfile_xsputn_internal)
	(_IO_wfile_seekoff_internal, _IO_wfile_sync_internal)
	(_IO_str_underflow_internal, _IO_str_overflow_internal)
	(_IO_str_pbackfail_internal, _IO_str_seekoff_internal)
	(_IO_file_jumps_internal, _IO_wfile_jumps_internal)
	(_IO_list_all_internal, _IO_link_in_internal)
	(_IO_sputbackc_internal, _IO_wdoallocbuf_internal)
	(_IO_sgetn_internal, _IO_flush_all_linebuffered_internal)
	(_IO_switch_to_wget_mode_internal, _IO_unsave_markers_internal)
	(_IO_switch_to_main_wget_area_internal, _IO_wdo_write_internal)
	(_IO_do_write_internal, _IO_padn_internal)
	(_IO_getline_info_internal, _IO_getline_internal)
	(_IO_free_wbackup_area_internal, _IO_free_backup_area_internal)
	(_IO_switch_to_wbackup_area_internal, _IO_setb_internal)
	(_IO_sputbackwc_internal, _IO_switch_to_get_mode_internal)
	(_IO_vfscanf_internal, _IO_vfprintf_internal)
	(_IO_doallocbuf_internal, _IO_wsetb_internal, _IO_putc_internal)
	(_IO_init_internal, _IO_un_link_internal): Don't declare.
	* libio/fileops.c: Replace INTDEF with libc_hidden_def and INTDEF2
	with libc_hidden_ver, remove use of INTUSE.
	* libio/genops.c: Likewise.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofflush.c: Likewise.
	* libio/iofflush_u.c: Likewise.
	* libio/iofgets.c: Likewise.
	* libio/iofgets_u.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopncook.c: Likewise.
	* libio/iofread.c: Likewise.
	* libio/iofread_u.c: Likewise.
	* libio/ioftell.c: Likewise.
	* libio/iofwrite.c: Likewise.
	* libio/iogetline.c: Likewise.
	* libio/iogets.c: Likewise.
	* libio/iogetwline.c: Likewise.
	* libio/iopadn.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/ioseekoff.c: Likewise.
	* libio/ioseekpos.c: Likewise.
	* libio/iosetbuffer.c: Likewise.
	* libio/iosetvbuf.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/ioungetwc.c: Likewise.
	* libio/iovdprintf.c: Likewise.
	* libio/iovsprintf.c: Likewise.
	* libio/iovsscanf.c: Likewise.
	* libio/memstream.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/oldstdfiles.c: Likewise.
	* libio/putc.c: Likewise.
	* libio/setbuf.c: Likewise.
	* libio/setlinebuf.c: Likewise.
	* libio/stdfiles.c: Likewise.
	* libio/strops.c: Likewise.
	* libio/vasprintf.c: Likewise.
	* libio/vscanf.c: Likewise.
	* libio/vsnprintf.c: Likewise.
	* libio/vswprintf.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wfileops.c: Likewise.
	* libio/wgenops.c: Likewise.
	* libio/wmemstream.c: Likewise.
	* libio/wstrops.c: Likewise.
	* libio/__fpurge.c: Likewise.
	* libio/__fsetlocking.c: Likewise.
	* assert/assert.c: Likewise.
	* debug/fgets_chk.c: Likewise.
	* debug/fgets_u_chk.c: Likewise.
	* debug/fread_chk.c: Likewise.
	* debug/fread_u_chk.c: Likewise.
	* debug/gets_chk.c: Likewise.
	* debug/obprintf_chk.c: Likewise.
	* debug/vasprintf_chk.c: Likewise.
	* debug/vdprintf_chk.c: Likewise.
	* debug/vsnprintf_chk.c: Likewise.
	* debug/vsprintf_chk.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* misc/error.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/asprintf.c: Likewise.
	* stdio-common/fxprintf.c: Likewise.
	* stdio-common/getw.c: Likewise.
	* stdio-common/isoc99_fscanf.c: Likewise.
	* stdio-common/isoc99_scanf.c: Likewise.
	* stdio-common/isoc99_vfscanf.c: Likewise.
	* stdio-common/isoc99_vscanf.c: Likewise.
	* stdio-common/isoc99_vsscanf.c: Likewise.
	* stdio-common/printf-prs.c: Likewise.
	* stdio-common/printf_fp.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.
	* stdio-common/putw.c: Likewise.
	* stdio-common/scanf.c: Likewise.
	* stdio-common/sprintf.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* stdlib/strfmon_l.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.c: Likewise.
	* sysdeps/mach/hurd/tmpfile.c: Likewise.

2012-05-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

	* sysdeps/unix/make-syscalls.sh: Support "syscall:vdso_name@VDSOVER"
	in the third column, to generate for the shared library an IFUNC
	that uses _dl_vdso_vsym.
	* Makerules (COMPILE.c, compile-stdin.c): New variables.
	* Makeconfig (object-suffixes-noshared): New variable.

	* sysdeps/unix/sysv/linux/dl-vdso.h (PREPARE_VERSION_KNOWN): New macro.
	(VDSO_NAME_LINUX_2_6, VDSO_HASH_LINUX_2_6): New macros.
	(VDSO_NAME_LINUX_2_6_15, VDSO_HASH_LINUX_2_6_15): New macros.
	(VDSO_NAME_LINUX_2_6_29, VDSO_HASH_LINUX_2_6_29): New macros.

	[BZ #14132]
	* include/sys/time.h (__gettimeofday): Remove macro.
	(__gettimeofday, gettimeofday): Add libc_hidden_proto.
	* time/gettimeofday.c (__gettimeofday): Remove #undef.
	Remove INTDEF.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/mach/gettimeofday.c: Likewise.
	* sysdeps/posix/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c
	(__gettimeofday_internal): Remove strong_alias.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/unix/syscalls.list (gettimeofday):
	Remove __gettimeofday_internal alias.

2012-05-24  Daniel Jacobowitz  <drow@false.org>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12495]
	* malloc/malloc.c (SMALLBIN_CORRECTION): New.
	(MIN_LARGE_SIZE, smallbin_index): Use it to handle 16-byte alignment.
	(largebin_index_32_big): New.
	(largebin_index): Use it for 16-byte alignment.
	(sYSMALLOc): Handle MALLOC_ALIGNMENT > 2 * SIZE_SZ.  Don't update
	correction with front_misalign.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libBrokenLocale.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libanl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libcrypt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libdl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libnsl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libresolv.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/librt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libthread_db.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libutil.abilist:
	Likewise.

	* scripts/data/c++-types-x32-linux-gnu.data: New file.
	* sysdeps/x86_64/x32/shlib-versions: Add x32 ABI entry.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10846]
	[BZ #14036]
	* math/libm-test.inc (exp_test): Add test from bug 14036.
	(pow_test): Add test from bug 10846.

	* math/gen-libm-test.pl (%beautify): Remove entries for exceptions
	and other flags.
	(special_function): Do not include flags in test name.
	(parse_args): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/gen-libm-test.pl (%beautify): Add entries for underflow
	exceptions.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(UNDERFLOW_EXCEPTION): New macro.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.
	(INVALID_EXCEPTION_OK): Update value.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle underflow exceptions.
	(acos_test): Update for underflow exception expectations.
	(cexp_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fma_test): Likewise.
	(j0_test): Likewise.
	(jn_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(tan_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_sigaction): Remove unused local variables.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/configure: New file.

2012-05-23  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: avoid signed integer overflow
	* time/mktime.c (__mktime_internal): Do not mishandle the case
	where diff == INT_MIN.

	mktime: simplify computation of average
	* time/mktime.c (ranged_convert): Use new time_t_avg function
	instead of rolling our own (probably-slower) code.

	mktime: do not assume signed right shift propagates sign bit
	* time/mktime.c (isdst_differ): New static function.
	(__mktime_internal): No need to normalize tm_isdst now.
	(__mktime_internal, not_equal_tm): Use isdst_differ to compare
	tm_isdst values.

	mktime: merge another wrapv change from gnulib
	* time/mktime.c (TYPE_MAXIMUM): Rework slightly to avoid diagnostics
	from some compilers.

	mktime: remove incorrect attempt at unusual arithmetics
	* time/mktime.c (TYPE_ONES_COMPLEMENT, TYPE_SIGNED_MAGNITUDE): Remove.
	The code didn't really work on such machines anyway.
	(TYPE_MINIMUM): Assume two's complement.
	(twos_complement_arithmetic): Verify that long_int and time_t
	are two's complement (or unsigned, in the latter case).

	mktime: check signed shifts on long_int and time_t, too
	* time/mktime.c (SHR): Check that shifts work as desired
	on the types long_int and time_t too, as SHR is used on
	such types.

	mktime: do not assume 'long' is wide enough
	* time/mktime.c (verify): Move decl up.
	(long_int): New type.
	(leapyear, ydhms_diff, guess_time_tm, __mktime_internal): Use it,
	to remove assumption in the code that 'long' is wide enough to
	store year values.  This assumption is not true on x32 and on
	some non-glibc platforms.

	mktime: merge wrapv change from gnulib
	* time/mktime.c (WRAPV): New macro.
	(time_t_avg, time_t_add_ok, time_t_int_add_ok): New static functions.
	(guess_time_tm, __mktime_internal): Do not assume that signed
	integer overflow wraps around; modern compilers generate code
	where this assumption is no longer valid.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Replace "jmp L(pseudo_end)" with "ret".
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Add poll.
	* sysdeps/unix/sysv/linux/poll.c: Remove file.

2012-05-23  Andreas Jaeger  <aj@suse.de>
	    Maximilian Attems  <max@stro.at>

	* sysdeps/unix/sysv/linux/sys/reboot.h (RB_SW_SUSPEND, RB_KEXEC):
	New macros.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Rearrange
	code so that pseudo_end is just ret and the stack pointer is
	correct also for static library in error case.

2012-05-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/chown.c: Add comment suggesting
	move to syscalls.list.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.

	* manual/install.texi (Running make install): Do not mention Linux
	kernel version for which pt_chown is not needed.
	(Linux): Do not mention problems with nscd with 2.0 kernels.
	* INSTALL: Regenerated.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): New macros from Linux 3.4.
	macro.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/i386/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h
	(IP_MULTICAST_ALL,IP_UNICAST_IF): Likewise.

2012-05-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-vdso.h (CHECK_HASH): Macro removed.
	(PREPARE_VERSION): Just use assert instead, it will be elided
	under [NDEBUG] anyway.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/Makefile: Include
	$(firstword $(wildcard $(sysdirs:=/sysctl.mk))).
	(sysdep_routines): Remove sysctl.
	* sysdeps/unix/sysv/linux/bits/sysctl.h: New file.
	* sysdeps/unix/sysv/linux/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/sys/sysctl.h: Include <bits/sysctl.h>.

2012-05-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Rearrange code so
	that pseudo_end is just ret and the stack pointer is correct also
	for static library in error case.

2012-05-22  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14122]
	* nss/nsswitch.c (defconfig_entries): New variable.
	(__nss_database_lookup): Don't leak defconfig entries.
	(nss_parse_service_list): Don't leak on error paths.
	(free_database_entries): New function.
	(free_defconfig): New function.
	(free_mem): Move common code to free_database_entries.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (sysdep_routines):
	Add arch_prctl.
	* sysdeps/unix/sysv/linux/x86_64/x32/arch_prctl.c: New file.

	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate): Use INTERNAL_SYSCALL_TYPES if it is defined.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (INLINE_SYSCALL_TYPES):
	New macro.
	(INTERNAL_SYSCALL_NCS_TYPES): Likewise.
	(INTERNAL_SYSCALL_TYPES): Likewise.
	(LOAD_ARGS_TYPES_[1-6]): Likewise.
	(LOAD_REGS_TYPES_[1-6]): Likewise.
	(LOAD_ARGS_[1-6]): Use LOAD_ARGS_TYPES_[1-6].
	(LOAD_REGS_[1-6]): Use LOAD_REGS_TYPES_[1-6].

2012-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: Add compat symbol
	copysignl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Add compat symbol
	finitel for GLIBC_2.0 and __finitel for GLIBC_2_1.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: Add compat symbol
	logbl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Use "neg %eax".

	* time/mktime.c: Update copyright years.

2012-05-22  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: merge comment-quoting-style change from gnulib
	* time/mktime.c: Quote 'like this' in comments.
	The GNU coding standards suggest that we no longer quote `like this',
	as "`" and "'" are typically rendered asymmetrically nowadays.
	The typical gnulib style is to quote 'like this' when quoting
	code, and "like this" when quoting English.

	* time/mktime.c (compile-command): Add "-I.".

	mktime: merge mktime-internal.h change from gnulib
	* time/mktime.c [!_LIBC]: Include "mktime-internal.h".

	mktime: merge time_r change from gnulib
	* time/mktime.c [!_LIBC]: Do not include "time_r.h".

	mktime: merge DEBUG change from gnulib
	* time/mktime.c (mktime) [DEBUG]: #undef before #define-ing, in
	case system <time.h> has a #define.

	mktime: merge <sys/types.h> change from gnulib
	* time/mktime.c: Do not include <sys/types.h>; no longer needed,
	since <time.t> is now guaranteed to define time_t.

	mktime: merge HAVE_CONFIG_H change from gnulib
	* time/mktime.c: Include <config.h> if !_LIBC, not if HAVE_CONFIG_H.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	Use "neg %eax".

	* sysdeps/unix/sysv/linux/bits/resource.h (RLIM_INFINITY): Use
	__rlim_t cast.
	(struct rusage): Use anonymous union to pad each field to
	__syscall_slong_t.

2012-05-21  David S. Miller  <davem@davemloft.net>

	* Makefules (o-iterator): Remove .s cases.
	(compile-command.s): Delete.
	(COMPILE.s): Delete.
	* sysdeps/unix/make-syscalls.sh: Remove .s file tests.

2012-05-21  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_predef_stack_protector): Only consider
	"foobar" and "__stack_chk_fail" lines in libc_undefs.
	* configure: Regenerated.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	New macro.  Use R*LP on int and pointer.
	(SYSCALL_ERROR_HANDLER): Use SYSCALL_SET_ERRNO.
	* sysdeps/unix/sysv/linux/x86_64/x32/lseek.S: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/llseek.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysdep.h: Likewise.

	* sysdeps/gnu/bits/utmp.h (struct lastlog): Check
	[__WORDSIZE_TIME64_COMPAT32] instead of
	[__WORDSIZE == 64 && __WORDSIZE_COMPAT32].
	(struct utmp): Likewise.
	* sysdeps/gnu/bits/utmpx.h (struct utmpx): Likewise.
	* sysdeps/powerpc/powerpc32/bits/wordsize.h (__WORDSIZE_COMPAT32):
	Renamed to ...
	(__WORDSIZE_TIME64_COMPAT32): This.
	* sysdeps/powerpc/powerpc64/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc32/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/wordsize.h: Likewise.
	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE_COMPAT32): Removed.
	(__WORDSIZE_TIME64_COMPAT32): New macro.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/i686/multiarch/wcschr-c.c: Redefine libc_hidden_def
	only if [SHARED]. Add prototype for __wcschr_ia32.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/setjmp.S [PTR_MANGLE] [__ILP32__]: Preserve high bits
	of %rbp unmolested in the jmp_buf while mangling the low bits.
	* sysdeps/x86_64/__longjmp.S [PTR_DEMANGLE] [__ILP32__]: Restore the
	unmolested high bits of %rbp while demangling the low bits.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* include/shlib-compat.h (libc_sunrpc_symbol): New macro.
	* sunrpc/svc_simple.c: Use it for registerrpc.
	* sunrpc/xcrypt.c: Use it for passwd2des.

	* malloc/malloc.c: Include shlib-compat.h for SHLIB_COMPAT.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/statvfs.h (_STATVFSBUF_F_UNUSED):
	Don't define if [__SYSCALL_WORDSIZE != 32].
	* sysdeps/x86_64/bits/wordsize.h (__SYSCALL_WORDSIZE):
	New macro.

2012-05-21  Bruno Haible  <bruno@clisp.org>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13691], Revert breakage of iconv() converter for TCVN-5712.
	* iconvdata/tcvn5712-1.c (BODY for FROM_LOOP): Don't consider
	inptr and inend for must_buffer_ch.
	* wcsmbs/tst-mbsnrtowcs.c: Remove file.
	* wcsmbs/Makefile (tests): Remove tst-mbsnrtowcs.
	* stdio-common/Makefile (tests): Remove bug15.
	(bug15-ENV): Remove macro.
	* stdio-common/bug15.c: Remove, we do not support vi_VN.TCVN5712-1
	anymore.

2012-05-19  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* manual/contrib.texi: Completely rewritten. It contains now an
	alphabetical list of contributors and their contributions.

2012-05-21  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c (__getauxval): Use unsigned long int.
	* misc/sys/auxv.h: Include <sys/cdefs.h>.
	(getauxval): Use unsigned long int.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc.c [!SHLIB_COMPAT (libc, GLIBC_2_0, GLIBC_2_16)]
	(MALLOC_ALIGNMENT): Set it to the greater of 2 * SIZE_SZ and
	__alignof__ (long double).

2012-05-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-20  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c: New file.
	* misc/sys/auxv.h: New file.
	* misc/Makefile (headers): Add sys/auxv.h, bits/hwcap.h.
	(routines): Add getauxval.
	* misc/Versions (GLIBC_2.16): Add __getauxval, getauxval.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Add _dl_auxv.
	* elf/dl-sysdep.c (_dl_auxv): Remove.
	(_dl_sysdep_start, _dl_show_auxv): Use GLRO to access _dl_auxv.
	* elf/dl-support.c (_dl_auxv): New variable.
	(_dl_aux_init): Initialize it.
	* manual/startup.texi (Auxiliary Vector): New node.
	* sysdeps/generic/bits/hwcap.h: New file.
	* sysdeps/powerpc/bits/hwcap.h: New file, split out from ...
	* sysdeps/powerpc/sysdep.h: ... here.  Include it.
	* sysdeps/sparc/bits/hwcap.h: New file, split out from ...
	* sysdeps/sparc/sysdep.h: ... here.  Include it.
	* sysdeps/unix/sysv/linux/s390/bits/hwcap.h: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Update.

2012-05-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14123]
	* math/s_ccosh.c: Include <float.h>
	(__ccosh): Avoid internal overflow calculating sinh and cosh
	values before multiplying by sin and cos values.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/libm-test.inc (ccos_test): Add more tests.
	(ccosh_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/wordsize-64/preadv.c: New file.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev.c: Likewise.

	* sysdeps/x86_64/x32/_itoa.h: Add comment.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/soft-fp/Makefile: Remove file.
	* sysdeps/powerpc/soft-fp/Subdirs: Likewise.
	* sysdeps/powerpc/soft-fp/Versions: Likewise.
	* sysdeps/powerpc/soft-fp/q_add.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmp.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmpe.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_div.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_dtoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_feq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fge.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fgt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fle.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_flt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fne.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_itoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_lltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_mul.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_neg.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtod.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoi.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoll.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtos.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtou.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoull.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sqrt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_stoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sub.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_ulltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_util.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_utoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h: Likewise.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* csu/.gitignore: Delete.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/timex.h: Include <bits/types.h>.
	(timex): Use __syscall_slong_t.

2012-05-18  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* manual/install.texi (Configuring and compiling): Update
	description about files modified in the source directory.
	* INSTALL: Regenerated.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/x86_64/sysdep.S: Use RAX_LP to access return
	value.  Use "or" to set return value to -1.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.S: Use RAX_LP to
	negate return value.

2012-05-18  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/Makefile (CFLAGS-wordcopy.c)
	(CFLAGS-memmove.c): remove -ftree-loop-linear which causes a build
	failure if the compiler has Graphite support disabled.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.
	* sysdeps/powerpc/powerpc64/power4/Makefile (CFLAGS-wordcopy.c)
	(CFLAGS-memmove.c): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/_itoa.h: New file.

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): Use
	getdents system call only if kernel and user dirents have the
	same d_ino and d_off.

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Fold copyright
	years.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(sigcontext): Use "__uint64_t" instead of "unsigned long int"
	if __x86_64__ is defined.  Use anonymous union on fpstate.

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h (user): Use
	anonymous union.

2012-05-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-start.S (_dl_start_user): Use
	INTUSE on _dl_argv, and _rtld_local instead of _rtld_global.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S [IS_IN_rtld]:
	Refer to _rtld_local_ro instead of _rtld_global_ro.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S [SHARED]: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Use _rtld_local instead
	of _rtld_global, and rtld_progname instead of _dl_argv[0].

	* sysdeps/powerpc/powerpc32/dl-machine.c
	(__elf_machine_runtime_setup) [PROF]: Don't reference
	_dl_prof_resolve.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Make inline
	function only available for GCCs before 3.4 since GCC 3.4
	introduced a builtin.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/pselect.c (data): Use __syscall_ulong_t
	on both fields and cast pointer to __syscall_ulong_t.

	* bits/types.h (__fsword_t): New type.
	* bits/typesizes.h (__FSWORD_T_TYPE): New macro.
	sysdeps/mach/hurd/bits/typesizes.h (__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/bits/statfs.h (statfs): Replace
	__SWORD_TYPE with __fsword_t.
	(statfs64): Likewise.

2012-05-17  David S. Miller  <davem@davemloft.net>

	* crypt/sha512c-test.c (TIMEOUT): Increase to 32.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* elf/tst-relsort1.c (do_test): Fix function declaration to avoid
	warning.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/tst-mallocalign1.c (test): Cast to unsigned long.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/dl-machine.h (elf_machine_rel): Declare refsym only
	when it is used.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* stdio-common/bug22.c (TIMEOUT): Bump up from 30 to 60.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile (tests): Add tst-mallocalign1.
	* sysdeps/x86_64/tst-mallocalign1.c: New file.

2012-05-17  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #14059]
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_YMM_Usable): Rename to...
	(bit_AVX_Usable): ... this.
	(bit_FMA4_Usable): New macro.
	(bit_XMM_state): New macro.
	(bit_YMM_state): New macro.
	[__ASSEMBLER__] (index_YMM_Usable): Rename to...
	[__ASSEMBLER__] (index_AVX_Usable): ... this.
	[__ASSEMBLER__] (index_FMA4_Usable): New macro.
	(CPUID_OSXSAVE): New macro.
	(CPUID_AVX): New macro.
	(CPUID_FMA4): New macro.
	(index_YMM_Usable): Rename to...
	(index_AVX_Usable): ... this.
	(HAS_AVX): Use HAS_ARCH_FEATURE.
	(HAS_FMA4): Likewise.
	(HAS_YMM_USABLE): Remove.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable AVX or FMA4 IFF YMM and XMM states are usable and the features
	are present.
	* sysdeps/x86_64/multiarch/strcmp.S: Use bit_AVX_Usable.
	* sysdeps/i386/i686/multiarch/Makefile: Add test-multiarch to tests.
	* sysdeps/x86_64/multiarch/Makefile: Likewise.
	* sysdeps/i386/i686/multiarch/test-multiarch.c: New file.
	* sysdeps/x86_64/multiarch/test-multiarch.c: New file.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* math/libm-test.c: Support platforms without multiple rounding modes.
	* math/bug-nextafter.c: Support platforms without FP exceptions.
	* math/bug-nexttoward.c: Likewise.
	* math/test-fenv.c: Likewise.
	* math/test-misc.c: Likewise.
	* stdlib/bug-getcontext.c: Likewise.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* manual/examples/search.c (critter_cmp): Change signature to
	avoid warnings.
	* manual/string.texi (Collation Functions): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h: Fold copyright years.
	* bits/typesizes.h: Likewise.
	* sysdeps/mach/hurd/bits/typesizes.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h: Likewise.
	* time/time.h: Likewise.

2012-05-16  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #208]
	* malloc.c (int_mallinfo): Add parameter to accumulate statistics
	in instead of returning them.  Return void.
	(__libc_mallinfo): Accumulate over all arenas.
	(__malloc_stats): Adjust for change in int_mallinfo interface.

2012-05-16  Roland McGrath  <roland@hack.frob.com>

	[BZ #10375]
	* configure.in (NM): Add AC_CHECK_TOOL for it.
	(libc_extra_cflags): New substituted variable.
	Check for -fstack-protector being used implicitly.
	* configure: Regenerated.
	* config.make.in (config-extra-cflags): New variable,
	gets @libc_extra_cflags@.
	* Makeconfig (CFLAGS): Add $(config-extra-cflags) near the front.

	[BZ #10375]
	* configure.in: Check for _FORTIFY_SOURCE being predefined.
	(CPPUNDEFS): New substituted variable; add -U_FORTIFY_SOURCE if needed.
	* configure: Regenerated.
	* config.make.in (CPPUNDEFS): New substituted variable.
	* Makeconfig (CPPFLAGS): Put $(CPPUNDEFS) at the beginning.
	* Makerules ($(stdio_lim:h=st)): Use $(CPPUNDEFS).
	* time/ctime.c: Don't #undef __OPTIMIZE__ and ctime.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/mqueue.h: Include <bits/types.h>.
	(mq_attr): Use __syscall_slong_t.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_SVR4):
	Check __x86_64__ instead of __WORDSIZE.
	(_STAT_VER_LINUX): Likewise.
	(stat): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t and __syscall_slong_t.
	(stat64): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/ipc.h (ipc_perm): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(greg_t): Use "__extension__ long long int" if __x86_64__ is
	defined.
	(mcontext_t): Replace "unsigned long" with "unsigned long long".

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(user_regs_struct): Use "__extension__ unsigned long long"
	instead of "unsigned long" if __x86_64__ is defined.
	(user): Likewise.  Pad after pointer field if __ILP32__ is
	defined.

2012-05-16  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (makeinfo): Require version 4.5 or later.  Allow
	versions 5 to 9.
	* configure: Regenerated.
	* manual/install.texi (texinfo): Increase version requirement to
	4.5 or later.
	* INSTALL: Regenerated.

	* include/stdc-predef.h (__STDC_ISO_10646__): Increase to 201103L.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/gmp-mparam.h: New file.

	* sysdeps/x86_64/x32/ffs.c: New file.

	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h (shmatt_t): Use
	__syscall_ulong_t.
	(shmid_ds): Add __unused1 and __unused2 only if __x86_64__ isn't
	defined.  Use __syscall_ulong_t.
	(shminfo): Use __syscall_ulong_t.
	(shm_info): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semid_ds): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Don't include
	<bits/wordsize.h>.
	(msgqnum_t): Use __syscall_ulong_t.
	(msglen_t): Likewise.
	(msqid_ds): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: New file.

	* sysdeps/x86_64/x32/divdi3.c: New dummy file.
	* sysdeps/x86_64/x32/symbol-hacks.h: Likewise.

	* sysvipc/sys/msg.h (msgbuf): Replace long int with
	__syscall_slong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h (elf_greg_t): Use
	"unsigned long long int" if __x86_64__ is defined.
	(elf_fpregset_t): Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.
	(DR_CONTROL_RESERVED): Use ULL instead of UL suffix.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Include
	<stdint.h>.
	(GET_PC): Cast to uintptr_t first.
	(GET_FRAME): Likewise.
	(GET_STACK): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/glob.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: Likewise.

2012-05-16  Andreas Schwab  <schwab@linux-m68k.org>

	* Makerules (+depfiles): Also collect depfiles from .oS in
	$(extra-objs).
	* sysdeps/ieee754/ldbl-opt/Makefile (extra-objs): Add $(addsuffix
	.oS, $(libnldbl-routines)).

	* Makerules (native-compile-mkdep-flags): Define.
	* sunrpc/Makefile (extra-objs): Add $(addprefix
	cross-,$(rpcgen-objs)), don't add $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): Use $(native-compile-mkdep-flags) instead
	of $(compile-mkdep-flags).  Depend on $(before-compile) instead of
	calling $(make-target-directory).

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): Removed.
	* time/time.h (struct timespec): Replace __snseconds_t with
	__syscall_slong_t.
	* bits/typesizes.h (__SNSECONDS_T_TYPE): Removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SNSECONDS_T_TYPE):
	Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/mach/hurd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__syscall_slong_t): New type.
	(__syscall_ulong_t): Likewise.

	* bits/typesizes.h (__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/Makefile (gen-as-const-headers):
	Add sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Include
	<sigaltstack-offsets.h>.
	(CALL_FAIL): Use RSP_LP to operate on stack.  Use RDI_LP on
	longjmp_msg pointer.
	(____longjmp_chk): Use R8_LP and RDX_LP on SP and PC.  Use
	R*_LP, sizeSS, oSS_FLAGS, oSS_SP and oSS_SIZE for alternate
	signal stack.
	* sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym: New.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* elf/stackguard-macros.h: Remove file.
	* sysdeps/generic/stackguard-macros.h: New file.
	* sysdeps/i386/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc32/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc32/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc64/stackguard-macros.h: Likewise.
	* sysdeps/x86_64/stackguard-macros.h: Likewise.
	* nptl/tst-stackguard1.c: Include <stackguard-macros.h> not
	<elf/stackguard-macros.h>.

	[BZ #14109]
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h (elf_vrreg_t): Use
	__aligned__ in attribute.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (__psw_t): Likewise.
	(gregset_t): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Implies (wordsize-64): Moved to ....
	* sysdeps/x86_64/64/Implies-after: Here.  New file.
	* sysdeps/x86_64/x32/Implies-after: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.h: Use R*_LP to pass arguments
	and access return value for _dl_profile_fixup.  Use R10_LP to
	load frame size.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h: Allowed to be include more than once.
	* sysdeps/x86_64/x32/sysdep.h: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/__longjmp.S: Use R*_LP on SP and PC.
	* sysdeps/x86_64/setjmp.S: Likewise.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log2.c: New file.
	* sysdeps/ieee754/dbl-64/e_log2.c: Fixing indents.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise and also
	remove unused global constant.

2012-05-15  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/getsysstats.c: Remove duplicate
	include of <not-cancel.h>.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* nscd/nscd-client.h (__nscd_acquire_maplock): Fix formatting.

2012-05-15  Jeff Law  <law@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13594]
	* nscd/nscd-client.h (__nscd_acquire_maplock): New function, split
	out from...
	* nscd/nscd_helper.c (__nscd_get_map_ref): ... here.
	* nscd/nscd-client.h: Add __nscd_acquire_maplock.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): Add locking to
	code changing __hst_map_handle.map.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Look for Implies-before and Implies-after
	files.
	* configure: Regenerated.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sigaction.c (RESTORE2): Replace
	8-byte data alignment with LP_SIZE alignment.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/clone.S: Load pointer to TID
	into R10_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/dl-cache.h: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/getcpu.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu-static.c:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/stackinfo.h (stackinfo_get_sp): Use RSP_LP.
	(stackinfo_sub_sp): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Load pointers into
	RAX_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Load cache sizes
	into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Load cache
	sizes into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strcmp.S: Load pointers into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memcpy.S: Load __x86_64_data_cache_size_half
	into R11_LP and load __x86_64_shared_cache_size_half into
	R8_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Load cache size into
	R8_LP.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: New file. Optimized
	logb for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbf.c: New file. Optimized
	logbf for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c: New file. Optimized
	logbl for POWER7.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logb.c: New file. Use
	powerpc32/power7/fpu/s_logb.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbf.c: New file. Use
	powerpc32/power7/fpu/s_logbf.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbl.c: New file. Use
	powerpc32/power7/fpu/s_logbl.c via #include.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* README.libm: Remove file.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/start.S: Simulate popping 4-byte argument
	count for x32.  Use R*_LP and omit operand-size suffix.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* shlib-versions: Move x86_64-.*-linux.* entries to ...
	* sysdeps/x86_64/64/shlib-versions: Here.  New file.
	* sysdeps/x86_64/x32/shlib-versions: New file.

2012-05-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (dl_fatal): Function removed.
	* elf/rtld.c (dl_main) [DL_SYSDEP_OSCHECK]:
	Use _dl_fatal_printf instead.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (minimum_kernel): Always
	set if not set by the user.  Do not allow for being unset.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_load_address): Remove
	the `q' suffix from lea and replace .quad with ASM_ADDR.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PTR_MANGLE): Remove
	the `q' suffix from xor/rol instructions.  Use $2*LP_SIZE+1
	instead of $17.
	(PTR_DEMANGLE): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h (LP_SIZE): New macro.
	(LP_OP): Likewise.
	(ASM_ADDR): Likewise.
	(RAX_LP): Likewise.
	(RBP_LP): Likewise.
	(RBX_LP): Likewise.
	(RCX_LP): Likewise.
	(RDI_LP): Likewise.
	(RSI_LP): Likewise.
	(RSP_LP): Likewise.
	(R8_LP): Likewise.
	(R9_LP): Likewise.
	(R10_LP): Likewise.
	(R10_LP): Likewise.
	(R11_LP): Likewise.
	(R12_LP): Likewise.
	(R13_LP): Likewise.
	(R14_LP): Likewise.
	(R15_LP): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/dl-machine.h: New file.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* manual/Makefile (subdir): Remove export of subdir.
	(all): Remove target.
	(.PHONY): Remove all from list.
	(mkinstalldirs): Remove.
	(.PHONY): Remove installdirs from list.
	($(inst_infodir)/libc.info): Use make-target-directory.
	(installdirs): Remove.
	(subdir_%): Remove.
	(glibc-targets): Remove.
	(lib): Remove.
	(stubs): Remove.
	($(objpfx)stubs ../po/manual.pot): Remove.
	($(objpfx)stamp%): Remove.
	(make-target-directory): Remove.
	(subdir_install): Remove.
	(routines): Remove.
	(aux): Remove.
	(sources): Remove.
	(objects): Remove.
	(headers): Remove.

	[BZ #13750]
	* manual/.gitignore: Remove, it's not needed anymore.
	* manual/libc-texinfo.sh: Pass OUTDIR as extra argument, create
	all files in it.
	* manual/Makefile (dvi, pdf, info, html): Depend on files in build
	directory.
	(texis): Renamed to $(objpfx)texis.
	(texis-path): New, contains path to generated files.
	(chapters.%): Use texis-path for complete path, add extra argument
	libc-texinfo.sh.
	(libc.dvi, libc.pdf, libc.info, libc.pdf): Add $(objfpx) as prefix.
	(libc/index.html, summary.texi): Add $(objpfx) as prefix.
	(summary,texi, stamp-summary): Use complete path of
	files. Generate files in build dir.
	(dir-add.texi): Build in build dir.
	(libm-err.texi,stamp-libm-err): Likewise.
	(version.texi, stamp-version): Likewise.
	(.%c.texi): Likewise.
	(%.info,%.dvi,%.pdf): Add $(objpfx) as prefix, build in build dir.
	(mostlyclean): Remove target.
	(realclean): Remove target.
	(generated): Add new variable with contents from mostlyclean and
	realclean, remove entries duplicated in	common-mostlyclean, add
	stamp-libm-err and stamp-version.
	(generated-dirs): Add libc directory.
	($(inst_infodir)/libc.info): Install files from build dir.

	* manual/install.texi (Configuring and compiling): Adjust since
	the info files are not part of the tar ball anymore.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/getcwd.c (__getcwd): Remove unused
	variable.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.2.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/getcwd.c [!__ASSUME_GETCWD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_GETCWD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/chown.c [!__ASSUME_LCHOWN_SYSCALL]:
	Remove conditional code.
	[!__NR_lchown]: Likewise.
	[__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	[__NR_lchown]: Likewise.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat): Remove
	comment referencing __ASSUME_LCHOWN_SYSCALL.
	* sysdeps/unix/sysv/linux/i386/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_SIOCGIFNAME]:
	Remove conditional code.
	[__ASSUME_SIOCGIFNAME ]: Make code unconditional.
	(__protocol_available): Remove #if 0 code.
	* sysdeps/unix/sysv/linux/ifreq.c [!__ASSUME_SIOCGIFNAME]: Remove
	conditional code.
	[__ASSUME_SIOCGIFNAME]: Make code unconditional.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_GETCWD_SYSCALL): Don't define.
	(__ASSUME_REALTIME_SIGNALS): Likewise.
	(__ASSUME_PREAD_SYSCALL): Likewise.
	(__ASSUME_PWRITE_SYSCALL): Likewise.
	(__ASSUME_POLL_SYSCALL): Likewise.
	(__ASSUME_LCHOWN_SYSCALL): Likewise.
	(__ASSUME_SETRESUID_SYSCALL): Define for all kernel versions for
	non-SPARC.
	(__ASSUME_SIOCGIFNAME): Don't define.
	(__ASSUME_MSG_NOSIGNAL): Likewise.
	(__ASSUME_SENDFILE): Define unconditionally.
	(__ASSUME_PROC_SELF_FD_SYMLINK): Don't define.
	* sysdeps/unix/sysv/linux/poll.c [!__ASSUME_POLL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_POLL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/chown.c (__chown)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(__chown) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c (fchownat)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(fchownat) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal)
	[__LINUX_KERNEL_VERSION < 131443]: Remove conditional code.
	* sysdeps/unix/sysv/linux/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pwrite64.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigpending.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigprocmask.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigsuspend.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_missing_rt_sigs): Remove.
	(__libc_sigaction) [__NR_rt_sigaction]: Make code unconditional.
	(__libc_sigaction): Do not handle ENOSYS from rt_sigaction.
	* sysdeps/unix/sysv/linux/syslog.c [!__ASSUME_MSG_NOSIGNAL]:
	Remove conditional code.
	[__ASSUME_MSG_NOSIGNAL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/testrtsig.h (kernel_has_rtsig): Always
	return 1.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Likewise.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/bits/mathinline.h (__pow2): Remove,
	it's not used in glibc.
	(__coshm1): Likewise.
	(__acosh1p): Likewise.
	(__sgn): Likewise.

	* manual/string.texi (Copying and Concatenation): Add missing
	variable in concat example.
	Reported by David C. Rankin <drankinatty@suddenlinkmail.com>.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14103]
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Replace
	__builtin_clzl with __builtin_clzll.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14104]
	* sysdeps/unix/sysv/linux/check_pf.c (cache): Use
	libc_freeres_ptr.

2012-05-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf.c: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf-ia32.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: New file.

2012-05-14  Mike Frysinger  <vapier@gentoo.org>

	* NEWS: Update ia64 info.

2012-05-12  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/memmove.c (MEMMOVE): Don't return a value if
	used as bcopy.

2012-05-12  Thomas Schwinge  <thomas@codesourcery.com>

	* io/dup3.c (dup3): Rename to __dup3, add weak alias for dup3.
	* sysdeps/unix/syscalls.list (dup3): Likewise.
	* libio/freopen.c (freopen): Invoke __dup3 instead of dup3.
	* libio/freopen64.c (freopen64): Invoke __dup3 instead of dup3.

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/stackguard-macros.h (STACK_CHK_GUARD) [__x86_64__]: Use
	"%c1" with "i" (offsetof (tcbhead_t, stack_guard)).

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tls-macros.h (TLS_LE): Use mov instead of movq to load
	thread pointer.
	(TLS_IE): Use mov/add instead of movq/addq to load thread
	pointer.
	(TLS_GD_PREFIX): New.
	(TLS_GD): Use it.

2012-05-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/bits/fenv.h (__fenv_stfsr): Add __volatile__.
	* sysdeps/sparc/fpu/fpu_control.h (_FPU_GETCW):	Likewise.
	(_FPU_SETCW): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S: Check if RTLD_SAVESPACE_SSE
	is 32-byte aligned.

2012-05-11  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #11837]
	* iconvdata/gb18030.c: Update tables.
	(BODY for FROM_LOOP): Update.  Handle two-byte encoded non-BMP
	characters specially.
	(BODY for TO_LOOP): Add encoding of missing ranges.

2012-05-11  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13673]
	* sysdeps/mach/hurd/accept4.c: Replace FSF snail mail address with URL.
	* sysdeps/mach/hurd/dup3.c: Likewise.
	* sysdeps/mach/hurd/readlinkat.c: Likewise.
	* sysdeps/powerpc/memmove.c:: Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela_relative): Handle
	R_X86_64_RELATIVE64 only if RTLD_BOOTSTRAP isn't defined.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/elf.h (R_X86_64_RELATIVE64): New.
	(R_X86_64_NUM): Updated.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Handle
	R_X86_64_RELATIVE64.  Always use Elf64_Addr with R_X86_64_64.
	(elf_machine_rela_relative): Handle R_X86_64_RELATIVE64.
	* sysdeps/x86_64/Makefile (tests): Add tst-quad1 tst-quad2
	tst-quad1pie tst-quad2pie
	(modules-names): Add tst-quadmod1 tst-quadmod2.
	($(objpfx)tst-quad1): New dependency.
	($(objpfx)tst-quad2): Likewise.
	($(objpfx)tst-quad1pie): Likewise.
	($(objpfx)tst-quad2pie): Likewise.
	* sysdeps/x86_64/tst-quad1.c: New file.
	* sysdeps/x86_64/tst-quad1pie.c: New file.
	* sysdeps/x86_64/tst-quad2.c: Likewise.
	* sysdeps/x86_64/tst-quad2pie.c: Likewise.
	* sysdeps/x86_64/tst-quadmod1.S: Likewise.
	* sysdeps/x86_64/tst-quadmod1pie.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2pie.S: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* io/fcntl.h (mode_t, off_t, pid_t): Define types.
	(__mode_t_defined, __off_t_defined, __pid_t_defined): Define macros.
	* streams/stropts.h (t_scalar_t): Define type.

	* sysdeps/generic/paths.h (_PATH_MAN): Set to "/usr/share/man"
	(_PATH_PRESERVE): Set to "/var/lib".
	(_PATH_RWHODIR): Set to "/var/spool/rwho".

	* sysdeps/mach/hurd/openat.c (__openat): Set type of MODE to mode_t
	instead of int.

	* sysdeps/mach/hurd/xmknodat.c (__xmknodat): Deallocate NODE port only
	if __dir_mkfile succeeded.

	* sysdeps/mach/hurd/dup3.c: Lock _hurd_dtable_lock before
	checking for _hurd_dtablesize.  Unlock it right after having
	finished _hurd_dtable allocation.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/configure.in: Remove warning for --prefix=[...].
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in: Move --prefix=/usr
	special-casing to...
	* sysdeps/gnu/configure.in: ... this new file.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/gnu/configure: New generated file.

	* sysdeps/mach/hurd/bits/stat.h (struct stat): Align to what is done
	for Linux: use nsec instead of usec, as well as:
	[__USE_MISC || __USE_XOPEN2K8] (st_atim, st_mtim, st_ctim): New
	members of type struct timespec.
	[__USE_MISC || __USE_XOPEN2K8] (st_atime, st_mtime, st_ctime):
	New macros.
	(struct stat64): Likewise.
	(_STATBUF_ST_NSEC): New macro.
	* sysdeps/mach/hurd/xstatconv.c (xstat64_conv): Adapt to that.

	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__strtoul_internal rather than strtoul.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdsock.c (_hurd_socket_server): Check for negative domains,
	and reject them.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setresgid.c (__setresgid): Handle the -1 case,
	which preserves existing values.
	* sysdeps/mach/hurd/setresuid.c (__setresuid): Likewise.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdselect.c (_hurd_select): Return EINVAL for negative
	TIMEOUT values.  Return EINVAL for NFDS values either negative or
	greater than FD_SETSIZE.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/brk.c (_hurd_set_brk): When more space needs to be
	allocated, call __vm_protect to finish enabling the existing space, and
	pass a copy of _hurd_data_end instead of PAGEBRK to __vm_allocate to
	allocate the remainder.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/recvfrom.c (__recvfrom): Check also for a null
	address port.  Set ADDR_LEN to 0 when not filling ADDRARG.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/readlinkat.c: New file, heavily derived from
	sysdeps/mach/hurd/readlink.c.

	* posix/tst-sysconf.c (posix_options): Only use
	_POSIX_PRIORITIZED_IO, _POSIX_PRIORITY_SCHEDULING, and
	_POSIX_SYNCHRONIZED_IO when they are defined
	* sysdeps/mach/hurd/bits/posix_opt.h:
	(_POSIX_PRIORITY_SCHEDULING): Undefine macro.
	(_XOPEN_REALTIME): Undefine macro.
	(_XOPEN_REALTIME_THREADS): Undefine macro.
	(_XOPEN_SHM): Undefine macro.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_INHERIT): Define
	macro to -1.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_PROTECT): Define
	macro to -1.
	(_POSIX_ASYNC_IO): Undefine macro.
	(_POSIX_PRIORITIZED_IO): Undefine macro.
	(_POSIX_SPIN_LOCKS): Define macro to -1.

	* bits/sigaction.h [__USE_XOPEN2K8]: Define SA_RESTART,
	SA_NODEFER, SA_RESETHAND.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_XOPEN2K8]: Define
	O_NOFOLLOW, O_DIRECTORY, O_CLOEXEC, F_GETOWN, F_SETOWN,
	F_DUPFD_CLOEXEC.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* elf/Makefile (pldd-modules): Define unconditionally.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/opendir.c (__opendirat): New function.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdchdir.c (_hurd_change_directory_port_from_name):
	Return ENOENT when name is empty.
	* sysdeps/mach/hurd/chroot.c (chroot): Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* include/libc-symbols.h [NO_HIDDEN] (hidden_nolink): New macro.

	* nss/makedb.c (MAP_POPULATE): If not defined, define to zero.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix mlock in all cases except non-readable pages.
	* sysdeps/mach/hurd/mlock.c (mlock): Give VM_PROT_READ
	instead of VM_PROT_ALL as parameter to __vm_wire function.

	* sysdeps/mach/hurd/mkdir.c: Include <string.h>.
	(__mkdir): When path is `/', just fail with EEXIST.
	* sysdeps/mach/hurd/mkdirat.c: Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* nss/makedb.c: Include <sys/param.h> (for MAX and roundup), and
	<sys/uio.h> (for writev).
	* nss/nss_db/db-initgroups.c: Include <limits.h> (for ULONG_MAX),
	and <sys/param.h> (for MIN).

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/nanosleep.c: Return EINVAL for invalid values of
	REQUESTED_TIME.  Properly set the remaining time and return EINTR
	if interrupted.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/Makefile ($(common-objpfx)linkobj/libc.so):
	Depend on against $(link-rpcuserlibs).

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/generic/ldsodefs.h [LIBC_STACK_END_NOT_RELRO]
	(__libc_stack_end): Do not use attribute_relro.
	* sysdeps/mach/hurd/dl-sysdep.h (LIBC_STACK_END_NOT_RELRO): Define.
	* sysdeps/mach/hurd/i386/init-first.c (init): Update __libc_stack_end
	to libthread-provided value.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_stack_end): Do not use
	attribute_relro.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #3748]
	* bits/libc-lock.h (__libc_once_get): New macro.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_get
	instead of using implementation details.

	* libio/fileops.c: Unconditionally include <kernel-features.h>.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* misc/syslog.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/netgroupcache.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* math/w_ilogbf.c: Add #include <limits.h>.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setitimer.c (setitimer_locked): Use common exit
	path instead of returning without unlocking.

	* sysdeps/mach/hurd/bits/ioctls.h (_IOIW): New macro for
	immediate-write ioctls.
	* sysdeps/mach/hurd/ioctl.c: Handle cases with no arguments.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/i386/init-first.c (init): Use
	__builtin_frame_address instead of making assumptions about the
	location of the return address relative to DATA.  Force early load of
	the return address.
	(_dl_init_first, doinit1 in doinit in _hurd_stack_setup): Don't use
	__builtin_frame_address.

	dup3 for GNU Hurd.
	* include/unistd.h: Declare __dup3 and use libc_hidden_proto on it.
	* sysdeps/mach/hurd/dup3.c: New file, copy from dup2.c.  Evolve it to
	implement dup3 and do some further code clean-ups.
	* sysdeps/mach/hurd/dup2.c (__dup2): Reimplement using __dup3.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_DUP3): Define.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/dl-sysdep.c: Conditionalize contents on [SHARED].

	* hurd/hurd/fd.h (_hurd_fd_get): Call HURD_CRITICAL_BEGIN/
	HURD_CRITICAL_END around holding _hurd_dtable_lock.
	* sysdeps/mach/hurd/dirfd (dirfd): Likewise.
	* sysdeps/mach/hurd/opendir.c (_hurd_fd_opendir): Call
	HURD_CRITICAL_BEGIN/HURD_CRITICAL_END around holding
	d->port.lock.

	* hurd/catch-signal.c (hurd_catch_signal): Use sigsetjmp/siglongjmp
	instead of setjmp/longjmp to restore the signal mask.  Call sigsetjmp
	when handler == SIG_ERR, not when handler != SIG_ERR.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/bits/socket.h: New file, copy from the bsd4.4 one.
	(SOCK_MAX, SOCK_TYPE_MASK, SOCK_CLOEXEC, SOCK_NONBLOCK): New
	definitions.

	accept4 for GNU Hurd.
	* include/sys/socket.h (__libc_accept4): New prototype.
	* sysdeps/mach/hurd/accept4.c: New file, copy from accept.c.  Evolve it
	to implement __libc_accept4.
	* sysdeps/mach/hurd/accept.c (accept): Reimplement using
	__libc_accept4.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_ACCEPT4): Define.

	* sysdeps/mach/hurd/i386/____longjmp_chk.S: New file.
	* sysdeps/mach/hurd/i386/signal-defines.sym: New file.
	* sysdeps/mach/hurd/i386/Makefile (gen-as-const-headers): Add
	signal-defines.sym.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/in.h (SOL_IP, SOL_IPV6, SOL_ICMPV6): New macros.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/dl-sysdep.c (open_file): Do not raise
	assertion on O_CLOEXEC flag.
	* hurd/hurd/fd.h: Update comment to mention O_CLOEXEC.
	* hurd/intern-fd.c: Likewise.
	* hurd/port2fd.c: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3906]
	* bits/in.h (IPV6_PKTINFO): Define new macro.
	(IPV6_RXINFO,IPV6_TXINFO,SCM_SRCINFO): Redefine to IPV6_PKTINFO.

2012-05-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13954]
	[BZ #13955]
	[BZ #13956]
	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Fix for subnormal number.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* math/libm-test.inc (logb_test) : Additional logb tests.

2012-05-09  Andreas Schwab  <schwab@linux-m68k.org>
	    Andreas Jaeger  <aj@suse.de>

	* configure.in (obsolete-rpc): Add new option --enable-obsolete-rpc.
	* configure: Regenerated.
	* config.h.in (LINK_OBSOLETE_RPC): New macro.
	* config.make.in (link-obsolete-rpc): New substituted variable.
	* include/libc-symbols.h (libc_hidden_nolink_sunrpc): Rename from
	libc_hidden_nolink and define based on LINK_OBSOLETE_RPC.
	* sunrpc/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	(shared-only-routines): Don't set it under [link-obsolete-rpc],
	so that libc.a contains the symbols.
	* nis/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	* sunrpc/auth_des.c: Use libc_hidden_nolink_sunrpc.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Fix typo in last
	change.  Update copyright years.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* include/stdc-predef.h (__STDC_NO_THREADS__): Define.

2012-05-10  Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14012]
	* sunrpc/Makefile [cross-compiling] (headers): Enable additions
	requiring rpcgen.
	[cross-compiling] (extra-libs): Likewise.
	[cross-compiling] (extra-libs-others): Likewise.
	[cross-compiling] (librpcsvc-routines): Likewise.
	[cross-compiling] (librpcsvc-inhibit-o): Likewise.
	[cross-compiling] (omit-deps): Likewise.
	(sunrpc-CPPFLAGS): New variable.
	(CPPFLAGS): Define using $(sunrpc-CPPFLAGS).
	(BUILD_CPPFLAGS): Append $(sunrpc-CPPFLAGS).
	(cross-rpcgen-objs): New variable.
	(extra-objs): Append $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): New rule.
	($(objpfx)cross-rpcgen): Likewise.
	(rpcgen-cmd): Define to use $(built-program-file).  Expand
	comment.
	($(objpfx)rpcsvc/%.stmp): Depend on cross-rpcgen.
	($(objpfx)x%.stmp): Likewise.
	* sunrpc/proto.h [IS_IN_build] (_): Define.
	[IS_IN_build] (_libc_intl_domainname): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela) [__ILP32__]:
	Sign extend relocation result to 64 bits for R_X86_64_DTPOFF64
	and R_X86_64_TPOFF64.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/syscalls.list (alarm): Add entry from
	sysdeps/unix/sysv/syscalls.list.
	(stime): Likewise.
	(utime): Likewise.
	* sysdeps/unix/sysv/syscalls.list: Remove file.

2012-05-10  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #3440]
	* locale/bits/locale.h (__LC_CTYPE, __LC_NUMERIC, __LC_TIME)
	(__LC_COLLATE, __LC_MONETARY, __LC_MESSAGES, __LC_ALL, __LC_PAPER)
	(__LC_NAME, __LC_ADDRESS, __LC_TELEPHONE, __LC_MEASUREMENT)
	(__LC_IDENTIFICATION): Make these macros useful in #if
	expressions, as required by C99.

2012-05-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sunrpc/Makefile (extra-objs) [$(build-shared) = yes]: Add
	$(addsuffix .os,$(rpc-compat-routines)).  Move include ../Rules
	after this.

2012-05-09  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/longlong.h: Updated from GCC.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (run_modes): Make named enum, reorder so that
	default is first entry.
	(run_mode): Set type.
	(main): Remove informal message about syslog.
	(options): Fix typo.

	[BZ #14053]
	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Add __volatile
	to asm.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-05-09  Andreas Jaeger  <aj@suse.de>
	    Pedro Alves  <palves@redhat.com>

	* nscd/nscd.c (run_mode): Use enum.
	(main): Cleanup coding style issue.

2012-05-09  Alexandre Oliva  <aoliva@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (go_background): Replaced with...
	(run_mode): ... this.
	(RUN_FOREGROUND, RUN_DAEMONIZE, RUN_DEBUG): Add.
	(options): Add -F --foreground.
	(main): Implement it.
	(parse_opt): Parse it.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #14083]
	* string/bits/string2.h (strspn) [__GNUC_PREREQ(3, 2) &&
	!_HAVE_STRING_ARCH_strspn]: Cast zero to size_t to avoid
	-Wconversion warning.
	(strspn) [!__GNUC_PREREQ(3, 2) && !_HAVE_STRING_ARCH_strspn]:
	Likewise.

2012-05-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/locale.h-data (NULL): Use macro-constant.  Require
	== 0.
	(LC_ALL): Use macro-int-constant.
	(LC_COLLATE): Likewise.
	(LC_CTYPE): Likewise.
	(LC_MESSAGES): Likewise.
	(LC_MONETARY): Likewise.
	(LC_NUMERIC): Likewise.
	(LC_TIME): Likewise.
	[ISO || ISO99 || ISO11] (LC_MESSAGES): Do not require.
	(LC_*): Change to LC_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/math.h-data (HUGE_VAL): Use macro-constant.
	Specify type.
	[C99-based standards] (float_t): Expect type.
	[C99-based standards] (double_t): Expect type.
	[C99-based standards] (HUGE_VALF): Use macro-constant.  Specify
	type.
	[C99-based standards] (HUGE_VALL): Likewise.
	[C99-based standards] (INFINITY): Likewise.
	[C99-based standards] (NAN): Likewise.
	[C99-based standards] (FP_INFINITE): Use macro-int-constant.
	[C99-based standards] (FP_NAN): Likewise.
	[C99-based standards] (FP_NORMAL): Likewise.
	[C99-based standards] (FP_SUBNORMAL): Likewise.
	[C99-based standards] (FP_ZERO): Likewise.
	[C99-based standards] (FP_FAST_FMA): Use
	optional-macro-int-constant.  Specify type.  Require == 1.
	[C99-based standards] (FP_FAST_FMAF): Likewise.
	[C99-based standards] (FP_FAST_FMAL): Likewise.
	[C99-based standards] (FP_ILOGB0): Use macro-int-constant.
	[C99-based standards] (FP_ILOGBNAN): Likewise.
	[C99-based standards] (MATH_ERRNO): Use macro-int-constant.
	Specify type.
	[C99-based standards] (MATH_ERREXCEPT): Likewise.
	[C99-based standards] (math_errhandling): Specify type.
	[ISO99 || ISO11] (signgam): Do not allow.
	[non-C99-based standards] (copysignf): Do not allow.
	[non-C99-based standards] (exp2f): Likewise.
	[non-C99-based standards] (log2f): Likewise.
	[non-C99-based standards] (modff): Allow.
	[non-C99-based standards] (erff): Do not allow.
	[non-C99-based standards] (erfcf): Likewise.
	[non-C99-based standards] (gammaf): Likewise.
	[non-C99-based standards] (hypotf): Likewise.
	[non-C99-based standards] (j0f): Likewise.
	[non-C99-based standards] (j1f): Likewise.
	[non-C99-based standards] (jnf): Likewise.
	[non-C99-based standards] (lgammaf): Likewise.
	[non-C99-based standards] (tgammaf): Likewise.
	[non-C99-based standards] (y0f): Likewise.
	[non-C99-based standards] (y1f): Likewise.
	[non-C99-based standards] (ynf): Likewise.
	[non-C99-based standards] (isnanf): Likewise.
	[non-C99-based standards] (acoshf): Likewise.
	[non-C99-based standards] (asinhf): Likewise.
	[non-C99-based standards] (atanhf): Likewise.
	[non-C99-based standards] (cbrtf): Likewise.
	[non-C99-based standards] (expm1f): Likewise.
	[non-C99-based standards] (ilogbf): Likewise.
	[non-C99-based standards] (log1pf): Likewise.
	[non-C99-based standards] (logbf): Likewise.
	[non-C99-based standards] (nextafterf): Likewise.
	[non-C99-based standards] (remainderf): Likewise.
	[non-C99-based standards] (rintf): Likewise.
	[non-C99-based standards] (scalbf): Likewise.
	[non-C99-based standards] (copysignl): Likewise.
	[non-C99-based standards] (exp2l): Likewise.
	[non-C99-based standards] (log2l): Likewise.
	[non-C99-based standards] (modfl): Allow.
	[non-C99-based standards] (erfl): Do not allow.
	[non-C99-based standards] (erfcl): Likewise.
	[non-C99-based standards] (gammal): Likewise.
	[non-C99-based standards] (hypotl): Likewise.
	[non-C99-based standards] (j0l): Likewise.
	[non-C99-based standards] (j1l): Likewise.
	[non-C99-based standards] (jnl): Likewise.
	[non-C99-based standards] (lgammal): Likewise.
	[non-C99-based standards] (tgammal): Likewise.
	[non-C99-based standards] (y0l): Likewise.
	[non-C99-based standards] (y1l): Likewise.
	[non-C99-based standards] (ynl): Likewise.
	[non-C99-based standards] (isnanl): Likewise.
	[non-C99-based standards] (acoshl): Likewise.
	[non-C99-based standards] (asinhl): Likewise.
	[non-C99-based standards] (atanhl): Likewise.
	[non-C99-based standards] (cbrtl): Likewise.
	[non-C99-based standards] (expm1l): Likewise.
	[non-C99-based standards] (ilogbl): Likewise.
	[non-C99-based standards] (log1pl): Likewise.
	[non-C99-based standards] (logbl): Likewise.
	[non-C99-based standards] (nextafterl): Likewise.
	[non-C99-based standards] (remainderl): Likewise.
	[non-C99-based standards] (rintl): Likewise.
	[non-C99-based standards] (scalbl): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	[non-C99-based standards] (FP_*): Do not allow.
	[C99-based standards] (FP_*): Change to
	FP_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	* conform/data/setjmp.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/signal.h-data (SIG_DFL): Use macro-constant.
	(SIG_ERR): Likewise.
	[X/Open-based standards] (SIG_HOLD): Likewise.
	(SIG_IGN): Likewise.
	(SIGABRT): Use macro-int-constant.  Specify type.  Require
	positive value.
	(SIGFPE): Likewise.
	(SIGILL): Likewise.
	(SIGINT): Likewise.
	(SIGSEGV): Likewise.
	(SIGTER): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGHUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGKILL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGQUIT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR1): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR2): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCHLD): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCONT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSTOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTSTP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTOU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGBUS): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPOLL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPROF): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSYS): Likewise.
	[X/Open-based standards] (SIGTRAP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGURG): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGVTALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXCPU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXFSZ): Likewise.
	* conform/data/stdarg.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.

2012-05-08  Ian Wienand  <ianw@vmware.com>

	[BZ #14080]
	* time/tzset.c (__tzset_parse_tz): Update default rules for
	daylight time changes in the Energy Policy Act of 2005.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #13983]
	* elf/ldconfig.c (parse_conf): Change string to make clear that
	ldconfig only issued a warning if ld.so.conf does not exist.

2012-05-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: Use
	movxtod instead of popping the value on the stack.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-08  Carlos O'Donell  <carlos_odonell@mentor.com>

	* config.h.in: Add HAVE_ARM_PCS_VFP.

2012-05-08  Roland Mc Grath  <roland@hack.frob.com>

	[BZ #13979]
	* include/features.h: Warn if user requests __FORTIFY_SOURCE
	checking but the checks are disabled for any reason.

2012-05-08  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h: Replace Elf64_XXX with ElfW(XXX)
	and ELF64_R_TYPE with ELFW(R_TYPE).

2012-05-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/syscalls.list (pause): Remove.
	(ulimit): Likewise.

	* sysdeps/unix/sysv/syscalls.list (setrlimit): Remove.
	(settimeofday): Likewise.

2012-05-08  Mike Frysinger  <vapier@gentoo.org>

	* inet/arpa/tftp.h (struct tftphdr): Rename th_u to th_u1.  Add
	a struct th_u2 inside the union, and move tu_block/tu_code into
	a new th_u3 union of tu_block/tu_code inside of that.  Move
	th_data[1] into the th_u2 as tu_data[0].  Change tu_stuff[1] to
	tu_stuff[0].  Add a new tu_padding[4] to keep sizeof() the same.
	(th_block): Change to th_u1.th_u2.th_u3.tu_block.
	(th_code): Change to th_u1.th_u2.th_u3.tu_code.
	(th_stuff): Change to th_u1.tu_stuff.
	(th_data): Define.
	(th_msg): Change to th_u1.th_u2.tu_data.

2012-05-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	[BZ #14074]
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK_CALL): New macro.
	(SETUP_PIC_REG): Use it.
	(SETUP_PIC_REG_LEAF): Use it.

2012-05-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13885]
	[BZ #13923]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/i386/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/x86_64/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not disable
	test of -max_value argument for long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-06  David S. Miller  <davem@davemloft.net>

	* scripts/data/localplt-sparc-linux-gnu.data: Add '?' markers to
	quad soft-float symbols whose references which are compiler
	generated.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2012-05-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13884]
	[BZ #13914]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* sysdeps/i386/fpu/e_exp10l.S: Define USE_AS_EXP10L and include
	e_expl.S.
	* sysdeps/ieee754/dbl-64/e_exp10.c: New file.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* math/libm-test.inc (exp10_test): Add more tests.  Do not disable
	tests for bugs.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #14064]
	* math/libm-test.inc (check_float_internal): Correct ulp
	calculation for subnormal expected results.

2012-05-06  Andreas Jaeger  <aj@suse.de>

	* Makeconfig (+math-flags): New, set to -frounding-math.
	(+cflags): Add +math-flags so that all of glibc gets compiled with
	it.

	* sysdeps/x86_64/fpu/libm-test-ulps: Updated.

2012-05-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (hypot_test) [TEST_DOUBLE && TEST_INLINE]:
	Disable one test.

	[BZ #13787]
	[BZ #13922]
	[BZ #14036]
	* sysdeps/i386/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* sysdeps/ieee754/dbl-64/w_exp.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__exp): Call __ieee754_exp before checking for overflow and
	underflow.
	* sysdeps/ieee754/flt-32/w_expf.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expf): Call __ieee754_expf before checking for overflow and
	underflow.
	* sysdeps/ieee754/ldbl-96/w_expl.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expl): Call __ieee754_expl before checking for overflow and
	underflow.
	* sysdeps/x86_64/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* math/libm-test.inc (exp_test): Add another test.  Do not allow
	missing overflow exception on overflow.
	(expm1_test): Do not allow missing overflow exception on overflow.

	* sysdeps/i386/fpu/e_expl.c: Move to ...
	* sysdeps/i386/fpu/e_expl.S: ... here.  Write directly in assembly
	rather than using inline asm.
	* sysdeps/x86_64/fpu/e_expl.c: Remove file.
	* sysdeps/x86_64/fpu/e_expl.S: Copy from
	sysdeps/i386/fpu/e_expl.S, adjusted for x86_64.

	* sysdeps/unix/sysv/syscalls.list (ftime): Remove.
	(nice): Likewise.
	(poll): Likewise.
	(signal): Likewise.
	(time): Likewise.
	(times): Likewise.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/syscalls.list (adjtime): Add entry from
	sysdeps/unix/common/syscalls.list.
	(fchmod): Likewise.
	(fchown): Likewise.
	(ftruncate): Likewise.
	(getrusage): Likewise.
	(gettimeofday): Likewise.
	(setpgid): Likewise.
	(setregid): Likewise.
	(setreuid): Likewise.
	(sigaction): Likewise.
	(truncate): Likewise.
	(vhangup): Likewise.
	* sysdeps/unix/common/syscalls.list: Remove file.
	* sysdeps/unix/bsd/Implies: Don't include unix/common.
	* sysdeps/unix/sysv/linux/Implies: Likewise.

2012-05-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/ld.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libBrokenLocale.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libanl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libcrypt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libdl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libm.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libnsl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libresolv.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/librt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libthread_db.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libutil.abilist: Here.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/bits/dirent.h: Remove file.
	* sysdeps/unix/common/bits/fcntl.h: Likewise.

	* sysdeps/unix/bsd/bits/dirent.h: Remove file.
	* sysdeps/unix/bsd/bits/fcntl.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/isatty.c: Likewise.
	* sysdeps/unix/bsd/isatty.c: Likewise.
	* sysdeps/unix/bsd/tcdrain.c: Likewise.
	* sysdeps/unix/bsd/tcgetattr.c: Likewise.
	* sysdeps/unix/bsd/tcsetattr.c: Likewise.

2012-05-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13563]
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Fix
	long double comparison inaccuracies.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/make-syscalls.sh: Fix check for version aliases.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Revert last change.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14049]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Check for trailing
	nonzero digits before rounding a hex value.
	* stdlib/tst-strtod.c (tests): Add another test.

2012-05-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* malloc/mcheck.c (mcheck): Add barrier so that malloc/free pair
	does not get optimized out.
	(malloc_opt_barrier): New.

2012-05-03  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* Makerules (.PRECIOUS): Add %.symlist pattern to prevent
	intermediate file deletion.
	(generated): Add .symlist files.

2012-05-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h [__USE_XOPEN2K8] (__dprintf_chk):
	Redirect under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	* libio/bits/stdio2.h [__USE_XOPEN2K8] (__dprintf_chk): Declare
	under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_XOPEN2K8] (dprintf): Define under this condition.
	[__USE_XOPEN2K8] (vdprintf): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	[__USE_GNU] (dprintf): Likewise.
	[__USE_GNU] (vdprintf): Likewise.

2012-05-03  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (common-generated): Set this instead of generated for
	.dyn, .phdr, .jmprel files.  Remove $(common-objpfx) from the
	$(all-built-dso)-derived lists.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* FAQ: Removed.
	* FAQ.in: Likewise.
	* scripts/gen-FAQ.pl: Likewise.
	* manual/install.texi (Installation): Point to online location of
	FAQ.
	* Makefile (files-for-dist): Remove FAQ.
	(FAQ): Remove.

2012-05-02  Allan McRae  <allan@archlinux.org>

	* elf/Makefile: (LDFLAGS-nodel2mod3.so: Use $(no-as-needed).
	(LDFLAGS-reldepmod5.so): Likewise.
	(LDFLAGS-reldep6mod1.so): Likewise.
	(LDFLAGS-reldep6mod4.so): Likewise.
	(LDFLAGS-reldep8mod3.so): Likewise.
	(LDFLAGS-unload4mod1.so): Likewise.
	(LDFLAGS-unload4mod2.so): Likewise.
	(LDFLAGS-tst-initorder): Likewise.
	(LDFLAGS-tst-initordera2.so): Likewise.
	(LDFLAGS-tst-initordera3.so): Likewise.
	(LDFLAGS-tst-initordera4.so): Likewise.
	(LDFLAGS-tst-initorderb2.so): Likewise.
	(LDFLAGS-noload): Likewise.
	(LDFLAGS-next): Likewise.
	(LDFLAGS-order2mod1.so): Likewise.
	(LDFLAGS-order2mod2.so): Likewise.
	(LDFLAGS-tst-initorder2): Likewise.
	(LDFLAGS-tst-initorder2a.so): Likewise.
	(LDFLAGS-tst-initorder2b.so): Likewise.
	(LDFLAGS-tst-initorder2c.so): Likewise.
	* stdlib/Makefile: (LDFLAGS-tst-putenv): Likewise.

2012-05-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-02  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14055]
	* elf/dl-sysdep.c (_dl_show_auxv): Add bounds check.

2012-05-02  Andreas Jaeger  <aj@suse.de>

	* math/Makefile (CPPFLAGS-test-ildoubl.c): Add -frounding-math
	since we manipulate rounding mode.
	(CPPFLAGS-test-idouble.c): Likewise.
	(CPPFLAGS-test-ifloat.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-float.c): Likewise.
	(CFLAGS-test-misc.c): Likewise.
	(CFLAGS-test-test-fenv.c): Likewise.

2012-05-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #2550]
	[BZ #2570]
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Use floating-point
	comparisons to determine direction to adjust input.

2012-05-01  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile ($(objpfx)check-localplt.out): Redirect the test's
	output to the target.

	* scripts/localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt): Target removed.
	(check-localplt-CFLAGS): Variable removed.
	($(all-built-dso:=.jmprel)): New static pattern rule.
	(generated): Add those targets.
	(localplt-built-dso): New variable.
	($(objpfx)check-localplt.out): Use the script on the .jmprel files.

	* elf/check-localplt.c: File removed.

	* scripts/check-execstack.awk: New file.
	* elf/Makefile ($(objpfx)check-execstack): Target removed.
	(check-execstack-CFLAGS): Variable removed.
	($(objpfx)check-execstack.h): Target removed.
	($(objpfx)execstack-default): New target.
	(generated): Add that instead of check-execstack.h.
	($(all-built-dso:=.phdr)): New static pattern rule.
	(generated): Add those targets.
	* elf/check-execstack.c: File removed.

	* scripts/check-textrel.awk: New file.
	* elf/Makefile ($(objpfx)check-textrel): Target removed.
	(check-textrel-CFLAGS): Variable removed.
	(all-built-dso): Use := to define.o
	($(all-built-dso:=.dyn)): New static pattern rule.
	(generated): Add those targets.
	($(objpfx)check-textrel.out): Use the script on the .dyn files.
	* config.make.in (READELF): New substituted variable.
	* elf/check-textrel.c: File removed.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/assert.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/ctype.h-data [C99-based standards] (isblank):
	Expect function.
	(is*): Change to is[abcdefghijklmnopqrstuvwxyz]*.
	(to*): Change to to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/errno.h-data (EDOM): Use macro-int-constant.
	Specify type.  Require positive value.
	(EILSEQ): Likewise.
	(ERANGE): Likewise.
	[ISO || POSIX] (EILSEQ): Do not expect.
	[!ISO && !ISO99 && !ISO11] (E2BIG): Use macro-int-constant.
	Specify type.  Require positive value.
	[!ISO && !ISO99 && !ISO11] (EACCES): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRINUSE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRNOTAVAIL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAFNOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAGAIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EALREADY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADF): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBUSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECANCELED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECHILD): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNABORTED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNREFUSED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNRESET): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDEADLK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDESTADDRREQ): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDQUOT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EEXIST): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFAULT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFBIG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EHOSTUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIDRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINPROGRESS): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINVAL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ELOOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMSGSIZE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMULTIHOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENAMETOOLONG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETDOWN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOBUFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODATA): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODEV): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOENT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOEXEC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMEM): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOPROTOOPT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSPC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSYS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTEMPTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENXIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOPNOTSUPP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOVERFLOW): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPERM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTONOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTOTYPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EROFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESRCH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESTALE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIME): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIMEDOUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETXTBSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXDEV): Likewise.
	[XOPEN2K8 || defined POSIX2008] (ENOTRECOVERABLE): Likewise.
	[XOPEN2K8 || defined POSIX2008] (EOWNERDEAD): Likewise.
	* conform/data/float.h-data (FLT_RADIX): Use macro-int-constant.
	Require >= 2.
	(FLT_ROUNDS): Expect as macro, not constant.
	(FLT_MANT_DIG): Use macro-int-constant.
	(DBL_MANT_DIG): Likewise.
	(LDBL_MANT_DIG): Likewise.
	(FLT_DIG): Likewise.
	(DBL_DIG): Likewise.
	(LDBL_DIG): Likewise.
	(FLT_MIN_EXP): Use macro-int-constant.  Require < 0.
	(DBL_MIN_EXP): Likewise.
	(LDBL_MIN_EXP): Likewise.
	(FLT_MAX_EXP): Use macro-int-constant.
	(DBL_MAX_EXP): Likewise.
	(LDBL_MAX_EXP): Likewise.
	(FLT_MAX_10_EXP): Likewise.
	(DBL_MAX_10_EXP): Likewise.
	(LDBL_MAX_10_EXP): Likewise.
	(FLT_MAX): Use macro-constant.
	(DBL_MAX): Likewise.
	(LDBL_MAX): Likewise.
	(FLT_EPSILON): Use macro-constant.  Give upper bound.
	(DBL_EPSILON): Likewise.
	(LDBL_EPSILON): Likewise.
	(FLT_MIN): Likewise.
	(DBL_MIN): Likewise.
	(LDBL_MIN): Likewise.
	[C99-based standards] (DECIMAL_DIG): Use macro-int-constant.
	[C99-based standards] (FLT_EVAL_METHOD): Likewise.
	[ISO11] (DBL_HAS_SUBNORM): Use macro-int-constant.
	[ISO11] (FLT_HAS_SUBNORM): Likewise.
	[ISO11] (LDBL_HAS_SUBNORM): Likewise.
	[ISO11] (DBL_DECIMAL_DIG): Likewise.
	[ISO11] (FLT_DECIMAL_DIG): Likewise.
	[ISO11] (LDBL_DECIMAL_DIG): Likewise.
	[ISO11] (DBL_TRUE_MIN): Use macro-constant.
	[ISO11] (FLT_TRUE_MIN): Likewise.
	[ISO11] (LDBL_TRUE_MIN): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/limits.h-data (CHAR_BIT): Use macro-int-constant.
	(SCHAR_MIN): Use macro-int-constant.  Specify type.
	(SCHAR_MAX): Likewise.
	(UCHAR_MAX): Likewise.
	(CHAR_MIN): Likewise.
	(CHAR_MAX): Likewise.
	(MB_LEN_MAX): Use macro-int-constant.
	(SHRT_MIN): Use macro-int-constant.  Specify type.
	(SHRT_MAX): Likewise.
	(USHRT_MAX): Likewise.
	(INT_MAX): Likewise.
	(INT_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.
	(UINT_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "U".
	(LONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "L".
	(LONG_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.  Suffix upper bound with "L".
	(ULONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "UL".
	[C99-based standards] (LLONG_MIN): Use macro-int-constant.
	Specify type.
	[C99-based standards] (LLONG_MAX): Likewise.
	[C99-based standards] (ULLONG_MAX): Likewise.
	* conform/data/stddef.h-data (NULL): Use macro-constant.  Require
	== 0.
	[ISO11] (max_align_t): Require type.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

	* conform/conformtest.pl ($CFLAGS_namespace): Define separately
	from $CFLAGS, without defining away __attribute__ calls.
	(checknamespace): Use $CFLAGS_namespace.

	* conform/conformtest.pl (@keywords): Only include C99 keywords
	for standards based on C99 or C11.

	* conform/data/iso646.h-data [ISO || POSIX || XPG3 || XPG4]:
	Disable tests.
	* conform/data/stdint.h-data [ISO || POSIX || XPG3 || XPG4 ||
	UNIX98]: Likewise.

	* conform/conformtest.pl: Handle "macro-int-constant" and test for
	usability of symbols in #if.

	* conform/conformtest.pl: If macro or constant types start
	"promoted:", expect the symbol to be of the following type
	promoted by the integer promotions.

	* conform/conformtest.pl: Parse all "constant" and "macro" lines
	in one place.  Also handle "macro-constant".

	* conform/conformtest.pl: Only accept expected macro values with
	"==".  Parse all "macro" lines in one place.
	* conform/data/stdlib.h-data: Use "==" form on "macro" lines.

	* conform/conformtest.pl: Handle braced types on "constant" lines
	instead of handling "typed-constant".
	* conform/data/signal.h-data: Use "constant" instead of
	"typed-constant".

	* conform/conformtest.pl: Handle "optional-" at start of lines in
	one place rather than duplicating several cases.  Handle each
	format of "macro" line with initial "optional-".

	* conform/conformtest.pl: Only accept expected constant or
	optional-constant values with "==".  Parse all "constant" lines in
	one place.  Parse all "optional-constant" lines in one place.
	* conform/data/cpio.h-data: Use "==" form on "constant" lines.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/limits.h-data: Use "==" form on "constant" and
	"optional-constant" lines.

	* conform/conformtest.pl: Use -ansi for XPG3, XPG4 and UNIX98.
	Use -std=c99 for XOPEN2K.
	(@knownproblems): Remove.
	(newtoken): Don't check %isknown.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (fpclassify):
	Do not expect macro.
	[XPG3 || XPG4 || UNIX98] (isfinite): Likewise.
	[XPG3 || XPG4 || UNIX98] (isinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnormal): Likewise.
	[XPG3 || XPG4 || UNIX98] (signbit): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreaterequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (isless): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isunordered): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Expect as function.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALF): Do not expect.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALL): Likewise.
	[XPG3 || XPG4 || UNIX98] (INFINITY): Likewise.
	[XPG3 || XPG4 || UNIX98] (NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_INFINITE): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_SUBNORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ZERO): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMA): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAF): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGB0): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGBNAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysign): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgama): Likewise.
	[XPG3] (acosh): Likewise.
	[XPG3] (asinh): Likewise.
	[XPG3] (atanh): Likewise.
	[XPG3] (cbrt): Likewise.
	[XPG3] (expm1): Likewise.
	[XPG3] (ilogb): Likewise.
	[XPG3] (log1p): Likewise.
	[XPG3] (logb): Likewise.
	[XPG3] (nextafter): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttoward): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyint): Likewise.
	[XPG3] (remainder): Likewise.
	[XPG3] (rint): Likewise.
	[XPG3 || XPG4 || UNIX98] (round): Likewise.
	[XPG3 || XPG4 || UNIX98] (trunc): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (lround): Likewise.
	[XPG3 || XPG4 || UNIX98] (llround): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquo): Likewise.
	[UNIX98 || XOPEN2K] (scalb): Expect.
	[XPG3 || XPG4 || UNIX98] (scalbn): Do not expect.
	[XPG3 || XPG4 || UNIX98] (scalbln): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdim): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmax): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmin): Likewise.
	[XPG3 || XPG4 || UNIX98] (fma): Likewise.
	[XPG3 || XPG4 || UNIX98] (nan): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceilf): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expf): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsf): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodf): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10f): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (modff): Likewise.
	[XPG3 || XPG4 || UNIX98] (powf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (erff): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcf): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotf): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderf): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquof): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdimf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceill): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expl): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsl): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodl): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10l): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (modfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (powl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcl): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotl): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynl): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderl): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquol): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdiml): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmal): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanl): Likewise.

	* conform/conformtest.pl: Define _XOPEN_SOURCE as well as
	_XOPEN_SOURCE_EXTENDED for XPG4.

	* conform/conformtest.pl: Handle "symbol" lines for allow-header.

	* Makeconfig (localtime): Remove variable.
	(inst_localtime-file): Likewise.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/librt.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Update.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2550]
	[BZ #2570]
	* math/s_nexttowardf.c (__nexttowardf): Use floating-point
	comparisons to determine direction to adjust input.
	* sysdeps/i386/fpu/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c(__nexttowardf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c (__nldbl_nexttowardf):
	Likewise.
	* math/libm-test.inc (nexttoward_test): Add more tests.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14040]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (nearbyintl): Define
	in version GLIBC_2.1, not GLIBC_2.0.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S (nearbyintl):
	Likewise.

2012-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13942]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Calculate 1 - x^2 as
	(1 - x) * (1 + x).
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* sysdeps/i386/fpu/e_asin.S (__ieee754_asin): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(asin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14034]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Take absolute value
	of square root.
	* sysdeps/i386/fpu/e_acosf.S (__ieee754_acosf): Likewise.
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* math/libm-test.inc (acos_test_tonearest): New function.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #13884]
	[BZ #13924]
	* math/e_exp10.c: Include <float.h>.
	(__ieee754_exp10): Handle underflow here rather than multiplying
	large negative argument by M_LN10.
	* math/e_exp10f.c (__ieee754_exp10f): Call __ieee754_exp instead
	of __ieee754_expf.
	* math/e_exp10l.c: Include <float.h>.
	(__ieee754_exp10l): Handle underflow here rather than multiplying
	large negative argument by M_LN10l.
	* math/libm-test.inc (exp10_test): Add another test.  Do not allow
	spurious overflow exception on underflow.

2012-04-29  Marek Polacek  <polacek@redhat.com>

	* misc/sys/cdefs.h (__attribute_artificial__): New macro.
	(__fortify_function): New macro.
	(__extern_always_inline): Don't use __attribute__ ((__artificial__)).
	* libio/bits/stdio-ldbl.h: Use __fortify_function in place of
	__extern_always_inline.
	* libio/bits/stdio2.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* string/string.h: Likewise.
	* string/bits/string3.h: Likewise.
	* include/stdio.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/unistd.h: Likewise.
	* io/bits/poll2.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/sys/poll.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/bits/syslog-ldbl.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* socket/bits/socket2.h: Likewise.
	* socket/sys/socket.h: Likewise.
	* debug/tst-chk1.c: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/bits/wchar-ldbl.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

2012-04-29  Andreas Jaeger  <aj@suse.de>

	* Makerules (tests): Remove enable-check-abi protection.
	(check-abi-warn): Remove.
	(check-abi-%): Remove check-abi-warn usage.

	* configure.in: Remove check-abi configure option.
	* configure: Regenerated.
	* config.make.in (enable-check-abi): Remove.

2012-04-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14033]
	* math/bits/math-finite.h [__NO_LONG_DOUBLE_MATH]: Redirect long
	double functions to double *_finite functions.

	[BZ #13941]
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c
	(__mpn_extract_long_double): Use DBL_MIN_EXP instead of
	LDBL_MIN_EXP.
	* stdio-common/Makefile (tests): Add tst-sprintf3.
	* stdio-common/tst-sprintf3.c: New file.

	* elf/Makefile ($(objpfx)tst-leaks1-mem, $(objpfx)noload-mem)
	($(objpfx)tst-unused-dep.out): Don't run when cross-compiling.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Remove duplicate typed-constant
	handling.

2012-04-28  David S. Miller  <davem@davemloft.net>

	* Makerules (%.abilist): Add vpath on sysdep_dirs.
	(check-abi-%): Remove AWK script prerequisite and explicit
	abilist directory.
	(check-abi): Rewrite to just diff the symlist with the abilist.
	(config-tls, config-abi-config): Delete, no longer used.
	(update-abi-%): Remove AWK script and explicit abilist directory.
	(update-abi): Rewrite to simply compare and conditionally copy the
	symlist and the sysdep abilist file.  Remove update-abi-config
	checks.
	* abilist/ld.abilist: Remove.
	* abilist/libBrokenLocale.abilist: Remove.
	* abilist/libanl.abilist: Remove.
	* abilist/libcrypt.abilist: Remove.
	* abilist/libdl.abilist: Remove.
	* abilist/librt.abilist: Remove.
	* abilist/libthread_db.abilist: Remove.
	* abilist/libutil.abilist: Remove.
	* scripts/extract-abilist.awk: Remove.
	* scripts/merge-abilist.awk: Remove.
	* sysdeps/generic/libcidn.abilist: New file.
	* sysdeps/generic/libnss_compat.abilist: New file.
	* sysdeps/generic/libnss_db.abilist: New file.
	* sysdeps/generic/libnss_dns.abilist: New file.
	* sysdeps/generic/libnss_files.abilist: New file.
	* sysdeps/generic/libnss_hesiod.abilist: New file.
	* sysdeps/generic/libnss_nis.abilist: New file.
	* sysdeps/generic/libnss_nisplus.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/ld.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libc.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libm.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libutil.abilist: New
	file.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Fix typo in handling typed-constant from
	allow-header.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	* README: Cut down references to pre-2.6 Linux kernels and
	Linuxthreads.  Update lists of configurations in libc and ports
	and sort alphabetically.  Say "or newer" with Linux kernel version
	requirements.

	* config.h.in [IS_IN_build]: Allow compiling without optimization.

2012-04-27  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	[BZ #887]
	* math/libm-test.inc (logb_test_downward): New test to expose
	erroneous negative sign on -0.0 result of logb[l](1) in FE_DOWNWARD
	rounding mode.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14027]
	* math/fclrexcpt.c (__feclearexcept): Return zero if nothing needs
	to be done.
	* math/fraiseexcpt.c (__feraiseexcept): Likewise.
	* math/fsetexcptflg.c (__fesetexceptflag): Likewise.

2012-04-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/i386/brk.S: Remove file.
	* sysdeps/unix/i386/dl-brk.S: Likewise.
	* sysdeps/unix/i386/pipe.S: Likewise.
	* sysdeps/unix/i386/sigreturn.S: Likewise.
	* sysdeps/unix/i386/syscall.S: Likewise.
	* sysdeps/unix/i386/vfork.S: Likewise.
	* sysdeps/unix/i386/wait.S: Likewise.

	* sysdeps/unix/common/tcsendbrk.c: Move to ...
	* sysdeps/unix/sysv/linux/tcsendbrk.c: ... here.

	* configure.in (arm*-none*): Do not allow without
	--enable-hacker-mode.
	(netbsd*): Remove case setting base_os.
	(386bsd*): Likewise.
	(freebsd*): Likewise.
	(bsdi*): Likewise.
	(osf*): Likewise.
	(sunos*): Likewise.
	(ultrix*): Likewise.
	(newsos*): Likewise.
	(dynix*): Likewise.
	(*bsd*): Likewise.
	(sysv*): Likewise.
	(isc*): Likewise.
	(esix*): Likewise.
	(sco*): Likewise.
	(minix*): Likewise.
	(irix4*): Likewise.
	(irix6*): Likewise.
	(solaris[2-9]*): Likewise.
	(none): Likewise.
	* configure: Regenerated.

2012-04-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #11521]
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c (__ctanhl): Avoid internal
	overflow or cancellation in calculating denominator.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c (__ctanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Breaking
	down expression to avoid unexpected rounding in newer GCCs.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for ctan, ctanh fix.

2012-04-26  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Generate
	long-double compat symbols.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/bits/atomic.h: Include sysdep.h to get
	HWCAP_* values only after the memory barriers have been defined.
	(atomic_full_barrier): Define.
	(atomic_read_barrier): Define.
	(atomic_write_barrier): Define.

2012-04-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* shlib-versions: Add libgcc_s version information.
	* sysdeps/generic/libgcc_s.h: Remove.
	* sysdeps/generic/framestate.c: Include gnu/lib-names.h instead of
	libgcc_s.h.
	* sysdeps/gnu/unwind-resume.c: Likewise.
	* scripts/test-installation.pl: Remove libgcc_s from link_libs.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/brk.S: Delete.
	* sysdeps/unix/sparc/dl-brk.S: Delete.
	* sysdeps/unix/sparc/pipe.S: Delete.
	* sysdeps/unix/sparc/sysdep.S: Delete.
	* sysdeps/unix/sparc/sysdep.h: Delete.
	* sysdeps/unix/sparc/vfork.S: Delete.
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK, SPARC_PIC_REG)
	(SPARC_PIC_REG_LEAF, ENTRY, END, LOC): Define.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (ret, ret_NOERRNO)
	(ret_ERRVAL, r0, r1, MOVE): Define.
	(JUMPTARGET): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Don't include
	sysdeps/unix/sparc/sysdep.h
	(ENTRY, END): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.

2012-04-25  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Use $(BUILD_LDFLAGS).
	(ALL_BUILD_CFLAGS): Use $(BUILD_CPPFLAGS) -D_GNU_SOURCE
	-DIS_IN_build.

	* timezone/README: Update upstream location and email address for
	tzcode and tzdata.
	* timezone/zdump.c: Update from tzcode 2012b.
	* timezone/zic.c: Likewise.

	* configure.in (libc_cv_as_needed): Remove test.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) != yes] (as-needed): Remove
	conditional definition.
	[$(have-as-needed) != yes] (no-as-needed): Likewise.
	[$(have-as-needed) != yes] (libgcc_eh): Likewise.
	* config.make.in (have-as-needed): Remove variable.

2012-04-25  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-minimal.c (__strtoul_internal): Parse hexadecimal and octal
	strings correctly.

2012-04-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/memcpy.S: Remove include of endian.h, change
	preprocessor endian tests to '#ifdef __BIG_ENDIAN__'.
	* sysdeps/sh/strlen.S: Likewise.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/fork.S: Remove file.
	* sysdeps/unix/i386/fork.S: Likewise.
	* sysdeps/unix/sparc/fork.S: Likewise.

	* sysdeps/unix/system.c: Remove file.
	* sysdeps/unix/bsd/bsd4.4/system.c: Likewise.

	* sysdeps/unix/getegid.S: Remove file.
	* sysdeps/unix/geteuid.S: Likewise.

2012-04-24  Roland McGrath  <roland@hack.frob.com>

	* scripts/check-localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt.out): Use that script instead
	of diff.
	* scripts/data/localplt-generic.data: Add a comment.

	* sysdeps/mach/hurd/symlink.c: Don't call __mach_port_deallocate on
	NODE when __dir_mkfile failed.
	* sysdeps/mach/hurd/symlinkat.c: Likewise.
	Reported by Ludovic Courtès <ludo@gnu.org>.

2012-04-24  Andreas Jaeger  <aj@suse.de>

	* Makerules (common-clean): Also remove gen-as-const-headers
	files.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Do not change working directory for
	build.  Use $(OUTPUT_OPTION) in command.
	(ALL_BUILD_CFLAGS): Use $(common-objpfx) to find config.h.

2012-04-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13886]
	* sysdeps/powerpc/powerpc64/fpu/s_floorl.S: Delete file. Use the
	sysdeps/ieee754/ldbl-128ibm/s_floorl.c version instead.
	* math/libm-test.inc (floor_test): Add more tests.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for pow tests.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/getdents.c: Remove file.
	* sysdeps/unix/sysv/getdents.c: Likewise.
	* sysdeps/unix/sysv/syscalls.list (s_getdents): Remove.

	* sysdeps/unix/syscalls.list (madvise): Add syscall from
	sysdeps/unix/mman/syscalls.list.
	(mmap): Likewise.
	(mprotect): Likewise.
	(msync): Likewise.
	(munmap): Likewise.
	* sysdeps/unix/bsd/bsd4.4/Implies: Remove.
	* sysdeps/unix/mman/syscalls.list: Remove.
	* sysdeps/unix/sysv/linux/Implies: Don't include unix/mman.

	* configure.in (libc_cv_libgcc_s_suffix): Remove test.
	(libc_cv_as_needed): Don't use $libc_cv_libgcc_s_suffix.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) = yes] (libgcc_eh): Don't use
	$(libgcc_s_suffix).
	* config.make.in (libgcc_s_suffix): Remove variable.

2012-04-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/gethostname.c: Move to ...
	* sysdeps/posix/gethostname.c: ... here.

	* sysdeps/unix/execve.S: Remove file.

	* sysdeps/unix/_exit.S: Remove file.

2012-04-23  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* manual/Makefile: Remove make dist support, there's no
	need for a stand-alone documentation tar ball.
	(TEXI2DVI): Define always, it's not in Makeconfig.
	(dist): Removed.
	(tar-it): Removed.
	(edition): Removed.
	(glibc-doc-$(edition).tar): Removed
	(%.Z): Removed.
	(%.gz): Removed.
	(%.uu): Removed.
	(ETAGS): Remove, it's in Makeconfig.
	(move-if-change): Remove, it's in Makeconfig.

2012-04-23  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13970]
	* stdlib/stdlib.h: Remove warn_unused_result attribute from strtol etc.
	(strtod, strtof, strtold, strtol, strtoul, strtoq)
	(strtouq, strtoll, strtoull, strtol_l, strtoul_l, strtoll_l, strtoull_l)
	(strtod_l, strtof_l, strtold_l): Remove __wur.
	It is not necessarily an error to ignore strtol's return value.
	One can reliably look at the stored endptr to decide whether
	the number had valid syntax.

2012-04-21  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* sysdeps/s390/s390-64/Makefile (distribute): Remove variable.

2012-04-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.0): Add sysinfo.
	* sysdeps/unix/sysv/Versions: Remove file.

2012-04-21  Markus Trippelsdorf  <markus@trippelsdorf.de>

	[BZ #13927]
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-21  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7064]
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Omit explicit
	version	from __vm86.

2012-04-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/lxstat.c: Remove file.
	* sysdeps/unix/common/syscalls.list (sys_lstat): Remove.

	* sysdeps/unix/sysv/Makefile: Remove file.

	* sysdeps/unix/sysv/direct.h: Remove file.

	* sysdeps/unix/sysv/bits/dirent.h: Remove file.
	* sysdeps/unix/sysv/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/bits/local_lim.h: Likewise.
	* sysdeps/unix/sysv/bits/signum.h: Likewise.
	* sysdeps/unix/sysv/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/bits/utsname.h: Likewise.

	* sysdeps/unix/sysv/setrlimit.c: Remove file.

	* sysdeps/unix/xmknod.c: Remove file.
	* sysdeps/unix/syscalls.list (sys_mknod): Remove.

	* sysdeps/unix/sysv/settimeofday.c: Remove file.

	* sysdeps/unix/sysv/i386/time.S: Remove file.

	* sysdeps/unix/fxstat.c: Remove file.
	* sysdeps/unix/xstat.c: Likewise.
	* sysdeps/unix/syscalls.list (sys_fstat, sys_stat): Remove.

	* sysdeps/unix/sysv/sigaction.c: Remove file.

	* sysdeps/unix/sysv/Makefile [termio.h not in sysdep_headers]
	(sysdep_headers): Remove variable.
	[termio.h not in sysdep_headers] (generated): Likewise.
	[termio.h not in sysdep_headers] ($(objpfx)termio.h): Remove rule.
	* sysdeps/unix/sysv/sysv_termio.h: Remove file.
	* sysdeps/unix/sysv/tcdrain.c: Likewise.
	* sysdeps/unix/sysv/tcflow.c: Likewise.
	* sysdeps/unix/sysv/tcflush.c: Likewise.
	* sysdeps/unix/sysv/tcgetattr.c: Likewise.
	* sysdeps/unix/sysv/tcgetpgrp.c: Likewise.
	* sysdeps/unix/sysv/tcsendbrk.c: Likewise.
	* sysdeps/unix/sysv/tcsetattr.c: Likewise.
	* sysdeps/unix/sysv/tcsetpgrp.c: Likewise.

	* sysdeps/unix/siglist.c: Remove file.

	* sysdeps/unix/getppid.S: Remove file.

	* sysdeps/unix/mkdir.c: Remove file.
	* sysdeps/unix/rmdir.c: Likewise.

2012-04-19  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/gnu/errlist-compat.awk (END): Correct computation of
	ERR_MAX value.
	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.12): Adjust
	errlist-compat value.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/memcopy.h (reg_char): Delete.
	* debug/strcat_chk.c: Use char, not reg_char.
	* debug/strcpy_chk.c: Likewise.
	* debug/strncat_chk.c: Likewise.
	* debug/strncpy_chk.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* string/strcat.c: Likewise.
	* string/strchr.c: Likewise.
	* string/strchrnul.c: Likewise.
	* string/strcmp.c: Likewise.
	* string/strcpy.c: Likewise.
	* string/strncat.c: Likewise.
	* string/strncmp.c: Likewise.
	* string/strncpy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/memmove.c: New file based on string/memmove.c where
	__builtin_memcopy is called when src and dest ranges are known to not
	overlap.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c
	(_wordcopy_fwd_dest_aligned): Replace switch with a parameterized
	fwd_align_merge macro call.
	(_wordcopy_bwd_dest_aligned): Replace switch with a parameterized
	bwd_align_merge macro call.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Add fwd_align_merge and
	bwd_align_merge macros.
	(_wordcopy_fwd_dest_aligned): Use fwd_align_merge macro calls.
	(_wordcopy_bwd_dest_aligned): Use bwd_align_merge macro calls.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcopy.h: Delete.

2012-04-18  Andreas Jaeger  <aj@suse.de>

	[BZ# 6794]
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-64-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-64-128/e_ilogbl.c: ... here.
	Adjust for changed ldbl-128 files.

	* sysdeps/sparc/sparc64/soft-fp/s_ilogbl.c: Moved to ...
	* sysdeps/sparc/sparc64/soft-fp/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

2012-04-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcopy.h: Delete.

2012-04-17  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/e_ilogb.S: Remove __ilogb*_finite alias.
	* sysdeps/i386/fpu/e_ilogbf.S: Likewise.
	* sysdeps/i386/fpu/e_ilogbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_ilogbl.S: Likewise.
	* sysdeps/ieee754/dbl-64/e_ilogb.c: Likewise.
	* sysdeps/ieee754/flt-32/e_ilogbf.c: Likewise.

2012-04-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #6794]
	* math/Makefile: Add e_ilogb and w_ilogb, remove s_logb.
	* math/libm-test.inc: Add ilogb errno and exception tests.
	* math/w_ilogb.c: New file: ilogb wrapper.
	* math/w_ilogbf.c: New file: ilogbf wrapper.
	* math/w_ilogbl.c: New file: ilogbl wrapper.
	* sysdeps/generic/math_private.h: Add __ieee754_ilogb[l|f] prototypes.
	* sysdeps/i386/fpu/s_ilogb.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogb.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbf.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbf.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/x86_64/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/x86_64/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_ilogb.c: ... here.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_ilogbf.c: ... here.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c: ... here.
	* sysdeps/ieee754/ldbl-opt/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/ldbl-opt/w_ilogb.c: ... here.
	* sysdeps/ieee754/ldbl-opt/w_ilogbl.c: New file: ilogbl wrapper.

2012-04-17  Petr Baudis  <pasky@ucw.cz>

	* include/sys/uio.h: Change __vector to __iovec to avoid clash
	with altivec.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* elf/pldd-xx.c: Rename static_assert to pldd_assert.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Reverse the
	operands of fdivp instruction.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Check __ILP32__ instead of __LP64__.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.
	* sysdeps/x86_64/ffsll.c (ffsl): Likewise.
	* sysdeps/x86_64/preconfigure.in: Likewise.
	* sysdeps/x86_64/preconfigure: Regenerated.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE): Also check
	__ILP32__.

2012-04-13  Antoine Balestrat <merkil33@gmail.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Fix test on wrong variable.

2012-04-13  Chris Leonard  <cjlhomeaddress@gmail.com>

	[BZ #13973]
	* locale/iso-639.def: Fix gl language name. Spotted by
	Yaron Shahrabani.

2012-04-12  Roland McGrath  <roland@hack.frob.com>

	[BZ #2074]
	* libio/libio.h (__io_write_fn): Update comment.

2012-04-12  Petr Baudis  <pasky@ucw.cz>

	[BZ #2074]
	* stdio.texi (Hook Functions): The user provided writer function
	is not allowed to return -1.

2012-04-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-04-11  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Add /ports, /linuxthreads, and /linuxthreads_db.
	Add a leading slash to rtkaio.

2012-04-11  Jim Meyering  <meyering@redhat.com>

	[BZ #11959]
	* libio/stdio.h (fwrite, fwrite_unlocked): Remove __wur.
	It is not necessarily an error to ignore fwrite's return
	value.  One can reliably use ferror to test for errors after
	the fact.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): New type.
	* time/time.h (struct timespec): Use __snseconds_t on tv_nsec.

	* bits/typesizes.h (__SNSECONDS_T_TYPE): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-04-10  Andreas Jaeger  <aj@suse.de>

	[BZ #2636]
	* manual/time.texi (Processor Time): Return type of times is
	elapsed real time since an arbitrary point in the past.
	(CPU Time): Move CLK_TCK from here...
	(Processor Time): ...to here.  Correct description.
	* manual/conf.texi (Constants for Sysconf): Correct description of
	_SC_CLK_TCK.

2012-04-10  David S. Miller  <davem@davemloft.net>

	[BZ #13967]
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Handle the case
	where the is a gap between DT_REL(A) and DT_JMPREL.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/dl-support.c (_dl_inhibit_cache): New variable.
	* elf/rtld.c (_rtld_global_ro): New member _dl_inhibit_cache.
	(dl_main): Handle --inhibit-cache.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): New member
	_dl_inhibit_cache.
	* elf/dl-load.c (_dl_map_object): Use it.
	* elf/Makefile: Define SYSCONFDIR when building rtld.c.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13872]
	* sysdeps/i386/fpu/e_powl.S (p78): New object.
	(__ieee754_powl): Saturate large exponents rather than testing for
	overflow of y*log2(x).
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* math/libm-test.inc (pow_test): Do not permit spurious overflow
	exceptions.

	[BZ #11521]
	* math/s_ctan.c: Include <float.h>.
	(__ctan): Avoid internal overflow or cancellation in calculating
	denominator.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/libm-test.inc (ctan_test): Add more tests.
	(ctanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-04-09  Andreas Jaeger  <aj@suse.de>

	[BZ #6894]
	* manual/filesys.texi (Directory Entries): Mention that d_namlen
	is an optional BSD extension.

	[BZ #10254]
	* manual/stdio.texi (Opening Streams): Document additional fopen
	parameters.

2012-04-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__sincos_code): Don't clobber
	%eax without telling the compiler.

2012-04-09  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ # 13963]
	* manual/install.texi: Use sourceware.org.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13873]
	* sysdeps/ieee754/dbl-64/e_pow.c (huge, tiny): New variables.
	(__ieee754_pow): Generate overflow and underflow using huge*huge
	and tiny*tiny rather than just returning constant infinity or zero
	for large exponents.
	* math/libm-test.inc (pow_test): Require overflow exceptions for
	applicable cases of large exponents.

	[BZ #706]
	* sysdeps/i386/fpu/e_pow.S (p10): New object.
	(__ieee754_pow): Use iterative multiplication algorithm only for
	integer exponents with absolute value below 1024.  Check for odd
	integer exponents when using algorithm for real exponents.
	* math/libm-test.inc (pow_test): Add more tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13705]
	* math/libm-test.inc (exp_test): Do not allow overflow exception
	on underflow test.

2012-04-08  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #13705]
	* sysdeps/ieee754/dbl-64/w_exp.c (__exp): Use __kernel_standard
	instead of __kernel_standard_f.

2012-04-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Update copyright year.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-08  Andreas Jaeger  <aj@suse.de>

	[BZ #10153]
	* manual/startup.texi (Environment Access): Describe return value
	for putenv and setenv.

	[BZ #6895]
	* manual/filesys.texi (Directory Entries): Add description for
	DT_LNK.

	[BZ #6890]
	* manual/filesys.texi (Directory Entries): Clarify that it's file
	system not operating system in the description of DT_UNKNOWN.

	[BZ #6578]
	* manual/syslog.texi (closelog): Fix reference, it's openlog.

2012-04-08  Stephen Compall  <s11@member.fsf.org>

	[BZ #6649]
	* manual/llio.texi (Opening and Closing Files): Add cross
	reference to explain mode argument.

2012-04-07  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Change PIC to SHARED.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-07  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (R_SPARC_WDISP10): Define.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE32.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE64 and R_SPARC_H34.

2012-04-07  Carlos O'Donell  <carlos_odonell@mentor.com>

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Simplify
	conditions and remove no longer applicable assertion.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h (__bswap_16): Removed.
	Include <bits/byteswap-16.h> to get __bswap_16.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap-16.h: New file.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/s390/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap-16.h: Likewise.
	* string/Makefile (headers): Add bits/byteswap-16.h.

2012-04-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #13895]
	* nss/nsswitch.c (nss_load_library, __nss_lookup_function): Avoid
	extra indirection.
	* nss/Makefile (tests-static, tests): Add tst-nss-static.
	* nss/tst-nss-static.c: New.

2012-04-06  Robert Millan  <rmh@gnu.org>

	[BZ #6486]
	* manual/llio.texi (File Position Primitive): lseek
	refers to WHENCE when it really means OFFSET.

2012-04-06  Andreas Jaeger  <aj@suse.de>

	* nss/nss_db/db-initgroups.c: Include <string.h> for strlen and
	strncmp	declarations.

	* abilist/libc.abilist: Add __poll and __ppoll.

2012-04-05  David S. Miller  <davem@davemloft.net>

	* scripts/check-local-headers.sh: Accept a host triplet in the
	path matched by the exclude regexp.

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Reduce down to one
	definition.
	* sysdeps/powerpc/powerpc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Delete.
	* sysdeps/s390/s390-32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.

	* elf/rtld.c (dl_main): If DL_DEBUG_UNUSED is enabled, turn off
	lazy binding.
	* elf/dl-lookup.c (_dl_lookup_symbol_x): If DL_DEBUG_UNUSED, ignore
	undefined symbol errors.

	* elf/rtld.c (dl_main): Skip VDSO when checking for unused
	DT_NEEDED entries.

2012-04-05  Michael Matz  <matz@suse.de>

	[BZ #13592]
	* sysdeps/x86_64/memset.S: Fix size paramater comparisions.

2012-04-05  Andreas Jaeger  <aj@suse.de>

	[BZ #13908]
	* stdlib/stdlib.h: Don't warn about unused result of mktemp, fix
	comment.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Fix return value
	which ROUND is no valid rounding mode.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Set fpscr register which
	read again.
	* sysdeps/sh/sh4/fpu/ftestexcept.c: Likewise.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Produce
	an exception using FPU order intentionally.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fedisblxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/fegetexcept.c: New file.
	* sysdeps/sh/sh4/fpu/feupdateenv.c: New file.

2012-04-05  Simon Josefsson  <simon@josefsson.org>

	[BZ #12340]
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Return ERANGE instead of
	EINVAL when BUFLEN is too smal.

2012-04-05  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13553]
	* sysdeps/mach/i386/machine-lock.h: Use volatile instead of __volatile.
	* sysdeps/mach/powerpc/machine-lock.h: Likewise.

2012-04-03  Andreas Jaeger  <aj@suse.de>

	[BZ #13938]
	* manual/setjmp.texi (System V contexts): Fix sentence.

	[BZ #13926]
	* sysdeps/i386/bits/byteswap.h [!__GNUC__](__bswap_constant_64):
	New macro for this case.
	[!__GNUC__] (__bswap_64): New inline function for this case.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: [!__GNUC__] (__bswap_64): Use
	ull, guard with __GLIBC_HAVE_LONG_LONG.

	* string/endian.h (htobe64,htole64,be64toh,le64toh): Guard with
	__GLIBC_HAVE_LONG_LONG.

	* string/byteswap.h (bswap_64): Guard with __GLIBC_HAVE_LONG_LONG.
	Include <features.h> for __GLIBC_HAVE_LONG_LONG.

2012-04-02 Tulio Magno Quites Machado Filho <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Test end of input using
	inptr and inend, rather than using last_ch.

2012-04-02  David S. Miller  <davem@davemloft.net>

	With help from Paul Eggert, Carlos O'Donell, and Roland McGrath.
	* stdio-common/printf-parse.h (read_int): Change return type to
	'int', return -1 on INT_MAX overflow.
	* stdio-common/vfprintf.c (vfprintf): Validate width and precision
	against overflow of INT_MAX.  Set errno to EOVERFLOW when 'done'
	overflows INT_MAX.  Check for overflow of in-format-string precision
	values properly.  Use EOVERFLOW rather than ERANGE throughout.  Use
	SIZE_MAX not INT_MAX for integer overflow test.
	* stdio-common/printf-parsemb.c: If read_int signals an overflow,
	skip the construct in the format string but do not record anything.
	* stdio-common/bug22.c: Adjust to test both width/prevision
	INT_MAX overflow as well as total length INT_MAX overflow.  Check
	explicitly for proper errno values.

2012-04-02  Thomas Schwinge  <thomas@codesourcery.com>

	* string/test-memcmp.c [! WIDE]: #include <limits.h> for CHAR_MIN,
	CHAR_MAX.
	* string/test-strcmp.c [! WIDE]: Likewise.
	* time/tst-mktime2.c: Likewise for INT_MAX.
	* string/test-string.h: #include <sys/param.h> for MIN.

	* csu/init-first.c (__libc_init_first): Call __ctype_init.
	* sysdeps/i386/init-first.c (init): Likewise.
	* sysdeps/mach/hurd/i386/init-first.c (posixland_init): Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c (posixland_init): Likewise.
	* sysdeps/sh/init-first.c (init): Likewise.

2012-04-01  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.
	* po/vi.po: Likewise.

2012-03-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/nss_dns/dns-host.c: Merge copyright years.

2012-03-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	Optimize memcpy with prefetch if
	DATA_CACHE_SIZE_HALF <= len <  SHARED_CACHE_SIZE_HALF and
	src, dst pointers have unequal 16 byte alignments.

2012-03-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13928]
	* resolv/nss_dns/dns-host.c (getanswer_r): Also consider ttl
	from a CNAME entry and return the minimum ttl for the query.
	(gaih_getanswer_slice): Likewise.

2012-03-30  Jeff Law  <law@redhat.com>

	* crypt/md5-crypt.c (__md5_crypt_r): Avoid unbounded alloca uses
	due to long keys.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Likewise.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.

	* resolv/nss_dns/dns-host.c: Update copyright year.

2012-03-30  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (send_dg): Use sendmmsg if we have to write two
	requests to save a system call.  Fix check that all bytes are sent.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr): Fix up
	comments for sendmmsg.

2012-03-30  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Fix a bug when converting strings
	with only 1 character between 0x0041 and 0x01b0.
	* wcsmbs/Makefile (tests): Add tst-mbsnrtowcs.
	* wcsmbs/tst-mbsnrtowcs.c: New file.

2012-03-29  David S. Miller  <davem@davemloft.net>

	* libio/fileops.c (_IO_new_file_xsputn): Don't try to optimize
	small copies by hand.

2012-03-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13761]
	* nis/nss_compat/compat-initgroups.c (getgrent_next_nss)
	(_nss_compat_initgroups_dyn): Fall back to malloc/free for large
	group memberships.

2012-03-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcpy.S: Implement mempcpy using a stub
	that branches into memcpy.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-ultra3.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add mempcpy multiarch
	bits.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: Include generic mempcpy
	implementation too.
	* sysdeps/sparc/mempcpy.S: New file.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Provide a hidden def to
	the IFUNC routine in the libc case.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: New file.

	* sysdeps/sparc/sparc64/multiarch/memset-niagara1.S: Unroll main
	loop to 256 bytes instead of 64 bytes and fix test signedness.

	* sysdeps/sparc/Makefile: Add -fPIC to ASFLAGS-.os here....
	* sysdeps/sparc/sparc32/Makefile: rather than here...
	* sysdeps/sparc/sparc64/Makefile: and here.

2012-03-28  Ulrich Drepper  <drepper@gmail.com>

	* malloc/mallocbug.c: Avoid warnings about unused variables.

2012-02-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13760]
	* resolv/nss_dns/dns-host.c (gaih_getanswer): Look for errno
	in the right place. Discard and retry query if response is
	larger than input buffer size.

2012-03-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #369]
	[BZ #2678]
	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Take absolute value of
	x for large integer exponent.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.  Adjust
	sign of result as needed afterwards.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Handle sign of
	result for underflowing pow the same as for overflow.
	(__kernel_standard_l): Handle powl overflow and underflow here
	rather than calling __kernel_standard.
	* math/libm-test.inc (pow_test): Add more tests.

	[BZ #3868]
	[BZ #13879]
	[BZ #13910]
	[BZ #13911]
	[BZ #13912]
	[BZ #13913]
	[BZ #13915]
	[BZ #13916]
	[BZ #13917]
	[BZ #13918]
	[BZ #13919]
	[BZ #13920]
	[BZ #13921]
	* sysdeps/generic/math_private.h (__kernel_standard_l): Declare.
	* sysdeps/ieee754/k_standard.c: Include <float.h>.
	(__kernel_standard_l): New function.
	* math/w_acoshl.c (__acoshl): Use __kernel_standard_l instead of
	__kernel_standard.
	* math/w_acosl.c (__acosl): Likewise.
	* math/w_asinl.c (__asinl): Likewise.
	* math/w_atan2l.c (__atan2l): Likewise.
	* math/w_atanhl.c (__atanhl): Likewise.
	* math/w_coshl.c (__coshl): Likewise.
	* math/w_exp10l.c (__exp10l): Likewise.
	* math/w_exp2l.c (__exp2l): Likewise.
	* math/w_fmodl.c (__fmodl): Likewise.
	* math/w_hypotl.c (__hypotl): Likewise.
	* math/w_j0l.c (__j0l, __y0l): Likewise.
	* math/w_j1l.c (__j1l, __y1l): Likewise.
	* math/w_jnl.c (__jnl, __ynl): Likewise.
	* math/w_lgammal.c (__lgammal): Likewise.
	* math/w_log10l.c (__log10l): Likewise.
	* math/w_log2l.c (__log2l): Likewise.
	* math/w_logl.c (__logl): Likewise.
	* math/w_powl.c (__powl): Likewise.
	* math/w_remainderl.c (__remainderl): Likewise.
	* math/w_scalbl.c (sysv_scalbl): Likewise.
	* math/w_sinhl.c (__sinhl): Likewise.
	* math/w_sqrtl.c (__sqrtl): Likewise.
	* math/w_tgammal.c (__tgammal): Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c (__expl): Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c (__expl): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(atanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(lgamma_test): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(pow_test): Do not allow some spurious overflow exceptions.
	(sqrt_test): Add more tests.
	(tgamma_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.

2012-03-27  Anton Blanchard  <anton@samba.org>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Define MAP_STACK and
	MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.

2012-03-27  David S. Miller  <davem@davemloft.net>

	* conform/Makefile: Run run-conformtest.sh using $(BASH).

	* sysdeps/sparc/sparc64/Makefile (ASFLAGS-.os): Move before
	have-as-vis3 check.

2012-03-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/elf/configure.in: Moved to ...
	* sysdeps/x86_64/configure.in: ... here.
	* sysdeps/x86_64/elf/start.S: Moved to ...
	* sysdeps/x86_64/start.S: ... here.
	* sysdeps/x86_64/elf/configure: Delete.

	* sysdeps/x86_64/configure.in: Merge contents from
	sysdeps/i386/configure.in (without i686 check).

	* sysdeps/i386/elf/Versions: Merge into ...
	* sysdeps/i386/Versions: ... this.
	* sysdeps/i386/elf/Versions: Delete file.
	* sysdeps/i386/elf/start.S: Moved to ...
	* sysdeps/i386/start.S: ...here.
	* sysdeps/i386/elf/configure.in: Merge into...
	* sysdeps/i386/configure.in: ...here.
	* sysdeps/i386/elf/configure.in: Delete file.
	* sysdeps/i386/elf/configure: Delete file.

	* sysdeps/generic/elf/backtracesyms.c: Moved to ...
	* debug/backtracesyms.c: ... here.
	* sysdeps/generic/elf/backtracesymsfd.c: Moved to ...
	* debug/backtracesymsfd.c: ... here.
	* sysdeps/generic/elf/ifunc-sel.h: Moved to ...
	* sysdeps/generic/ifunc-sel.h: ... here.

	* sysdeps/unix/i386/start.c: Delete file.
	* sysdeps/unix/sparc/start.c: Delete file.
	* sysdeps/unix/start.c: Delete file.

	* sysdeps/sh/elf/configure.in: Moved to ...
	* sysdeps/sh/configure.in: ... here.
	* sysdeps/sh/elf/start.S: Moved to ...
	* sysdeps/sh/start.S: ... here.
	* sysdeps/sh/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc64/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc64/bzero.S: ... here.
	* sysdeps/powerpc/powerpc64/elf/entry.h: Moved to ...
	* sysdeps/powerpc/powerpc64/entry.h: ... here.
	* sysdeps/powerpc/powerpc64/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc64/start.S: here.
	* sysdeps/powerpc/powerpc64/elf/Makefile: Merge into ...
	* sysdeps/powerpc/powerpc64/Makefile: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc64/configure.in: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc32/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc32/bzero.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc32/start.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc32/configure.in: ... this.
	* sysdeps/powerpc/powerpc32/elf/configure: Delete file.

	* sysdeps/powerpc/elf/ifunc-sel.h: Moved to ...
	* sysdeps/powerpc/ifunc-sel.h: ... here.
	* sysdeps/powerpc/elf/rtld-global-offsets.sym: Moved to ...
	* sysdeps/powerpc/rtld-global-offsets.sym: ... here.

	* sysdeps/sparc/elf/configure.in: Moved to ...
	* sysdeps/sparc/configure.in: ... here.
	* sysdeps/sparc/elf/configure: Delete file.
	* sysdeps/sparc/sparc32/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc32/start.S: ... here.
	* sysdeps/sparc/sparc64/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc64/start.S: ... here.
	* sysdeps/sparc/sparc32/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc32/Makefile: ... this.
	* sysdeps/sparc/sparc64/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc64/Makefile: ... this.

	* sysdeps/s390/s390-32/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-32/configure.in: ... here.
	* sysdeps/s390/s390-32/elf/configure: Delete file.
	* sysdeps/s390/s390-32/elf/start.S: Moved to ...
	* sysdeps/s390/s390-32/start.S: ... here.

	* sysdeps/s390/s390-64/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-64/configure.in: ... here
	* sysdeps/s390/s390-64/elf/configure: Delete file.
	* sysdeps/s390/s390-64/elf/start.S: Moved to ...
	* sysdeps/s390/s390-64/start.S: ... here.
	* sysdeps/s390/s390-64/elf/configure: Delete.

	* configure.in: Remove support for elf directories in sysdeps.

	* configure: Regenerated.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

2012-03-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (lomark): Adjust to take
	denormal result into account.

2012-03-25  Roland McGrath  <roland@hack.frob.com>

	* posix/confstr.c (confstr): Lift RESTENVS definition to function scope.
	Reported by Allan McRae <allan@archlinux.org>.

2012-03-23  Jeff Law  <law@redhat.com>

	* nss/getnssent.c (__nss_getent): Fix typo.

2012-03-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tlsdesc.h (tlsdesc): Use anonymous union
	to pad to uint64_t for each field.
	(dl_tls_index): Replace unsigned long with uint64_t.

2012-03-23  Daniel Jacobowitz  <dmj@google.com>
	Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #6528]
	* grp/Makefile (otherlibs): Don't set it.
	* inet/Makefile (otherlibs): Likewise.
	* login/Makefile (otherlibs): Likewise.
	* nscd/Makefile (otherlibs): Likewise.
	* posix/Makefile (otherlibs): Likewise.
	* pwd/Makefile (otherlibs): Likewise.
	* rt/Makefile (otherlibs): Likewise.
	* sunrpc/Makefile (otherlibs): Likewise.
	* nss/Makefile (otherlibs): Likewise.
	Add libnss_files to routines and static-only-routines.
	($(objpfx)getent): Remove rule.
	* resolv/Makefile: Add libnss_dns and libresolv to routines and
	static-only-routines.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13892]
	* math/s_cexp.c: Include <float.h>.
	(__cexp): Handle exp result overflowing not necessarily
	overflowing both real and imaginary parts of result.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* include/link.h (ELFW): New macro.
	* sysdeps/x86_64/dl-irel.h: Replace Elf64_XXX with ElfW(XXX).
	Replace ELF64_R_TYPE with ELFW(R_TYPE).

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tls.h (dl_tls_index): Replace unsigned long
	with uint64_t.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldsodefs.h (struct La_x32_regs): New forward
	declaration.
	(struct La_x32_retval): Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/preconfigure.in: New file.
	* sysdeps/x86_64/preconfigure: New generated file.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13824]
	* math/e_exp2l.c: Include <float.h>.
	(__ieee754_exp2l): Handle overflow and underflow cases
	separately.  Only pass fractional part of argument to
	__ieee754_expl.
	* math/libm-test.inc (exp2_test): Add more tests.

	* sysdeps/ieee754/ldbl-128/k_cosl.c (__kernel_cosl): Negate y if
	negating x to take absolute value.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c (__kernel_cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c (__kernel_sinl): Negate y when
	computing low part if x was negated.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Support la_x32_gnu_pltenter and
	la_x32_gnu_pltexit.
	(pltexit): Cast int_retval to ptrdiff_t.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.

	* sysdeps/generic/ldsodefs.h (audit_ifaces): Add x32_gnu_pltenter
	and x32_gnu_pltexit.

	* sysdeps/x86_64/bits/link.h: Check __x86_64__ instead of
	__ELF_NATIVE_CLASS.
	(La_x32_regs): New macro.
	(La_x32_retval): Likewise.
	(la_x32_gnu_pltenter): New function prototype.
	(la_x32_gnu_pltexit): Likewise.

2012-03-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (huge, tiny): Correct
	exponent.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* configure.in (libc_cv_cc_nofma): Check for option to disable
	generation of FMA instructions.
	* configure: Regenerate.
	* config.make.in (config-cflags-nofma): Set from libc_cv_cc_nofma.
	* sysdeps/ieee754/dbl-64/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libm-sysdep_routines):
	Remove brandred-fma4.
	(CFLAGS-brandred-fma4.c): Remove.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Remove.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c (__branred): Don't
	define.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c (__branred): Don't
	define.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.
	* stdio-common/_itowa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	* stdio-common/_itowa.h: Include <_itoa.h>.
	(_itowa_word): Use _ITOA_WORD_TYPE on value.
	(_itowa): New macro.  Defined only if _ITOA_NEEDED is false.
	* sysdeps/generic/_itoa.h (_ITOA_NEEDED): New macro.  Defined
	only if not defined.
	(_ITOA_WORD_TYPE): Likewise.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	Check !_ITOA_NEEDED instead of LONG_MAX == LLONG_MAX.

2012-03-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/configure.in: Check x86_64* instead
	of x86_64 when setting libc_cv_slibdir, libdir and
	libc_cv_localedir.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (Old Varargs): Remove section.
	(How Variadic): Update menu.
	(va_start): Do not mention varargs.h.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_ssp): Use LIBC_TRY_CC_OPTION instead of a
	link test.
	* configure: Regenerated.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>

	* conform/conformtest.pl: Handle --tmpdir argument, defaulting to /tmp.
	* conform/run-conformtest.sh: Pass --tmpdir argument when invoking
	conformtest.pl

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* NOTES: Remove.
	* Makefile (files-for-dist): Remove NOTES.
	(NOTES): Remove rule.
	* README: Don't refer to NOTES.
	* manual/creature.texi: Don't include macros.texi.
	* manual/intro.texi (creature.texi): Remove comment referring to
	NOTES.

	* aclocal.m4 (LIBC_TRY_CC_OPTION): New macro.
	* configure.in (libc_cv_cc_submachine): Use LIBC_TRY_CC_OPTION.
	* configure: Regenerated.
	* sysdeps/i386/configure.in (libc_cv_cc_sse4): Use
	LIBC_TRY_CC_OPTION.
	(libc_cv_as_i686): Likewise.
	(libc_cv_cc_avx): Likewise.
	(libc_cv_cc_sse2avx): Likewise.
	(libc_cv_cc_fma4): Likewise.
	(libc_cv_cc_novzeroupper): Likewise.
	* sysdeps/i386/configure: Regenerated.

	[BZ #13883]
	* sysdeps/i386/fpu/s_cexp.S: Remove.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-21  Allan McRae  <allan@archlinux.org>

	* timezone/Makefile: Do not install iso3166.tab and zone.tab

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13871]
	* math/w_exp2.c: Do not include <float.h>.
	(o_threshold, u_threshold): Remove.
	(__exp2): Calculate result before checking finiteness and calling
	__kernel_standard.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/libm-test.inc (exp2_test): Require overflow exception for
	1e6 input.

	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Test for y outside the
	range of signed 64-bit integers before using fistpll.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Test for y outside
	the range of signed 32-bit integers before using fistpl.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Ensure
	divide-by-zero is raised for zero to large negative powers.
	* sysdeps/x86_64/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* math/libm-test.inc (pow_test): Add more tests.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/backtracesymsfd.c: Include <_itoa.h> instead of
	<stdio-common/_itoa.h>.
	* debug/segfault.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-minimal.c: Likewise.
	* elf/dl-misc.c: Likewise.
	* elf/dl-sysdep.c: Likewise.
	* elf/dl-version.c: Likewise.
	* elf/rtld.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/lookup-retry.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* nscd/nscd_getgr_r.c: Likewise.
	* nscd/nscd_getpw_r.c: Likewise.
	* nscd/nscd_getserv_r.c: Likewise.
	* posix/getopt_init.c: Likewise.
	* posix/wordexp.c: Likewise.
	* stdio-common/_itoa.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* string/_strerror.c: Likewise.
	* sysdeps/generic/elf/backtracesymsfd.c: Likewise.
	* sysdeps/i386/i686/hp-timing.h: Likewise.
	* sysdeps/mach/_strerror.c: Likewise.
	* sysdeps/mach/hurd/powerpc/register-dump.h: Likewise.
	* sysdeps/mach/hurd/sethostid.c: Likewise.
	* sysdeps/mach/hurd/xmknodat.c: Likewise.
	* sysdeps/mach/xpg-strerror.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/register-dump.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/register-dump.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc64/hp-timing.h: Likewise.
	* sysdeps/unix/sysv/linux/fd_to_filename.h: Likewise.
	* sysdeps/unix/sysv/linux/futimes.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/register-dump.h: Likewise.

	* stdio-common/_itoa.c: Include <_itoa.h> instead of "_itoa.h".

	* stdio-common/_itoa.h: Moved to ...
	* sysdeps/generic/_itoa.h: Here.

	* stdio-common/_itowa.c: Include <_itowa.h> instead of "_itowa.h".

	* stdio-common/printf_fphex.c: Include <_itoa.h> and <_itowa.h>
	instead of "_itoa.h" and "_itowa.h".
	* stdio-common/vfprintf.: Likewise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't include
	<bits/wordsize.h>.
	(__signbitf): Check __x86_64__ instead of __WORDSIZE.
	(__signbit): Likwise.
	(llrintf): Likwise.
	(llrint): Likwise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/setjmp.h (__jmp_buf): Support x86-64 with
	__WORDSIZE != 64.

2012-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (%beautify): Add OVERFLOW_EXCEPTION and
	OVERFLOW_EXCEPTION_OK.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(OVERFLOW_EXCEPTION): Define.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(INVALID_EXCEPTION_OK): Renumber.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle FE_OVERFLOW.
	(exp10_test): Expect overflow exceptions.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(nextafter_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/atomic.h
	(__arch_c_compare_and_exchange_val_64_acq): Use atomic64_t on
	64bit integer.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Don't include <bits/wordsize.h>.
	(fenv_t): Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/mathdef.h: Don't include <bits/wordsize.h>.
	Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/ldd-rewrite.sed: Support x32.

2012-03-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/fpu/fenv_private.h: New file.
	* sysdeps/sparc/fpu/math_private.h: Use it.
	(libc_feholdexcept, libc_feholdexceptf, libc_feholdexceptl):
	Remove.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf)
	(libc_feholdexcept_setroundl): Remove.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl):
	Remove.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Remove.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvf): Remove.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/math_private.h (EXTRACT_WORDS64): Use
	int64_t instead of long int.
	(INSERT_WORDS64): Likwise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Cast
	_Unwind_GetCFA return to _Unwind_Ptr first.

2012-03-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c: Include <float.h>.
	(__clog): Scale large or subnormal inputs.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_clog10.c: Include <float.h>.
	(M_LOG10_2): Define.
	(__clog10): Scale large or subnormal inputs.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #11451]
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Scale large
	x and y.
	* math/libm-test.inc (atan2_test): Add another test.

	* Makerules (common-objdir-compile): Remove.
	* sysdeps/unix/Makefile (config-generated): Do not add
	$(unix-generated) to variable.
	[generic bits/local_lim.h] (mk-local_lim-CFLAGS): Remove variable.
	[generic bits/local_lim.h] ($(common-objpfx)bits/local_lim.h):
	Remove rule.
	[generic bits/local_lim.h] ($(common-objpfx)mk-local_lim):
	Likewise.
	[generic bits/local_lim.h] (before-compile): Do not append to
	variable.
	[generic bits/local_lim.h] (common-generated): Likewise.
	[generic sys/param.h] (before-compile): Do not append to variable.
	[generic sys/param.h] ($(common-objpfx)sys/param.h): Remove rule.
	[generic sys/param.h] ($(common-objpfx)param.h.c): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Do not
	include.
	[generic sys/param.h] (sys/param.h-includes): Remove variable.
	[generic sys/param.h] (sys/param.h-includes): Remove rule.
	[generic sys/param.h] ($(addprefix
	$(common-objpfx),$(sys/param.h-includes))): Likewise.
	[generic sys/param.h] (common-generated): Do not append to
	variable.
	[generic sys/param.h] (sysdep_headers): Likewise.
	[generic bits/errno.h] (before-compile): Do not append to
	variable.
	[generic bits/errno.h] ($(common-objpfx)bits/errno.h): Remove
	rule.
	[generic bits/errno.h] ($(common-objpfx)make-errnos): Likewise.
	[generic bits/errno.h] ($(common-objpfx)make-errnos.c): Likewise.
	[generic bits/errno.h] ($(common-objpfx)errnos): Likewise.
	[generic bits/errno.h] (common-generated): Do not append to
	variable.
	[generic bits/ioctls.h] (before-compile): Do not append to
	variable.
	[generic bits/ioctls.h] ($(common-objpfx)bits/ioctls.h): Remove
	rule.
	[generic bits/ioctls.h] (ioctl-includes): Remove variable.
	[generic bits/ioctls.h] (make-ioctls-CFLAGS): Likewise.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls): Remove
	rule.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls.c): Likewise.
	[generic bits/ioctls.h] (bits_termios.h): Remove variable.
	[generic bits/ioctls.h] ($(common-objpfx)ioctls): Remove rule.
	[generic bits/ioctls.h] (common-generated): Do not append to
	variable.
	[generic sys/syscall.h] (syscall.h): Remove variable.
	[generic sys/syscall.h] ($(common-objpfx)sys/syscall.h): Remove
	rule.
	[generic sys/syscall.h] (before-compile): Do not append to
	variable.
	[generic sys/syscall.h] (common-generated): Likewise.
	* sysdeps/unix/errnos-tmpl.c: Remove file.
	* sysdeps/unix/errnos.awk: Likewise.
	* sysdeps/unix/ioctls-tmpl.c: Likewise.
	* sysdeps/unix/ioctls.awk: Likewise.
	* sysdeps/unix/mk-local_lim.c: Likewise.
	* sysdeps/unix/snarf-ioctls: Likewise.

2012-03-19  Richard Henderson  <rth@twiddle.net>

	* sysdeps/i386/fpu/fenv_private.h: New file.
	* sysdeps/i386/fpu/math_private.h: Use it.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept_setround_53bit): Remove.
	(libc_feupdateenv_53bit): Remove.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept): Remove.
	(libc_feholdexcept_setround): Remove.
	(libc_fetestexcept, libc_fesetenv): Remove.
	(libc_feupdateenv_test): Remove.
	(libc_feupdateenv, libc_feholdsetround): Remove.
	(libc_feresetround): Remove.

	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Avoid the fldenv.
	* sysdeps/x86_64/fpu/feholdexcpt.c (feholdexcept): Likewise.

	* sysdeps/generic/math_private.h (default_libc_feupdateenv_test): New.
	(libc_feupdateenv_test, libc_feupdateenv_testf): New.
	(libc_feupdateenv_testl): New.
	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv_test): New.
	(libc_feupdateenv_testf): New.
	(libc_feupdateenv): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Likewise.

	* sysdeps/generic/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf, libc_feholdsetroundl): New.
	(libc_feresetround, libc_feresetroundf, libc_feresetroundl): New.
	(libc_feresetround_noex): New.
	(libc_feresetround_noexf): New.
	(libc_feresetround_noexl): New.
	(SET_RESTORE_ROUND, SET_RESTORE_ROUNDF, SET_RESTORE_ROUNDL): New.
	(SET_RESTORE_ROUND_NOEX, SET_RESTORE_ROUND_NOEXF): New.
	(SET_RESTORE_ROUND_NOEXL, SET_RESTORE_ROUND_53BIT): New.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Use
	SET_RESTORE_ROUND.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use SET_RESTORE_ROUND_53BIT.
	(__cos): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (__tan): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Use
	SET_RESTORE_ROUND_NOEX.
	* sysdeps/ieee754/dbl-64/e_exp2f.c (__ieee754_exp2f): Use
	SET_RESTORE_ROUND_NOEXF.
	* sysdeps/ieee754/flt-32/e_expf.c (__ieee754_expf): Likewise.
	* sysdeps/x86_64/fpu/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf): New.
	(libc_feresetround, libc_feresetroundf): New.

	* sysdeps/i386/fpu/math_private.h: Include <fenv.h>, <fpu_control.h>.
	(libc_feholdexcept_setround_53bit): Convert from macro to function.
	(libc_feupdateenv_53bit): Likewise.  Don't force _FPU_EXTENDED.

	* sysdeps/generic/math_private.h: Include <fenv.h>.
	(default_libc_feholdexcept): New.
	(default_libc_feholdexcept_setround): New.
	(default_libc_fesetenv, default_libc_feupdateenv): New.
	(libc_feholdexcept): Only define if undefined.
	(libc_feholdexceptf, libc_feholdexceptl): Likewise.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf): Likewise.
	(libc_feholdexcept_setroundl): Likewise.
	(libc_feholdexcept_setround_53bit): Likewise.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl): Likewise.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Likewise.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvl): Likewise.
	(libc_feupdateenv_53bit): Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Include <fenv.h>.
	(libc_feholdexcept): Convert from macro to inline function.
	(libc_feholdexcept_setround, libc_fetestexcept): Likewise.
	(libc_fesetenv, libc_feupdateenv): Likewise.

	* sysdeps/generic/math_private.h (GET_HIGH_WORD): Define only if
	not previously defined.
	(GET_LOW_WORD, EXTRACT_WORDS64, INSERT_WORDS): Likewise.
	(INSERT_WORDS64, SET_HIGH_WORD, SET_LOW_WORD): Likewise.
	(GET_FLOAT_WORD, SET_FLOAT_WORD): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: New file.
	* sysdeps/ieee754/flt-32/math_private.h: New file.
	* sysdeps/x86_64/fpu/math_private.h: Move the include_next of
	math_private.h below SET_FLOAT_WORD.
	(__isnan, __isinf_ns, __finite): Remove.
	(__isnanf, __isinf_nsf, __finitef): Remove.

2012-03-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-17  David S. Miller  <davem@davemloft.net>

	[BZ #6471]
	* sysdeps/unix/sysv/linux/sparc/Versions: Add __getshmlba entry
	for 2.16.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): Use -1l to avoid
	warnings.

	[BZ #6471]
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Test for syscall errors
	properly.
	* sysdeps/unix/sysv/linux/sparc/getshmlba.c: New file.
	* sysdeps/unix/sysv/linux/sparc/Makefile: Add getshmlba to
	sysdep_routines when subdir is sysvipc.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h (SHMLBA): Use new
	__getshmlba helper.

	* sysdeps/sparc/fpu/libm-test/ulps: Update.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/ffsll.c (ffsl): Define alias only under
	[__LP64__].

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Moved to ...
	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c: This.
	(__lround): Renamed to ...
	(__llround): This.  Replace long int with long long int.
	Define lround functions as aliases of llround functions.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Empty file.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/makecontext.c (__makecontext):
	Use greg_t on sp.  Use unsigned int on idx_uc_link.  Cast
	adresses to uintptr_t.  Replace "long int" and "unsigned long
	int" with "greg_t" on va_arg.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldconfig.h (FLAG_X8664_LIBX32): New macro.
	* elf/cache.c (print_entry): Handle FLAG_X8664_LIBX32.

	* sysdeps/unix/sysv/linux/i386/readelflib.c (process_elf_file):
	Move e_machine check before EI_CLASS check.  Handle x32
	libraries.  Check EM_IA_64 only if SKIP_EM_IA_64 isn't defined.
	* sysdeps/unix/sysv/linux/x86_64/readelflib.c: Just define
	SKIP_EM_IA_64 and include
	<sysdeps/unix/sysv/linux/i386/readelflib.c>.

	* sysdeps/unix/sysv/linux/x86_64/dl-cache.h:
	Don't include <sysdeps/unix/sysv/linux/sparc/dl-cache.h>.
	(add_system_dir): New macro.

	* sysdeps/unix/sysv/linux/x86_64/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add /libx32/ld-linux-x32.so.2.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2551]
	[BZ #2552]
	[BZ #2553]
	[BZ #2554]
	[BZ #2562]
	[BZ #2563]
	[BZ #2565]
	[BZ #2566]
	[BZ #2576]
	* math/w_j0.c (j0): Don't produce TLOSS errors for POSIX libm.
	(y0): Likewise.
	* math/w_j0f.c (j0f): Likewise.
	(y0f): Likewise.
	* math/w_j0l.c (__j0l): Likewise.
	(__y0l): Likewise.
	* math/w_j1.c (j1): Likewise.
	(y1): Likewise.
	* math/w_j1f.c (j1f): Likewise.
	(y1f): Likewise.
	* math/w_j1l.c (__j1l): Likewise.
	(__y1l): Likewise.
	* math/w_jn.c (jn): Likewise.
	(yn): Likewise.
	* math/w_jnf.c (jnf): Likewise.
	(ynf): Likewise.
	* math/w_jnl.c (__jnl): Likewise.
	(__ynl): Likewise.
	* math/libm-test.inc (j0_test): Add more tests.
	(j1_test): Likewise.
	(jn_test): Likewise.  Add trailing semicolon to existing test.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13851]
	[BZ #13854]
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Use
	libc_feholdexcept_setround_53bit and libc_feupdateenv_53bit.
	* sysdeps/ieee754/ldbl-96/k_tanl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Include <errno.h>.
	(__tanl): Set errno for infinite argument.
	* sysdeps/i386/fpu/mptan.c: Remove.
	* sysdeps/i386/fpu/s_tan.S: Likewise.
	* sysdeps/i386/fpu/s_tanl.S: Likewise.
	* sysdeps/x86_64/fpu/k_tanl.c: Likewise.
	* sysdeps/x86_64/fpu/s_tanl.S: Likewise.
	* math/libm-test.inc (tan_test): Add more tests and enable more
	tests for double and long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* sysdeps/x86_64/elf/start.S: Include <sysdep.h>.
	(_start): Add cfi_startproc, cfi_undefined for rip and cfi_endproc.

2012-03-16  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (LIBC_PRECONFIGURE): New macro.
	* configure.in: Use it for both main tree and add-ons.
	* configure: Regenerated.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* time/offtime.c (__offtime): Use time_t on days, rem, y and yg.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Include generator program
	in comment.

	[BZ #13851]
	* sysdeps/ieee754/ldbl-96/e_rem_pio2l.c: New file.
	* sysdeps/ieee754/ldbl-96/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c (__cosl): Correct test for
	infinite argument.
	* sysdeps/ieee754/ldbl-96/s_sinl.c (__sinl): Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Handle __FLT_EVAL_METHOD__
	!= 0 for prec == 2.
	* sysdeps/i386/fpu/e_rem_pio2l.c: Remove.
	* sysdeps/i386/fpu/k_rem_pio2.c: Likewise.
	* sysdeps/i386/fpu/s_cosl.S: Likewise.
	* sysdeps/i386/fpu/s_sincosl.S: Likewise.
	* sysdeps/i386/fpu/s_sinl.S: Likewise.
	* sysdeps/x86_64/fpu/e_rem_pio2l.c: Likewise.
	* sysdeps/x86_64/fpu/k_cosl.c: Likewise.
	* sysdeps/x86_64/fpu/k_sinl.c: Likewise.
	* sysdeps/x86_64/fpu/s_cosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sincosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sinl.S: Likewise.
	* math/libm-test.inc (cos_test): Add more tests and enable more
	tests for long double.
	(sin_test): Likewise.
	(sincos_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/math_private.h: New file.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add fma/fmaf
	sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

	* sysdeps/sparc/sparc32/fpu/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/s_fma.c: New file.

	* sysdeps/sparc/sparc-ifunc.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Use
	sparc-ifunc.h
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: Likewise.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/e_hypotf.c: Use double precision instead of
	scaling.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13852]
	* sysdeps/i386/fpu/e_rem_pio2f.c: Delete so that i386 uses the
	ieee754/flt-32 implementation for sin, cos and sincos.
	* sysdeps/i386/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/i386/fpu/s_cosf.S: Likewise.
	* sysdeps/i386/fpu/s_sincosf.S: Likewise.
	* sysdeps/i386/fpu/s_sinf.S: Likewise.
	* sysdeps/i386/fpu/s_tanf.S: Delete so that i386 uses the
	ieee754/flt-32 implementation for tan.

	* math/libm-test.inc (cos_test): Enable some large input tests for
	float as well
	(sin_test): Likewise.
	(sincos_test): Likewise.
	(tan_test): Add tests for large input.

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13658]
	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13837]
	* math/libm-test.inc (cos_test): Add a test case for large input
	value.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>
	    Joseph Myers  <joseph@codesourcery.com>

	[BZ #13658]
	* sysdeps/x86_64/fpu/s_sincos.S: Delete files so that
	x86-64 and i386 use the iee754/dbl-64 sin and cos implementation.
	* sysdeps/i386/fpu/branred.c: Likewise.
	* sysdeps/i386/fpu/dosincos.c: Likewise.
	* sysdeps/i386/fpu/mpa.c: Likewise.
	* sysdeps/i386/fpu/s_cos.S: Likewise.
	* sysdeps/i386/fpu/s_sin.S: Likewise.
	* sysdeps/i386/fpu/s_sincos.S: Likewise.
	* sysdeps/i386/fpu/sincos32.c: Likewise.

	* sysdeps/generic/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.
	* sysdeps/i386/fpu/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Do double arithmetic in
	53 bit (without extend i386 double precision).

	* math/libm-test.inc (sincos_test): Add tests for large input.
	(sin): Likewise.
	(cos): Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new vis3
	fmin/fmax sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

2012-03-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new VIS3
	routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add new
	VIS3 routines.

	* sysdeps/sparc/sparc32/sparcv9/fpu/unix/sysv/linux/multiarch/Implies:
	New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/configure.in: New file.
	* sysdeps/sparc/configure: Generate.
	* configure.in (libc_cv_sparc_as_vis3): Substitute.
	* configure: Regenerate.
	* config.h.in (HAVE_AS_VIS3_SUPPORT): New.
	* config.make.in (have-as-vis3): New.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-*): If VIS3 is
	available use -Av9d instead of -Av9a.
	* sysdeps/sparc/sparc64/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: New file.

	* sysdeps/sparc/sparc64/fpu/s_copysign.S (__copysign): Use
	fzeros/fnegs to load 0x80000000 into a float register instead of
	using the stack.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S (__copysignf): Likewise.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/syscall.h.
	($(objpfx)syscall-%.h): Rename rule to $(objpfx)bits/syscall%h.
	($(objpfx)syscall-%.d): Rename rule to $(objpfx)bits/syscall%d.
	($(inst_includedir)/bits/syscall.h): Remove rule.
	($(objpfx)bits/syscall.d): Include instead of
	$(objpfx)syscall-list.d.
	(generated): Change syscall-list.h and syscall-list.d to
	bits/syscall.h and bits/syscall.d.

2012-03-14  Roland McGrath  <roland@hack.frob.com>

	[BZ #13846]
	* manual/llio.texi (Memory-mapped I/O): Fix wrong function name.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13841]
	* math/s_csqrt.c: Include <float.h>.
	(__csqrt): Scale large or subnormal inputs.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13840]
	* math/libm-test.inc (hypot_test): Add more tests.

2012-03-13  David S. Miller  <davem@davemloft.net>

	[BZ #13840]
	* sysdeps/ieee754/flt-32/e_hypotf.c (__ieee754_hypotf): Rewrite to use
	double-precision for the calculation instead of scaling.

2012-03-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Do not
	manipulate bits before adding and subtracting TWO52[sx].
	* sysdeps/ieee754/dbl-64/s_rint.c (__rint): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c (__nearbyint):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c (__rint): Likewise.

2012-03-13  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/Makefile: Remove rtld-global-offsets.sym handling.
	* sysdeps/sparc/elf/rtld-global-offsets.sym: Delete.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Don't include
	rtld-global-offsets.h
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Use expl for
	large parameters.

	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-fxstatat64.c: New file.

	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Declare syscall
	'err' in the ifdef scope in which it is actually used.

	* nss/nss_db/db-init.c: Include string.h

2012-03-12  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	masking out of the most significant byte of random value used.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix coding style in previous change.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Set on sparc when 2.5.64 and later.
	(__ASSUME_TGKILL): Set on sparc when 2.6.1 and later, simplify
	expression.
	(__ASSUME_FADVISE64_64_SYSCALL): Set on sparc when 2.6.1 and
	later.

2012-03-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__makecontext): Fix signedness of pointer casts setting up 'sp'.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL) Use 'long'
	for 'resultvar' otherwise things get truncated on 64-bit.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix masking out of the most significant byte of random value used.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Protect local
	variables with appropriate CPP guards.
	* sysdeps/sparc/sparc32/dl-trampoline.S: Propagate the stack_ptr
	from the frame pointer, not the stack pointer.  Correct layout
	comments.  Fix test on resulting framesize and the management of
	the outregs buffer for pltexit.  Preserve floating point return
	values across _dl_call_pltexit call.
	* sysdeps/sparc/sparc64/dl-trampoline.S: Fix test on resulting
	framesize and the management of the outregs buffer for pltexit.
	Preserve floating point return values across _dl_call_pltexit
	call.
	* elf/sotruss-lib.c (la_sparc32_gnu_pltenter)
	(la_sparc64_gnu_pltenter, la_sparc32_gnu_pltexit)
	(la_sparc64_gnu_pltexit): New functions.
	(print_exit): Fix format string for return register value.

2012-03-10  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/Makefile (others): Add rpcgen.
	($(objpfx)rpcgen): Remove special build rule and dependency on
	libc.
	* sunrpc/rpcgen.c: New file.

2012-03-09  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13673]
	* posix/bug-regex33.c: Replace FSF snail mail address with URL.
	* stdio-common/bug-vfprintf-nargs.c: Likewise.
	* sysdeps/i386/crti.S: Likewise.
	* sysdeps/i386/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc32/crti.S: Likewise.
	* sysdeps/powerpc/powerpc32/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc64/crti.S: Likewise.
	* sysdeps/powerpc/powerpc64/crtn.S: Likewise.
	* sysdeps/sh/crti.S: Likewise.
	* sysdeps/sh/crtn.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.

	[BZ #13673]
	* locale/programs/charmap-kw.gperf: Replace FSF snail mail address
	with URL.
	* locale/programs/locfile-kw.gperf: Likewise.
	* locale/programs/charmap-kw.h: Regenerated.
	* locale/programs/locfile-kw.h: Likewise.

	[BZ #13673]
	* intl/plural.y: Replace FSF snail mail address with URL.
	* intl/plural.c: Regenerated.

2012-03-09  Richard Henderson  <rth@twiddle.net>

	* include/math_private.h: Remove file.
	* math/math_private.h: Move file ...
	* sysdeps/generic/math_private.h: ... here.

	* sysdeps/i386/fpu/math_private.h: Use include_next for math_private.h.
	* sysdeps/powerpc/fpu/math_private.h: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.

	* sysdeps/i386/fpu/s_fpclassifyl.c: Use <> to include both <math.h>
	and <math_private.h>.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/branred.c: Likewise.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_cbrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fpclassify.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_signbit.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cbrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fpclassifyf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_remquof.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_signbitf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sincosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_truncf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_truncl.c: Likewise.
	* sysdeps/ieee754/s_lib_version.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/ieee754/s_signgam.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/s_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: Likewise.
	* sysdeps/powerpc/fpu/s_isnan.c: Likewise.
	* sysdeps/powerpc/fpu/s_rint.c: Likewise.
	* sysdeps/powerpc/fpu/s_rintf.c: Likewise.
	* sysdeps/powerpc/fpu/s_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_llrintf.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/rpc_cout.c: Remove __GNU_LIBRARY__ conditionals.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* include/math_private.h: New file.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/socket_type.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/socket_type.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Get enum __socket_type
	from <bits/socket_type.h>.
	(enum __socket_type): Don't define here.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Remove.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/socket_type.h.

	[BZ #13566]
	* libio/stdio.h (gets): Always declare for C++ up to C++11 without
	checking __USE_GNU.

	* Makerules ($(inst_includedir)/%.h): New rule.
	* stdio-common/Makefile (headers): Add bits/stdio_lim.h.
	(install-others): Remove variable setting.
	($(inst_includedir)/bits/stdio_lim.h): Remove rule.

2012-03-08  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/fpu/math_private.h (__ieee754_sqrt): Convert
	from macro to inline function; merge with the
	!__LIBC_INTERNAL_MATH_INLINES version.
	(__ieee754_sqrtf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__rint): Convert from macro
	to inline function.
	(__rintf, __floor, __floorf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__ieee754_sqrt): Convert from
	macro to inline function.
	(__ieee754_sqrtf, __ieee754_sqrtl): Likewise.

	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Include <math_private.h>,
	not <math/math_private.h>.

2012-03-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Update
	copyright year.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h: Likewise.

2012-03-08  Thomas Schwinge  <thomas@codesourcery.com>

	* resolv/gai_misc.c (handle_requests): Fix struct timespec
	normalization.
	* rt/tst-cpuclock2.c (test_nanosleep): Likewise.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Likewise.

2012-03-08  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/tst-fphex.c: Various cleanups.  The macros cannot
	be defined individually, they must be defined as a block.  Define
	S for printing a string instead of hidint the different by using a
	macro for adding the 'l'.
	* stdio-common/tst-fphex-wide.c: Adjust.

2012-03-07  Marek Polacek  <polacek@redhat.com>

	* stdio-common/tst-long-dbl-fphex.c: Fix test for non ldbl-96 targets.

2012-03-08  Marek Polacek  <polacek@redhat.com>

	[BZ #13806]
	* stdio-common/Makefile (tests): Add tst-fphex-wide.
	* stdio-common/tst-fphex.c: Define a few macros to make the
	test reusable.  Use them.
	* stdio-common/tst-fphex-wide.c: New file.

2012-03-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6911]
	* manual/macros.texi (gnusystems): New macro.
	(nongnusystems): Likewise.
	(gnulinuxhurdsystems): Likewise.
	(gnuhurdsystems): Likewise..
	(gnulinuxsystems): Likewise.
	* manual/charset.texi: Use new macros or @theglibc{} to refer to
	variants of the GNU system, not "GNU system".
	* manual/conf.texi: Likewise.
	* manual/errno.texi: Likewise.  Update example of errno macro
	expansion.
	* manual/filesys.texi: Likewise.
	(getumask): Document as specific to GNU/Hurd.
	* manual/install.texi: Likewise.  Reword some references to
	GNU/Linux.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	(File Name Portability): Detail which constraints are inapplicable
	to all GNU systems and which are only inapplicable to GNU/Hurd.
	* manual/job.texi: Likewise.
	* manual/llio.texi: Likewise.
	(O_NOCTTY): Document as present on GNU/Linux.
	* manual/maint.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/pipe.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	(RUSAGE_CHILDREN): Remove statement about specifying a particular
	child on GNU/Hurd.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/terminal.texi: Likewise.
	(ONLCR): Document as POSIX.
	(OXTABS): Document availability on GNU/Linux as XTABS.
	(ONOEOT): Document availability separately from other bits.
	(VLNEXT, VDISCARD, VSTATUS): Document availability individually.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

	* aclocal.m4 (LIBC_TRY_LINK_STATIC): New macro.
	* configure.in (libc_cv_preinit_array): Use LIBC_TRY_LINK_STATIC.
	(libc_cv_ctors_header): Likewise.  Use asm ("") instead of calling
	puts.
	* configure: Regenerated.

2012-03-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.in (cpuid.h): Use AC_CHECK_HEADER with no
	default includes instead of AC_HEADER_CHECK.
	* sysdeps/i386/configure: Regenerated.

	[BZ #10716]
	* math/s_cacosh.c (__cacosh): Convert negative log results to 0.
	* math/s_cacoshf.c (__cacoshf): Likewise.
	* math/s_cacoshl.c (__cacoshl): Likewise.
	* math/s_casinh.c (__casinh): Set signs of result from argument.
	* math/s_casinhf.c (__casinhf): Likewise.
	* math/s_casinhl.c (__casinhl): Likewise.
	* math/libm-test.inc (cacos_test, cacosh_test, casin_test)
	(casinh_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-07  Ulrich Drepper  <drepper@gmail.com>

	* po/zh_TW.po: Update from translation team.

	* login/Makefile (distribute): Remove variable.
	* catgets/Makefile: Likewise.
	* mach/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* iconv/Makefile: Likewise.
	* nscd/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	* manual/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* conform/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* time/Makefile: Likewise.
	* soft-fp/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* gmon/Makefile: Likewise.
	* po/Makefile: Likewise.
	* rt/Makefile: Likewise.
	* socket/Makefile: Likewise.
	* math/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* debug/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* timezone/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	* io/Makefile: Likewise.
	* argp/Makefile: Likewise.
	* inet/Makefile: Likewise.
	* hesiod/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* csu/Makefile: Likewise.
	* wctype/Makefile: Likewise.
	* crypt/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* string/Makefile: Likewise.
	* nis/Makefile: Likewise.
	* resolv/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* wcsmbs/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* posix/Makefile: Likewise.

	[BZ #6959]
	* timezone/Makefile: Don't install timezone files, just the programs
	and scripts.

2012-03-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/databases.def: Add missing gshadow entry.

	* stdio-common/vfprintf.c: Fix formatting.  Missing copyright update.

2012-03-06  Marek Polacek  <polacek@redhat.com>

	[BZ #13726]
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Adjust position of wnumstr.
	* sysdeps/x86_64/fpu/printf_fphex.c: Likewise.
	* stdio-common/Makefile (tests): Add tst-long-dbl-fphex.
	* stdio-common/tst-long-dbl-fphex.c: New file.

2012-03-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(set_obp_int): New function.
	(get_obp_int): New function.
	(__get_clockfreq_via_dev_openprom): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INTERNAL_SYSCALL_ERROR_P):
	Avoid unused variable warnings on 'val' and use builtin_expect.
	(INLINE_SYSCALL): Don't wrap INTERNAL_SYSCALL_ERROR_P with
	__builtin_expect.
	(INLINE_CLONE_SYSCALL): Likewise.

2012-03-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-05  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Drop exp(-x) term
	only for |x| >= 40.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.

2012-03-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c (gettimeofday_ifunc):
	Replace gettimeofday with __vdso_gettimeofday.

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): Replace clock_gettime and getcpu with
	__vdso_clock_gettime and __vdso_getcpu.

	* sysdeps/unix/sysv/linux/x86_64/time.c (time_ifunc): Replace
	time with __vdso_time.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (size_t): Note types to which size_t may be
	equivalent with the GNU C Library, but do not describe when
	differences between them are significant.

2012-03-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_pow.c: Include <fenv.h>.
	(__ieee754_pow): Save and restore rounding mode and use
	round-to-nearest for main computations.
	* math/libm-test.inc (pow_test_tonearest): New function.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #3976]
	* math/libm-test.inc (cosh_test_tonearest): New function.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-05  Tom de Vries  <tom@codesourcery.com>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Ensure
	default stack guard is set in last bytes.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Same.

2012-03-05  Kees Cook  <keescook@chromium.org>

	* stdio-common/vfprintf.c (vfprintf): add missing errno settings.

	[BZ #13656]
	* stdio-common/vfprintf.c (vfprintf): Check for nargs overflow and
	possibly allocate from heap instead of stack.
	* stdio-common/bug-vfprintf-nargs.c: New file.
	* stdio-common/Makefile (tests): Add nargs overflow test.

2012-03-03  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-03  Marek Polacek  <polacek@redhat.com>

	* include/sys/cdefs.h: Remove __GNUC_PREREQ macro.
	* math/math_private.h: Likewise.
	* stdlib/tst-strtod.c: Likewise.
	* sysdeps/i386/i486/bits/atomic.h: Likewise.
	* sysdeps/x86_64/bits/atomic.h: Likewise.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrintf.S: New file.

2012-03-02  Roland McGrath  <roland@hack.frob.com>

	[BZ #13792]
	* manual/examples/README: New file, says the example source files
	can be used under GPL>=2.
	* manual/Makefile (%.c.texi): Eat the leading part of the file until a
	line containing just "*/".
	* manual/examples/add.c: Add copyright header (GPL>=2).
	* manual/examples/argp-ex1.c: Likewise.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.
	* manual/examples/argp-ex4.c: Likewise.
	* manual/examples/atexit.c: Likewise.
	* manual/examples/db.c: Likewise.
	* manual/examples/dir.c: Likewise.
	* manual/examples/dir2.c: Likewise.
	* manual/examples/execinfo.c: Likewise.
	* manual/examples/filecli.c: Likewise.
	* manual/examples/filesrv.c: Likewise.
	* manual/examples/fmtmsgexpl.c: Likewise.
	* manual/examples/genpass.c: Likewise.
	* manual/examples/inetcli.c: Likewise.
	* manual/examples/inetsrv.c: Likewise.
	* manual/examples/isockad.c: Likewise.
	* manual/examples/longopt.c: Likewise.
	* manual/examples/memopen.c: Likewise.
	* manual/examples/memstrm.c: Likewise.
	* manual/examples/mkfsock.c: Likewise.
	* manual/examples/mkisock.c: Likewise.
	* manual/examples/mygetpass.c: Likewise.
	* manual/examples/pipe.c: Likewise.
	* manual/examples/popen.c: Likewise.
	* manual/examples/rprintf.c: Likewise.
	* manual/examples/search.c: Likewise.
	* manual/examples/select.c: Likewise.
	* manual/examples/setjmp.c: Likewise.
	* manual/examples/sigh1.c: Likewise.
	* manual/examples/sigusr.c: Likewise.
	* manual/examples/stpcpy.c: Likewise.
	* manual/examples/strdupa.c: Likewise.
	* manual/examples/strftim.c: Likewise.
	* manual/examples/strncat.c: Likewise.
	* manual/examples/subopt.c: Likewise.
	* manual/examples/swapcontext.c: Likewise.
	* manual/examples/termios.c: Likewise.
	* manual/examples/testopt.c: Likewise.
	* manual/examples/testpass.c: Likewise.
	* manual/examples/timeval_subtract.c: Likewise.

	[BZ #13792]
	* manual/time.texi (Elapsed Time): Move timeval_subtract example
	function to ...
	* manual/timeval_subtract.c.texi: ... here, new file.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update for recently added tests.

2012-03-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/s_sin.c: Include <fenv.h>
	(__sin): Save and restore rounding mode and use round-to-nearest
	for all computations.
	(__cos): Save and restore rounding mode and use round-to-nearest
	for all computations.
	* sysdeps/ieee754/dbl-64/s_tan.c: Include "math_private.h" and
	<fenv.h>.
	(tan): Save and restore rounding mode and use round-to-nearest for
	all computations.
	* math/libm-test.inc (cos_test_tonearest): New function.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #10135]
	* sysdeps/ieee754/dbl-64/s_scalbln.c (__scalbln): First test for
	small n, then large n, before computing and testing k+n.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (__scalbn): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c (__scalbln):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c (__scalbn):
	Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c (__scalblnf): Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c (__scalbnf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c (__scalbnl): Likewise.
	* math/libm-test.inc (scalbn_test): Add more tests.
	(scalbln_test): Likewise.

	* manual/filesys.texi (mode_t): Describe constraints on size and
	signedness, not exact equivalence to a particular type.
	(ino_t): Likewise.
	(ino64_t): Likewise.
	(dev_t): Likewise.
	(nlink_t): Likewise.
	(blkcnt_t): Likewise.
	(blkcnt64_t): Likewise.
	* manual/llio.texi (off_t): Likewise.

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_exp.c: Include <fenv.h>.
	(__ieee754_exp): Save and restore rounding mode and use
	round-to-nearest for all computations.
	* math/libm-test.inc (exp_test_tonearest): New function.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Chris Demetriou  <cgd@google.com>

	* sysdeps/gnu/errlist-compat.awk: Don't depend on AWK internals to
	have predictable order.

2012-03-01  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/getpagesize.c: Delete.

	* sysdeps/sparc/sparc64/fpu/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinff.S: New file.

	* sysdeps/sparc/sparc32/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitl.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitl.S: New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Move...
	* sysdeps/sparc/fpu/libm-test-ulps: to here.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Delete.

	* sysdeps/sparc/crti.S: Remove HAVE_BINUTILS_GOTDATA checks.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* config.h.in (HAVE_BINUTILS_GOTDATA): Delete.
	* sysdeps/sparc/elf/configure.in: Remove binutils GOTDATA checks.
	* sysdeps/sparc/elf/configure: Regenerated.

2012-03-01  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (AS, LD): Require binutils 2.20 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give binutils 2.20
	as required minimum version.
	* INSTALL: Regenerated.

	[BZ #2541]
	[BZ #4108]
	* sysdeps/ieee754/flt-32/s_erff.c (__erfcf): Mask out one more bit
	before squaring exponent.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfcl): Mask out whole
	bottom long double and 27 bits of top long double before squaring
	exponent.
	* math/libm-test.inc (erfc_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Kai Tietz  <ktietz@redhat.com>

	* soft-fp/soft-fp.h (_FP_STRUCT_LAYOUT): New macro.
	* soft-fp/quad.h (_FP_UNION_Q): Use _FP_STRUCT_LAYOUT on struct
	containing bit-fields.
	* soft-fp/extended.h (_FP_UNION_E): Likewise.
	* soft-fp/single.h (_FP_UNION_S): Likewise.
	* soft-fp/double.h (_FP_UNION_D): Likewise.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13786]
	* sysdeps/i386/i686/multiarch/strcmp.S [USE_AS_STRCASECMP_L]: Do
	not include ../strcmp.S.
	[USE_AS_STRNCASECMP_L]: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c
	(__strcasecmp_l_ia32): Define as alias to __strcasecmp_l_nonascii.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c
	(__strncasecmp_l_ia32): Define as alias to
	__strncasecmp_l_nonascii.

	[BZ #5794]
	* math/libm-test.inc (expm1_test): Add test for bug 5794.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Reduce some expected errors.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-29  Jeff Law  <law@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Avoid
	out of bounds read.

2012-02-29  Marek Polacek  <polacek@redhat.com>

	[BZ #13706]
	* elf/rtld.c (dl_main): Always set l_used to 1 for vDSO.
	* elf/Makefile: Add rules to run tst-unused-dep.out.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: New file.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (llround_test): Move one test from
	lround_test.  Use TEST_f_L in moved test.
	(lround_test): Move misplaced test to llround_test.  Add testcase
	from bug 2561.

2012-02-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/e_expf.S: New file.
	Contributed by Dmitrieva Liubov <liubov.dmitrieva@gmail.com>.

2012-02-28  Stanislav Brabec  <sbrabec@suse.cz>

	[BZ #13637]
	* posix/regex_internal.c (re_string_skip_chars): Fix miscomputation
	of remain_len that may cause incomplete multi-byte character and
	false match.
	* posix/bug-regex33.c: New file.
	* posix/Makefile (tests): Add bug-regex33.

2012-02-28  Joseph Myers  <joseph@codesourcery.com>

	* manual/macros.texi: New file.
	* Makefile (INSTALL, NOTES): Depend on manual/macros.texi.
	* manual/libc.texinfo: Include macros.texi.
	* manual/creatute.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/arith.texi: Use macros @Theglibc{}, @theglibc{} and
	@glibcadj{} in references to the GNU C Library.
	* manual/charset.texi: Likewise.
	* manual/conf.texi: Likewise.
	* manual/contrib.texi: Likewise.  Consistently use "GNU C Library"
	when not using those macros.
	* manual/creature.texi: Likewise.
	* manual/crypt.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/header.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	* manual/job.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/libc.texiinfo: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/maint.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/nss.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/syslog.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* NOTES: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

2012-02-28  Andreas Schwab  <schwab@linux-m68k.org>

	* include/dirent.h: Include <dirstream.h> before
	<dirent/dirent.h>.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_copysignf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S: New file.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floorf.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix accidental use of
	frame pointer instead of stack pointer relative arg slot.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.

2012-02-27  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #3992]
	* stdlib/fmtmsg.c: Use of uint32_t requires stdint.h.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix comment formatting.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: Likewise.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (CC): Restrict allowed GCC versions to 4.3 and
	later.  Allow versions 5-9.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give GCC 4.3 as
	required minimum version and 4.6 as recommended version.  Do not
	mention bugs in GCC 2.7 and 2.8.
	* INSTALL: Regenerated.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: New file.

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Do not
	manipulate bits before adding and subtracting TWO112[sx].
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-02-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h (vdprintf, dprintf): Put these under
	[__USE_XOPEN2K8] rather than [__USE_GNU], to match the stdio.h decls.
	* libio/stdio.h (vdprintf, dprintf): Remove comment about these not
	being in POSIX, because they are in 1003.1-2008.

	* rt/tst-aio.c: Include <fcntl.h>.
	* rt/tst-aio7.c: Likewise.
	* rt/tst-aio64.c: Likewise.

	* stdio-common/tst-fmemopen.c (main): Remove spurious const.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (--with-headers): Describe headers as
	interface headers, not private headers.
	(Specific advice for GNU/Linux systems): Describe use of headers
	from "make headers_install", not private headers from older
	kernels.
	* INSTALL: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in (LIBC_LINUX_VERSION):
	Change to 2.6.19.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* manual/llio.texi (fclean): Remove documentation.

	* manual/Makefile (libc-texi-generated): New variable.  Include
	version.texi.
	(libc.dvi, libc.pdf, libc.info, libc/index.html): Depend on
	$(libc-texi-generated), not duplicated list of files.
	(version.texi, stamp-version): New rules.
	(realclean): Remove $(libc-texi-generated), not individual files
	from that list.  Do not remove dir-add.texinfo.
	* manual/libc.texinfo: Comment out uses of edition numbers and
	references to printed manual.  Remove last-updated dates.
	(EDITION): Comment out.
	(ISBN): Likewise.
	(VERSION, UPDATED): Remove.
	(version.texi): Include.

2012-02-27  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/posix/spawni.c: Include <signal.h>.
	* sysdeps/pthread/aio_cancel.c: Include <fcntl.h>.
	* sysdeps/pthread/aio_fsync.c: Likewise.

2012-02-26  Ulrich Drepper  <drepper@gmail.com>

	* conform/Makefile (tests): Run only when not cross-compiling and
	when fast-check is not defined.

	* conform/conformtest.pl: XPG7 and POSIX2008 require C99.
	* conform/data/limits.h-data: Fixes for POSIX2008.
	* conform/run-conformtest.sh: Run all tests.
	* include/arpa/inet.h: Changes to allow conformtest.pl to use the
	headers.
	* include/bits/dlfcn.h: Likewise.
	* include/langinfo.h: Likewise.
	* include/monetary.h: Likewise.
	* include/sys/poll.h: Likewise.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT and AT_EMPTY_PATH only
	for __USE_GNU.
	* posix/spawn.h: Define __need_sigset_t.
	* posix/sys/wait.h: Don't include <sys/resource.h>, define id_t here.
	* posix/unistd.h: Declare ctermid only for XPG before XPG6.
	* rt/aio.h: Don't include fcntl.h and signal.h.  Use bits/siginfo.h
	to get sigevent_t only.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg and recvmmsg
	only for __USE_GNU.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev only for __USE_GNU.
	* termios/termios.h: Declare tcgetsid also for POSIX2008.

	* conform/Makefile: For now ignore errors from run-conformtest.
	* conform/conformtest.pl: Simplify code.  Add -ansi to CFLAGS for
	POSIX to avoid namespace pollution.  Don't prepend headers.
	* conform/data/aio.h-data: Fixes for POSIX testing.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/time.h-data: Likewise.
	* conform/data/unistd.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.

	* io/sys/stat.h: fchmod was always in POSIX.
	* posix/sys/wait.h: Include <sys/resource.h> only for waitid.
	* posix/unistd.h: fsync and ftruncate were in early POSIX as well.
	* rt/aio.h: Define __need_timespec before including <time.h>.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Don't name siginfo_t
	struct.  Add forward declaration of pthread_attr_t and use it in
	sigevent.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Don't let __STRICT_ANSI__
	always remove CLK_TCK definition.

2012-02-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/dbl-64/k_tan.c: Replace with empty file.

2012-02-25  Ulrich Drepper  <drepper@gmail.com>

	* conform/run-conformtest.sh: New file.
	* conform/Makefile: Run run-conformtest for tests.
	* conform/conformtest.pl: Many bug fixes.  Add ISO C99, ISO C11
	support.

	* conform/data/uchar.h-data: New file.
	* conform/data/aio.h-data: Fixes for ISO C and POSIX 1995 testing.
	* conform/data/arpa/inet.h-data: Likewise.
	* conform/data/assert.h-data: Likewise.
	* conform/data/complex.h-data: Likewise.
	* conform/data/cpio.h-data: Likewise.
	* conform/data/ctype.h-data: Likewise.
	* conform/data/dirent.h-data: Likewise.
	* conform/data/dlfcn.h-data: Likewise.
	* conform/data/errno.h-data: Likewise.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/float.h-data: Likewise.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/fnmatch.h-data: Likewise.
	* conform/data/ftw.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/iconv.h-data: Likewise.
	* conform/data/inttypes.h-data: Likewise.
	* conform/data/langinfo.h-data: Likewise.
	* conform/data/libgen.h-data: Likewise.
	* conform/data/limits.h-data: Likewise.
	* conform/data/locale.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/monetary.h-data: Likewise.
	* conform/data/mqueue.h-data: Likewise.
	* conform/data/ndbm.h-data: Likewise.
	* conform/data/net/if.h-data: Likewise.
	* conform/data/netdb.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/nl_types.h-data: Likewise.
	* conform/data/poll.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/regex.h-data: Likewise.
	* conform/data/sched.h-data: Likewise.
	* conform/data/search.h-data: Likewise.
	* conform/data/semaphore.h-data: Likewise.
	* conform/data/setjmp.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdarg.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/string.h-data: Likewise.
	* conform/data/strings.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/ipc.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/msg.h-data: Likewise.
	* conform/data/sys/resource.h-data: Likewise.
	* conform/data/sys/select.h-data: Likewise.
	* conform/data/sys/sem.h-data: Likewise.
	* conform/data/sys/shm.h-data: Likewise.
	* conform/data/sys/socket.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/statvfs.h-data: Likewise.
	* conform/data/sys/time.h-data: Likewise.
	* conform/data/sys/timeb.h-data: Likewise.
	* conform/data/sys/times.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/uio.h-data: Likewise.
	* conform/data/sys/un.h-data: Likewise.
	* conform/data/sys/utsname.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/syslog.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/termios.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.
	* conform/data/utmpx.h-data: Likewise.
	* conform/data/varargs.h-data: Likewise.
	* conform/data/wchar.h-data: Likewise.
	* conform/data/wctype.h-data: Likewise.
	* conform/data/wordexp.h-data: Likewise.

	* include/stropts.h: New file.
	* include/uchar.h: New file.
	* include/aio.h: Changes to allow conformtest.pl to use the headers.
	* include/assert.h: Likewise.
	* include/ctype.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fnmatch.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libio.h: Likewise.
	* include/locale.h: Likewise.
	* include/math.h: Likewise.
	* include/net/if.h: Likewise.
	* include/netdb.h: Likewise.
	* include/netinet/in.h: Likewise.
	* include/pthread.h: Likewise.
	* include/pwd.h: Likewise.
	* include/regex.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/setjmp.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/cdefs.h: Likewise.
	* include/sys/mman.h: Likewise.
	* include/sys/msg.h: Likewise.
	* include/sys/resource.h: Likewise.
	* include/sys/select.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/utsname.h: Likewise.
	* include/sys/wait.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utime.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* include/wordexp.h: Likewise.

	* posix/tar.h (TSVTX): Should not be visible for POSIX before 2008.

	* time/time.h: TIME_UTC must be a macro.
	Make timespec_get available for ISO C11 only as well.

2012-02-24  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/fmtmsg.c (fmtmsg): Lock around use of severity list.
	Reported by Peng Haitao <penght@cn.fujitsu.com>.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Use -o not -a in test for unsupported multi-arch.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2012-01-19.16.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/Makefile (licenses): Change fdl-1.1.texi to fdl-1.3.texi.

2012-02-24  Roland McGrath  <roland@hack.frob.com>

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): Set to 1.3.
	* manual/fdl-1.3.texi: New file.
	* manual/fdl-1.1.texi: File removed.

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): New @set.
	Use it for mention of FDL in cover text.
	(Documentation License): Use it in @include file name.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	[BZ #5461]
	* manual/arith.texi (strtoll): Refer to LLONG_MAX and LLONG_MIN)
	(not LONG_LONG_MAX and LONG_LONG_MIN.
	* manual/lang.texi (LONG_LONG_MIN): Document first as ISO
	LLONG_MIN.  Refer to LONG_LONG_MIN only as older GCC-specific
	name.
	(LONG_LONG_MAX, LLONG_MAX, ULONG_LONG_MAX, ULLONG_MAX): Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2547]
	[BZ #11365]
	* sysdeps/ieee754/flt-32/s_nearbyintf.c (__nearbyintf): Do not
	manipulate bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (nearbyint_test): Add more tests.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2548]
	* sysdeps/ieee754/flt-32/s_rintf.c (__rintf): Do not manipulate
	bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (rint_test): Add more tests.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward: Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10110]
	* include/stdc-predef.h: New file.  Extracted from features.h.
	* include/features.h: Include stdc-predef.h.
	* Makefile (headers): Add stdc-predef.h.
	* CONFORMANCE (Compiler limitations): Update.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	* manual/libc.texinfo (VERSION, UPDATED): Revert.

2012-02-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: More jn test ULP updates.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/__longjmp.S: Unwind in the 'thread' path
	using a normal save/restore sequence, rather than allocating a
	dummy stack frame just to store a frame pointer and restore.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Fix stray word in line-wrapped comment.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/elf/configure.in (PI_STATIC_AND_HIDDEN): Define if
	both binutils and gcc support GOTDATA.

	* sysdeps/unix/sparc/sysdep.h: Document why we don't use
	"rd %pc" in the PIC register setup sequences.

	* sysdeps/sparc/crti.S: Try to use GOTDATA relocs.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.

	* config.h.in (HAVE_BINUTILS_GOTDATA): New.
	(HAVE_GCC_GOTDATA): New.
	* sysdeps/sparc/elf/configure.in: Test for GOTDATA
	relocation support in both binutils and gcc.
	* sysdeps/sparc/elf/configure: Regenerate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete.
	* sysdeps/sparc/sparc32/elf/configure: Delete.
	* sysdeps/sparc/sparc64/elf/configure.in: Delete.
	* sysdeps/sparc/sparc64/elf/configure: Delete.
	* sysdeps/sparc/elf/configure.in: New file.
	* sysdeps/sparc/elf/configure: Generate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete WDISP22 check.
	* sysdeps/sparc/sparc32/elf/configure: Regenerate.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure: Regenerate.
	* config.h.in (BROKEN_SPARC_WDISP22): Remove.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Do not mention specific glibc version
	numbers.
	* manual/libc.texinfo (VERSION, UPDATED): Update.
	(@copying): Use @copyright{} and range of years.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13695]
	* csu/Makefile (distribute): Remove initfini.c and defs.awk.
	[crti.S not in sysdirs] (generated): Do not append.
	[crti.S not in sysdirs] (omit-deps): Likewise.
	[crti.S not in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Remove rule.
	[crti.S not in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S not in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)):
	Likewise.
	[crti.S not in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S not in sysdirs] (CFLAGS-initfini.s): Remove variable.
	[crti.S not in sysdirs] (initfini.c): Remove vpath directive.
	* csu/defs.awk: Remove file.
	* sysdeps/generic/initfini.c: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile (CFLAGS-initfini.s): Remove
	variable.
	* sysdeps/powerpc/powerpc64/Makefile (CFLAGS-initfini.s):
	Likewise.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/epoll.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Remove
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Get flags from
	<bits/epoll.h>.
	(EPOLL_CLOEXEC, EPOLL_NONBLOCK): Don't define here.
	(__EPOLL_PACKED): Define to empty if not defined by
	<bits/epoll.h>.
	(struct epoll_event): Use __EPOLL_PACKED to make possibly packed.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/epoll.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/timerfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Get flags from
	<bits/timerfd.h>.
	(TFD_CLOEXEC, TFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timerfd.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Resort with gen-libm-test.pl -n
	in C locale.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-20  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Adjust ULPs for jn tests.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-19  Andreas Schwab  <schwab@linux-m68k.org>

	* manual/errno.texi (Error Codes): Add EHWPOISON entry.
	* sysdeps/unix/sysv/linux/bits/errno.h (EHWPOISON): Define if not
	defined.
	* sysdeps/unix/sysv/linux/sparc/bits/errno.h (EHWPOISON):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/Versions: Add new errlist compat
	entry for 2.16.

2012-02-19  Aurelien Jarno  <aurelien@aurel32.net>

	* math/w_acos.c: Use non-signaling floating-point comparisons.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9739]
	* manual/string.texi (strnlen): Use correct parameter name in
	equivalent expression.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #11174]
	* manual/users.texi (seteuid): Consistently use neweuid for
	argument name.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13704]
	* manual/nss.texi (Services in the NSS configuration): Correct
	list of services in example configuration file.

2012-02-19  Nick Bowler  <nbowler@draconx.ca>

	[BZ #11322]
	* manual/arith.texi: Remove statements about negative zero
	behaving identically to zero.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5993]
	* manual/install.texi: Do not document upgrading from libc5.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #4596]
	* manual/conf.texi (_POSIX_VERSION): Do not mention __POSIX__.

2012-02-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SPARC_PIC_THUNK): New macro.
	(SETUP_PIC_REG): Use SPARC_PIC_THUNK and don't save and restore
	%o7 across the call.
	(SETUP_PIC_REG_LEAF): Do %o7 save/restore in this new macro
	instead.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Use
	SETUP_PIC_REG_LEAF.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/sparc/crti.S: Use SETUP_PIC_REG.
	* sysdeps/sparc/crtn.S: Likewise.

2012-02-17  Ulrich Drepper  <drepper@gmail.com>

	* aout/Makefile: Remove.

2012-02-18  Rafe Kettler  <rafe.kettler@gmail.com>

	[BZ #13058]
	* manual/examples/argp-ex1.c (main): Format definition in GNU
	style.
	* manual/examples/argp-ex2.c (main): Likewise.
	* manual/examples/argp-ex3.c (main): Likewise.
	* manual/examples/argp-ex4.c (main): Likewise.
	* manual/examples/longopt.c (main): Use new-style prototype
	definition.
	* manual/examples/strncat.c (main): Specify return type and use
	(void) for arguments.
	* manual/examples/subopt.c (main): Use char **argv argument.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5077]
	* manual/lang.texi (FLT_EPSILON): Avoid description depending on
	rounding modes.

2012-02-17  Fabrice Bauzac  <fabrice.bauzac@wanadoo.fr>

	[BZ #6907]
	* manual/string.texi (strchr): Change when strchrnul is
	recommended.

2012-02-17  Dwayne Grant McConnell  <decimal@us.ibm.com>

	[BZ #174]
	* manual/locale.texi (setlocale): Document LOCPATH.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10210]
	* manual/process.texi (execle): Move @dots{} before last argument.

2012-02-17  Paul Bolle  <pebolle@tiscali.nl>

	[BZ #12047]
	* manual/charset.texi (Generic Charset Conversion): Fix typo
	(LC_TYPE -> LC_CTYPE).

2012-02-17  Nicolas Boulenguez  <nicolas.boulenguez@free.fr>

	[BZ #5805]
	* manual/arith.texi (scalbn): Use @var{} on parameter names.
	(scalbnf): Likewise.
	(scalbnl): Likewise.
	(scalbln): Likewise.
	(scalblnf): Likewise.
	(scalblnl): Likewise.
	* manual/errno.texi (vwarn): Name last parameter as @var{ap}.
	(vwarnx): Likewise.
	(verr): Likewise.
	(verrx): Likewise.
	* manual/filesys.texi (telldir): Use braces around return type.
	* manual/llio.texi (mmap): Add space after comma.
	(mmap64): Likewise.
	* manual/math.texi (jn): Use @var{} on parameter names.
	(jnf): Likewise.
	(jnl): Likewise.
	(yn): Likewise.
	(ynf): Likewise.
	(ynl): Likewise.
	* manual/memory.texi (alloca): Remove semicolon on @deftypefun
	line.
	* manual/resource.texi (ulimit): Use @dots{} instead of literal
	"...".
	(sched_get_priority_min): Remove semicolon on @deftypefun line.
	(sched_get_priority_max): Likewise.
	* manual/signal.texi (sigvec): Add space after comma.
	* manual/socket.texi (if_nametoindex): Use @var{} on parameter
	names.
	(if_indextoname): Likewise.
	(if_freenameindex): Likewise.
	(sendto): Use ',' instead of '.' in prototype.
	* manual/startup.texi (syscall): Use @dots{} instead of literal
	"...".
	* manual/stdio.texi (__fpending): Separate initial words of
	paragraph from @deftypefun line.
	* manual/syslog.texi (syslog): Use @dots{} instead of literal
	"...".
	(vsyslog): Use @var{} on parameter names.
	* manual/terminal.texi (stty): Use @var{} on parameter names.
	* manual/users.texi (getutmp): Use @var{} on parameter names.
	(getutmpx): Likewise.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6884]
	* manual/stdio.texi (fopen): Fix typos in description of
	",ccs=STRING".

2012-02-17  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #4026]
	* sysdeps/unix/sysv/linux/clock_settime.c: include <time.h> to
	get clock_id definition.

2012-02-17  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h: #include <sys/mman.h>.
	(madvise): Cast every argument to void on its own.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9902]
	* manual/startup.texi (Exit Status): Fix typo.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10140]
	* manual/examples/argp-ex1.c: Include <stdlib.h>.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.

2012-02-16  Richard Henderson  <rth@redhat.com>

	* sysdeps/s390/s390-32/crti.S, sysdeps/s390/s390-32/crtn.S: New files.
	* sysdeps/s390/s390-32/initfini.c: Remove.
	* sysdeps/s390/s390-64/crti.S, sysdeps/s390/s390-64/crtn.S:
	* sysdeps/s390/s390-64/initfini.c: Remove.

2012-02-15  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/crti.S, sysdeps/sh/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/sh/elf/initfini.c: Remove file.

2012-02-16  David S. Miller  <davem@davemloft.net>

	[BZ #11494]
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_FSYNC): Define.

	* sysdeps/sparc/Makefile: Add -fPIC when building crt{i,n}.S
	* sysdeps/sparc/crti.S: New file.
	* sysdeps/sparc/crtn.S: New file.
	* sysdeps/sparc/sparc32/Makefile: Remove initfini handling.
	* sysdeps/sparc/sparc64/Makefile: Likewise.

2012-02-15  Mike Frysinger  <vapier@gentoo.org>

	[BZ #3335]
	* sysdeps/unix/sysv/linux/getcwd.c: Include sys/param.h.

2012-02-15  Roland McGrath  <roland@hack.frob.com>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h (madvise): New macro.

	* mach/devstream.c (cookie_io_functions_t): Macro removed.
	(write, read, close): Likewise.
	Patch by Aurelien Jarno <aurelien@aurel32.net>.

2012-02-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/signalfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/signalfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/signalfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/signalfd.h: Get flags from
	<bits/signalfd.h>.
	(SFD_CLOEXEC, SFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/signalfd.h.

2012-02-14  Marek Polacek  <polacek@redhat.com>

	* sysdeps/x86_64/crti.S: New file.
	* sysdeps/x86_64/crtn.S: New file.
	* sysdeps/x86_64/elf/initfini.c: Remove file.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/inotify.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/inotify.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/inotify.h: Remove.
	* sysdeps/unix/sysv/linux/sys/inotify.h: Get flags from
	<bits/inotify.h>.
	(IN_CLOEXEC, IN_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/inotify.h.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/eventfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/eventfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/eventfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/eventfd.h: Get flags from
	<bits/eventfd.h>.
	(EFD_SEMAPHORE, EFD_CLOEXEC, EFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/eventfd.h.

2012-02-10  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Invoke
	__feraiseexcept instead of feraiseexcept.

	* rt/tst-cpuclock1.c: Add a few comments, and error checking for
	nanosleep invocations.
	* rt/tst-cpuclock2.c: Print some values as intended, fix explanatory
	strings, and add error checking for a nanosleep invocations.

2012-02-09  Paul Eggert  <eggert@cs.ucla.edu>

	Replace FSF snail mail address with URLs, as per GNU coding standards.
	Most of the snail mail addresses were wrong anyway, and omitting
	them makes the source code easier to maintain.  Almost all of the
	changes are to license notices and to locale LC_IDENTIFICATION
	addresses, except for this one:
	* manual/libc.texinfo: In "Published by", give the FSF's URL,
	not its snail mail address.

2012-02-09  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/internal_statvfs.c: Use <> for include
	of kernel-features.h.

	* elf/dl-tls.c (update_get_addr): Avoid pointer type mismatch warning.

2012-02-08  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Remove _G_HAVE_SYS_CDEFS conditional.
	* sysdeps/mach/hurd/_G_config.h: Remove _G_HAVE_SYS_CDEFS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.

2012-02-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/libm-test-ulps: Reduce ldouble ULPs for jn
	tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/powerpc/powerpc32/crti.S: New file.
	* sysdeps/powerpc/powerpc32/crtn.S: New file.
	* sysdeps/powerpc/powerpc64/crti.S: New file.
	* sysdeps/powerpc/powerpc64/crtn.S: New file.

	* Makeconfig (have-initfini): Don't set.
	* config.make.in (have-initfini, need-nopic-initfini): Don't set.
	* configure.in (nopic_initfini): Don't substitute.
	* config.h.in (HAVE_INITFINI): Don't #undef.
	* csu/Makefile (CPPFLAGS): Don't add -DHAVE_INITFINI.
	* csu/gmon-start.c: Assume HAVE_INITFINI is defined.

2012-02-08  Joseph Myers  <joseph@codesourcery.com>

	Support crti.S and crtn.S provided directly by architectures.
	* csu/Makefile [crti.S in sysdirs] (generated): Do not append.
	[crti.S in sysdirs] (omit-deps): Likewise.
	[crti.S in sysdirs] (CFLAGS-initfini.s): Do not define variable.
	[crti.S in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Disable rule.
	[crti.S in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)): Likewise.
	[crti.S in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S in sysdirs] (initfini.c): Remove vpath directive.
	* sysdeps/i386/crti.S, sysdeps/i386/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/i386/elf/Makefile: Remove file.
	* sysdeps/i386/Makefile (CFLAGS-initfini.s): Remove variable.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* sysdeps/generic/_G_config.h: Remove _G_ARGS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* math/Makefile (tests): Add tst-CMPLX2.
	* math/tst-CMPLX2.c: New file.

2012-02-07  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* math/libm-test.inc (jn_test): Add missing L suffix.

2012-02-06  Marek Polacek  <polacek@redhat.com>

	* sysdeps/s390/asm-syntax.h: Remove __ELF__ conditionals.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/s_log1p.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_expm1l.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/s_cexp.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/s_log1pl.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_log1pf.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/s_expm1l.S: Likewise.
	* sysdeps/x86_64/fpu/s_log1pl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #411]
	* sysdeps/i386/sysdep.h (__i686): Undefine and redefine.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h: Include <features.h>.
	(GET_PC_THUNK, GET_PC_THUNK_STR): Define conditionally on compiler
	version.

2012-02-05  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG_STR, LOAD_PIC_REG_STR):
	Define.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (check_consistency): Use
	LOAD_PIC_REG_STR.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (GET_PC_THUNK, GET_PC_THUNK_STR): Define.
	(SETUP_PIC_REG): Use GET_PC_THUNK.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Use GET_PC_THUNK_STR
	macro.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG, LOAD_PIC_REG): Define also
	for non-PIC compilation.
	(SETUP_PIC_REG): Add .p2align directive.
	* sysdeps/i386/i686/memcmp.S: Use macros for PIC register setup.
	* sysdeps/i386/i686/multiarch/bcopy.S: Likewise.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* math/tst-CMPLX.c: Include <stdio.h>.

2012-01-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/mathdef.h (float_t): Always define as
	float.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-31  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Don't define _PARAMS.
	* locale/programs/config.h: Don't define PARAMS.
	* stdlib/strtol_l.c: Likewise.
	(__strtol_l): Remove PARAMS from the prototype.

2012-01-31  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Remove name translation.  Don't use mixed-cap
	names.  Just use the correct names.  Remove unnecessary wrapper
	functions.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.

	* malloc/arena.c (arena_get2): Really don't call __get_nprocs if
	ARENA_TEST says not to.  Simplify test for creation of a new arena.
	Partially based on a patch by Siddhesh Poyarekar <siddhesh@redhat.com>.

2012-01-30  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-tls.c (__tls_get_addr): Optimize by transforming all calls
	into tail calls.
	(update_get_addr): New function.
	(tls_get_addr_tail): Take GET_ADDR_ARGS parameter, remove
	GET_ADDR_MODULE parameter.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* crypt/cert.c: Remove __STDC__ conditionals.
	* crypt/crypt-entry.c: Likewise.
	* crypt/crypt_util.c: Likewise.
	* libio/filedoalloc.c: Likewise.
	* libio/fileops.c: Likewise.
	* libio/genops.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopen64.c: Likewise.
	* libio/iogetdelim.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wgenops.c: Likewise.
	* locale/programs/xmalloc.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/xbug.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memcmp.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* time/strftime_l.c: Likewise.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_cc_sse2avx): AC_SUBST.
	* config.make.in (config-cflags-sse2avx): Define.
	* sysdeps/x86_64/fpu/multiarch/Makefile (CFLAGS-slowexp-avx.c):
	Fix typo.

2012-01-29  Chris Metcalf  <cmetcalf@tilera.com>

	* scripts/config.guess: Update from upstream config git repository.
	* scripts/config.sub: Likewise.

2012-01-28  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (EM_TILEPRO, EM_TILEGX): New macros.
	(EM_NUM): Update.
	(R_TILEPRO_*, R_TILEGX_*): New macros.

	* scripts/firstversions.awk: Fix bug in version range handling.

	* sysdeps/unix/sysv/linux/grantpt.c: Use <> brackets for not-cancel.h.

	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Call __fxstatat64.

	* include/sys/epoll.h: New file.
	* sysdeps/unix/sysv/linux/epoll_pwait.c (epoll_pwait): Mark as
	libc_hidden_def.

2012-01-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h (__signbitl): Optimize a bit.
	Avoid unnecessary __WORDSIZE == 64 test.
	(fmaxf): Use VEX format if possible.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.

	* config.h.in: Define HAVE_SSE2AVX_SUPPORT.
	* math/math_private.h: Remove libc_fegetround* and
	libc_fesetround*.
	* sysdeps/i386/configure.in: Check for -msse2avx.
	* sysdeps/x86_64/fpu/math_private.h: Use VEX-encoded instructions
	also if SSE2AVX is defined.
	Remove libc_fegetround* and libc_fesetround*.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Compile *-avx functions
	if config-cflags-sse2avx is yes.  Also add -DSSE2AVX to defines.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_AVX again instead
	of HAS_YMM_USABLE.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Simplify use of AVX instructions.

2012-01-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/a2/memcpy.S: Fix for when cache line
	size is not set.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.

2012-01-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13618]
	* elf/dl-open.c (dl_open_worker): Sort objects by dependency before
	relocation.
	* Makeconfig (libm): Define.
	* elf/Makefile: Add rules to build and run tst-relsort1.
	* elf/tst-relsort1.c: New file.
	* elf/tst-relsort1mod1.c: New file.
	* elf/tst-relsort1mod2.c: New file.

2012-01-27  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ldexp.c: Remove __STDC__ conditionals.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_nextafter.c: Likewise.
	* math/s_nexttowardf.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_jnl.c: Likewise.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* crypt/md5.h: Remove __STDC__ conditionals.
	* libio/libioP.h: Likewise.
	* locale/programs/config.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/unix/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h: Remove __STDC__ conditionals.
	* malloc/obstack.h: Likewise.
	* math/complex.h: Likewise.
	* math/math.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-26  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13583]
	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_OSXSAVE.
	Clean up HAS_* macros.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): If
	bit_AVX is set also check OSXAVE/XCR0 and set bit_YMM_Usable if
	possible.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_YMM_USABLE, not
	HAS_AVX.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

2012-01-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/tst-unique3.cc (gets): Remove declaration.
	* elf/tst-unique3lib.cc (gets): Likewise.
	* elf/tst-unique3lib2.cc (gets): Likewise.
	* elf/tst-unique4.cc (gets): Likewise.

2012-01-24  Ulrich Drepper  <drepper@gmail.com>

	* include/stdio.h: Add C++ protection.  Add gets declarations and
	definitions.
	* debug/tst-chk1.c: Don't declare gets here.
	* stdio-common/tst-gets.c: Likewise.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* posix/glob: Remove directory.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* wcsmbs/Makefile (tst-c16c32-1-ENV): Define.

2012-01-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/socket.c (__socket): Return EAFNOSUPPORT instead
	of the non-standard EPFNOSUPPORT.

2011-12-26  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/mmap.c (__mmap): When MAPADDR is nonzero, try
	__vm_allocate and __vm_map with ANYWHERE set to 0 first, and try with
	ANYWHERE set to 1 only on KERN_NO_SPACE error.

2012-01-21  Ulrich Drepper  <drepper@gmail.com>

	* wcsmbs/uchar.h: Test __STDC_VERSION__.

2012-01-20  Ulrich Drepper  <drepper@gmail.com>

	* nscd/aicache.c (addhstaiX): Do not cache negative results of
	transient errors.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.

2012-01-16  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Various cleanups.
	* malloc/hooks.c: Likewise.

	* stdlib/Makefile (tests): Add bug-fmtmsg1.
	* stdlib/bug-fmtmsg1.c: New file.

	* stdlib/fmtmsg.c (init): Add missing unlock.
	Patch by Peng Haitao <penght@cn.fujitsu.com>.

2012-01-12  Marek Polacek  <polacek@redhat.com>

	* libio/bits/stdio2.h: Do not define gets for ISO C11, ISO C++11,
	and _GNU_SOURCE.

2012-01-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Add GLUE and GENERATE_GOT_LABEL macros.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Call
	macro to ensure uniqueness of label name.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2012-01-11  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: New file.

	* sysdeps/ieee754/dbl-64/s_scalbln.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: New file.

2012-01-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: New file.

	* sysdeps/ieee754/dbl-64/s_modf.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.

	* math/bits/mathcalls.h: Add const attribute to fmin and fmax.

	* sysdeps/ieee754/dbl-64/s_scalbn.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: New file.

	* math/bits/math-finite.h: Add ldexp support.

2012-01-10  Marek Polacek  <polacek@redhat.com>

	* locale/programs/localedef.h (show_archive_content): Add noreturn
	attribute.

2012-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Add branch prediction.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* io/bits/poll2.h: Add __BEGIN/__END_DECLS.

	* io/Makefile (headers): Add bits/poll2.h.

2011-01-05  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S: Fix a
	typo #include statement.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* include/sys/cdefs.h: Define __attribute_alloc_size.
	* catgets/gencat.c: Add alloc_size attribute and apply consistently
	the malloc attribute to xmalloc, xcalloc, xrealloc, and xstrdup.
	* elf/pldd.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/strtab.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.h: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* nscd/nscd.h: Likewise.
	* nss/makedb.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.
	* locale/programs/localedef.c: Remove xmalloc prototype.
	* nscd/mem.c: Remove xmalloc and xcalloc prototypes.

2012-01-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Use alloca when
	appropriate.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* math/Makefile (tests): Add tst-CMPLX.
	* math/tst-CMPLX.c: New file.

	* math/complex.h (CMPLXL): Fix typo.

	* debug/Makefile (routines): Add poll_chk and ppoll_chk.
	* debug/Versions: Export __pool_chk and __ppoll_chk from libc for
	GLIBC_2.16.
	* debug/tst-chk1.c: Add poll and ppoll tests.
	* io/sys/poll.h: Include bits/poll2.h for _FORTIFY_SOURCE.
	* include/sys/poll.h: Add hidden proto for ppoll.
	* sysdeps/unix/sysv/linux/ppoll.c: Add hidden def.
	* sysdeps/mach/hurd/ppoll.c: Likewise.
	* io/ppoll.c: Likewise.
	* debug/poll_chk.c: New file.
	* debug/ppoll_chk.c: New file.
	* include/bits/poll2.h: New file.
	* io/bits/poll2.h: New file.

	[BZ #1350]
	* math/complex.h (CMPLX, CMPLXF, CMPLXL): Define.

	* configure.in: static is always set to yes.  Remove.
	* config.make.in: Don't set build-static.
	* Makeconfig: Remove use of build-static.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* math/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* nptl/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.

	* configure.in: PWD_P is not used anymore.
	* config.make.in: Remove PWD_P entry.

	* configure.in: Remove last remnants of RANLIB.
	No need to check for signed size_t anymore.
	Don't set libc_commonpagesize and libc_relro_required here for Alpha
	and IA-64.
	Remove __builtin_expect test because we require at least gcc 3.4.
	* aclocal.m4: Likewise.

	* wcsmbs/mbrtoc16.c: Implement using towc function.
	* wcsmbs/wcsmbsload.h: No need for toc16 and fromc16 functions.
	* wcsmbs/wcsmbsload.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/iconv_prog.c: Remove CHAR16 handling.

	* wcsmbs/c16rtomb.c: Remove #if 0'ed code.

	* wcsmbs/mbrtowc.c: Better check for invalid inputs.

	* configure.in: Remove --with-elf and --enable-bounded options.
	Dont set base_machine for ia64.  More non-ELF conditions removed.
	Remove testing and setting of leading underscore information.
	* config.make.in (build-bounded): Set to no.
	* config.h.in: Remove NO_UNDERSCORES entry.
	* include/libc-symbols.h: Don't define HAVE_WEAK_SYMBOLS.  ELF has
	them.
	* csu/start.c: Remove !NO_UNDERSCORE code.
	* locale/localeinfo.h: Likewise.
	* sysdeps/generic/machine-gmon.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/sparc/sparc32/alloca.S: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sparc/start.c: Likewise.
	* sysdeps/unix/sparc/sysdep.S: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/unix/start.c: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

2012-01-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13553]
	* misc/sys/cdefs.h: Remove __const, __signed, and __volatile definition
	for non-gcc.
	* argp/argp-fmtstream.h: Use const instead __const.
	* argp/argp.h: Likewise.
	* assert/assert.h: Likewise.
	* bits/fenv.h: Likewise.
	* bits/sched.h: Likewise.
	* bits/sigset.h: Likewise.
	* bits/sigthread.h: Likewise.
	* catgets/nl_types.h: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* crypt/crypt-private.h: Likewise.
	* crypt/crypt.h: Likewise.
	* crypt/crypt_util.c: Likewise.
	* ctype/ctype.h: Likewise.
	* debug/execinfo.h: Likewise.
	* debug/mbsnrtowcs_chk.c: Likewise.
	* debug/mbsrtowcs_chk.c: Likewise.
	* debug/wcsnrtombs_chk.c: Likewise.
	* debug/wcsrtombs_chk.c: Likewise.
	* debug/wcstombs_chk.c: Likewise.
	* dirent/dirent.h: Likewise.
	* dlfcn/dlfcn.h: Likewise.
	* elf/neededtest4.c: Likewise.
	* grp/grp.h: Likewise.
	* gshadow/gshadow.h: Likewise.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.h: Likewise.
	* iconv/loop.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* include/aio.h: Likewise.
	* include/aliases.h: Likewise.
	* include/argz.h: Likewise.
	* include/arpa/inet.h: Likewise.
	* include/assert.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/execinfo.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fenv.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libintl.h: Likewise.
	* include/mntent.h: Likewise.
	* include/netdb.h: Likewise.
	* include/pwd.h: Likewise.
	* include/rpc/netdb.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/shadow.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statfs.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/syslog.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/time.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* inet/aliases.h: Likewise.
	* inet/arpa/inet.h: Likewise.
	* inet/netinet/ether.h: Likewise.
	* inet/netinet/in.h: Likewise.
	* intl/libintl.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/ftw.h: Likewise.
	* io/sys/poll.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* io/utime.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* libio/bits/stdio2.h: Likewise.
	* libio/libio.h: Likewise.
	* libio/libioP.h: Likewise.
	* libio/stdio.h: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/locale.h: Likewise.
	* login/utmp.h: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/malloc.h: Likewise.
	* malloc/mcheck.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* math/bits/mathcalls.h: Likewise.
	* math/fenv.h: Likewise.
	* math/math_private.h: Likewise.
	* misc/bits/error.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/err.h: Likewise.
	* misc/error.h: Likewise.
	* misc/fstab.h: Likewise.
	* misc/mntent.h: Likewise.
	* misc/regexp.h: Likewise.
	* misc/search.h: Likewise.
	* misc/sgtty.h: Likewise.
	* misc/sys/mman.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* misc/sys/uio.h: Likewise.
	* misc/sys/xattr.h: Likewise.
	* misc/ttyent.h: Likewise.
	* nis/rpcsvc/ypclnt.h: Likewise.
	* nss/nss.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/fnmatch.h: Likewise.
	* posix/glob.h: Likewise.
	* posix/sched.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/wordexp.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resolv/netdb.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* rt/aio.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* shadow/shadow.h: Likewise.
	* signal/signal.h: Likewise.
	* socket/send.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/sys/socket.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/fmtmsg.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* stdlib/ucontext.h: Likewise.
	* streams/stropts.h: Likewise.
	* string/argz.h: Likewise.
	* string/bits/string2.h: Likewise.
	* string/string.h: Likewise.
	* string/strings.h: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_des.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/generic/inttypes.h: Likewise.
	* sysdeps/generic/net/if.h: Likewise.
	* sysdeps/generic/sys/swap.h: Likewise.
	* sysdeps/gnu/net/if.h: Likewise.
	* sysdeps/gnu/utmpx.h: Likewise.
	* sysdeps/i386/fpu/bits/fenv.h: Likewise.
	* sysdeps/i386/i486/bits/string.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-strtold_l.c: Likewise.
	* sysdeps/s390/bits/string.h: Likewise.
	* sysdeps/s390/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/mathinline.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigset.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sys_errlist.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/glob64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/olddirent.h: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/prlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/readv.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmp-convert.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmpx32.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/acct.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mount.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/swap.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Likewise.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Likewise.
	* sysdeps/x86_64/strncase_l-nonascii.c: Likewise.
	* sysvipc/sys/ipc.h: Likewise.
	* sysvipc/sys/msg.h: Likewise.
	* sysvipc/sys/sem.h: Likewise.
	* sysvipc/sys/shm.h: Likewise.
	* termios/termios.h: Likewise.
	* time/sys/time.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/uchar.h: Likewise.
	* wcsmbs/wchar.h: Likewise.
	* wctype/wctype.h: Likewise.

	[BZ #13551]
	* Makeconfig: Remove all but ELF support including AIX support.
	* Makerules: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Makefile: Likewise.
	* csu/version.c: Likewise.
	* debug/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* extra-lib.mk: Likewise.
	* iconv/Makefile: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/shlib-compat.h: Likewise.
	* resolv/Makefile: Likewise.
	* resolv/res_libc.c: Likewise.
	* rt/Makefile: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile: Likewise.
	* sysdeps/powerpc/powerpc64/Makefile: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/wordsize-32/divdi3.c: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

	* argp/Versions: Remove _argp_unlock_xxx.

	[BZ #13559]
	* abilist/ld.abilist: Update.  Adjust for removal of tls option.
	* abilist/libBrokenLocale.abilist: Likewise.
	* abilist/libanl.abilist: Likewise.
	* abilist/libc.abilist: Likewise.
	* abilist/libcrypt.abilist: Likewise.
	* abilist/libdl.abilist: Likewise.
	* abilist/libm.abilist: Likewise.
	* abilist/libnsl.abilist: Likewise.
	* abilist/libpthread.abilist: Likewise.
	* abilist/libresolv.abilist: Likewise.
	* abilist/librt.abilist: Likewise.
	* abilist/libthread_db.abilist: Likewise.
	* abilist/libutil.abilist: Likewise.
	* abilist/libnss_db.abilist: New file.

	* scripts/abilist.awk: Add support for indirect functions.

	* sysdeps/unix/sysv/linux/configure.in: Remove m68k support.

	* sysdeps/generic/ldsodefs.h: Remove Alpha support.

	* shlib-versions: Remove entries for ports architectures.

	* elf/tls-macros.h: Remove support for Alpha and IA-64.  Should be in
	files in ports.
	* elf/stackguard-macros.h: Remove support for IA-64.
	* elf/tst-auditmod1.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.

	* sysdeps/unix/sysv/linux/configure.in: Ports should define
	libc_cv_gcc_unwind_find_fde and arch_minimum_kernel in their
	configure files.

	[BZ #13552]
	* configure.in: Remove --enable-omitfp support.
	* FAQ.in: Adjust.
	* config.make.in: Likewise.
	* Makeconfig: Likewise.
	* manual/install.texi: Likewise.

	In case anyone cares, the IA-64 architecture could move to ports.
	* sysdeps/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/kernel-features.h: Remove IA-64 support.

	[BZ #13555]
	* configure.in: Remove entries for unsupported architectures.

	[BZ #13533]
	* iconv/gconv_builtin.h: Use CHAR16 for the char16_t conversions.
	* iconv/gconv_simple.c: Rename char16_t routines.  Add char16_t<->utf8
	routines.
	* iconv/gconv_int.h: Adjust prototypes for char16_t routines.
	* iconv/iconv_prog.c: Recognize CHAR16 as internal name.
	* wcsmbs/c16rtomb.c: Fix a few problems.  Disable all the code and
	fall back to using wcrtomb.
	* wcsmbs/mbrtoc16.: Fix implementation to handle real conversions.
	* wcsmbs/wcsmbsload.c: Make char16 routines optional.  Adjust for
	renaming.
	* wcsmbs/Makefile (tests): Add tst-c16c32-1:
	* wcsmbs/tst-c16c32-1.c: New file.

	* wcsmbs/wcrtomb.c: Use MB_LEN_MAX instead of MB_CUR_MAX for sizing
	local variable.

	* libio/stdio.h: Do not declare gets at all for _GNU_SOURCE.

	* elf/tst-unique3.cc: Add explicit declaration of gets.
	* elf/tst-unique3lib.cc: Likewise.
	* elf/tst-unique3lib2.cc: Likewise.
	* elf/tst-unique4.cc: Likewise.

	* string/test-strcpy.c (do_one_test): Fix format string for WIDE use.

2012-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13566]
	* assert/assert.h (static_assert): Don't define for C++.
	* libio/stdio.h (gets): Do declare for C++ <= C++11.
	* wcsmbs/uchar.h (char16_t, char32_t): Don't typedef for C++11.

2012-01-03  Ulrich Drepper  <drepper@gmail.com>

	* iconv/loop.c (single loop): Fix assertion in storing of
	remaining bytes.

	* posix/regcomp.c (init_word_char): Optimize a bit for sane encodings.

2012-01-01  Ulrich Drepper  <drepper@gmail.com>

	* posix/getconf.c: Update copyright year.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* debug/xtrace.sh: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* debug/catchsegv.sh: Likewise.

2011-12-30  Jakub Jelinek  <jakub@redhat.com>

	* posix/regex_internal.c (re_string_fetch_byte_case): Remove
	pure attribute.

2011-12-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13533]
	* iconv/gconv_simple.c: Add ASCII<->UTF-16 transformations.
	* iconv/gconv_builtin.h: Add entries for internal ASCII<->UTF-16
	transformations.
	* iconv/gconv_int.h: Likewise.
	* wcsmbs/Makefile (routines): Add mbrtoc16 and c16rtomb.
	* wcsmbs/Versions: Export mbrtoc16, c16rtomb, mbrtoc32, c32rtomb
	from libc for GLIBC_2.16.
	* wcsmbs/mbrtowc.c: Define mbrtoc32 alias.
	* wcsmbs/wcrtomb.c: Define c32rtomb alias.
	* wcsmbs/uchar.h: Really define mbstate_t.
	* wcsmbs/wchar.h: Allow defining mbstate_t in uchar.h.
	* wcsmbs/c16rtomb.c: New file.
	* wcsmbs/mbrtoc16.c: New file.
	* wcsmbs/wcsmbsload.c: Add static definitions for c16 conversions
	for C/POSIX locale.
	(__wcsmbs_load_conv): Do not fill in c16 routines yet.
	* wcsmbs/wcsmbsload.h (gconv_fcts): Add entries for c16 routines.

	* wcsmbs/wchar.h: Add missing __restrict.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13532]
	* time/Makefile (routines): Add timespec_get.
	* time/Versions: Export timespec_get from libc for GLIBC_2.16.
	* time/time.h: Define TIME_UTC and declare timespec_get.  Define
	timespec for ISO C11.
	* time/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/timespec_get.c: New file.

	[BZ #13531]
	* malloc/malloc.c: Define alias aligned_alloc for public_mEMALIGn.
	* stdlib/stdlib.h: Declare aligned_alloc.
	* Versions.def: Add GLIBC_2.16 for libc.
	* malloc/Versions: Export aligned_alloc from libc for GLIBC_2.16.

	[BZ 13527]
	* stdlib/stdlib.h: Make at_quick_exit and quick_exit available for
	ISO C11.

	* include/features.h: Define __USE_ISOCXX11 when compiling ISO C++11
	code.

	[BZ #13528]
	* libio/stdio.h: Do not declare gets for ISO C11 and _GNU_SOURCE.

	[BZ #13529]
	* assert/assert.h (static_assert): Define.

	* version.h: Update for 2.16 development version.

	[BZ #13526]
	* include/features.h: Handle __STDC_VERSION__ >= 201112 and
	_ISOC11_SOURCE.

	* version.h (RELEASE): Bump for 2.15 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 15.

	* sysdeps/x86_64/dl-machine.h: Fix typos in comments.
	Patch by Marek Polacek <mpolacek@redhat.com>.

	* bits/byteswap.h: Protect long long constants with __extension__.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/ia64/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Fix overrun in
	destination buffer.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: Likewise.

2011-12-23  Marek Polacek  <polacek@redhat.com>

	* elf/dl-addr.c (determine_info): Add inline keyword.
	* elf/tst-auditmod4b.c (check_avx): Likewise.
	* elf/tst-auditmod6b.c (check_avx): Likewise.
	* elf/tst-auditmod6c.c (check_avx): Likewise.
	* elf/tst-auditmod7b.c (check_avx): Likewise.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Also enable for
	!__SSE_MATH__.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-08-06  Bruno Haible  <bruno@clisp.org>

	[BZ #13061]
	* iconvdata/cp1258.c (comp_table_data): Combine U+00A8 U+0301 to
	U+0385, not to U+1FEE.

	[BZ #13062]
	* iconvdata/tcvn5712-1.c (comp_table_data): Remove useless and wrong
	entry for U+00A5 U+0301.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13166]
	* inet/getnameinfo.c (getnameinfo): Return EAI_OVERFLOW if the
	buffer for the output is too small.

	* sysdeps/i386/fpu/bits/fenv.h [__SSE_MATH__]: Add feraiseexcept
	optimization.

	[BZ #13185]
	* sysdeps/i386/fpu/fgetexcptflg.c (__fegetexceptflag): Also return
	SSE flags if possible.

2011-12-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-12-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants)
	(syscall-list-default-options, syscall-list-default-condition)
	(syscall-list-includes): Define.
	($(objpfx)syscall-%.h $(objpfx)syscall-%.d): Support arbitrary
	list of ABIs and options and #if conditions for each ABI.  Do not
	handle common syscalls between ABIs specially.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/s390/Makefile (64bit-predefine): Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/sparc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	* locale/iso-639.def: Add brx entry.

	[BZ #13328]
	* malloc/mtrace.c (tr_freehook): Avoid unnecessary unlock/lock.
	Proposed by Mariusz_Cukr <marcukr@op.pl>.

	* sysdeps/x86_64/fpu/bits/fenv.h: Use __REDIRECT_NTH for
	__feraiseexcept_renamed.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13538]
	* sysdeps/unix/sysv/linux/sys/epoll.h: Initialize EPOLLONESHOT and
	EPOLLET with unsigned values.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.

	* math/s_cacosh.c: Use Kahan's formula if the subtraction could lead
	to large cancellation.
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-11-18  Richard B. Kreckel  <kreckel@ginac.de>

	[BZ #13305]
	[BZ #12786]
	* math/s_cacosh.c: Fix rare miscomputation in cacosh().
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13439]
	* iconv/gconv.h: Define __GCONV_SWAP.
	* iconvdata/unicode.c: The swap bit must be stored in __flags.
	* iconvdata/utf-16.c: Likewise.
	* iconvdata/utf-32.c: Likewise.

2011-12-21  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13524]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Clear lowest limb of
	numerator after shifting it by one limb.

2011-12-19  Rafael Ávila de Espíndola  <rafael.espindola@gmail.com>

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Define it only
	under [__USE_EXTERN_INLINES].

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13446]
	* stdio-common/vfprintf.c (vfprintf): Fix extension of specs array.

2011-11-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile: Added locale-defines.sym generation.
	* sysdeps/powerpc/locale-defines.sym: Locale definitions for strcasecmp
	optimized code.
	* sysdeps/powerpc/powerpc32/power7/Makefile: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp_l.S: New file.
	* sysdeps/powerpc/powerpc64/power7/Makefile: Added unroll-loop option
	for strncasecmp/strncasecmp_l compilation.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp_l.S: New file.

2011-12-08  Marek Polacek  <mpolacek@redhat.com>

	[BZ #13484]
	* math/bits/math-finite.h: Use __REDIRECT_NTH and __NTH instead
	of __asm__.

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13506]
	* time/tzfile.c (__tzfile_read): Check values from file header.

2011-11-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Define SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/a2/memcpy.S: Use SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/dl-start.S: Likewise.
	* powerpc/powerpc32/elf/start.S: Likewise.
	* powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceil.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceilf.S: Likewise.
	* powerpc/powerpc32/fpu/s_floor.S: Likewise.
	* powerpc/powerpc32/fpu/s_floorf.S: Likewise.
	* powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* powerpc/powerpc32/fpu/s_rint.S: Likewise.
	* powerpc/powerpc32/fpu/s_rintf.S: Likewise.
	* powerpc/powerpc32/fpu/s_round.S: Likewise.
	* powerpc/powerpc32/fpu/s_roundf.S: Likewise.
	* powerpc/powerpc32/fpu/s_trunc.S: Likewise.
	* powerpc/powerpc32/fpu/s_truncf.S: Likewise.
	* powerpc/powerpc32/fpu/setjmp-common.S: Likewise.
	* powerpc/powerpc32/memset.S: Likewise.
	* powerpc/powerpc32/power4/fpu/s_llround.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/____longjmp_chk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/brk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2011-11-18  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* math/libm-test.inc: Added more nearbyint tests.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: New file.

2011-11-21  Ross Lagerwall  <rosslagerwall@gmail.com>

	* resolv/res_init.c (__res_vinit): Open /etc/resolv.conf with
	FD_CLOEXEC.

2011-11-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=wcsmbs] (sysdep_routines):
	Add wcscpy-ssse3 wcscpy-c.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wcscpy-c.c: New file.
	* sysdeps/x86_64/multiarch/wcscpy.S: New file.
	* sysdeps/x86_64/wcschr.S: New file.
	* sysdeps/x86_64/wcsrchr.S: New file.
	* string/test-strcmp.c: Remove checking of wcscmp function for
	wrong alignments.
	* sysdeps/i386/i686/multiarch/Makefile [subdir=wcsmbs]
	(sysdep_routines): Add wcscpy-ssse3 wcscpy-c wcschr-sse2 wcschr-c
	wcsrchr-sse2 wcsrchr-c.
	* sysdeps/i386/i686/multiarch/wcschr.S: New file.
	* sysdeps/i386/i686/multiarch/wcschr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcschr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: New file.
	* wcsmbc/wcschr.c (WCSCHR): New macro.

2011-11-17  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcsrchr wcscpy.
	* wcsmbs/test-wcsrchr.c: New file.
	* string/test-strrchr.c: Add wcsrchr support.
	(WIDE): New macro.
	* wcsmbs/test-wcscpy.c: New file.
	* string/test-strcpy.c: Add wcscpy support.
	(WIDE): New macro.

2011-12-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Lift one operation out of
	the inner loop.

2011-12-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13472]
	* sysdeps/powerpc/fpu/e_hypot.c (twoM600): Correct value.

2011-12-04  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Fix attribute.
	Minor optimizations.

	* sunrpc/clnt_unix.c (clntunix_control): Fix aliasing issues.
	* sunrpc/clnt_tcp.c (clnttcp_control): Likewise.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.

2011-12-03  Ulrich Drepper  <drepper@gmail.com>

	* inet/netinet/in.h: Provide versions of IN6_IS_ADDR_UNSPECIFIED,
	IN6_IS_ADDR_LOOPBACK, IN6_IS_ADDR_LINKLOCAL, IN6_IS_ADDR_SITELOCAL,
	IN6_IS_ADDR_V4MAPPED, IN6_IS_ADDR_V4COMPAT, and IN6_ARE_ADDR_EQUAL
	for gcc to avoid warnings.
	* inet/Makefile (tests): Add tst-checks.
	* inet/tst-checks.c: New file.

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Add attribute to avoid
	warning.

	* sysdeps/x86_64/multiarch/wmemcmp-c.c: Provide prototype for
	__wmemcmp_sse2.

	* sysdeps/x86_64/fpu/s_scalbln.c: Removed.
	* sysdeps/x86_64/fpu/s_scalbn.c: Removed.

	* malloc/mcheck.h: Fix use of incorrect encoding in comment.

2011-12-02  Ulrich Drepper  <drepper@gmail.com>

	* nis/nis_findserv.c (__nis_findfastest_with_timeout): Avoid aliasing
	problem.

	* nscd/aicache.c (addhstaiX): Avoid unused variable warning.

2011-11-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h (rNOSP): Define
	conditional on GCC version.
	(__arch_compare_and_exchange_val_8_acq)
	(__arch_compare_and_exchange_val_16_acq)
	(__arch_compare_and_exchange_val_32_acq, atomic_exchange_and_add)
	(atomic_add, atomic_add_negative, atomic_add_zero, atomic_bit_set)
	(atomic_bit_test_set): Use rNOSP instead of "r" constraints.

2011-12-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/backtrace.c: New file.

2011-12-02  Andreas Schwab  <schwab@redhat.com>

	* misc/bits/select2.h (__FD_ELT): Mark as extension.  Add
	parenthesis.

2011-12-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/futimes.c: Truncate time values when
	falling back to utime.

2011-11-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Relax cpow (2 + 3 i, 4 + 0 i)
	expectations for float.

2011-11-29  Andreas Schwab  <schwab@redhat.com>

	* locale/weight.h (findidx): Add parameter len.
	* locale/weightwc.h (findidx): Likewise.
	* posix/fnmatch_loop.c (FCT): Adjust caller.
	* posix/regcomp.c (build_equiv_class): Likewise.
	* posix/regex_internal.h (re_string_elem_size_at): Likewise.
	* posix/regexec.c (check_node_accept_bytes): Likewise.
	* string/strcoll_l.c (STRCOLL): Likewise.
	* string/strxfrm_l.c (STRXFRM): Likewise.

2011-11-17  Ulrich Drepper  <drepper@gmail.com>

	* Makefile.in: Remove CVSOPT handling.
	* configure.in: Remove use of AC_REVISION.
	* iconvdata/Makefile (distribute): No need to filter out CVS.
	* scripts/list-sources.sh: Remove CVS, subversion and monotone
	handling.

2011-11-16  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S
	[USE_AS_STRCASECMP_L]: Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_ssse3, __strncasecmp_ssse3): Handle
	NO_TLS_DIRECT_SEG_REFS.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S [USE_AS_STRCASECMP_L]:
	Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_sse4_2, __strncasecmp_sse4_2): Handle
	NO_TLS_DIRECT_SEG_REFS.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* locale/loadarchive.c (_nl_load_locale_from_archive): Open files with
	O_CLOEXEC.
	* locale/loadlocale.c (_nl_load_locale): Likewise.

2011-11-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU)
	[__ASSUME_POSIX_CPU_TIMERS > 0]: Assign to retval and break.
	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c
	(SYSCALL_GETTIME): Set errno on error.

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Properly
	count references to noai6ai_cached.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* time/getdate.c (__getdate_r): Set FD_CLOEXEC for given file.

	* sysdeps/unix/sysv/linux/readonly-area.c (__readonly_area): Set
	FD_CLOEXEC for /proc/self/maps.

	* sysdeps/unix/sysv/linux/getsysstats.c (phys_pages_info): Set
	FD_CLOEXEC for /proc/meminfo.

	* sysdeps/posix/getaddrinfo.c (gaiconf_init): Set FD_CLOEXEC for
	gai.conf.

	* resolv/res_query.c (res_hostalias):  Don't allow cancellation and set
	FD_CLOEXEC for given file.

	* resolv/res_hconf.c (do_init): Set FD_CLOEXEC for host.conf.

	* resolv/gethnamaddr.c (_sethtent): Don't allow cancellation and set
	FD_CLOEXEC for /etc/hosts.
	(_gethtent): Likewise.

	* nss/nsswitch.c (nss_parse_file): Set FD_CLOEXEC.

	* nss/nss_files/files-netgrp.c (_nss_files_setnetgrent): Don't allow
	cancellation and set FD_CLOEXEC for /etc/netgroup.

	* nss/nss_files/files-key.c (search): Don't allow cancellation when
	reading /etc/publickey.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Don't
	allow cancellation when reading /etc/group.

	* nss/nss_files/files-alias.c (internal_setent): Don't allow
	cancellation.
	(get_next_alias): Likewise for included file.  Also set FD_CLOEXEC.

	* nss/nss_files/files-XXX.c (internal_setent): Don't allow cancellation
	when using data file.

	* nis/nss-default.c (init): Set FD_CLOEXEC for /etc/default/nss.

	* nis/nis_file.c (read_nis_obj): Set FD_CLOEXEC.
	(write_nis_obj): Use "c" and "e" in fopen.

	* misc/mntent_r.c (__setmntent): Also append e to fopen format.

	* misc/getusershell.c (initshells): Set FD_CLOEXEC for /etc/shells.

	* misc/getttyent.c (setttyent): Set FD_CLOEXEC.

	* misc/getpass.c (getpass): Set FD_CLOEXEC for /dev/tty.

	* intl/localealias.c (read_alias_file): Set FD_CLOEXEC for
	locale.alias.

	* inet/ruserpass.c (ruserpass): Set FD_CLOEXEC for .netrc.

	* inet/rcmd.c (iruserfopen): Set FD_CLOEXEC for hosts.equiv.

	* iconv/gconv_conf.c (read_conf_file): Set FD_CLOEXEC for config file.

	* hesiod/hesiod.c (parse_config_file): Prevent cancellation in config
	file parsing and set FD_CLOEXEC.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* time/tzfile.c (__tzfile_read): Use "e" in fopen call.

2011-11-14  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (arena_get2): Don't call reused_arena when
	_int_new_arena failed.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]
	(sysdep_routines): Add strcasecmp_l-sse4 and strncase_l-sse4.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Re-enable SSE4.2 code.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-sse4.S: New file.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Use L macro consistently.

2011-11-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]: Add
	locale-defines.sym to gen-as-const-headers.
	(sysdep_routines): Add strcasecmp_l-c, strcasecmp-c,
	strcasecmp_l-ssse3, strncase_l-c, strncase-c, and strncase_l-ssse3.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcmp.S: Allow to use for
	strcasecmp_l and strncasecmp_l.
	* sysdeps/i386/i686/multiarch/locale-defines.sym: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: New file.
	* sysdeps/i386/i686/multiarch/strncase-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l.S: New file.

2011-11-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/clock_gettime.c (clock_gettime): No need to assign
	result of SYSDEP_GETTIME_CPU to retval.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU): Add
	parameter list to macro.  Remove trailing semicolon.  Adjust users.

	* resolv/getaddrinfo_a.c (getaddrinfo_a): Avoid warning about unused
	variable.

	* sysdeps/ieee754/ldbl-96/e_j0l.c (__ieee754_j0l): Avoid storing
	mantissa words.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l): Likewise.

	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Avoid warning
	from unused variable.

	* sysdeps/generic/sysdep.h: Clean up, pretty print, use dwarf2.h for
	DWARF definitions.
	* sysdeps/generic/dwarf2.h: Don't define enums when using the file
	for assembling.

	* elf/dl-iteratephdr.c [!SHARED] (__dl_iterate_phdr): Don't iterate
	over namespaces.

	* sunrpc/rpc_prot.c (rejected): Fix case value.

	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS): Use
	unsigned long long int to avoid warnings in shift.

	* posix/regex_internal.c (re_string_reconstruct): Actually use result
	of use of trans.
	* posix/regex_internal.h (re_string_wchar_at): Remove temporary
	variable tmp.

	* sysdeps/i386/i686/multiarch/wcscmp-c.c: Avoid warning.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: Likewise.

	* nis/nis_table.c (nis_list): Use variable of correct type for
	result of __follow_path call.

2011-11-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h: Using inline assembly version
	of math functions ceil, trunc, floor, round, and sqrt, when
	avaliable on the platform.
	* sysdeps/powerpc/fpu/e_sqrt.c: Undefine __ieee754_sqrt to avoid
	name clash.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.

2011-10-30  Marek Polacek  <mpolacek@redhat.com>

	* libio/wfileops.c (_IO_wfile_underflow_mmap): Remove unused variable.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Likewise.

2011-11-11  Roland McGrath  <roland@hack.frob.com>

	* include/unistd.h: Fix __readlink return type.
	Reported by Chris Metcalf <cmetcalf@tilera.com>.

2011-11-11  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/ucontext.h: Undo last change for makecontext.

2011-11-11  Andreas Schwab  <schwab@redhat.com>

	* nss/db-Makefile ($(VAR_DB)/group.db): Fix typo in awk script.

	* misc/sys/cdefs.h (__REDIRECT_NTHNL): Define.
	* setjmp/setjmp.h: Mark functions as non-leaf.
	* setjmp/bits/setjmp2.h: Likewise.
	* stdlib/ucontext.h: Likewise.

2011-11-10  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (_int_new_arena): Don't increment narenas.
	(reused_arena): Don't check arena limit.
	(arena_get2): Atomically check arena limit.

2011-11-08  Ulrich Drepper  <drepper@gmail.com>

	* locale/findlocale.c (_nl_find_locale): Use __strcasecmp_l.
	* intl/localealias.c (strcasecmp): Define using __strcasecmp_l.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Remove unnecessary
	instructions.

2011-11-07  Andreas Schwab  <schwab@redhat.com>

	* libio/genops.c (_IO_flush_all_lockp): Only register cleanup
	handler when locking.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Fix size of allocated buffer.

2011-11-04  Andreas Schwab  <schwab@redhat.com>

	[BZ #10103]
	* math/math.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Provide
	declarations for long double functions.
	* math/complex.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Likewise.

	* elf/sprof.c (load_shobj): Fix off-by-one when reading link name.

2011-11-03  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd.c (main): Don't start AVC thread until credentials are
	installed.

	* nss/makedb.c (set_file_creation_context): Do nothing if SELinux
	is disabled.

2011-11-02  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/ioctl-types.h (_IOT_sgttyb): Set number of chars to 4.

2011-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* include/alloca.h (stackinfo_alloca_round): Define.
	(extend_alloca): Use it.
	[_STACK_GROWS_UP]: Correct check for adjacent allocation.
	* elf/dl-deps.c (_dl_map_object_deps): Don't round alloca size
	here.

	* scripts/check-local-headers.sh: Ignore libaudit.h.

	* nscd/Makefile (extra-objs): Make recursively expanded.

2011-11-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/strcmp.S: Fix test for non-ASCII locales.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Likewise.

	* posix/tst-rfc3484.c: Add missing __free_in6ai dummy function.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/syscalls.list: Add process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/Versions: Export process_vm_readv and
	process_vm_writev from libc using GLIBC_2.15 version.

	* nscd/connections.c: Use kernel headers instead of <netlink/netlink.h>.

2011-10-31  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-deps.c (_dl_map_object_deps): Reuse alloca space to reduce
	stack usage.

2011-10-31  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13367]
	* nss/getent.c (initgroups_keys): Show error message in case no group
	names are given.

	* include/ifaddrs.h: Declare __free_in6ai and __bump_nl_timestamp.
	* inet/check_pf.c: Provide dummy versions of __free_in6ai and
	__bump_nl_timestamp.
	* nscd/connections (nscd_init): When host database is served open
	netlink socket and request notification about configuration changes.
	(main_loop_poll): Track netlink file descriptor and bump timestamp
	in case data becomes available.
	(main_loop_epoll): Likewise.
	* nscd/nscd-client.h (DB_VERSION): Bump to 2.
	(database_pers_head): Add extra_data fileds.
	Declare __nscd_get_mapping and __nscd_get_nl_timestamp.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): New function.
	* nscd/nscd_helper.c (__nscd_get_mapping): Renamed from get_mapping.
	Adjust caller.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Don't call free on
	in6ai data, call __free_in6ai.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd] (sysdep-CFLAGS):
	Add -DHAVE_NETLINK.
	* sysdeps/unix/sysv/linux/check_pf.c: Major rewrite.  Cache the
	interface information.  Reuse previous data if netlink timestamp
	is not changed.
	(__bump_nl_timestamp): New function.
	(__free_in6ai): New function.

2011-10-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Don't call
	close_not_cancel_no_status here.
	(__check_pf): Reorganize code a bit to not call close twice if OOM.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13276]
	* malloc/malloc.c (munmap_chunk): Don't use assertion to check munmap
	return value.

	* posix/sys/wait.h: Mark wait3 and wait4 with __THROWNL.
	* libio/stdio.h: Mark sprintf, vsprintf snprintf, vsnprintf, vasprintf,
	asprintf, __asprintf, obstack_printf, obstack_vprintf with __THROWNL.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	[BZ #10709]
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Fix incorrect rounding
	of sin. Patch suggested by Paul Zimmermann <zimmerma+gcc@loria.fr>.
	* math/libm-test.inc (sin_test): Add test case.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13337]
	* elf/sprof.c (load_shobj): Correctly NUL-terminate link name.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* elf/chroot_canon.c (chroot_canon): Cleanups.

	* elf/dl-lookup.c (_dl_setup_hash): Avoid warning.

	[BZ #13335]
	* elf/chroot_canon.c (chroot_canon): Fix readlink call.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* string/test-strchr.c: Make usable for strchrnul testing.
	* string/test-strchrnul.c: New file.
	* string/Makefile (strop-tests): Add strchrnul.

	* po/it.po: Update from translation team.
	* po/es.po: Likewise.

2011-10-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Take
	the three constants needed as parameters.  Drop the others.
	(strcasestr_sse42): Load uclow, uchigh, and lcqword and pass to
	__m128i_strloadu_tolower.
	Create and initialize variable zero and use it in all the places
	where _mm_setzero_si128 was used.

	* sysdeps/x86_64/fpu/multiarch/Makefile: Don't build brandred-avx.c,
	doasin-avx.c, dosincos-avx.c, e_asin-avx.c, mpatan-avx.c,
	mpatan2-avx.c, mpsqrt-avx.c, mptan-avx.c, sincos32-avx.c.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: There are no _avx variants
	anymore.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: Don't redirect __mpatan2.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: Don't redirect __mpatan.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: Don't redirect __branred,
	__docos, __dubsin, __mpcos, __mpcos1, __mpsin, __mpsin1.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: Don't redirect __branred,
	__mpranred, __mptan.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: Removed.

2011-10-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strnlen-c.c (libc_hidden_def): Only
	redefine if SHARED.
	* sysdeps/i386/i686/multiarch/wcscmp-c.c (libc_hidden_def): Likewise.

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Move
	wide char related routines to wcsmbs subdir.

2011-10-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #13344]
	* misc/sys/cdefs.h (__THROWNL): Define.
	* posix/unistd.h: Use __THREADNL instead of __THREAD
	for memory synchronization functions.

2011-10-26  Roland McGrath  <roland@hack.frob.com>

	[BZ #13349]
	* libio/Versions (GLIBC_2.0): Remove open_obstack_stream, which
	doesn't exist.
	* manual/stdio.texi (Obstack Streams): Node removed.

2011-10-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/ieee754/flt-32/e_j0f.c: Fix use of math_force_eval.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.

	* math/math_private.h (math_force_eval): Allow non-addressable
	arguments.
	* sysdeps/i386/fpu/math_private.h (math_force_eval): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Comment everything out, the
	file is not needed.

	* sysdeps/x86_64/fpu/multiarch/e_asin.c: Support AVX variants.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Fix some CFLAGS-* variables.
	Add AVX variants.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-avx.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Make bit_* macros available
	all the time.  Define bit_AVX.  Define HAS_* macros using bit_* macros.

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Move common code to earlier
	place.  Use VEX encoding when compiling for AVX.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcscmp.c (WCSCMP): Compare as wchar_t, not wint_t.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.

	* string/test-strchr.c (do_test): Don't generate NUL bytes.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_atanh.c: Use math_force_eval instead of a
	useless if() expression.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Use VEX encoding when possible.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-deps.c (_dl_map_object_deps): Remove always true
	condition.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/branred.c: Move FMA4 code into separate
	.text section.  Avoid duplicate constants.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: Likewise.

2011-10-24  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dla.h: Move to ...
	* sysdeps/x86_64/fpu/dla.h: ...here.
	(DLA_FMS): Some compilers fail to inline __builtin_fma in some
	situations.  Use __builtin_fma only for gcc 4.6 and up.

	* config.make.in: Add have-mfma4 entry.
	* configure.in: Substitute libc_cv_cc_fma4.
	* math/Makefile (dbl-only-routines): Add sincostab.
	* sysdeps/ieee754/dbl-64/dosincos.c: Don't include sincos.tbl.
	Use __sincostab not sincos.
	* sysdeps/ieee754/dbl-64/e_asin.c: Don't define aliases when function
	name is a macro.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.  Define singArctan2
	using __copysign.
	* sysdeps/ieee754/dbl-64/mpa.c: Don't export __acr.  Don't define
	__cr and __cpymn.  Define __cpy unless NO___CPY is defined.  Define
	norm, denorm, and __mp_dbl unless NO___MP_DBL is defined.
	* sysdeps/ieee754/dbl-64/mpa.h: Don't declare __acr, __cr, __cpymn,
	and __inv.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Make fastiroot static.
	* sysdeps/ieee754/dbl-64/s_atan.c: Define __signArctan using
	__copysign.
	* sysdeps/ieee754/dbl-64/s_sin.c: Use __sincostab not sincos.  Don't
	define aliases when function name is a macro.
	* sysdeps/ieee754/dbl-64/sincostab.c: Renamed from
	sysdeps/ieee754/dbl-64/sincos.tbl.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Add entries to build
	fma4-enabled routines.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c: New file.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: New file.

	* sysdeps/ieee754/dbl-64/doasin.c: Adjust for DLA_FMA -> DLA_FMS
	rename.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-24  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcslen.c: Don't define WCSLEN, reverse logic.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: New file.

	* sysdeps/ieee754/dbl-64/e_fmod.c (__ieee754_fmod): Add some branch
	prediction.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: New file.

	* string/strnlen.c: Don't define STRNLEN, reverse logic.
	Remove unused variable magic_bits.
	* sysdeps/i386/i686/multiarch/rtld-strnlen.c: New file.

	* string/strnlen.c: Define and use STRNLEN macro.
	* sysdeps/i386/i686/multiarch/Makefile [string] (sysdep_routines):
	Add strnlen-sse2, strnlen-c, wcslen-sse2, and wcslen-c.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Add support for strnlen.
	* wcsmbs/wcslen.c: Define and use WCSLEN.
	* sysdeps/i386/i686/multiarch/strnlen-c.c: New file.
	* sysdeps/i386/i686/multiarch/strnlen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strnlen.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcslen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen.S: New file.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-10-20  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strnlen-sse2-no-bsf.
	Rename strlen-no-bsf to strlen-sse2-no-bsf.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Rename to
	* sysdeps/x86_64/multiarch/strlen-sse2-no-bsf.S:
	Add strnlen support.
	(USE_AS_STRNLEN): New macro.
	* sysdeps/x86_64/multiarch/strnlen-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Update.
	Rename strlen-no-bsf.S to strlen-sse2-no-bsf.S
	* sysdeps/x86_64/wcslen.S: New file.

2011-10-20  Michael Zolotukhin  <michael.v.zolotukhin@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	XMM-moves are used for copying on small sizes.

2011-10-19  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcschr.
	* wcsmbs/test-wcschr.c: New file.
	* string/test-strchr.c: Update.
	Add wcschr support.
	(WIDE): New macro.

2011-10-18  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcslen.
	* wcsmbs/test-wcslen.c: New file.
	* string/test-strlen.c: Update.
	Add wcslen support.
	(WIDE): New macro.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2011-09-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: Update.
	Fix wrong comparison semantics.
	wcscmp shall use signed comparison not unsigned.
	Don't use substraction to avoid overflow bug.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: Likewise.
	* wcsmbc/wcscmp.c: Likewise.
	* string/test-strcmp.c: Likewise.
	Add new tests to check cases with negative values.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/dla.h: Move DLA_FMA definition to...
	* sysdeps/x86_64/dla.h: ...here.  New file.
	* sysdeps/ieee754/dbl-64/doasin.c: Use <dla.h> not "dla.h".
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Add __jnl_finite and
	__ynl_finite aliases.

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/dbl-64/dla.h: When compiling with FMA4 support
	define DLA_FMA.
	[DLA_FMA] (EMULV): Use DLA_FMA.
	[DLA_FMA] (MUL12): Use EMULV.
	* sysdeps/ieee754/dbl-64/doasin.c [DLA_FMA]: Don't define variables
	that are not needed.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-22  Andreas Schwab  <schwab@linux-m68k.org>

	* math/s_nan.c: Undef __nan.
	* math/s_nanf.c: Undef __nanf.
	* math/s_nanl.c: Undef __nanl.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Include <math.h> before
	"math_private.h".

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* math/s_catan.c: Add branch predictions.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.

	* math/math_private.h: Define __nan, __nanf, __nanl.
	* math/s_cacosh.c: Include <math_private.h>.
	* math/s_cacoshl.c: Likewise.
	* math/s_casinh.c: Likewise.
	* math/s_casinhf.c: Likewise.
	* math/s_casinhl.c: Likewise.
	* math/s_ccos.c: Rely entire on ccosh.
	* math/s_ccosf.c: Rely entire on ccoshf.
	* math/s_ccosl.c: Rely entirely on ccoshl.
	* math/s_ccosh.c: Add branch predicion helpers.  Add branch prediction.
	Remove tests for FE_INVALID.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Use __ieee754_sqrt.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Use __ieee754_sqrtf.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Use __ieee754_sqrtl.

2011-10-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Fix
	compilation problems.

	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Add a few more
	__builtin_expect.

2011-10-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/configure.in: Test for -mfma4 option.
	* config.h.in: Add HAVE_FMA4_SUPPORT entry.
	* sysdeps/x86_64/multiarch/init-arch.h: Define HAS_FMA4 and
	COMMON_CPUID_INDEX_80000001.
	* sysdeps/x86_64/multiarch/init-arch.c: Read 80000001 leaf for AMD.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c: Test for FMA4 support and
	use it if FMA3 is not supported.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c: Likewise.

	* sysdeps/x86_64/multiarch/s_fma.c: Moved to ../fpu/multiarch.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.

2011-10-20  Andreas Schwab  <schwab@redhat.com>

	[BZ #12892]
	* elf/dl-fini.c (_dl_sort_fini): Ignore relocation dependency if
	it would create a cycle with a link time dependency.

2011-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Small optimization to safe an
	instruction.
	* string/Makefile (strop-tests): Add rawmemchr.
	* string/test-rawmemchr.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_AVX and index_AVX.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: New file.  Split out from...
	* sysdeps/x86_64/multiarch/strcmp.S: ...here.  Include strcmp-sse42.S
	when compiling str{,n}casecmp and when AVX is available.  Hook up
	new optimized code in initializers.

2011-10-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv): Use
	__feraiseexcept instead of feraiseexcept.

2011-10-18  Ulrich Drepper  <drepper@gmail.com>

	* math/math_private.h: Define defaults for libc_fetestexcept and
	libc_feupdateenv.
	* sysdeps/ieee754/dbl-64/s_fma.c: Use libc_fe* interfaces.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fetestexcept and libc_feupdateenv.

	* math/math_private.h: Define defaults for libc_feholdexcept_setround,
	libc_feholdexcept_setroundf, libc_feholdexcept_setroundl.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Use libc_feholdexcept_setround.
	* sysdeps/x86_64/fpu/math_private.h: Define special version of
	libc_feholdexcept_setround.

	* sysdeps/x86_64/fpu/multiarch/Makefile [math] (libm-sysdep-routines):
	Add s_nearbyint-c and s_nearbyintf-c.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Define nearbyint and
	nearbyintf inlines.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf.S: New file.

	* math/math_private.h: Define defaults for libc_fegetround,
	libc_fegetroundf, libc_fegetroundl, libc_fesetround, libc_fesetroundf,
	libc_fesetroundl, libc_feholdexcept, libc_feholdexceptf,
	libc_feholdexceptl, libc_fesetenv, libc_fesetenvf, libc_fesetenvl.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Use
	libc_feholdexcept, libc_fesetround, libc_fesetenv instead of the
	standard functions.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	Remove comments and hacks for old compiler versions.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fegetround, libc_fesetround, libc_feholdexcept, and
	libc_feholdexceptl.

2011-10-18  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Add C linkage markers.
	(__feraiseexcept_renamed): Add __NTH.
	(feraiseexcept): Add __NTH.  Rename local variables to fix
	namespace violations.

2011-10-17  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Small optimization.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: New file.

	* sysdeps/x86_64/fpu/math_private.h: Relax asm requirements for
	recently added interfaces.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Add some parenthesis to be safe
	about macro parameter expansion.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't define inlines if
	__NO_MATH_INLINES is defined.  Cleanups.

	* sysdeps/x86_64/fpu/math_private.h: Define __rint, __rintf, __floor,
	and __floorf is target has SSE4.1.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: Undef first.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: Likewise.

	* sysdeps/x86_64/fpu/bits/mathinline.h (floor): Use correct function
	name.
	(floorf): Likewise.

	* nscd/netgroupcache.c (addgetnetgrentX): Fix #ifdef nesting.

2011-10-17  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/cdefs.h: Fix last change.

	* grp/initgroups.c (internal_getgrouplist): Fix initgroups
	database lookup.

2011-10-16  Ulrich Drepper  <drepper@gmail.com>

	* misc/sys/cdefs.h: Use leaf function attribute in __THROW.

	* sysdeps/ieee754/dbl-64/s_ceil.c: Avoid alias renamed.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf.S: New file.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add inlines for rint, rintf,
	ceil, ceilf, floor, floorf.

	* elf/do-rel.h (elf_dynamic_do_Rel): Work around linker problem.
	Perform IRELATIVE relocations last.

	* elf/do-rel.h: Add another parameter nrelative, replacing the
	local variable with the same name.  Change name of the function
	to end in Rel or Rela (uppercase).
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Add new element
	nrelative to ranges.  Only nonzero for DT_REL/DT_RELA.  Pass to the
	elf_dynamic_do_##reloc function.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/fpu/e_log.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: New file.

	* sysdeps/ieee754/dbl-64/e_cosh.c: Cleanup.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: New file.

	* math/Versions [libm] (GLIBC_2.15): Add __exp_finite, __expf_finite,
	__expl_finite.
	* math/bits/math-finite.h: Add entries for exp.
	* math/e_expl.c: Add __*_finite alias.
	* sysdeps/i386/fpu/e_exp.S: Likewise.
	* sysdeps/i386/fpu/e_expf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Complete rewrite.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

	* sysdeps/i386/i686/fpu/e_logf.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* ctype/ctype-info.c (__ctype_init): Define.
	* include/ctype.h (__ctype_init): Declare.
	(__ctype_b_loc): The variable is always initialized.
	(__ctype_toupper_loc): Likewise.
	(__ctype_tolower_loc): Likewise.
	* ctype/Versions: Export __ctype_init for GLIBC_PRIVATE.
	* sysdeps/unix/sysv/linux/init-first.c (_init): Call __ctype_init.

2011-10-15  Andreas Schwab  <schwab@linux-m68k.org>

	* wcsmbs/wmemcmp.c (WMEMCMP): Define.

	* configure.in: Also look in $cxxmachine/include for C++ system
	headers.

2011-09-27  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile: (sysdep_routines): Add
	memcmp-ssse3 wmemcmp-sse4 wmemcmp-ssse3 wmemcmp-c
	* sysdeps/x86_64/multiarch/memcmp-ssse3: New file.
	* sysdeps/x86_64/multiarch/memcmp.S: Update.  Add __memcmp_ssse3.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	Fixing indents.
	* sysdeps/x86_64/multiarch/wmemcmp.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-c.S: New file.
	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	wmemcmp-ssse3 wmemcmp-sse4 wmemcmp-c
	* sysdeps/i386/i686/multiarch/wmemcmp.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	* sysdeps/i386/i686/multiarch/memcmp-ssse3: Likewise.
	* sysdeps/string/test-memcmp.c: Update.
	Fix simple_wmemcmp.
	Add new tests.
	* wcsmbs/wmemcmp.c: Update.
	(WMEMCMP): New macro.
	Fix overflow bug.

2011-10-12  Andreas Jaeger  <aj@suse.de>

	[BZ #13268]
	* math/bits/mathcalls.h: Mark argument 2 of modf as non-null.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/iofwide.c (do_length): Avoid warning.

	* ctype/ctype.h (__isctype_f): Add missing __THROW.

2011-10-14  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (find_maps): Remove leftover debug message.

	* sysdeps/i386/fpu/e_log.S: Add real definition of __log_finite.
	* sysdeps/i386/fpu/e_logf.S: Add real definition of __logf_finite.
	* sysdeps/i386/fpu/e_logl.S: Add real definition of __logl_finite.
	* sysdeps/i386/i686/fpu/e_log.S: New file.
	* sysdeps/i386/i686/fpu/e_logf.S: New file.
	* sysdeps/i386/i686/fpu/e_logl.S: New file.

	* ctype/ctype.h: Add support for inlined isXXX functions when
	compiling C++ code.

2011-10-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Fix last change.

2011-10-13  Roland McGrath  <roland@hack.frob.com>

	[BZ #13291]
	* manual/string.texi (String/Array Comparison): Typo fix in strverscmp.

2011-10-13  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Add __feraiseexcept alias.
	* sysdeps/x86_64/fpu/feupdateenv.c: Use __feraiseexcept instead of
	feraiseexcept.

	* sysdeps/x86_64/memrchr.S: Check for zero size.

	* string/stratcliff.c: Add memrchr tests.

2011-10-12  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	memchr-sse2 memchr-sse2-bsf memrchr-sse2 memrchr-sse2-bsf memrchr-c
	rawmemchr-sse2 rawmemchr-sse2-bsf.
	* sysdeps/i386/i686/multiarch/memchr.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2-bsf.S: New file.
	* string/memrchr.c (MEMRCHR): New macro.

2011-10-12  Ulrich Drepper  <drepper@gmail.com>

	Add integration with gcc's -ffinite-math-only and optimize wrapper
	functions in libm.
	* Versions.def: Define GLIBC_2.15 version for libm.
	* math/Makefile (headers): Add bits/math-finite.h.
	* math/bits/math-finite.h: New file.
	* sysdeps/ia64/fpu/bits/math-finite.h: New file.
	* math/Versions [libm] (GLIBC_2.15): Export __*_finite symbols.
	* math/e_acoshl.c: Add __*_finite alias.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_exp10.c: Likewise.
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/e_scalb.c: Completely rewritten and optimized.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/math.h: Define __MATH_DECLARE_LDOUBLE if long double functions
	are declared.  Include <bits/math-finite.h> if -ffinite-math-only is
	used.
	* math/math_private.h: Declare __kernel_standard_f.
	* math/w_cosh.c: Remove cruft and optimize a bit.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/i386/fpu/e_acos.S: Add __*_finite alias.
	Minor optimizations.  Pretty printing.  Remove cruft.
	* sysdeps/i386/fpu/e_acosf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/e_acosl.c: Likewise.
	* sysdeps/i386/fpu/e_asin.S: Likewise.
	* sysdeps/i386/fpu/e_asinf.S: Likewise.
	* sysdeps/i386/fpu/e_atan2.S: Likewise.
	* sysdeps/i386/fpu/e_atan2f.S: Likewise.
	* sysdeps/i386/fpu/e_atan2l.c: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/e_exp10.S: Likewise.
	* sysdeps/i386/fpu/e_exp10f.S: Likewise.
	* sysdeps/i386/fpu/e_exp10l.S: Likewise.
	* sysdeps/i386/fpu/e_exp2.S: Likewise.
	* sysdeps/i386/fpu/e_exp2f.S: Likewise.
	* sysdeps/i386/fpu/e_exp2l.S: Likewise.
	* sysdeps/i386/fpu/e_fmod.S: Likewise.
	* sysdeps/i386/fpu/e_fmodf.S: Likewise.
	* sysdeps/i386/fpu/e_fmodl.c: Likewise.
	* sysdeps/i386/fpu/e_hypot.S: Likewise.
	* sysdeps/i386/fpu/e_hypotf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_remainder.S: Likewise.
	* sysdeps/i386/fpu/e_remainderf.S: Likewise.
	* sysdeps/i386/fpu/e_remainderl.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/fpu/e_sqrt.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtf.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrt.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtl.c: Likewise.
	* sysdeps/sparc/sparc32/e_sqrt.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/e_sqrtl.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_fmodl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_remainderl.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_sqrt.c: Likewise.  Fix parameter order
	* sysdeps/x86_64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h (__isnan): Cast d parameter.
	(__isnanf): Likewise.
	(__isinf_ns): Likewise.
	(__isinf_nsf): Likewise.
	(__finite): Likewise.
	(__finitef): Likewise.
	(__ieee754_sqrt): Define as macro.
	(__ieee754_sqrtf): Define as macro.
	(__ieee754_sqrtl): Define as macro.
	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Add partially
	inlined copy.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Make use of
	__FINITE_MATH_ONLY__ consistent.
	* sysdeps/ieee754/k_standard.c (__kernel_standard_f): New function.

2011-10-10  Andreas Schwab  <schwab@linux-m68k.org>

	* inet/getnetgrent_r.c (nscd_getnetgrent): Use __rawmemchr instead
	of rawmemchr.

	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: New file.

2011-10-09  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-10-08  Roland McGrath  <roland@hack.frob.com>

	* locale/programs/locarchive.c (prepare_address_space): New function.
	(create_archive, enlarge_archive, open_archive): Use it.

	* sysdeps/unix/sysv/linux/x86_64/time.c: Move #include <dl-vdso.h>
	inside [SHARED], where it is used.

	* nscd/nscd_proto.h: Declare __nscd_setnetgrent.

	* nss/getent.c (netgroup_keys): Remove unused variable.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.

2011-10-08  Ulrich Drepper  <drepper@gmail.com>

	* include/math.h: Declare __isinf_ns, __isinf_nsf, __isinf_nsl.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: New file.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: New file.
	* math/Makefile (libm-calls): Add s_isinf_ns.
	* math/divtc3.c: Use __isinf_nsl instead of isinf.
	* math/multc3.c: Likewise.
	* math/s_casin.c: Likewise.
	* math/s_casinf.c: Likewise.
	* math/s_casinl.c: Likewise.
	* math/s_ccos.c: Likewise.
	* math/s_ccosf.c: Likewise.
	* math/s_ccosl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Undefine __isnan.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Undefine __nan.
	* sysdeps/ieee754/flt-32/s_finitef.c: Undefine __finitef.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Undefine __nan.
	* sysdeps/x86_64/fpu/math_private.h: Add optimized versions of __isnsn,
	__isnanf, __isinf_ns, __isinf_nsf, __finite, and __finitef.

	* stdio-common/printf_fp.c: Use the fact that isinf returns the sign
	of the number.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.

	* math/e_exp10.c: Include math_private.h using <...> not "...".
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_scalb.c: Likewise.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_cacoshf.c: Likewise.
	* math/s_catan.c: Likewise.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_ccosh.c: Likewise.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ldexp.c: Likewise.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_cosh.c: Likewise.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_dremf.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_jnl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.

	* po/ja.po: Update from translation team.

2011-09-29  Andreas Jaeger  <aj@suse.de>

	[BZ #13179]
	* sunrpc/netname.c (netname2host): Fix logic.

	[BZ #6779]
	[BZ #6783]
	* math/w_remainderl.c (__remainderl): Handle (NaN, 0) and (Inf,y)
	correctly.
	* math/w_remainder.c (__remainder): Likewise.
	* math/w_remainderf.c (__remainderf): Likewise.
	* math/libm-test.inc (remainder_test): Add test cases.

2011-10-04  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix zarch smul_ppmm and
	sdiv_qrnnd.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* string/test-memcmp.c: Avoid unncessary #defines.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-08-31  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Update.
	Use new sse2 version for core i3 - i7 as it's faster
	than sse42 version.
	(bit_Prefer_PMINUB_for_stringop): New.
	* sysdeps/x86_64/rawmemchr.S: Update.
	Replace with faster SSE2 version.
	* sysdeps/x86_64/memrchr.S: New file.
	* sysdeps/x86_64/memchr.S: Update.
	Replace with faster SSE2 version.

2011-09-12  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-load.c (lose): Add cast to avoid warning.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* po/ca.po: Update from translation team.

	* inet/getnetgrent_r.c: Hook up nscd.
	* nscd/Makefile (routines): Add nscd_netgroup.
	(nscd-modules): Add netgroupcache.
	(CFLAGS-netgroupcache.c): Define.
	* nscd/cache.c (readdfcts): Add entries for GETNETGRENT and INNETGR.
	(cache_search): Add const to second parameter.
	* nscd/connections.c (serv2str): Add entries for GETNETGRENT and
	INNETGR.
	(dbs): Add netgrdb entry.
	(reqinfo): Add entries for GETNETGRENT, INNETGR, and GETFDNETGR.
	(verify_persistent_db): Handle netgrdb.
	(handle_request): Handle GETNETGRENT, INNETGR, and GETFDNETGR.
	* nscd/nscd-client.h (request_type): Add GETNETGRENT, INNETGR, and
	GETFDNETGR.
	(netgroup_response_header): Define.
	(innetgroup_response_header): Define.
	(datahead): Add netgroup_response_header and innetgroup_response_header
	elements.
	* nscd/nscd.conf: Add entries for netgroup cache.
	* nscd/nscd.h (dbtype): Add netgrdb.
	(_PATH_NSCD_NETGROUP_DB): Define.
	(netgroup_iov_disabled): Declare.
	(xmalloc, xcalloc, xrealloc): Move declarations here.
	(cache_search): Adjust prototype.
	Add netgroup-related prototypes.
	* nscd/nscd_conf.c (dbnames): Add netgrdb entry.
	* nscd/nscd_proto.h (__nss_not_use_nscd_netgroup): Declare.
	(__nscd_innetgr): Declare.
	* nscd/selinux.c (perms): Use access_vector_t as element type and
	add netgroup-related initializers.
	* nscd/netgroupcache.c: New file.
	* nscd/nscd_netgroup.c: New file.
	* nss/Versions [libc] (GLIBC_PRIVATE): Export __nss_lookup.
	* nss/getent.c (netgroup_keys): Use setnetgrent only for one parameter.
	For four parameters use innetgr.
	* nss/nss_files/files-init.c: Add definition and callback for netgr.
	* nss/nsswitch.c (__nss_lookup): Add libc_hidden_def.
	(__nss_disable_nscd): Set __nss_not_use_nscd_netgroup.
	* nss/nsswitch.h (__nss_lookup): Add libc_hidden_proto.

	* nscd/connections.c (register_traced_file): Don't register file
	for disabled databases.

2011-10-06  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Initialize written in all cases.

	* nss/nsswitch.c (__nss_lookup_function): Fix order of deleting
	from tree and freeing node.

2011-09-25  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_database_lookup): Handle
	nss_parse_service_list out of memory case.

2011-09-15  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_lookup_function): Handle __tsearch
	out of memory case.

2011-10-04  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_NOIFUNC): Define.
	* elf/do-rel.h (elf_dynamic_do_rel): Add parameter skip_ifunc and
	pass it down.
	* elf/dynamic-link.h: Adjust prototypes of elf_machine_rel,
	elf_machine_rela, elf_machine_lazy_rel.
	(_ELF_DYNAMIC_DO_RELOC): Add parameter skip_ifunc and pass it down.
	(ELF_DYNAMIC_DO_REL): Likewise.
	(ELF_DYNAMIC_DO_RELA): Likewise.
	(ELF_DYNAMIC_RELOCATE): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Pass __RTLD_NOIFUNC down
	to ELF_DYNAMIC_DO_REL.
	* elf/rtld.c (_dl_start): Adjust use of ELF_DYNAMIC_RELOCATE.
	(dl_main): In trace mode always set __RTLD_NOIFUNC.
	* elf/dl-conflict.c (_dl_resolve_conflicts): Adjust call to
	elf_machine_rela.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Add parameter
	skip_ifunc, don't call ifunc function if non-zero.
	(elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	(elf_machine_lazy_rela): Likewise.
	* sysdeps/ia64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.

2011-09-28  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-init.c (_nss_files_init): Use static
	initialization for all the *_traced_file variables.

2011-09-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-09-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13226]
	* manual/signal.texi (Longjmp in Handler): Grammar fixes.

2011-09-27  Andreas Schwab  <schwab@redhat.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Reread the line before reparsing it.

2011-09-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Use __asm instead of asm.

2011-09-21  Chung-Lin Tang  <cltang@codesourcery.com>
	    Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* resolv/Makefile (LDLIBS-resolv.so): Link in $(elfobjdir)/ld.so
	if needed for __stack_chk_guard.

2011-09-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/spawni.c (script_execute): Always define it.
	It will be optimized away if unused.
	(maybe_script_execute): New function.
	(__spawni): Call it.

	* Makerules: Don't include tls.make.
	(config-tls): Always set to thread.
	* tls.make.c: File removed.

2011-09-19  Mike Frysinger  <vapier@gentoo.org>

	* Makeconfig (CPPFLAGS): Prepend $(CPPFLAGS-config).
	* config.make.in (CPPFLAGS-config): New substituted variable.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: New file.

	[BZ #13192]
	* sysdeps/unix/sysv/linux/bits/in.h (IP_MULTICAST_ALL): Define.
	Patch mostly by Neil Horman <nhorman@tuxdriver.com>.

2011-09-15  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S
	(CALL_FAIL): Use HIDDEN_JUMPTARGET for __fortify_fail.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/____longjmp_chk.S (CHECK_RSP): Likewise.
	(CALL_FAIL): Macro removed.
	Patch mostly by Mike Frysinger <vapier@gentoo.org>.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add fmax and fmin optimizations
	for __FINITE_MATH_ONLY__ == 1.

2011-09-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/e_hypot.c (__ieee754_hypot): Use
	__ieee754_sqrt instead of sqrt.
	* sysdeps/powerpc/fpu/e_hypotf.c (__ieee754_hypotf): Use
	__ieee754_sqrtf instead of sqrtf.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c (__ieee754_rem_pio2f): Use
	__floorf instead of floorf.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Use
	__floorf, __truncf instead of floorf, truncf.

2011-09-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/s_copysign.S [ELF]: Use correct section.

	* sysdeps/x86_64/fpu/bits/mathinline.h (__MATH_INLINE): Use
	__extern_always_inline.
	Define lrint{f,} and llrint{f,} for 64-bit and in some situations for
	32-bit.

2011-09-14  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Also relocate in dependency order when
	doing symbol dependency testing.

2011-09-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Always define `refsym'.

2011-09-13  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/select.h (__FD_MASK): Renamed from __FDMASK.
	(__FD_ELT): Renamed from __FDELT.
	* misc/bits/select2.h (__FD_ELT): Likewise.
	* bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET): Use __FD_ELT,
	__FD_MASK instead of __FDELT, __FDMASK.
	* sysdeps/i386/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.
	* sysdeps/x86_64/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.

	* elf/Makefile (gen-ldd): Fix pattern.

	* elf/rtld.c (dl_main): Only use USE___THREAD when defined.
	(init_tls): Likewise.

2011-09-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: New file.

2011-09-12  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Cast to
	`struct cmsghdr *' instead of `void *'.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (__cmsg_nxthdr):
	Likewise.

2011-09-11  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (gen-ldd): Prepend $(..) to $(ldd-rewrite-script)
	if non-absolute.
	* sysdeps/unix/sysv/linux/configure.in: Remove leading ../ from
	ldd_rewrite_script.

2011-09-11  Ulrich Drepper  <drepper@gmail.com>

	* configure.in: Remove --with-tls option.
	* config.h.in: Remove HAVE_TLS_SUPPORT entry.
	* sysdeps/i386/elf/configure.in: Always test for TLS support and err
	out in case it is missing.
	* sysdeps/ia64/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Likewise.
	* sysdeps/s390/s390-32/elf/configure.in: Likewise.
	* sysdeps/s390/s390-64/elf/configure.in: Likewise.
	* sysdeps/sh/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc32/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/x86_64/elf/configure.in: Likewise.
	* sysdeps/mach/hurd/i386/tls.h: Remove test for HAVE_TLS_SUPPORT.
	* sysdeps/mach/hurd/tls.h: Likewise.

	[BZ #13067]
	* malloc/obstack.h [!GNUC] (obstack_free): Avoid cast to int.

	[BZ #13090]
	* configure.in: Fix use of AC_INIT.

	* elf/dl-support.c (_dl_pagesize): Initialize to EXEC_PAGESIZE.

2011-09-10  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Replace MALLOC_FAILURE_ACTION with use of
	__set_errno.
	* malloc/hooks.c: Likewise.

	[BZ #11929]
	* malloc/arena.c (ptmalloc_init_minimal): Removed.  Initialize all
	variables statically.
	(narenas): Initialize.
	(list_lock): Initialize.
	(ptmalloc_init): Don't call ptmalloc_init_minimal.  Remove
	initializtion of main_arena and list_lock.  Small cleanups.
	Replace all uses of malloc_getpagesize with GLRO(dl_pagesize).
	* malloc/malloc.c: Remove malloc_getpagesize.  Include <ldsodefs.h>.
	Add initializers to main_arena and mp_.
	(malloc_state): Remove pagesize member.  Change all users to use
	GLRO(dl_pagesize).

	* elf/rtld.c (rtld_global_ro): Initialize _dl_pagesize.
	* sysdeps/unix/sysv/linux/getpagesize.c: Simplify.  GLRO(dl_pagesize)
	is always initialized.

	* malloc/malloc.c: Removed unused configurations and dead code.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/Makefile (CPPFLAGS-malloc.c): Don't add -DATOMIC_FASTBINS.

	* include/tls.h: Removed.  USE___THREAD must always be defined.
	* bits/libc-tsd.h: Don't handle !USE___THREAD.
	* elf/dl-libc.c: Likewise.
	* elf/dl-tsd.c: Likewise.
	* include/errno.h: Likewise.
	* include/netdb.h: Likewise.
	* include/resolv.h: Likewise.
	* inet/herrno-loc.c: Likewise.
	* inet/herrno.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/malloc.c: Likewise.
	* resolv/res-state.c: Likewise.
	* resolv/res_libc.c: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* sysdeps/ia64/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/sh/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/dl-machine.h: Likewise.
	* tls.make.c: Likewise.

	* configure.in: Remove --with-__thread option.  Make tests for
	--no-whole-archive, __builtin_expect, symbol redirection, __thread,
	tls_model attribute fail if no support is available.  Remove
	USE_IN_LIBIO.
	* Makeconfig: Adjust for dropped configure option.  All features are
	now mandatory.
	* Makerules: Likewise.
	* Versions.def: Likewise.
	* argp/argp-fmtstream.c: Likewise.
	* argp/argp-fmtstream.h: Likewise.
	* argp/argp-help.c: Likewise.
	* assert/assert.c: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Versions: Likewise.
	* csu/init.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls10.h: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tlsmod11.c: Likewise.
	* elf/tst-tlsmod12.c: Likewise.
	* elf/tst-tlsmod13.c: Likewise.
	* elf/tst-tlsmod13a.c: Likewise.
	* elf/tst-tlsmod14a.c: Likewise.
	* elf/tst-tlsmod15b.c: Likewise.
	* elf/tst-tlsmod16a.c: Likewise.
	* elf/tst-tlsmod16b.c: Likewise.
	* elf/tst-tlsmod7.c: Likewise.
	* elf/tst-tlsmod8.c: Likewise.
	* elf/tst-tlsmod9.c: Likewise.
	* gmon/gmon.c: Likewise.
	* grp/fgetgrent_r.c: Likewise.
	* grp/putgrent.c: Likewise.
	* hurd/fopenport.c: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/tls.h: Likewise.
	* intl/gettextP.h: Likewise.
	* intl/loadinfo.h: Likewise.
	* locale/global-locale.c: Likewise.
	* locale/localeinfo.h: Likewise.
	* mach/devstream.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/set-freeres.c: Likewise.
	* misc/err.c: Likewise.
	* misc/getttyent.c: Likewise.
	* misc/mntent_r.c: Likewise.
	* posix/getopt.c: Likewise.
	* posix/wordexp.c: Likewise.
	* pwd/fgetpwent_r.c: Likewise.
	* resolv/Versions: Likewise.
	* resolv/res_hconf.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* shadow/putspent.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdlib/abort.c: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (jn_test): Add tests for BZ#11589.
	* sysdeps/x86_64/fpu/libm-test-ulps: Add new ULPs for jn_test,
	regenerate with gen-libm-tests.pl.

2010-05-12  Petr Baudis  <pasky@suse.cz>

	[BZ #11589]
	* sysdeps/ieee754/dbl-64/e_jn.c: Compensate major precision loss
	around j0() zero points by switching to j1().
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h (__cmsg_nxthdr): Use NULL
	instead of 0.
	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Use (void*)0
	instead of 0.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	Patch in part by Pavel Roskin <proski@gnu.org>.

	[BZ #13138]
	* stdio-common/vfscanf.c (ADDW): Allocate large memory block with
	realloc.
	(_IO_vfscanf_internal): Remove reteof.  Use errout after setting done.
	Free memory block if necessary.

	[BZ #12847]
	* libio/genops.c (INTDEF): For string streams the _lock pointer can
	be NULL.  Don't lock in this case.

2011-09-09  Roland McGrath  <roland@hack.frob.com>

	* elf/elf.h (ELFOSABI_GNU): New macro.
	(ELFOSABI_LINUX): Define to that.

2011-07-29  Denis Zaitceff  <zaitceff@gmail.com>

	* string/strncat.c (strncat): Undef the symbol in case it has been
	defined in bits/string.h.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/sotruss.ksh: Clean up, fix, and complete help messages.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Fill in data from the real
	link map.

2011-08-17  Andreas Jaeger  <aj@suse.de>

	* elf/sprof.c (load_shobj): Remove unused variable log_hashfraction.

2011-08-18  Paul Pluzhnikov  <ppluzhnikov@google.com>
	    Ian Lance Taylor  <iant@google.com>

	* math/libm-test.inc (lround_test): New testcase.
	* sysdeps/ieee754/dbl-64/s_lround.c (__lround): Don't lose precision.

2011-09-08  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Remove support for automatic cvs check-ins.
	* Makerules: Likewise.
	* config.make.in: Likewise.
	* configure.in: Likewise.
	* intl/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* po/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/sparc/sparc32/Makefile: Likewise.

	[BZ #13118]
	* posix/Makefile (bug-regex32-ENV): Define.
	Patch by John Stanley <jpsinthemix@verizon.net>.

	* misc/Makefile (headers): Add bits/select2.h.
	* misc/sys/select.h: Include bits/select2.h for _FORTIFY_SOURCE.
	* misc/bits/select2.h: New file.
	* include/bits/select2.h: New file.
	* debug/Makefile (routines): Add fdelt_chk.
	* debug/Versions: Export __fdelt_chk and __fdelt_warn for GLIBC_2.15.
	* debug/tst-chk1.c (do_test): Add tests for FD_SET, FD_CLR, and
	FD_ISSET.
	* debug/fdelt_chk.c: New file.

	* wcsmbs/test-wcscmp.c: Moved from string/*.  Adjust.
	* wcsmbs/test-wmemcmp.c: Likewise.
	* string/Makefile (strop-tests): Remove wcscmp and wmemcmp.
	* wcsmbs/Makefile (strop-tests): Add wcscmp and wmemcmp.

2011-09-08  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile (strop-tests): Add memcmp.
	* string/test-wmemcmp.c: New file.
	* string/test-memcmp.c: Add wmemcmp support.

2011-09-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #13153]
	* manual/libc.texinfo (EDITION, VERSION, UPDATED): Update for
	2011-07-19 change.

	* sysdeps/mach/hurd/fork.c (__fork): Initialize REFS so we don't use a
	garbage value in a __mach_port_mod_refs call in the cases of the
	task-self and thread-self ports.

2011-09-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/sys/param.h (DEV_BSIZE): New macro.

2011-09-08  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (lose): Check for non-null L.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (open_verify): Use O_CLOEXEC.

	* elf/dl-libc.c (dlerror_run): Pass back error code from
	dl_catch_error.

	[BZ #13123]
	* elf/dl-load.c (lose): Free l_origin if it is valid.

	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Fix mixup in section
	names.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: Likewise.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@intel.com>.

2011-08-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/e_hypot.c: New file.
	* sysdeps/powerpc/fpu/e_hypotf.c: New file.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_cosf.c: New file.
	* sysdeps/powerpc/fpu/k_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_cosf.c: New file.
	* sysdeps/powerpc/fpu/s_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_scalbnf.c: New file.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: New file.

2011-08-15  Alan Modra  <amodra@gmail.com>

	[BZ #13092]
	* sysdeps/powerpc/Makefile (gmon): Move sysdep_routines to..
	* sysdeps/powerpc/powerpc64/Makefile (gmon): ..here..
	* sysdeps/powerpc/powerpc32/Makefile (gmon): ..and here.  Add
	ppc_mcount to static-only-routines.
	* sysdeps/powerpc/powerpc32/Versions: Export GLIBC_PRIVATE
	__mcount_internal.
	* sysdeps/powerpc/powerpc32/ppc-mcount.S (_mcount): Call
	__mcount_internal with usual JUMPTARGET.  Remove useless nop.

2011-08-18  David Flaherty  <flaherty@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: New file which checks
	for finite and infinity parameters.

2011-08-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Adjust the alignment
	and add nop instructions for throughput optimization.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-07-28  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Optimize the
	aligned copy for power7 with vector-scalar instructions.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.

2011-07-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Simplify
	AVX check.

2011-09-07  Andreas Schwab  <schwab@redhat.com>

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Revert
	last change.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): If vDSO is not present store pointer to
	syscall wrapper around clock_gettime in __vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Add entry for
	clock_gettime.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c (INTERNAL_GETTIME):
	Forgot to demangle the pointer.

	* sysdeps/i386/sysdep.h: Define atom_text_section.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Place function in
	section with atom_text_section.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c: New file.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSCALL_GETTIME): Allow
	already be defined.  Change to take two parameters and don't assign
	result to variable.  Adjust all users.
	Define INTERNAL_GETTIME if not already defined.
	Use INTERNAL_GETTIME instead of INTERNAL_VSYSCALL got clock_gettime
	call.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Don't define
	HAVE_CLOCK_GETTIME_VSYSCALL.
	* sysdeps/unix/clock_gettime.c: Adjust use of SYSDEP_GETTIME_CPU.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Don't use
	gettimeofday vsyscall, just use time.

2011-09-06  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Include
	<errno.h>.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Add entry for getcpu
	syscall on x86-64.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Use real
	syscall.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [!SHARED]: Use real
	syscall if possible.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd.c (get_process_info): Don't read whole ELF header, just
	e_ident.  Don't pass to find_mapsXX.
	* elf/pldd-xx.c (find_mapsXX): Remove second parameter.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2-no-bsf strrchr-sse2-no-bsf
	* sysdeps/x86_64/multiarch/strchr.S: Update.
	Check bit_slow_BSF bit.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: New file.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13134]
	* sysdeps/posix/spawni.c (script_execute): Define only for compatibility
	before glibc 2.15.
	(tryshell): Define.
	(__spawni): Change last parameter to be flag.  Test
	SPAWN_XFLAGS_USE_PATH flag to use path or not.
	Don't try to use shell unless SPAWN_XFLAGS_TRY_SHELL is set.
	* sysdeps/mach/hurd/spawni.c: Change last parameter and adjust user.
	* posix/spawni.c: Likewise.
	* posix/spawn.c: Add compat version which passed SPAWN_XFLAGS_TRY_SHELL.
	* posix/spawnp.c: Likewise.  Change normal version to use
	SPAWN_XFLAGS_USE_PATH.
	* posix/spawn_int.c: Define SPAWN_XFLAGS_USE_PATH and
	SPAWN_XFLAGS_TRY_SHELL.

	[BZ #13150]
	* posix/glob.h: Remove gcc 1.x support.

	[BZ #13068]
	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Use O_CLOEXEC.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2 strrchr-sse2 strchr-sse2-bsf
	strrchr-sse2-bsf
	* sysdeps/i386/i686/multiarch/strchr.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: New file.

2011-08-29  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: New file.

	* sysdeps/i386/i686/multiarch/Makefile: (sysdep_routines): Add
	wcscmp-c wcscmp-sse2
	* sysdeps/i386/i686/multiarch/wcscmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscmp.S: New file.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: New file.
	* wcsmbs/wcscmp.c: Allow renaming.

2011-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_fabsf.S: Use first argument
	stack slot, rather than the struct return pointer slot.
	* sysdeps/sparc/sparc32/fpu/s_fabs.c: Delete.
	* sysdeps/sparc/sparc32/fpu/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fabs.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/fpu/Implies: Likewise.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Fix to match
	kernel in 64-bit binaries.

2011-09-01  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (HWCAP_SPARC_*): Move to..
	* sysdeps/sparc/sysdep.h: this new file and add new values.
	* sysdeps/unix/sparc/sysdep.h: Include sysdeps/sparc/sysdep.h
	* sysdeps/sparc/dl-procinfo.h: Include sysdep.h and increase
	_DL_HWCAP_COUNT to 24.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.
	* sysdeps/sparc/sparc32/bits/atomic.h: Don't use magic local
	__ATOMIC_HWCAP_SPARC_V9 define, use sysdep.h one instead.
	* sysdeps/sparc/sparc32/dl-machine.h: Include sysdep.h
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use HWCAP_SPARC_*
	instead of magic constants.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

2011-08-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SETUP_PIC_REG): Define.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h (PSEUDO):
	Reimplement to do errno handling inline.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Include
	sysdeps/unix/sparc/sysdep.h instead of sysdeps/unix/sysdep.h
	(PSEUDO): Reimplement to do errno handling inline.
	(ret, ret_NOERRNO, ret_ERRVAL, r0, r1, MOVE): Don't redefine.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL):
	Implement in terms of INTERNAL_SYSCALL and __set_errno, just like
	i386.
	(INTERNAL_SYSCALL_DECL): Declare %g1 var for err state.
	(inline_syscall*): Add 'err' argument.
	(INTERNAL_SYSCALL, INTERNAL_SYSCALL_NCS,
	INTERNAL_SYSCALL_ERROR_P): Likewise and pass it down.
	(INLINE_CLONE_SYSCALL): Reimplement in terms of __SYSCALL_STRING,
	INTERNAL_SYSCALL_ERRNO, and INTERNAL_SYSCALL_ERROR_P.

	* scripts/data/localplt-sparc-linux-gnu.data: Remove 'ffs'.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2011-08-30  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Relocate objects in dependency order.

2011-08-29  Jiri Olsa <jolsa@redhat.com>

	* sysdeps/i386/dl-trampoline.S (_dl_runtime_profile): Fix cfi
	directive.

2011-08-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/strcmp.S: Rewrite.

2011-08-24  Andreas Schwab  <schwab@redhat.com>

	* elf/Makefile: Add rules to build and run unload8 test.
	* elf/unload8.c: New file.
	* elf/unload8mod1.c: New file.
	* elf/unload8mod1x.c: New file.
	* elf/unload8mod2.c: New file.
	* elf/unload8mod3.c: New file.

	* elf/dl-close.c (_dl_close_worker): Reset private search list if
	it wasn't used.

2011-08-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/dl-machine.h (DL_STACK_END): Do not
	subtract stack bias.
	* sysdeps/sparc/sparc64/jmpbuf-unwind.h (_JMPBUF_UNWINDS): Use
	%sp not %fp in calculations.
	(_JMPBUF_UNWINDS_ADJ): Likewise.

	* sysdeps/pthread/aio_suspend.c (do_aio_misc_wait): New function.
	(aio_suspend): Call it to force an exception region around the
	AIO_MISC_WAIT() invocation.

2011-08-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S (ENTRY): Add missing
	backslash.

2011-07-04  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/powerpc/dl-tls.h: Add _PPC_DL_TLS_H inclusion
	protection macro.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Include <ldsodefs.h>
	and <dl-machine.h>.
	(Elf64_FuncDesc): Remove.

2011-08-22  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Fix
	sigaltstack check, add missing cfi directives.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Add
	missing cfi directives, and sigaltstack handling.

2011-08-16  Andreas Schwab  <schwab@redhat.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Only assume cycle when
	object is seen twice.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

	* elf/Makefile (distribute): Add tst-initorder2.c.
	(tests): Add tst-initorder2.
	(modules-names): Add tst-initorder2a tst-initorder2b
	tst-initorder2c tst-initorder2d.  Add rules to build them.
	($(objpfx)tst-initorder2.out): New rule.
	* elf/tst-initorder2.c: New file.
	* elf/tst-initorder2.exp: New file.

2011-08-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/i386/scandir64.c: Include <string.h>.

	* elf/dl-deps.c (_dl_map_object_deps): Move check for missing
	dependencies back to end of function.

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(elfobjdir)/ld.so.

2011-08-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/time.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/time.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/bits/libc-vdso.h: Remove declaration
	of __vdso_gettimeofday.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Remove definition of
	__vdso_gettimeofday and __vdso_time.  Define __vdso_getcpu with
	attribute_hidden.
	(_libc_vdso_platform_setup): Remove initialization of
	__vdso_gettimeofday and __vdso_time.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-alias.c (get_next_alias): Use feof_unlocked
	and fgetc_unlocked.
	* nss/nss_files/files-key.c (search): Use fgets_unlocked and
	getc_unlocked.

	* elf/dl-open.c (add_to_global): Report additions to the global scope
	for LD_DEBUG=scopes.
	(dl_open_worker): Also print scope of newly loaded dependencies.
	(_dl_show_scope): Indicate if there is no scope.

	[BZ #13114]
	* stdio-common/Makefile (tests): Add bug24.
	* stdio-common/bug24.c: New file.

2011-08-19  Andreas Jaeger  <aj@suse.de>

	[BZ #13114]
	* libio/fileops.c (_IO_new_file_fopen): Fix handling of
	non-existant file when using close-on-exec mode.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_resolve): Fix CFI for
	the very first instruction.

	* sysdeps/x86_64/dl-trampoline.h: If MORE_CODE is defined, restore
	the CFI state in the end.
	* sysdeps/x86_64/dl-trampoline.S: Define MORE_CODE before first
	inclusion of dl-trampoline.h.
	Based on a patch by Jiri Olsa <jolsa@redhat.com>.

2011-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Relax ctan (0.75 + 1.25 i)
	expectations for long double.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/scandir64.c: Renamed
	from sysdeps/unix/sysv/linux/powerpc/scandir64.c.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): The
	artificual limit depends upon the system page size.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig (override CFLAGS): Add library-specific CFLAGS.
	* resolv/Makefile: Define CFLAGS-libresolv.

2011-08-17  Andreas Schwab  <schwab@redhat.com>

	* nss/makedb.c (compute_tables): Make variables used in nested
	function static.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (r_debug): Explicitly add padding when needed.
	* elf/pldd.c (get_process_info): Use pread to re-read auxiliary vector
	if buffer was too small.

	* elf/pldd.c (main): Attach to all threads in the process.
	Rewrite /proc handling to use *at functions.

2011-08-16  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c (_dl_show_scope): Take additional parameter which
	specifies first scope to show.
	(dl_open_worker): Update callers.  Move printing scope of new
	object to before the relocation.
	* elf/rtld.c (dl_main): Update _dl_show_scope call.
	* sysdeps/generic/ldsodefs.h: Update declaration.

	* elf/dl-open.c (_dl_show_scope): Use _dl_debug_printf to generate the
	string for the scope number.

2011-08-14  Ulrich Drepper  <drepper@gmail.com>

	* nscd/servicescache.c (cache_addserv): Make sure written is always
	initialized.

2011-08-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/i486/bits/atomic.h
	(__arch_compare_and_exchange_val_64_acq): Use RET alone at end of
	statement expression, so as to suppress "set but not used" warning.
	(__arch_c_compare_and_exchange_val_64_acq): Likewise.

	* string/strncat.c (STRNCAT): Use prototype definition.

	* locale/Makefile (locale-CPPFLAGS): Renamed CPPFLAGS-locale-programs.
	(locale-CPPFLAGS): New variable; put LOCALEDIR, LOCALE_ALIAS_PATH and
	-Iprograms here.
	(cppflags-iterator.mk sequence): Use locale-programs in place of nonlib.
	(localedef-modules): Add localedef.
	(locale-modules): Add locale.

	* sysdeps/generic/ldsodefs.h (struct unique_sym): Add a const.
	* elf/rtld.c (dl_main): Invert order of assignment in last change,
	to avoid a warning.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/resource.h (RLIM_INFINITY,
	RLIM64_INFINITY): Fix 64-bit values for 32-bit sparc.

2011-08-13  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c: Rename show_scope to _dl_show_scope and export.
	(dl_open_worker): Call _dl_show_scope when DL_DEBUG_SCOPES is set.
	* elf/rtld.c (dl_main): Set l_name of vDSO.
	Call _dl_show_scope when DL_DEBUG_SCOPES.
	(process_dl_debug): Recognize scopes flag and also set it for all.
	* sysdeps/generic/ldsodefs.h: Define DL_DEBUG_SCOPES.
	Declare _dl_show_scope.

	* elf/dl-libc.c (do_dlopen_args): Add caller_dlopen.
	(do_dlopen): Pass caller_dlopen to dl_open.
	(__libc_dlopen_mode): Initialize caller_dlopen.

	* intl/l10nflist.c (_nl_normalize_codeset): Make it compile outside
	of libc.  Make tolower call locale-independent.  Optimize a bit by
	using isdigit instead of isalnum.
	* locale/Makefile (locale-CPPFLAGS): Add -DNOT_IN_libc.

2011-08-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): Show in debug output whether a DSO
	was a dependency or dynamically loaded.

2011-08-11  Ulrich Drepper  <drepper@gmail.com>

	* intl/l10nflist.c: Allow architecture-specific pop function.
	* sysdeps/x86_64/l10nflist.c: New file.

	* intl/l10nflist.c (_nl_make_l10nflist): Use locale-independent
	classification.

2011-08-10  Andreas Schwab  <schwab@redhat.com>

	* include/dirent.h: Add libc_hidden_proto for scandirat and
	scandirat64.  Don't declare __scandirat64.
	* dirent/scandirat.c: Add libc_hidden_def.
	* dirent/scandirat64.c (SCANDIRAT): Remove underscores.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (SCANDIRAT): Likewise.

2011-08-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Add missing comma in
	enum.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.

2011-08-09  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def [libc]: Add GLIBC_2.15.
	* dirent/Makefile (routines): Add scandirat and scandirat64.
	* dirent/Versions [libc]: Export scandirat and scandirat64 for
	GLIBC_2.15.
	* dirent/dirent.h: Declare scandirat and scandirat64.
	* dirent/scandirat.c: New file.
	* dirent/scandirat64.c: New file.
	* sysdeps/wordsize-64/scandirat.c: New file.
	* sysdeps/wordsize-64/scandirat64.c: New file.
	* dirent/opendir.c: Define opendirat.
	* dirent/scandir.c: Move code to scandirat.c.  Implement scandir
	using scandirat.
	* dirent/scandir64.c: Adjust for scandir.c change.
	* include/dirent.h: Define scandir_cancel_struct.  Declare __opendirat,
	__scandirat64, and __scandir_cancel_handler.
	* sysdeps/unix/opendir.c: Rename __opendir to __opendirat.  Take
	additional parameter and use openat instead of open (outside of ld.so).
	Add new __opendir as wrapper around __opendirat.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Reimplement __old_scandir64
	here without requiring old scandirat implementation.

2011-08-08  Ulrich Drepper  <drepper@gmail.com>

	* dirent/scandir.c (cancel_handler): Renamed to
	__scandir_cancel_handler.  Do not define if SKIP_SCANDIR_CANCEL is
	defined.  Adjust users.
	* dirent/scandir64.c: Define SKIP_SCANDIR_CANCEL.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Likewise.

2011-08-04  Ulrich Drepper  <drepper@gmail.com>

	* string/test-string.h (IMPL): Use __STRING to expand name and then
	stringify it.

	* string/test-strcmp.c: Unify most of the WIDE and !WIDE code.  Lots
	of cleanups.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile: Update.
	(strop-tests): Append strncat.
	* string/test-wcscmp.c: New file.
	New comprehensive test for wcscmp.
	* string/test-strcmp.c: Update.
	(WIDE): New define.

2011-07-22  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_init.c (__res_vinit): Properly tokenize nameserver
	line.

2011-07-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	encoding to ACE if AI_IDN.

2011-08-01  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/dbl-64/k_rem_pio2.c (__kernel_rem_pio2): Fix up fq
	to y conversion for prec 3 and __FLT_EVAL_METHOD__ != 0.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Update.
	Fix overflow bug in strncat.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Likewise.

	* string/test-strncat.c: Update.
	Add new tests for checking overflow bugs.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2 strncat-ssse3 strncat-sse2 strncat-c.
	* sysdeps/i386/i686/multiarch/strcat.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncat.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-ssse3.S: New file.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.

2011-07-25  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i486/bits/string.h (__strncat_g): Correctly handle
	__n bigger than INT_MAX+1.
	(__strncmp_g): Likewise.

2011-07-23  Ulrich Drepper  <drepper@gmail.com>

	* posix/unistd.h: Define SEEK_DATA and SEEK_HOLE.
	* libio/stido.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.

	* sysdeps/unix/sysv/linux/sys/ptrace.h: Add new constants.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.

	[BZ #13021]
	* scripts/test-installation.pl: Don't expect libnss_test1 to be
	installed.

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix one more
	typo.
	(_dl_x86_64_save_sse): Likewise.

2011-07-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix test for
	OSXSAVE.
	(_dl_x86_64_save_sse): Likewise.

	* crypt/crypt_util.c (__init_des_r): Optimize memset calls.

	* crypt/crypt_util.c (__init_des_r): Add read barrier as well.

2011-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix last
	change.
	(_dl_x86_64_save_sse): Use correct AVX check.

2011-07-21  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Fix overfow
	bug in strncpy/strncat.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Likewise.

2011-07-21  Ulrich Drepper  <drepper@gmail.com>

	* string/tester.c (test_strcat): Add tests for different alignments
	of source and destination.
	(test_strncat): Likewise.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12852]
	* posix/glob.c (glob): Check passed in values before using them in
	expressions to avoid some overflows.
	(glob_in_dir): Likewise.

	[BZ #13007]
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): More complete
	check for AVX enablement so that we don't crash with old kernels and
	new hardware.
	* elf/tst-audit4.c: Add same checks here.
	* elf/tst-audit6.c: Likewise.

	* sysdeps/x86_64/bits/link.h (La_x86_64_ymm): Force 16-byte alignment.

2011-07-09  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/pathconf.c: Include <string.h>.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	* po/cs.po: Update from translation team.
	* po/bg.po: Likewise.

2011-07-12  Marek Polacek  <mpolacek@redhat.com>

	* misc/sys/cdefs.h: Add support for const attribute.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add __attribute_const__
	to gnu_dev_{major,minor,makedev} functions.

2011-07-20  Marek Polacek  <mpolacek@redhat.com>

	* intl/dcigettext.c (get_output_charset): Add missing bracket.

2011-07-20  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Use size_t for
	strlen results.

2011-07-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Use r10 for backing up the return address
	register in order to avoid conflicts with the soft frame pointer
	being held in r11 when necessary.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Likewise.

2011-07-14  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-fini.c (_dl_sort_fini): Remove unused link_map *l argument,
	* elf/dl-fini.c (_dl_fini): Adjust caller.
	* elf/dl-close.c (_dl_close_worker): Likewise.
	* sysdeps/generic/ldsodefs.h: Adjust declaration.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* elf/cache.c (load_aux_cache): Remove unnecessary condition of
	"aux_cache->nlibs < 0".

	* nscd/nscd_conf.c (nscd_parse_file): Remove unnecessary condition
	in the reload-count case.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2-unaligned strncat-ssse3
	strncat-sse2-unaligned strncat-c strlen-sse2-pminub
	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcat.S: New file.
	* sysdeps/x86_64/multiarch/strncat.S: New file.
	* sysdeps/x86_64/multiarch/strncat-c.c: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse2-pminub.S: New file.
	* string/strncat.c: Update.
	(USE_AS_STRNCAT): Define.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Turn on bit_Prefer_PMINUB_for_stringop for Intel Core i3, i5
	and i7.
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_Prefer_PMINUB_for_stringop): New.
	(index_Prefer_PMINUB_for_stringop): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (strlen): Check
	bit_Prefer_PMINUB_for_stringop.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Move buffer into union and add
	buffer64.
	* crypt/sha512.c (__sha512_finish_ctx): Use buffer64 for writes instead
	of casting of buffer.
	* crypt/sha256.h (struct sha256_ctx): Move buffer into union and add
	buffer32 and buffer64.
	* crypt/sha256.c (__sha256_finish_ctx): Use buffer32 or buffer64 for
	writes instead of casting of buffer.
	* crypt/md5.h (struct md5_ctx): Move buffer into union and add
	buffer32.
	* crypt/md5.c (md5_finish_ctx): Use buffer32 for writes instead of
	casting of buffer.

2011-07-19  Andreas Schwab  <schwab@redhat.com>

	* string/strxfrm_l.c (STRXFRM): Fix alloca accounting.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.c (termination_handler): Don't do anything for a database
	if it has not yet been initialized.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* po/nl.po: Update from translation team.
	* po/sv.po: Likewise.

2011-07-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/Makefile: Never use -mpreferred-stack-boundary=2,
	now disallowed by GCC.

	* configure.in (use-default-link): Default to yes if a test -shared
	link meets our qualifications.
	* configure: Regenerated.

	* config.make.in (output-format): New variable.
	* configure.in: Check for ld --print-output-format support.
	* configure: Regenerated.
	* Makerules ($(common-objpfx)format.lds)
	[$(output-format) != unknown]: Just use $(output-format),
	instead of the linker-script munging.

2011-07-14  Roland McGrath  <roland@hack.frob.com>

	* Makefile ($(common-objpfx)linkobj/libc.so): Use $(shlib-lds) instead
	of $(common-objpfx)shlib.lds.
	* elf/Makefile ($(objpfx)sotruss-lib.so): Likewise.

	* sysdeps/i386/i686/multiarch/strstr-c.c (libc_hidden_builtin_def):
	Conditionalize redefinition on [SHARED && DO_VERSIONING && !NO_HIDDEN].

	* configure.in (-z relro check): Adjust test code to add a large
	writable data section after it.
	* configure: Regenerated.

2011-07-11  Roland McGrath  <roland@hack.frob.com>

	* configure.in (-z relro check): Fix test code to make the variable
	truly const.
	* configure: Regenerated.

2011-07-11  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.h (struct traced_file): Define.
	(struct database_dyn): Remove inotify_descr, reset_res, and filename
	elements.  Add traced_files.
	(inotify_fd): Declare.
	(register_traced_file): Declare.
	* nscd/connections.c (dbs): Remove reset_res and filename initializers.
	(inotify_fd): Export.
	(resolv_conf_descr): Remove.
	(nscd_init): Move inotify descriptor creation to main.
	Don't register files for notification here.
	(register_traced_file): New function.
	(invalidate_cache): Don't use reset_res to determine whether to call
	res_init, go through the list of registered files.
	(main_loop_poll): The inotify descriptors are now stored in the
	structures for the traced files.
	(main_loop_epoll): Likewise
	* nscd/nscd.c (main): Create inotify socket here.  Pass extra argument
	to __nss_disable_nscd.
	* nscd/cache.c (prune_cache): There is no single inotify descriptor
	for a database anymore.  Check the records for all the registered
	files instead.
	* nss/Makefile (libnss_files-routines): Add files-init.
	(libnss_db-routines): Add db-init.
	* nss/Versions [libnss_files] (GLIBC_PRIVATE): Add _nss_files_init.
	[libnss_db] (GLIBC_PRIVATE): Add _nss_db_init.
	* nss/nss_db/db-init.c: New file.
	* nss/nss_files/files-init.c: New file.
	* nss/nsswitch.c (nss_load_library): New function.  Broken out of
	__nss_lookup_function.
	(__nss_lookup_function): Call nss_load_library.
	(nss_load_all_libraries): New function.
	(__nss_disable_nscd): Take parameter with callback function for files
	to register.  Set is_nscd.  Load all the DSOs for the NSS modules
	used for the cached services.
	* nss/nsswitch.h (__nss_disable_nscd): Adjust prototype.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd]: Pass the various -D
	options for features to all the files in nscd.

	* nss/nsswitch.c (nss_parse_file): Add missing fclose.

2011-07-10  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_init): Comment typo.

2011-07-09  Ulrich Drepper  <drepper@gmail.com>

	* po/pl.po: Update from translation team.
	* po/ja.po: Likewise.
	* po/ru.po: Likewise.
	* po/ko.po: Likewise.
	* po/fr.po: Likewise.

2011-07-09  Roland McGrath  <roland@hack.frob.com>

	* configure.in (.ctors/.dtors header and trailer check):
	Use an empirical test on a built program.
	* configure: Regenerated.

	* configure.in (-z relro check): Use an empirical test on a built DSO.
	Detect, but do not require, on ia64.
	* configure: Regenerated.

	* configure.in (READELF): Find it with AC_CHECK_TOOL.
	Update tests that use readelf to use $READELF instead.
	* configure: Regenerated.

2011-07-08  Ulrich Drepper  <drepper@gmail.com>

	* malloc/hooks.c (memalign_check): Avoid using checked_request2size
	if the result is not used.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	[BZ#9696]
	* stdlib/tst-strtod.c: Add testcase.

2011-07-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/pathconf.c (distinguish_extX): New function.
	(__statfs_link_max): Use it to distinguish between ext2/3 and ext4.
	The latter has a higher limit.  Take additional parameter to pass to
	the new function.
	(__pathconf): Pass file to __statfs_link_max.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Pass fd to
	__statfs_link_max.
	* sysdeps/unix/sysv/linux/pathconf.h: Adjust prototype of
	__statfs_link_max.

	[BZ #12868]
	* sysdeps/unix/sysv/linux/linux_fsinfo.h: Define Lustre constants.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle Lustre.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_link_max): Likewise.
	(__statfs_filesize_max): Likewise.
	Patch mostly by Andreas Dilger <adilger@whamcloud.com>.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	* resolv/res_comp.c (dn_skipname): Remove unused variable.

2011-07-06  Marek Polacek  <mpolacek@redhat.com>

	* nis/nss_nisplus/nisplus-spwd.c (_nss_nisplus_setspent): Honour the
	`status' variable.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_setetherent):
	Likewise.

2011-07-04  H.J. Lu  <hongjiu.lu@intel.com>

	* Makefile (strop-tests): Add strncat.
	* string/test-strncat.c: New file.

2011-06-30  Marek Polacek  <mpolacek@redhat.com>

	* iconvdata/johab.c: Don't inline `johab_sym_hanja_to_ucs' function.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules):
	Copy rule from iconvdata/Makefile.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12922]
	* posix/getopt.c (_getopt_internal_r): When "W;" is in short options
	but no long options are defined, just return 'W'.

2011-06-22  Marek Polacek  <mpolacek@redhat.com>

	[BZ #9696]
	* stdlib/strtod_l.c (round_and_return): Set ERANGE instead of EDOM.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	* inet/getnetgrent_r.c (internal_getnetgrent_r): Fix check for known
	netgroups to read.
	(innetgr): Likewise.

2011-07-05  Roland McGrath  <roland@hack.frob.com>

	* config.make.in (install_root): Default to $(DESTDIR).

2011-07-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Add cast to avoid warning.

2011-07-02  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)format.lds): Fail if result is empty.

	* Makefile ($(common-objpfx)testrun.sh): Generate to work relative to
	containing directory rather than embedding absolute directory names.

	* scripts/check-local-headers.sh: Rewritten using awk.
	Match by word, not by line.  Print error messages for matches.
	* Makefile ($(objpfx)check-local-headers.out): Pass AWK in to it.

	* Makerules [shlib-lds-flags empty]:
	($(common-objpfx)libc_pic.opts): New target.
	($(common-objpfx)libc_pic.os.clean): New target.
	($(common-objpfx)libc.so): Link it instead of libc_pic.os.

	* config.make.in (OBJCOPY): New variable.
	* aclocal.m4 (LIBC_PROG_BINUTILS): Substitute OBJCOPY too.
	* configure: Regenerated.

	* config.make.in (use-default-link): New variable.
	* configure.in (use_default_link): Grok --with-default-link to set it.
	* configure: Regenerated.
	* Makerules [$(elf) = yes] [$(use-default-link) = yes]:
	(shlib-lds, shlib-lds-flags): Define to empty.

	* Makerules (shlib-lds): New variable.
	(shlib-lds-flags): New variable.
	(build-shlib, build-moduile, build-module-asneeded): Use it.
	($(common-objpfx)libc.so): Use $(shlib-lds).
	($(extra-modules-build:%=$(objpfx)%.so)): Likewise.
	* iconvdata/extra-module.mk ($(objpfx)$(mod).so): Likewise.

	* elf/dynamic-link.h (elf_get_dynamic_info): Make asserts accept
	DT_FLAGS/DT_FLAGS_1 with zero flags.

	* elf/Makefile ($(objpfx)ld.so): Use -defsym=_begin=0 instead of
	linker script munging.

2011-07-02  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Add union to access total also
	as 128-bit value.
	* crypt/sha512.c (sha512_process_block): Perform total addition using
	128-bit if possible.
	(__sha512_finish_ctx): Likewise.
	* crypt/sha256.h (struct sha256_ctx): Add union to access total also
	as 64-bit value.
	* crypt/sha256.c (SWAP64): Define.
	(sha256_process_block): Perform total addition using 64-bit if
	possible.
	(__sha256_finish_ctx): Likewise.

2011-07-01  Ulrich Drepper  <drepper@gmail.com>

	* nscd/pwdcache.c (cache_addpw): Cleanup.  Add branch prediction.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise
	* nscd/servicescache.c (cache_addserv): Handle zero negtimeout.

2011-07-01  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/pwdcache.c (cache_addpw): Handle zero negtimeout.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise

2011-07-01  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Query NIS
	domain only when needed.

2011-06-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Make sure RES_USE_INET6
	is always restored.

2011-06-29  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Don't write notfound reply if we
	are re-adding the entry.
	* nscd/servicescache.c (cache_addserv): Likewise.

2011-06-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/generic/dl-irel.h: fix protection against multiple
	inclusions.
	* sysdeps/generic/dl-irel.h (elf_ifunc_invoke): New.

2011-06-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12935]
	* malloc/memusage.sh: Fix quoting in message.
	* debug/xtrace.sh: Likewise.

	* configure.in: Remove support for --experimental-malloc option, make
	it the default.
	* config.make.in: Likewise.
	* malloc/Makefile: Likewise.

2011-06-27  Andreas Schwab  <schwab@redhat.com>

	* iconvdata/gb18030.c (BODY for TO_LOOP): Fix encoding of non-BMP
	two-byte characters.

2011-06-27  Roland McGrath  <roland@hack.frob.com>

	* configure.in (NO_CTORS_DTORS_SECTIONS): Give this check its own
	AC_CACHE_CHECK invocation.
	* configure: Regenerated.

	* elf/soinit.c (__CTOR_LIST__, __DTOR_LIST__): Add used attribute.

2011-06-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* nscd/aicache.c (addhstaiX):  Restore only RES_USE_INET6
	bit from old_res_options.

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-servicescache.c): Define.

	* inet/getnetgrent_r.c (innetgr): Minimal cleanup, use correct return
	value type for setfct.

2011-06-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	__gettimeofday instead of gettimeofday.

2011-06-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile (all-built-dso): No need to check linkobj/libc.so.

2011-06-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcpy-sse2.S (RETURN): Fix a typo.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Correct unwind
	info.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2-unaligned strncpy-sse2-unaligned
	stpcpy-sse2-unaligned stpncpy-sse2-unaligned.
	* sysdeps/x86_64/multiarch/stpcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy.S: Remove strcpy with SSSE3.
	(STRCPY): Support SSE2 and SSSE3 versions.

2011-06-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12874]
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): Define.
	* sysdeps/wordsize-64/tst-writev.c: Work around problem with 2.6.38+
	kernels which artificially limit size of requests.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strncpy-c strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2 strncpy-sse2 stpcpy-sse2 stpncpy-sse2.
	* sysdeps/i386/i686/multiarch/stpcpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcpy.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable unaligned load optimization for Intel Core i3, i5 and i7
	processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Unaligned_Load):
	Define.
	(index_Fast_Unaligned_Load): Define.
	(HAS_FAST_UNALIGNED_LOAD): Define.

2011-06-23  Marek Polacek  <mpolacek@redhat.com>

	* nss/nss_db/db-open.c: Include <unistd.h> for read declaration.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12907]
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Avoid calling __check_pf
	until it is clear that the information is realy needed.
	Patch mostly by David Hanisch <david.hanisch@nsn.com>.

2011-06-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix last change.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	/sys/devices/system/cpu/online if it is usable.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Rate limit
	reading the information from the /proc filesystem to once a second.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/sigcontext.h: Fix definition of
	NULL after inclusion of kernel headers.

2011-06-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_db/db-XXX.c (nss_db_setENT): Only set entidx for successful
	calls to internal_setent.

	[BZ #12885]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): When looking up only IPv6
	addresses using gethostbyname4_r ignore IPv4 addresses.

	* sysdeps/posix/getaddrinfo.c (gaih_inet): After the last change the
	branch using gethostbyname2 is only for AF_INET.  Optimize accordingly.

	* inet/getnetgrent_r.c: Use DL_CALL_FCT in several places.

2011-06-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-plt.h: Protect against multiple
	inclusions.
	* sysdeps/sparc/sparc64/dl-plt.h: Likewise.

	* sysdeps/i386/dl-irel.h (elf_ifunc_invoke): New.
	(elf_irel): Use it.
	* sysdeps/powerpc/powerpc32/dl-irel.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc32/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h: Likewise.
	* sysdeps/x86_64/dl-irel.h: Likewise.

	* elf/dl-runtime.c: Use elf_ifunc_invoke.
	* elf/dl-sym.c: Likewise.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (__libc_res_nsend): Fix typos in last patch.  We
	need to dereference resplen2.

2011-06-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/wordsize-64/dl-fxstatat64.c: New file.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig: Define vardbdir and inst_vardbdir.
	* nss/Makefile: Add rules to install db-Makefile.

	* nss/nss_db/db-XXX.c: Cleanup.

	* nss/Makefile (libnss_db-dbs): Add db-initgroups.
	* nss/Versions [libnss_db]: Add _nss_db_initgroups_dyn for
	GLIBC_PRIVATE.
	* nss/db-Makefile (groups.db): Emit entries for initgroups lookups.
	* nss/makedb.c: Implement -g option to specify that value strings
	are generated and should not be added to table iterated over for
	get*ent calls.
	* nss/nss_db/db-initgroups.c: New file.

	* nss/getent.c: Add support for initgroups lookups through getgrouplist
	interface.

	* grp/initgroups.c (__nss_initgroups_database): Renamed and exported.
	(internal_getgrouplist): Adjust to name change.
	Update use_initgroups_entry if this is not the first call.
	* nss/databases.def: Add initgroups entry.

	* nss/makedb.c (compute_tables): Check result of multiple hash table
	sizes to minimize maximum chain length.

2011-06-14  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def: Add entry for libnss_db.
	* shlib-versions: Likewise.
	* nss/Makefile: Add rules to build libnss_db.
	* nss/Versions: Add libnss_db information.  Organize libnss_files
	entries better.
	* nss/db-Makefile: Add gshadow support.  Change rules for the new
	makedb progra.  Some minor improvements to generate smaller files.
	* nss/nss_db/nss_db.h: Move NSS database header data structures to
	here from...
	* nss/makedb.c: ...here.
	Improve database format to be smaller and require less memory at
	runtime.
	* nss/nss_db/db-XXX.x: Adjust for new database format.  Don't use
	db anymore.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-open.c: Likewise.
	* nss/nss_files/flies-XXX.x: Adjust comments.
	* nss/nss_files/files-ethers.c: Adjust for new DB_LOOKUP definition.
	* nss/nss_files/files-grp.c: Likewise.
	* nss/nss_files/files-hosts.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-proto.c: Likewise.
	* nss/nss_files/files-pwd.c: Likewise.
	* nss/nss_files/files-rpc.c: Likewise.
	* nss/nss_files/files-service.c: Likewise.
	* nss/nss_files/files-sgrp.c: Likewise.
	* nss/nss_files/files-spwd.c: Likewise.
	* nss/nss_db/db-alias.c: Removed.
	* nss/nss_db/dummy-db.h: Removed.

2011-06-02  Ulrich Drepper  <drepper@gmail.com>

	* nss/makedb.c: Rewritten to not use database library.
	* nss/Makefile: Update to build new makedb program.

2011-06-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/check_native.c: Include <string.h> for
	memset declaration.

2011-06-10  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix logic allocating
	tmpbuf.

2011-06-10  Roland McGrath  <roland@hack.frob.com>

	* Makerules (shlib.lds): Fail if the linker script comes out empty.
	* elf/Makefile ($(objpfx)ld.so): Likewise.

	* Makefile ($(common-objpfx)linkobj/libc.so): Break long lines with \.
	Don't list ld.so twice in dependencies.

	* posix/bug-regex31.c: Include <stdlib.h>.

	* nscd/hstcache.c (cache_addhst): Remove unused variable.

	* nis/nss_compat/compat-spwd.c
	(getspent_next_nss_netgr): Remove unused variable.
	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Likewise.

	* nis/nis_print_group_entry.c (nis_print_group_entry): Fix "Implicit
	nonmembers" output to use the right array.

	* resolv/nss_dns/dns-network.c (getanswer_r): Remove unused variable.

	* elf/dl-open.c (_dl_open): Quash warnings when DL_NNS==1.

	* locale/programs/ld-ctype.c (ctype_read): Remove unused variable.
	* locale/programs/ld-collate.c (add_to_tablewc): Likewise.
	* catgets/gencat.c (read_input_file): Likewise.
	* locale/programs/locarchive.c (enlarge_archive): Likewise.

	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Move DONTBLOCK
	variable definition inside #if's controlling its use.

	* inet/getnetgrent_r.c (innetgr): Remove unused variable.

	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Fix errno restoration.

	* misc/syslog.c (__vsyslog_chk): Remove unused variable.

	* io/fts.c (fts_build): Use if (0 && ...) rather than #if 0 for
	unreachable code.

	* stdio-common/printf_fp.c (___printf_fp): Remove unused variable.

	* configure.in (nss-crypt check): Use AC_LANG_PROGRAM.
	* configure: Regenerated.

	* Makerules: Revert last change.
	* elf/Makefile: Likewise.

2011-06-09  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)libc_pic.os): Use -Wl, before -r.
	* elf/Makefile ($(objpfx)librtld.os): Likewise.
	(reloc-link): Likewise.

2011-06-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Add rules to build pldd.
	* elf/pldd.c: New file.
	* elf/pldd-xx.c: New file.

2011-06-07  Ulrich Drepper  <drepper@gmail.com>

	* version.h: Update for 2.15 development version.

2011-06-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-irel.h (elf_irela): Pass dl_hwcap to
	ifuncs.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S (memcpy): Fetch
	dl_hwcap via passed in argument.
	* sysdeps/sparc/sparc64/multiarch/memset.S (memset, bzero):
	Likewise.

2011-06-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix smul_ppmm for S/390.

2011-06-06  Roland McGrath  <roland@hack.frob.com>

	[BZ #12849]
	* manual/fdl-1.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/fdl-1.1.texi
	* manual/lgpl-2.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/lgpl-2.1.texi
	* manual/Makefile (licenses): New variable, list those new file names.
	(texis): Use it.
	(chapters.% top-menu.%): Include $(licenses) with $(appendices).

	* manual/fdl.texi: File removed.
	* manual/lesser.texi: File removed.
	* manual/libc.texinfo (Copying, Documentation License):
	Use new @include file names, put @appendix directive before @include.

2011-06-04  Jakub Jelinek  <jakub@redhat.com>

	[BZ #12841]
	* rt/bits/mqueue2.h (__mq_open_2): Add __THROW.
	(__mq_open_alias): Use __REDIRECT_NTH instead of __REDIRECT.
	(mq_open): Add __NTH.

2011-06-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Assume Intel Core i3/i5/i7 processor if AVX is available.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	typo.

2011-05-31  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Don't free non-malloced
	memory.  Use alloca_account.  Fix memory leak when retrying.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.14 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 14.

	* config.make.in (RANLIB): Remove entry.

2011-05-30  Ulrich Drepper  <drepper@gmail.com>

	* po/Makefile (po-sed-cmd): Add ksh to extensions.
	(libc.pot): Work around missing support for .ksh extension in xgettext.

	[BZ #12684]
	* resolv/res_send.c (__libc_res_nsend): Only go to the next name server
	if both request failed.
	(send_dg): In case of server errors clear resplen or *resplen2.

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Run initializer sorting only
	when there are multiple maps.
	* elf/dl-fini.c (_dl_sort_fini): Check for list of one.
	(_dl_fini): Remove test here.

	* elf/rtld.c (dl_main): Don't allow the loader to load itself.

2011-05-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* sysdeps/posix/getaddrinfo.c (gethosts): Restore only RES_USE_IENT6
	bit from old_res_options.
	(gaih_inet): Likewise.

	[BZ #11099]
	* shadow/sgetspent_r.c (LINE_PARSER): Interpret numeric field values
	as signed.

	* resolv/res_init.c (res_setoptions): Make the code more compact.

	[BZ #11558]
	* resolv/res_init.c (res_setoptions): Recognize use-vc option and
	set RES_USEVC.

	[BZ #11634]
	* elf/Makefile (tests): Don't add tst-audit[67] without working -mavx.

	* malloc/malloc.h: Mark malloc hook variables as deprecated.

	[BZ #11781]
	* malloc/malloc.h: Declare malloc hook variables as volatile.

	* locale/programs/locarchive.c (add_locale_to_archive): Fix typo
	in last patch.

	[BZ #11799]
	* sysdeps/unix/sysv/linux/bits/siginfo.h (SI_USER): Don't mention
	raise in the comment.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h: Likewise.

2011-05-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12811]
	* posix/regex_internal.c (build_wcs_buffer): Don't signal we have to
	grow the buffers more if it already has to be sufficient.
	(build_wcs_upper_buffer): Likewise.
	* posix/regexec.c (check_matching): Likewise.
	(clean_state_log_if_needed): Likewise.
	(extend_buffers): Don't enlarge buffers beyond size of the input
	buffer.
	Patches mostly by Emil Wojak <emil@wojak.eu>.
	* posix/bug-regex32.c: New file.
	* posix/Makefile (tests): Add bug-regex32.

	* locale/findlocale.c (_nl_find_locale): Return right away if
	_nl_explode_name failed.
	* locale/programs/locarchive.c (add_locale_to_archive): Likewise.

	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_sendmmsg): Define.

	* debug/xtrace.sh: Unify messages.
	* malloc/memusage.sh: Likewise.

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_time): Retrieve
	time symbol from vDSO.  Substitute with vsyscall if not available.
	* sysdeps/unix/sysv/linux/x86_64/time.S [SHARED]: Use
	__vdso_time.

	* sysdeps/unix/sysv/linux/internal_sendmmsg.S: New file.
	* sysdeps/unix/sysv/linux/sendmmsg.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket] (sysdep_routines):
	Add sendmmsg and internal_sendmmsg.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add sendmmsg.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_SENDMMSG.

	* sysdeps/unix/sysv/linux/syscalls.list: Add setns entry.
	* sysdeps/unix/sysv/linux/bits/sched.h: Declare setns.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add setns.

2011-05-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_getcpu):
	Retrieve getcpu symbol from vDSO.  Substitute with vsyscall if not
	available.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [SHARED]: Use
	__vdso_getcpu.

	[BZ #12814]
	* iconvdata/Makefile (tests): Add bug-iconv9.
	* iconvdata/bug-iconv9.c: New file.

2011-05-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #12814]
	* iconvdata/iso-2022-jp.c (BODY): Fix invalid variable shadowing.

2011-05-25  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_regs_struct): Change intcs field back to cs.

2011-05-25  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-05-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12795]
	* sysdeps/unix/sysv/linux/bits/resource.h (RLIMIT_RTTIME): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Likewise.

2011-05-20  Andreas Schwab  <schwab@redhat.com>

	* stdlib/longlong.h: Update from GCC.

2011-05-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/ia64/sysconf.c (HAS_CPUCLOCK): Add
	parameter name.
	* sysdeps/unix/sysv/linux/sysconf.c (has_cpuclock, HAS_CPUCLOCK):
	Add parameter name.
	(__sysconf): Pass it down.

2011-05-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12671]
	* nis/nss_nis/nis-alias.c (_nss_nis_getaliasbyname_r): Use malloc in
	some situations.
	* nscd/nscd_getserv_r.c (nscd_getserv_r): Likewise.
	* posix/glob.c (glob_in_dir): Take additional parameter alloca_used.
	add in in __libc_use_alloca calls.  Adjust callers.
	(glob): Use malloc in some situations.

	* elf/dl-runtime.c (_dl_profile_fixup): Also store LA_SYMB_NOPLTENTER
	and LA_SYMB_NOPLTEXIT in flags which are passed to pltenter and
	pltexit.

2011-05-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h: Define CLOCK_REALTIME_ALARM
	and CLOCK_BOOTTIME_ALARM.

	[BZ #12782]
	* string/xpg-strerror.c (__xpg_strerror_r): Fill buffer even if error
	is returned.

	* string/_strerror.c (__strerror_r): Print negative errors as signed
	numbers.

	[BZ #12777]
	* iconvdata/cp1258.c (comp_table_data): Remove entry 0x00A5 0xEC.
	(decomp_table): Change U0385 entry to emit 0xA5 0xEC.
	* iconvdata/CP1258.irreversible: Adjust entry 0xA8EC.

	* configure.in: Fix typo in redirection and correct removal of test
	files in two cases.

	[BZ #12788]
	* locale/setlocale.c (new_composite_name): Fix test to check for
	identical name of all categories.

	[BZ #12792]
	* libio/filedoalloc.c (local_isatty): New function.
	(_IO_file_doallocate): Use local_isatty.
	* stdio-common/perror.c (perror): In case a new stream is used
	forward the stream error.
	* stdio-common/vfprintf.c (ARGCHECK): For read-only streams also set
	error flag.

2011-05-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11869]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't unconditionally use
	alloca.
	* include/alloca.h (extend_alloca_account): Define.

	[BZ #11857]
	* posix/regex.h: Fix comments with documentation of user-accessible
	fields after compilation and describe correct free'ing of pattern
	after re_compile_pattern.
	Patch by Reuben Thomas <rrt@sc3d.org>.

2011-05-18  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/Makefile (no-special-regs): Add -mno-vsx
	and -mno-altivec to prevent the compiler from using Altivec and/or
	VSX instructions when the corresponding registers are not available.

2011-05-19  Andreas Schwab  <schwab@redhat.com>

	* grp/compat-initgroups.c (__libc_use_alloca): Don't define.

2011-05-19  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Use __dup2, not dup2.
	* libio/freopen64.c (freopen64): Likewise.

2011-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12775]
	* sysdeps/x86_64/fpu/e_powl.S: Fix a typo.
	* math/Makefile (tests): Add test-powl.
	(CFLAGS-test-powl.c): Define.
	* math/test-powl.c: New file.

2011-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* fileops.c (_IO_new_file_fopen): Get fd from _IO_fileno.

2011-05-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11837]
	* iconvdata/gb18030.c: Update to GB18020-2005.

2011-05-16  Ulrich Drepper  <drepper@gmail.com>

	* posix/regex.h (RE_SYNTAX_AWK, RE_SYNTAX_GNU_AWK,
	RE_SYNTAX_POSIX_AWK): Update to match recent development.
	Patch by Aharon Robbins <arnold@skeeve.com>.

	[BZ #11892]
	* stdlib/putenv.c (putenv): Don't always create copy of the variable
	on the stack.

	[BZ #11895]
	* misc/pselect.c (__pselect): Handle timeout value errors hidden
	through underflows.

	[BZ #12766]
	* misc/error.c (error_at_line): Ensure file_name and old_file_name
	point to strings before performing equality test for error_one_per_line
	mode.

	[BZ #11697]
	* login/programs/pt_chown.c (do_pt_chown): Always call chown.

	[BZ #11820]
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_fpregs_struct): Avoid __uint*_t types.

	[BZ #6420]
	* malloc/mtrace.c (tr_where): Add additional parameter to point to
	symbol info.  Use it instead of calling _dl_addr locally.
	(lock_and_info): New function.
	(tr_freehook): Call lock_and_info and pass symbol info as additional
	parameter to tr_where.
	(tr_mallochook): Likewise.
	(tr_reallochook): Likewise.
	(tr_memalignhook): Likewise.

	* malloc/mtrace.c: Remove support for USE_MTRACE_FILE.  It is not
	used and couldn't be at all thread-safe.

2011-05-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Don't close old file descriptor
	before the new one is opened.  Instead dup the new file descriptor
	to the old one after the new stream is created.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/libio.h: Define _IO_FLAGS2_NOCLOSE and _IO_FLAGS2_CLOEXEC.
	* libio/fileops.c (_IO_new_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	(_IO_new_file_fopen): Set _IO_FLAGS2_CLOEXEC for "e" mode.
	If _IO_file_open didn't set FD_CLOEXEC do it after the call.
	* libio/oldfileops.c (_IO_old_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	* include/unistd.h: Add hidden_proto for dup3.
	Define __have_dup3.
	* io/dup3.c: Define hidden symbol.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_DUP3.

	[BZ #7101]
	* posix/getopt.c (_getopt_internal_r): List all ambigious possibilities
	when an incomplete long option is used.
	* posix/tst-getopt_long1.c: New file.
	* posix/Makefile (tests): Add tst-getopt_long1.

	[BZ #10138]
	* scripts/config.guess: Update from autoconf-2.68.
	* scripts/config.sub: Likewise.

	[BZ #10157]
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf): Split out CPUTIME
	tests into ...
	(has_cpuclock): ...this.  New function.
	* sysdeps/unix/sysv/linux/ia64/sysconf.c: Just define HAS_CPUCLOCK
	macro here based on has_cpuclock code.

	[BZ #10149]
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	First byte (not low byte) is now always NUL.
	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Likewise.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Use non-cancelable interfaces.

	[BZ #9809]
	* locale/iso-639.def: Add entry for Sorani.

	[BZ #11901]
	* include/stdlib.h: Move include protection to the right place.
	Define abort_msg_s.  Declare __abort_msg with it.
	* stdlib/abort.c (__abort_msg): Adjust type.
	* assert/assert.c (__assert_fail_base): New function.  Majority
	of code from __assert_fail.  Allocate memory for __abort_msg with
	mmap.
	(__assert_fail): Now call __assert_fail_base.
	* assert/assert-perr.c: Remove bulk of implementation.  Use
	__assert_fail_base.
	* include/assert.hL Declare __assert_fail_base.
	* sysdeps/posix/libc_fatal.c: Allocate memory for __abort_msg with
	mmap.
	* sysdeps/unix/sysv/linux/libc_fatal.c: Likewise.

2011-05-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11952]
	[BZ #12453]
	* elf/dl-open.c (dl_open_worker): Delay calls to _dl_update_slotinfo
	until all modules are registered in the DTV.
	* elf/Makefile: Add rules to build and run tst-tls19.
	* elf/tst-tls19.c: New file.
	* elf/tst-tls19mod1.c: New file.
	* elf/tst-tls19mod2.c: New file.
	* elf/tst-tls19mod3.c: New file.
	Patch mostly by Martin von Gagern <Martin.vGagern@gmx.net>.

	[BZ #12083]
	* sysdeps/pthread/aio_misc.c (__aio_init): Compute optim.aio_num
	correctly.

	[BZ #12601]
	* iconvdata/cp932.c (BODY to UCS4): Fix incrementing inptr in case of
	two-byte sequence errors.
	* iconvdata/Makefile (tests): Add bug-iconv8.
	* iconvdata/bug-iconv8.c: New file.

	[BZ #12626]
	* sysdeps/generic/elf/backtracesymsfd.c (__backtrace_symbols_fd): Move
	buf2 definition.

	* libio/fileops.c (_IO_new_file_close_it): Initialize write_status.

	[BZ #12432]
	* sysdeps/ia64/backtrace.c (struct trace_reg): Add cfa element.
	(dummy_getcfa): New function.
	(init): Get _Unwind_GetCFA address, use dummy if not found.
	(backtrace_helper): In recursion check, also check whether CFA changes.
	(__backtrace): Completely initialize arg.

	* iconv/loop.c (SINGLE) [STORE_REST]: Add input bytes to bytebuf before
	storing incomplete byte sequence in state object.  Avoid testing for
	guaranteed too small input if we know there is enough data available.

2011-05-11  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (+link-pie): Indent.
	* Rules (binaries-pie): Define if $(have-fpie) and
	$(build-shared).
	(binaries-shared): Also filter out $(binaries-pie).
	($(addprefix $(objpfx),$(binaries-pie))): New rule.
	* nscd/Makefile (others-pie): Add nscd.
	(LDFLAGS-nscd): Set this instead of relro-LDFLAGS.
	($(objpfx)nscd): Remove command override.
	* login/Makefile (others-pie): Add pt_chown.
	($(objpfx)pt_chown): Remove command override.
	* elf/Makefile: Add PIE tests to tests and tests-pie variables and
	remove command overrides.

2011-05-13  Ulrich Drepper  <drepper@gmail.com>

	* libio/tst_putwc.c: Fix error messages.

	[BZ #12724]
	* libio/fileops.c (_IO_new_file_close_it): Always flush when
	currently writing and seek to current position when not.
	* libio/Makefile (tests): Add bug-fclose1.
	* libio/bug-fclose1.c: New file.

2011-05-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12511]
	* elf/dl-lookup.c (enter): Don't test for copy relocation here and
	don't set DF_1_NODELETE here.
	(do_lookup_x): When entering new entry test for copy relocation
	and if necessary set DF_1_NODELETE flag.
	* elf/tst-unique4.cc: New file.
	* elf/tst-unique4.h: New file.
	* elf/tst-unique4lib.cc: New file.
	* elf/Makefile: Add rules to build and run tst-unique4.
	Patch by Piotr Bury <pbury@goahead.com>.

2011-05-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12052]
	* sysdeps/posix/spawni.c (__spawni): Fix sched_setscheduler call.

	[BZ #12625]
	* misc/mntent_r.c (addmntent): Flush the stream after the output

	[BZ #12393]
	* elf/dl-load.c (is_trusted_path): Remove unnecessary test.
	(is_trusted_path_normalize): Skip initial colon.  Append slash
	to empty buffer.  Duplicate is_trusted_path code but allow
	constructed patch to be prefix.
	(is_dst): Allow $ORIGIN followed by /.
	(_dl_dst_substitute): Correct clearing of check_for_trusted.
	Correct testing of result of is_trusted_path_normalize
	(decompose_rpath): Fix warning.

2011-05-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11257]
	* grp/initgroups.c (internal_getgrouplist): When we found the service
	list through the initgroups entry in nsswitch.conf do not always
	continue on a successful lookup.  Don't always use the
	__nss_group_database value if it is set.
	* nss/nsswitch.conf (initgroups): Change action for successful db
	lookup to continue for compatibility.

2011-05-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11532]
	* iconvdata/Makefile: Add rules to build CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/gconv-modules: Add entries for CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/tst-tables.sh: Likewise.
	* iconvdata/cp770.c: New file.
	* iconvdata/cp771.c: New file.
	* iconvdata/cp772.c: New file.
	* iconvdata/cp773.c: New file.
	* iconvdata/cp774.c: New file.
	* iconvdata/testdata/CP770: New file.
	* iconvdata/testdata/CP770..UTF8: New file.
	* iconvdata/testdata/CP771: New file.
	* iconvdata/testdata/CP771..UTF8: New file.
	* iconvdata/testdata/CP772: New file.
	* iconvdata/testdata/CP772..UTF8: New file.
	* iconvdata/testdata/CP773: New file.
	* iconvdata/testdata/CP773..UTF8: New file.
	* iconvdata/testdata/CP774: New file.
	* iconvdata/testdata/CP774..UTF8: New file.

	* iconvdata/gen-8bit-gap-1.sh: End reading of charmap file at
	END CHARMAP line.
	* iconvdata/gen-8bit-gap.sh: Likewise.
	* iconvdata/gen-8bit.sh: Likewise.

	* locale/iso-639.def: Add ary entry.

	[BZ #11258]
	* locale/C-translit.h.in: Add U20A1 transliteration.

	[BZ #12178]
	* locale/iso-639.def: Add wae entry.
	Patch by Kevin Bortis <bortis@translate-wae.ch>.

	[BZ #12545]
	* locale/programs/localedef.c (construct_output_path): Use ssize_t
	for n.

	[BZ #12711]
	* locale/C-translit.h.in: Add entry for U20B9.
	Patch by pravin.d.s@gmail.com.

2011-05-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12713]
	* sysdeps/unix/sysv/linux/getcwd.c: If getcwd syscall report
	ENAMETOOLONG use generic getcwd.
	* sysdeps/posix/getcwd.c: Add support to use openat.  Make usable
	in rtld.  Use *stat64.
	* sysdeps/unix/sysv/linux/Makefile [subdir=elf] (sysdep-rtld-routines):
	Add dl-getcwd, dl-openat64, dl-opendir, dl-fxstatat64.
	* sysdeps/unix/sysv/linux/dl-getcwd.c: New file.
	* sysdeps/unix/sysv/linux/dl-openat64.c: New file.
	* sysdeps/unix/sysv/linux/dl-opendir.c: New file.
	* sysdeps/unix/sysv/linux/dl-fxstat64.c: New file.
	* include/sys/stat.h: Define __fstatat, __lstat64, __fstat64, and
	__fstatat64 macros.
	* include/dirent.h: Add libc_hidden_proto for rewinddir.
	* dirent/rewinddir.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/rewinddir.c: Likewise.
	* sysdeps/unix/rewinddir.c: Likewise.  Don't do locking outside libc.

	* include/dirent.h (__alloc_dir): Add flags parameter.
	* sysdeps/unix/fdopendir.c (__fdopendir): Pass flags to __alloc_dir.
	* sysdeps/unix/opendir.c (__opendir): Pass 0 in new parameter to
	__alloc_dir.
	(__alloc_dir): Take new parameter.  Don't call fcntl for invocations
	from fdopendir if O_CLOEXEC is already set.

2011-03-15  Alan Modra  <amodra@gmail.com>

	* elf/dl-reloc.c (_dl_try_allocate_static_tls <TLS_DTV_AT_TP>): Handle
	l_tls_firstbyte_offset non-zero.  Save padding offset in
	l_tls_firstbyte_offset for later use.
	* elf/dl-close.c (_dl_close_worker <TLS_DTV_AT_TP>): Correct code
	freeing static tls block.

2011-03-05  Jonathan Nieder  <jrnieder@gmail.com>

	* sysdeps/unix/sysv/linux/sys/param.h: Fix an #ifndef __undef_ARG_MAX
	where #ifdef was intended.  The intent is to prevent ARG_MAX from
	being defined by the kernel headers.

2011-05-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12734]
	* resolv/resolv.h: Define RES_NOTLDQUERY.
	* resolv/res_init.c (res_setoptions): Recognize no_tld_query and
	no-tld-query and set RES_NOTLDQUERY.
	* resolv/res_debug.c (p_option): Handle RES_NOTLDQUERY.
	* resolv/res_query.c (__libc_res_nsearch): Backport changes from
	modern BIND to search name as TLD unless forbidden.

2011-05-07  Petr Baudis  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12393]
	* elf/dl-load.c (fillin_rpath): Move trusted path check...
	(is_trusted_path): ...to here.
	(is_trusted_path_normalize): Wrapper for /../ and /./ normalization.
	(_dl_dst_substitute): Verify expanded $ORIGIN path elements
	using is_trusted_path_normalize() in setuid scripts.

2011-05-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add missing
	__BEGIN/__END_DECLS.

2011-05-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Return
	NSS_STATUS_NOTFOUND if no record was found.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* sunrpc/Makefile (headers): Add rpc/netdb.h.
	(headers-not-in-tirpc): Remove rpc/netdb.h
	* resolv/netdb.h: Revert last change.

2011-05-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* Makeconfig (link-libc-static): Use --{start,end}-group to handle
	circular dependency between libgcc.a and libc.a.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* resolv/netdb.h: Don't include <rpc/netdb.h>.
	* nis/Makefile: Don't install rpcsvc/*.
	* inet/protocols/timed.h: Include <sys/types.h> and <sys/time.h>
	instead of <rpc/types.h>.
	(MAXHOSTNAMELEN): Define.

2011-05-03  Andreas Schwab  <schwab@redhat.com>

	* elf/ldconfig.c (add_dir): Don't crash on empty path.

2011-04-28  Maciej Babinski  <mbabinski@google.com>

	[BZ #12714]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't bypass
	gethostbyname4_r when IPv6 results are possible.

2011-05-02  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12723]
	* sysdeps/unix/sysv/linux/pathconf.c (__pathconf): Implement
	_PC_PIPE_BUF handling.

2011-04-30  Bruno Haible  <bruno@clisp.org>

	[BZ #12717]
	* conform/data/netdb.h-data (getnameinfo): Make POSIX compliant.
	* resolv/netdb.h (getnameinfo): Change type of flags parameter
	to 'int'.
	* inet/getnameinfo.c (getnameinfo): Likewise.

2011-04-29  Ulrich Drepper  <drepper@gmail.com>

	* grp/initgroups.c (internal_getgrouplist): Prefer initgroups setting
	to groups setting in database lookup.
	* nss/nsswitch.conf: Add initgroups entry.

2011-04-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12685]
	* libio/fileops.c (_IO_new_file_fopen): Scan up to 7 bytes of the
	mode string.
	Patch by Eric Blake <eblake@redhat.com>.

2011-04-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sunrpc/Makefile (need-export-routines): Add svc_run.
	(routines): Remove svc_run.
	($(objpfx)thrsvc): Add $(common-objpfx)linkobj/libc.so.
	* sunrpc/clnt_perr.c (clnt_perrno): Export.
	* sunrpc/svc_run.c (svc_run): Likewise.
	* sunrpc/svc_udp.c (svcudp_create): Likewise.

2011-04-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Fix
	problem in reallocation in last patch.

2011-04-20  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile: Move inclusion of Rules.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c: New file.
	* nss/Makefile (libnss_files-routines): Add files-initgroups.
	* nss/Versions (libnss_files) [GLIBC_PRIVATE]: Export
	_nss_files_initgroups_dyn.

2011-03-31  Richard Sandiford  <richard.sandiford@linaro.org>

	* elf/elf.h (R_ARM_IRELATIVE): Define.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile ($(rpc-compat-routines.os)): Add before-compile to
	dependencies.

2011-02-06  Mike Frysinger  <vapier@gentoo.org>

	[BZ #12653]
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Only protect
	MEMCPY_CHK with USE_AS_BCOPY ifdef check.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.

2011-03-28  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Don't read past
	differing bytes.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12420]
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Reload context after
	storing it.
	* stdlib/bug-getcontext.c: New file.
	* stdlib/Makefile: Add rules to build and run bug-getcontext.

2011-04-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Wrap the z9-109
	instructions into .machine "z9-109".
	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Likewise.

2011-04-11  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/elf/start.S (_start): Skip extra zeroes
	between environment variables and auxiliary vector.

2011-04-16  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Add rules to build linkobj/libc.so.
	* include/libc-symbols.h: Define libc_hidden_nolink.
	* include/rpc/auth.h: Mark functions which are to be hidden.
	* include/rpc/auth_des.h: Likewise.
	* include/rpc/auth_unix.h: Likewise.
	* include/rpc/clnt.h: Likewise.
	* include/rpc/des_crypt.h: Likewise.
	* include/rpc/key_prot.h: Likewise.
	* include/rpc/pmap_clnt.h: Likewise.
	* include/rpc/pmap_prot.h: Likewise.
	* include/rpc/pmap_rmt.h: Likewise.
	* include/rpc/rpc_msg.h: Likewise.
	* include/rpc/svc.h: Likewise.
	* include/rpc/svc_auth.h: Likewise.
	* include/rpc/xdr.h: Likewise.
	* nis/Makefile: Link all DSOs against linkobj/libc.so.
	* nss/Makefile: Likewise.
	* sunrpc/Makefile: Don't install headers.  Build library with normal
	entry points.  Don't build rpcinfo.  Link RPC tests appropriately.
	* sunrpc/auth_des.c: Hide exported symbols by default, export some
	for the compat linking library.  Remove use of INTDEF/INTUSE.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-04-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12650]
	* sysdeps/i386/dl-tls.h: Define TLS_DTV_UNALLOCATED.
	* sysdeps/ia64/dl-tls.h: Likewise.
	* sysdeps/powerpc/dl-tls.h: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/sh/dl-tls.h: Likewise.
	* sysdeps/sparc/dl-tls.h: Likewise.
	* sysdeps/x86_64/dl-tls.h: Likewise.
	* elf/dl-tls.c: Don't define TLS_DTV_UNALLOCATED here.

2011-03-14  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (_dl_dst_substitute): When skipping the first
	rpath element also skip the following colon.
	(expand_dynamic_string_token): Add is_path parameter and pass
	down to DL_DST_REQUIRED and _dl_dst_substitute.
	(decompose_rpath): Call expand_dynamic_string_token with
	non-zero is_path.  Ignore empty rpaths.
	(_dl_map_object_from_fd): Call expand_dynamic_string_token
	with zero is_path.

2011-04-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Make cancelable.

2011-04-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12655]
	* sysdeps/unix/sysv/linux/sys/syscall.h: Fix comment.
	Patch by Filipe David Manana <fdmanana@apache.org>.

2011-04-07  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S (CALL_FAIL):
	Maintain aligned stack.
	(CHECK_RSP): Remove unused macro.

2011-04-03  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/cacheinfo.c (intel_02_known): Fix typo in table.
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_02_known): Likewise.

2011-04-02  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h (CLOCK_BOOTTIME): Define.

	* include/features.h: Mention __USE_XOPEN2K8 in comment.

2011-03-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12518]
	* sysdeps/x86_64/Versions: Add memcpy to GLIBC_2.14.
	* sysdeps/x86_64/memcpy.S: Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: Include <shlib-compat.h>.
	(memcpy): Renamed to ...
	(__new_memcpy): This.
	(memcpy): Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/multiarch/memmove.c: Include <shlib-compat.h>.
	(memcpy): Provide GLIBC_2_2_5 memcpy.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12631]
	* wcsmbs/wchar.h: Make wcpcpy and wcpncpy visible for __USE_XOPEN2K8.

2011-03-30  Andreas Schwab  <schwab@redhat.com>

	* misc/syncfs.c: New file.
	* misc/Makefile (routines): Add syncfs.
	* posix/unistd.h: Declare syncfs.
	* sysdeps/unix/syscalls.list: Add syncfs.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Versions: Rename open_by_handle to
	open_by_handle_at.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define O_PATH.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

	* io/Makefile: Compile fallocate.c, fallocate64.c, and
	sync_file_range.c with -fexceptions.
	* sysdeps/unix/sysv/linux/fallocate.c: Make cancelable.
	* sysdeps/unix/sysv/linux/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Mark
	sync_file_range as cancellation point
	* sysdeps/unix/sysv/linux/i386/sync_file_range.c: New file.  This is
	now a wrapper around __call_sync_file_range with cancellation handling.
	* sysdeps/unix/sysv/linux/i386/sync_file_range.S: Renamed to ...
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: ...this.  Change
	function name to __call_sync_file_range.
	* sysdeps/unix/sysv/linux/i386/Makefile [subdir=io] (sysdep_routines):
	Add call_sync_file_range.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timex.h.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* iconv/iconv.h: Fix typo in comment.
	* io/fcntl.h: Likewise.
	* libio/stdio.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/unistd.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (name_to_handle_at,
	open_by_handle): Add.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define struct file_handle
	and MAX_HANDLE_SZ.  Declare name_to_handle_at and open_by_handle.
	Augment a few comments.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Add name_to_handle_at and
	open_by_handle.

	* io/fcntl.h (AT_EMPTY_PATH): Define.

2011-03-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add clock_adjtime.
	* sysdeps/unix/sysv/linux/bits/time.h: New file.
	* sysdeps/unix/sysv/linux/sys/timex.h: Move struct timex definition
	to...
	* sysdeps/unix/sysv/linux/bits/timex.h: ...here.  New file.
	* Versions.def: Add GLIBC_2.14.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (clock_adjtime):
	Export.

2011-03-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word): Increment
	round counter.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12597]
	* string/test-strncmp.c (do_page_test): New function.
	(check2): Likewise.
	(test_main): Call check2.
	* sysdeps/x86_64/multiarch/strcmp.S: Properly cross page boundary.

2011-03-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12587]
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word):
	Handle cache information in CPU leaf 4.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-18  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12583]
	* posix/fnmatch.c (fnmatch): Check size of pattern in wide
	character representation.
	Partly based on a patch by Tomas Hoger <thoger@redhat.com>.

2011-03-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnanf.S (isnanf): Fix
	END(__isnan) to END(__isnanf) to match function entry point/label
	EALIGN(__isnanf,...).

2011-03-10  Jakub Jelinek  <jakub@redhat.com>

	* wcsmbs/wchar.h (wmemcmp): Remove __restrict qualifiers.

2011-03-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12510]
	* elf/dl-lookup.c (do_lookup_x): For copy relocations of unique objects
	copy from the symbol referenced in the relocation to initialize the
	used variable.
	Patch by Piotr Bury <pbury@goahead.com>.
	* elf/Makefile: Add rules to build and tst-unique3.
	* include/bits/dlfcn.h: Remove _dl_mcount_wrapper_check declaration.
	* elf/tst-unique3.cc: New file.
	* elf/tst-unique3.h: New file.
	* elf/tst-unique3lib.cc: New file.
	* elf/tst-unique3lib2.cc: New file.

	* elf/Makefile: Don't run tst-execstack* tests of SELinux is enabled.

2011-03-10  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/sparc/sparc64/elf/configure.in (libc_cv_sparc64_tls): Add
	$LDFLAGS and -nostdlib -nostartfiles to linking step.  Change main
	to _start.

2011-03-06  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): If we are looking for the first
	to-be-loaded object along a path to loader is ld.so.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/memset.S: After aligning destination, code
	branches to different locations depending on the value of
	misalignment, when multiarch is enabled. Fix this.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>

	* sysdeps/x86_64/cacheinfo.c (init_cacheinfo):
	Set _x86_64_preferred_memory_instruction for AMD processsors.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for AMD processors.

2011-03-04  Ulrich Drepper  <drepper@gmail.com>

	* libio/fmemopen.c (fmemopen): Optimize a bit.

2011-03-03  Andreas Schwab  <schwab@redhat.com>

	* libio/fmemopen.c (fmemopen): Don't read past end of buffer.

2011-03-03  Roland McGrath  <roland@redhat.com>

	* setjmp/bits/setjmp2.h: Canonicalize comment formatting.

2011-02-28  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc64/multiarch/memset.S(__bzero): Call
	__bzero_ultra1 instead of __memset_ultra1.

2011-02-23  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12509]
	* include/link.h (struct link_map): Add l_orig_initfini.
	* elf/dl-load.c (_dl_map_object_from_fd): Free realname before
	returning unsuccessfully.
	* elf/dl-close.c (_dl_close_worker): If this is the last explicit
	close of a file loaded at startup, restore the original l_initfini
	list.
	* elf/dl-deps.c (_dl_map_object_deps): Don't free old l_initfini
	list, store the pointer.
	* elf/Makefile ($(objpfx)noload-mem): New rule.
	(noload-ENV): Define.
	(tests): Add $(objpfx)noload-mem.
	* elf/noload.c: Include <memcheck.h>.
	(main): Call mtrace.  Close all opened handles.

2011-02-17  Andreas Schwab  <schwab@redhat.com>

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Signal error early when
	dependencies are missing.

2011-02-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix __if_freereq crash: Unlike the generic version which uses free,
	Hurd needs munmap.
	* sysdeps/mach/hurd/ifreq.h: New file.

2011-01-27  Petr Baudis  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ 12445]#
	* stdio-common/vfprintf.c (vfprintf): Pass correct newlen
	to extend_alloca().
	* stdio-common/bug23.c: New file.
	* stdio-common/Makefile (tests): Add bug23.

2010-09-28  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12489]
	* elf/rtld.c (dl_main): Move setting of GLRO(dl_init_all_dirs)
	before performing relro protection.  At old place add assertion
	to make sure nothing changed.

2011-02-17  Nathan Sidwell  <nathan@codesourcery.com>
	    Glauber de Oliveira Costa  <glommer@gmail.com>

	* elf/elf.h: Add new ARM TLS relocs.

2011-02-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	(INTERNAL_VSYSCALL_NCS INTERNAL_SYSCALL_NCS): Remove erroneous (int)
	cast from r3.
	* sysdeps/wordsize-64/Makefile: New file.  Add tst-writev to
	'tests' variable.
	* sysdeps/wordsize-64/tst-writev.c: New file.

2011-02-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/Makefile: New file which adds
	-mno-vsx to the CFLAGS-rtld.c variable to avoid using VSX registers and
	insns in _dl_start to prevent a TOC reference before relocs are
	resolved.

2011-02-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12469]
	* Makeconfig: Remove RANLIB definition.
	* Makerules: Don't use RANLIB.
	* aclocal.m4: Remove ranlib test.
	* configure.in: No need to check for ranlib.
	* elf/rtld-Rules: Don't use RANLIB.

2011-02-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/i386/sysdep.h: Add _MACH_I386_SYSDEP_H inclusion
	protection macro.
	* sysdeps/mach/i386/thread_state.h: Add _MACH_I386_THREAD_STATE_H
	inclusion protection macro.

	* stdio-common/psiginfo.c (psiginfo): Check pinfo->si_signo against
	SIGRTMIN and SIGRTMAX and print information in that case only when
	SIGRTMIN is defined.

2011-02-11  Jakub Jelinek  <jakub@redhat.com>

	* stdio-common/printf-parsemb.c (__parse_one_specmb): Handle
	arginfo fn returning -1.

	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Ensure decimal
	and thousands string is zero terminated.

2011-02-03  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Sync with
	sysdeps/unix/sysv/linux/bits/socket.h.

2011-01-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/sched.h (__CPU_ZERO, __CPU_SET, __CPU_CLR, __CPU_ISSET)
	(__CPU_COUNT): Remove old macros.
	(__CPU_ZERO_S, __CPU_SET_S, __CPU_CLR_S, __CPU_ISSET_S)
	(__CPU_COUNT, __CPU_EQUAL_S, __CPU_OP_S, __CPU_ALLOC_SIZE)
	(__CPU_ALLOC, __CPU_FREE): Add macros.
	(__sched_cpualloc, __sched_cpufree): Add declarations.

2011-02-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd-client.h: Define MAX_TIMEOUT_VALUE.
	(struct datahead): Reuse 32 bits of the alignment for a TTL field.
	* nscd/aicache.c (addhstaiX): Return timeout of added value.
	(readdhstai): Return value of addhstaiX call.
	* nscd/grpcache.c (cache_addgr): Return timeout of added value.
	(addgrbyX): Return value returned by cache_addgr.
	(readdgrbyname): Return value returned by addgrbyX.
	(readdgrbygid): Likewise.
	* nscd/pwdcache.c (cache_addpw): Return timeout of added value.
	(addpwbyX): Return value returned by cache_addpw.
	(readdpwbyname): Return value returned by addhstbyX.
	(readdpwbyuid): Likewise.
	* nscd/servicescache.c (cache_addserv): Return timeout of added value.
	(addservbyX): Return value returned by cache_addserv.
	(readdservbyname): Return value returned by addservbyX:
	(readdservbyport): Likewise.
	* nscd/hstcache.c (cache_addhst): Return timeout of added value.
	(addhstbyX): Return value returned by cache_addhst.
	(readdhstbyname): Return value returned by addhstbyX.
	(readdhstbyaddr): Likewise.
	(readdhstbynamev6): Likewise.
	(readdhstbyaddrv6): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Return timeout of added value.
	(readdinitgroups): Return value returned by addinitgroupsX.
	* nscd/cache.c (readdfcts): Change return value of functions to time_t.
	(prune_cache): Keep track of timeout value of re-added entries.
	* nscd/connections.c (nscd_run_prune): Use MAX_TIMEOUT_VALUE.
	* nscd/nscd.h: Adjust prototypes of readd* functions.

2011-02-04  Roland McGrath  <roland@redhat.com>

	* nis/nis_server.c (nis_servstate): Use the right name for 0.
	(nis_stats): Likewise.
	* nis/nis_modify.c (nis_modify): Likewise.
	* nis/nis_remove.c (nis_remove): Likewise.
	* nis/nis_add.c (nis_add): Likewise.

	* elf/dl-object.c (_dl_new_object): Remove unused variable L.

	* posix/fnmatch_loop.c: Add some consts.

	* sysdeps/x86_64/multiarch/memset-x86-64.S: Add an #undef.

2011-02-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12460]
	* config.make.in (config-cflags-novzeroupper): Define.
	* configure.in: Substitute libc_cv_cc_novzeroupper.
	* elf/Makefile (AVX-CFLAGS): Define.
	(CFLAGS-tst-audit4.c): Replace -mavx with $(AVX-CFLAGS).
	(CFLAGS-tst-auditmod4a.c): Likewise.
	(CFLAGS-tst-auditmod4b.c): Likewise.
	(CFLAGS-tst-auditmod6b.c): Likewise.
	(CFLAGS-tst-auditmod6c.c): Likewise.
	(CFLAGS-tst-auditmod7b.c): Likewise.
	* sysdeps/i386/configure.in: Check -mno-vzeroupper.

2011-02-02  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-runtime.c (_dl_call_pltexit): Pass correct address of the
	function to the callback.
	Patch partly by Jiri Olsa <jolsa@redhat.com>.

2011-02-02  Andreas Schwab  <schwab@redhat.com>

	* shadow/sgetspent.c: Check return value of __sgetspent_r instead
	of errno.

2011-01-19  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Rewrite sorting determining order
	of constructors.
	* elf/dl-fini.c (_dl_sort_fini): Rewrite sorting determining order
	of destructors.
	(_dl_fini): Don't call _dl_sort_fini if there is only one object.

	[BZ #11724]
	* elf/Makefile: Add rules to build and run new test.
	* elf/tst-initorder.c: New file.
	* elf/tst-initorder.exp: New file.
	* elf/tst-initordera1.c: New file.
	* elf/tst-initordera2.c: New file.
	* elf/tst-initordera3.c: New file.
	* elf/tst-initordera4.c: New file.
	* elf/tst-initorderb1.c: New file.
	* elf/tst-initorderb2.c: New file.
	* elf/tst-order-a1.c: New file.
	* elf/tst-order-a2.c: New file.
	* elf/tst-order-a3.c: New file.
	* elf/tst-order-a4.c: New file.
	* elf/tst-order-b1.c: New file.
	* elf/tst-order-b2.c: New file.
	* elf/tst-order-main.c: New file.
	New test case by George Gensure <werkt0@gmail.com>.

2010-10-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	decoding ACE if AI_CANONIDN.

2011-01-18  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Build IFUNC tests unless multi-arch = no.

2011-01-17  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.13 release.
	* include/features.h: (__GLIBC_MINOR__): Bump to 13.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MADV_HUGEPAGE and
	MADV_NOHUGEPAGE.
	* sysdeps/unix/sysv/linux/ia64/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

	* posix/getconf.c: Update copyright year.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h: Define AF_CAIF, AF_ALG,
	PF_CAIF, and PF_ALG.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.

2011-01-16  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (tlsmod17a-modules, tlsmod18a-modules): Define.
	(modules-names): Use them.
	(ifunc-test-modules, ifunc-pie-tests): Define.
	(extra-test-objs): Add tlsmod17a-modules, tlsmod18a-modules,
	tst-pie1, ifunc-test-modules and ifunc-pie-tests objects.
	(test-extras): Likewise.
	($(patsubst %,$(objpfx)%.os,$(tlsmod17a-modules))): Use
	$(compile-command.c).
	($(patsubst %,$(objpfx)%.os,$(tlsmod18a-modules))): Likewise.
	(all-built-dso): Define.
	(check-textrel.out, check-execstack.out): Depend on it.

	* configure.in: Don't override --enable-multi-arch.

2011-01-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #6812]
	* nscd/hstcache.c (tryagain): Define.
	(cache_addhst): Return tryagain not notfound for temporary errors.
	(addhstbyX): Also set h_errno to TRY_AGAIN when memory allocation
	failed.

2011-01-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #10563]
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Use INLINE_SETXID_SYSCALL
	to make the syscall.
	* sysdeps/unix/sysv/linux/setgroups.c: New file.

	[BZ #12378]
	* posix/fnmatch_loop.c (FCT): When matching '[' keep track of beginning
	and fall back to matching as normal character if the string ends before
	the matching ']' is found.  This is what POSIX requires.
	* posix/testfnm.c: Adjust test result.
	* posix/globtest.sh: Adjust test result.  Add new test.
	* posix/tst-fnmatch.input: Likewise.
	* posix/tst-fnmatch2.c: Add new test.

2010-12-28  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (check-execstack): Revert last change.  Depend on
	check-execstack.h.
	(check-execstack.h): New target.
	(generated): Add check-execstack.h.
	* elf/check-execstack.c: Include "check-execstack.h".
	(main): Revert last change.
	(handle_file): Return zero if GNU_STACK is absent and
	DEFAULT_STACK_PERMS doesn't include PF_X.

2011-01-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/posix/spawni.c (__spawni): Don't fail if close file action
	in child fails because the descriptor is already closed.
	* include/sys/resource.h: Add libc_hidden_proto for getrlimit64.
	* sysdeps/unix/sysv/linux/getrlimit64.c: Add libc_hidden_def.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Likewise.

	[BZ #12397]
	* sysdeps/unix/sysv/linux/mkdirat.c (mkdirat): Fix handling of missing
	syscall.

	[BZ #10484]
	* nss/nss_files/files-hosts.c (HOST_DB_LOOKUP): Handle overflows of
	temporary buffer used to handle multi lookups locally.
	* include/alloca.h: Add libc_hidden_proto for __libc_alloca_cutoff.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-dst.h (DL_DST_REQUIRED): Allow l_origin to be NULL when
	loader is ld.so.

2011-01-10  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/i386/Makefile: stdlib/cxa_finalize.c needs 16-byte stack
	alignment for SSE2.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12394]
	* stdio-common/printf_fp.c (__printf_fp): Add more room for grouping
	characters.  When rounding increased number of integer digits recompute
	number of groups.
	* stdio-common/tst-grouping.c: New file.
	* stdio-common/Makefile: Add rules to build and run tst-grouping.

2011-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/select.h: Don't use asm code for __FD_SET,
	__FD_CLR, and __FS_ISSET.  gcc generates better code on its own.

	* sysdeps/x86_64/bits/select.h: Mark value of __FD_SET and __FD_CLR as
	void.
	* bits/select.h: Likewise.

2011-01-08  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-01-04  David S. Miller  <davem@sunset.davemloft.net>

	[BZ #11155]
	* sysdeps/unix/sysv/linux/sparc/sparc64/fxstat.c: Use i386's
	implementation just like for lxstat, fxstatat, et al.

2010-12-27  Jim Meyering  <meyering@redhat.com>

	[BZ #12348]
	* posix/regexec.c (build_trtable): Return failure indication upon
	calloc failure.  Otherwise, re_search_internal could infloop on OOM.

2010-12-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12201]
	* sysdeps/unix/sysv/linux/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Use ../getrlimit64.c.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_PRLIMIT64.

	[BZ #12207]
	* malloc/malloc.c (do_check_malloc_state): Use fastbin macro.

	[BZ #12204]
	* string/xpg-strerror.c (__xpg_strerror_r): Return error code, not -1.
	* sysdeps/mach/xpg-strerror.c (__xpg_strerror_r): Likewise.

2010-12-15  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (NO_CTORS_DTORS_SECTIONS): Define.
	* configure.in: Define NO_CTORS_DTORS_SECTIONS if linker
	script has SORT_BY_INIT_PRIORITY.
	* elf/sofini.c: Remove `.ctors' and `.dtors' sections if
	NO_CTORS_DTORS_SECTIONS is defined.
	* elf/soinit.c: Likewise.
	* sysdeps/i386/init-first.c: Don't call __libc_global_ctors if
	NO_CTORS_DTORS_SECTIONS is defined.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c: Likewise.
	* sysdeps/sh/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/init-first.c: Likewise.

2010-12-24  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/vfprintf.c (vfprintf): If printf handlers are installed
	always use the slow path.

2010-12-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* elf/Makefile: (check-execstack): Replace $(native-compile) with a
	similar rule which adds the sysdep directories to the header search in
	order to pick up the correct platform stackinfo.h.
	* elf/check-execstack.c (main): Check DEFAULT_STACK_PERMS for PF_X and
	perform test if it is, otherwise return successfully without testing.
	* elf/dl-load.c (_dl_map_object_from_fd): Source stack_flags from
	DEFAULT_STACK_PERMS define in stackinfo.h.
	* elf/dl-support.c (_dl_stack_flags): Source from DEFAULT_STACK_PERMS
	defined in stackinfo.h.
	* elf/rtld.c (_dl_starting_up): Source ._dl_stack_flags from
	DEFAULT_STACK_PERMS defined in stackinfo.h.
	* sysdeps/i386/stackinfo.h: Define DEFAULT_STACK_PERMS with PF_X.
	* sysdeps/ia64/stackinfo.h: Likewise.
	* sysdeps/s390/stackinfo.h: Likewise.
	* sysdeps/sh/stackinfo.h: Likewise.
	* sysdeps/sparc/stackinfo.h: Likewise.
	* sysdeps/x86_64/stackinfo.h: Likewise.
	* sysdeps/powerpc/stackinfo.h: Define DEFAULT_STACK_PERMS without
	PF_X for powerpc64.  Retain PF_X for powerpc32.

2010-12-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/readdir_r.c (__READDIR_R): Compute reclen more
	accurately.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir_r.c: Define
	GETDENTS_64BIT_ALIGNED.

2010-12-14  Ulrich Drepper  <dreper@gmail.com>

	* sysdeps/i386/i686/multiarch/strcmp.S: Undo accidental checkin.

2010-12-10  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Only declare under
	_GNU_SOURCE.

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Add __restrict.
	* wcsmbs/bits/wchar2.h (__wmemmove_chk_warn, wmemmove, wmemset):
	Remove __restrict.
	(wcscpy, __wcpcpy_chk, __wcpcpy_alias, wcpcpy, wcsncpy, wcpncpy)
	(wcscat, wcsncat, __wcrtomb_chk, wcrtomb): Add __restrict.

2010-12-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11655]
	* stdlib/msort.c (qsort_r): Make sure both phys_pages and pagesize
	are initialized.

2010-12-09  Jakub Jelinek  <jakub@redhat.com>

	* string/bits/string3.h (memmove, bcopy): Remove __restrict.

2010-12-03  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2010-12-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S (STRCMP): Remove
	unused codes.

2010-11-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Relax ynf(10,0.75) test expectations.

2010-11-24  Andreas Schwab  <schwab@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Don't handle ttl == 0
	specially.
	(gaih_getanswer_slice): Likewise.

2010-10-20  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Fix up inline asm.

2010-05-31  Petr Baudis  <pasky@suse.cz>

	[BZ #11149]
	* elf/ldconfig.c (main): Allow aux_cache_file open()ing to fail
	silently even in the chroot mode.

2010-11-22  Ulrich Drepper  <drepper@gmail.com>

	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Optimize
	last patch a bit.  Pretty printing

2010-05-31  Petr Baudis <pasky@suse.cz>

	[BZ #10085]
	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Fix
	initialization of skip_initgroups_dyn.

2010-11-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

2010-11-16  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/sys/swap.h (SWAP_FLAG_DISCARD): Define.

2010-11-11  Andreas Schwab  <schwab@redhat.com>

	* posix/fnmatch_loop.c (NEW_PATTERN): Fix use of alloca.
	* posix/Makefile (tests): Add $(objpfx)tst-fnmatch-mem.
	(tst-fnmatch-ENV): Set MALLOC_TRACE.
	($(objpfx)tst-fnmatch-mem): New rule.
	(generated): Add tst-fnmatch-mem and tst-fnmatch.mtrace.
	* posix/tst-fnmatch.c (main): Call mtrace.

2010-11-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Support Intel processor model 6 and model 0x2c.

2010-11-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (__ieee754_sqrtl): Force
	  signed comparison.

2010-11-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12205]
	* string/test-strncasecmp.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.
	* sysdeps/i386/i686/multiarch/strcmp.S (nibble_ashr_use_sse4_2_exit):
	Support strcasecmp and strncasecmp.

2010-11-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12194]
	* sysdeps/i386/bits/byteswap.h: Avoid warning in __bswap_16.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2010-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memset.S: Check USE_MULTIARCH and USE_SSE2 for
	IFUNC support.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-x86-64.
	* sysdeps/x86_64/multiarch/bzero.S: New file.
	* sysdeps/x86_64/multiarch/cacheinfo.c: New file.
	* sysdeps/x86_64/multiarch/memset-x86-64.S: New file.
	* sysdeps/x86_64/multiarch/memset.S: New file.
	* sysdeps/x86_64/multiarch/memset_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for Intel processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Prefer_SSE_for_memop):
	Define.
	(index_Prefer_SSE_for_memop): Define.
	(HAS_PREFER_SSE_FOR_MEMOP): Define.

2010-11-04  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: New file.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: New file.

2010-11-03  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12191]
	* sysdeps/i386/i686/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.

	* sysdeps/x86_64/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.
	(init_cacheinfo): Set __x86_64_raw_data_cache_size,
	__x86_64_raw_data_cache_size_half, __x86_64_raw_shared_cache_size
	and __x86_64_raw_shared_cache_size_half.  Round
	__x86_64_data_cache_size_half, __x86_64_data_cache_size
	__x86_64_shared_cache_size_half and __x86_64_shared_cache_size,
	to multiple of 256 bytes.

2010-11-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12167]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Recognize new mangling
	of inacessible symlinks.  Verify result of symlink before returning it.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.
	Patch mostly by Miklos Szeredi <miklos@szeredi.hu>.

2010-10-28  Erich Ritz  <erichritz@gmail.com>

	* math/math.h (isinf): Fix typo in comment.

2010-11-01  Ulrich Drepper  <drepper@gmail.com>

	* po/da.po: Update from translation team.

2010-10-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/rtld.c (dl_main): Move assertion after the point where rtld map
	is added to the list.

2010-10-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-object.c (_dl_new_object): Don't append the new object to
	the global list here.  Move code to...
	(_dl_add_to_namespace_list): ...here.  New function.
	* elf/rtld.c (dl_main): Invoke _dl_add_to_namespace_list.
	* sysdeps/generic/ldsodefs.h (_dl_add_to_namespace_list): Declare.
	* elf/dl-load.c (lose): Don't remove the element from the list.
	(_dl_map_object_from_fd): Invoke _dl_add_to_namespace_list.
	(_dl_map_object): Likewise.

2010-10-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12159]
	* sysdeps/x86_64/multiarch/strchr.S: Fix propagation of search byte
	into all bytes of SSE register.
	Patch by Richard Li <richardpku@gmail.com>.

2010-10-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12140]
	* malloc/malloc.c (_int_free): Fill correct number of bytes when
	perturbing.

2010-10-20  Michael B. Brutman  <brutman@us.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c: Add support for ppca2 platform
	* sysdeps/powerpc/dl-procinfo.h: Add support for ppca2 platform
	* sysdeps/powerpc/powerpc32/a2/memcpy.S: New file.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/a2/Implies: New
	submachine.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/a2/Implies: Likewise.

2010-10-22  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_SECURE): Define.
	* elf/dl-load.c (_dl_map_object): Remove preloaded parameter.  Use
	mode & __RTLD_SECURE instead.
	(open_path): Rename preloaded parameter to secure.
	* sysdeps/generic/ldsodefs.h (_dl_map_object): Adjust declaration.
	* elf/dl-open.c (dl_open_worker): Adjust call to _dl_map_object.
	* elf/dl-deps.c (openaux): Likewise.
	* elf/rtld.c (struct map_args): Remove is_preloaded.
	(map_doit): Don't use it.
	(dl_main): Likewise.
	(do_preload): Use __RTLD_SECURE instead of is_preloaded.
	(dlmopen_doit): Add __RTLD_SECURE to mode bits.

2010-09-09  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (sysd-rules-patterns): Add rtld-%:rtld-%.
	(sysd-rules-targets): Remove duplicates.
	* elf/rtld-Rules ($(objpfx)rtld-%.os): Add pattern rules with
	rtld-%.$o dependency.

2010-10-18  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-open.c (dl_open_worker): Don't expand DST here, let
	_dl_map_object do it.

2010-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has
	fast fma builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/x86_64/bits/mathdef.h: Likewise.

	* bits/mathdef.h: Update copyright year.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.

2010-10-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has fast fma
	builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (FP_FAST_FMA): Define, ppc as
	multiply/add.
	(FP_FAST_FMAF): Likewise.

2010-10-15  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some new testcases.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: New file.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do multiplication by C already in long double.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do bitwise or of inexact bit into u.d.
	* sysdeps/ieee754/ldbl-64-128/s_fmal.c: New file.
	* sysdeps/i386/fpu/s_fmaf.S: Removed.
	* sysdeps/i386/fpu/s_fma.S: Removed.
	* sysdeps/i386/fpu/s_fmal.S: Removed.

2010-10-16  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add IEEE quad long double fmal tests.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.  Fix value
	of minimum denormal long double.

2010-10-14  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more tests.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle underflows
	correctly.

2010-10-15  Andreas Schwab  <schwab@redhat.com>

	* scripts/data/localplt-s390-linux-gnu.data: New file.
	* scripts/data/localplt-s390x-linux-gnu.data: New file.

2010-10-13  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some more fmaf and fma tests.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include ldbl-96 version
	instead of dbl-64.
	* sysdeps/i386/fpu/bits/mathinline.h (fma, fmaf, fmal): Remove
	inlines.
	* sysdeps/ieee754/ldbl-96/s_fma.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix exponent adjustment
	if one of x and y is very large and the other is subnormal.
	* sysdeps/s390/fpu/s_fmaf.c: New file.
	* sysdeps/s390/fpu/s_fma.c: New file.
	* sysdeps/powerpc/fpu/s_fmaf.S: New file.
	* sysdeps/powerpc/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_fma.S: New file.
	* sysdeps/unix/sysv/linux/s390/fpu/s_fma.c: New file.

2010-10-12  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more fmaf tests, add
	fma tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Fix Inf/Nan check.
	* sysdeps/ieee754/dbl-64/s_fma.c: New file.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include
	sysdeps/ieee754/dbl-64/s_fma.c instead of math/s_fma.c.
	* sysdeps/x86_64/multiarch/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fma.c: New file.

2010-10-12  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12078]
	* posix/regcomp.c (parse_branch): One more memory leak plugged.
	* posix/bug-regex31.input: Add test case.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	* posix/bug-regex31.c: Rewrite to run multiple tests from stdin.
	* posix/bug-regex31.input: New file.

	[BZ #12078]
	* posix/regcomp.c (parse_branch): Free memory when allocation failed.
	(parse_sub_exp): Fix last change, use postorder.

	* posix/bug-regex31.c: New file.
	* posix/Makefile: Add rules to build and run bug-regex31.

	* posix/regcomp.c (parse_bracket_exp): Add missing re_free calls.

	[BZ #12078]
	* posix/regcomp.c (parse_sub_exp): Free tree data when it is not used.

	[BZ #12108]
	* stdio-common/psiginfo.c (psiginfo): Don't expext SIGRTMIN..SIGRTMAX
	to have entries in sys_siglist.

	[BZ #12093]
	* sysdeps/unix/sysv/linux/check_pf.c (__check_pf): ->ifa_addr might
	be NULL.

2010-10-07  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add 2 fmaf tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: New file.
	* sysdeps/i386/i686/multiarch/s_fmaf.c: Include
	sysdeps/ieee754/dbl-64/s_fmaf.c instead of math/s_fmaf.c.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.
	* include/fenv.h (feupdateenv, fetestexcept): Add libm_hidden_proto.
	* math/feupdateenv.c (feupdateenv): Add libm_hidden_ver.
	* sysdeps/i386/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/x86_64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Add libm_hidden_def.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* math/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/ia64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/i386/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/s390/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/powerpc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/x86_64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sparc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12107]
	* stdio-common/psiginfo.c (psiginfo): Terminate all strings with
	newline.

2010-10-06  Ulrich Drepper  <drepper@gmail.com>

	* string/bug-strstr1.c: New file.
	* string/Makefile: Add rules to build and run bug-strstr1.

2010-10-05  Eric Blake  <eblake@redhat.com>

	[BZ #12092]
	* string/str-two-way.h (two_way_long_needle): Always clear memory
	when skipping input due to the shift table.

2010-10-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12005]
	* malloc/mcheck.c: Handle large requests.

	[BZ #12077]
	* sysdeps/x86_64/strcmp.S: Fix handling of remaining bytes in buffer
	for strncmp and strncasecmp.
	* string/stratcliff.c: Add tests for strcmp and strncmp.
	* wcsmbs/wcsatcliff.c: Adjust for stratcliff change.

2010-09-28  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fpu_control.h: Add 'extern "C"' protection to
	__set_fpscr.

2010-09-30  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux_fsinfo.h (BTRFS_SUPER_MAGIC): Define.
	(CGROUP_SUPER_MAGIC): Define.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle btrfs and cgroup file systems.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_filesize_max):
	Likewise.

2010-09-27  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/rtld-memset.c: New file.
	* sysdeps/powerpc/powerpc64/rtld-memset.c: New file.

2010-09-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #12067]
	* sysdeps/s390/s390-32/elf/start.S: Fix address calculation when
	trying to locate the ELF header.

2010-09-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #11611]
	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS):
	Mask out sign-bit copies when constructing f_fsid.

2010-09-24  Petr Baudis <pasky@suse.cz>

	* debug/stack_chk_fail_local.c: Add missing licence exception.
	* debug/warning-nop.c: Likewise.

2010-09-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): When
	implementing getdents64 using getdents syscall, set d_type if
	__ASSUME_GETDENTS32_D_TYPE.

2010-09-16  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-close.c (free_slotinfo, free_mem): Move to...
	* elf/dl-libc.c (free_slotinfo, free_mem): ... here.

2010-09-21  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12037]
	* posix/unistd.h: Undo change of feature selection for ftruncate from
	2010-01-11.

2010-09-20  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Fix another typo in x86-64 strncasecmp limit
	detection.

2010-09-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add
	fanotify_mark.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.

2010-09-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/s390-32/__longjmp.c (__longjmp): Define register
	variables after CHECK_SP call.
	* sysdeps/s390/s390-64/__longjmp.c (__longjmp): Likewise.

2010-09-13  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>

	* elf/rtld.c (dl_main): Set GLRO(dl_init_all_dirs) just before
	re-relocationg ld.so.
	* elf/dl-support.c (_dl_non_dynamic_init): And here after the
	_dl_init_paths call.
	* elf/dl-load.c (_dl_init_paths).  Don't set GLRO(dl_init_all_dirs)
	here anymore.

2010-09-14  Ulrich Drepper  <drepper@redhat.com>

	* resolv/res_init.c (__res_vinit): Count the default server we added.

2010-09-08  Chung-Lin Tang  <cltang@codesourcery.com>
	    Ulrich Drepper  <drepper@redhat.com>

	[BZ #11968]
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(____longjmp_chk): Use %ebx for saving value across system call.
	Add unwind info.

2010-09-06  Andreas Schwab  <schwab@redhat.com>

	* manual/Makefile: Don't mix pattern rules with normal rules.

2010-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* debug/vdprintf_chk.c (__vdprintf_chk): Remove undefined
	operation.
	* libio/iofdopen.c (_IO_new_fdopen): Likewise.
	* libio/iofopncook.c (_IO_cookie_init): Likewise.
	* libio/iovdprintf.c (_IO_vdprintf): Likewise.
	* libio/oldiofdopen.c (_IO_old_fdopen): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.

2010-09-04  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11979]
	* iconvdata/gconv-modules: Remove EBCDIC-CP-AR2 alias from
	IBM-930, IBM-933, IBM-935, IBM-937, and IBM-939.

2010-09-02  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/add_n.S: Update from GMP 5.0.1.
	* sysdeps/x86_64/addmul_1.S: Likewise.
	* sysdeps/x86_64/lshift.S: Likewise.
	* sysdeps/x86_64/mul_1.S: Likewise.
	* sysdeps/x86_64/rshift.S: Likewise.
	* sysdeps/x86_64/sub_n.S: Likewise.
	* sysdeps/x86_64/submul_1.S: Likewise.

2010-09-01  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	This aligns bits/sched.h onto sysdeps/unix/sysv/linux/bits/sched.h:
	Define __sched_param instead of SCHED_* and sched_param when
	<bits/sched.h> is included with __need_schedparam defined.
	* bits/sched.h [__need_schedparam]
	(SCHED_OTHER, SCHED_FIFO, SCHED_RR, sched_param): Do not define.
	[!__defined_schedparam && (__need_schedparam || _SCHED_H)]
	(__defined_schedparam): Define to 1.
	(__sched_param): New structure, identical to sched_param.
	(__need_schedparam): Undefine.

2010-08-31  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h (epoll_create2): Delete.
	(epoll_create1): Declare.

	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Fix typo.

2010-08-31  Andreas Schwab  <schwab@redhat.com>

	[BZ #7066]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Fix array overflow when
	shifting retval into place.

2010-09-01  Ulrich Drepper  <drepper@redhat.com>

	* nis/rpcsvc/nis.h: Update copyright notice.
	* nis/rpcsvc/nis.x: Likewise.
	* nis/rpcsvc/nis_callback.h: Likewise.
	* nis/rpcsvc/nis_callback.x: Likewise.
	* nis/rpcsvc/nis_object.x: Likewise.
	* nis/rpcsvc/nis_tags.h: Likewise.
	* nis/rpcsvc/yp.h: Likewise.
	* nis/rpcsvc/yp.x: Likewise.
	* nis/rpcsvc/ypupd.h: Likewise.
	* nis/yp_xdr.c: Likewise.
	* nis/ypupdate_xdr.c: Likewise.

	* sunrpc/pm_getport.c (__libc_rpc_getport): New function.  This is
	mainly the body of pmap_getport.  Add parameters to specify timeouts.
	(pmap_getport): Use __libc_rpc_getport.
	* sunrpc/Versions: Export __libc_rpc_getport with GLIBC_PRIVATE.
	* include/rpc/pmap_clnt.h: Declare __libc_rpc_getport.
	* nis/nis_findserv.c: Remove pmap_getport copy. Use __libc_rpc_getport.

2010-08-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Add
	fanotify_mark.

2010-08-27  Roland McGrath  <roland@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile
	(CFLAGS-varshift.c): New variable.

2010-08-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/i386/i686/multiarch/varshift.S: File removed.
	* sysdeps/i386/i686/multiarch/varshift.c: New file.

	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Move to .text.slow section.

	* sysdeps/x86_64/strlen.S: Minimal code improvement.

2010-08-26  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strlen.S: Unroll the loop.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/x86_64/multiarch/strlen.S ((strlen): Return
	__strlen_no_bsf if bit_Slow_BSF is set.
	(__strlen_sse42): Removed.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strlen-sse4.S: New file.

2010-08-25  Roland McGrath  <roland@redhat.com>

	* sysdeps/x86_64/multiarch/varshift.S: File removed.
	* sysdeps/x86_64/multiarch/varshift.c: New file.
	* sysdeps/x86_64/multiarch/Makefile (CFLAGS-varshift.c): New variable.
	* sysdeps/x86_64/multiarch/varshift.h: Clean up decls, fix a cast.
	* sysdeps/x86_64/multiarch/memmove.c: Move decls around.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.

2010-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/i386/i686/multiarch/strlen.S (strlen): Return
	__strlen_sse2_bsf if bit_Slow_BSF is unset.
	(__strlen_sse2): Removed.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Set
	bit_Slow_BSF for Atom.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Slow_BSF): Define.
	(index_Slow_BSF): Define.
	(HAS_SLOW_BSF): Define.

2010-08-25  Ulrich Drepper  <drepper@redhat.com>

	[BZ #10851]
	* resolv/res_init.c (__res_vinit): When no server address at all
	is given default to loopback.

2010-08-24  Roland McGrath  <roland@redhat.com>

	* configure.in: Remove config-name.h generation.
	* configure: Regenerated.
	* config-name.in: File removed.
	* scripts/config-uname.sh: New file.
	* posix/Makefile (uname.c): Depend on $(objdir)config-name.h.
	($(objdir)config-name.h): New target.

	* sunrpc/rpc_parse.h: Avoid nested comment.

2010-08-24  Richard Henderson  <rth@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add varshift.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Likewise.
	* sysdeps/x86_64/multiarch/strcspn-c.c: Include "varshift.h".
	Replace _mm_srli_si128 with __m128i_shift_right.  Replace
	_mm_alignr_epi8 with _mm_loadu_si128.
	* sysdeps/x86_64/multiarch/strspn-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strstr.c: Include "varshift.h".
	(__m128i_shift_right): Removed.
	* sysdeps/i386/i686/multiarch/varshift.h: New file.
	* sysdeps/i386/i686/multiarch/varshift.S: New file.
	* sysdeps/x86_64/multiarch/varshift.h: New file.
	* sysdeps/x86_64/multiarch/varshift.S: New file.

2010-08-21  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move assembler checks to before sysdep dir checking.

2010-08-20  Petr Baudis  <pasky@suse.cz>

	* LICENSES: Sync the sunrpc license.

2010-08-19  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/auth_des.c: Update copyright notice once again.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/getrpcport.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_unix.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/des_crypt.h: Likewise.
	* sunrpc/rpc/key_prot.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/pmap_prot.h: Likewise.
	* sunrpc/rpc/pmap_rmt.h: Likewise.
	* sunrpc/rpc/rpc.h: Likewise.
	* sunrpc/rpc/rpc_des.h: Likewise.
	* sunrpc/rpc/rpc_msg.h: Likewise.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/rpc/svc_auth.h: Likewise.
	* sunrpc/rpc/types.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sunrpc/rpc_clntout.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_cout.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_hout.c: Likewise.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_parse.c: Likewise.
	* sunrpc/rpc_parse.h: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_sample.c: Likewise.
	* sunrpc/rpc_scan.c: Likewise.
	* sunrpc/rpc_scan.h: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.
	* sunrpc/rpc_tblout.c: Likewise.
	* sunrpc/rpc_util.c: Likewise.
	* sunrpc/rpc_util.h: Likewise.
	* sunrpc/rpcinfo.c: Likewise.
	* sunrpc/rpcsvc/bootparam_prot.x: Likewise.
	* sunrpc/rpcsvc/key_prot.x: Likewise.
	* sunrpc/rpcsvc/klm_prot.x: Likewise.
	* sunrpc/rpcsvc/mount.x: Likewise.
	* sunrpc/rpcsvc/nfs_prot.x: Likewise.
	* sunrpc/rpcsvc/nlm_prot.x: Likewise.
	* sunrpc/rpcsvc/rex.x: Likewise.
	* sunrpc/rpcsvc/rstat.x: Likewise.
	* sunrpc/rpcsvc/rusers.x: Likewise.
	* sunrpc/rpcsvc/sm_inter.x: Likewise.
	* sunrpc/rpcsvc/spray.x: Likewise.
	* sunrpc/rpcsvc/yppasswd.x: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

	* sysdeps/x86_64/multiarch/strcmp.S: Fix two typos in strncasecmp
	handling.

2010-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S [!SHARED]: Fix SSE4.2 check.

2010-08-19  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: New file.

2010-07-26  Anton Blanchard  <anton@samba.org>

	* malloc/malloc.c (sYSTRIm): Replace divide and multiply with mask.
	* malloc/arena.c (heap_trim): Likewise.

2010-08-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add entry for fanotify_init
	here.  Not...
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: ...here...
	* sysdeps/unix/sysv/linux/i386/syscalls.list: ... orhere.

2010-08-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/elf/Makefile: New file.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/sys/fanotify.h: Remove third argument
	from fanotify_init.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.

2010-08-15  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Use correct register for fourth parameter
	of strncasecmp_l.
	* sysdeps/multiarch/strcmp.S: Likewise.

2010-08-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strncase_l-nonascii.
	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strncase_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Prepare for use as strncasecmp.
	* sysdeps/x86_64/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncase_l.S: New file.
	* sysdeps/x86_64/strncase.S: New file.
	* sysdeps/x86_64/strncase_l-nonascii.c: New file.
	* sysdeps/x86_64/strncase_l.S: New file.
	* string/Makefile (strop-tests): Add strncasecmp.
	* string/test-strncasecmp.c: New file.

	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Add prototype to avoid
	warning.

	* sysdeps/x86_64/strcmp.S: Move definition of NO_NOLOCALE_ALIAS to...
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: ... here.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/prlimit.c: Make it compile.

2010-08-12  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/termios.h: Define EXTPROC.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Likewise.

2010-05-01  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Correct cfi for r24.
	* sysdeps/powerpc/powerpc64/bsd-_setjmp.S: Move contents..
	* sysdeps/powerpc/powerpc64/bsd-setjmp.S: ..and these too..
	* sysdeps/powerpc/powerpc64/setjmp.S: ..to here..
	* sysdeps/powerpc/powerpc64/setjmp-common.S: ..and here, with some
	tidying.  Don't tail-call __sigjmp_save for static lib.
	* sysdeps/powerpc/powerpc64/sysdep.h (SAVE_ARG, REST_ARG): Correct
	save location.
	(CFI_SAVE_ARG, CFI_REST_ARG): New macros.
	(CALL_MCOUNT): Add eh info, and nop after bl.
	(TAIL_CALL_SYSCALL_ERROR): New macro.
	(PSEUDO_RET): Use it.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve):
	Correct save location of integer regs and cr.
	(_dl_profile_resolve): Correct cr save location.  Delete nops
	after bl when SHARED.  Reduce cfi size a little by better
	placement of cfi directives.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S (__copysign): Don't
	make a stack frame.  Instead use parm save area as a temp.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S (__brk): Don't
	make a stack frame.  Use TAIL_CALL_SYSCALL_ERROR.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Don't make a stack frame for parent, use parm save area.
	Increase child stack frame to 112 bytes.  Don't save unused reg,
	and adjust reg usage.  Set up cfi on error recovery and
	epilogue of parent, and use TAIL_CALL_SYSCALL_ERROR, PSEUDO_RET.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext): Add dummy nop after jump to exit.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S (__socket):
	Use correct parm save area and cr save, reduce stack frame.
	Correct cfi for possible PSEUDO_RET frame setup.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork):
	Branch to local label emitted by PSEUDO_RET rather than
	__syscall_error.

2010-08-12  Andreas Schwab  <schwab@redhat.com>

	[BZ #11904]
	* locale/programs/locale.c (print_assignment): New function.
	(show_locale_vars): Use it.

2010-08-11  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/statfs.h (struct statfs): Add f_flags
	field.
	(struct statfs64): Likewise.
	(_STATFS_F_FLAGS): Define.
	* sysdeps/unix/sysv/linux/s390/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Don't define if __ASSUME_STATFS_F_FLAGS is defined.
	(ST_VALID): Define locally.
	(INTERNAL_STATVFS): If f_flags has ST_VALID set don't call
	__statvfs_getflags, use the provided value.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_STATFS_F_FLAGS.

	* sysdeps/unix/sysv/linux/sys/inotify.h (IN_EXCL_UNLINK): Define.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_headers):
	Add sys/fanotify.h.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export fanotify_init and
	fanotify_mask for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entries for
	fanotify_init and fanotify_mark.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sys/fanotify.h: New file.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_routines):
	Add prlimit.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export prlimit and
	prlimit64 for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/bits/resource.h: Declare prlimit and
	prlimit64.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entry for prlimit64
	syscall.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.lis: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.  Also
	add prlimit alias.
	* sysdeps/unix/sysv/linux/prlimit.c: New file.

	[BZ #11903]
	* sysdeps/generic/netinet/ip.h (IPTOS_CLASS): Fix definition.
	Patch by Evgeni Bikov <bikovevg@iitp.ru>.

	* nss/Makefile: Add rules to build and run tst-nss-test1.
	* shlib-versions: Add entry for libnss_test1.
	* nss/nss_test1.c: New file.
	* nss/tst-nss-test1.c: New file.

	* nss/nsswitch.c (__nss_database_custom): Define new variable.
	(__nss_configure_lookup): Set appropriate entry in
	__nss_configure_lookup to true.
	* nss/nsswitch.h: Define enum with indeces of databases in
	databases and __nss_database_custom arrays.  Declare
	__nss_database_custom.
	* grp/initgroups.c (internal_getgrouplist): Use __nss_database_custom
	to avoid using nscd when custom rules are installed.
	* nss/getXXbyYY_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

	* nss/nss_files/files-parse.c: Whitespace fixes.

2010-08-09  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11883]
	* posix/fnmatch.c: Keep track of alloca use and fall back on malloc.
	* posix/fnmatch_loop.c: Likewise.

2010-07-17  Andi Kleen  <ak@linux.intel.com>

	* sysdeps/i386/i386-mcount.S (__fentry__): Define.
	* sysdeps/x86_64/_mcount.S (__fentry__): Define.
	* stdlib/Versions (__fentry__): Add for GLIBC 2.13
	* Versions.def [GLIBC_2.13]: Add.

2010-08-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Also fail if tpwd after pwuid call is NULL.

2010-07-31  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdselect.c (_hurd_select): Round timeout up instead of down
	when converting to ms.

2010-06-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/ttyname.c (ttyname): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.

2010-07-31  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strcasecmp_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Add support to compile for
	strcasecmp.
	* sysdeps/x86_64/strcmp.S: Allow more flexible compiling of strcasecmp.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: New file.
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: New file.

2010-07-30  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp.S: Pretty printing.

	* string/Makefile (strop-tests): Add strcasecmp.
	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strcasecmp_l-nonascii.
	(gen-as-const-headers): Add locale-defines.sym.
	* sysdeps/x86_64/strcmp.S: Add support for strcasecmp implementation.
	* sysdeps/x86_64/strcasecmp.S: New file.
	* sysdeps/x86_64/strcasecmp_l.S: New file.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: New file.
	* sysdeps/x86_64/locale-defines.sym: New file.
	* string/test-strcasecmp.c: New file.

	* string/test-strcasestr.c: Test both ends of the range of characters.
	* sysdeps/x86_64/multiarch/strstr.c: Fix UCHIGH definition.

2010-07-29  Roland McGrath  <roland@redhat.com>

	[BZ #11856]
	* manual/locale.texi (Yes-or-No Questions): Fix example code.

2010-07-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp-ssse3.S: Avoid compiling the file
	for ld.so.

2010-07-27  Andreas Schwab  <schwab@redhat.com>

	* manual/memory.texi (Malloc Tunable Parameters): Document
	M_PERTURB.

2010-07-26  Roland McGrath  <roland@redhat.com>

	[BZ #11840]
	* configure.in (-fgnu89-inline check): Set and substitute
	gnu89_inline, not libc_cv_gnu89_inline.
	* configure: Regenerated.
	* config.make.in (gnu89-inline-CFLAGS): Use @gnu89_inline@.

2010-07-26  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strnlen.c: New file.
	* string/Makefile (strop-tests): Add strnlen.
	* string/tester.c (test_strnlen): Add a few more test cases.
	* string/tst-strlen.c: Better error reporting.

	* sysdeps/x86_64/strnlen.S: New file.

2010-07-24  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Use
	lower-latency instructions.

2010-07-23  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strcasestr.c: New file.
	* string/test-strstr.c: New file.
	* string/Makefile (strop-tests): Add strstr and strcasestr.
	* string/str-two-way.h: Don't undefine MAX.
	* string/strcasestr.c: Don't define alias if NO_ALIAS is defined.

2010-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcasestr-nonascii.
	(CFLAGS-strcasestr-nonascii.c): Define.
	* sysdeps/i386/i686/multiarch/strcasestr-nonascii.c: New file.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c (STRSTR_SSE42):
	Remove unused attribute.

2010-07-20  Roland McGrath  <roland@redhat.com>

	* elf/dl-sysdep.c (_dl_important_hwcaps): Add dsocaps mask to
	dl_hwcap_mask as well as dl_hwcap.  Without this, dsocaps matching in
	ld.so.cache was broken.  With it, there is no way to disable dsocaps
	like LD_HWCAP_MASK can disable hwcaps.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* sysdeps/mach/hurd/sendmsg.c (__libc_sendmsg): Fix memory leaks.

2010-07-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c: Rewrite to avoid indirect function
	call in strcasestr.
	* sysdeps/x86_64/multiarch/strcasestr.c: Declare
	__strcasestr_sse42_nonascii.
	* sysdeps/x86_64/multiarch/Makefile: Add rules to build
	strcasestr-nonascii.c.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: New file.

2010-06-15  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysignf.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysignf.S: New file.

2010-07-09  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Use __fcntl not
	fcntl.

2010-07-06  Andreas Schwab  <schwab@redhat.com>

	[BZ #11577]
	* elf/dl-version.c (match_symbol): Don't pass NULL occation to
	dl_signal_cerror.

2010-07-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Implement
	_PC_PIPE_BUF using F_GETPIPE_SZ.

2010-07-05  Roland McGrath  <roland@redhat.com>

	* manual/arith.texi (Rounding Functions): Fix rint description
	implicit in round description.

2010-07-02  Ulrich Drepper  <drepper@redhat.com>

	* elf/Makefile: Fix linking for a few tests to make recent linker
	happy.

2010-06-30  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(common-objpfx)libc_nonshared.a.

2010-06-21  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc32/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc32/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc64/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc64/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc64/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/powerpc/powerpc64/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/Implies: New file.

2010-06-25  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/memmove_chk.c (__memmove_chk): Renamed to ...
	(MEMMOVE_CHK): ...this.  Default to __memmove_chk.
	* string/memmove.c (memmove): Renamed to ...
	(MEMMOVE): ...this.  Default to memmove.
	* sysdeps/x86_64/memcpy.S: Use ENTRY_CHK and END_CHK.
	* sysdeps/x86_64/sysdep.h (ENTRY_CHK): Define.
	(END_CHK): Define.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memcpy-ssse3 mempcpy-ssse3 memmove-ssse3 memcpy-ssse3-back
	mempcpy-ssse3-back memmove-ssse3-back.
	* sysdeps/x86_64/multiarch/bcopy.S: New file .
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: New file.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memmove_chk.c: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Copy_Backward):
	Define.
	(index_Fast_Copy_Backward): Define.
	(HAS_ARCH_FEATURE): Define.
	(HAS_FAST_REP_STRING): Define.
	(HAS_FAST_COPY_BACKWARD): Define.

2010-06-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Restore proper fallback handling.

2010-06-19  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11701]
	* posix/group_member.c (__group_member): Correct checking loop.

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid): Handle
	OOM in getpwuid_r correctly.  Return error number when the caller
	should return, otherwise -1.
	(getlogin_r): Adjust to return also for result of __getlogin_r_loginuid
	call returning > 0 value.
	* sysdeps/unix/sysv/linux/getlogin.c (getlogin): Likewise.

2010-06-07  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile: Remove explicit dependencies on libc.so and
	libc_nonshared.a from targets in modules-names.

2010-06-02  Kirill A. Shutemov  <kirill@shutemov.name>

	* elf/dl-reloc.c: Flush cache after solving TEXTRELs if arch
	requires it.

2010-06-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcmp.S: New file
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: New file.

2010-06-02  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_nis/nis-initgroups.c (get_uid): Properly resize buffer.

2010-06-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Define F_SETPIPE_SZ
	and F_GETPIPE_SZ.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise

2010-06-14  Roland McGrath  <roland@redhat.com>

	* manual/libc.texinfo (@copying): Change to GFDL v1.3.

2010-06-07  Jakub Jelinek  <jakub@redhat.com>

	* libio/stdio.h (sscanf, vsscanf): Use __REDIRECT_NTH instead of
	__REDIRECT followed by __THROW.
	* wcsmbs/wchar.h (swscanf, vswscanf): Likewise.
	* posix/getopt.h (getopt): Likewise.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* hurd/lookup-at.c (__file_name_lookup_at): Accept
	AT_SYMLINK_FOLLOW in AT_FLAGS.  Fail with EINVAL if both
	AT_SYMLINK_FOLLOW and AT_SYMLINK_NOFOLLOW are present
	in AT_FLAGS.
	* hurd/hurd/fd.h (__file_name_lookup_at): Update comment.
	* sysdeps/mach/hurd/linkat.c (linkat): Pass O_NOLINK in FLAGS.

2010-05-28  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Exchange srdi for srwi.

2010-05-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #11640]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Properly check family and model.

2010-05-26  Takashi Yoshii  <takashi.yoshii.zj@renesas.com>

	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Fix iov[] size.

2010-05-24  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memset.S: POWER7 32-bit memset fix.

2010-05-21  Ulrich Drepper  <drepper@redhat.com>

	* elf/dl-runtime.c (_dl_profile_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-19  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-runtime.c (_dl_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add recvmmsg
	and internal_recvmmsg.
	* sysdeps/unix/sysv/linux/recvmmsg.c: New file.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S: New file.
	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_recvmmsg): Define.
	* sysdeps/unix/sysv/linux/syscalls.list (recvmmsg): Remove.

	* sunrpc/clnt_tcp.c (clnttcp_control): Add missing break.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2010-05-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sys/timex.h: Use __REDIRECT_NTH.

2010-05-17  Luis Machado  <luisgpm@br.ibm.com>

	POWER7 optimizations.
	* sysdeps/powerpc/powerpc64/power7/memset.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memset.S: New file.

2010-05-19  Ulrich Drepper  <drepper@redhat.com>

	* version.h: Update for 2.13 development version.

2010-05-12  Andrew Stubbs  <ams@codesourcery.com>

	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Really disable all
	exceptions.  Return 0.

2010-05-07  Roland McGrath  <roland@redhat.com>

	* elf/ldconfig.c (main): Add a const.

2010-05-06  Ulrich Drepper  <drepper@redhat.com>

	* nss/getent.c (idn_flags): Default to AI_IDN|AI_CANONIDN.
	(args_options): Add no-idn option.
	(ahosts_keys_int): Add idn_flags to ai_flags.
	(parse_option): Handle 'i' option to clear idn_flags.

	* malloc/malloc.c (_int_free): Possible race in the most recently
	added check.  Only act on the data if no current modification
	happened.

See ChangeLog.17 for earlier changes.
