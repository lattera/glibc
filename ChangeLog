2012-12-21  David S. Miller  <davem@davemloft.net>

	* po/hr.po: Update from translation team.

2012-12-21  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Refreshed.

2012-12-19  Steve Ellcey  <sellcey@mips.com>

	* NEWS:  Mention new memcpy for MIPS.

2012-12-18  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* manual/contrib.texi (Contributors): Spelling correction.

2012-12-15  David S. Miller  <davem@davemloft.net>

	* po/ru.po: Update from translation team.

2012-12-13  David S. Miller  <davem@davemloft.net>

	* NEWS: Mention IFUNC testsuite enhancements.

	* po/pl.po: Update from translation team.
	* po/bg.po: Likewise.

	* manual/contrib.texi (Contributors): Update entries for Hongjiu
	Lu and Joseph S. Myers.  Add entry for Marcus Shawcroft.

2012-12-11  David S. Miller  <davem@davemloft.net>

	* po/sv.po: Update from translation team.

	* po/vi.po: Update from translation team.

	* po/cs.po: Update from translation team.

	* po/de.po: Update from translation team.
	* po/eo.po: Likewise.
	* po/nl.po: Likewise.

2012-12-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14246]
	* manual/argp.texi (Argp Helper Functions): Move node to follow
	Argp Parsing State.

	[BZ #14872]
	* manual/conf.texi (Limits on File System Capacity): Mention if
	terminating null is included in the max size.

2012-12-10  Andreas Jaeger  <aj@suse.de>

	* po/cs.po: Update from translation team.

2012-12-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/jmpbuf-unwind.h (_jmpbuf_sp): Declare SP as
	void pointer and cast to uintptr_t.
	* sysdeps/s390/s390-64/memcmp.S: Pick sysdep.h from include
	path.
	* sysdeps/s390/s390-64/memcpy.S: Likewise.
	* sysdeps/s390/s390-64/memset.S: Likewise.

2012-12-08  Benno Schulenberg  <bensberg@justemail.net>

	[BZ #14833]
	* menual/message.texi (Message Translation): Fix typos.
	(Helper programs for gettext): Likewise.

2012-12-07  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14898]
	* include/link.h (FORCED_DYNAMIC_TLS_OFFSET) [NO_TLS_OFFSET == 0]:
	Change to -1.

2012-12-07  David S. Miller  <davem@davemloft.net>

	* po/libc.pot: Update.

2012-12-07  Richard Henderson  <rth@redhat.com>

	[BZ #10114]
	* soft-fp/op-common.h (_FP_MUL): Pull computation of R_e from the
	normal/normal case to before the switch.
	(_FP_DIV): Likewise.

2012-12-06  Carlos O'Donell  <carlos@systemhalted.org>
	    Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/posix_fadvise.c (posix_fadvise): Also
	check for __NR_fadvise64_64.

2012-12-06  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/generic/fpu_control.h (_FPU_GETCW): Define to set cw to
	0, not just to plain "0" as a statement.
	(_FPU_SETCW): Define to (void) (cw), rather than doing nothing
	with cw.

2012-12-06  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Use sourceware.org in Bugzilla URL.

2012-12-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	* stdio-common/tst-put-error.c (do_test): Add newline to the
	padded test to ensure flush.

2012-12-05  Jeff Law  <law@redhat.com>

	* sunrpc/etc.rpc (fedfs_admin): Add entry.

2012-12-05  Joseph Myers  <joseph@codesourcery.com>

	* README: Don't refer to ports add-on as distributed separately.
	Mention AArch64 in list of systems supported in the ports add-on.

	* LICENSES: Add more non-FSF copyright and license notices.

	* soft-fp/op-common.h (_FP_DECL): Declare X##_s with __attribute__
	((unused)).

	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Include <stdlib.h>.

	* stdio-common/tst-put-error.c (do_test): Use 10000000 instead of
	10000 as width of padded output.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/sysdep.h (_SYS_AUXV_H): Define to 1 not empty.

	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Mark
	variable LX with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (__ieee754_rem_pio2l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c (___isnanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Mark variable LY
	with __attribute__ ((unused)).

2012-12-04  David S. Miller  <davem@abraco.davemloft.net>

	* sysdeps/generic/memcopy.h: Add multiple inclusion protection.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-opt/Makefile [$(subdir) = math]
	(CFLAGS-nldbl-acos.c): New variable.
	[$(subdir) = math] (CFLAGS-nldbl-acosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-carg.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cbrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ceil.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cimag.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-conj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-copysign.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cpow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cproj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-creal.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-drem.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erfc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-expm1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fdim.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-finite.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-floor.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmax.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmod.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-frexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-gamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-hypot.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ilogb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isinf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isnan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-jn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ldexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma_r.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log1p.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-logb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-modf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nearbyint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nextafter.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttoward.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttowardf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remainder.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remquo.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-rint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-round.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbln.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-significand.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sincos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-trunc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-yn.c): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	[BZ #14914]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Clear
	whole low double instead of just low 47 bits when splitting values
	into two parts.

2012-12-03  Allan McRae  <allan@archlinux.org>

	* manual/stdio.texi (Predefined Printf Handlers): Remove
	@hsep and @vsep usage.

2012-12-03  Mike Frysinger  <vapier@gentoo.org>

	* bits/byteswap.h [__GNUC__]: Change __GNUC_PREREQ from 4.2 to 4.3.
	* sysdeps/x86/bits/byteswap.h [__GNUC__]: Likewise.

2012-12-03  Jeff Law  <law@redhat.com>

	* time/sys/time.h (settimeofday): Do not mark TV argument
	as __nonnull.

2012-12-01  Mike Frysinger  <vapier@gentoo.org>

	* libio/fileops.c (_IO_new_file_close_it): Do not always flush
	when currently writing and seek to current position when not.
	* libio/Makefile (tests): Remove bug-fclose1.
	* libio/bug-fclose1.c: Delete.

2012-12-01  Joseph Myers  <joseph@codesourcery.com>

	* manual/arith.texi (feenableexcept): Fix typo.
	(fedisableexcept): Likewise.

2012-11-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/powerpc/powerpc64/entry.h (TEXT_START): Define using a
	second, differently-typed declaration, rather than a cast.

2012-11-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sunrpc/rpc/svc.h (__svc_accept_failed): Move declaration...
	* include/rpc/svc.h: ... here.

2012-11-30  Aurelien Jarno  <aurel32@debian.org>

	[BZ #13013]
	* resolv/res_query.c(__libc_res_nquery): Assign hp and hp2
	depending n and resplen2 to catch cases where answer
	equals answerp2.

2012-11-29  Carlos O'Donell  <carlos@systemhalted.org>

	* elf/get-dynamic-info.h (elf_get_dynamic_info): Warn
	for unsupported DF_1_* bits when DL_DEBUG_FILES is set.

2012-11-29  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c (HAS_CPUCLOCK): Delete.

2012-11-29  Roland McGrath  <roland@hack.frob.com>

	* inet/tst-inet6_rth.c (do_test): Use a union rather than type punning.

2012-11-28  Jeff Law  <law@redhat.com>

	[BZ #13761]
	* nscd/grpcache.c (cache_addgr): Rename alloca_used to
	dataset_temporary.  Track alloca usage into alloca_used.
	If dataset is large allocate and release it via malloc/free.

2012-06-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #14197]
	* debug/test-strcpy_chk.c: Mention __chk_fail ABI test.

2012-11-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14803]
	* sysdeps/ieee754/ldbl-96/e_asinl.c (pio2_hi): Use hex float value
	of pi/2 rounded to nearest to 64 bits.
	(pio2_lo): Use hex float value of pi/2 - pio2_hi rounded to
	nearest to 64 bits.
	(pio4_hi): Use hex float value of pi/4 rounded to nearest to 64
	bits.

2012-11-28  Jeff Law <law@redhat.com>
	    Martin Osvald <mosvald@redhat.com>

	[BZ #14889]
	* sunrpc/rpc/svc.h (__svc_accept_failed): New prototype.
	* sunrpc/svc.c: Include time.h.
	(__svc_accept_failed): New function.
	* sunrpc/svc_tcp.c (rendezvous_request): If the accept fails for
	any reason other than EINTR, call __svc_accept_failed.
	* sunrpc/svc_udp.c (svcudp_recv): Similarly.
	* sunrpc/svc_unix.c (rendezvous_request): Similarly.

2012-11-28  Andreas Schwab  <schwab@suse.de>

	* scripts/abilist.awk: Also handle indirect functions in .opd
	section.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13881]
	* sysdeps/x86/fpu/powl_helper.c: New file.
	* sysdeps/x86/fpu/Makefile: Likewise.
	* sysdeps/i386/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* sysdeps/x86_64/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* math/libm-test.inc (pow_test): Add more tests and enable some
	previously disabled tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-11-28  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* nss/makedb.c (is_prime): Assert that input is odd and greater
	than 4.  Note that fact in a comment too.
	(next_prime): Add 4 to input.

2012-11-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/Makefile (tests): Add test case tst-fwrite-error.
	* libio/iofwrite.c (_IO_fwrite): Return 0 on EOF.
	* libio/iofwrite_u.c (fwrite_unlocked): Likewise.
	* libio/tst-fwrite-error.c: New test case.

2012-11-26  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Cast to uintptr_t
	before casting to void *.
	* include/libc-internal.h (__pointer_type): New macro.
	(__integer_if_pointer_type_sub): Likewise.
	(__integer_if_pointer_type): Likewise.
	(cast_to_integer): Likewise.
	* sysdeps/x86_64/bits/atomic.h: Include <libc-internal.h>.
	(__arch_c_compare_and_exchange_val_64_acq): Use cast_to_integer
	before casting to atomic64_t.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-11-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/unwind-dw2-fde.c (get_pc_begin): New function.
	(fde_unencoded_compare): Use get_pc_begin instead of type-punning.
	(add_fdes): Likewise.
	(linear_search_fdes): Likewise.
	(binary_search_unencoded_fdes): Likewise.

2012-11-26  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/sotruss.ksh: Correctly locate argument of -F and -T options.

2012-11-24  Adam Conrad  <adconrad@0c3.net>

	* configure.in: Autodetect C++ header directories.
	* configure: Regenerated.

2012-11-23  Mike Frysinger  <vapier@gentoo.org>

	* elf/Makefile ($(objpfx)ld.so): Change readelf to $(READELF).

2012-11-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-11-22  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fma_test_towardzero) [TEST_LDOUBLE &&
	LDBL_MANT_DIG == 106]: Disable some tests.
	(fma_test_downward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.
	(fma_test_upward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.

	[BZ #14871]
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Return the
	input for small inputs.  Return +/- pi/2 for large inputs.
	* math/libm-test.inc (atan_test): Add more tests.

	* sysdeps/generic/unwind-dw2-fde-glibc.c
	(_Unwind_IteratePhdrCallback): Declare P_DYNAMIC with
	__attribute__ ((unused)).

	[BZ #14645]
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c (__fmal): Compute result as
	x * y if x and y are nonzero and z is zero.

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-117 to +/-
	0x1p-117.

	[BZ #14869]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl): Scale
	up arguments below 2**-450, not just those below 2**-500.
	* math/libm-test.inc (hypot_test): Add another test.

	[BZ #14868]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl):
	Return a+b for ratio over 2**120, not 2**60.
	* math/libm-test.inc (hypot_test): Add another test.

	* math/libm-test.inc (clog_test): Use
	UNDERFLOW_EXCEPTION_LDOUBLE_IBM on two tests.
	(clog10_test): Likewise.

	[BZ #6778]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (big): Change to 1e290L.

2012-11-22  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-11-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/x86_64/multiarch/test-multiarch.c (get_cpuinfo): Terminate
	printf output with newline.

2012-11-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14865]
	* aclocal.m4 (LIBC_LINKER_FEATURE): New macro.
	* configure.in: Use LIBC_LINKER_FEATURE to check -z nodelete,
	-z nodlopen, -z initfirst and -z execstack support.
	* configure: Regenerated.

	* elf/elf.h (DF_1_NODIRECT): New macro.
	(DF_1_IGNMULDEF): Likewise.
	(DF_1_NOKSYMS): Likewise.
	(DF_1_NOHDR): Likewise.
	(DF_1_EDITED): Likewise.
	(DF_1_NORELOC): Likewise.
	(DF_1_SYMINTPOSE): Likewise.
	(DF_1_GLOBAUDIT): Likewise.
	(DF_1_SINGLETON): Likewise.
	* elf/get-dynamic-info.h (elf_get_dynamic_info): Assert
	DT_1_SUPPORTED_MASK bits.
	* include/elf.h (DT_1_SUPPORTED_MASK): New macro.

2012-11-20  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/unix/make-syscalls.sh: Document prefixes.

2012-11-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/dl-machine.h (ELF_MACHINE_RUNTIME_FIXUP_PARAMS): New
	macro.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr, recvmmsg)
	(sendmmsg): Move declarations...
	* socket/sys/socket.h: ... here.
	* sysdeps/unix/sysv/linux/recvmmsg.c [!defined __NR_recvmmsg &&
	!defined __NR_socketcall] (recvmmsg): Move ENOSYS stub into and
	include it from...
	* socket/recvmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S [__ASSUME_SENDMMSG]
	(sendmmsg): Rename to __sendmmsg, create weak alias and make
	definition of __sendmmsg hidden.
	* sysdeps/unix/sysv/linux/sendmmsg.c (sendmmsg): Likewise.
	[!defined __NR_sendmmsg && !defined __NR_socketcall] (sendmmsg):
	Move ENOSYS stub into and include it from...
	* socket/sendmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket]
	(sysdep_routines): Move recvmmsg and sendmmsg...
	* socket/Makefile (routines): ... here.
	* socket/Versions (GLIBC_2.17): Add recvmmsg and sendmmsg.
	(GLIBC_PRIVATE): Add __sendmmsg.
	* include/sys/socket.h (__sendmmsg): Add declarations.
	* resolv/res_send.c (send_dg): Invoke __sendmmsg instead of
	sendmmsg.

2012-11-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Mark
	variable I1 with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/_itowa.c (_itowa) [BITS_PER_MP_LIMB == 64]: Declare
	DUMMY variables with __attribute__ ((unused)).

	* bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): Use __uint64_t instead of unsigned long long int.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptsname.c (ptsname): Change the type of PEERNAME to
	string_t.  Do not manually set errno.
	(__ptsname_r): Change the type of PEERNAME to string_t, and check its
	length with __strnlen.  Make sure to both set errno and return it on
	failure.

2012-11-19  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/ldbl-128/s_atanl.c (__atanl): Handle tiny and
	very large arguments properly.
	* math/libm-test.inc (atan_test): New tests.
	(atan2_test): New tests.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14856]
	* posix/bits/posix1_lim.h [!__USE_XOPEN2K] (_POSIX_TZNAME_MAX):
	Define to 3.

	* conform/data/errno.h-data [POSIX] (EADDRINUSE): Do not expect.
	[POSIX] (EADDRNOTAVAIL): Likewise.
	[POSIX] (EAFNOSUPPORT): Likewise.
	[POSIX] (EALREADY): Likewise.
	[POSIX] (ECONNABORTED): Likewise.
	[POSIX] (ECONNREFUSED): Likewise.
	[POSIX] (ECONNRESET): Likewise.
	[POSIX] (EDESTADDRREQ): Likewise.
	[POSIX] (EDQUOT): Likewise.
	[POSIX] (EHOSTUNREACH): Likewise.
	[POSIX] (EIDRM): Likewise.
	[POSIX] (EISCONN): Likewise.
	[POSIX] (ELOOP): Likewise.
	[POSIX] (EMULTIHOP): Likewise.
	[POSIX] (ENETDOWN): Likewise.
	[POSIX] (ENETUNREACH): Likewise.
	[POSIX] (ENOBUFS): Likewise.
	[POSIX] (ENODATA): Likewise.
	[POSIX] (ENOLINK): Likewise.
	[POSIX] (ENOMSG): Likewise.
	[POSIX] (ENOPROTOOPT): Likewise.
	[POSIX] (ENOSR): Likewise.
	[POSIX] (ENOSTR): Likewise.
	[POSIX] (ENOTCONN): Likewise.
	[POSIX] (ENOTSOCK): Likewise.
	[POSIX] (EOPNOTSUPP): Likewise.
	[POSIX] (EOVERFLOW): Likewise.
	[POSIX] (EPROTO): Likewise.
	[POSIX] (EPROTONOSUPPORT): Likewise.
	[POSIX] (EPROTOTYPE): Likewise.
	[POSIX] (ESTALE): Likewise.
	[POSIX] (ETIME): Likewise.
	[POSIX] (ETXTBSY): Likewise.
	[POSIX] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (E*): Do not allow.
	* conform/data/fcntl.h-data [POSIX] (SEEK_SET): Allow.
	[POSIX] (SEEK_CUR): Likewise.
	[POSIX] (SEEK_END): Likewise.
	[POSIX || UNIX98] (mode_t): Do not require.
	[POSIX] (off_t): Likewise.
	[POSIX] (pid_t): Likewise.
	[POSIX] (sys/stat.h): Do not allow header.
	[POSIX] (unistd.h): Likewise.
	[!ISO && !ISO99 && !ISO11] (timespec): Do not allow.
	[!ISO && !ISO99 && !ISO11] (tv_nsec): Likewise.
	[!ISO && !ISO99 && !ISO11] (tv_sec): Likewise.
	* conform/data/locale.h-data [POSIX] (LC_MESSAGES): Do not
	require.
	* conform/data/mqueue.h-data [!ISO && !ISO99 && !ISO11] (struct
	sigevent): Specify elements.
	[XOPEN2K8 || POSIX2008] (struct sigevent): Remove duplicate type
	entry.
	[!ISO && !ISO99 && !ISO11] (mq_*): Allow.
	[!ISO && !ISO99 && !ISO11] (MQ_*): Likewise.

	* conform/data/cpio.h-data [POSIX]: Disable whole file.
	* conform/data/glob.h-data [POSIX] (GLOB_NOSYS): Do not expect.
	* conform/data/limits.h-data [!ISO && !ISO99 && !ISO11]
	(AIO_LIST_MAX): Change to AIO_LISTIO_MAX.
	[!ISO && !ISO99 && !ISO11] (ATEXT_MAX): Remove.
	[!ISO && !ISO99 && !ISO11 && !POSIX && !XPG3] (ATEXIT_MAX): Allow.
	[POSIX || POSIX2008 || XPG3] (IOV_MAX): Do not allow.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (MQ_PRIO_MAX): Allow.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Remove duplicate entry.
	[POSIX || XPG3 || XPG4 || UNIX98] (SS_REPL_MAX): Do not allow.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLOOP_MAX): Likewise.
	[POSIX || XPG3 || XPG4] (FILESIZEBITS): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_ALLOC_SIZE_MIN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_INCR_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_MAX_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_XFER_ALIGN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SS_REPL_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLOOP_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_BASE_MAX): Use macro-constant.
	Specify lower bound on value.
	[!ISO && !ISO99 && !ISO11] (BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (COLL_WEIGHTS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Likewise
	[POSIX || XPG3 || XPG4] (CHARCLASS_NAME_MAX): Do not allow.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CLOCKRES_MIN): Specify exact
	value.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_LISTIO_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_ARG_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CHILD_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_DELAYTIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LINK_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LOGIN_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_CANON): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_INPUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_PRIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NGROUPS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PATH_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PIPE_BUF): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Remove duplicate
	entry.
	[!ISO && !ISO99 && !ISO11] (_POSIX_RTSIG_MAX): Do not specify as
	optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_NSEMS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_VALUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SIGQUEUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SSIZE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_STREAM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_DESTRUCTOR_ITERATIONS):
	Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_KEYS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_THREADS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TTY_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TZNAME_MAX): Likewise.  Give
	value as 3 for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_BASE_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_CHARCLASS_NAME_MAX):
	Likewise.  Do not allow for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_COLL_WEIGHTS_MAX): Do not
	specify as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_LINE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Likewise.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Do not allow.
	[POSIX || XPG3] (NL_ARGMAX): Do not allow.
	[XPG3] (NL_LANGMAX): Likewise.
	[POSIX || XPG3] (NL_MSGMAX): Likewise.
	[POSIX || XPG3] (NL_NMAX): Likewise.
	[POSIX || XPG3] (NL_SETMAX): Likewise.
	[POSIX || XPG3] (NL_TEXTMAX): Likewise.
	[XPG3] (NZERO): Likewise.
	[XPG4 || UNIX98] (TMP_MAX): Only enable for these conditions.
	[POSIX || XPG3 || XPG4 || UNIX98] (*_MIN): Do not allow.
	[!ISO && !ISO99 && !ISO11] (*_t): Allow.
	* conform/data/regex.h-data [!ISO && !ISO99 && !ISO11]
	(REG_ERANGE): Expect.
	* conform/data/stdio.h-data [POSIX] (L_cuserid): Use
	optional-constant.
	[POSIX || XOPEN2K || XOPEN2K8 || POSIX2008] (getchar_unlocked):
	Use (void) in prototype.
	[POSIX] (*_t): Allow.
	* conform/data/sys/times.h-data [POSIX]: Enable whole file.
	* conform/data/wordexp.h-data [!ISO && !ISO99 && !ISO11]
	(WRDE_BADVAL): Expect.

	* conform/data/fcntl.h-data [XPG3 || XPG4] (O_DSYNC): Do not
	expect.
	[XPG3 || XPG4] (O_RSYNC): Likewise.
	* conform/data/signal.h-data [XPG3 || XPG4] (pthread_kill):
	Likewise.
	[XPG3 || XPG4] (pthread_sigmask): Likewise.
	[XPG3 || XPG4] (sigqueue): Likewise.
	[XPG3 || XPG4] (sigtimedwait): Likewise.
	[XPG3 || XPG4] (sigwaitinfo): Likewise.
	* conform/data/stdio.h-data [XPG3 || XPG4] (snprintf): Likewise.
	[XPG3 || XPG4] (vsnprintf): Likewise.
	* conform/data/sys/stat.h-data [XPG3 || XPG4] (blkcnt_t):
	Likewise.
	[XPG3 || XPG4] (blksize_t): Likewise.
	* conform/data/time.h-data [XPG3 || XPG4] (struct timespec):
	Likewise.
	[XPG3 || XPG4] (CLOCK_PROCESS_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (CLOCK_THREAD_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (struct itimerspec): Likewise.
	[XPG3 || XPG4] (CLOCK_REALTIME): Likewise.
	[XPG3 || XPG4] (TIMER_ABSTIME): Likewise.
	[XPG3 || XPG4] (CLOCK_MONOTONIC): Likewise.
	[XPG3 || XPG4] (clockid_t): Likewise.
	[XPG3 || XPG4] (timer_t): Likewise.
	[XPG3 || XPG4] (clock_getres): Likewise.
	[XPG3 || XPG4] (clock_gettime): Likewise.
	[XPG3 || XPG4] (clock_settime): Likewise.
	[XPG3 || XPG4] (nanosleep): Likewise.
	[XPG3 || XPG4] (timer_create): Likewise.
	[XPG3 || XPG4] (timer_delete): Likewise.
	[XPG3 || XPG4] (timer_gettime): Likewise.
	[XPG3 || XPG4] (timer_getoverrun): Likewise.
	[XPG3 || XPG4] (timer_settime): Likewise.
	* conform/data/unistd.h-data [XPG3 || XPG4] (fdatasync): Likewise.
	[XPG3 || XPG4] (getlogin_r): Likewise.
	[XPG3 || XPG4] (pread): Likewise.
	[XPG3 || XPG4] (pthread_atfork): Likewise.
	[XPG3 || XPG4] (pwrite): Likewise.

	[BZ #14835]
	* signal/signal.h [__USE_XOPEN_EXTENDED]: Include
	<bits/siginfo.h>.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* malloc/mtrace.c (muntrace): Reset MALLSTREAM and the hooks before
	finalizing MALLSTREAM.

	* sysdeps/mach/hurd/syncfs.c: New file.

2012-11-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14719]
	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Set h_errno to
	NETDB_INTERNAL when NSS_STATUS_UNAVAIL.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Set
	h_errno to NETDB_INTERNAL when errno is EMFILE or ENFILE.
	(_nss_dns_gethostbyname4_r): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Set result to
	EAI_SYSTEM if NSS_STATUS_UNAVAIL.

2012-11-19  Peng Haitao  <penght@cn.fujitsu.com>

	[BZ #13763]
	* sunrpc/bindrsvprt.c: Add lock to protect static variable.

2012-11-19  Steve McIntyre  <steve.mcintyre@linaro.org>

	* sysdeps/generic/ldconfig.h (FLAG_AARCH64_LIB64): New macro.
	* elf/cache.c (print_entry): Print ",AArch64" for
	FLAG_AARCH64_LIB64

	* sysdeps/generic/ldconfig.h (FLAG_ARM_LIBHF): New macro.
	* elf/cache.c (print_entry): Print ",hard-float" for
	FLAG_ARM_LIBHF.

2012-11-18  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/flt-32/e_j0f.c (__ieee754_y0f): Adjust tinyness
	cutoff to 2**-13.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Adjust tinyness
	cutoff to 2**-25.
	* sysdeps/ieee754/ldbl-128/e_j0l.c (U0): New constant.
	( __ieee754_y0l): Avoid arithmetic underflow when 'x' is very
	small.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l): Likewise.
	* math/libm-test.inc (y0_test): New tests.
	(y1_test): New tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-18  Andreas Schwab  <schwab@linux-m68k.org>

	* configure.in (libc_cv_ld_gnu_indirect_function): Use .quad on
	64-bit targets.
	* configure: Regenerated.

2012-11-17  David S. Miller  <davem@davemloft.net>

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-128 to +/-
	0x1p-128.

2012-11-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/fxstatat.c: Include <string.h>.

	* elf/dl-runtime.c [!ELF_MACHINE_NO_PLT]: Make code unconditional.

	* posix/getconf-speclist.c: New file.
	* posix/posix-envs.def: Likewise.
	* posix/confstr.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENV_STRING): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(confstr): Include posix-envs.def instead of handling
	_CS_V7_WIDTH_RESTRICTED_ENVS, _CS_V6_WIDTH_RESTRICTED_ENVS and
	_CS_V5_WIDTH_RESTRICTED_ENVS directly here.
	* sysdeps/posix/sysconf.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(__sysconf): Include posix-envs.def instead of handling associated
	cases directly here.
	* posix/Makefile ($(objpfx)getconf.speclist): Generate by
	preprocessing getconf-speclist.c rather than running getconf or
	generating empty file.

2012-11-16  Pino Toscano  <toscano.pino@tiscali.it>

	* scripts/check-local-headers.sh: Ignore 'mach' headers.

2012-11-16  Andrej Lajovic  <natrij@gmail.com>

	[BZ #14672]
	* iconv/iconv_prog.c (main): Fix -c handling of '/'.

2012-11-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): If xm1 is
	smaller than LDBL_EPSILON/2.0L, just return xm1.

2012-11-16  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-array1.c (init): Set constructor priority to 1000.
	(fini): Set destructor priority to 1000.
	* elf/tst-array2dep.c: Likewise.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/fileops.c (_IO_new_file_write): Correctly return error.
	(_IO_new_file_xsputn): Also return EOF if none of the input
	data was written when overflow failed.
	* libio/iopadn.c (_IO_padn): Likewise.
	* libio/iowpadn.c (_IO_wpadn): Likewise.
	* stdio-common/tst-put-error.c: Add copyright notice.
	(do_test): Add case for printing padded string.
	* stdio-common/vfprintf [!COMPILE_WPRINTF] (PAD): Flag error if
	_IO_padn returned error.
	[COMPILE_WPRINTF] (PAD): Flag error if _IO_wpadn returned error.
	* libio/libioP.h (_IO_xsputn_t): Note in comment that xsputn can
	return EOF.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/libioP.h: Add comment note that the references to C++
	bits are now obsolete.

2012-11-15  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* math/libm-test.inc (check_complex): Use asprintf.

2012-11-14  Joseph Myers  <joseph@codesourcery.com>

	* debug/pcprofiledump.c (print_version): Update copyright year.
	* malloc/memusagestat.c (print_version): Likewise.

2012-11-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14831]
	* elf/Makefile (tests): Add tst-audit8.
	($(objpfx)tst-audit8): Also depend on $(common-objpfx)math/libm.so.
	($(objpfx)tst-audit8.out): New target.
	(tst-audit8-ENV): New variable.
	* elf/dl-runtime.c (_dl_profile_fixup): Call _dl_fixup to skip
	audit if l_reloc_result is NULL.
	(ELF_MACHINE_RUNTIME_FIXUP_PARAMS): Issue an error if it isn't
	defined and ELF_MACHINE_RUNTIME_FIXUP_ARGS is defined.
	* elf/tst-audit8.c: New file.

2012-11-14  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* io/Makefile (CFLAGS-open.c, CFLAGS-open64.c): Define.
	* misc/Makefile (CFLAGS-select.c): Define.
	* posix/Makefile (CFLAGS-pause.c): Define.

2012-11-13  David S. Miller  <davem@davemloft.net>

	* crypt/Makefile: Move test targets after toplevel Rules
	inclusion.  Grab any necessary sysdep routines when linking.
	* crypt/md5.c (md5_process_block): Remove define, we will always
	name it __md5_process_block.
	(md5_finish_ctx): Update md5_process_block call.
	(md5_stream): Likewise.
	(md5_process_bytes): Likewise.
	(md5_process_block): Rename to __md5_process_block and move to ...
	* crypt/md5-block.c: ... here.
	* crypt/sha256.c (sha256_process_block): Move to ...
	* crypt/sha256-block.c: ... here.
	* crypt/sha512.c (sha512_process_block): Move to ...
	* crypt/sha512-block.c: ... here.
	* locale/Makefile (CFLAGS-md5.c): Define to add crypt/ to include
	path.
	* sysdeps/sparc/sparc-ifunc.c (sparc_libc_ifunc): Define.
	* sysdeps/sparc/sparc64/multiarch/Makefile
	(libcrypt-sysdep_routines): Add crypto assembler sysdeps when in
	crypt subdir.
	(localedef-aux): Add md5 crypto assembler when in locale subdir.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Mirror sparc64
	multiarch changes.
	* sysdeps/sparc/sparc64/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-crop.S: New file.

2012-11-13  Joseph Myers  <joseph@codesourcery.com>

	* timezone/tzselect.ksh: Update from tzcode git revision
	a435f9f0ecafa56d9e0263835836bd0c64cd7307.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.
	* timezone/Makefile ($(objpfx)version.h): Only include $(version)
	in TZVERSION setting, not $(PKGVERSION).
	($(objpfx)tzselect): Likewise.  Also substitute PKGVERSION and
	REPORT_BUGS_TO settings.

	[BZ #14838]
	* resolv/netdb.h [__USE_XOPEN_EXTENDED] (IPPORT_RESERVED): Define
	macro.

2012-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Move underflow
	detection to immediately after _FP_ROUND().
	* soft-fp/soft-fp.h (_FP_ROUND): Don't round if working
	bits are 0.

2012-11-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Include
	inttypes.h
	(__get_clockfreq_via_proc_openprom): Use __open, __read, and
	__close rather than their public counterparts.

2012-11-10  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/semaphore.h-data [XPG3 || XPG4]: Disable whole
	file.
	[UNIX98] (sem_timedwait): Do not expect.
	* conform/data/sys/socket.h-data [XPG3]: Disable whole file.
	[XPG4 || UNIX98] (sockatmark): Do not expect.
	* conform/data/time.h-data [XPG3 || XPG4 || UNIX98]
	(clock_getcpuclockid): Do not expect.
	[XPG3 || XPG4 || UNIX98] (clock_nanosleep): Do not expect.
	* conform/data/unistd.h-data [XPG3 || XPG4 || UNIX98] (setegid):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (seteuid): Likewise.
	* conform/data/wchar.h-data [UNIX98] (vfwscanf): Do not expect.
	[UNIX98] (vwscanf): Likewise.
	[UNIX98] (vswscanf): Likewise.

2012-11-09  Joseph Myers  <joseph@codesourcery.com>

	* timezone/version.h: Remove file.
	* timezone/README: Do not refer to version.h.
	* timezone/Makefile ($(objpfx)zic.o): New dependency on
	$(objpfx)version.h.
	($(objpfx)zdump.o): Likewise.
	($(objpfx)version.h): New target.

	* timezone/tzselect.ksh: Change to verbatim copy from tzcode
	2012i.
	* timezone/README: Don't mention modification to tzselect.ksh.
	* timezone/Makefile ($(objpfx)tzselect): Update substitutions to
	work on unmodified tzselect.ksh.  Substitute version numbers in
	tzselect.ksh.

	* Makefile (format-me): Remove.
	(INSTALL): Adjust indentation.  Use commands directly instead of
	using $(format-me).

	* aclocal.m4 (ACX_PKGVERSION): New macro.
	(ACX_BUGURL): Likewise.
	* configure.in: Use ACX_PKGVERSION and ACX_BUGURL.
	(PKGVERSION): New AC_DEFINE_UNQUOTED.
	(REPORT_BUGS_TO): Likewise.
	* configure: Regenerated.
	* config.h.in (PKGVERSION): New macro.
	(REPORT_BUGS_TO): Likewise.
	* config.make.in (PKGVERSION): New variable.
	(PKGVERSION_TEXI): Likewise.
	(REPORT_BUGS_TO): Likewise.
	(REPORT_BUGS_TEXI): Likewise.
	* Makefile (format-me): Use -I$(common-objpfx)manual.
	(INSTALL): Depend on $(common-objpfx)manual/pkgvers.texi.
	($(common-objpfx)manual/%): New target.
	(manual/%): Remove target.
	* catgets/gencat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* csu/version.c (banner): Use PKGVERSION and REPORT_BUGS_TO.
	* debug/Makefile ($(objpfx)catchsegv): Also substitute PKGVERSION
	and REPORT_BUGS_TO.
	($(objpfx)xtrace): Likewise.
	* debug/catchsegv.sh: Use PKGVERSION and REPORT_BUGS_TO.
	* debug/pcprofiledump.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* debug/xtrace.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* elf/Makefile ($(objpfx)sotruss): Also substitute PKGVERSION and
	REPORT_BUGS_TO.
	(common-ldd-rewrite): Likewise.
	* elf/dl-close.c (_dl_close_worker): Use REPORT_BUGS_TO.
	* elf/ldconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* elf/ldd.bash.in: Use PKGVERSION and REPORT_BUGS_TO.
	* elf/pldd.c (argp_program_bug_address): Remove variable.
	(more_help): New function.
	(argp): Use more_help.
	(print_version): Use PKGVERSION.
	* elf/sln.c (main): Use PKGVERSION.
	(usage): Use REPORT_BUGS_TO.
	* elf/sotruss.ksh (do_help): Use REPORT_BUGS_TO.
	(top level): Use PKGVERSION.
	* elf/sprof.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconv_prog.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconvconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/locale.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/localedef.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* login/programs/pt_chown.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/Makefile ($(objpfx)mtrace): Also substitute PKGVERSION
	and BUGURL.
	($(objpfx)memusage): Likewise.
	* malloc/memusage.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* malloc/memusagestat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/mtrace.pl ($PACKAGE): Remove variable.
	($PKGVERSION): New variable.
	($REPORT_BUGS_TO): Likewise.
	(usage): Use $REPORT_BUGS_TO.
	(top level): Use $PKGVERSION.
	* manual/Makefile (libc-texi-generated): Add pkgvers.texi.
	($(objpfx)pkgvers.texi): New rule.
	($(objpfx)stamp-pkgvers): Likewise.
	* manual/install.texi: Include pkgvers.texi.
	(--with-pkgversion): Document new configure option.
	(--with-bugurl): Likewise.
	(Reporting Bugs): Describe Bugzilla as upstream tracker rather
	than necessarily for this particular distribution.  Use
	REPORT_BUGS_TO for where to report bugs.
	* INSTALL: Regenerated.
	* manual/libc.texinfo: Include pkgvers.texi.
	[!PKGVERSION_DEFAULT]: Include PKGVERSION in version information.
	* nscd/nscd.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/getent.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/makedb.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* posix/getconf.c (main): Use PKGVERSION and REPORT_BUGS_TO.
	* sunrpc/proto.h [IS_IN_build] (_libc_intl_domainname): Remove
	macro.
	* sunrpc/rpc_main.c (options_usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sunrpc/rpcinfo.c (usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Use REPORT_BUGS_TO
	and PKGVERSION.

	* timezone/checktab.awk: Update from tzcode 2012i.
	* timezone/ialloc.c: Likewise.
	* timezone/private.h: Likewise.
	* timezone/scheck.c: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Merge in changes from tzcode 2012i.
	(TZVERSION): Hardcode tzcode version number.
	* timezone/zdump.c: Update from tzcode 2012i.
	* timezone/zic.c: Likewise.
	* timezone/version.h: New file.
	* timezone/README: Describe version.h.  Update upstream location.

	[BZ #14824]
	* stdlib/stdlib.h [__USE_XOPEN_EXTENDED && __USE_XOPEN2K]
	(mktemp): Enable declaration.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (ecvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (fcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (gcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qecvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qfcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qgcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (ecvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (fcvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (gcvt_r):
	Likewise.

	[BZ #14821]
	* sunrpc/clnt_tcp.c (clnttcp_control): Access values at fixed
	offset in buffer as u_int32_t not u_long.  Consistently use memcpy
	for copies of such integer values.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2012-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-11-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

        * sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Add "te".
	* sysdeps/s390/dl-procinfo.h (HWCAP_S390_TE): Add enum value.
	* sysdeps/unix/sysv/linux/s390/hwcap.h (HWCAP_S390_TE): Add macro
	definition.

2012-11-08  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h: Update comment before AArch64 relocations.

2012-11-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/__start_context.S: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__start_context): Declare.
	(__makecontext_ret): Delete.
	(__makecontext): Hook up __start_context instead of
	__makecontext_ret.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile
	(sysdep_routines): Add __start_context when in stdlib.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/Makefile ($(objpfx)tst-xmmymm.out): Pass $(NM),
	$(OBJDUMP) and $(READELF) to tst-xmmymm.sh.
	* sysdeps/x86/tst-xmmymm.sh (NM): New variable.  Use it instead of
	hardcoded "nm".
	(OBJDUMP): New variable.  Use it instead of hardcoded "objdump".
	(READELF): New variable.  Use it instead of hardcoded "readelf".

2012-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile ($(objpfx)tst-xmmymm.out): Moved to ...
	* sysdeps/x86/Makefile: Here.
	* sysdeps/x86_64/tst-xmmymm.sh: Renamed to ...
	* sysdeps/x86/tst-xmmymm.sh: This.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pthread.h-data [XPG3 || XPG4]: Disable all
	expectations.
	[UNIX98] (pthread_barrier_t): Do not expect.
	[UNIX98] (pthread_barrierattr_t): Likewise.
	[UNIX98] (pthread_spinlock_t): Likewise.
	[UNIX98] (pthread_barrier_destroy): Likewise.
	[UNIX98] (pthread_barrier_init): Likewise.
	[UNIX98] (pthread_barrier_wait): Likewise.
	[UNIX98] (pthread_barrierattr_destroy): Likewise.
	[UNIX98] (pthread_barrierattr_getpshared): Likewise.
	[UNIX98] (pthread_barrierattr_init): Likewise.
	[UNIX98] (pthread_barrierattr_setpshared): Likewise.
	[UNIX98] (pthread_getcpuclockid): Likewise.
	[UNIX98] (pthread_mutex_timedlock): Likewise.
	[UNIX98] (pthread_rwlock_timedrdlock): Likewise.
	[UNIX98] (pthread_rwlock_timedwrlock): Likewise.
	[UNIX98] (pthread_sigmask): Likewise.
	[UNIX98] (pthread_spin_destroy): Likewise.
	[UNIX98] (pthread_spin_init): Likewise.
	[UNIX98] (pthread_spin_lock): Likewise.
	[UNIX98] (pthread_spin_trylock): Likewise.
	[UNIX98] (pthread_spin_unlock): Likewise.
	* conform/data/sys/types.h-data [XPG3 || XPG4] (pthread_attr_t):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (pthread_barrier_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_barrierattr_t): Likewise.
	[XPG3 || XPG4] (pthread_cond_t): Likewise.
	[XPG3 || XPG4] (pthread_condattr_t): Likewise.
	[XPG3 || XPG4] (pthread_key_t): Likewise.
	[XPG3 || XPG4] (pthread_mutex_t): Likewise.
	[XPG3 || XPG4] (pthread_mutexattr_t): Likewise.
	[XPG3 || XPG4] (pthread_once_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlock_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlockattr_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_spinlock_t): Likewise.
	[XPG3 || XPG4] (pthread_t): Likewise.

	* conform/data/stdlib.h-data [XPG3 || XPG4 || UNIX98] (setenv): Do
	not expect.
	[XPG3 || XPG4 || UNIX98] (unsetenv): Likewise.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (isnan):
	Change function return type to int.

	* conform/data/sys/mman.h-data [!POSIX] (POSIX_MADV_NORMAL):
	Change condition to [!POSIX && !XPG3 && !XPG4 && !UNIX98].
	[!POSIX] (POSIX_MADV_SEQUENTIAL): Likewise.
	[!POSIX] (POSIX_MADV_RANDOM): Likewise.
	[!POSIX] (POSIX_MADV_WILLNEED): Likewise.
	[!POSIX] (POSIX_MADV_DONTNEED): Likewise.
	[!POSIX] (posix_madvise): Likewise.
	(POSIX_TYPED_MEM_ALLOCATE): Condition on [!POSIX && !XPG3 && !XPG4
	&& !UNIX98].
	(POSIX_TYPED_MEM_ALLOCATE_CONTIG): Likewise.
	(POSIX_TYPED_MEM_MAP_ALLOCATABLE): Likewise.
	(mode_t): Likewise.
	(posix_mem_offset): Likewise.
	(posix_typed_mem_get_info): Likewise.
	(posix_typed_mem_open): Likewise.

	* conform/data/sys/stat.h-data [!POSIX && !POSIX2008] (mknodat):
	Change condition to [XOPEN2K8].

	* conform/conformtest.pl: Preprocess allow-header data with -x c
	instead of from stdin.
	(@headers): Add stdalign.h, stdbool.h and stdnoreturn.h.
	* conform/data/complex.h-data [C99-based standards] (cerf): Allow.
	[C99-based standards] (cerfc): Likewise.
	[C99-based standards] (cexp2): Likewise.
	[C99-based standards] (cexpm1): Likewise.
	[C99-based standards] (clog10): Likewise.
	[C99-based standards] (clog1p): Likewise.
	[C99-based standards] (clog2): Likewise.
	[C99-based standards] (clgamma): Likewise.
	[C99-based standards] (ctgamma): Likewise.
	[C99-based standards] (cerff): Likewise.
	[C99-based standards] (cerfcf): Likewise.
	[C99-based standards] (cexp2f): Likewise.
	[C99-based standards] (cexpm1f): Likewise.
	[C99-based standards] (clog10f): Likewise.
	[C99-based standards] (clog1pf): Likewise.
	[C99-based standards] (clog2f): Likewise.
	[C99-based standards] (clgammaf): Likewise.
	[C99-based standards] (ctgammaf): Likewise.
	[C99-based standards] (cerfl): Likewise.
	[C99-based standards] (cerfcl): Likewise.
	[C99-based standards] (cexp2l): Likewise.
	[C99-based standards] (cexpm1l): Likewise.
	[C99-based standards] (clog10l): Likewise.
	[C99-based standards] (clog1pl): Likewise.
	[C99-based standards] (clog2l): Likewise.
	[C99-based standards] (clgammal): Likewise.
	[C99-based standards] (ctgammal): Likewise.
	* conform/data/inttypes.h-data [C99-based standards]: Include
	stdint.h-data.  Remove all expectations for stdint.h contents.
	[C99-based standards] (PRI*): Do not allow.
	[C99-based standards] (SCN*): Likewise.
	[C99-based standards] (*_t): Likewise.
	[C99-based-standards] (PRId8): Expect macro.
	[C99-based-standards] (PRIi8): Likewise.
	[C99-based-standards] (PRIo8): Likewise.
	[C99-based-standards] (PRIu8): Likewise.
	[C99-based-standards] (PRIx8): Likewise.
	[C99-based-standards] (PRIX8): Likewise.
	[C99-based-standards] (SCNd8): Likewise.
	[C99-based-standards] (SCNi8): Likewise.
	[C99-based-standards] (SCNo8): Likewise.
	[C99-based-standards] (SCNu8): Likewise.
	[C99-based-standards] (SCNx8): Likewise.
	[C99-based-standards] (PRIdLEAST8): Likewise.
	[C99-based-standards] (PRIiLEAST8): Likewise.
	[C99-based-standards] (PRIoLEAST8): Likewise.
	[C99-based-standards] (PRIuLEAST8): Likewise.
	[C99-based-standards] (PRIxLEAST8): Likewise.
	[C99-based-standards] (PRIXLEAST8): Likewise.
	[C99-based-standards] (SCNdLEAST8): Likewise.
	[C99-based-standards] (SCNiLEAST8): Likewise.
	[C99-based-standards] (SCNoLEAST8): Likewise.
	[C99-based-standards] (SCNuLEAST8): Likewise.
	[C99-based-standards] (SCNxLEAST8): Likewise.
	[C99-based-standards] (PRIdFAST8): Likewise.
	[C99-based-standards] (PRIiFAST8): Likewise.
	[C99-based-standards] (PRIoFAST8): Likewise.
	[C99-based-standards] (PRIuFAST8): Likewise.
	[C99-based-standards] (PRIxFAST8): Likewise.
	[C99-based-standards] (PRIXFAST8): Likewise.
	[C99-based-standards] (SCNdFAST8): Likewise.
	[C99-based-standards] (SCNiFAST8): Likewise.
	[C99-based-standards] (SCNoFAST8): Likewise.
	[C99-based-standards] (SCNuFAST8): Likewise.
	[C99-based-standards] (SCNxFAST8): Likewise.
	[C99-based-standards] (PRId16): Likewise.
	[C99-based-standards] (PRIi16): Likewise.
	[C99-based-standards] (PRIo16): Likewise.
	[C99-based-standards] (PRIu16): Likewise.
	[C99-based-standards] (PRIx16): Likewise.
	[C99-based-standards] (PRIX16): Likewise.
	[C99-based-standards] (SCNd16): Likewise.
	[C99-based-standards] (SCNi16): Likewise.
	[C99-based-standards] (SCNo16): Likewise.
	[C99-based-standards] (SCNu16): Likewise.
	[C99-based-standards] (SCNx16): Likewise.
	[C99-based-standards] (PRIdLEAST16): Likewise.
	[C99-based-standards] (PRIiLEAST16): Likewise.
	[C99-based-standards] (PRIoLEAST16): Likewise.
	[C99-based-standards] (PRIuLEAST16): Likewise.
	[C99-based-standards] (PRIxLEAST16): Likewise.
	[C99-based-standards] (PRIXLEAST16): Likewise.
	[C99-based-standards] (SCNdLEAST16): Likewise.
	[C99-based-standards] (SCNiLEAST16): Likewise.
	[C99-based-standards] (SCNoLEAST16): Likewise.
	[C99-based-standards] (SCNuLEAST16): Likewise.
	[C99-based-standards] (SCNxLEAST16): Likewise.
	[C99-based-standards] (PRIdFAST16): Likewise.
	[C99-based-standards] (PRIiFAST16): Likewise.
	[C99-based-standards] (PRIoFAST16): Likewise.
	[C99-based-standards] (PRIuFAST16): Likewise.
	[C99-based-standards] (PRIxFAST16): Likewise.
	[C99-based-standards] (PRIXFAST16): Likewise.
	[C99-based-standards] (SCNdFAST16): Likewise.
	[C99-based-standards] (SCNiFAST16): Likewise.
	[C99-based-standards] (SCNoFAST16): Likewise.
	[C99-based-standards] (SCNuFAST16): Likewise.
	[C99-based-standards] (SCNxFAST16): Likewise.
	[C99-based-standards] (PRId32): Likewise.
	[C99-based-standards] (PRIi32): Likewise.
	[C99-based-standards] (PRIo32): Likewise.
	[C99-based-standards] (PRIu32): Likewise.
	[C99-based-standards] (PRIx32): Likewise.
	[C99-based-standards] (PRIX32): Likewise.
	[C99-based-standards] (SCNd32): Likewise.
	[C99-based-standards] (SCNi32): Likewise.
	[C99-based-standards] (SCNo32): Likewise.
	[C99-based-standards] (SCNu32): Likewise.
	[C99-based-standards] (SCNx32): Likewise.
	[C99-based-standards] (PRIdLEAST32): Likewise.
	[C99-based-standards] (PRIiLEAST32): Likewise.
	[C99-based-standards] (PRIoLEAST32): Likewise.
	[C99-based-standards] (PRIuLEAST32): Likewise.
	[C99-based-standards] (PRIxLEAST32): Likewise.
	[C99-based-standards] (PRIXLEAST32): Likewise.
	[C99-based-standards] (SCNdLEAST32): Likewise.
	[C99-based-standards] (SCNiLEAST32): Likewise.
	[C99-based-standards] (SCNoLEAST32): Likewise.
	[C99-based-standards] (SCNuLEAST32): Likewise.
	[C99-based-standards] (SCNxLEAST32): Likewise.
	[C99-based-standards] (PRIdFAST32): Likewise.
	[C99-based-standards] (PRIiFAST32): Likewise.
	[C99-based-standards] (PRIoFAST32): Likewise.
	[C99-based-standards] (PRIuFAST32): Likewise.
	[C99-based-standards] (PRIxFAST32): Likewise.
	[C99-based-standards] (PRIXFAST32): Likewise.
	[C99-based-standards] (SCNdFAST32): Likewise.
	[C99-based-standards] (SCNiFAST32): Likewise.
	[C99-based-standards] (SCNoFAST32): Likewise.
	[C99-based-standards] (SCNuFAST32): Likewise.
	[C99-based-standards] (SCNxFAST32): Likewise.
	[C99-based-standards] (PRId64): Likewise.
	[C99-based-standards] (PRIi64): Likewise.
	[C99-based-standards] (PRIo64): Likewise.
	[C99-based-standards] (PRIu64): Likewise.
	[C99-based-standards] (PRIx64): Likewise.
	[C99-based-standards] (PRIX64): Likewise.
	[C99-based-standards] (SCNd64): Likewise.
	[C99-based-standards] (SCNi64): Likewise.
	[C99-based-standards] (SCNo64): Likewise.
	[C99-based-standards] (SCNu64): Likewise.
	[C99-based-standards] (SCNx64): Likewise.
	[C99-based-standards] (PRIdLEAST64): Likewise.
	[C99-based-standards] (PRIiLEAST64): Likewise.
	[C99-based-standards] (PRIoLEAST64): Likewise.
	[C99-based-standards] (PRIuLEAST64): Likewise.
	[C99-based-standards] (PRIxLEAST64): Likewise.
	[C99-based-standards] (PRIXLEAST64): Likewise.
	[C99-based-standards] (SCNdLEAST64): Likewise.
	[C99-based-standards] (SCNiLEAST64): Likewise.
	[C99-based-standards] (SCNoLEAST64): Likewise.
	[C99-based-standards] (SCNuLEAST64): Likewise.
	[C99-based-standards] (SCNxLEAST64): Likewise.
	[C99-based-standards] (PRIdFAST64): Likewise.
	[C99-based-standards] (PRIiFAST64): Likewise.
	[C99-based-standards] (PRIoFAST64): Likewise.
	[C99-based-standards] (PRIuFAST64): Likewise.
	[C99-based-standards] (PRIxFAST64): Likewise.
	[C99-based-standards] (PRIXFAST64): Likewise.
	[C99-based-standards] (SCNdFAST64): Likewise.
	[C99-based-standards] (SCNiFAST64): Likewise.
	[C99-based-standards] (SCNoFAST64): Likewise.
	[C99-based-standards] (SCNuFAST64): Likewise.
	[C99-based-standards] (SCNxFAST64): Likewise.
	[C99-based-standards] (PRIdMAX): Likewise.
	[C99-based-standards] (PRIiMAX): Likewise.
	[C99-based-standards] (PRIoMAX): Likewise.
	[C99-based-standards] (PRIuMAX): Likewise.
	[C99-based-standards] (PRIxMAX): Likewise.
	[C99-based-standards] (PRIXMAX): Likewise.
	[C99-based-standards] (SCNdMAX): Likewise.
	[C99-based-standards] (SCNiMAX): Likewise.
	[C99-based-standards] (SCNoMAX): Likewise.
	[C99-based-standards] (SCNuMAX): Likewise.
	[C99-based-standards] (SCNxMAX): Likewise.
	[C99-based-standards] (PRIdPTR): Likewise.
	[C99-based-standards] (PRIiPTR): Likewise.
	[C99-based-standards] (PRIoPTR): Likewise.
	[C99-based-standards] (PRIuPTR): Likewise.
	[C99-based-standards] (PRIxPTR): Likewise.
	[C99-based-standards] (PRIXPTR): Likewise.
	[C99-based-standards] (SCNdPTR): Likewise.
	[C99-based-standards] (SCNiPTR): Likewise.
	[C99-based-standards] (SCNoPTR): Likewise.
	[C99-based-standards] (SCNuPTR): Likewise.
	[C99-based-standards] (SCNxPTR): Likewise.
	* conform/data/iso646.h-data [ISO C standards] (*_t): Do not
	allow.
	* conform/data/stdint.h-data: Update comments to clarify
	requirements.
	[C99-based standards] (INT8_MIN): Use macro-int-constant.  Specify
	type.
	[C99-based standards] (INT8_MAX): Likewise.
	[C99-based standards] (INT16_MIN): Likewise.
	[C99-based standards] (INT16_MAX): Likewise.
	[C99-based standards] (INT32_MIN): Likewise.
	[C99-based standards] (INT32_MAX): Likewise.
	[C99-based standards] (INT64_MIN): Likewise.
	[C99-based standards] (INT64_MAX): Likewise.
	[C99-based standards] (UINT8_MAX): Likewise.
	[C99-based standards] (UINT16_MAX): Likewise.
	[C99-based standards] (UINT32_MAX): Likewise.
	[C99-based standards] (UINT64_MAX): Likewise.
	[C99-based standards] (INT_LEAST8_MIN): Likewise.
	[C99-based standards] (INT_LEAST8_MAX): Likewise.
	[C99-based standards] (INT_LEAST16_MIN): Likewise.
	[C99-based standards] (INT_LEAST16_MAX): Likewise.
	[C99-based standards] (INT_LEAST32_MIN): Likewise.
	[C99-based standards] (INT_LEAST32_MAX): Likewise.
	[C99-based standards] (INT_LEAST64_MIN): Likewise.
	[C99-based standards] (INT_LEAST64_MAX): Likewise.
	[C99-based standards] (UINT_LEAST8_MAX): Likewise.
	[C99-based standards] (UINT_LEAST16_MAX): Likewise.
	[C99-based standards] (UINT_LEAST32_MAX): Likewise.
	[C99-based standards] (UINT_LEAST64_MAX): Likewise.
	[C99-based standards] (INT_FAST8_MIN): Likewise.
	[C99-based standards] (INT_FAST8_MAX): Likewise.
	[C99-based standards] (INT_FAST16_MIN): Likewise.
	[C99-based standards] (INT_FAST16_MAX): Likewise.
	[C99-based standards] (INT_FAST32_MIN): Likewise.
	[C99-based standards] (INT_FAST32_MAX): Likewise.
	[C99-based standards] (INT_FAST64_MIN): Likewise.
	[C99-based standards] (INT_FAST64_MAX): Likewise.
	[C99-based standards] (UINT_FAST8_MAX): Likewise.
	[C99-based standards] (UINT_FAST16_MAX): Likewise.
	[C99-based standards] (UINT_FAST32_MAX): Likewise.
	[C99-based standards] (UINT_FAST64_MAX): Likewise.
	[C99-based standards] (INTPTR_MIN): Likewise.
	[C99-based standards] (INTPTR_MAX): Likewise.
	[C99-based standards] (UINTPTR_MAX): Likewise.
	[C99-based standards] (INTMAX_MIN): Likewise.
	[C99-based standards] (INTMAX_MAX): Likewise.
	[C99-based standards] (UINTMAX_MAX): Likewise.
	[C99-based standards] (PTRDIFF_MIN): Likewise.
	[C99-based standards] (PTRDIFF_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MAX): Likewise.
	[C99-based standards] (SIZE_MAX): Likewise.
	[C99-based standards] (WCHAR_MAX): Likewise.
	[C99-based standards] (WINT_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MIN): Likewise.  Do not specify
	constraint on value.
	[C99-based standards] (WCHAR_MIN): Likewise.
	[C99-based standards] (WINT_MIN): Likewise.
	[C99-based standards] (*_t): Allow.
	* conform/data/tgmath.h-data [XOPEN2K || POSIX2008]: Change
	condition to [!ISO && !POSIX && !XPG3 && !XPG4 && !UNIX98].
	Include math.h-data and complex.h-data.  Remove all expectations
	of math.h and complex.h contents.
	* conform/data/uchar.h-data [ISO11] (c16rtomb): Remove stray "16"
	at end of line.
	* conform/data/wchar.h-data [!ISO && !POSIX && !XPG3 && !XPG4]
	(struct tm): Expect tag.
	[C99-based-standards] (wcstof): Expect function.
	[C99-based-standards] (wcstold): Likewise.
	[C99-based-standards] (wcstoll): Likewise.
	[C99-based-standards] (wcstoull): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MIN): Use
	macro-int-constant.  Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MAX): Likewise.  Specify
	constraint on value.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (NULL): Use macro-constant.
	Specify value.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (wcs*): Change to
	wcs[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/wctype.h-data [C99-based standards] (iswblank):
	Expect function.
	[XOPEN2K8 || POSIX2008] (iswblank_l): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (is*): Change to
	is[abcdefghijklmnopqrstuvwxyz]*.
	[!ISO && !POSIX && !XPG3 && !XPG4] (to*): Change to
	to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/stdalign.h-data: New file.
	* conform/data/stdbool.h-data: Likewise.
	* conform/data/stdnoreturn.h-data: Likewise.

2012-11-07  Roland McGrath  <roland@hack.frob.com>

	[BZ #14815]
	* manual/filesys.texi (Directory Entries): Typo fix.
	Reported by <h-iwamoto@kit.hi-ho.ne.jp>.

2012-11-07  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h (EM_AARCH64): New macro.
	(R_AARCH64_NONE, R_AARCH64_ABS64, R_AARCH64_ABS32): Likewise.
	(R_AARCH64_COPY, R_AARCH64_GLOB_DAT, R_AARCH64_JUMP_SLOT): Likewise.
	(R_AARCH64_RELATIVE, R_AARCH64_TLS_DTPMOD64): Likewise.
	(R_AARCH64_TLS_DTPREL64, R_AARCH64_TLS_TPREL64): Likewise.
	(R_AARCH64_TLSDESC): Likewise.
	(NT_ARM_TLS): Likewise.
	(NT_ARM_HW_BREAK): Likewise.
	(NT_ARM_HW_WATCH): Likewise.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14811]
	* sysdeps/i386/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Saturate nonzero
	exponents with absolute value below 0x1p-64 to +/- 0x1p-64.
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Saturate
	nonzero exponents with absolute value below 0x1p-32 to +/-
	0x1p-32.
	* sysdeps/x86_64/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* math/libm-test.inc (pow_test): Add more tests.

2012-11-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Sync
	_dl_s390_cap_flags with kernel. Increase string length.
	(_dl_s390_platforms): Add z196 and zEC12.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data [!XOPEN21K && !XOPEN2K8 && !POSIX2008]:
	Change XOPEN21K to XOPEN2K.

2012-11-06  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/memmove.c: Use memcpy when possible.

2012-11-06  Andreas Jaeger  <aj@suse.de>

	* po/eo.po: Update from translation team.

2012-11-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14793]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): In case of large z
	exponent and small x and y exponents, scale x or y up.  Increase
	by 2 the exponent used in scaling up.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14805]
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_DFL_ENV): Use cast to const
	fenv_t *.

	[BZ #14801]
	* sysdeps/s390/fpu/bits/fenv.h (fenv_t): Use implementation
	namespace for names of struct fields.
	* sysdeps/s390/fpu/fegetenv.c (fegetenv): Update references to
	fenv_t fields.
	* sysdeps/s390/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/s390/fpu/fesetenv.c (fesetenv): Likewise.

2012-11-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3665]
	* sysdeps/mach/hurd/bits/errno.h: Regenerated.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	* csu/libc-start.c (LIBC_START_MAIN): Conditionalize use of
	PTR_DEMANGLE.

	[BZ #5246]
	* sysdeps/mach/hurd/i386/____longjmp_chk.S: Conditionalize use of
	PTR_DEMANGLE.

2012-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14797]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute cases that
	definitely overflow as x * y not x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #157]

	* include/stub-tag.h: Remove file.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Don't emit
	'#include' of it.
	* manual/maint.texi (Porting): Don't reference it.
	* Makerules ($(objpfx)stubs): Likewise.
	* dirent/closedir.c: Don't include <stub-tag.h>.
	* dirent/dirfd.c: Likewise.
	* dirent/fdopendir.c: Likewise.
	* dirent/getdents.c: Likewise.
	* dirent/getdents64.c: Likewise.
	* dirent/opendir.c: Likewise.
	* dirent/readdir.c: Likewise.
	* dirent/readdir64.c: Likewise.
	* dirent/readdir64_r.c: Likewise.
	* dirent/readdir_r.c: Likewise.
	* dirent/rewinddir.c: Likewise.
	* dirent/seekdir.c: Likewise.
	* dirent/telldir.c: Likewise.
	* gmon/profil.c: Likewise.
	* grp/setgroups.c: Likewise.
	* inet/if_index.c: Likewise.
	* io/access.c: Likewise.
	* io/chdir.c: Likewise.
	* io/chmod.c: Likewise.
	* io/chown.c: Likewise.
	* io/close.c: Likewise.
	* io/dup.c: Likewise.
	* io/dup2.c: Likewise.
	* io/dup3.c: Likewise.
	* io/euidaccess.c: Likewise.
	* io/faccessat.c: Likewise.
	* io/fchdir.c: Likewise.
	* io/fchmod.c: Likewise.
	* io/fchmodat.c: Likewise.
	* io/fchown.c: Likewise.
	* io/fchownat.c: Likewise.
	* io/fcntl.c: Likewise.
	* io/flock.c: Likewise.
	* io/fstatfs.c: Likewise.
	* io/fstatfs64.c: Likewise.
	* io/fstatvfs.c: Likewise.
	* io/fstatvfs64.c: Likewise.
	* io/futimens.c: Likewise.
	* io/fxstat.c: Likewise.
	* io/fxstat64.c: Likewise.
	* io/fxstatat.c: Likewise.
	* io/fxstatat64.c: Likewise.
	* io/getcwd.c: Likewise.
	* io/isatty.c: Likewise.
	* io/lchmod.c: Likewise.
	* io/lchown.c: Likewise.
	* io/link.c: Likewise.
	* io/linkat.c: Likewise.
	* io/lseek.c: Likewise.
	* io/lseek64.c: Likewise.
	* io/lxstat64.c: Likewise.
	* io/mkdir.c: Likewise.
	* io/mkdirat.c: Likewise.
	* io/mkfifo.c: Likewise.
	* io/mkfifoat.c: Likewise.
	* io/open.c: Likewise.
	* io/open64.c: Likewise.
	* io/openat.c: Likewise.
	* io/openat64.c: Likewise.
	* io/pipe.c: Likewise.
	* io/pipe2.c: Likewise.
	* io/poll.c: Likewise.
	* io/posix_fadvise.c: Likewise.
	* io/posix_fadvise64.c: Likewise.
	* io/posix_fallocate.c: Likewise.
	* io/posix_fallocate64.c: Likewise.
	* io/read.c: Likewise.
	* io/readlink.c: Likewise.
	* io/readlinkat.c: Likewise.
	* io/rmdir.c: Likewise.
	* io/sendfile.c: Likewise.
	* io/sendfile64.c: Likewise.
	* io/statfs.c: Likewise.
	* io/statfs64.c: Likewise.
	* io/statvfs.c: Likewise.
	* io/statvfs64.c: Likewise.
	* io/symlink.c: Likewise.
	* io/symlinkat.c: Likewise.
	* io/ttyname.c: Likewise.
	* io/ttyname_r.c: Likewise.
	* io/umask.c: Likewise.
	* io/unlink.c: Likewise.
	* io/unlinkat.c: Likewise.
	* io/utime.c: Likewise.
	* io/utimensat.c: Likewise.
	* io/write.c: Likewise.
	* io/xmknod.c: Likewise.
	* io/xmknodat.c: Likewise.
	* io/xstat.c: Likewise.
	* io/xstat64.c: Likewise.
	* login/getpt.c: Likewise.
	* login/grantpt.c: Likewise.
	* login/unlockpt.c: Likewise.
	* math/e_acoshl.c: Likewise.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_expl.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/fclrexcpt.c: Likewise.
	* math/fedisblxcpt.c: Likewise.
	* math/feenablxcpt.c: Likewise.
	* math/fegetenv.c: Likewise.
	* math/fegetexcept.c: Likewise.
	* math/fegetround.c: Likewise.
	* math/feholdexcpt.c: Likewise.
	* math/fesetenv.c: Likewise.
	* math/fesetround.c: Likewise.
	* math/feupdateenv.c: Likewise.
	* math/fgetexcptflg.c: Likewise.
	* math/fraiseexcpt.c: Likewise.
	* math/fsetexcptflg.c: Likewise.
	* math/ftestexcept.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_rem_pio2l.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_asinhl.c: Likewise.
	* math/s_atanl.c: Likewise.
	* math/s_cbrtl.c: Likewise.
	* math/s_erfl.c: Likewise.
	* math/s_expm1l.c: Likewise.
	* math/s_log1pl.c: Likewise.
	* math/s_tanhl.c: Likewise.
	* misc/acct.c: Likewise.
	* misc/brk.c: Likewise.
	* misc/chflags.c: Likewise.
	* misc/chroot.c: Likewise.
	* misc/fchflags.c: Likewise.
	* misc/fgetxattr.c: Likewise.
	* misc/flistxattr.c: Likewise.
	* misc/fremovexattr.c: Likewise.
	* misc/fsetxattr.c: Likewise.
	* misc/fsync.c: Likewise.
	* misc/ftruncate.c: Likewise.
	* misc/futimes.c: Likewise.
	* misc/futimesat.c: Likewise.
	* misc/getdomain.c: Likewise.
	* misc/getdtsz.c: Likewise.
	* misc/gethostid.c: Likewise.
	* misc/gethostname.c: Likewise.
	* misc/getloadavg.c: Likewise.
	* misc/getpagesize.c: Likewise.
	* misc/getsysstats.c: Likewise.
	* misc/getxattr.c: Likewise.
	* misc/gtty.c: Likewise.
	* misc/ioctl.c: Likewise.
	* misc/lgetxattr.c: Likewise.
	* misc/listxattr.c: Likewise.
	* misc/llistxattr.c: Likewise.
	* misc/lremovexattr.c: Likewise.
	* misc/lsetxattr.c: Likewise.
	* misc/lutimes.c: Likewise.
	* misc/madvise.c: Likewise.
	* misc/mincore.c: Likewise.
	* misc/mlock.c: Likewise.
	* misc/mlockall.c: Likewise.
	* misc/mmap.c: Likewise.
	* misc/mprotect.c: Likewise.
	* misc/msync.c: Likewise.
	* misc/munlock.c: Likewise.
	* misc/munlockall.c: Likewise.
	* misc/munmap.c: Likewise.
	* misc/preadv.c: Likewise.
	* misc/preadv64.c: Likewise.
	* misc/ptrace.c: Likewise.
	* misc/pwritev.c: Likewise.
	* misc/pwritev64.c: Likewise.
	* misc/readv.c: Likewise.
	* misc/reboot.c: Likewise.
	* misc/remap_file_pages.c: Likewise.
	* misc/removexattr.c: Likewise.
	* misc/revoke.c: Likewise.
	* misc/select.c: Likewise.
	* misc/setdomain.c: Likewise.
	* misc/setegid.c: Likewise.
	* misc/seteuid.c: Likewise.
	* misc/sethostid.c: Likewise.
	* misc/sethostname.c: Likewise.
	* misc/setregid.c: Likewise.
	* misc/setreuid.c: Likewise.
	* misc/setxattr.c: Likewise.
	* misc/sstk.c: Likewise.
	* misc/stty.c: Likewise.
	* misc/swapoff.c: Likewise.
	* misc/swapon.c: Likewise.
	* misc/sync.c: Likewise.
	* misc/syncfs.c: Likewise.
	* misc/syscall.c: Likewise.
	* misc/truncate.c: Likewise.
	* misc/ualarm.c: Likewise.
	* misc/usleep.c: Likewise.
	* misc/ustat.c: Likewise.
	* misc/utimes.c: Likewise.
	* misc/vhangup.c: Likewise.
	* misc/writev.c: Likewise.
	* posix/_exit.c: Likewise.
	* posix/alarm.c: Likewise.
	* posix/execve.c: Likewise.
	* posix/fexecve.c: Likewise.
	* posix/fork.c: Likewise.
	* posix/fpathconf.c: Likewise.
	* posix/getaddrinfo.c: Likewise.
	* posix/getegid.c: Likewise.
	* posix/geteuid.c: Likewise.
	* posix/getgid.c: Likewise.
	* posix/getgroups.c: Likewise.
	* posix/getlogin.c: Likewise.
	* posix/getlogin_r.c: Likewise.
	* posix/getpgid.c: Likewise.
	* posix/getpid.c: Likewise.
	* posix/getppid.c: Likewise.
	* posix/getresgid.c: Likewise.
	* posix/getresuid.c: Likewise.
	* posix/getsid.c: Likewise.
	* posix/getuid.c: Likewise.
	* posix/glob64.c: Likewise.
	* posix/nanosleep.c: Likewise.
	* posix/pathconf.c: Likewise.
	* posix/pause.c: Likewise.
	* posix/posix_madvise.c: Likewise.
	* posix/pread.c: Likewise.
	* posix/pread64.c: Likewise.
	* posix/pwrite.c: Likewise.
	* posix/pwrite64.c: Likewise.
	* posix/sched_getaffinity.c: Likewise.
	* posix/sched_getp.c: Likewise.
	* posix/sched_gets.c: Likewise.
	* posix/sched_primax.c: Likewise.
	* posix/sched_primin.c: Likewise.
	* posix/sched_rr_gi.c: Likewise.
	* posix/sched_setaffinity.c: Likewise.
	* posix/sched_setp.c: Likewise.
	* posix/sched_sets.c: Likewise.
	* posix/sched_yield.c: Likewise.
	* posix/setgid.c: Likewise.
	* posix/setlogin.c: Likewise.
	* posix/setpgid.c: Likewise.
	* posix/setresgid.c: Likewise.
	* posix/setresuid.c: Likewise.
	* posix/setsid.c: Likewise.
	* posix/setuid.c: Likewise.
	* posix/sleep.c: Likewise.
	* posix/spawni.c: Likewise.
	* posix/sysconf.c: Likewise.
	* posix/times.c: Likewise.
	* posix/wait.c: Likewise.
	* posix/wait3.c: Likewise.
	* posix/wait4.c: Likewise.
	* posix/waitpid.c: Likewise.
	* resolv/gai_sigqueue.c: Likewise.
	* resource/getpriority.c: Likewise.
	* resource/getrlimit.c: Likewise.
	* resource/getrusage.c: Likewise.
	* resource/nice.c: Likewise.
	* resource/setpriority.c: Likewise.
	* resource/setrlimit.c: Likewise.
	* resource/ulimit.c: Likewise.
	* rt/aio_cancel.c: Likewise.
	* rt/aio_fsync.c: Likewise.
	* rt/aio_read.c: Likewise.
	* rt/aio_sigqueue.c: Likewise.
	* rt/aio_suspend.c: Likewise.
	* rt/aio_write.c: Likewise.
	* rt/clock_getres.c: Likewise.
	* rt/clock_gettime.c: Likewise.
	* rt/clock_nanosleep.c: Likewise.
	* rt/clock_settime.c: Likewise.
	* rt/lio_listio.c: Likewise.
	* rt/mq_close.c: Likewise.
	* rt/mq_getattr.c: Likewise.
	* rt/mq_notify.c: Likewise.
	* rt/mq_open.c: Likewise.
	* rt/mq_receive.c: Likewise.
	* rt/mq_send.c: Likewise.
	* rt/mq_setattr.c: Likewise.
	* rt/mq_timedreceive.c: Likewise.
	* rt/mq_timedsend.c: Likewise.
	* rt/mq_unlink.c: Likewise.
	* rt/shm_open.c: Likewise.
	* rt/shm_unlink.c: Likewise.
	* rt/timer_create.c: Likewise.
	* rt/timer_delete.c: Likewise.
	* rt/timer_getoverr.c: Likewise.
	* rt/timer_gettime.c: Likewise.
	* rt/timer_settime.c: Likewise.
	* setjmp/__longjmp.c: Likewise.
	* setjmp/setjmp.c: Likewise.
	* signal/kill.c: Likewise.
	* signal/killpg.c: Likewise.
	* signal/raise.c: Likewise.
	* signal/sigaction.c: Likewise.
	* signal/sigaltstack.c: Likewise.
	* signal/sigblock.c: Likewise.
	* signal/sigignore.c: Likewise.
	* signal/sigintr.c: Likewise.
	* signal/signal.c: Likewise.
	* signal/sigpause.c: Likewise.
	* signal/sigpending.c: Likewise.
	* signal/sigqueue.c: Likewise.
	* signal/sigreturn.c: Likewise.
	* signal/sigset.c: Likewise.
	* signal/sigsetmask.c: Likewise.
	* signal/sigstack.c: Likewise.
	* signal/sigsuspend.c: Likewise.
	* signal/sigtimedwait.c: Likewise.
	* signal/sigvec.c: Likewise.
	* signal/sigwait.c: Likewise.
	* signal/sigwaitinfo.c: Likewise.
	* signal/sysv_signal.c: Likewise.
	* socket/accept.c: Likewise.
	* socket/accept4.c: Likewise.
	* socket/bind.c: Likewise.
	* socket/connect.c: Likewise.
	* socket/getpeername.c: Likewise.
	* socket/getsockname.c: Likewise.
	* socket/getsockopt.c: Likewise.
	* socket/isfdtype.c: Likewise.
	* socket/listen.c: Likewise.
	* socket/recv.c: Likewise.
	* socket/recvfrom.c: Likewise.
	* socket/recvmsg.c: Likewise.
	* socket/send.c: Likewise.
	* socket/sendmsg.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/setsockopt.c: Likewise.
	* socket/shutdown.c: Likewise.
	* socket/sockatmark.c: Likewise.
	* socket/socket.c: Likewise.
	* socket/socketpair.c: Likewise.
	* stdio-common/ctermid.c: Likewise.
	* stdio-common/cuserid.c: Likewise.
	* stdio-common/remove.c: Likewise.
	* stdio-common/rename.c: Likewise.
	* stdio-common/renameat.c: Likewise.
	* stdio-common/tempname.c: Likewise.
	* stdlib/getcontext.c: Likewise.
	* stdlib/makecontext.c: Likewise.
	* stdlib/setcontext.c: Likewise.
	* stdlib/swapcontext.c: Likewise.
	* stdlib/system.c: Likewise.
	* streams/fattach.c: Likewise.
	* streams/fdetach.c: Likewise.
	* streams/getmsg.c: Likewise.
	* streams/getpmsg.c: Likewise.
	* streams/putmsg.c: Likewise.
	* streams/putpmsg.c: Likewise.
	* sysdeps/unix/bsd/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/epoll_pwait.c: Likewise.
	* sysdeps/unix/sysv/linux/futimens.c: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Likewise.
	* sysdeps/unix/sysv/linux/readahead.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c: Likewise.
	* sysvipc/msgctl.c: Likewise.
	* sysvipc/msgget.c: Likewise.
	* sysvipc/msgrcv.c: Likewise.
	* sysvipc/msgsnd.c: Likewise.
	* sysvipc/semctl.c: Likewise.
	* sysvipc/semget.c: Likewise.
	* sysvipc/semop.c: Likewise.
	* sysvipc/semtimedop.c: Likewise.
	* sysvipc/shmat.c: Likewise.
	* sysvipc/shmctl.c: Likewise.
	* sysvipc/shmdt.c: Likewise.
	* sysvipc/shmget.c: Likewise.
	* termios/tcdrain.c: Likewise.
	* termios/tcflow.c: Likewise.
	* termios/tcflush.c: Likewise.
	* termios/tcgetattr.c: Likewise.
	* termios/tcgetpgrp.c: Likewise.
	* termios/tcsendbrk.c: Likewise.
	* termios/tcsetattr.c: Likewise.
	* termios/tcsetpgrp.c: Likewise.
	* time/adjtime.c: Likewise.
	* time/clock.c: Likewise.
	* time/getitimer.c: Likewise.
	* time/gettimeofday.c: Likewise.
	* time/setitimer.c: Likewise.
	* time/settimeofday.c: Likewise.
	* time/stime.c: Likewise.
	* time/time.c: Likewise.

2012-11-04  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/generic/paths.h (_PATH_STDPATH): Remove /usr/contrib/bin and
	/usr/old/bin.

	* sysdeps/generic/paths.h (_PATH_MNTTAB, _PATH_MOUNTED): Use tabs
	instead of spaces.
	* sysdeps/unix/sysv/linux/paths.h (_PATH_UTMP, _PATH_WTMP): Likewise.

2012-11-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14796]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Set rounding mode to
	FE_TONEAREST before applying Dekker multiplication and Knuth
	addition.  Clear inexact exceptions and check for exact zero
	results afterwards.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	* sysdeps/generic/math_private.h (default_libc_fesetround): New
	function.
	(libc_fesetround): New macro.
	(libc_fesetroundf): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/i386/fpu/fenv_private.h (libc_fesetround_sse): New
	function.
	(libc_fesetround_387): Likewise.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/sparc/fpu/fenv_private.h (libc_fesetround): New
	function.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* include/fenv.h (feclearexcept): Add libm_hidden_proto.
	* math/fclrexcpt.c (feclearexcept): Add libm_hidden_ver.
	* sysdeps/i386/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/powerpc/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/s390/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.
	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/sparc/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/x86_64/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.

	[BZ #3439]
	* sysdeps/powerpc/bits/fenv.h (FE_INEXACT): Define macro to
	integer constant usable in #if and use that to give value to enum
	constant.
	(FE_DIVBYZERO): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_INVALID): Likewise.
	(FE_INVALID_SNAN): Likewise.
	(FE_INVALID_ISI): Likewise.
	(FE_INVALID_IDI): Likewise.
	(FE_INVALID_ZDZ): Likewise.
	(FE_INVALID_IMZ): Likewise.
	(FE_INVALID_COMPARE): Likewise.
	(FE_INVALID_SOFTWARE): Likewise.
	(FE_INVALID_SQRT): Likewise.
	(FE_INVALID_INTEGER_CONVERSION): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/s390/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_INEXACT): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INVALID): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/x86/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.

2012-11-02  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (R_TILEGX_IMM16_X[01]_HW[012]_(|LAST_)PLT_PCREL): Add.

2012-11-03  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/cross-test-ssh.sh (command): Use newlines to separate
	commands.  Quote $PWD.
	(blacklist_exports): Don't use remove_newlines.  Replace "declare
	-x" by "export".
	(remove_newlines): Remove.

2012-11-02  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/Makefile (headers): Add bits/stdlib-float.h.
	* stdlib/stdlib.h (atof): Moved to ...
	* include/bits/stdlib-float.h: Here.  New file.
	* stdlib/stdlib.h: Include <bits/stdlib-float.h>.
	* stdlib/bits/stdlib-float.h: New file.
	* sysdeps/x86/Makefile (CFLAGS-.os): Compile rtld routines with
	-mno-sse -mno-mmx.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: Include
	<xmmintrin.h>.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl (@headers): Add fenv.h.
	* conform/data/fenv.h-data: New file.
	* include/fenv.h [_ISOMAC]: Disable all contents of file except
	include of <math/fenv.h>.

	* conform/data/complex.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Change condition to [!ISO && !POSIX && !XPG3 && !XPG4
	&& !UNIX98].  Enables tests for XOPEN2K8.
	* conform/data/inttypes.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Likewise.

	* conform/data/sys/wait.h-data [XPG3 || XOPEN2K8 || POSIX2008]
	(struct rusage): Do not expect type or its members.

	[BZ #3439]
	* math/math.h (FP_NAN): Define macro to integer constant usable in
	#if and use that to give value to enum constant.
	(FP_INFINITE): Likewise.
	(FP_ZERO): Likewise.
	(FP_SUBNORMAL): Likewise.
	(FP_NORMAL): Likewise.

2012-11-02  Andreas Schwab  <schwab@linux-m68k.org>

	* iconvdata/bug-iconv8.c (do_test): Use %z for size_t arguments.
	* iconvdata/bug-iconv9.c (do_test): Use %t for ptrdiff_t
	arguments.

2012-11-02  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_AUTOCONF_VERSION): New macro.
	Check that AC_AUTOCONF_VERSION matches it and m4_fatal at
	autoconf-time if not.
	* configure.in: Remove AC_PREREQ.

2012-11-02  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/sys/platform/ppc.h (__ppc_get_timebase): Use
	__builtin_ppc_get_timebase when building with GCC >= 4.8 instead
	of the internal implementation.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/syslog.h [_ISOMAC]: Disable all contents of file
	except include of <misc/sys/syslog.h>.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: If the
	function returns with a NULL context exit with zero.

2012-11-01  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile (cflags): Remove -mnew-mnemonics.

2012-11-01  H.J. Lu  <hongjiu.lu@intel.com>

	* catgets/test-gencat.sh (run_program_prefix): Renamed to ...
	(run_program_cmd): This.
	* localedata/tst-langinfo.sh (run_program_prefix): Removed.
	(tst_langinfo): New variable.  Use it.

2012-11-01  Sebastan Andrzej Siewior  <bigeasy@linutronix.de>

	* sysdeps/powerpc/powerpc32/dl-trampoline.S: Put __NO_FPRS__ around
	floating point opcodes.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/Makefile (link-libc-static-tests): New
	variable.

	* elf/dl-support.c: Unconditionally include "setup-vdso.h".

	* sysdeps/mach/hurd/powerpc: Remove directory.
	* sysdeps/mach/powerpc: Likewise.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/check-local-headers.sh: Ignore c++ headers.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* libio/genops.c (_IO_flush_all_lockp): Use NULL rather than 0 for
	__libc_cleanup_region_start argument.

2012-11-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14784]
	[BZ #14785]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle cases with small
	x * y using scaling, not as x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/bits/param.h: Remove stray #endif.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/Makefile [$(subdir) = debug] (CFLAGS-backtrace.c):
	New variable.

2012-10-31  Thomas Schwinge  <thomas@codesourcery.com>

	* rt/tst-shm.c (worker): Correct checking for mmap failure.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix sort order.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix the order of the list for glibc 2.17.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14610]
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c (__ieee754_atan2l): Check
	for low part of x being zero before using __atanl (y).
	* math/libm-test.inc (atan2_test): Add another test.

	* manual/install.texi (Configuring and compiling): Document
	general use of test-wrapper and test-wrapper-env.
	* INSTALL: Regenerated.

	* sysdeps/ieee754/dbl-64/s_fma.c: Include <tininess.h>.
	(__fma): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* math/libm-test.inc (UNDERFLOW_EXCEPTION_BEFORE_ROUNDING): New
	macro.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-10-30  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/tininess.h: Renamed to ...
	* sysdeps/x86/tininess.h: This.
	* sysdeps/x86_64/tininess.h: Removed.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-array1.out): Depend on comparison
	input.  Use $(build-program-cmd).
	($(objpfx)tst-array1-static.out): Likewise.
	($(objpfx)tst-array2.out): Likewise.
	($(objpfx)tst-array3.out): Likewise.
	($(objpfx)tst-array4.out): Likewise.
	($(objpfx)tst-array5.out): Likewise.
	($(objpfx)tst-array5-static.out): Likewise.

2012-10-30  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Call DL_AFTER_LOAD
	if defined.

	* nss/nsswitch.h (nss_interface_function): Provide new
	macro for use with NSS functions.
	* grp/initgroups.c: Use new macro.
	* nss/getXXbyYY.c: Likewise.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update Russion translation from translation project.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14152]
	[BZ #14783]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Extract low bits of
	result and shift together with sticky bit instead of replicating
	round-to-nearest rounding.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.  Do not permit
	missing underflow exceptions.
	(fma_test_towardzero): Add more tests.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

	[BZ #14047]
	* sysdeps/generic/tininess.h: New file.
	* sysdeps/i386/tininess.h: Likewise.
	* sysdeps/sh/tininess.h: Likewise.
	* sysdeps/x86_64/tininess.h: Likewise.
	* stdlib/tst-strtod-underflow.c: Likewise.
	* stdlib/tst-tininess.c: Likewise.
	* stdlib/strtod_l.c: Include <tininess.h>.
	(round_and_return): Do not set errno for exact underflow cases.
	Force an underflow exception when setting errno for underflow.
	Determine underflow based on rounding to normal precision if
	TININESS_AFTER_ROUNDING.
	* stdlib/tst-strtod.c (tests): Do not expect errno to be set to
	ERANGE for exact underflow cases.
	* stdlib/Makefile (tests): Add tst-tininess and
	tst-strtod-underflow.
	($(objpfx)tst-tininess): Use $(link-libm).
	($(objpfx)tst-strtod-underflow): Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	[BZ#14767]
	* elf/Makefile (tests): Remove conditional for have-initfini-array
	since this is now always required and the variable does not exist
	anymore.
	(tests-static): Likewise.
	(modules-names): Likewise.

	* po/eo.po: Add Esperanto translation from translation project.

	* elf/tst-array1.c (fini_array): Make writeable so that it can be
	merged with constructor/destructor.
	(init_array): Likewise.
	* elf/tst-array2dep.c (fini_array): Likewise.
	(init_array): Likewise.

2012-10-29  Mike Frysinger  <vapier@gentoo.org>

	* manual/message.texi: Delete @cartouche tags.

2012-10-29  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/fdatasync.c: Turn ERR into EINVAL if it is
	EOPNOTSUPP.
	* sysdeps/mach/hurd/fsync.c: Likewise.

	* sysdeps/pthread/aio_notify.c (__aio_notify_only)
	[_POSIX_REALTIME_SIGNALS]: Change condition to
	[_POSIX_REALTIME_SIGNALS > 0].

2012-10-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (__O_LARGEFILE)
	[!__x86_64]: Do not define, take value from <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE):
	[__WORDSIZE != 64]: Likewise.

2012-10-26  H.J. Lu  <hongjiu.lu@intel.com>

	*  iconvdata/tst-table.sh: Remove ${SHELL}.
	*  iconvdata/tst-tables.sh: Likewise.

2012-10-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use strtoumax instead
	of strtoull.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add comments for
	ifunc-impl-list.c
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/ifunc-impl-list.c: New
	file.

2012-10-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use __getdents instead of
	__getdirentries.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* scripts/cross-test-ssh.sh: New file.
	* manual/install.texi (Configuring and compiling): Document use of
	cross-test-ssh.sh.
	* INSTALL: Regenerated.

2012-10-25  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptrace.c (ptrace): Use __hurd_fail to return
	EOPNOTSUPP.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-program-prefix): Fix comment.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (test-wrapper): New variable,
	(test-wrapper-env): Likewise.
	[$(cross-compiling) = yes && $(test-wrapper) != ""]
	(run-built-tests): Define to yes.
	(run-program-prefix): Use $(test-wrapper).
	(built-program-cmd): Likewise.
	* Rules (make-test-out): Use $(test-wrapper-env) and
	$(host-built-program-cmd).
	* elf/Makefile ($(objpfx)order.out): Use $(test-wrapper).
	($(objpfx)tst-pathopt.out): Pass $(test-wrapper-env) to
	tst-pathopt.sh.
	($(objpfx)tst-rtld-load-self.out): Pass $(test-wrapper) and
	$(test-wrapper-env) to tst-rtld-load-self.sh.
	($(objpfx)order2.out): Use $(test-wrapper).
	($(objpfx)tst-initorder.out): Likewise.
	($(objpfx)tst-initorder2.out): Likewise.
	($(objpfx)tst-unused-dep.out): Use $(test-wrapper-env).
	* elf/tst-pathopt.sh (run_program_prefix): Remove unused variable.
	(test_wrapper_env): New variable.  Use it to run ld.so.
	* elf/tst-rtld-load-self.sh (test_wrapper): New variable.
	Use it to run ld.so.
	(test_wrapper_env): Likewise.
	* iconvdata/Makefile ($(objpfx)iconv-test.out): Pass
	$(test-wrapper) to run-iconv-test.sh.
	* iconvdata/run-iconv-test.sh (test_wrapper): New variable.
	(ICONV): Use $test_wrapper.
	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-via-rtld-prefix), $(test-wrapper) and $(test-wrapper-env) to
	globtest.sh, not $(run-program-prefix).
	* posix/globtest.sh (run_via_rtld_prefix): New variable.
	(test_wrapper): Likewise.
	(test_wrapper_env): Likewise.  Use it to run globtest with HOME
	set together with run_via_rtld_prefix.
	(run_program_prefix): Define in terms of test_wrapper and
	run_via_rtld_prefix.

2012-10-24  Roland McGrath  <roland@hack.frob.com>

	* nscd/Makefile ($(objpfx)nscd): Remove librt dependency.
	* posix/Makefile ($(objpfx)tst-regex, $(objpfx)tst-regex2):
	Targets	removed.

	[BZ #14743]
	* include/time.h: Remove librt_hidden_proto (clock_gettime).
	Declare __clock_getres, __clock_gettime, __clock_settime,
	__clock_nanosleep, and __clock_getcpuclockid.
	* rt/clock_gettime.c: Define __clock_gettime as an alias.
	Remove librt_hidden_def (clock_gettime).
	* sysdeps/unix/clock_gettime.c: Likewise.
	* rt/clock_getcpuclockid.c: Define __clock_getcpuclockid as an alias.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c: Likewise.
	* rt/clock_getres.c: Define __clock_getres as an alias.
	* sysdeps/posix/clock_getres.c: Likewise.
	* rt/clock_settime.c: Define __clock_settime as an alias.
	* sysdeps/unix/clock_settime.c: Likewise.
	* rt/clock_nanosleep.c: Define __clock_nanosleep as an alias.
	* sysdeps/unix/clock_nanosleep.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c: Likewise.
	* rt/clock-compat.c: New file.
	* rt/Makefile (librt-routines): Add clock-compat and move
	$(clock-routines) to ...
	(routines): ... here, new variable.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_routines):
	Don't add get_clockfreq here.
	* rt/Versions (libc: GLIBC_2.17): New version set.
	Add clock_* symbols here.
	(libc: GLIBC_PRIVATE): New version set.  Add __clock_* symbols here.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist
	(GLIBC_2.17): Add clock_* symbols.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* NEWS: Mention the move.

	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c (__get_clockfreq):
	Use __open, __read, __close rather than their public counterparts.
	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_cpuinfo): Likewise.
	(__get_clockfreq_via_proc_openprom): Likewise, and __getdirentries.
	(__get_clockfreq_via_dev_openprom): Likewise, and __ioctl.

	* config.h.in (HAVE_IFUNC): New #undef.
	* configure.in: Define it if libc_cv_ld_gnu_indirect_function
	was successful.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move READELF check to start of file.
	(libc_cv_ld_gnu_indirect_function): Change to a link test. Rename from
	libc_cv_asm_gnu_indirect_function in the process.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in (libc_cv_gcc_static_libgcc): Drop -q flag to grep and
	send the output to /dev/null.
	(libc_cv_cc_with_libunwind): Likewise.
	(libc_cv_as_noexecstack): Likewise.
	* configure: Regenerate.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>

	* io/ftwtest-sh (tmp): Define to ${objpfx}io, not using `pwd`.

	* posix/globtest.sh (TMPDIR): Do not set.
	(testdir): Define using ${common_objpfx}posix not $TMPDIR.
	(testout): Likewise.

2012-10-24  Andreas Jaeger  <aj@suse.de>

	* io/fcntl.h: Always define mode_t, off_t, pid_t and use these
	types for creat, creat64, lockf, posix_fadvise, posix_fallocate.
	[__USE_LARGEFILE64 && !__off64_t_defined]: Define off64_t.
	[__USE_LARGEFILE64]: Use off64_t in declaration of lock64,
	posix_fadvise64, posix_fallocate64.

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__x86_64]: Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [!__USE_FILE_OFFSET64 && !__x86_64__]:
	Likewise.
	(F_GETLK, F_SETLK, F_SETLKW) [__USE_FILE_OFFSET64 && ! __x86_64__]:
	Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [!__x86_64__]: Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__USE_FILE_OFFSET64]: Remove, provided by
	<bits/fcntl-linux.h>.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [__WORDSIZE == 64]: Likewise.

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (F_DUPFD, F_GETFD)
	(F_SETFD, F_GETFL, F_SETFL): Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [__WORDSIZE == 64]: Likewise.
	(F_GETLK, F_SETLK, F_SETLKW, F_GETLK64, F_SETLK64, F_SETLKW64)
	[__WORDSIZE != 64]: Likewise.

2012-10-23  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-built-tests): New variable.
	* Rules [$(cross-compiling) = yes]: Change condition to
	[$(run-built-tests) = no].
	* catgets/Makefile [$(cross-compiling) != yes]: Change condition
	to [$(run-built-tests) = yes].
	* elf/Makefile [$(cross-compiling) = no]: Likewise
	* grp/Makefile [$(cross-compiling) = no]: Likewise.
	* iconv/Makefile [$(cross-compiling) != yes]: Likewise.
	* iconvdata/Makefile [$(cross-compiling) = no]: Likewise.
	* intl/Makefile [$(cross-compiling) = no]: Likewise.
	* io/Makefile [$(cross-compiling) = no]: Likewise.
	* libio/Makefile [$(cross-compiling) = no]: Likewise.
	* malloc/Makefile [$(cross-compiling) = no]: Likewise.
	* misc/Makefile [$(cross-compiling) = no]: Likewise.
	* posix/Makefile [$(cross-compiling) = no]: Likewise.
	* resolv/Makefile [$(cross-compiling) = no]: Likewise.
	* stdio-common/Makefile [$(cross-compiling) = no]: Likewise.
	* stdlib/Makefile [$(cross-compiling) = no]: Likewise.
	* string/Makefile [$(cross-compiling) = no]: Likewise.

	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-program-prefix) to globtest.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/globtest.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use for running globtest
	binary.

2012-10-23  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (host-built-program-cmd): New variable.
	* elf/Makefile (tst-stackguard1-ARGS): Use
	$(host-built-program-cmd).
	* posix/Makefile (tst-exec-ARGS): Use $(host-built-program-cmd).
	(tst-spawn-ARGS): Likewise.
	* rt/Makefile (tst-mqueue7-ARGS): Use $(host-built-program-cmd).

2012-10-23  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (run-via-rtld-prefix): New variable.
	(run-program-prefix): Define in terms of $(run-via-rtld-prefix).
	(built-program-cmd): Likewise.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (O_RSYNC): Define to
	__O_RSYNC if it exists, otherwise to O_SYNC.

2012-10-22  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* iconvdata/run-iconv-test.sh: Redirect iconv stdin in loops from
	/dev/null.
	* iconvdata/tst-tables.sh: Redirect tst-table.sh stdin in loop
	from /dev/null
	* posix/tst-getconf.sh: Redirect getconf stdin in loop from
	/dev/null.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (__O_LARGEFILE):
	Define always.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE): Likewise.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/fcntl-linux.h.

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (F_GETLK, F_SETLK)
	(F_SETLKW) [!F_GETLK]: Define values for [!__USE_FILE_OFFSET64].

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.

2012-10-21  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* config.make.in (NM): New variable.

2012-10-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14683]
	* elf/Makefile (tests-static): Add tst-leaks1-static.
	(tests): Also depend on $(objpfx)tst-leaks1-static-mem.
	($(objpfx)tst-leaks1-static): New rule.
	($(objpfx)tst-leaks1-static-mem): Likewise.
	(tst-leaks1-static-ENV): New macro.
	* elf/dl-open.c (dl_open_worker): Check the main application
	only if SHARED is defined.
	* elf/tst-leaks1-static.c: New file.

2012-10-20  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: New file, contains
	generic values for Linux.
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: Remove all definitions
	and declarations that are provided by <bits/fcntl-linux.h> and
	include <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.

2012-10-20  Roland McGrath  <roland@hack.frob.com>

	* io/fcntl.h: Move include of <bits/types.h> to the top and
	include it unconditionally.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	* wcsmbs/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* wcsmbs/test-wcschr-ifunc.c: New file.
	* wcsmbs/test-wcscmp-ifunc.c: Likewise.
	* wcsmbs/test-wcscpy-ifunc.c: Likewise.
	* wcsmbs/test-wcslen-ifunc.c: Likewise.
	* wcsmbs/test-wcsrchr-ifunc.c: Likewise.
	* wcsmbs/test-wmemcmp-ifunc.c: Likewise.

	* string/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* string/test-memccpy.c (TEST_NAME): New macro.
	* string/test-memchr.c (TEST_NAME): Likewise.
	* string/test-memcmp.c (TEST_NAME): Likewise.
	* string/test-memcpy.c (TEST_NAME): Likewise.
	* string/test-memmem.c (TEST_NAME): Likewise.
	* string/test-memmove.c (TEST_NAME): Likewise.
	* string/test-memset.c (TEST_NAME): Likewise.
	* string/test-rawmemchr.c (TEST_NAME): Likewise.
	* string/test-stpcpy.c (TEST_NAME): Likewise.
	* string/test-stpncpy.c (TEST_NAME): Likewise.
	* string/test-strcasecmp.c (TEST_NAME): Likewise.
	* string/test-strcasestr.c (TEST_NAME): Likewise.
	* string/test-strcat.c (TEST_NAME): Likewise.
	* string/test-strchr.c (TEST_NAME): Likewise.
	* string/test-strcmp.c(TEST_NAME): Likewise.
	* string/test-strcpy.c (TEST_NAME): Likewise.
	* string/test-strcspn.c (TEST_NAME): Likewise.
	* string/test-strlen.c (TEST_NAME): Likewise.
	* string/test-strncasecmp.c (TEST_NAME): Likewise.
	* string/test-strncmp.c (TEST_NAME): Likewise.
	* string/test-strncpy.c (TEST_NAME): Likewise.
	* string/test-strnlen.c (TEST_NAME): Likewise.
	* string/test-strpbrk.c (TEST_NAME): Likewise.
	* string/test-strrchr.c (TEST_NAME): Likewise.
	* string/test-strspn.c (TEST_NAME): Likewise.
	* string/test-strstr.c (TEST_NAME): Likewise.
	* string/test-bcopy-ifunc.c: New file.
	* string/test-bzero-ifunc.c: Likewise.
	* string/test-memccpy-ifunc.c: Likewise.
	* string/test-memchr-ifunc.c: Likewise.
	* string/test-memcmp-ifunc.c: Likewise.
	* string/test-memcpy-ifunc.c: Likewise.
	* string/test-memmem-ifunc.c: Likewise.
	* string/test-memmove-ifunc.c: Likewise.
	* string/test-mempcpy-ifunc.c: Likewise.
	* string/test-memset-ifunc.c: Likewise.
	* string/test-rawmemchr-ifunc.c: Likewise.
	* string/test-stpcpy-ifunc.c: Likewise.
	* string/test-stpncpy-ifunc.c: Likewise.
	* string/test-strcasecmp-ifunc.c: Likewise.
	* string/test-strcasestr-ifunc.c: Likewise.
	* string/test-strcat-ifunc.c: Likewise.
	* string/test-strchr-ifunc.c: Likewise.
	* string/test-strchrnul-ifunc.c: Likewise.
	* string/test-strcmp-ifunc.c: Likewise.
	* string/test-strcpy-ifunc.c: Likewise.
	* string/test-strcspn-ifunc.c: Likewise.
	* string/test-strlen-ifunc.c: Likewise.
	* string/test-strncasecmp-ifunc.c: Likewise.
	* string/test-strncat-ifunc.c: Likewise.
	* string/test-strncmp-ifunc.c: Likewise.
	* string/test-strncpy-ifunc.c: Likewise.
	* string/test-strnlen-ifunc.c: Likewise.
	* string/test-strpbrk-ifunc.c: Likewise.
	* string/test-strrchr-ifunc.c: Likewise.
	* string/test-strspn-ifunc.c: Likewise.
	* string/test-strstr-ifunc.c: Likewise.

	* debug/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* debug/test-stpcpy_chk.c (TEST_NAME): New macro.
	* debug/test-strcpy_chk.c (TEST_NAME): Likewise.
	* debug/test-stpcpy_chk-ifunc.c: New file.
	* debug/test-strcpy_chk-ifunc.c: Likewise.

2012-10-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13601]
	* elf/dl-load.c (open_verify): Retry read if the entire ELF
	header is not read in.

2012-10-19  Joseph Myers  <joseph@codesourcery.com>

	* io/Makefile ($(objpfx)ftwtest.out): Depend on ftwtest-sh.  Pass
	script to $(SHELL) as $<.  Pass $(common-objpfx) to script
	directly.  Pass built executable to script as
	$(built-program-cmd).
	* io/ftwtest-sh (ldso): Remove variable.  Run ftwtest directly as
	$testprogram without using LD_LIBRARY_PATH and $ldso.

	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Pass
	$(run-program-prefix) to tst_fgetgrent.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* grp/tst_fgetgrent.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use it to run tst_fgetgrent.
	* iconvdata/Makefile ($(objpfx)tst-tables.out): Pass
	$(run-program-prefix) to tst-tables.sh.
	* iconvdata/tst-table.sh (run_program_prefix): New variable.  Use
	it to run tst-table-from and tst-table-to.
	* iconvdata/tst-tables.sh (run_program_prefix): New variable.
	Pass it to tst-table.sh.
	* intl/Makefile ($(objpfx)tst-gettext.out): Pass
	$(run-program-prefix) to tst-gettext.sh.
	($(objpfx)tst-translit.out): Pass $(run-program-prefix) to
	tst-translit.sh.
	($(objpfx)tst-gettext2.out): Pass $(run-program-prefix) to
	tst-gettext2.sh.
	* intl/tst-gettext.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext.
	* intl/tst-gettext2.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext2.
	* intl/tst-translit.sh (run_program_prefix): New variable.  Use it
	to run tst-translit.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Pass
	$(run-program-prefix) to tst-mtrace.sh.
	* malloc/tst-mtrace.sh (run_program_prefix): New variable.  Use it
	to run tst-mtrace.
	* posix/Makefile ($(objpfx)wordexp-tst.out): Pass
	$(run-program-prefix) to wordexp-tst.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/wordexp-tst.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(run_program_prefix): New variable.  Use it to run wordexp-test.

	* Makeconfig (ARCH): Remove all definitions.
	(machine): Likewise.
	[ARCH]: Remove conditional code.
	[!objdir]: Give error.
	[!objdir] (objpfx): Remove.
	[!objdir] (common-objpfx): Likewise.
	[!objdir] (common-objdir): Likewise.
	* configure.in (config_makefile): Remove.  Hardcode Makefile in
	AC_CONFIG_FILES call.
	* configure: Regenerated.

	[BZ #13888]
	* io/ftwtest-sh (tmp): Set to use the working directory, not /tmp
	or TMPDIR.
	(testout): Likewise.

	* posix/Makefile ($(objpfx)tst-getconf.out): Pass
	$(built-program-cmd) to tst-getconf.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/tst-getconf.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likwise.
	(runit): Remove function.
	(run_getconf): New variable,  Use it for running getconf binary.

2012-10-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14716]
	* string/test-memmem.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.

2012-10-18  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* math/Makefile: Comment on slow compilation of test-tgmath2.c.

2012-10-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* libio/fileops.c (mmap_remap_check) [_G_MMAP64]: Make code
	unconditional.  Call __mmap64 directly.
	(mmap_remap_check) [!_G_MMAP64]: Remove conditional code.
	(mmap_remap_check) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(mmap_remap_check) [!_G_LSEEK64]: Remove conditional code.
	(decide_maybe_mmap) [_G_MMAP64]: Make code unconditional.  Call
	__mmap64 directly.
	(decide_maybe_mmap) [!_G_MMAP64]: Remove conditional code.
	(decide_maybe_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(decide_maybe_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_sync_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_sync_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_seek) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_seek) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_stat) [_G_FSTAT64]: Make code unconditional.  Call
	__fxstat64 directly.
	(_IO_file_stat) [!_G_FSTAT64]: Remove conditional code.
	* libio/freopen64.c (freopen64) [_G_OPEN64]: Make code
	unconditional.
	(freopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/fseeko64.c (fseeko64) [_G_LSEEK64]: Make code
	unconditional.
	(fseeko64) [!_G_LSEEK64]: Remove conditional code.
	* libio/ftello64.c (ftello64) [_G_LSEEK64]: Make code
	unconditional.
	(ftello64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofgetpos64.c (_IO_new_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofopen64.c (_IO_fopen64) [_G_OPEN64]: Make code
	unconditional.
	(_IO_fopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/iofsetpos64.c (_IO_new_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fsetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofgetpos64.c (_IO_old_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofsetpos64.c (_IO_old_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fsetpos64) [!_G_LSEEK64]: Remove conditional code.

2012-10-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12140]
	* manual/memory.texi (Malloc Tunable Parameters): Add note
	about free list pointers overwriting some perturb bytes.
	Wording suggested by Roland McGrath.

2012-10-17  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (gamma_test): Do not call feclearexcept.
	(lgamma_test): Likewise.
	(tgamma_test): Likewise.

2012-10-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #14700]
	* sysdeps/posix/opendir.c (MAX_DIR_BUFFER_SIZE): New constant.
	(__alloc_dir): Limit buffer to MAX_DIR_BUFFER_SIZE.

2012-10-16  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Mention BZ #14716.
	* string/str-two-way.h (two_way_short_needle): Fix thinko introduced
	when removing AVAILABLE1_USES_J macro.

2012-10-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): __uint64_t for unsigned 64-bit int.

2012-10-12  Andreas Schwab  <schwab@linux-m68k.org>

	* include/string.h (memmem): Declare libc hidden alias.
	* string/memmem.c (memmem): Define libc hidden alias.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Use __open,
	__read, __close instead of open, read, close.

2012-10-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/x86_64/multiarch/memcmp.S (__memcmp_sse2): Make it
	global and hidden.
	* sysdeps/x86_64/multiarch/memcpy.S (__memcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S (__rawmemchr_sse42):
	Likewise.
	(__rawmemchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcat.S (STRCAT_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strchr.S (__strchr_sse42): Likewise.
	(__strchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S (STRCMP_SSE42): Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S (STRCMP_SSE2): Likewise.
	(__strcasecmp_sse2): Likewise.
	(__strncasecmp_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S (STRCPY_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (__strlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S (__strnlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S (__strrchr_sse42): Likewise.
	(__strrchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S: Likewise.
	* sysdeps/x86_64/multiarch/stpcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/stpncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strncat.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.

	* sysdeps/i386/i686/multiarch/bcopy.S (__bcopy_ia32): Make it
	global and hidden.
	* sysdeps/i386/i686/multiarch/bzero.S (__bzero_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S (__memcmp_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S (__memcpy_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S (__memmove_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S (__mempcpy_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S (STRCAT_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S (__STRCMP_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S (STRCPY_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strpbrk.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strstr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: New file.

	* Rules [$(multi-arch) = no] (tests): Filter out $(tests-ifunc).
	[$(multi-arch) = no] (xtests): Filter out $(xtests-ifunc).
	* include/ifunc-impl-list.h: New file.
	* misc/ifunc-impl-list.c: Likewise.
	* misc/Makefile (routines): Add ifunc-impl-list.
	* misc/Versions (GLIBC_PRIVATE): Add __libc_ifunc_impl_list.
	* string/test-string.h: Include <ifunc-impl-list.h>.
	[TEST_IFUNC && TEST_NAME] (func_list, func_count, impl_count,
	impl_array): New variables.
	(FOR_EACH_IMPL): Support func_list if TEST_IFUNC and TEST_NAME
	are defined.
	(test_init): Call __libc_ifunc_impl_list to initialize
	func_list if TEST_IFUNC and TEST_NAME are defined.

	* string/Makefile (strop-tests): Add bcopy and bzero.
	* string/test-bcopy.c: New file.
	* string/test-bzero.c: Likewise.
	* string/test-memmove.c: Support bcopy test if TEST_BCOPY is
	defined.
	* string/test-memset.c: Support bzero test if TEST_BZERO is
	defined.
	* sysdeps/x86_64/multiarch/bcopy.S (bcopy): Jump to
	__libc_memmove.
	* sysdeps/x86_64/multiarch/bzero.S (__bzero): Jump to
	__libc_memset.
	* sysdeps/x86_64/multiarch/memset.S (__libc_memset): New alias
	of memset.

2012-10-10  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Run $CXX, not cc1plus, to locate C++ headers.
	* configure: Regenerated.

	* Makeconfig (+link-static-before-libc): Don't include
	$(link-static-libc).

	* libio/libio.h (_IO_pos_t): Remove.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* NEWS: Add note about FIPS mode.  Wording suggested by Roland
	McGrath.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-entry.c: Include fips-private.h.
	(__crypt_r, __crypt): Disable MD5 and DES if FIPS is enabled.
	* crypt/md5c-test.c (main): Tolerate disabled MD5.
	* sysdeps/unix/sysv/linux/fips-private.h: New file.
	* sysdeps/generic/fips-private.h: New file, dummy fallback.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-private.h: Include stdbool.h.
	(_ufc_setup_salt_r): Return bool.
	* crypt/crypt-entry.c: Include errno.h.
	(__crypt_r): Return NULL with EINVAL for bad salt.
	* crypt/crypt_util.c (bad_for_salt): New.
	(_ufc_setup_salt_r): Check that salt is long enough and within
	the specified alphabet.
	* crypt/badsalttest.c: New file.
	* crypt/Makefile (tests): Add it.
	($(objpfx)badsalttest): New.

2012-10-09  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Add entry for BZ #14602.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle comparison macros as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(isgreater_test): New function.
	(isgreaterequal_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isunordered_test): Likewise.
	(main): Call the new functions.

2012-10-09  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_PROVIDES): Provide _AS_BASENAME_PREPARE,
	_AS_ME_PREPARE, _AS_VAR_ARITH_PREPARE, AS_SHELL_FN_as_fn_set_status,
	AS_SHELL_FN_as_fn_exit, AS_SHELL_FN_ac_fn_c_try_compile.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/ieee754/ldbl-opt/configure: Regenerated.
	* sysdeps/mach/configure: Regenerated.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/powerpc/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

	* dlfcn/dlerror.c (check_free): Call _dl_addr only if SHARED is
	defined.  Don't check if MAP is NULL.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Use struct stat64
	instead of struct _G_stat64.
	* libio/fileops.c (mmap_remap_check): Likewise.
	(decide_maybe_mmap): Likewise.
	(_IO_new_file_seekoff): Likewise.
	(_IO_file_stat): Likewise.
	* libio/libio.h (_IO_off64_t): Define to __off64_t, not
	_G_off64_t.
	* libio/oldfileops.c (_IO_old_file_seekoff): Use struct stat64
	instead of struct _G_stat64.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-10-08  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #14602]
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with ...
	(CHECK_EOL): New macro.
	(two_way_short_needle): Check beginning of haystack for EOL.  Use
	CHECK_EOL.
	* string/strcasestr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.
	* string/strstr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.

2012-10-08  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle isinf and isnan as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(finite_test): New function.
	(isinf_test): Likewise.
	(isnan_test): Likewise.
	(fpclassify_test): Test subnormal input.
	(isfinite_test): Likewise.
	(isnormal_test): Likewise.
	(main): Call the new functions.

2012-10-08  Jonathan Nieder  <jrnieder@gmail.com>

	[BZ #14660]
	* Makerules (%.dynsym): Force C locale when running
	$(OBJDUMP) --dynamic-syms.

2012-10-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Include
	<stdint.h>.

2012-10-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: On 32-bit, clear
	upper 32-bits of the length value in %o2 since we use branch-on-register
	tests which consider the entire 64-bit register.

2012-10-06  H.J. Lu  <hongjiu.lu@intel.com>

	* string/test-strstr.c (check2): Add a test for page boundary.

2012-10-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memset-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memset-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Use Niagara-4 memset
	and bzero when HWCAP_SPARC_CRYPTO is present.

2012-10-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14602]
	* string/test-strstr.c (check2): New function.
	(test_main): Call check2.

	* string/Makefile (tests): Remove bug-strstr1, bug-strcasestr1
	and bug-strchr1.
	* string/bug-strcasestr1.c (do_test): Moved to ...
	* string/test-strcasestr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strchr1.c (do_test): Moved to ...
	* string/test-strchr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strstr1.c (main): Moved to ...
	* string/test-strchr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strcasestr1.c: Removed.
	* string/bug-strchr1.c: Likewise.
	* string/bug-strstr1.c: Likewise.

	* elf/Makefile (dl-routines): Add hwcaps.
	* elf/dl-support.c (_dl_important_hwcaps): Removed.
	* elf/dl-sysdep.c (_DL_FIRST_EXTRA): Likewise.
	(_dl_important_hwcaps): Moved to ...
	* elf/dl-hwcaps.c: Here.  New file.
	* sysdeps/mach/hurd/dl-sysdep.c (_dl_important_hwcaps): Removed.

	[BZ #14557]
	* elf/setup-vdso.h (setup_vdso): Set GL(dl_nns) to 1 for vDSO
	if IS_IN_rtld isn't defined.

	* elf/dl-support.c (_dl_sysinfo_map): New.
	Include "get-dynamic-info.h" and "setup-vdso.h".
	(_dl_non_dynamic_init): Call setup_vdso.
	* elf/dynamic-link.h: Don't include <assert.h>.
	(elf_get_dynamic_info): Moved to ...
	* elf/get-dynamic-info.h: Here.  New file.
	* elf/dynamic-link.h: Include "get-dynamic-info.h".
	* elf/rtld.c (dl_main): Break out vDSO setup code into ...
	* elf/setup-vdso.h: Here.  New file.
	* elf/rtld.c: Include "setup-vdso.h".
	(dl_main): Call setup_vdso.

2012-10-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: List nexttoward, cimag, clog10, conf and
	creal in comment listing functions tested.  List finite, isinf,
	isnan, isless, islessequal, isgreater, isgreaterequal,
	islessgreater, isunordered, lgamma_r and pow10 as functions and
	macros not tested.  Mention which functions not tested are aliases
	for other functions.  Fix typo.  Note that signs of NaNs are not
	tested.

	* scripts/config.guess: Update from config.git.
	* scripts/config.sub: Likewise.

2012-10-04  Roland McGrath  <roland@hack.frob.com>

	* misc/Versions (GLIBC_PRIVATE): New set, add __madvise.
	* misc/madvise.c (madvise): Renamed to __madvise.
	Make madvise a weak alias.
	* include/sys/mman.h: Declare __madvise.
	Replace libc_hidden_proto (madvise) with libc_hidden_proto (__madvise).
	* sysdeps/unix/syscalls.list
	(madvise): Make __madvise the strong name, and madvise a weak alias.
	* sysdeps/unix/sysv/linux/syscalls.list
	(madvise, mmap): Remove redundant entries.
	* malloc/arena.c (shrink_heap): Use __madvise, not madvise.
	* malloc/malloc.c (mtrim): Likewise.
	* sysdeps/mach/hurd/malloc-machine.h (madvise): Renamed to __madvise.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/dl-cache.c: File removed.
	* config.h.in (USE_LDCONFIG): New #undef.
	* configure.in (use_ldconfig): If set, define USE_LDCONFIG.
	* configure: Regenerated.
	* elf/Makefile (dl-routines): Add dl-cache only under
	[$(use-ldconfig) = yes].
	* elf/dl-load.c (_dl_map_object): Conditionalize code consulting the
	cache on [USE_LDCONFIG].
	* elf/dl-open.c (_dl_open): Call _dl_unload_cache only under
	[USE_LDCONFIG].
	* elf/rtld.c (dl_main): Likewise.

2012-10-03  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/posix/sysconf.c (__sysconf): Return 0 also for
	_SC_LEVEL4_CACHE_LINESIZE.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/bsd/confstr.h: File removed.

2012-10-02  Alexandre Oliva <aoliva@redhat.com>

	* scripts/check-local-headers.sh: Exclude sys/sdt.h and
	sys/sdt-config.h.

2012-10-02  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd: struct loadcmd):
	Make 'mapoff' field ElfW(Off) rather than off_t.

2012-10-02  Dmitry V. Levin  <ldv@altlinux.org>

	* nscd/Makefile: Remove nscd-cflags and all its users.
	(CPPFLAGS-nonlib): Add preprocessor flags for nscd modules.
	(CFLAGS-nonlib): Add compiler flags for nscd modules.

	[BZ #10631]
	* malloc.c (malloc_printerr): Clarify error message.

2012-10-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14648]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_FMA_Usable if FMA is supported.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_FMA_Usable): New
	macro.
	(bit_FMA4_Usable): Updated.
	(index_FMA_Usable): New macro.
	(CPUID_FMA): Likewise
	(HAS_FMA): Defined with bit_FMA_Usable.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* bits/types.h (__swblk_t): Type removed.
	* bits/typesizes.h (__SWBLK_T_TYPE): Macro removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.

2012-10-01  Patsy Franklin <pfrankli@redhat.com>
	    Honza Horak <hhorak@redhat.com>

	* nis/yp_xdr.c (xdr_domainname): Use YPMAXDOMAIN as maxsize.
	(xdr_mapname): Use YPMAXMAP as maxsize.
	(xdr_peername): Use YPMAXPEER as maxsize.
	(xdr_keydat): Use YPAXRECORD as maxsize.
	(xdr_valdat): Use YPMAXRECORD as maxsize.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* io/openat.c [!__ASSUME_ATFCTS] (__have_atfcts): New global variable.

	* sysdeps/unix/sysv/linux/init-first.c: Moved to ...
	* csu/init-first.c: ... here.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Update #include.
	* sysdeps/unix/sysv/linux/s390/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: Likewise.
	* sysdeps/i386/init-first.c: File removed.
	* sysdeps/sh/init-first.c: File removed.

2012-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14645]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute result as x * y
	if x * y might underflow to zero and z is zero.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (min_subnorm_value): New variable.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise
	(fma_test_upward): Likewise.
	(initialize): Set min_subnorm_value.

2012-09-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14638]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use x * y + z for exact
	0 + 0.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Use original rounding
	mode for addition resulting in exact zero.
	* sysdeps/ieee754/ldbl-128/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Use x * y + z for
	exact 0 + 0.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): New function.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(main): Call the new functions.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Fix garbage in file.

2012-09-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/sleep.c (__sleep): Rewritten using __nanosleep
	instead of SIGALRM.

	* sysdeps/gnu/_G_config.h: Moved to ...
	* sysdeps/unix/sysv/linux/_G_config.h: ... here.
	* sysdeps/mach/hurd/_G_config.h: Moved to ...
	* sysdeps/generic/_G_config.h: ... here.

	* io/open.c (__open): Renamed to __libc_open.  Make __open an alias.

	* posix/Makefile ($(objpfx)config-name.h): Do $(make-target-directory).

	* nss/Makefile ($(objpfx)/libnss_test1.so$(libnss_test1.so-version)):
	Conditionalize target on [libnss_test1.so-version].

	* elf/dl-sysdep.c: Conditionalize whole contents on [SHARED].

	* Makeconfig (nssobjdir, resolvobjdir): Remove variables.
	(elfobjdir): Move out of conditionals.

	* nss/nsswitch.c (nss_new_service): Conditionalize definition and
	declaration on [!DO_STATIC_NSS || SHARED], matching its only caller.
	(__nss_lookup_function): Conditionalize label remove_from_tree on
	[!DO_STATIC_NSS || SHARED], matching its only use.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memcpy-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use Niagara-4 memcpy
	when HWCAP_SPARC_CRYPTO is present.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* io/tst-mknodat.c: Create a FIFO instead of a socket.

2012-09-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #6530]
	* stdio-common/vfprintf.c (process_string_arg): Revert
	2000-07-22 change.

2011-09-28  Jonathan Nieder  <jrnieder@gmail.com>

	* stdio-common/Makefile (tst-sprintf-ENV): Set environment
	for testcase.
	* stdio-common/tst-sprintf.c: Include <locale.h>
	(main): Test sprintf's handling of incomplete multibyte
	characters.

2012-09-28  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-runtime.c (VERSYMIDX): Removed.
	* elf/dl-version.c (VERSYMIDX): Likewise.
	* elf/do-rel.h (VERSYMIDX): Likewise.
	(VALIDX): Likewise.
	* elf/dynamic-link.h (VERSYMIDX): Likewise.
	* elf/rtld.c (VALIDX): Likewise.
	(ADDRIDX): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (VALIDX): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (VALIDX): Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h (ADDRIDX): Likewise.
	* sysdeps/generic/ldsodefs.h (VERSYMIDX): New macro.
	(VALIDX): Likewise.
	(ADDRIDX): Likewise.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/pthread/aio_fsync.c: Fix the file mode checking.

2012-09-28  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #11438]
	* sysdeps/posix/getaddrinfo.c (default_scopes): Map RFC 1918 addresses
	to global scope.
	* posix/tst-rfc3484.c: Verify 10/8, 172.16/12 and 196.128/16
	addresses are in the same scope as 192.0.2/24.
	* posix/gai.conf: Document new scope table defaults.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #5298]
	* libio/fileops.c (_IO_new_file_seekoff): Don't flush buffer
	for ftell.  Compute offsets from write pointers instead.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14543]
	* libio/Makefile (tests): New test case tst-fseek.
	* libio/tst-fseek.c: New test case to verify that fseek/ftell
	combination works in wide mode.
	* libio/wfileops.c (_IO_wfile_seekoff): Adjust internal buffer
	state when the external buffer state changes.

2012-09-27  David S. Miller  <davem@davemloft.net>

	[BZ #14376]
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Do not
	pass reloc->r_addend in as the 'high' argument to
	sparc64_fixup_plt when handling R_SPARC_JMP_IREL relocations.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* rt/tst-aio2.c: Include <pthread.h>.
	* rt/tst-aio3.c: Likewise.

2012-09-27  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/ieee754/ldbl-128/bits/huge_vall.h: Remove.

2012-09-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strncmp-ssse3.S: Conditionalize
	contents on [SHARED].

2012-09-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14530]
	[BZ #13741]
	* misc/sys/cdefs.h: Define __extern_inline and __extern_always_inline
	for C++ and GCC <4.3 as well as for non GCC compilers.

2012-09-26  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-09-25  Roland McGrath  <roland@hack.frob.com>

	* Makefile.in (all, install): Declare with .PHONY.
	Reported by Michael Hope <michael.hope@linaro.org>.

2012-09-25  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* manual/platform.texi (PowerPC): Document __ppc_get_timebase_freq.
	* sysdeps/powerpc/sys/platform/ppc.h: Include the operating
	system header.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_headers):
	Likewise.
	(sydep_routines): Add the new and the internal functions.
	* sysdeps/unix/sysv/linux/powerpc/bits/ppc.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Versions
	(GLIBC_2.17): Add the new function.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c: New file.

2012-09-25  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/pthread_once.c (__pthread_once):
	Add release barrier before setting once_control to say
	initialisation is done.  Add hints on lwarx.  Use macro in
	place of isync.
	(clear_once_control): Add release barrier.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Handle more values close to |z| = 1
	specially.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/Makefile (libm-calls): Add x2y2m1.
	* sysdeps/generic/math_private.h (__x2y2m1f): Declare.
	(__x2y2m1): Likewise.
	(__x2y2m1l): Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c: New file.
	* sysdeps/ieee754/dbl-64/x2y2m1f.c: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1l.c: Likewise.
	* math/libm-test.inc (clog_test, clog10_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14621]
	* posix/glob.c (next_brace_sub): Use size_t instead of unsigned
	int as type of variable DEPTH.
	(glob): Use size_t instead of int as type of variables NEWCOUNT
	and OLD_PATHC.

2012-09-25  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sincosf-sse2.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf-sse2.S: New file.
	* sysdeps/ieee754/flt-32/s_sincosf.c (SINCOSF, SINCOSF_FUNC): Add
	macros for using routine as __sincosf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* sysdeps/x86_64/fpu/s_sincosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/s_ccoshf.c (__ccoshf): Fix wrong usage of sincos for
	subnormal argument.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ccosh.c (__ccoshf): Likewise.
	* math/s_cexp.c (__cexpl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanh.c (ctanh): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h (_IO_size_t): Define to size_t, not _G_size_t.
	(_IO_ssize_t): Define to __ssize_t, not _G_ssize_t.
	(_IO_off_t): Define to __off_t, not _G_off_t.
	(_IO_pid_t): Define to __pid_t, not _G_pid_t.
	(_IO_uid_t): Define to __uid_t, not _G_uid_t.
	(_IO_wint_t): Define to wint_t, not _G_wint_t.
	* libio/libioP.h (struct _IO_jump_t): Use size_t not _G_size_t as
	type of __dummy and __dummy2 fields.
	* sysdeps/generic/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/gnu/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c: Include malloc-sysdep.h.
	(shrink_heap): Use check_may_shrink_heap to decide if madvise
	is sufficient to shrink the heap or an unmap is needed.
	* sysdeps/generic/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.
	* sysdeps/unix/sysv/linux/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c (_IO_new_file_seekoff): Fix typos in
	comments.

2012-09-24  Dmitry V. Levin  <ldv@altlinux.org>

	* catgets/test-gencat.sh: Add "set -e".
	* elf/tst-pathopt.sh: Likewise.
	* grp/tst_fgetgrent.sh: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.
	* intl/tst-gettext.sh: Likewise.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/ftwtest-sh: Likewise.
	* libio/test-freopen.sh: Likewise.
	* malloc/tst-mtrace.sh: Likewise.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* stdio-common/tst-printf.sh: Likewise.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/tst-fmtmsg.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.
	* catgets/Makefile: Do not specify -e option when running
	testsuite shell scripts.
	* elf/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* io/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* sysdeps/x86_64/Makefile: Likewise.

	* io/ftwtest-sh: Add copyright header.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.

2012-09-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13679]
	* Makeconfig (+link): Defined as $(+link-static) if
	$(build-shared) isn't yes.
	(link-tests): Defined as $(+link-static-tests) if $(build-shared)
	isn't yes.
	(static-gnulib): Add -lgcc_eh if $(build-shared) isn't yes.

	* Makeconfig (+postctorT): Replace crtendS.o with crtend.o.

	[BZ #14562]
	* malloc/arena.c (heap_trim): Properly get fencepost and adjust
	new chunk size with MALLOC_ALIGN_MASK.

2012-09-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fphex.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(__printf_fphex): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c (struct hex_test): New
	structure.
	(hex_tests): New variable.
	(test_hex_in_one_mode): New function.
	(do_test): Also run tests for hex float output.

2012-09-21  Joseph Myers  <joseph@codesourcery.com>

	* libio/iopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* libio/libio.h (_IO_HAVE_SYS_WAIT): Remove.
	* libio/oldiopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* sysdeps/generic/_G_config.h (_G_HAVE_SYS_WAIT): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.

2012-09-20  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [_G_NEED_STDARG_H]: Make code unconditional.
	* sysdeps/generic/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/gnu/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_NEED_STDARG_H): Remove.

2012-09-19  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #14579]
	* elf/rtld.c (dl_main): Limit the check for self loading to normal
	mode only.
	* elf/tst-rtld-load-self.sh: New test.
	* elf/Makefile: Run it.

2012-09-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/wordsize-64/Makefile [$(subdir) = misc]
	(tst-writev-ENV): Remove.
	* sysdeps/wordsize-64/tst-writev.c (TIMEOUT): Define.

2012-09-17  Chris Metcalf  <cmetcalf@tilera.com>

	* crypt/md5test-giant.c (TIMEOUT): Increase to 8 minutes for tilegx.

2012-09-17  Joseph Myers  <joseph@codesourcery.com>

	* libio/iogetline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]: Make code
	unconditional.
	* libio/iogetwline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]:
	Likewise.
	* sysdeps/generic/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_IO_GETLINE_INFO):
	Likewise.

2012-09-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14587]
	* Makeconfig (ASFLAGS): Remove $(have-cpp-asm-debuginfo) check.
	* config.make.in (have-cpp-asm-debuginfo): Removed.
	* configure.in: Don't substitute libc_cv_cpp_asm_debuginfo.
	* configure: Regenerated.

2012-09-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fp.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(___printf_fp): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c: New file.
	* stdio-common/Makefile (tests): Add tst-printf-round.
	(link-libm): New variable.
	($(objpfx)tst-printf-round): Depend in $(link-libm).

2012-09-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14576]
	* bits/libc-lock.h (__rtld_lock_init_recursive): Removed.
	* sysdeps/mach/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.

2012-09-13  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [!_G_HAVE_PRINTF_FP] (_IO_USE_DTOA): Remove.
	* sysdeps/generic/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/gnu/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.

2012-09-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14518]
	* include/rounding-mode.h: New file.
	* sysdeps/generic/get-rounding-mode.h: Likewise.
	* sysdeps/s390/fpu/get-rounding-mode.h: Likewise.
	* stdlib/strtod_l.c: Include <rounding-mode.h>.
	(MAX_VALUE): New macro.
	(MIN_VALUE): Likewise.
	(overflow_value): New function.
	(underflow_value): Likewise.
	(round_and_return): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.  Use
	round_away to determine rounding depending on rounding mode.
	(____STRTOF_INTERNAL): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.
	* stdlib/tst-strtod-round.c: Include <fenv.h>.
	(struct test_results): New structure.
	(struct test): Use struct test_results to store expected results
	for all rounding modes.
	(TEST): Include expected results for all rounding modes.
	(test_in_one_mode): New function.
	(do_test): Use test_in_one_mode to compute and check results.
	Check results for all rounding modes.
	* stdlib/Makefile ($(objpfx)tst-strtod-round): Depend on
	$(link-libm).

2012-12-09  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update

2012-09-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/gnu/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.

2012-09-11  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c: Update copyright years.

2012-09-10  Joseph Myers  <joseph@codesourcery.com>

	* libioP.h [_G_USING_THUNKS]: Make code unconditional.
	[!_G_USING_THUNKS]: Remove conditional code.
	* sysdeps/gnu/_G_config.h (_G_USING_THUNKS): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_USING_THUNKS): Likewise.

	* libio/libioP.h [__GNUC__] (VTABLE_LABEL): Remove.
	[!builtinbuf_vtable && __cplusplus] (builtinbuf_vtable): Likewise.
	* sysdeps/generic/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	* sysdeps/gnu/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.

2012-09-10  H.J. Lu  <hongjiu.lu@intel.com>

	* libio/Makefile: Include ../Makeconfig before tests.
	(tests): Add tst-fopenloc and depend on $(objpfx)tst-fopenloc.check
	only if $(build-shared) is yes.

	* iconv/gconv_db.c: Update copyright years.

2012-09-10  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: Fix
	unwind info if defined PIC. Fix special cases description.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: Likewise.

	* sysdeps/x86_64/fpu/s_sinf.S: Fix special cases description, fix
	DP_HI_MASK entry.
	* sysdeps/x86_64/fpu/s_cosf.S: Likewise.

2012-09-07  H.J. Lu  <hongjiu.lu@intel.com>

	* scripts/check-local-headers.sh: Add "shopt -s nullglob".

	* iconv/gconv_db.c (free_derivation): Check if deriv->steps
	is NULL.

	* debug/Makefile (LDFLAGS-tst-chk4): Renamed to ...
	(LDLIBS-tst-chk4): This.
	(LDFLAGS-tst-chk5): Renamed to ...
	(LDLIBS-tst-chk5): This.
	(LDFLAGS-tst-chk6): Renamed to ...
	(LDLIBS-tst-chk6): This.
	(LDFLAGS-tst-lfschk4): Renamed to ...
	(LDLIBS-tst-lfschk4): This.
	(LDFLAGS-tst-lfschk5): Renamed to ...
	(LDLIBS-tst-lfschk5): This.
	(LDFLAGS-tst-lfschk6): Renamed to ...
	(LDLIBS-tst-lfschk6): This.

	* Makefile ($(inst_includedir)/gnu/stubs.h): Remove dependency
	on $(common-objpfx)soversions.mk.

2012-09-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/examples/inetcli.c (SERVERHOST): Use www.gnu.org as
	example host name.

2012-09-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c (arena_get_retry): New function that gets
	another arena for the caller to try its request on.
	* malloc/malloc.c (__libc_malloc): Use get_another_arena if the
	current arena cannot fulfill the request.
	(__libc_memalign): Likewise.
	(__libc_memalign): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.

2012-09-05  John Tobey  <john.tobey@gmail.com>

	[BZ #13542]
	* manual/arith.texi (Operations on Complex): Fix description
	of carg branch cut.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/socket.texi (Host Addresses): Use www.gnu.org as example
	host name.

	[BZ #10038]
	* manual/memory.texi (Memory): Make order of menu items match
	order of sections.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tls.c (DL_INITIAL_DTV): Removed.
	(_dl_initial_dtv): New.  Defined if SHARED isn't defined.
	(_dl_deallocate_tls): Restore GL(dl_initial_dtv).

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c (static_dtv): Renamed to ...
	(_dl_static_dtv): This.  Make it global.
	(_dl_initial_dtv): Removed.
	(__libc_setup_tls): Updated.
	* elf/dl-tls.c (DL_INITIAL_DTV): New macro.
	(_dl_deallocate_tls): Replace GL(dl_initial_dtv) with
	DL_INITIAL_DTV.

2012-09-06  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (NT_S390_HIGH_GPRS): New macro.
	(NT_S390_TIMER, NT_S390_TODCMP, NT_S390_TODPREG): Likewise.
	(NT_S390_CTRS, NT_S390_PREFIX, NT_S390_LAST_BREAK): Likewise.
	(NT_S390_SYSTEM_CALL, NT_ARM_VFP): Likewise.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14545]
	* csu/libc-tls.c (_dl_initial_dtv): New variable.
	* elf/dl-tls.c (_dl_deallocate_tls): Always check dtv before
	freeing dtv[-1].

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14544]
	* Makeconfig (link-static-before-libc): Replace $(+prector)
	with $(+prectorT).
	(link-static-after-libc): Replace $(+postctor) with
	$(+postctorT).
	(link-bounded): Replace $(+prector)/$(+postctor) with
	$(+prectorT)/$(+postctorT).
	(+prectorT): New macro.
	(+postctorT): Likewise.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/gen-tst-strtod-round.c: Include <assert.h>.
	(round_str): Handle values above the maximum for IBM long double
	as inexact.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2012-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/Makefile: Remove -mzarch
	assembler flag.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Use .machinemode
	zarch_nohighgprs around the zarch optimized routines.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Explicitly check
	for zarch.

2012-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/bits/hwcap.h (HWCAP_SPARC_PAUSE,
	HWCAP_SPARC_CBCOND, HWCAP_SPARC_CRYPTO): Define.
	* sysdeps/sparc/dl-procinfo.h (_DL_HWCAP_COUNT): Increase to 27.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/arena.c: Fold copyright years.
	* malloc/mcheck.c, malloc/memusage.c: Likewise.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_MAX>: Fix indentation.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* manual/contrib.texi (Contributors): Fix typo.  Complete entry.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_THRESHOLD>: Do not
	change internal state upon failure.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/mcheck.c (mcheck_check_all): Fix typo.
	* malloc/memusage.c (mmap): Likewise.
	(mmap64, mremap): Likewise.  Adjust name in comment.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c: Fix typos in comments.
	* libio/oldfileops.c: Likewise.
	* libio/wfileops.c: Likewise.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #1349]
	* malloc/Makefile (tests): Add tst-malloc-usable test case.
	(tst-malloc-usable-ENV): Set environment for test case.
	* malloc/hooks.c (malloc_check_get_size): New function to get
	requested size.
	* malloc/malloc.c (musable): Use malloc_check_get_size.
	* malloc/tst-malloc-usable.c: New test case.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/tst-strtod-overflow.c (TIMEOUT): Define.

2012-09-05  Allan McRae  <allan@archlinux.org>

	[BZ #13966]
	* configure.in (CXX_SYSINCLUDES): Use compiler output to
	determine header location.
	* configure: Regenerated.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/gen-tst-strtod-round.c (formats): Add Motorola extended
	float format.
	* stdlib/tst-strtod-round.c (TEST) [LDBL_MANT_DIG == 64 &&
	LDBL_MAX_EXP == 16384]: Add case for Motorola extended float
	format.
	(test): Regenerate.

2012-09-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: New file.

2012-09-04  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c (alternative_main): Only warn on SGID
	failures.

	* stdlib/tst-secure-getenv.c: Fix whitespace in comments.

2012-09-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9914]
	* libio/iogetdelim.c: Include <limits.h>.
	(_IO_getdelim): Avoid integer overflow in testing whether cur_len
	+ len + 1 would overflow.

2012-09-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-09-03  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sinf-sse2, s_conf-sse2.

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sinf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf.c: New file.

	* sysdeps/ieee754/flt-32/s_sinf.c (SINF, SINF_FUNC): Add macros
	for using routine as __sinf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/ieee754/flt-32/s_cosf.c (COSF, COSF_FUNC): Add macros
	for using routine as __cosf_ia32.
	Use macro for function declaration and weak_alias.

	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Fix Copyright.
	* sysdeps/i386/i686/fpu/multiarch/e_expf.c: Fix Copyright.

	* sysdeps/x86_64/fpu/s_sinf.S: New file.
	* sysdeps/x86_64/fpu/s_cosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-09-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Make pointers to the specialized implementations
	hidden.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.

2012-09-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14538]
	* sysdeps/x86_64/dl-machine.h (elf_machine_dynamic): Use the
	first element of the GOT.
	(elf_machine_load_address): Return the difference between
	the runtime address of _DYNAMIC and elf_machine_dynamic ().

2012-09-01  Allan McRae  <allan@archlinux.org>

	[BZ #13412]
	* configure.in (AWK): Require gawk version 3.0 or later.
	* configure: Regenerated.

2012-09-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[__NR_clock_getres]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remoce conditional code.
	(clock_getcpuclockid): Remove code left unreachable by removal of
	conditionals.
	* sysdeps/unix/sysv/linux/clock_getres.c [__NR_clock_getres]: Make
	code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__NR_clock_gettime]:
	Make code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]: Remove
	conditional code.
	[__ASSUME_POSIX_CPU_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.

2012-08-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14476]
	* Makefile (install): Also pass LD_SO=$(ld.so-version) to
	scripts/test-installation.pl.

	* scripts/test-installation.pl: Use LD_SO to get $ld_so_name
	and $ld_so_version if it is set.

2012-08-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14516]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Don't return
	failure if reading from procfs failed.
	* sysdeps/unix/sysv/linux/ttyname_r.c (ttyname_r): Likewise.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STAT64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/fxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/fxstatat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/xstat.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/lxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstat.c: Do not include
	<kernel-features.h>.
	[__NR_stat64 && !__ASSUME_STAT64_SYSCALL] (__have_no_stat64):
	Remove.
	* sysdeps/unix/sysv/linux/xstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/xstatconv.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional.

2012-08-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #5400]
	* NEWS: Add fixed bug number.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14519]
	* stdlib/strtod_l.c (round_and_return): Return -0.0 for
	underflowing exponent in case of negative sign.
	* stdlib/tst-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

	[BZ #3479]
	* stdlib/strtod_l.c (NDIG): Remove.
	(HEXNDIG): Likewise.
	(MPNSIZE): Increase to represent 10^n where 2^-n is 1/4 ulp of the
	smallest representable value.
	(____STRTOF_INTERNAL): Use all fractional decimal digits that may
	lie within an exact representation of 1/2 ulp of the result.
	* stdlib/fpioconst.c (__tens): Include 10^2^9 and 10^2^10
	unconditionally.
	(TENS_P9_IDX): Define unconditionally.
	(TENS_P9_SIZE): Likewise.
	(TENS_P10_IDX): Likewise.
	(TENS_P10_SIZE): Likewise.
	[BITS_PER_MP_LIMB == 32]: Change condition for larger powers of 10
	to !defined __NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024] (__tens): Add
	entries for 10^2^13 and 10^2^14.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024]
	(TENS_P13_IDX): Define.
	(TENS_P13_SIZE): Likewise.
	(TENS_P14_IDX): Likewise.
	(TENS_P14_SIZE): Likewise.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.  Make entries for 10^2^9 and 10^2^10
	unconditional.
	(_fpioconst_pow10) [!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ >
	1024]: Add entries for 10^2^13 and 10^2^14.
	[LAST_POW10 > _LAST_POW10]: Remove #error.
	* stdlib/fpioconst.h (FPIOCONST_POW10_ARRAY_SIZE): Define.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.
	* stdlib/gen-fpioconst.c: New file.
	* stdlib/gen-tst-strtod-round.c: Likewise.
	* stdlib/tst-strtod-round-data: Likewise.
	* stdlib/tst-strtod-round.c: Likewise.
	* stdlib/Makefile (tests): Add tst-strtod-round.

	[BZ #14459]
	* stdlib/strtod_l.c: Include <stdint.h>.
	(NDEBUG): Do not define.
	(round_and_return): Change EXPONENT parameter to type intmax_t.
	Rearrange calculations to avoid internal overflow possibilities.
	(str_to_mpn): Change EXPONENT parameter to type intmax_t *.
	Rearrange calculations to avoid internal overflow possibilities.
	Assert that number fits inside MPNSIZE limbs.
	(____STRTOF_INTERNAL): Change EXPONENT variable to type intmax_t.
	Change DIG_NO, INT_NO and LEAD_ZERO to type size_t.  Rearrange
	calculations and add assertions to avoid internal overflow
	possibilities.  Add casts to avoid signed/unsigned operations.
	* stdlib/tst-strtod-overflow.c: New file.
	* stdlib/Makefile (tests): Add tst-strtod-overflow.

2012-08-25  Marek Polacek  <polacek@redhat.com>

	* time/time.h: Fix some typos in comments.

2012-08-23  Roland McGrath  <roland@hack.frob.com>

	* posix/tst-rfc3484.c: #undef USE_NSCD before including getaddrinfo.c.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

2012-08-23  Steve McIntyre  <steve.mcintyre@linaro.org>

	* elf/elf.h (EF_ARM_ABI_FLOAT_SOFT): New macro.
	(EF_ARM_ABI_FLOAT_HARD): Likewise.

2012-08-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/dl-fxstatat64.c: Use <> instead of "" in
	#include of fxstatat64.c.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* shadow/getspent.c: #undef USE_NSCD before #include that gets the code.
	* shadow/getspent_r.c: Likewise.
	* shadow/getspnam.c: Likewise.
	* shadow/getspnam_r.c: Likewise.
	* gshadow/getsgent.c: Likewise.
	* gshadow/getsgent_r.c: Likewise.
	* gshadow/getsgnam.c: Likewise.
	* gshadow/getsgnam_r.c: Likewise.
	* inet/getnetbyad.c: Likewise.
	* inet/getnetbyad_r.c: Likewise.
	* inet/getnetbynm.c: Likewise.
	* inet/getnetbynm_r.c: Likewise.
	* inet/getnetent.c: Likewise.
	* inet/getnetent_r.c: Likewise.
	* inet/getproto.c: Likewise.
	* inet/getproto_r.c: Likewise.
	* inet/getprtent.c: Likewise.
	* inet/getprtent_r.c: Likewise.
	* inet/getprtname.c: Likewise.
	* inet/getprtname_r.c: Likewise.
	* inet/getrpcbyname.c: Likewise.
	* inet/getrpcbyname_r.c: Likewise.
	* inet/getrpcbynumber.c: Likewise.
	* inet/getrpcbynumber_r.c: Likewise.
	* inet/getrpcent.c: Likewise.
	* inet/getrpcent_r.c: Likewise.
	* inet/getaliasent.c: Likewise.
	* inet/getaliasent_r.c: Likewise.
	* inet/getaliasname.c: Likewise.
	* inet/getaliasname_r.c: Likewise.
	* nscd/getgrgid_r.c: Likewise.
	* nscd/getgrnam_r.c: Likewise.
	* nscd/gethstbyad_r.c: Likewise.
	* nscd/gethstbynm3_r.c: Likewise.
	* nscd/getpwnam_r.c: Likewise.
	* nscd/getpwuid_r.c: Likewise.
	* nscd/getsrvbynm_r.c: Likewise.
	* nscd/getsrvbypt_r.c: Likewise.
	* nscd/gai.c: Likewise.

	* configure.in (build_nscd): New substituted variable, set
	by --disable-build-nscd and defaults to $use_nscd.
	* configure: Regenerated.
	* config.make.in (build-nscd): New substituted variable.
	* nscd/Makefile (others, others-pie, install-sbin, extra-objs):
	Change conditional to require [$(build-nscd) = yes] as well.
	* NEWS: Mention --disable-build-nscd in the --disable-nscd item.

	[BZ# 13696]
	* configure.in (use_nscd): New substituted variable, set by
	--disable-nscd.  If enabled, define USE_NSCD.
	* configure: Regenerated.
	* config.h.in: Add USE_NSCD.
	* config.make.in (use-nscd): New substituted variable.
	* inet/Makefile (CFLAGS-gethstbyad_r.c): Likewise.
	(CFLAGS-gethstbynm_r.c, CFLAGS-gethstbynm2_r.c): Likewise.
	(CFLAGS-getsrvbynm_r.c, CFLAGS-getsrvbypt_r.c): Variables removed.
	* grp/Makefile (CFLAGS-getgrgid_r.c): Remove -DUSE_NSCD.
	(CFLAGS-getgrnam_r.c): Likewise.
	(CFLAGS-initgroups.c): Likewise.
	* posix/Makefile (CFLAGS-getaddrinfo.c): Remove -DUSE_NSCD.
	* pwd/Makefile (CFLAGS-getpwuid_r.c, CFLAGS-getpwnam_r.c):
	Variables removed.
	* inet/getnetgrent_r.c
	(nscd_setnetgrent): New function, broken out of ...
	(setnetgrent): ... here.  Call it.
	(innetgr): Conditionalize nscd bits on [USE_NSCD].
	(nscd_getnetgrent): Conditionalize on [USE_NSCD].
	(__internal_getnetgrent_r): Conditionalize its use on [USE_NSCD].
	* nscd/Makefile (routines, aux): Move definitions after include of
	Makeconfig.  Conditionalize on [$(use-nscd) != no].
	* nss/nsswitch.c (nss_load_all_libraries, __nss_disable_nscd):
	Conditionalize on [USE_NSCD].
	(is_nscd, nscd_init_cb): Likewise.
	(nss_load_library): Conditionalize init callback on [USE_NSCD].
	* nss/nss_files/files-init.c: Conditionalize body on [USE_NSCD].
	* nss/nss_db/db-init.c: Likewise.
	* nscd/nscd.c (main): Conditionalize __nss_disable_nscd call on
	[USE_NSCD].
	* sysdeps/unix/sysv/linux/check_pf.c (get_nl_timestamp): New function.
	(make_request): Use it.
	(cache_valid_p): New function.
	(__check_pf): Use it.
	* NEWS: Add item for --disable-nscd.

2012-08-22  Dmitry V. Levin  <ldv@altlinux.org>

	* configure.in (SED): Update AC_CHECK_PROG_VER's version extract regexp
	to support sed >= 4.2.1-20-ga9bf076.
	* configure: Regenerated.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* csu/libc-start.c (apply_irel): Move extern declarations inside here.
	Conditionalize whole body on [IREL].

2012-08-22  Jeff Law <law@redhat.com>

	[BZ #14505]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only use gethostbyname4_r
	if the family is PF_UNSPEC.

2012-08-22  Mike Frysinger  <vapier@gentoo.org>

	* Makerules (lib-version): Rename from V.
	(install-lib-nosubdir): Change V to lib-version.

2012-08-22  Will Schmidt  <will_schmidt@vnet.ibm.com>

	[BZ #14252]
	* powerpc32/power6/wcschr.c: New file.
	* powerpc32/power6/wcscpy.c: New file.
	* powerpc32/power6/wcsrchr.c: New file.
	* powerpc64/power6/wcschr.c: New file.
	* powerpc64/power6/wcscpy.c: New file.
	* powerpc64/power6/wcsrchr.c: New file.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/str-two-way.h (AVAILABLE1_USES_J): New macro, define default.
	(two_way_short_needle): Use it.
	* string/strstr.c (AVAILABLE1_USES_J): Define.
	* string/strcasestr.c: Likewise.

	* string/str-two-way.h (two_way_short_needle): Use pointers instead of
	array references.
	* string/strcasestr.c (TOLOWER): Make side-effect safe.

	[BZ #11607]
	* NEWS: Add an entry.
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, RET0_IF_0): New macros,
	define their defaults.
	(two_way_short_needle): Detect end-of-string on-the-fly.
	* string/strcasestr.c, string/strstr.c (AVAILABLE): Update.
	(AVAILABLE1, AVAILABLE2, RET0_IF_0, AVAILABLE_USES_J): Define.
	* string/bug-strcasestr1.c: New test.
	* string/Makefile: Run it.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #11607]
	* string/str-two-way.h (two_way_short_needle): Optimize matching of
	the first character.

2012-08-21  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_irel): Function removed.
	* csu/libc-start.c (apply_irel): New function.
	(LIBC_START_MAIN): Call it instead of __libc_csu_irel.

2012-08-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_FADVISE64_64_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Do not include
	<kernel-features.h>.
	[__NR_fadvise64_64]: Make code unconditional.
	[!__ASSUME_FADVISE64_64_SYSCALL]: Remove conditional code.
	[__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64)]: Likewise.
	[!(__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64))]: Likewise.
	[__NR_fadvise64]: Make code unconditional.
	[!__NR_fadvise64]: Remove conditional code.
	* sysdeps/unix/sysv/linux/posix_fadvise64.c: Do not include
	<kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/posix_fadvise64.c: Do
	not include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/posix_fadvise64.c: Do not
	include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.

2012-08-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Unrolled short loop and
	slight instruction rearrangements per scrollpipe analysis.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.

2012-08-20  Roland McGrath  <roland@hack.frob.com>

	* manual/syslog.texi (syslog; vsyslog, closelog):
	Fix typo repeated twice: @file{dev/log} -> @file{/dev/log}.
	Reported by Ricardo Catalinas Jimnez <jimenezrick@gmail.com>.

	* elf/dl-sysdep.c (_dl_important_hwcaps): Fix conditional on using
	DSOCAPS to match condition on defining it.

2012-08-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SWAPCONTEXT_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__ &&
	__LINUX_KERNEL_VERSION >= 0x020616] (__ASSUME_UTIMES): Define.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_MMAP2_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/mmap64.c [__NR_mmap2]: Make code
	unconditional.
	[!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap64.S (__mmap64) [__NR_mmap2]:
	Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S (__mmap64)
	[__NR_mmap2]: Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.

2012-08-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/getrlimit.c: Remove.

2012-08-18  Andreas Jaeger  <aj@suse.de>

	* stdio-common/_itoa.c (_itoa): Add missing DUMMY variable.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	* include/sys/socket.h (__have_sock_cloexec): Add attribute_hidden.
	* include/unistd.h (__have_sock_cloexec): Likewise.
	(__have_pipe2): Likewise.
	(__have_dup3): Likewise.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	[BZ #9685]
	* include/unistd.h (__have_pipe2): Change define into an extern int.
	(__have_dup3): Likewise.
	* socket/have_sock_cloexec.c: Include fcntl.h.
	(__have_pipe2): New variable.
	(__have_dup3): Likewise.

2012-08-17  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/nice.c: Adjust #include.

2012-08-17  Marek Polacek  <polacek@redhat.com>

	* sysdeps/ieee754/ldbl-96/s_sincosl.c (__sincosl): Use __attribute__
	((unused)) on I1, which is set by GET_LDOUBLE_WORDS but never used.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* configure.in: Add AC_SUBST for sysheaders.
	* configure: Regenerated.
	* config.make.in (sysheaders): New substituted variable.

	* sysdeps/unix/mkfifo.c: Moved ...
	* sysdeps/posix/mkfifo.c: ... here.
	* sysdeps/unix/mkfifoat.c: Moved ...
	* sysdeps/posix/mkfifoat.c: ... here.

	* sysdeps/unix/utime.c: Moved ...
	* sysdeps/posix/utime.c: ... here.

	* sysdeps/unix/time.c: Moved ...
	* sysdeps/posix/time.c: ... here.
	* sysdeps/unix/sysv/linux/time.c: Adjust #include.
	* sysdeps/unix/sysv/linux/sparc/sparc64/time.c: Likewise.

	* sysdeps/unix/nice.c: Moved ...
	* sysdeps/posix/nice.c: ... here.

	* sysdeps/unix/alarm.c: Moved ...
	* sysdeps/posix/alarm.c: ... here.

	* intl/Makefile ($(codeset_mo)): Depend on the input file.

2012-08-17  Jeff Law <law@redhat.com>

	* intl/Makefile (codeset_mo): New variable.
	($(codeset_mo)): New target.
	(tst-codeset.out): Depend on that.  Remove explicit rule.
	(tst-gettext3.out, tst-gettext5.out): Likewise.
	(LOCPATH-ENV, tst-codeset-ENV): New variables.
	(tst-gettext3-ENV, tst-gettext5-ENV): Likewise.
	* intl/tst-codeset.sh: Remove.
	* intl/tst-gettext3.sh: Likewise.
	* intl/tst-gettext5.sh: Likewise.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/inet/syscalls.list: File removed.  Move contents into ...
	* sysdeps/unix/syscalls.list: ... here.

	* sysdeps/posix/getaddrinfo.c
	(save_gaiconf_mtime, check_gaiconf_mtime): New functions.
	(gaiconf_init, gaiconf_reload): Use them.
	[!_STATBUF_ST_NSEC]
	(gaiconf_mtime, save_gaiconf_mtime, check_gaiconf_mtime):
	Define using time_t rather than struct timespec.

	* sysdeps/generic/malloc-machine.h (MUTEX_INITIALIZER): New macro.
	(atomic_full_barrier, atomic_read_barrier, atomic_write_barrier):
	Macros removed.
	* malloc/arena.c (save_malloc_hook, save_free_hook): Conditionalize on
	[!NO_THREADS].
	(malloc_atfork, free_atfork, atfork_recursive_cntr): Likewise.
	(ptmalloc_lock_all, ptmalloc_unlock_all, ptmalloc_unlock_all2):
	Likewise.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Use NULL rather than 0 for
	__libc_cleanup_push argument.

	* bits/param.h: New file.
	* misc/sys/param.h: New file.
	* include/sys/param.h: New file.
	* misc/Makefile (headers): Add bits/param.h.
	* sysdeps/generic/sys/param.h: File removed.
	* sysdeps/unix/sysv/linux/bits/param.h: New file.
	* sysdeps/unix/sysv/linux/sys/param.h: File removed.
	* sysdeps/mach/hurd/bits/param.h: New file.
	* sysdeps/mach/hurd/sys/param.h: File removed.

	* elf/dl-close.c (_dl_close_worker): Add a cast and a comment to the
	last change.

	* libio/genops.c (_IO_unbuffer_write): Conditionalize locking code on
	[_IO_MTSAFE_IO].
	* libio/libioP.h [!_IO_MTSAFE_IO && !NOT_IN_libc]
	(_IO_acquire_lock, _IO_acquire_lock_clear_flags2, _IO_release_lock):
	New macros.

	* Makeconfig [$(libc-reentrant) = yes] (libio-mtsafe): New variable.
	* libio/Makefile (CPPFLAGS): Append $(libio-mtsafe) unconditionally
	rather than -D_IO_MTSAFE_IO conditionally.
	* stdio-common/Makefile (CPPFLAGS): Likewise.
	* wcsmbs/Makefile (CPPFLAGS): Likewise.
	* stdlib/Makefile (CFLAGS-strfmon.c, CFLAGS-strfmon_l.c):
	Use $(libio-mtsafe).
	* debug/Makefile (CFLAGS-sprintf_chk.c): Use $(libio-mtsafe) instead
	of -D_IO_MTSAFE_IO.
	(CFLAGS-snprintf_chk.c, CFLAGS-vsprintf_chk.c): Likewise.
	(CFLAGS-vsnprintf_chk.c, CFLAGS-asprintf_chk.c): Likewise.
	(CFLAGS-vasprintf_chk.c, CFLAGS-obprintf_chk.c): Likewise.
	(CFLAGS-dprintf_chk.c, CFLAGS-vdprintf_chk.c): Likewise.
	(CFLAGS-printf_chk.c, CFLAGS-fprintf_chk.c): Likewise.
	(CFLAGS-vprintf_chk.c, CFLAGS-vfprintf_chk.c): Likewise.
	(CFLAGS-gets_chk.c, CFLAGS-fgets_chk.c): Likewise.
	(CFLAGS-fgets_u_chk.c, CFLAGS-fread_chk.c): Likewise.
	(CFLAGS-fread_u_chk.c): Likewise.
	(CFLAGS-swprintf_chk.c, CFLAGS-vswprintf_chk.c): Likewise.
	(CFLAGS-wprintf_chk.c, CFLAGS-fwprintf_chk.c): Likewise.
	(CFLAGS-vwprintf_chk.c, CFLAGS-vfwprintf_chk.c): Likewise.
	(CFLAGS-fgetws_chk.c, CFLAGS-fgetws_u_chk.c): Likewise.
	* grp/Makefile (CFLAGS-fgetgrent_r.c, CFLAGS-putgrent.c): Likewise.
	* gshadow/Makefile (CFLAGS-fgetsgent_r.c, CFLAGS-putsgent.c): Likewise.
	* misc/Makefile (CFLAGS-mntent_r.c): Likewise.
	* pwd/Makefile (CFLAGS-fgetpwent_r.c): Likewise.
	* shadow/Makefile (CFLAGS-fgetspent_r.c, CFLAGS-putspent.c): Likewise.

	* libio/Makefile: Test [$(libc-reentrant) = yes]
	instead of [$(filter %REENTRANT, $(defines)) nonempty].

	* Makeconfig
	[$(libc-reentrant) = yes] (defines): Append -D_LIBC_REENTRANT.
	* sysdeps/pthread/configure: File removed.
	* sysdeps/pthread/Makeconfig: New file.
	* sysdeps/mach/hurd/Makeconfig (libc-reentrant): New variable.
	* sysdeps/mach/hurd/configure.in: Don't touch DEFINES here.

2012-08-16  Gary Benson  <gbenson@redhat.com>

	* elf/dl-close.c (_dl_close_worker): Also set r->r_map when
	unmapping the first object in a namespace.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* inet/getnetgrent_r.c (internal_setnetgrent): Renamed to ...
	(__internal_setnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(setnetgrent): Update caller.
	(internal_endnetgrent): Renamed to ...
	(__internal_endnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(endnetgrent): Update caller.
	(internal_getnetgrent_r): Renamed to ...
	(__internal_getnetgrent_r): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(__getnetgrent_r): Update caller.
	* inet/netgroup.h: Update declarations.  Add libc_hidden_proto uses.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/longlong.h: Update from GCC.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* stdlib/gmp-impl.h (udiv_qrnnd_preinv): Use __attribute__ ((unused))
	on _QL, which is set by umul_ppmm but never used.
	* stdio-common/_itoa.c (_itoa): Use __attribute__ ((unused)) on DUMMY
	variables, which are set by GMP macros but never used.
	* stdio-common/_itowa.c (_itowa): Likewise.
	* stdlib/divmod_1.c (mpn_divmod_1): Likewise.
	* stdlib/mod_1.c (mpn_mod_1): Likewise.

2012-08-16  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/sh/ldsodefs.h (ARCH_PLTENTER_MEMBERS) <sh_gnu_pltenter>:
	struct La_sh_regs is not constant.
	* sysdeps/sparc/ldsodefs.h (ARCH_PLTENTER_MEMBERS)
	<sparc32_gnu_pltenter, sparc64_gnu_pltenter>: struct La_sparc32_regs
	and struct La_sparc64_regs are not constant.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_getres.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c
	[__ASSUME_POSIX_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]
	(__libc_missing_posix_timers): Remove.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd) [SHARED]: Conditionalize
	check of GL(dl_error_catch_tsd) on [_LIBC_REENTRANT].

	* bits/libc-lock.h (__rtld_lock_initialize): New macro.

	* elf/dl-sym.c: Include <stdlib.h>.

	* posix/regcomp.c (init_word_char): Use temporaries to hold the 64-bit
	constants, which avoids warnings in 32-bit builds.

	* bits/fcntl.h [__USE_POSIX199309 || __USE_UNIX98]:
	(O_DSYNC, O_RSYNC): New macros (with NetBSD values).

	* misc/lseek.c: File moved to ...
	* io/lseek.c: ... here.

	* rt/clock_nanosleep.c: Include <time.h>, not <sys/time.h>.

	* crypt/sha512.c (sha512_process_block) [!USE_TOTAL128]: Avoid
	shifting LEN more than 31 bits at once.

2012-08-15  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #14195]
	* sysdeps/i386/i686/multiarch/strcmp-sssse3.S: Fix
	segmentation fault for a case of two empty input strings.
	* string/test-strncasecmp.c (check1): Renamed to...
	(bz12205): ...this.
	(bz14195): Add new testcase for two empty input strings and N > 0.
	(test_main): Call new testcase, adapt for renamed function.

2012-08-15  Andreas Jaeger  <aj@suse.de>

	[BZ #14090]
	* crypt/md5test2.c: New test, based on test supplied by Serge
	Belyshev <belyshev@depni.sinp.msu.ru>.
	* crypt/Makefile (xtests): Add md5test-giant..
	* crypt/Makefile ($(objpfx)md5test-giant): Add.

2012-08-15  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #14090]
	* crypt/md5.c (md5_process_block): Don't assume the buffer
	length is less than 2**32.
	* crypt/sha512.c (sha512_process_block): Don't assume the buffer
	length is less than 2**64.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* string/str-two-way.h: Include <sys/param.h>.
	(MAX): Macro removed.

	* sysdeps/x86_64/multiarch/strstr-c.c: Add copyright header.
	Move #define and #undef of memmove to just before and after
	including <string.h>.

	* sysdeps/x86_64/multiarch/memmove.c: Don't include <stddef.h>.
	[!NOT_IN_libc]: Move #define and #undef of memmove to just before
	and after including <string.h>.  Move declarations of
	__memmove_sse2, __memmove_ssse3, and __memmove_ssse3_back
	to before #include "string/memmove.c".

	* include/dirent.h: Declare __getdirentries.

	* sysdeps/posix/system.c (do_system): Cast SUB_REF () to void when not
	using its value, to avoid warnings in the [!_LIBC_REENTRANT] case.

2012-08-14  Mike Frysinger  <vapier@gentoo.org>

	* config.h.in (HAVE_CPP_ASM_DEBUGINFO): Delete.
	* sysdeps/i386/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/sysdep.h (ENTRY): Remove calls to STABS_CURRENT_FILE1,
	STABS_CURRENT_FILE, and STABS_FUN.
	(END): Remove call to STABS_FUN_END.
	(STABS_CURRENT_FILE1): Delete.
	(STABS_CURRENT_FILE): Likewise.
	(STABS_FUN): Likewise.
	(STABS_FUN_END): Likewise.
	(STABS_FUN2): Likewise.
	* sysdeps/x86_64/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/x86_64/configure: Regenerated.

2012-08-14  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-open.c: Include <atomic.h>.
	* elf/dl-lookup.c: Likewise.

2012-08-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Remove.
	* sysdeps/unix/sysv/linux/s390/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/sparc/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/system.c [!FORK] (FORK): Do not
	condition on __ASSUME_CLONE_THREAD_FLAGS.

2012-08-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-08-13  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* include/atomic.h (atomic_exchange_and_add): Split into ...
	(atomic_exchange_and_add_acq, atomic_exchange_and_add_rel): ... these.
	New atomic macros.

2012-08-13  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-08-13  Jeff Law <law@redhat.com>

	* manual/stdio.texi (snprintf): Clarify handling of the trailing
	null byte in the output string.

2012-08-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL): Define.
	[__LINUX_KERNEL_VERSION >= __LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL]
	(__ASSUME_ARG_MAX_STACK_BASED): Define.
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf)
	[__LINUX_KERNEL_VERSION < 0x020617]: Change condition to
	!__ASSUME_ARG_MAX_STACK_BASED.  Compare version with
	__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL.

2012-08-09  Jeff Law <law@redhat.com>

	[BZ #13939]
	* malloc.c/arena.c (reused_arena): New parameter, avoid_arena.
	When avoid_arena is set, don't retry in the that arena.  Pick the
	next one, whatever it might be.
	(arena_get2): New parameter avoid_arena, pass through to reused_arena.
	(arena_lock): Pass in new parameter to arena_get2.
	* malloc/malloc.c (__libc_memalign): Pass in new parameter to
	arena_get2.
	(__libc_malloc): Unify retrying after main arena failure with
	__libc_memalign version.
	(__libc_valloc, __libc_pvalloc, __libc_calloc): Likewise.

2012-08-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14166]
	* sysdeps/i386/i686/multiarch/strstr-c.c (strstr): Redefined
	to __redirect_strstr.
	(__strstr_sse42): Use typeof __redirect_strstr.
	(__strstr_ia32): Likewise.
	(__libc_strstr): New prototype.
	(strstr): Renamed to ...
	(__libc_strstr): This.
	(strstr): New strong alias of __libc_strstr.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/time.c (time): Redefined to
	__redirect_time.
	Include <time.h>.
	(__libc_time): New prototype.
	(time_ifunc): Replace time with __libc_time.
	(time): New strong alias and hidden definition of __libc_time.
	(__GI_time): Remove strong alias.
	* sysdeps/x86_64/multiarch/memmove.c: Don't include <string.h>.
	Include <stddef.h>.
	(memmove): Redefined to __redirect_memmove.
	(__memmove_sse2): Use typeof __redirect_memmove.
	(__memmove_ssse3): Likewise.
	(__memmove_ssse3_back): Likewise.
	(__libc_memmove): New prototype.
	(memmove): Renamed to ...
	(__libc_memmove): This.
	(memmove): New strong alias of __libc_memmove.

2012-08-08  Mark Salter  <msalter@redhat.com>

	* elf/elf.h
	(R_MN10300_TLS_GD): Define.
	(R_MN10300_TLS_LD): Likewise.
	(R_MN10300_TLS_LDO): Likewise.
	(R_MN10300_TLS_GOTIE): Likewise.
	(R_MN10300_TLS_IE): Likewise.
	(R_MN10300_TLS_LE): Likewise.
	(R_MN10300_TLS_DTPMOD): Likewise.
	(R_MN10300_TLS_DTPOFF): Likewise.
	(R_MN10300_TLS_TPOFF): Likewise.
	(R_MN10300_SYM_DIFF): Likewise.
	(R_MN10300_ALIGN): Likewise.
	(R_MN10300_NUM): Update.

2012-08-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_TGKILL):
	Remove.

2012-08-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/fdopendir.c: Include <stddef.h>.

	* sysdeps/unix/sysv/linux/readdir64_r.c: Update #include for
	sysdeps/unix -> sysdeps/posix move.
	* sysdeps/unix/sysv/linux/i386/readdir64_r.c: Likewise.

2012-08-07	Allan McRae	<allan@archlinux.org>

	[BZ #14303]
	* sunrpc/rpc_main.c (SVR4_CPP): Remove.
	(SUNOS_CPP): Likewise.
	(find_cpp): Fall back to selecting system cpp when /lib/cpp is
	not found.
	(open_input): Call CPP using execvp.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_PROT_GROWSUPDOWN): Remove.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/dl-execstack.c
	(_dl_make_stack_executable) [PROT_GROWSDOWN || PROT_GROWSUP]: Make
	code unconditional.
	(_dl_make_stack_executable) [!__ASSUME_PROT_GROWSUPDOWN]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS)
	[__ASSUME_GETDENTS32_D_TYPE]: Make code unconditional.
	(__GETDENTS) [!__ASSUME_GETDENTS32_D_TYPE]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/waitid.c [__NR_waitid]: Make code
	unconditional.
	[__ASSUME_WAITID_SYSCALL]: Likewise.
	[!__ASSUME_WAITID_SYSCALL]: Remove conditional code.

2012-08-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/closedir.c: Renamed to ...
	* sysdeps/posix/closedir.c: ... here.
	* sysdeps/unix/dirfd.c: Renamed to ...
	* sysdeps/posix/dirfd.c: ... here.
	* sysdeps/unix/dirstream.h: Renamed to ...
	* sysdeps/posix/dirstream.h: ... here.
	* sysdeps/unix/fdopendir.c: Renamed to ...
	* sysdeps/posix/fdopendir.c: ... here.
	* sysdeps/unix/opendir.c: Renamed to ...
	* sysdeps/posix/opendir.c: ... here.
	* sysdeps/unix/readdir.c: Renamed to ...
	* sysdeps/posix/readdir.c: ... here.
	* sysdeps/unix/readdir_r.c: Renamed to ...
	* sysdeps/posix/readdir_r.c: ... here.
	* sysdeps/unix/rewinddir.c: Renamed to ...
	* sysdeps/posix/rewinddir.c: ... here.
	* sysdeps/unix/seekdir.c: Renamed to ...
	* sysdeps/posix/seekdir.c: ... here.
	* sysdeps/unix/telldir.c: Renamed to ...
	* sysdeps/posix/telldir.c: ... here.
	* sysdeps/unix/sysv/linux/opendir.c: Update #include.
	* sysdeps/unix/sysv/linux/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir.c: Likewise.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h: Renamed to ...
	* bits/fcntl.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h (O_NOCTTY): Define to 0x8000,
	not 0.
	(O_ASYNC, O_FSYNC, O_SYNC): Move outside [__USE_MISC].
	[__USE_XOPEN2K8] (O_DIRECTORY, O_NOFOLLOW, O_CLOEXEC): New macros.
	(FCREAT, FEXCL, FTRUNC, FNOCTTY, FNONBLOCK): Macros removed.
	(struct flock): Move l_start, l_len to the beginning.
	Use __pid_t for l_pid.
	[__USE_XOPEN2K] (POSIX_FADV_NORMAL, POSIX_FADV_RANDOM): New macros.
	[__USE_XOPEN2K] (POSIX_FADV_SEQUENTIAL, POSIX_FADV_WILLNEED): Likewise.
	[__USE_XOPEN2K] (POSIX_FADV_DONTNEED, POSIX_FADV_NOREUSE): Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64): New macros.
	[__USE_XOPEN2K8] (F_DUPFD_CLOEXEC): New macro.
	[__USE_LARGEFILE64] (struct flock64): New type.
	(F_GETOWN, F_SETOWN): Also define for [__USE_XOPEN2K8].

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h: Renamed to ...
	* bits/dirent.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h
	[__INO_T_MATCHES_INO64_T] (_DIRENT_MATCHES_DIRENT64): New macro.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change from 2.6.0 to 2.6.16.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Define unconditionally.
	(__ASSUME_TGKILL): Define conditional on architectures, not kernel
	version.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_CLONE_STOPPED): Remove.
	(__ASSUME_FADVISE64_64_SYSCALL): Define conditional on
	architectures, not kernel version.
	(__ASSUME_PROT_GROWSUPDOWN): Define unconditionally.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	[__sparc__ && __arch64__] (__ASSUME_STAT64_SYSCALL): Do not
	condition definition on __LINUX_KERNEL_VERSION >= 0x02060c.
	* README: State 2.6.16 as minimum Linux kernel version.  Do not
	refer to older versions.

2012-08-06  Roland McGrath  <roland@hack.frob.com>

	* dirent/alphasort.c [_DIRENT_MATCHES_DIRENT64]:
	Define alphasort64 as an alias.
	* dirent/versionsort.c [_DIRENT_MATCHES_DIRENT64]:
	Define versionsort64 as an alias.
	* dirent/scandir.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandir64 as an alias.
	* dirent/scandirat.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandirat64 as an alias.
	* dirent/alphasort64.c (alphasort64):
	Conditionalize on [!_DIRENT_MATCHES_DIRENT64].
	* dirent/versionsort64.c: Likewise.
	* dirent/scandir64.c: Likewise.
	* dirent/scandirat64.c: Likewise.
	* sysdeps/wordsize-64/alphasort.c: File removed.
	* sysdeps/wordsize-64/alphasort64.c: File removed.
	* sysdeps/wordsize-64/scandir.c: File removed.
	* sysdeps/wordsize-64/scandir64.c: File removed.
	* sysdeps/wordsize-64/scandirat.c: File removed.
	* sysdeps/wordsize-64/scandirat64.c: File removed.
	* sysdeps/wordsize-64/versionsort.c: File removed.
	* sysdeps/wordsize-64/versionsort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: File removed.

	* bits/typesizes.h [__LP64__] (__INO_T_MATCHES_INO64_T): New macros.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__INO_T_MATCHES_INO64_T): New macro.
	* bits/dirent.h (_DIRENT_MATCHES_DIRENT64): New macro.
	* sysdeps/unix/sysv/linux/bits/dirent.h
	[defined __OFF_T_MATCHES_OFF64_T && defined __INO_T_MATCHES_INO64_T]
	(_DIRENT_MATCHES_DIRENT64): New macro.

	* io/lockf.c [__OFF_T_MATCHES_OFF64_T]:
	Define lockf64 as an alias.
	* libio/fseeko.c [__OFF_T_MATCHES_OFF64_T]:
	Define fseeko64 as an alias.
	* libio/ftello.c [__OFF_T_MATCHES_OFF64_T]:
	Define ftello64 as an alias.
	* libio/iofgetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fgetpos64 and fgetpos64 as aliases.
	* libio/iofsetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fsetpos64 and fsetpos64 as aliases.
	* io/lockf64.c [!__OFF_T_MATCHES_OFF64_T]:
	Conditionalize body on this.
	* libio/fseeko64.c: Likewise.
	* libio/ftello64.c: Likewise.
	* libio/iofgetpos64.c: Likewise.
	* libio/iofsetpos64.c: Likewise.
	* sysdeps/wordsize-64/lockf.c: File removed.
	* sysdeps/wordsize-64/lockf64.c: File removed.
	* sysdeps/wordsize-64/fseeko.c: File removed.
	* sysdeps/wordsize-64/fseeko64.c: File removed.
	* sysdeps/wordsize-64/ftello.c: File removed.
	* sysdeps/wordsize-64/ftello64.c: File removed.
	* sysdeps/wordsize-64/iofgetpos.c: File removed.
	* sysdeps/wordsize-64/iofgetpos64.c: File removed.
	* sysdeps/wordsize-64/iofsetpos.c: File removed.
	* sysdeps/wordsize-64/iofsetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: File removed.

	* bits/typesizes.h [__LP64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__OFF_T_MATCHES_OFF64_T): New macro.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/secure-getenv.c (__secure_getenv): Replace
	GLIBC_2_16 with GLIBC_2_17.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.

2012-08-03  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_AT_SECURE):
	Remove.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_BRK_PAGE_ROUNDED): Likewise.
	(__ASSUME_TMPFS_NAME): Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c (frob_brk)
	[!__ASSUME_BRK_PAGE_ROUNDED]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ldsodefs.h [__ASSUME_AT_SECURE]
	(HAVE_AUX_SECURE): Make definition unconditional.
	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs)
	[!__ASSUME_TMPFS_NAME]: Remove conditional code.

2012-08-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/sys/param.h (MAXSYMLINKS): Macro removed.
	* sysdeps/mach/hurd/bits/local_lim.h (SYMLOOP_MAX): Macro removed.
	* sysdeps/mach/hurd/eloop-threshold.h: New file.
	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__eloop_threshold instead of SYMLOOP_MAX.

	* sysdeps/generic/eloop-threshold.h: New file.
	* stdlib/canonicalize.c (__realpath): Use __eloop_threshold instead
	of MAXSYMLINKS.
	* elf/chroot_canon.c (chroot_canon): Likewise.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.6.0 everywhere.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SET_THREAD_AREA_SYSCALL): Remove.
	(__ASSUME_CLONE_THREAD_FLAGS): Condition on architectures, not
	kernel versions.
	(__ASSUME_POSIX_TIMERS): Define unconditionally.
	(__ASSUME_FUTEX_REQUEUE): Remove.
	(__ASSUME_STATFS64): Define unconditionally.
	(__ASSUME_AT_SECURE): Likewise.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_TGKILL): Define without depending on kernel version for
	i386.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_SWAPCONTEXT_SYSCALL): Condition on architecture, not
	kernel version.
	(__ASSUME_BRK_PAGE_ROUNDED): Define unconditionally.
	(__ASSUME_TMPFS_NAME): Likewise.
	* README: Update reference to Linux kernel versions.

2012-08-02  Marek Polacek  <polacek@redhat.com>

	[BZ# 14150]
	* configure.in (libc_cv_asm_type_prefix): Remove test.  Replace
	libc_cv_asm_type_prefix with %.
	* configure: Regenerated.
	* include/libc-symbols.h: Remove comment about
	ASM_TYPE_DIRECTIVE_PREFIX.  Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	(declare_symbol_alias_1_paste) [__ASSEMBLER__]: Do not define.
	(declare_symbol_alias_1_paste_1) [__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify) [!__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify_1) [!__ASSEMBLER__]: Likewise.
	* elf/tst-unique2mod2.c: Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define S.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define _S.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* config.h.in: Do not undef ASM_TYPE_DIRECTIVE_PREFIX.
	* sysdeps/s390/s390-32/sysdep.h: Do not define ASM_TYPE_DIRECTIVE.
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	Do not define ASM_TYPE_DIRECTIVE.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h:
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/i686/strtok.S: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/i386/strtok.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/strtok.S: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* libio/iofopen.c: Include <fcntl.h>.
	[_LIBC] [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(_IO_fopen64, fopen64): Define as aliases.
	* libio/iofopen64.c: Include <fcntl.h>.
	[!defined _LIBC || (defined O_LARGEFILE && O_LARGEFILE != 0)]:
	Conditionalize body on this.
	* sysdeps/wordsize-64/iofopen.c: File removed.
	* sysdeps/wordsize-64/iofopen64.c: File removed.

2012-08-01  Marek Polacek  <polacek@redhat.com>

	* libc/Makeconfig: Use elf in place of binfmt-subdir.
	Use dlfcn directly instead of a variable.
	(binfmt-subdir): Do not define.
	(dlfcn): Likewise.

2012-08-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_FCNTL64):
	Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/fcntl.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(miss_F_GETOWN_EX): Remove all definitions.
	[NO_CANCELLATION && !__ASSUME_FCNTL64] (__fcntl_nocancel): Remove
	macro definition.
	[!__ASSUME_FCNTL64]: Remove conditional code.
	[__ASSUME_FCNTL64]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lockf64.c: Do not include
	<kernel-features.h>.
	[__NR_fcntl64 && !__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(lockf64) [!__ASSUME_FCNTL64]: Remove conditional code.
	(lockf64) [__NR_fcntl64]: Make code unconditional.
	(lockf64) [__ASSUME_FCNTL64]: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_VFORK_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/vfork.S (__vfork) [__NR_vfork]:
	Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (NGROUPS): Define only if [NGROUPS_MAX].
	(MAXSYMLINKS): Define only if [SYMLOOP_MAX].

	* misc/mkstemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemp64 as an alias.
	* misc/mkstemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemps64 as an alias.
	* misc/mkostemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemp64 as an alias.
	* misc/mkostemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemps64 as an alias.
	* misc/mkstemp64.c [defined O_LARGEFILE && O_LARGEFILE != 0]:
	Conditionalize body on this.
	* misc/mkostemp64.c: Likewise.
	* misc/mkostemps64.c: Likewise.
	* misc/mkstemps64.c: Likewise.
	* sysdeps/wordsize-64/mkstemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp.c: File removed.
	* sysdeps/wordsize-64/mkstemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: File removed.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/syscalls.list: Add getrlimit/ugetrlimit line.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/sh/getrlimit.c: File removed.

	* sysdeps/unix/make-syscalls.sh: Emit uses of the versioned_symbol and
	compat_symbol macros from <shlib-compat.h> rather than the underlying
	default_symbol_version and symbol_version macros, so that DEFAULT
	lines in shlib-versions are respected.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Likewise.

2012-08-01  Florian Weimer  <fweimer@redhat.com>

	* posix/unistd.h (setuid, setreuid, seteuid, setresuid):
	Declare with warn_unused_result.
	(setgid, setregid, setegid, setresgid): Likewise.
	* sysdeps/unix/sysv/linux/sys/fsuid.h (setfsuid, setfsgid):
	Likewise.
	* WUR-REPORT: Remove set*id functions.

2012-07-31  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/renameat.c: New file, mostly copied from rename.c.

2012-07-31  Roland McGrath  <roland@hack.frob.com>

	* include/sys/socket.h (__libc_accept, __libc_accept4):
	Add attribute_hidden.
	* socket/accept4.c (__libc_accept4): Remove libc_hidden_def.

	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Conditionalize
	use of PTR_MANGLE.
	* inet/getnetgrent_r.c (setup): Likewise.

	* sysdeps/generic/siglist.h: Put SIGWINCH under #ifdef.

2012-07-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p if larger part has absolute
	value between 1.0 and 2.0 and smaller part has absolute value less
	than 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-31  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c: Use printf for error reporting.
	Exit with zero in case no suitable GID is found, and write a
	message to standard error.

2012-07-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (MAXSYMLINKS): Define to SYMLOOP_MAX
	rather than to 1.
	(NBBY, NGROUPS, CANBSIZ, NCARGS): New macros.
	(MAXPATHLEN): Removed.
	(NOGROUP, NODEV): New macros.
	(setbit, clrbit, isset, isclr): New macros.
	(howmany, roundup, powerof2): New macros.
	(DEV_BSIZE): New macro.

	* include/unistd.h: Add attribute_hidden on __libc_pwrite64.
	* sysdeps/posix/pwrite64.c: Remove libc_hidden_def (__libc_pwrite64).

	* sysdeps/ieee754/k_standard.c (__kernel_standard_l): Conditionalize
	definition on [!__NO_LONG_DOUBLE_MATH].

	* nss/nsswitch.c (__nss_lookup_function): Conditionalize use of
	PTR_MANGLE and PTR_DEMANGLE.

	* socket/accept4.c (accept4): Rename to __libc_accept4.
	Define accept4 as a weak alias.

	* sysdeps/posix/getcwd.c (__getcwd): Conditionalize d_type field use
	on [_DIRENT_HAVE_D_TYPE].
	* io/ftw.c (ftw_dir): Likewise.

	* io/xmknod.c (__xmknod): Don't check PATH for being null.

	* libio/genops.c (flush_cleanup): Move inside [_IO_MTSAFE_IO].

	* bits/signum.h (SIGSTOP, SIGCONT, SIGTSTP, SIGTTIN, SIGTTOU, SIGCHLD):
	Use the BSD numbers rather than the arbitrary ones we had.
	(SIGBUS, SIGIO, SIGPOLL, SIGPROF, SIGSYS): New macros.
	(SIGTRAP, SIGURG, SIGUSR1, SIGUSR2, SIGVTALRM): New macros.
	(SIGXCPU, SIGXFSZ): New macros.
	(_NSIG): Now 32.

	* elf/rtld.c (_rtld_global): Conditionalize .dl_ns[LM_ID_BASE]
	initializer on [_LIBC_REENTRANT].

	* iconv/iconv_charmap.c (charmap_conversion): Move ST, ADDR
	definitions inside [_POSIX_MAPPED_FILES].

	* posix/regex.c: Include <sys/param.h> for MIN/MAX.

	* dirent/opendir.c: Include <fcntl.h>.

	* bits/libc-lock.h (__libc_setspecific): Evaluate arguments.
	(__libc_getspecific): Likewise.
	(__libc_key_create): Likewise.

	* stdio-common/tmpfile64.c: Include <fcntl.h> first.
	[defined O_LARGEFILE && O_LARGEFILE != 0]: Conditionalize on this.
	* stdio-common/tmpfile.c [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(tmpfile64): Define as alias.
	* sysdeps/wordsize-64/tmpfile.c: File removed.
	* sysdeps/wordsize-64/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: File removed.

	* stdio-common/vfscanf.c: Include <stdbool.h>.
	* nss/makedb.c: Likewise.
	* stdio-common/_i18n_number.h: Likewise.
	* argp/argp-help.c: Likewise.
	* posix/wordexp.c: Likewise.
	* sysdeps/posix/spawni.c: Likewise.
	* nss/nss_files/files-initgroups.c: Likewise.
	* stdio-common/reg-modifier.c: Include <stdlib.h>.
	* nss/nss_files/files-initgroups.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-initgroups.c: Likewise.
	* io/fchmodat.c: Include <sys/stat.h>.

	* sysdeps/generic/ldsodefs.h (struct rtld_global): Use
	__rtld_lock_define_recursive macro instead of __rtld_lock_recursive_t.

	* intl/loadmsgcat.c (_nl_load_domain): Don't use MAP_FAILED outside of
	[HAVE_MMAP].

	* bits/stat.h: Fix inclusion guard to accept _FCNTL_H too.
	Add multiple inclusion protection.

2012-07-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-27  Gary Benson  <gbenson@redhat.com>

	[BZ #14298]
	* elf/rtld.c: Include <stap-probe.h>.
	(dl_main): Added static probes "init_start" and "init_complete".
	* elf/dl-load.c: Include <stap-probe.h>.
	(lose): Take new parameter "nsid".
	Added static probe "map_failed".
	(_dl_map_object_from_fd): Pass namespace id to lose.
	Added static probe "map_start".
	(open_verify): Pass namespace id to lose.
	* elf/dl-open.c: Include <stap-probe.h>.
	(dl_open_worker) Added static probes "map_complete", "reloc_start"
	and "reloc_complete".
	* elf/dl-close.c: Include <stap-probe.h>.
	(_dl_close_worker): Added static probes "unmap_start" and
	"unmap_complete".
	* elf/rtld-debugger-interface.txt: New file documenting the above.

2012-07-26  Roland McGrath  <roland@hack.frob.com>

	* sunrpc/rpc_hout.c (pdeclaration): Call f_print with a "%s" format
	rather than a string variable.
	* sunrpc/rpc_main.c (h_output): Likewise.
	* sunrpc/rpc_svcout.c (write_real_program): Likewise.

2012-07-26  Pino Toscano  <toscano.pino@tiscali.it>

	* inet/check_native.c: New file.

2012-07-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p or direct log1p calculation
	if larger part has absolute value 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* elf/tst-auditmod1.c (pltenter): Remove all definitions of macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	Update #error for removed macros to refer only to definitions in
	tst-audit.h.
	* elf/tst-auditmod3b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod4b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod5b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6c.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod7b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* sysdeps/generic/tst-audit.h: Update comment to refer only to
	macro definitions in tst-audit.h.
	* sysdeps/i386/tst-audit.h: New file.
	* sysdeps/powerpc/powerpc32/tst-audit.h: Likewise.
	* sysdeps/powerpc/powerpc64/tst-audit.h: Likewise.
	* sysdeps/s390/s390-32/tst-audit.h: Likewise.
	* sysdeps/s390/s390-64/tst-audit.h: Likewise.
	* sysdeps/sh/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc32/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc64/tst-audit.h: Likewise.
	* sysdeps/x86_64/tst-audit.h: Likewise.

2012-07-26  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Add __THROW for
	ptrace.

	* sysdeps/unix/sysv/linux/sys/ptrace.h (__ptrace_eventcodes): Add
	new value PTRACE_EVENT_SECCOMP from Linux 3.5.
	(__ptrace_setoptions): Add new value PTRACE_O_TRACESECCOMP, adjust
	PTRACE_O_MASK.
	* sysdeps/unix/sysv/linux/s390/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ptrace.h: Likewise.

	* sysdeps/unix/sysv/linux/sys/epoll.h (EPOLLWAKEUP): Add new
	value.

	* sysdeps/unix/sysv/linux/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new marcro.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (struct): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.21 where previously 2.4.1.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [(__powerpc__ ||
	__sh__) && !__powerpc64__] (__ASSUME_FCNTL64): Do not condition on
	Linux kernel version.
	(__ASSUME_STD_AUXV): Remove.
	[__powerpc__] (__ASSUME_VFORK_SYSCALL): Do not condition on Linux
	kernel version.
	[__powerpc__ && !__powerpc64] (__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_NEW_PRCTL_SYSCALL): Remove.
	(__ASSUME_FIXED_CLONE_SYSCALL): Likewise.
	(__ASSUME_NEW_RT_SIGRETURN_SYSCALL): Likewise.
	(__ASSUME_NETLINK_SUPPORT): Likewise.
	* nscd/gai.c [NEED_NETLINK && __ASSUME_NETLINK_SUPPORT == 0]
	(__no_netlink_support): Remove conditional definition.
	* sysdeps/unix/sysv/linux/check_pf.c (__no_netlink_support):
	Remove.
	(__check_pf) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_NETLINK_SUPPORT]
	(if_nameindex_ioctl): Remove.
	(if_nameindex_netlink): Do not handle __no_netlink_support.
	(if_nameindex) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/ifaddrs.c [!__ASSUME_NETLINK_SUPPORT]:
	Remove conditional code.
	(__netlink_open) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	(getifaddrs_internal) [__ASSUME_NETLINK_SUPPORT]: Make code
	unconditional.
	[!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT] (freeifaddrs): Make code unconditional.
	* sysdeps/unix/sysv/linux/netlinkaccess.h (__no_netlink_support):
	Remove.
	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c
	[!__ASSUME_STD_AUXV]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone)
	[!__ASSUME_FIXED_CLONE_SYSCALL]: Remove conditional code.
	[__ASSUME_FIXED_CLONE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_mask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_mask_handler): Remove.
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_nomask_handler): Remove.
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/getcontext.S
	(__novec_getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__makecontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S
	(__novec_setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S
	(__novec_swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.

2012-07-25  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/i386/accept4.S: Remove pseudo_end label.
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/epoll_pwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-07-25  Florian Weimer  <fweimer@redhat.com>

	* Versions.def: Add GLIBC_2.17.
	* stdlib/stdlib.h: Rename __secure_getenv to secure_getenv.
	* include/stdlib.h: Rename __secure_getenv to secure_getenv.
	Introduce __libc_secure_getenv.
	* stdlib/Versions (2.17): Add secure_getenv
	(GLIBC_PRIVATE): Add __libc_secure_getenv.
	* stdlib/secure-getenv.c: Rename __secure_getenv to
	__libc_secure_getenv.  Add secure_getenv alias.  Add compatibility
	symbol __secure_getenv for GLIBC_2.0.
	* stdlib/tst-secure-getenv.c: New.
	* stdlib/Makefile (tests): Add testcase.
	* manual/startup.texi (Environment Access): Document
	secure_getenv.
	* hesiod/hesiod.c (hesiod_init): Rename __secure_getenv to
	__libc_secure_getenv.
	* inet/ruserpass.c (ruserpass): Likewise.
	* malloc/mtrace.c (mtrace): Likewise.
	* sysdeps/mach/hurd/tmpfile.c (__tmpfile): Likewise.
	* sysdeps/posix/libc_fatal.c (__libc_fatal): Likewise.
	* sysdeps/posix/sysconf.c (__sysconf__check_spec): Likewise.
	* sysdeps/posix/tempname.c: Likewise.  Evaluate
	HAVE_SECURE_GETENV.
	* sysdeps/unix/sysv/linux/libc_fatal.c (__libc_message): Rename
	__secure_getenv to __libc_secure_getenv.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Add secure_getenv.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/ldsodefs.h (struct La_i86_regs): Remove.
	(struct La_i86_retval): Likewise.
	(struct La_x86_64_regs): Likewise.
	(struct La_x86_64_retval): Likewise.
	(struct La_x32_regs): Likewise.
	(struct La_x32_retval): Likewise.
	(struct La_ppc32_regs): Likewise.
	(struct La_ppc32_retval): Likewise.
	(struct La_ppc64_regs): Likewise.
	(struct La_ppc64_retval): Likewise.
	(struct La_sh_regs): Likewise.
	(struct La_sh_retval): Likewise.
	(struct La_s390_32_regs): Likewise.
	(struct La_s390_32_retval): Likewise.
	(struct La_s390_64_regs): Likewise.
	(struct La_s390_64_retval): Likewise.
	(struct La_sparc32_regs): Likewise.
	(struct La_sparc32_retval): Likewise.
	(struct La_sparc64_regs): Likewise.
	(struct La_sparc64_retval): Likewise.
	(struct audit_ifaces): Remove architecture-specific pltenter and
	pltexit members.
	* sysdeps/i386/ldsodefs.h: New file.
	* sysdeps/powerpc/ldsodefs.h: Likewise.
	* sysdeps/s390/ldsodefs.h: Likewise.
	* sysdeps/sh/ldsodefs.h: Likewise.
	* sysdeps/sparc/ldsodefs.h: Likewise.
	* sysdeps/x86_64/ldsodefs.h: Likewise.

2012-07-25  Marek Polacek  <polacek@redhat.com>

	[BZ #6808]
	* math/libm-test.inc (yn_test): Add another test.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_ynl): Set errno
	to ERANGE when the result is +-Inf.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_ynf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_yn): Likewise.

2012-07-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	(CLOCKS_PER_SEC): Use macro instead of constant.  Specify type as
	clock_t.
	[ISO11] (TIME_UTC): Use macro-int-constant.  Require value > 0.

2012-07-23  Thomas Schwinge  <thomas@codesourcery.com>

	* configure.in <sysdeps resolving>: Correct printing
	Implies_before.
	* configure: Regenerate.

2012-07-22  Thomas Schwinge  <thomas@codesourcery.com>

	* math/w_ilogb.c: Include <limits.h>.
	* math/w_ilogbl.c: Likewise.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (__va_copy): Document primarily as ISO C99
	va_copy.  Document allowing for unavailable va_copy only as
	pre-C99 compatibility.
	* manual/string.texi (Copying and Concatenation): Use va_copy
	instead of __va_copy in concat example.

2012-07-20  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/sendto.c (create_address_port): New subroutine.
	(__sendto): Use create_address_port.  Initialize APORT and deallocate
	it if not null.

	* sysdeps/mach/hurd/llistxattr.c: New file, copied from listxattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/lremovexattr.c: New file, copied from removexattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/getgroups.c: Return -1 and set EINVAL for
	negative N or less than NGIDS.

	* sysdeps/mach/hurd/getlogin_r.c: Make LOGIN non-static and change its
	type to string_t.  Set ERANGE as errno and return it if NAME is not big
	enough.  Use memcpy instead of strncpy.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile (check-data): Remove.
	(localplt.data): New vpath directive.
	($(objpfx)check-localplt.out): Use localplt.data from vpath
	instead of $(check-data).
	* scripts/data/localplt-generic.data: Move to ...
	* sysdeps/generic/localplt.data: ... here.
	* scripts/data/localplt-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/localplt.data: ... here.
	* scripts/data/localplt-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/localplt.data:
	... here.
	* scripts/data/localplt-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/localplt.data:
	... here.

2012-07-19 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/tls-macros.h: Split PowerPC definitions in
	PPC32 and PPC64 files.
	* sysdeps/powerpc/powerpc32/tls-macros.h: New file.
	* sysdeps/powerpc/powerpc64/tls-macros.h: Likewise.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile: Add
	__makecontext_ret.S.
	* sysdeps/unix/sysv/linux/s390/s390-64/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile: Add
	__makecontext_ret.S.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* elf/elf.h (R_390_IRELATIVE): New definition.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Invoke the
	resolver function for IFUNC symbols.  Support R_390_IRELATIVE.
	(elf_machine_lazy_rel): Support R_390_IRELATIVE.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela):
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/dl-irel.h: New file.
	* sysdeps/s390/s390-64/memcpy.S: New asm code.
	* sysdeps/s390/s390-64/memset.S: New asm code.
	* sysdeps/s390/s390-64/memcmp.S: New asm code.
	* sysdeps/s390/s390-64/multiarch/memset.S: New file.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-64/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-32/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-32/multiarch/memset.S: New file.
	* sysdeps/s390/s390-32/memcpy.S: New asm code.
	* sysdeps/s390/s390-32/memset.S: New asm code.
	* sysdeps/s390/s390-32/memcmp.S: New asm code.

2012-07-17  Marek Polacek  <polacek@redhat.com>

	[BZ #14349]
	* sysdeps/s390/s390-32/configure.in: Remove TLS check.
	* sysdeps/s390/s390-64/configure.in: Likewise.
	* sysdeps/sparc/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/configure.in: Likewise.
	* sysdeps/i386/configure.in: Likewise.
	* sysdeps/x86_64/configure.in: Likewise.
	* sysdeps/sh/configure.in: Likewise.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/sh/configure: Likewise.
	* sysdeps/powerpc/powerpc64/configure: Likewise.
	* sysdeps/powerpc/powerpc32/configure: Likewise.
	* sysdeps/sparc/configure: Likwise.
	* sysdeps/i386/configure: Likewise.

	* elf/dl-open.c: Comment fixes.

2012-07-17  Joseph Myers  <joseph@codesourcery.com>

	* Makefile [CXX] (check-data): Remove.
	[CXX] (c++-types.data): New vpath directive.
	[CXX] ($(objpfx)c++-types-check.out): Use c++-types.data from
	vpath.  Do not allow for C++ type data being missing.
	* scripts/data/c++-types-alpha-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/alpha/nptl/c++-types.data.
	* scripts/data/c++-types-ia64-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/ia64/nptl/c++-types.data.
	* scripts/data/c++-types-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/c++-types.data: ... here.
	* scripts/data/c++-types-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x32-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x86_64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/c++-types.data: ... here.

	* elf/tls-macros.h (TLS_LE): Move architecture-specific
	definitions to architecture-specific files.
	(TLS_IE): Likewise.
	(TLS_LD): Likewise.
	(TLS_GD): Likewise.
	* sysdeps/i386/tls-macros.h: New file.
	* sysdeps/powerpc/tls-macros.h: Likewise.
	* sysdeps/s390/s390-32/tls-macros.h: Likewise.
	* sysdeps/s390/s390-64/tls-macros.h: Likewise.
	* sysdeps/sh/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc32/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc64/tls-macros.h: Likewise.
	* sysdeps/x86_64/tls-macros.h: Likewise.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Preserve
	zero value for regular exit case.

	* sysdeps/unix/sysv/linux/x86_64/__start_context.S
	(__start_context): Preserve zero value for regular exit case.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>
	    Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* manual/setjmp.texi (setcontext): Clarify normal process
	termination when uc_link is the null pointer.
	* stdlib/tst-makecontext.c (cf): Exercise this: remove explicit
	exit call.

2012-07-16  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/bug-getcontext.c (do_test): Don't test FE_ALL_EXCEPT in
	preprocessor.  Test for each exception mask separately.

2012-07-16  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update from translation team.

2012-07-15  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/string.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	(wcs*): Change to wcs[abcdefghijklmnopqrstuvwxyz]*.
	(mem[abcdefghijklmnopqrstuvwxyz]*): Allow.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-07-13  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

2012-07-12  Marek Polacek  <polacek@redhat.com>

	[BZ #14173]
	* math/libm-test.inc (yn_test): Add test for BZ #14173.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Correct
	loop condition.

2012-07-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.1 where previously 2.4.0.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [!__sh__]
	(__ASSUME_ST_INO_64_BIT): Do not condition definition on kernel
	version.
	[__i386__ || __sparc__] (__ASSUME_FCNTL64): Likewise.
	(__ASSUME_AT_CLKTCK): Remove.
	(__ASSUME_AT_PAGESIZE): Likewise.
	(__ASSUME_AT_XID): Likewise.
	(__ASSUME_GETDENTS64_SYSCALL): Define unconditionally.
	[__i386__] (__ASSUME_VFORK_SYSCALL): Define unconditionally.
	* sysdeps/unix/sysv/linux/ldsodefs.h (HAVE_AUX_XID): Define
	unconditionally.
	(HAVE_AUX_PAGESIZE): Likewise.
	* sysdeps/unix/sysv/linux/prof-freq.c (__profile_frequency)
	[__ASSUME_AT_CLKTCK]: Make code unconditional.
	[!__ASSUME_AT_CLKTCK]: Remove conditional code.

2012-07-12  Jeroen van Bemmel  <jvb127@gmail.com>

	[BZ #14307]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Increase the size of
	the temporary buffer used to invoke __gethostbyname2_r,
	__gethostbyaddr_r and gethostbyname4_r to make room for struct
	host_data / struct gaih_addrtuple.
	* resolv/nss_dns/dns-host.c (global scope): Move definition of
	implementation constants MAX_NR_ALIASES and MAX_NR_ADDRS to
	header file nss/nsswitch.h.
	* nss/nsswitch.h (global scope): Add definition of implementation
	constants MAX_NR_ALIASES and MAX_NR_ADDRS (moved from
	resolv/nss_dns/dns-host.c).

2012-07-11  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

	* po/sv.po: Update from translation team
	* po/fr.po: Another update from translation team.

2012-07-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Do not call sinh and cosh
	for subnormals or multiply small sinh result by itself.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-07-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-10  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14347]
	* misc/sys/syslog.h (LOG_MAKEPRI): Don't shift first argument.
	(INTERNAL_MARK): Shift it here.

2012-07-10  Marek Polacek  <polacek@redhat.com>

	[BZ #14151]
	* configure.in (libc_cv_asm_global_directive): Remove test.  Replace
	libc_cv_asm_global_directive with .globl.
	* configure: Regenerated.
	* sysdeps/i386/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/x86_64/configure: Regenerated.
	* config.h.in: Do not undefine ASM_GLOBAL_DIRECTIVE.
	* include/libc-symbols.h: Replace ASM_GLOBAL_DIRECTIVE with .globl.
	* elf/tst-unique2mod2.c: Likewise.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave1.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprrest.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprsave.S: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest1.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave0.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest0.S: Likewise.
	* locale/localeinfo.h: Likewise.
	(_NL_CURRENT_DEFINE_STRINGIFY): Delete macro.
	(_NL_CURRENT_DEFINE_STRINGIFY_1): Likewise.

2012-07-09  Roland McGrath  <roland@hack.frob.com>

	[BZ #14336]
	* manual/charset.texi (Extended Char Intro): Word use fix, "operating
	system".
	* manual/message.texi (The Uniforum approach): Likewise.
	* manual/charset.texi (Extended Char Intro): Spelling fix, "affected".
	(glibc iconv Implementation): Likewise.

2012-07-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14337]
	* math/s_clog.c (__clog): Avoid scaling a value down where that
	could result in underflow.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14283]
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/ppc-mcount.S [SHARED]: Don't use PLT
	for call to __mcount_internal.
	* sysdeps/powerpc/powerpc32/Makefile (sysdep_routines)
	(shared-only-routines) [$(subdir) = gmon]: Add compat-ppc-mcount.
	* sysdeps/powerpc/powerpc32/compat-ppc-mcount.S: New file.

2012-07-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14154]
	* sysdeps/ieee754/flt-32/k_tanf.c (__kernel_tanf): Use linear
	approximation for values within 0x1p-13f of an odd multiple of
	pi/4.
	* math/libm-test.inc (tan_test): Do not allow spurious underflow
	exception.  Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #6778]
	* sysdeps/i386/fpu/s_expm1.S (__expm1): Check for large negative
	inputs and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/i386/fpu/s_expm1f.S (__expm1f): Likewise.
	* sysdeps/i386/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/x86_64/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not
	define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Mike Frysinger  <vapier@gentoo.org>

	* sunrpc/rpc_clntout.c: Change <rpc/types.h> to "rpc/types.h".

2012-07-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14157]
	[BZ #14331]
	* math/s_csqrt.c (__csqrt): Avoid multiplying by 0.5 where this
	could result in spurious underflow.  Scale down values above
	DBL_MAX / 4.0 instead of DBL_MAX / 2.0.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-04  Andreas Schwab  <schwab@linux-m68k.org>

	* catgets/Makefile ($(objpfx)de.msg): Use xopen-msg.awk instead of
	xopen-msg.sed.
	* catgets/xopen-msg.awk: New file.
	* catgets/xopen-msg.sed: Removed.

	* intl/Makefile ($(objpfx)msgs.h): Use po2test.awk instead of
	po2text.sed.
	* intl/po2test.awk: New file.
	* intl/po2test.sed: Removed.

2012-07-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14328]
	* math/s_ctan.c (__ctan): Do not call sinh and cosh for subnormals
	or multiply small sinh result by itself.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/libm-test.inc (ctan_test_tonearest): New function.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(main): Call these new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-03  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Delete /ports entry.

2012-07-03  Andreas Jaeger  <aj@suse.de>

	* po/bg.po: Update from translation team.
	* po/cs.po: Likewise.
	* po/de.po: Likewise.
	* po/hr.po: Likewise.
	* po/nl.pl: Likewise.
	* po/pl.po: Likewise.
	* po/vi.po: Likewise.

2012-07-03  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig [!+link] (+link-before-libc): New variable.
	[!+link] (+link-after-libc): Likewise.
	[!+link] (+link-tests): Likewise.
	[!+link] (+link): Define in terms of $(+link-before-libc) and
	$(+link-after-libc).
	[!+link-static] (+link-static-before-libc): New variable.
	[!+link-static] (+link-static-after-libc): Likewise.
	[!+link-static] (+link-static-tests): Likewise.
	[!+link-static] (+link-static): Define in terms of
	$(+link-static-before-libc) and $(+link-static-after-libc).
	[build-shared] (link-libc-before-gnulib): New variable.
	[build-shared] (link-libc-tests): Likewise.
	[build-shared] (link-libc): Define in terms of
	$(link-libc-before-gnulib).
	[!build-shared] (link-libc-tests): New variable.
	(link-libc-static-tests): New variable.
	[!gnulib] (gnulib-arch): New variable.
	[!gnulib] (gnulib-tests): Likewise.
	[!gnulib] (static-gnulib-arch): Likewise.
	[!gnulib] (static-gnulib-tests): Likewise.
	[!gnulib] (gnulib): Use $(gnulib-arch).  Do not use $(libgcc_eh).
	Define with "=" instead of ":=".
	[!gnulib] (static-gnulib): Use $(static-gnulib-arch).  Do not use
	-lgcc_eh $(libunwind).  Define with "=" instead of ":=".
	* Rules (binaries-all-notests): New variable.
	(binaries-all-tests): Likewise.
	(binaries-static-notests): Likewise.
	(binaries-static-tests): Likewise.
	(binaries-all): Define using $(binaries-all-notests) and
	$(binaries-all-tests).
	(binaries-static): Define using $(binaries-static-notests) and
	$(binaries-static-tests).
	(binaries-shared-tests): New variable.
	(binaries-shared-notests): Likewise.
	(binaries-shared): Remove variable.
	($(addprefix $(objpfx),$(binaries-shared-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-shared-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-shared))): Remove rule.
	($(addprefix $(objpfx),$(binaries-static-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-static-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-static))): Remove rule.
	* elf/Makefile (sln-modules): New variable.
	(extra-objs): Add $(sln-modules:=.o).
	(ldconfig-modules): Add static-stubs.
	($(objpfx)sln): Depend on $(sln-modules:%=$(objpfx)%.o).
	* elf/static-stubs.c: New file.

	[BZ #14283]
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.  Use volatile
	variables when splitting into final array of floats if
	__FLT_EVAL_METHOD__ != 0.
	* math/libm-test.inc (cos_test): Add another test.
	(sin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #14273]
	* math/libm-test.inc (cosh_test): Add more tests.

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.16.90".

2012-06-30  Carlos O'Donell  <carlos_odonell@mentor.com>

	* NEWS: Update copyright. Remove last-updated date.
	Mention math library bug fixes and timezone data changes.
	* README: Mention GNU/Hurd, x32, and HPPA support status.

2012-06-28  Thomas Schwinge  <thomas@codesourcery.com>

	* manual/contrib.texi (Contributors): Sort alphabetically by last name.

2012-06-27  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Add Samuel Thibault.

2012-06-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-06-23  Andreas Schwab  <schwab@linux-m68k.org>
	    Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/syscalls.list: Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/Versions (GLIBC_2.16): Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist (GLIBC_2.16): Add
	fanotify_mark.

2012-06-23  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/start.c: Remove file.
	* sysdeps/mach/hurd/i386/static-start.S: Fix start.S include.
	* sysdeps/i386/init-first.c: Fix comment regarding start.S.
	* sysdeps/sh/init-first.c: Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Preserve r12 and pr
	registers for frame unwinding purposes, add CFI directives.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Likewise
	* sysdeps/unix/sysv/linux/sh/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Don't plan for the call to
	__fortify_fail returning.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.

	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S: New file, based on
	sysdeps/sh/____longjmp_chk.S.
	* sysdeps/unix/sysv/linux/sh/sigaltstack-offsets.sym: New file, based
	on sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/sh/Makefile [subdir=misc]
	(gen-as-const-headers): Append sigaltstack-offsets.sym.

	* sysdeps/sh/abort-instr.h: New file.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Terminate the
	process in case exit returns.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Always
	initialize the GOT register before use.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (__makecontext): Fix
	calculation of ARGC > 4.

	* sysdeps/unix/sysv/linux/sh/makecontext.S: Add comments and give more
	meaningful names to some local labels.

2012-06-22  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>
	    Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h
	(__arch_compare_and_exchange_val_8_acq): Remove explicit nop.
	(__arch_compare_and_exchange_val_16_acq): Likewise.
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(atomic_exchange_and_add): Fix gUSA sequence.
	(atomic_add): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.
	(atomic_bit_test_set): Likewise.

2012-06-22  Andreas Schwab  <schwab@redhat.com>

	[BZ #13579]
	* include/link.h (struct link_map): Add l_free_initfini.
	* elf/dl-deps.c (_dl_map_object_deps): Set it when assigning
	l_initfini.
	* elf/dl-close.c (_dl_close_worker): Don't free l_initfini.
	* elf/rtld.c (dl_main): Clear it on all objects loaded on startup.
	* elf/dl-libc.c (free_mem): Free l_initfini if l_free_initfini is
	set.

2012-06-22  Carlos O'Donell  <carlos_odonell@mentor.com>

	* configure.in: Use AC_LANG_SOURCE.
	* configure: Regenerate.

2012-06-22  Roland McGrath  <roland@hack.frob.com>

	* configure.in (libc_cv_localstatedir): New substituted variable.
	* configure: Regenerated.
	* config.make.in (localstatedir): New variable, substituted from
	libc_cv_localstatedir.
	* Makeconfig (vardbdir): Use $(localstatedir) in place of /var.
	* sysdeps/gnu/configure.in (libc_cv_localstatedir): Change
	${prefix}/var to /var when we change ${prefix}/etc to /etc.
	* sysdeps/gnu/configure: Regenerated.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #14277]
	* intl/dcigettext.c (_nl_find_msg): Avoid use after potential
	free.  Simplify list management for _LIBC case.

2012-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14273]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c (__ieee754_cosh):
	Clear sign bit of 64-bit integer value before comparing against
	overflow value.

	* sysdeps/mach/configure: Regenerated.

2012-06-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14278]
	* sysdeps/i386/sysdep.h (SYSCALL_PIC_SETUP): Fix a typo.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #13882]
	* elf/dl-deps.c (_dl_map_object_deps): Fix cycle detection.  Use
	uint16_t for elements in the "seen" array to avoid char overflows.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.
	* elf/dl-open.c (dl_open_worker): Likewise.

2012-06-21  Carlos O'Donell  <carlos_odonell@mentor.com>

	* scripts/list-sources.sh: Scan PORTS for translations.
	* po/libc.pot: Regenerated.

2012-06-21  Andreas Jaeger  <aj@suse.de>

	[BZ #12194]
	* sysdeps/s390/bits/byteswap-16.h (__bswap_16): Avoid -Wconversion
	warning.
	* sysdeps/s390/bits/byteswap.h (__bswap_constant_16): Likewise.
	* bits/byteswap-16.h (__bswap_16): Likewise.
	* bits/byteswap.h (__bswap_constant_16): Likewise.

2012-06-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu_control.h: Removed.
	* sysdeps/x86_64/fpu_control.h: Moved to ...
	* sysdeps/x86/fpu_control.h: Here.

	* sysdeps/x86_64/fpu_control.h (_FPU_GETCW): Add __volatile__.
	(_FPU_SETCW): Likewise.

2012-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Renamed to ...
	* sysdeps/x86/fpu/bits/mathinline.h: This.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Removed.

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Disable x87 inline
	functions if __x86_64__ is defined.

2012-06-15  Chung-Lin Tang  <cltang@codesourcery.com>

	* string/endian.h: Add !__ASSEMBLER__ condition for including
	conversion interfaces.

2012-06-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14241]
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use 0.0 instead
	of ABS(x) in calculating zero to negative powers other than odd
	integers.
	* math/libm-test.inc (pow_test): Add more tests.

2012-06-15  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Update entry of Liubov
	Dmitrieva and add entries for Will Schmidt and Tulio Magno Quites
	Machado Filho.

2012-06-15  Cyril Hrubis  <metan@ucw.cz>

	* string/string.h: Add __wur to GNU version of strerror_r.

2012-06-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14229]
	* string/Makefile (tests): Add tst-strtok_r.
	* string/tst-strtok_r.c: New file.
	* sysdeps/x86_64/strtok.S: Use LP_SIZE on save_ptr and use
	RAX_LP/RDX_LP on SAVE_PTR.

2012-06-14  Roland McGrath  <roland@hack.frob.com>

	* manual/Makefile ($(objpfx)texis): Do $(make-target-directory).

2012-06-14  Joseph Myers  <joseph@codesourcery.com>

	* libm_test.inc (csqrt_test): Allow more spurious underflow
	exceptions.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.

2012-06-13  Carlos O'Donell  <carlos_odonell@mentor.com>

	* po/Makefile (libc.pot): Use UTF-8 charset.

2012-06-13  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14210]
	Suppress sign-conversion warning from FD_SET.
	See <http://sourceware.org/ml/libc-alpha/2012-05/msg01794.html>.
	* debug/fdelt_chk.c (__fdelt_chk): Accept and return long int,
	not unsigned long int.
	* misc/bits/select2.h (__fdelt_chk, __fdelt_warn, __FD_ELT): Likewise.

2012-06-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h (__MATH_INLINE): Check
	__extern_always_inline instead of __extern_inline.
	(__signbitf): Support __SSE2_MATH__ and C++ namespace.
	(__signbit): Likewise.
	(__signbitl): Support C++ namespace.
	(lrintf): New inline function.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-06-12  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Fix case for
	non-default versions.

2012-06-11  Roland McGrath  <roland@hack.frob.com>

	[BZ #14218]
	* manual/argp.texi (Argp): Reword argp_parse description slightly.

2012-06-09  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/bits/fenv.h (__FE_UNDEFINED): Define.
	(FE_UPWARD, FE_DOWNWARD): Don't define.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Adapt to that.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Do not re-write fpscr after
	reading it.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-06-09  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: Refreshed.

2012-06-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/fenv.h: Removed.
	* sysdeps/i386/fpu/Implies: New file.
	* sysdeps/x86_64/fpu/Implies: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Renamed to ...
	* sysdeps/x86/fpu/bits/fenv.h: This.

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Check
	__SSE_MATH__.

2012-06-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14134]
	* iconvdata/ibm930.c (BODY) [FROM_LOOP]: Check for invalid
	character 0xffff that matches the last element of the
	conversion table.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Fix for wrong ldbl128-ibm
	fmodl commit.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Fix spurious underflow for
	values higher than 25.6283.

2012-06-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Fix
	subnormal exponent extraction and add some __builtin_expect.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_extract_mantissa):
	Fix for subnormal mantissa calculation.

2012-06-04  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-getcpu.c (do_test): Call perror when
	cpu2 is -1 and errno is not ENOSYS.

2012-06-04  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/i486/bits/string.h: Renamed to ...
	* sysdeps/x86/bits/string.h: This.
	* sysdeps/x86_64/bits/string.h: Removed.

	* sysdeps/i386/i486/bits/string.h: Define inline functions only
	if not compiling for x86-64, but compiling for >= i486.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sigcontext.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h (FP_XSTATE_MAGIC1):
	New macro from Linux kernel 3.4.0.
	(FP_XSTATE_MAGIC2): Likewise.
	(FP_XSTATE_MAGIC2_SIZE): Likewise.
	(X86_FXSR_MAGIC): New macro from Linux i386 kernel.
	(struct _fpx_sw_bytes): New struct.
	(struct _xsave_hdr): Likewise.
	(struct _ymmh_state): Likewise.
	(struct _xstate): Likewise.

	* sysdeps/unix/sysv/linux/i386/sys/debugreg.h: Removed.
	* sysdeps/unix/sysv/linux/i386/sys/reg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/debugreg.h: This.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/reg.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/io.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/io.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/io.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/perm.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/perm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/perm.h: This.

2012-06-04  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13743]
	* sysdeps/powerpc/sys/platform/ppc.h: New file for PowerPC features.
	* sysdeps/powerpc/Makefile (tests): Add test-gettimebase.
	(sysdep_headers): Include sys/platform/ppc.h.
	* sysdeps/powerpc/test-gettimebase.c: Test for
	__ppc_get_timebase() to catch future ISA opcode/insn changes.
	* manual/Makefile (appendices): Include platform.texi.
	* manual/contrib.texi (Contributors): Update @node pointers.
	* manual/maint.texi (Maintenance): Likewise.
	(Platform): New node.
	* manual/platform.texi: New file.  Document the new features.

2012-06-04  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	[BZ #14188]
	* misc/sys/cdefs.h (__glibc_unlikely): New macro to wrap cases
	where __builtin_expect is unavailable.

2012-06-03  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-02  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/mcount.c: New file.
	* sysdeps/powerpc/powerpc32/Versions (GLIBC_2.16): Add
	__mcount_internal.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.16): Likewise.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (outsw): Fix a typo.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	(default-abi): New variable.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Makefile: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile (default-abi): New
	variable.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile (default-abi):
	Likewise.

	* Makeconfig [abi-variants && !default-abi] (default-abi): Remove
	definition.  Document in comment.

2012-06-01  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/Makefile (sysdep_headers):
	Don't add sys/elf.h sys/perm.h sys/reg.h sys/vm86.h
	sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/x86/Makefile (sysdep_headers): Add
	sys/elf.h sys/perm.h sys/reg.h sys/vm86.h sys/debugreg.h
	sys/io.h.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (sysdep_headers):
	Don't add sys/perm.h sys/reg.h sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/elf.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/vm86.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h (DR_LEN_8):
	Define only if __x86_64__ is defined.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14048]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c (__ieee754_fmod):
	Use int64_t for variable i.
	* math/libm-test.inc (fmod_test): Add more tests.

	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Ensure temp + (double)
	z computation is not scheduled after fetestexcept.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <math_private.h>.
	Use math_force_eval instead of asm to ensure calculation scheduled
	before exception test.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <math_private.h>.
	Ensure a1 + u.d computation is not scheduled after fetestexcept.

2012-06-01  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/wchar.h: This.

2012-06-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/k_cosf.c: Fix underflow generation.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Include
	<bits/wordsize.h>.
	(__WCHAR_MIN): Support __WORDSIZE == 64.
	(__WCHAR_MAX): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h: This.

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__FSWORD_T_TYPE):
	Defined with __SWORD_TYPE if __x86_64__ isn't defined.

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/stat.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_KERNEL):
	Defined to 1 if __x86_64__ isn't defined.
	(_STAT_VER_LINUX_OLD): New.
	(st_atime): Remove duplicate.
	(st_mtime): Likewise.
	(st_ctime): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Remove sqrt(2) and sqrt test
	entries.

2012-06-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Sort through
	gen-libm-test.pl.

	[BZ #14132]
	* elf/dl-reloc.c: Include <_itoa.h>.
	(_dl_reloc_bad_type): Remove use of INTUSE.
	* elf/dl-minimal.c (_itoa, _itoa_lower_digits): Likewise.
	* stdio-common/_itoa.c (_itoa_word, _itoa): Likewise.
	* stdio-common/psiginfo.c (psiginfo): Likewise.
	* stdio-common/psignal.c (psignal): Likewise.
	* string/strsignal.c (strsignal): Likewise.
	* include/signal.h (_sys_siglist): Declare hidden proto.
	* stdio-common/itoa-digits.c: Include <_itoa.h>.  Replace
	INTVARDEF with libc_hidden_data_def.
	* stdio-common/itoa-udigits.c: Likewise.
	* sysdeps/generic/_itoa.h (_itoa_upper_digits_internal)
	(_itoa_lower_digits_internal): Remove declaration.
	(_itoa_upper_digits, _itoa_lower_digits): Declare hidden proto.
	* sysdeps/gnu/siglist.c (_sys_siglist_internal)
	(_sys_sigabbrev_internal): Remove aliases.
	(_sys_siglist): Define hidden alias.

2012-05-31  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/sysctl.h.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sysctl.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/user.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/user.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/procfs.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (insb): Replace addr
	with __addr.
	(insw): Likewise.
	(insl): Likewise.
	(outsb): Likewise.
	(outsw): Likewise.
	(outsl): Likewise.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/msq.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sem.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/shm.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/ipctypes.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/epoll.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/environments.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/environments.h: Renamed
	to ...
	* sysdeps/unix/sysv/linux/x86/bits/environments.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/a.out.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/a.out.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Error when compiling
	for x86-64.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Likewise.

2012-05-31  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h (M_El): Use two more decimal places.
	(M_LOG2El): Likewise.
	(M_LOG10El): Likewise.
	(M_LN2l): Likewise.
	(M_LN10l): Likewise.
	(M_PIl): Likewise.
	(M_PI_2l): Likewise.
	(M_PI_4l): Likewise.
	(M_1_PIl): Likewise.
	(M_2_PIl): Likewise.
	(M_2_SQRTPIl): Likewise.
	(M_SQRT2l): Likewise.
	(M_SQRT1_2l): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcpy.S: Use fsrc2 to move 64-bit
	values between float registers.
	* sysdeps/sparc/sparc64/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.

2012-05-31  Mike Frysinger  <vapier@gentoo.org>

	* debug/Makefile (CFLAGS-tst-longjmp_chk.c): Delete
	-D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk.c): Define.
	(CFLAGS-tst-longjmp_chk2.c): Delete -D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk2.c): Define.
	* wcsmbs/Makefile (CPPFLAGS-tst-wchar-h.c): Rename from
	CFLAGS-tst-wchar-h.c.

2012-05-31  Marek Polacek  <polacek@redhat.com>

	[BZ #14132]
	* include/mntent.h (__setmntent_internal, __getmntent_r_internal
	__endmntent_internal): Remove declaration.
	(__setmntent, __endmntent, __getmntent_r) [NOT_IN_libc]: Remove macro.
	(__setmntent, __endmntent, __getmntent_r): Declare hidden proto.
	* misc/mntent_r.c: Replace INTDEF with libc_hidden_def.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c
	(___Q_simulate_exceptions): Use real FP ops rather than writing
	into the %fsr.
	* sysdeps/sparc/sparc32/soft-fp/q_util.c (__Qp_handle_exceptions):
	Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/x86_64/bits/xtitypes.h: Renamed to ...
	* sysdeps/x86/bits/xtitypes.h: This.

	* sysdeps/x86_64/bits/wordsize.h: Renamed to ...
	* sysdeps/x86/bits/wordsize.h: This.

	* sysdeps/i386/bits/huge_vall.h: Renamed to ...
	* sysdeps/x86/bits/huge_vall.h: This.

	* sysdeps/i386/bits/select.h: Removed.
	* sysdeps/x86_64/bits/select.h: Renamed to ...
	* sysdeps/x86/bits/select.h: This.

	* sysdeps/i386/bits/setjmp.h: Removed.
	* sysdeps/x86_64/bits/setjmp.h: Renamed to ...
	* sysdeps/x86/bits/setjmp.h: This.

	* sysdeps/i386/bits/mathdef.h: Removed.
	* sysdeps/x86_64/bits/mathdef.h: Renamed to ...
	* sysdeps/x86/bits/mathdef.h: This.

2012-05-30  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* include/sys/socket.h (__connect_internal)
	(__libc_sa_len_internal): Remove declaration.
	(__connect, __libc_sa_len): Declare hidden_proto.
	(SA_LEN): Remove use of INTUSE.
	* socket/connect.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/connect.c: Replace INTDEF by libc_hidden_def.
	* sysdeps/unix/sysv/linux/sa_len.c: Likewise.
	* sysdeps/unix/inet/syscalls.list: Remove __connect_internal
	alias.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Use libc_hidden_weak instead
	of adding _internal alias.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/bits/link.h: Removed.
	* sysdeps/i386/bits/linkmap.h: Likewise.
	* sysdeps/x86_64/bits/link.h: Renamed to ...
	* sysdeps/x86/bits/link.h: This.
	* sysdeps/x86_64/bits/linkmap.h: Renamed to ...
	* sysdeps/x86/bits/linkmap.h: This.

	* sysdeps/i386/bits/endian.h: Removed.
	* sysdeps/x86_64/bits/endian.h: Renamed to ...
	* sysdeps/x86/bits/endian.h: This.

	* sysdeps/i386/bits/byteswap.h: Removed.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Renamed to ...
	* sysdeps/x86/bits/byteswap.h: This.
	* sysdeps/x86_64/bits/byteswap-16.h: Renamed to ...
	* sysdeps/x86/bits/byteswap-16.h: This.
	* sysdeps/i386/Implies: Add x86.
	* sysdeps/x86_64/Implies: Likewise.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* soft-fp/soft-fp.h (FP_CUR_EXCEPTIONS): Define.
	(FP_TRAPPING_EXCEPTIONS): Provide default implementation.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Signal underflow for
	subnormals only when inexact has been signalled or underflow
	exceptions are enabled.
	(_FP_PACK_CANONICAL): Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__NLINK_T_TYPE):
	Defined with __UWORD_TYPE if __x86_64__ isn't defined.

2012-05-30  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/make-syscalls.sh: Protect symbol_version output
	with #ifndef NOT_IN_libc.

	* scripts/abilist.awk: Accept 8 fields.  Handle Alpha functions
	marked to avoid plt entry.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14112]
	* Makeconfig (default-abi): New macro.
	(abi-includes): Likewise.
	($(common-objpfx)soversions.mk): Remove WORDSIZE check.  Use
	$(abi-$(default-abi)-lib-soname) for soname if defined.
	($(common-objpfx)gnu/lib-names.stmp): Generate from
	abi-variants.
	* Makefile (installed-stubs): Likewise.
	* include/stubs-biarch.h: Removed.
	* scripts/lib-names.awk: Only handle one library at a time.
	* scripts/soversions.awk: Remove WORDSIZE support.
	* shlib-versions: Remove WORDSIZE and i.86/s390x/powerpc64 ld
	entries.
	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-default-condition): Likewise.
	(syscall-list-default-condition): Likewise.
	(syscall-list-includes): Likewise.
	($(objpfx)bits/syscall%h $(objpfx)bits/syscall%d): Replace
	syscall-list-* with abi-*.  Handle undefined abi-variants.
	* sysdeps/unix/sysv/linux/i386/Makefile (default-abi): New macro.
	* sysdeps/unix/sysv/linux/i386/Implies: New file.
	* sysdeps/unix/sysv/linux/x86/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/Implies: Add unix/sysv/linux/x86.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-32-options): Likewise.
	(syscall-list-32-condition): Likewise.
	(syscall-list-64-options): Likewise.
	(syscall-list-64-condition): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (default-abi): New
	macro.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	(abi-64-ld-soname): New macro.
	* sysdeps/unix/sysv/linux/s390/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/sparc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	* sysdeps/x86_64/64/shlib-versions: Remove ld entry.
	* sysdeps/x86_64/x32/shlib-versions: Likewise.

2012-05-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_TRUNCATE64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.

	* configure.in (libc_cv_fpie): Weaken to a compile test using
	LIBC_TRY_CC_OPTION.
	* configure: Regenerated.

2012-05-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Refreshed.

2012-05-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c (___Q_numbers): Delete.
	(___Q_zero): New.
	(__Q_simulate_exceptions): Return void.  Change to simulate
	exceptions by writing into the %fsr.
	* sysdeps/sparc/sparc64/soft-fp/qp_util.c
	(__Qp_handle_exceptions): Likewise.
	(numbers): Delete.
	* sysdeps/sparc/sparc64/soft-fp/Versions: Remove entry for
	__Qp_handle_exceptions.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Remove
	__Qp_handle_exceptions.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(FP_INHIBIT_RESULTS): Define.
	(___Q_simulate_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS): Use ___Q_zero and tidy inline asm
	formatting.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(__Qp_handle_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS, QP_NO_EXCEPTIONS): Tidy inline asm
	formatting.

2012-05-27  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Use fpu_control_t for
	the temporary FPU control word.
	* sysdeps/sh/sh4/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-05-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Restore fpscr flag
	fields.

2012-05-27  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/_mcount.S (_mount): Add CFI directives.
	* sysdeps/unix/sh/sysdep.S (__syscall_error): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/swapcontext.S (__swapcontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/swapcontext.S (__swapcontext):
	Likewise.

2012-05-27  Ulrich Drepper  <drepper@gmail.com>

	* po/h.po: Update from translation team.

2012-05-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-irel.h: Include <ldsodefs.h>.

	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Optimize
	handling of denormals.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logbf): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c (_logb): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c (_logbl):
	Likewise.

2012-05-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14152]
	* math/libm-test.inc (fma_test): Don't always expect underflow
	exception.

2012-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12416]
	* elf/tst-execstack.c: Include stackinfo.h.
	(do_test): Adjust test case to ensure that pthread_getattr_np
	behaviour remains the same after marking stack executable.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.

2012-05-25  H.J. Lu  <hongjiu.lu@intel.com>

	* configure.in: Define the default includes to being none.
	* configure: Regenerated.

2012-05-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/__longjmp.S: Add a static probe here.
	* sysdeps/x86_64/setjmp.S: Likewise.
	* sysdeps/i386/bsd-setjmp.S: Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/i386/__longjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S: Likewise.

	* include/stap-probe.h: New file.
	* configure.in: Handle --enable-systemtap.
	* configure: Regenerated.
	* config.h.in (USE_STAP_PROBE): New #undef.
	* extra-lib.mk (CPPFLAGS-$(lib)): Add -DIN_LIB=$(lib).
	* elf/Makefile (CPPFLAGS-.os): Add -DIN_LIB=rtld.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.4.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat)
	[__ASSUME_32BITUIDS]: Make code unconditional.
	(fchownat) [!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getegid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid] (__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid] (__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SETRESUID_SYSCALL): Remove.
	(__ASSUME_SETRESGID_SYSCALL): Likewise.
	(__ASSUME_32BITUIDS): Likewise.
	(__ASSUME_LDT_WORKS): Likewise.
	(__ASSUME_O_DIRECTORY): Likewise.
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Define conditional on
	architecture but not kernel version.
	(__ASSUME_TRUNCATE64_SYSCALL): Likewise.
	(__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_STAT64_SYSCALL): Likewise.
	(__ASSUME_IPC64): Likewise.
	* sysdeps/unix/sysv/linux/local-setxid.h: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/opendir.c: Do not include
	<kernel-features.h>.
	[__ASSUME_O_DIRECTORY]: Make code unconditional.
	* sysdeps/unix/sysv/linux/opensock.c [__LINUX_KERNEL_VERSION <
	132096]: Remove conditional code.
	[__LINUX_KERNEL_VERSION >= 132096]: Make code unconditional.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid || __ASSUME_SETRESGID_SYSCALL]: Make code
	unconditional.
	(__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid || __ASSUME_SETRESUID_SYSCALL]: Make code
	unconditional.
	(__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sh/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.

2012-05-25  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/powerpc32/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela): Use
	elf_ifunc_invoke.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc64/dl-machine.h (resolve_ifunc): Likewise.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14153]
	* sysdeps/ieee754/flt-32/e_acosf.c (__ieee754_acosf): Return pi/2
	for |x| <= 2**-26, not 2**-57.
	* math/libm-test.inc (acos_test): Do not allow spurious underflow
	exception.

2012-05-24  Jeff Law  <law@redhat.com>

	* stdio-common/Makefile (tests): Add bug25.
	* stdio-common/bug25.c: New test.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13576]
	* malloc/malloc.c (sYSMALLOc): Free the old top chunk with a
	multiple of MALLOC_ALIGNMENT in size.
	(_int_free): Check chunk size is a multiple of MALLOC_ALIGNMENT.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/stdio.h-data (BUFSIZ): Use macro-int-constant.
	Require >= 256.
	(FILENAME_MAX): Use macro-int-constant.
	(FOPEN_MAX): Use macro-int-constant.  Require >= 8.
	(_IOFBF): Use macro-int-constant.
	(_IOLBF): Likewise.
	(_IONBF): Likewise.
	(SEEK_CUR): Likewise.
	(SEEK_END): Likewise.
	(SEEK_SET): Likewise.
	(TMP_MAX): Likewise.
	(EOF): Use macro-int-constant.  Require < 0.
	(NULL): Use macro-constant.  Require == 0.
	(stdin): Require type to be FILE *.
	(stdout): Likewise.
	(stderr): Likewise.
	* conform/data/stdlib.h-data (EXIT_FAILURE): Use
	macro-int-constant.
	(EXIT_SUCCESS): Likewise.
	(NULL): Use macro-constant.  Require == 0.
	(RAND_MAX): Use macro-int-constant.
	[ISO99 || ISO11] (lldiv_t): Require also for these standards.
	[C99-based standards] (strtof): Require function.
	[C99-based standards] (strtold): Likewise.
	[C99-based standards] (strtoll): Likewise.
	[C99-based standards] (strtoull): Likewise.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	[ISO || ISO99 || ISO11] (limits.h): Likewise.
	[ISO || ISO99 || ISO11] (math.h): Likewise.
	[ISO || ISO99 || ISO11] (sys/wait.h): Likewise.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-05-24  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* argp/argp-help.c (dgettext) [_LIBC]: Remove use of INTUSE.
	* argp/argp-parse.c (dgettext) [_LIBC]: Likewise.
	* intl/dgettext.c (DCGETTEXT): Likewise.
	* intl/gettext.c (DCGETTEXT): Likewise.
	* intl/l10nflist.c (__argz_count, __argz_stringify): Likewise.
	* posix/regex_internal.h (gettext): Likewise.
	* include/libintl.h (__dcgettext_internal, __dcngettext_internal):
	Remove declaration.
	* include/argz.h (__argz_count_internal)
	(__argz_stringify_internal): Remove declaration.
	(__argz_count, __argz_stringify): Declare hidden proto.
	* intl/dcgettext.c: Remove use of INTDEF.
	* string/argz-count.c: Replace INTDEF with libc_hidden_def.
	* string/argz-stringify.c: Likewise.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/stdio.h (__asprintf_internal): Don't declare.
	(__asprintf): Don't define as macro.  Declare hidden proto.
	* include/stdio_ext.h (__fsetlocking_internal): Don't declare.
	(__fsetlocking): Declare hidden proto.
	* libio/iolibio.h (_IO_fdopen, _IO_fflush, _IO_ftell, _IO_fread)
	(_IO_fwrite, _IO_setbuffer, _IO_setvbuf, _IO_vsprintf): Declare
	hidden proto.
	(_IO_vprintf, _IO_freopen, _IO_freopen64, _IO_setbuf)
	(_IO_setlinebuf): Remove use of INTUSE.
	(_IO_setbuffer_internal, _IO_fread_internal, _IO_fdopen_internal)
	(_IO_vsprintf_internal, _IO_fflush_internal, _IO_fwrite_internal)
	(_IO_ftell_internal, _IO_fputs_internal, _IO_setvbuf_internal):
	Remove declaration.
	* libio/libioP.h (INTUSE, INTDEF, INTDEF2): Don't define.
	(_IO_do_flush): Remove use of INTUSE.
	(_IO_switch_to_get_mode, _IO_init, _IO_sputbackc, _IO_un_link)
	(_IO_link_in, _IO_doallocbuf, _IO_unsave_markers, _IO_setb)
	(_IO_adjust_column, _IO_least_wmarker)
	(_IO_switch_to_main_wget_area, _IO_switch_to_wbackup_area)
	(_IO_switch_to_wget_mode, _IO_wsetb, _IO_sputbackwc)
	(_IO_wdoallocbuf, _IO_default_uflow, _IO_wdefault_uflow)
	(_IO_default_doallocate, _IO_wdefault_doallocate)
	(_IO_default_finish, _IO_wdefault_finish, _IO_default_pbackfail)
	(_IO_wdefault_pbackfail, _IO_default_xsputn, _IO_wdefault_xsputn)
	(_IO_default_xsgetn, _IO_wdefault_xsgetn, _IO_do_write)
	(_IO_wdo_write, _IO_flush_all, _IO_flush_all_linebuffered)
	(_IO_file_doallocate, _IO_file_setbuf, _IO_file_seekoff)
	(_IO_file_xsputn, _IO_file_xsgetn, _IO_file_stat, _IO_file_close)
	(_IO_file_underflow, _IO_file_overflow, _IO_file_init)
	(_IO_file_attach, _IO_file_fopen, _IO_file_read, _IO_file_sync)
	(_IO_file_close_it, _IO_file_seek, _IO_file_finish)
	(_IO_wfile_xsputn, _IO_wfile_sync, _IO_wfile_underflow)
	(_IO_wfile_overflow, _IO_wfile_seekoff, _IO_str_underflow)
	(_IO_str_overflow, _IO_str_pbackfail, _IO_str_seekoff)
	(_IO_getline, _IO_getline_info, _IO_list_all): Declare hidden
	proto.
	(_IO_flush_all_internal, _IO_adjust_column_internal)
	(_IO_default_uflow_internal, _IO_default_finish_internal)
	(_IO_default_pbackfail_internal, _IO_default_xsputn_internal)
	(_IO_default_xsgetn_internal, _IO_default_doallocate_internal)
	(_IO_wdefault_finish_internal, _IO_wdefault_pbackfail_internal)
	(_IO_wdefault_xsputn_internal, _IO_wdefault_xsgetn_internal)
	(_IO_wdefault_doallocate_internal, _IO_wdefault_uflow_internal)
	(_IO_file_doallocate_internal, _IO_file_setbuf_internal)
	(_IO_file_seekoff_internal, _IO_file_xsputn_internal)
	(_IO_file_xsgetn_internal, _IO_file_stat_internal)
	(_IO_file_close_internal, _IO_file_close_it_internal)
	(_IO_file_underflow_internal, _IO_file_overflow_internal)
	(_IO_file_init_internal, _IO_file_attach_internal)
	(_IO_file_fopen_internal, _IO_file_read_internal)
	(_IO_file_sync_internal, _IO_file_seek_internal)
	(_IO_file_finish_internal, _IO_wfile_xsputn_internal)
	(_IO_wfile_seekoff_internal, _IO_wfile_sync_internal)
	(_IO_str_underflow_internal, _IO_str_overflow_internal)
	(_IO_str_pbackfail_internal, _IO_str_seekoff_internal)
	(_IO_file_jumps_internal, _IO_wfile_jumps_internal)
	(_IO_list_all_internal, _IO_link_in_internal)
	(_IO_sputbackc_internal, _IO_wdoallocbuf_internal)
	(_IO_sgetn_internal, _IO_flush_all_linebuffered_internal)
	(_IO_switch_to_wget_mode_internal, _IO_unsave_markers_internal)
	(_IO_switch_to_main_wget_area_internal, _IO_wdo_write_internal)
	(_IO_do_write_internal, _IO_padn_internal)
	(_IO_getline_info_internal, _IO_getline_internal)
	(_IO_free_wbackup_area_internal, _IO_free_backup_area_internal)
	(_IO_switch_to_wbackup_area_internal, _IO_setb_internal)
	(_IO_sputbackwc_internal, _IO_switch_to_get_mode_internal)
	(_IO_vfscanf_internal, _IO_vfprintf_internal)
	(_IO_doallocbuf_internal, _IO_wsetb_internal, _IO_putc_internal)
	(_IO_init_internal, _IO_un_link_internal): Don't declare.
	* libio/fileops.c: Replace INTDEF with libc_hidden_def and INTDEF2
	with libc_hidden_ver, remove use of INTUSE.
	* libio/genops.c: Likewise.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofflush.c: Likewise.
	* libio/iofflush_u.c: Likewise.
	* libio/iofgets.c: Likewise.
	* libio/iofgets_u.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopncook.c: Likewise.
	* libio/iofread.c: Likewise.
	* libio/iofread_u.c: Likewise.
	* libio/ioftell.c: Likewise.
	* libio/iofwrite.c: Likewise.
	* libio/iogetline.c: Likewise.
	* libio/iogets.c: Likewise.
	* libio/iogetwline.c: Likewise.
	* libio/iopadn.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/ioseekoff.c: Likewise.
	* libio/ioseekpos.c: Likewise.
	* libio/iosetbuffer.c: Likewise.
	* libio/iosetvbuf.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/ioungetwc.c: Likewise.
	* libio/iovdprintf.c: Likewise.
	* libio/iovsprintf.c: Likewise.
	* libio/iovsscanf.c: Likewise.
	* libio/memstream.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/oldstdfiles.c: Likewise.
	* libio/putc.c: Likewise.
	* libio/setbuf.c: Likewise.
	* libio/setlinebuf.c: Likewise.
	* libio/stdfiles.c: Likewise.
	* libio/strops.c: Likewise.
	* libio/vasprintf.c: Likewise.
	* libio/vscanf.c: Likewise.
	* libio/vsnprintf.c: Likewise.
	* libio/vswprintf.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wfileops.c: Likewise.
	* libio/wgenops.c: Likewise.
	* libio/wmemstream.c: Likewise.
	* libio/wstrops.c: Likewise.
	* libio/__fpurge.c: Likewise.
	* libio/__fsetlocking.c: Likewise.
	* assert/assert.c: Likewise.
	* debug/fgets_chk.c: Likewise.
	* debug/fgets_u_chk.c: Likewise.
	* debug/fread_chk.c: Likewise.
	* debug/fread_u_chk.c: Likewise.
	* debug/gets_chk.c: Likewise.
	* debug/obprintf_chk.c: Likewise.
	* debug/vasprintf_chk.c: Likewise.
	* debug/vdprintf_chk.c: Likewise.
	* debug/vsnprintf_chk.c: Likewise.
	* debug/vsprintf_chk.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* misc/error.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/asprintf.c: Likewise.
	* stdio-common/fxprintf.c: Likewise.
	* stdio-common/getw.c: Likewise.
	* stdio-common/isoc99_fscanf.c: Likewise.
	* stdio-common/isoc99_scanf.c: Likewise.
	* stdio-common/isoc99_vfscanf.c: Likewise.
	* stdio-common/isoc99_vscanf.c: Likewise.
	* stdio-common/isoc99_vsscanf.c: Likewise.
	* stdio-common/printf-prs.c: Likewise.
	* stdio-common/printf_fp.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.
	* stdio-common/putw.c: Likewise.
	* stdio-common/scanf.c: Likewise.
	* stdio-common/sprintf.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* stdlib/strfmon_l.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.c: Likewise.
	* sysdeps/mach/hurd/tmpfile.c: Likewise.

2012-05-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

	* sysdeps/unix/make-syscalls.sh: Support "syscall:vdso_name@VDSOVER"
	in the third column, to generate for the shared library an IFUNC
	that uses _dl_vdso_vsym.
	* Makerules (COMPILE.c, compile-stdin.c): New variables.
	* Makeconfig (object-suffixes-noshared): New variable.

	* sysdeps/unix/sysv/linux/dl-vdso.h (PREPARE_VERSION_KNOWN): New macro.
	(VDSO_NAME_LINUX_2_6, VDSO_HASH_LINUX_2_6): New macros.
	(VDSO_NAME_LINUX_2_6_15, VDSO_HASH_LINUX_2_6_15): New macros.
	(VDSO_NAME_LINUX_2_6_29, VDSO_HASH_LINUX_2_6_29): New macros.

	[BZ #14132]
	* include/sys/time.h (__gettimeofday): Remove macro.
	(__gettimeofday, gettimeofday): Add libc_hidden_proto.
	* time/gettimeofday.c (__gettimeofday): Remove #undef.
	Remove INTDEF.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/mach/gettimeofday.c: Likewise.
	* sysdeps/posix/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c
	(__gettimeofday_internal): Remove strong_alias.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/unix/syscalls.list (gettimeofday):
	Remove __gettimeofday_internal alias.

2012-05-24  Daniel Jacobowitz  <drow@false.org>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12495]
	* malloc/malloc.c (SMALLBIN_CORRECTION): New.
	(MIN_LARGE_SIZE, smallbin_index): Use it to handle 16-byte alignment.
	(largebin_index_32_big): New.
	(largebin_index): Use it for 16-byte alignment.
	(sYSMALLOc): Handle MALLOC_ALIGNMENT > 2 * SIZE_SZ.  Don't update
	correction with front_misalign.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libBrokenLocale.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libanl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libcrypt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libdl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libnsl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libresolv.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/librt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libthread_db.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libutil.abilist:
	Likewise.

	* scripts/data/c++-types-x32-linux-gnu.data: New file.
	* sysdeps/x86_64/x32/shlib-versions: Add x32 ABI entry.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10846]
	[BZ #14036]
	* math/libm-test.inc (exp_test): Add test from bug 14036.
	(pow_test): Add test from bug 10846.

	* math/gen-libm-test.pl (%beautify): Remove entries for exceptions
	and other flags.
	(special_function): Do not include flags in test name.
	(parse_args): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/gen-libm-test.pl (%beautify): Add entries for underflow
	exceptions.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(UNDERFLOW_EXCEPTION): New macro.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.
	(INVALID_EXCEPTION_OK): Update value.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle underflow exceptions.
	(acos_test): Update for underflow exception expectations.
	(cexp_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fma_test): Likewise.
	(j0_test): Likewise.
	(jn_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(tan_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_sigaction): Remove unused local variables.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/configure: New file.

2012-05-23  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: avoid signed integer overflow
	* time/mktime.c (__mktime_internal): Do not mishandle the case
	where diff == INT_MIN.

	mktime: simplify computation of average
	* time/mktime.c (ranged_convert): Use new time_t_avg function
	instead of rolling our own (probably-slower) code.

	mktime: do not assume signed right shift propagates sign bit
	* time/mktime.c (isdst_differ): New static function.
	(__mktime_internal): No need to normalize tm_isdst now.
	(__mktime_internal, not_equal_tm): Use isdst_differ to compare
	tm_isdst values.

	mktime: merge another wrapv change from gnulib
	* time/mktime.c (TYPE_MAXIMUM): Rework slightly to avoid diagnostics
	from some compilers.

	mktime: remove incorrect attempt at unusual arithmetics
	* time/mktime.c (TYPE_ONES_COMPLEMENT, TYPE_SIGNED_MAGNITUDE): Remove.
	The code didn't really work on such machines anyway.
	(TYPE_MINIMUM): Assume two's complement.
	(twos_complement_arithmetic): Verify that long_int and time_t
	are two's complement (or unsigned, in the latter case).

	mktime: check signed shifts on long_int and time_t, too
	* time/mktime.c (SHR): Check that shifts work as desired
	on the types long_int and time_t too, as SHR is used on
	such types.

	mktime: do not assume 'long' is wide enough
	* time/mktime.c (verify): Move decl up.
	(long_int): New type.
	(leapyear, ydhms_diff, guess_time_tm, __mktime_internal): Use it,
	to remove assumption in the code that 'long' is wide enough to
	store year values.  This assumption is not true on x32 and on
	some non-glibc platforms.

	mktime: merge wrapv change from gnulib
	* time/mktime.c (WRAPV): New macro.
	(time_t_avg, time_t_add_ok, time_t_int_add_ok): New static functions.
	(guess_time_tm, __mktime_internal): Do not assume that signed
	integer overflow wraps around; modern compilers generate code
	where this assumption is no longer valid.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Replace "jmp L(pseudo_end)" with "ret".
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Add poll.
	* sysdeps/unix/sysv/linux/poll.c: Remove file.

2012-05-23  Andreas Jaeger  <aj@suse.de>
	    Maximilian Attems  <max@stro.at>

	* sysdeps/unix/sysv/linux/sys/reboot.h (RB_SW_SUSPEND, RB_KEXEC):
	New macros.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Rearrange
	code so that pseudo_end is just ret and the stack pointer is
	correct also for static library in error case.

2012-05-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/chown.c: Add comment suggesting
	move to syscalls.list.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.

	* manual/install.texi (Running make install): Do not mention Linux
	kernel version for which pt_chown is not needed.
	(Linux): Do not mention problems with nscd with 2.0 kernels.
	* INSTALL: Regenerated.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): New macros from Linux 3.4.
	macro.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/i386/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h
	(IP_MULTICAST_ALL,IP_UNICAST_IF): Likewise.

2012-05-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-vdso.h (CHECK_HASH): Macro removed.
	(PREPARE_VERSION): Just use assert instead, it will be elided
	under [NDEBUG] anyway.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/Makefile: Include
	$(firstword $(wildcard $(sysdirs:=/sysctl.mk))).
	(sysdep_routines): Remove sysctl.
	* sysdeps/unix/sysv/linux/bits/sysctl.h: New file.
	* sysdeps/unix/sysv/linux/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/sys/sysctl.h: Include <bits/sysctl.h>.

2012-05-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Rearrange code so
	that pseudo_end is just ret and the stack pointer is correct also
	for static library in error case.

2012-05-22  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14122]
	* nss/nsswitch.c (defconfig_entries): New variable.
	(__nss_database_lookup): Don't leak defconfig entries.
	(nss_parse_service_list): Don't leak on error paths.
	(free_database_entries): New function.
	(free_defconfig): New function.
	(free_mem): Move common code to free_database_entries.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (sysdep_routines):
	Add arch_prctl.
	* sysdeps/unix/sysv/linux/x86_64/x32/arch_prctl.c: New file.

	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate): Use INTERNAL_SYSCALL_TYPES if it is defined.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (INLINE_SYSCALL_TYPES):
	New macro.
	(INTERNAL_SYSCALL_NCS_TYPES): Likewise.
	(INTERNAL_SYSCALL_TYPES): Likewise.
	(LOAD_ARGS_TYPES_[1-6]): Likewise.
	(LOAD_REGS_TYPES_[1-6]): Likewise.
	(LOAD_ARGS_[1-6]): Use LOAD_ARGS_TYPES_[1-6].
	(LOAD_REGS_[1-6]): Use LOAD_REGS_TYPES_[1-6].

2012-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: Add compat symbol
	copysignl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Add compat symbol
	finitel for GLIBC_2.0 and __finitel for GLIBC_2_1.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: Add compat symbol
	logbl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Use "neg %eax".

	* time/mktime.c: Update copyright years.

2012-05-22  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: merge comment-quoting-style change from gnulib
	* time/mktime.c: Quote 'like this' in comments.
	The GNU coding standards suggest that we no longer quote `like this',
	as "`" and "'" are typically rendered asymmetrically nowadays.
	The typical gnulib style is to quote 'like this' when quoting
	code, and "like this" when quoting English.

	* time/mktime.c (compile-command): Add "-I.".

	mktime: merge mktime-internal.h change from gnulib
	* time/mktime.c [!_LIBC]: Include "mktime-internal.h".

	mktime: merge time_r change from gnulib
	* time/mktime.c [!_LIBC]: Do not include "time_r.h".

	mktime: merge DEBUG change from gnulib
	* time/mktime.c (mktime) [DEBUG]: #undef before #define-ing, in
	case system <time.h> has a #define.

	mktime: merge <sys/types.h> change from gnulib
	* time/mktime.c: Do not include <sys/types.h>; no longer needed,
	since <time.t> is now guaranteed to define time_t.

	mktime: merge HAVE_CONFIG_H change from gnulib
	* time/mktime.c: Include <config.h> if !_LIBC, not if HAVE_CONFIG_H.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	Use "neg %eax".

	* sysdeps/unix/sysv/linux/bits/resource.h (RLIM_INFINITY): Use
	__rlim_t cast.
	(struct rusage): Use anonymous union to pad each field to
	__syscall_slong_t.

2012-05-21  David S. Miller  <davem@davemloft.net>

	* Makefules (o-iterator): Remove .s cases.
	(compile-command.s): Delete.
	(COMPILE.s): Delete.
	* sysdeps/unix/make-syscalls.sh: Remove .s file tests.

2012-05-21  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_predef_stack_protector): Only consider
	"foobar" and "__stack_chk_fail" lines in libc_undefs.
	* configure: Regenerated.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	New macro.  Use R*LP on int and pointer.
	(SYSCALL_ERROR_HANDLER): Use SYSCALL_SET_ERRNO.
	* sysdeps/unix/sysv/linux/x86_64/x32/lseek.S: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/llseek.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysdep.h: Likewise.

	* sysdeps/gnu/bits/utmp.h (struct lastlog): Check
	[__WORDSIZE_TIME64_COMPAT32] instead of
	[__WORDSIZE == 64 && __WORDSIZE_COMPAT32].
	(struct utmp): Likewise.
	* sysdeps/gnu/bits/utmpx.h (struct utmpx): Likewise.
	* sysdeps/powerpc/powerpc32/bits/wordsize.h (__WORDSIZE_COMPAT32):
	Renamed to ...
	(__WORDSIZE_TIME64_COMPAT32): This.
	* sysdeps/powerpc/powerpc64/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc32/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/wordsize.h: Likewise.
	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE_COMPAT32): Removed.
	(__WORDSIZE_TIME64_COMPAT32): New macro.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/i686/multiarch/wcschr-c.c: Redefine libc_hidden_def
	only if [SHARED]. Add prototype for __wcschr_ia32.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/setjmp.S [PTR_MANGLE] [__ILP32__]: Preserve high bits
	of %rbp unmolested in the jmp_buf while mangling the low bits.
	* sysdeps/x86_64/__longjmp.S [PTR_DEMANGLE] [__ILP32__]: Restore the
	unmolested high bits of %rbp while demangling the low bits.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* include/shlib-compat.h (libc_sunrpc_symbol): New macro.
	* sunrpc/svc_simple.c: Use it for registerrpc.
	* sunrpc/xcrypt.c: Use it for passwd2des.

	* malloc/malloc.c: Include shlib-compat.h for SHLIB_COMPAT.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/statvfs.h (_STATVFSBUF_F_UNUSED):
	Don't define if [__SYSCALL_WORDSIZE != 32].
	* sysdeps/x86_64/bits/wordsize.h (__SYSCALL_WORDSIZE):
	New macro.

2012-05-21  Bruno Haible  <bruno@clisp.org>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13691], Revert breakage of iconv() converter for TCVN-5712.
	* iconvdata/tcvn5712-1.c (BODY for FROM_LOOP): Don't consider
	inptr and inend for must_buffer_ch.
	* wcsmbs/tst-mbsnrtowcs.c: Remove file.
	* wcsmbs/Makefile (tests): Remove tst-mbsnrtowcs.
	* stdio-common/Makefile (tests): Remove bug15.
	(bug15-ENV): Remove macro.
	* stdio-common/bug15.c: Remove, we do not support vi_VN.TCVN5712-1
	anymore.

2012-05-19  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* manual/contrib.texi: Completely rewritten. It contains now an
	alphabetical list of contributors and their contributions.

2012-05-21  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c (__getauxval): Use unsigned long int.
	* misc/sys/auxv.h: Include <sys/cdefs.h>.
	(getauxval): Use unsigned long int.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc.c [!SHLIB_COMPAT (libc, GLIBC_2_0, GLIBC_2_16)]
	(MALLOC_ALIGNMENT): Set it to the greater of 2 * SIZE_SZ and
	__alignof__ (long double).

2012-05-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-20  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c: New file.
	* misc/sys/auxv.h: New file.
	* misc/Makefile (headers): Add sys/auxv.h, bits/hwcap.h.
	(routines): Add getauxval.
	* misc/Versions (GLIBC_2.16): Add __getauxval, getauxval.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Add _dl_auxv.
	* elf/dl-sysdep.c (_dl_auxv): Remove.
	(_dl_sysdep_start, _dl_show_auxv): Use GLRO to access _dl_auxv.
	* elf/dl-support.c (_dl_auxv): New variable.
	(_dl_aux_init): Initialize it.
	* manual/startup.texi (Auxiliary Vector): New node.
	* sysdeps/generic/bits/hwcap.h: New file.
	* sysdeps/powerpc/bits/hwcap.h: New file, split out from ...
	* sysdeps/powerpc/sysdep.h: ... here.  Include it.
	* sysdeps/sparc/bits/hwcap.h: New file, split out from ...
	* sysdeps/sparc/sysdep.h: ... here.  Include it.
	* sysdeps/unix/sysv/linux/s390/bits/hwcap.h: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Update.

2012-05-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14123]
	* math/s_ccosh.c: Include <float.h>
	(__ccosh): Avoid internal overflow calculating sinh and cosh
	values before multiplying by sin and cos values.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/libm-test.inc (ccos_test): Add more tests.
	(ccosh_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/wordsize-64/preadv.c: New file.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev.c: Likewise.

	* sysdeps/x86_64/x32/_itoa.h: Add comment.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/soft-fp/Makefile: Remove file.
	* sysdeps/powerpc/soft-fp/Subdirs: Likewise.
	* sysdeps/powerpc/soft-fp/Versions: Likewise.
	* sysdeps/powerpc/soft-fp/q_add.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmp.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmpe.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_div.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_dtoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_feq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fge.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fgt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fle.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_flt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fne.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_itoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_lltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_mul.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_neg.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtod.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoi.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoll.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtos.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtou.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoull.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sqrt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_stoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sub.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_ulltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_util.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_utoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h: Likewise.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* csu/.gitignore: Delete.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/timex.h: Include <bits/types.h>.
	(timex): Use __syscall_slong_t.

2012-05-18  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* manual/install.texi (Configuring and compiling): Update
	description about files modified in the source directory.
	* INSTALL: Regenerated.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/x86_64/sysdep.S: Use RAX_LP to access return
	value.  Use "or" to set return value to -1.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.S: Use RAX_LP to
	negate return value.

2012-05-18  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/Makefile (CFLAGS-wordcopy.c,
	CFLAGS-memmove.c): remove -ftree-loop-linear which causes a build
	failure if the compiler has Graphite support disabled.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.
	* sysdeps/powerpc/powerpc64/power4/Makefile (CFLAGS-wordcopy.c,
	CFLAGS-memmove.c): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/_itoa.h: New file.

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): Use
	getdents system call only if kernel and user dirents have the
	same d_ino and d_off.

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Fold copyright
	years.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(sigcontext): Use "__uint64_t" instead of "unsigned long int"
	if __x86_64__ is defined.  Use anonymous union on fpstate.

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h (user): Use
	anonymous union.

2012-05-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-start.S (_dl_start_user): Use
	INTUSE on _dl_argv, and _rtld_local instead of _rtld_global.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S [IS_IN_rtld]:
	Refer to _rtld_local_ro instead of _rtld_global_ro.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S [SHARED]: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Use _rtld_local instead
	of _rtld_global, and rtld_progname instead of _dl_argv[0].

	* sysdeps/powerpc/powerpc32/dl-machine.c
	(__elf_machine_runtime_setup) [PROF]: Don't reference
	_dl_prof_resolve.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Make inline
	function only available for GCCs before 3.4 since GCC 3.4
	introduced a builtin.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/pselect.c (data): Use __syscall_ulong_t
	on both fields and cast pointer to __syscall_ulong_t.

	* bits/types.h (__fsword_t): New type.
	* bits/typesizes.h (__FSWORD_T_TYPE): New macro.
	sysdeps/mach/hurd/bits/typesizes.h (__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/bits/statfs.h (statfs): Replace
	__SWORD_TYPE with __fsword_t.
	(statfs64): Likewise.

2012-05-17  David S. Miller  <davem@davemloft.net>

	* crypt/sha512c-test.c (TIMEOUT): Increase to 32.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* elf/tst-relsort1.c (do_test): Fix function declaration to avoid
	warning.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/tst-mallocalign1.c (test): Cast to unsigned long.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/dl-machine.h (elf_machine_rel): Declare refsym only
	when it is used.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* stdio-common/bug22.c (TIMEOUT): Bump up from 30 to 60.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile (tests): Add tst-mallocalign1.
	* sysdeps/x86_64/tst-mallocalign1.c: New file.

2012-05-17  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #14059]
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_YMM_Usable): Rename to...
	(bit_AVX_Usable): ... this.
	(bit_FMA4_Usable): New macro.
	(bit_XMM_state): New macro.
	(bit_YMM_state): New macro.
	[__ASSEMBLER__] (index_YMM_Usable): Rename to...
	[__ASSEMBLER__] (index_AVX_Usable): ... this.
	[__ASSEMBLER__] (index_FMA4_Usable): New macro.
	(CPUID_OSXSAVE): New macro.
	(CPUID_AVX): New macro.
	(CPUID_FMA4): New macro.
	(index_YMM_Usable): Rename to...
	(index_AVX_Usable): ... this.
	(HAS_AVX): Use HAS_ARCH_FEATURE.
	(HAS_FMA4): Likewise.
	(HAS_YMM_USABLE): Remove.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable AVX or FMA4 IFF YMM and XMM states are usable and the features
	are present.
	* sysdeps/x86_64/multiarch/strcmp.S: Use bit_AVX_Usable.
	* sysdeps/i386/i686/multiarch/Makefile: Add test-multiarch to tests.
	* sysdeps/x86_64/multiarch/Makefile: Likewise.
	* sysdeps/i386/i686/multiarch/test-multiarch.c: New file.
	* sysdeps/x86_64/multiarch/test-multiarch.c: New file.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* math/libm-test.c: Support platforms without multiple rounding modes.
	* math/bug-nextafter.c: Support platforms without FP exceptions.
	* math/bug-nexttoward.c: Likewise.
	* math/test-fenv.c: Likewise.
	* math/test-misc.c: Likewise.
	* stdlib/bug-getcontext.c: Likewise.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* manual/examples/search.c (critter_cmp): Change signature to
	avoid warnings.
	* manual/string.texi (Collation Functions): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h: Fold copyright years.
	* bits/typesizes.h: Likewise.
	* sysdeps/mach/hurd/bits/typesizes.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h: Likewise.
	* time/time.h: Likewise.

2012-05-16  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #208]
	* malloc.c (int_mallinfo): Add parameter to accumulate statistics
	in instead of returning them.  Return void.
	(__libc_mallinfo): Accumulate over all arenas.
	(__malloc_stats): Adjust for change in int_mallinfo interface.

2012-05-16  Roland McGrath  <roland@hack.frob.com>

	[BZ #10375]
	* configure.in (NM): Add AC_CHECK_TOOL for it.
	(libc_extra_cflags): New substituted variable.
	Check for -fstack-protector being used implicitly.
	* configure: Regenerated.
	* config.make.in (config-extra-cflags): New variable,
	gets @libc_extra_cflags@.
	* Makeconfig (CFLAGS): Add $(config-extra-cflags) near the front.

	[BZ #10375]
	* configure.in: Check for _FORTIFY_SOURCE being predefined.
	(CPPUNDEFS): New substituted variable; add -U_FORTIFY_SOURCE if needed.
	* configure: Regenerated.
	* config.make.in (CPPUNDEFS): New substituted variable.
	* Makeconfig (CPPFLAGS): Put $(CPPUNDEFS) at the beginning.
	* Makerules ($(stdio_lim:h=st)): Use $(CPPUNDEFS).
	* time/ctime.c: Don't #undef __OPTIMIZE__ and ctime.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/mqueue.h: Include <bits/types.h>.
	(mq_attr): Use __syscall_slong_t.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_SVR4):
	Check __x86_64__ instead of __WORDSIZE.
	(_STAT_VER_LINUX): Likewise.
	(stat): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t and __syscall_slong_t.
	(stat64): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/ipc.h (ipc_perm): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(greg_t): Use "__extension__ long long int" if __x86_64__ is
	defined.
	(mcontext_t): Replace "unsigned long" with "unsigned long long".

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(user_regs_struct): Use "__extension__ unsigned long long"
	instead of "unsigned long" if __x86_64__ is defined.
	(user): Likewise.  Pad after pointer field if __ILP32__ is
	defined.

2012-05-16  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (makeinfo): Require version 4.5 or later.  Allow
	versions 5 to 9.
	* configure: Regenerated.
	* manual/install.texi (texinfo): Increase version requirement to
	4.5 or later.
	* INSTALL: Regenerated.

	* include/stdc-predef.h (__STDC_ISO_10646__): Increase to 201103L.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/gmp-mparam.h: New file.

	* sysdeps/x86_64/x32/ffs.c: New file.

	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h (shmatt_t): Use
	__syscall_ulong_t.
	(shmid_ds): Add __unused1 and __unused2 only if __x86_64__ isn't
	defined.  Use __syscall_ulong_t.
	(shminfo): Use __syscall_ulong_t.
	(shm_info): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semid_ds): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Don't include
	<bits/wordsize.h>.
	(msgqnum_t): Use __syscall_ulong_t.
	(msglen_t): Likewise.
	(msqid_ds): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: New file.

	* sysdeps/x86_64/x32/divdi3.c: New dummy file.
	* sysdeps/x86_64/x32/symbol-hacks.h: Likewise.

	* sysvipc/sys/msg.h (msgbuf): Replace long int with
	__syscall_slong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h (elf_greg_t): Use
	"unsigned long long int" if __x86_64__ is defined.
	(elf_fpregset_t): Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.
	(DR_CONTROL_RESERVED): Use ULL instead of UL suffix.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Include
	<stdint.h>.
	(GET_PC): Cast to uintptr_t first.
	(GET_FRAME): Likewise.
	(GET_STACK): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/glob.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: Likewise.

2012-05-16  Andreas Schwab  <schwab@linux-m68k.org>

	* Makerules (+depfiles): Also collect depfiles from .oS in
	$(extra-objs).
	* sysdeps/ieee754/ldbl-opt/Makefile (extra-objs): Add $(addsuffix
	.oS, $(libnldbl-routines)).

	* Makerules (native-compile-mkdep-flags): Define.
	* sunrpc/Makefile (extra-objs): Add $(addprefix
	cross-,$(rpcgen-objs)), don't add $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): Use $(native-compile-mkdep-flags) instead
	of $(compile-mkdep-flags).  Depend on $(before-compile) instead of
	calling $(make-target-directory).

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): Removed.
	* time/time.h (struct timespec): Replace __snseconds_t with
	__syscall_slong_t.
	* bits/typesizes.h (__SNSECONDS_T_TYPE): Removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SNSECONDS_T_TYPE):
	Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/mach/hurd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__syscall_slong_t): New type.
	(__syscall_ulong_t): Likewise.

	* bits/typesizes.h (__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/Makefile (gen-as-const-headers):
	Add sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Include
	<sigaltstack-offsets.h>.
	(CALL_FAIL): Use RSP_LP to operate on stack.  Use RDI_LP on
	longjmp_msg pointer.
	(____longjmp_chk): Use R8_LP and RDX_LP on SP and PC.  Use
	R*_LP, sizeSS, oSS_FLAGS, oSS_SP and oSS_SIZE for alternate
	signal stack.
	* sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym: New.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* elf/stackguard-macros.h: Remove file.
	* sysdeps/generic/stackguard-macros.h: New file.
	* sysdeps/i386/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc32/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc32/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc64/stackguard-macros.h: Likewise.
	* sysdeps/x86_64/stackguard-macros.h: Likewise.
	* nptl/tst-stackguard1.c: Include <stackguard-macros.h> not
	<elf/stackguard-macros.h>.

	[BZ #14109]
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h (elf_vrreg_t): Use
	__aligned__ in attribute.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (__psw_t): Likewise.
	(gregset_t): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Implies (wordsize-64): Moved to ....
	* sysdeps/x86_64/64/Implies-after: Here.  New file.
	* sysdeps/x86_64/x32/Implies-after: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.h: Use R*_LP to pass arguments
	and access return value for _dl_profile_fixup.  Use R10_LP to
	load frame size.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h: Allowed to be include more than once.
	* sysdeps/x86_64/x32/sysdep.h: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/__longjmp.S: Use R*_LP on SP and PC.
	* sysdeps/x86_64/setjmp.S: Likewise.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log2.c: New file.
	* sysdeps/ieee754/dbl-64/e_log2.c: Fixing indents.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise and also
	remove unused global constant.

2012-05-15  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/getsysstats.c: Remove duplicate
	include of <not-cancel.h>.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* nscd/nscd-client.h (__nscd_acquire_maplock): Fix formatting.

2012-05-15  Jeff Law  <law@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13594]
	* nscd/nscd-client.h (__nscd_acquire_maplock): New function, split
	out from...
	* nscd/nscd_helper.c (__nscd_get_map_ref): ... here.
	* nscd/nscd-client.h: Add __nscd_acquire_maplock.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): Add locking to
	code changing __hst_map_handle.map.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Look for Implies-before and Implies-after
	files.
	* configure: Regenerated.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sigaction.c (RESTORE2): Replace
	8-byte data alignment with LP_SIZE alignment.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/clone.S: Load pointer to TID
	into R10_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/dl-cache.h: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/getcpu.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu-static.c:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/stackinfo.h (stackinfo_get_sp): Use RSP_LP.
	(stackinfo_sub_sp): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Load pointers into
	RAX_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Load cache sizes
	into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Load cache
	sizes into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strcmp.S: Load pointers into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memcpy.S: Load __x86_64_data_cache_size_half
	into R11_LP and load __x86_64_shared_cache_size_half into
	R8_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Load cache size into
	R8_LP.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: New file. Optimized
	logb for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbf.c: New file. Optimized
	logbf for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c: New file. Optimized
	logbl for POWER7.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logb.c: New file. Use
	powerpc32/power7/fpu/s_logb.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbf.c: New file. Use
	powerpc32/power7/fpu/s_logbf.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbl.c: New file. Use
	powerpc32/power7/fpu/s_logbl.c via #include.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* README.libm: Remove file.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/start.S: Simulate popping 4-byte argument
	count for x32.  Use R*_LP and omit operand-size suffix.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* shlib-versions: Move x86_64-.*-linux.* entries to ...
	* sysdeps/x86_64/64/shlib-versions: Here.  New file.
	* sysdeps/x86_64/x32/shlib-versions: New file.

2012-05-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (dl_fatal): Function removed.
	* elf/rtld.c (dl_main) [DL_SYSDEP_OSCHECK]:
	Use _dl_fatal_printf instead.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (minimum_kernel): Always
	set if not set by the user.  Do not allow for being unset.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_load_address): Remove
	the `q' suffix from lea and replace .quad with ASM_ADDR.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PTR_MANGLE): Remove
	the `q' suffix from xor/rol instructions.  Use $2*LP_SIZE+1
	instead of $17.
	(PTR_DEMANGLE): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h (LP_SIZE): New macro.
	(LP_OP): Likewise.
	(ASM_ADDR): Likewise.
	(RAX_LP): Likewise.
	(RBP_LP): Likewise.
	(RBX_LP): Likewise.
	(RCX_LP): Likewise.
	(RDI_LP): Likewise.
	(RSI_LP): Likewise.
	(RSP_LP): Likewise.
	(R8_LP): Likewise.
	(R9_LP): Likewise.
	(R10_LP): Likewise.
	(R10_LP): Likewise.
	(R11_LP): Likewise.
	(R12_LP): Likewise.
	(R13_LP): Likewise.
	(R14_LP): Likewise.
	(R15_LP): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/dl-machine.h: New file.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* manual/Makefile (subdir): Remove export of subdir.
	(all): Remove target.
	(.PHONY): Remove all from list.
	(mkinstalldirs): Remove.
	(.PHONY): Remove installdirs from list.
	($(inst_infodir)/libc.info): Use make-target-directory.
	(installdirs): Remove.
	(subdir_%): Remove.
	(glibc-targets): Remove.
	(lib): Remove.
	(stubs): Remove.
	($(objpfx)stubs ../po/manual.pot): Remove.
	($(objpfx)stamp%): Remove.
	(make-target-directory): Remove.
	(subdir_install): Remove.
	(routines): Remove.
	(aux): Remove.
	(sources): Remove.
	(objects): Remove.
	(headers): Remove.

	[BZ #13750]
	* manual/.gitignore: Remove, it's not needed anymore.
	* manual/libc-texinfo.sh: Pass OUTDIR as extra argument, create
	all files in it.
	* manual/Makefile (dvi, pdf, info, html): Depend on files in build
	directory.
	(texis): Renamed to $(objpfx)texis.
	(texis-path): New, contains path to generated files.
	(chapters.%): Use texis-path for complete path, add extra argument
	libc-texinfo.sh.
	(libc.dvi, libc.pdf, libc.info, libc.pdf): Add $(objfpx) as prefix.
	(libc/index.html, summary.texi): Add $(objpfx) as prefix.
	(summary,texi, stamp-summary): Use complete path of
	files. Generate files in build dir.
	(dir-add.texi): Build in build dir.
	(libm-err.texi,stamp-libm-err): Likewise.
	(version.texi, stamp-version): Likewise.
	(.%c.texi): Likewise.
	(%.info,%.dvi,%.pdf): Add $(objpfx) as prefix, build in build dir.
	(mostlyclean): Remove target.
	(realclean): Remove target.
	(generated): Add new variable with contents from mostlyclean and
	realclean, remove entries duplicated in	common-mostlyclean, add
	stamp-libm-err and stamp-version.
	(generated-dirs): Add libc directory.
	($(inst_infodir)/libc.info): Install files from build dir.

	* manual/install.texi (Configuring and compiling): Adjust since
	the info files are not part of the tar ball anymore.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/getcwd.c (__getcwd): Remove unused
	variable.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.2.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/getcwd.c [!__ASSUME_GETCWD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_GETCWD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/chown.c [!__ASSUME_LCHOWN_SYSCALL]:
	Remove conditional code.
	[!__NR_lchown]: Likewise.
	[__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	[__NR_lchown]: Likewise.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat): Remove
	comment referencing __ASSUME_LCHOWN_SYSCALL.
	* sysdeps/unix/sysv/linux/i386/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_SIOCGIFNAME]:
	Remove conditional code.
	[__ASSUME_SIOCGIFNAME ]: Make code unconditional.
	(__protocol_available): Remove #if 0 code.
	* sysdeps/unix/sysv/linux/ifreq.c [!__ASSUME_SIOCGIFNAME]: Remove
	conditional code.
	[__ASSUME_SIOCGIFNAME]: Make code unconditional.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_GETCWD_SYSCALL): Don't define.
	(__ASSUME_REALTIME_SIGNALS): Likewise.
	(__ASSUME_PREAD_SYSCALL): Likewise.
	(__ASSUME_PWRITE_SYSCALL): Likewise.
	(__ASSUME_POLL_SYSCALL): Likewise.
	(__ASSUME_LCHOWN_SYSCALL): Likewise.
	(__ASSUME_SETRESUID_SYSCALL): Define for all kernel versions for
	non-SPARC.
	(__ASSUME_SIOCGIFNAME): Don't define.
	(__ASSUME_MSG_NOSIGNAL): Likewise.
	(__ASSUME_SENDFILE): Define unconditionally.
	(__ASSUME_PROC_SELF_FD_SYMLINK): Don't define.
	* sysdeps/unix/sysv/linux/poll.c [!__ASSUME_POLL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_POLL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/chown.c (__chown)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(__chown) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c (fchownat)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(fchownat) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal)
	[__LINUX_KERNEL_VERSION < 131443]: Remove conditional code.
	* sysdeps/unix/sysv/linux/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pwrite64.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigpending.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigprocmask.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigsuspend.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_missing_rt_sigs): Remove.
	(__libc_sigaction) [__NR_rt_sigaction]: Make code unconditional.
	(__libc_sigaction): Do not handle ENOSYS from rt_sigaction.
	* sysdeps/unix/sysv/linux/syslog.c [!__ASSUME_MSG_NOSIGNAL]:
	Remove conditional code.
	[__ASSUME_MSG_NOSIGNAL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/testrtsig.h (kernel_has_rtsig): Always
	return 1.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Likewise.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/bits/mathinline.h (__pow2): Remove,
	it's not used in glibc.
	(__coshm1): Likewise.
	(__acosh1p): Likewise.
	(__sgn): Likewise.

	* manual/string.texi (Copying and Concatenation): Add missing
	variable in concat example.
	Reported by David C. Rankin <drankinatty@suddenlinkmail.com>.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14103]
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Replace
	__builtin_clzl with __builtin_clzll.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14104]
	* sysdeps/unix/sysv/linux/check_pf.c (cache): Use
	libc_freeres_ptr.

2012-05-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf.c: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf-ia32.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: New file.

2012-05-14  Mike Frysinger  <vapier@gentoo.org>

	* NEWS: Update ia64 info.

2012-05-12  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/memmove.c (MEMMOVE): Don't return a value if
	used as bcopy.

2012-05-12  Thomas Schwinge  <thomas@codesourcery.com>

	* io/dup3.c (dup3): Rename to __dup3, add weak alias for dup3.
	* sysdeps/unix/syscalls.list (dup3): Likewise.
	* libio/freopen.c (freopen): Invoke __dup3 instead of dup3.
	* libio/freopen64.c (freopen64): Invoke __dup3 instead of dup3.

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/stackguard-macros.h (STACK_CHK_GUARD) [__x86_64__]: Use
	"%c1" with "i" (offsetof (tcbhead_t, stack_guard)).

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tls-macros.h (TLS_LE): Use mov instead of movq to load
	thread pointer.
	(TLS_IE): Use mov/add instead of movq/addq to load thread
	pointer.
	(TLS_GD_PREFIX): New.
	(TLS_GD): Use it.

2012-05-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/bits/fenv.h (__fenv_stfsr): Add __volatile__.
	* sysdeps/sparc/fpu/fpu_control.h (_FPU_GETCW):	Likewise.
	(_FPU_SETCW): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S: Check if RTLD_SAVESPACE_SSE
	is 32-byte aligned.

2012-05-11  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #11837]
	* iconvdata/gb18030.c: Update tables.
	(BODY for FROM_LOOP): Update.  Handle two-byte encoded non-BMP
	characters specially.
	(BODY for TO_LOOP): Add encoding of missing ranges.

2012-05-11  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13673]
	* sysdeps/mach/hurd/accept4.c: Replace FSF snail mail address with URL.
	* sysdeps/mach/hurd/dup3.c: Likewise.
	* sysdeps/mach/hurd/readlinkat.c: Likewise.
	* sysdeps/powerpc/memmove.c:: Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela_relative): Handle
	R_X86_64_RELATIVE64 only if RTLD_BOOTSTRAP isn't defined.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/elf.h (R_X86_64_RELATIVE64): New.
	(R_X86_64_NUM): Updated.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Handle
	R_X86_64_RELATIVE64.  Always use Elf64_Addr with R_X86_64_64.
	(elf_machine_rela_relative): Handle R_X86_64_RELATIVE64.
	* sysdeps/x86_64/Makefile (tests): Add tst-quad1 tst-quad2
	tst-quad1pie tst-quad2pie
	(modules-names): Add tst-quadmod1 tst-quadmod2.
	($(objpfx)tst-quad1): New dependency.
	($(objpfx)tst-quad2): Likewise.
	($(objpfx)tst-quad1pie): Likewise.
	($(objpfx)tst-quad2pie): Likewise.
	* sysdeps/x86_64/tst-quad1.c: New file.
	* sysdeps/x86_64/tst-quad1pie.c: New file.
	* sysdeps/x86_64/tst-quad2.c: Likewise.
	* sysdeps/x86_64/tst-quad2pie.c: Likewise.
	* sysdeps/x86_64/tst-quadmod1.S: Likewise.
	* sysdeps/x86_64/tst-quadmod1pie.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2pie.S: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* io/fcntl.h (mode_t, off_t, pid_t): Define types.
	(__mode_t_defined, __off_t_defined, __pid_t_defined): Define macros.
	* streams/stropts.h (t_scalar_t): Define type.

	* sysdeps/generic/paths.h (_PATH_MAN): Set to "/usr/share/man"
	(_PATH_PRESERVE): Set to "/var/lib".
	(_PATH_RWHODIR): Set to "/var/spool/rwho".

	* sysdeps/mach/hurd/openat.c (__openat): Set type of MODE to mode_t
	instead of int.

	* sysdeps/mach/hurd/xmknodat.c (__xmknodat): Deallocate NODE port only
	if __dir_mkfile succeeded.

	* sysdeps/mach/hurd/dup3.c: Lock _hurd_dtable_lock before
	checking for _hurd_dtablesize.  Unlock it right after having
	finished _hurd_dtable allocation.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/configure.in: Remove warning for --prefix=[...].
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in: Move --prefix=/usr
	special-casing to...
	* sysdeps/gnu/configure.in: ... this new file.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/gnu/configure: New generated file.

	* sysdeps/mach/hurd/bits/stat.h (struct stat): Align to what is done
	for Linux: use nsec instead of usec, as well as:
	[__USE_MISC || __USE_XOPEN2K8] (st_atim, st_mtim, st_ctim): New
	members of type struct timespec.
	[__USE_MISC || __USE_XOPEN2K8] (st_atime, st_mtime, st_ctime):
	New macros.
	(struct stat64): Likewise.
	(_STATBUF_ST_NSEC): New macro.
	* sysdeps/mach/hurd/xstatconv.c (xstat64_conv): Adapt to that.

	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__strtoul_internal rather than strtoul.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdsock.c (_hurd_socket_server): Check for negative domains,
	and reject them.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setresgid.c (__setresgid): Handle the -1 case,
	which preserves existing values.
	* sysdeps/mach/hurd/setresuid.c (__setresuid): Likewise.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdselect.c (_hurd_select): Return EINVAL for negative
	TIMEOUT values.  Return EINVAL for NFDS values either negative or
	greater than FD_SETSIZE.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/brk.c (_hurd_set_brk): When more space needs to be
	allocated, call __vm_protect to finish enabling the existing space, and
	pass a copy of _hurd_data_end instead of PAGEBRK to __vm_allocate to
	allocate the remainder.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/recvfrom.c (__recvfrom): Check also for a null
	address port.  Set ADDR_LEN to 0 when not filling ADDRARG.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/readlinkat.c: New file, heavily derived from
	sysdeps/mach/hurd/readlink.c.

	* posix/tst-sysconf.c (posix_options): Only use
	_POSIX_PRIORITIZED_IO, _POSIX_PRIORITY_SCHEDULING, and
	_POSIX_SYNCHRONIZED_IO when they are defined
	* sysdeps/mach/hurd/bits/posix_opt.h:
	(_POSIX_PRIORITY_SCHEDULING): Undefine macro.
	(_XOPEN_REALTIME): Undefine macro.
	(_XOPEN_REALTIME_THREADS): Undefine macro.
	(_XOPEN_SHM): Undefine macro.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_INHERIT): Define
	macro to -1.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_PROTECT): Define
	macro to -1.
	(_POSIX_ASYNC_IO): Undefine macro.
	(_POSIX_PRIORITIZED_IO): Undefine macro.
	(_POSIX_SPIN_LOCKS): Define macro to -1.

	* bits/sigaction.h [__USE_XOPEN2K8]: Define SA_RESTART,
	SA_NODEFER, SA_RESETHAND.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_XOPEN2K8]: Define
	O_NOFOLLOW, O_DIRECTORY, O_CLOEXEC, F_GETOWN, F_SETOWN,
	F_DUPFD_CLOEXEC.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* elf/Makefile (pldd-modules): Define unconditionally.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/opendir.c (__opendirat): New function.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdchdir.c (_hurd_change_directory_port_from_name):
	Return ENOENT when name is empty.
	* sysdeps/mach/hurd/chroot.c (chroot): Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* include/libc-symbols.h [NO_HIDDEN] (hidden_nolink): New macro.

	* nss/makedb.c (MAP_POPULATE): If not defined, define to zero.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix mlock in all cases except non-readable pages.
	* sysdeps/mach/hurd/mlock.c (mlock): Give VM_PROT_READ
	instead of VM_PROT_ALL as parameter to __vm_wire function.

	* sysdeps/mach/hurd/mkdir.c: Include <string.h>.
	(__mkdir): When path is `/', just fail with EEXIST.
	* sysdeps/mach/hurd/mkdirat.c: Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* nss/makedb.c: Include <sys/param.h> (for MAX and roundup), and
	<sys/uio.h> (for writev).
	* nss/nss_db/db-initgroups.c: Include <limits.h> (for ULONG_MAX),
	and <sys/param.h> (for MIN).

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/nanosleep.c: Return EINVAL for invalid values of
	REQUESTED_TIME.  Properly set the remaining time and return EINTR
	if interrupted.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/Makefile ($(common-objpfx)linkobj/libc.so):
	Depend on against $(link-rpcuserlibs).

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/generic/ldsodefs.h [LIBC_STACK_END_NOT_RELRO]
	(__libc_stack_end): Do not use attribute_relro.
	* sysdeps/mach/hurd/dl-sysdep.h (LIBC_STACK_END_NOT_RELRO): Define.
	* sysdeps/mach/hurd/i386/init-first.c (init): Update __libc_stack_end
	to libthread-provided value.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_stack_end): Do not use
	attribute_relro.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #3748]
	* bits/libc-lock.h (__libc_once_get): New macro.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_get
	instead of using implementation details.

	* libio/fileops.c: Unconditionally include <kernel-features.h>.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* misc/syslog.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/netgroupcache.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* math/w_ilogbf.c: Add #include <limits.h>.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setitimer.c (setitimer_locked): Use common exit
	path instead of returning without unlocking.

	* sysdeps/mach/hurd/bits/ioctls.h (_IOIW): New macro for
	immediate-write ioctls.
	* sysdeps/mach/hurd/ioctl.c: Handle cases with no arguments.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/i386/init-first.c (init): Use
	__builtin_frame_address instead of making assumptions about the
	location of the return address relative to DATA.  Force early load of
	the return address.
	(_dl_init_first, doinit1 in doinit in _hurd_stack_setup): Don't use
	__builtin_frame_address.

	dup3 for GNU Hurd.
	* include/unistd.h: Declare __dup3 and use libc_hidden_proto on it.
	* sysdeps/mach/hurd/dup3.c: New file, copy from dup2.c.  Evolve it to
	implement dup3 and do some further code clean-ups.
	* sysdeps/mach/hurd/dup2.c (__dup2): Reimplement using __dup3.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_DUP3): Define.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/dl-sysdep.c: Conditionalize contents on [SHARED].

	* hurd/hurd/fd.h (_hurd_fd_get): Call HURD_CRITICAL_BEGIN/
	HURD_CRITICAL_END around holding _hurd_dtable_lock.
	* sysdeps/mach/hurd/dirfd (dirfd): Likewise.
	* sysdeps/mach/hurd/opendir.c (_hurd_fd_opendir): Call
	HURD_CRITICAL_BEGIN/HURD_CRITICAL_END around holding
	d->port.lock.

	* hurd/catch-signal.c (hurd_catch_signal): Use sigsetjmp/siglongjmp
	instead of setjmp/longjmp to restore the signal mask.  Call sigsetjmp
	when handler == SIG_ERR, not when handler != SIG_ERR.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/bits/socket.h: New file, copy from the bsd4.4 one.
	(SOCK_MAX, SOCK_TYPE_MASK, SOCK_CLOEXEC, SOCK_NONBLOCK): New
	definitions.

	accept4 for GNU Hurd.
	* include/sys/socket.h (__libc_accept4): New prototype.
	* sysdeps/mach/hurd/accept4.c: New file, copy from accept.c.  Evolve it
	to implement __libc_accept4.
	* sysdeps/mach/hurd/accept.c (accept): Reimplement using
	__libc_accept4.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_ACCEPT4): Define.

	* sysdeps/mach/hurd/i386/____longjmp_chk.S: New file.
	* sysdeps/mach/hurd/i386/signal-defines.sym: New file.
	* sysdeps/mach/hurd/i386/Makefile (gen-as-const-headers): Add
	signal-defines.sym.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/in.h (SOL_IP, SOL_IPV6, SOL_ICMPV6): New macros.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/dl-sysdep.c (open_file): Do not raise
	assertion on O_CLOEXEC flag.
	* hurd/hurd/fd.h: Update comment to mention O_CLOEXEC.
	* hurd/intern-fd.c: Likewise.
	* hurd/port2fd.c: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3906]
	* bits/in.h (IPV6_PKTINFO): Define new macro.
	(IPV6_RXINFO,IPV6_TXINFO,SCM_SRCINFO): Redefine to IPV6_PKTINFO.

2012-05-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13954]
	[BZ #13955]
	[BZ #13956]
	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Fix for subnormal number.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* math/libm-test.inc (logb_test) : Additional logb tests.

2012-05-09  Andreas Schwab  <schwab@linux-m68k.org>
	    Andreas Jaeger  <aj@suse.de>

	* configure.in (obsolete-rpc): Add new option --enable-obsolete-rpc.
	* configure: Regenerated.
	* config.h.in (LINK_OBSOLETE_RPC): New macro.
	* config.make.in (link-obsolete-rpc): New substituted variable.
	* include/libc-symbols.h (libc_hidden_nolink_sunrpc): Rename from
	libc_hidden_nolink and define based on LINK_OBSOLETE_RPC.
	* sunrpc/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	(shared-only-routines): Don't set it under [link-obsolete-rpc],
	so that libc.a contains the symbols.
	* nis/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	* sunrpc/auth_des.c: Use libc_hidden_nolink_sunrpc.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Fix typo in last
	change.  Update copyright years.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* include/stdc-predef.h (__STDC_NO_THREADS__): Define.

2012-05-10  Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14012]
	* sunrpc/Makefile [cross-compiling] (headers): Enable additions
	requiring rpcgen.
	[cross-compiling] (extra-libs): Likewise.
	[cross-compiling] (extra-libs-others): Likewise.
	[cross-compiling] (librpcsvc-routines): Likewise.
	[cross-compiling] (librpcsvc-inhibit-o): Likewise.
	[cross-compiling] (omit-deps): Likewise.
	(sunrpc-CPPFLAGS): New variable.
	(CPPFLAGS): Define using $(sunrpc-CPPFLAGS).
	(BUILD_CPPFLAGS): Append $(sunrpc-CPPFLAGS).
	(cross-rpcgen-objs): New variable.
	(extra-objs): Append $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): New rule.
	($(objpfx)cross-rpcgen): Likewise.
	(rpcgen-cmd): Define to use $(built-program-file).  Expand
	comment.
	($(objpfx)rpcsvc/%.stmp): Depend on cross-rpcgen.
	($(objpfx)x%.stmp): Likewise.
	* sunrpc/proto.h [IS_IN_build] (_): Define.
	[IS_IN_build] (_libc_intl_domainname): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela) [__ILP32__]:
	Sign extend relocation result to 64 bits for R_X86_64_DTPOFF64
	and R_X86_64_TPOFF64.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/syscalls.list (alarm): Add entry from
	sysdeps/unix/sysv/syscalls.list.
	(stime): Likewise.
	(utime): Likewise.
	* sysdeps/unix/sysv/syscalls.list: Remove file.

2012-05-10  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #3440]
	* locale/bits/locale.h (__LC_CTYPE, __LC_NUMERIC, __LC_TIME)
	(__LC_COLLATE, __LC_MONETARY, __LC_MESSAGES, __LC_ALL, __LC_PAPER)
	(__LC_NAME, __LC_ADDRESS, __LC_TELEPHONE, __LC_MEASUREMENT)
	(__LC_IDENTIFICATION): Make these macros useful in #if
	expressions, as required by C99.

2012-05-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sunrpc/Makefile (extra-objs) [$(build-shared) = yes]: Add
	$(addsuffix .os,$(rpc-compat-routines)).  Move include ../Rules
	after this.

2012-05-09  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/longlong.h: Updated from GCC.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (run_modes): Make named enum, reorder so that
	default is first entry.
	(run_mode): Set type.
	(main): Remove informal message about syslog.
	(options): Fix typo.

	[BZ #14053]
	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Add __volatile
	to asm.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-05-09  Andreas Jaeger  <aj@suse.de>
	    Pedro Alves  <palves@redhat.com>

	* nscd/nscd.c (run_mode): Use enum.
	(main): Cleanup coding style issue.

2012-05-09  Alexandre Oliva  <aoliva@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (go_background): Replaced with...
	(run_mode): ... this.
	(RUN_FOREGROUND, RUN_DAEMONIZE, RUN_DEBUG): Add.
	(options): Add -F --foreground.
	(main): Implement it.
	(parse_opt): Parse it.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #14083]
	* string/bits/string2.h (strspn) [__GNUC_PREREQ(3, 2) &&
	!_HAVE_STRING_ARCH_strspn]: Cast zero to size_t to avoid
	-Wconversion warning.
	(strspn) [!__GNUC_PREREQ(3, 2) && !_HAVE_STRING_ARCH_strspn]:
	Likewise.

2012-05-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/locale.h-data (NULL): Use macro-constant.  Require
	== 0.
	(LC_ALL): Use macro-int-constant.
	(LC_COLLATE): Likewise.
	(LC_CTYPE): Likewise.
	(LC_MESSAGES): Likewise.
	(LC_MONETARY): Likewise.
	(LC_NUMERIC): Likewise.
	(LC_TIME): Likewise.
	[ISO || ISO99 || ISO11] (LC_MESSAGES): Do not require.
	(LC_*): Change to LC_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/math.h-data (HUGE_VAL): Use macro-constant.
	Specify type.
	[C99-based standards] (float_t): Expect type.
	[C99-based standards] (double_t): Expect type.
	[C99-based standards] (HUGE_VALF): Use macro-constant.  Specify
	type.
	[C99-based standards] (HUGE_VALL): Likewise.
	[C99-based standards] (INFINITY): Likewise.
	[C99-based standards] (NAN): Likewise.
	[C99-based standards] (FP_INFINITE): Use macro-int-constant.
	[C99-based standards] (FP_NAN): Likewise.
	[C99-based standards] (FP_NORMAL): Likewise.
	[C99-based standards] (FP_SUBNORMAL): Likewise.
	[C99-based standards] (FP_ZERO): Likewise.
	[C99-based standards] (FP_FAST_FMA): Use
	optional-macro-int-constant.  Specify type.  Require == 1.
	[C99-based standards] (FP_FAST_FMAF): Likewise.
	[C99-based standards] (FP_FAST_FMAL): Likewise.
	[C99-based standards] (FP_ILOGB0): Use macro-int-constant.
	[C99-based standards] (FP_ILOGBNAN): Likewise.
	[C99-based standards] (MATH_ERRNO): Use macro-int-constant.
	Specify type.
	[C99-based standards] (MATH_ERREXCEPT): Likewise.
	[C99-based standards] (math_errhandling): Specify type.
	[ISO99 || ISO11] (signgam): Do not allow.
	[non-C99-based standards] (copysignf): Do not allow.
	[non-C99-based standards] (exp2f): Likewise.
	[non-C99-based standards] (log2f): Likewise.
	[non-C99-based standards] (modff): Allow.
	[non-C99-based standards] (erff): Do not allow.
	[non-C99-based standards] (erfcf): Likewise.
	[non-C99-based standards] (gammaf): Likewise.
	[non-C99-based standards] (hypotf): Likewise.
	[non-C99-based standards] (j0f): Likewise.
	[non-C99-based standards] (j1f): Likewise.
	[non-C99-based standards] (jnf): Likewise.
	[non-C99-based standards] (lgammaf): Likewise.
	[non-C99-based standards] (tgammaf): Likewise.
	[non-C99-based standards] (y0f): Likewise.
	[non-C99-based standards] (y1f): Likewise.
	[non-C99-based standards] (ynf): Likewise.
	[non-C99-based standards] (isnanf): Likewise.
	[non-C99-based standards] (acoshf): Likewise.
	[non-C99-based standards] (asinhf): Likewise.
	[non-C99-based standards] (atanhf): Likewise.
	[non-C99-based standards] (cbrtf): Likewise.
	[non-C99-based standards] (expm1f): Likewise.
	[non-C99-based standards] (ilogbf): Likewise.
	[non-C99-based standards] (log1pf): Likewise.
	[non-C99-based standards] (logbf): Likewise.
	[non-C99-based standards] (nextafterf): Likewise.
	[non-C99-based standards] (remainderf): Likewise.
	[non-C99-based standards] (rintf): Likewise.
	[non-C99-based standards] (scalbf): Likewise.
	[non-C99-based standards] (copysignl): Likewise.
	[non-C99-based standards] (exp2l): Likewise.
	[non-C99-based standards] (log2l): Likewise.
	[non-C99-based standards] (modfl): Allow.
	[non-C99-based standards] (erfl): Do not allow.
	[non-C99-based standards] (erfcl): Likewise.
	[non-C99-based standards] (gammal): Likewise.
	[non-C99-based standards] (hypotl): Likewise.
	[non-C99-based standards] (j0l): Likewise.
	[non-C99-based standards] (j1l): Likewise.
	[non-C99-based standards] (jnl): Likewise.
	[non-C99-based standards] (lgammal): Likewise.
	[non-C99-based standards] (tgammal): Likewise.
	[non-C99-based standards] (y0l): Likewise.
	[non-C99-based standards] (y1l): Likewise.
	[non-C99-based standards] (ynl): Likewise.
	[non-C99-based standards] (isnanl): Likewise.
	[non-C99-based standards] (acoshl): Likewise.
	[non-C99-based standards] (asinhl): Likewise.
	[non-C99-based standards] (atanhl): Likewise.
	[non-C99-based standards] (cbrtl): Likewise.
	[non-C99-based standards] (expm1l): Likewise.
	[non-C99-based standards] (ilogbl): Likewise.
	[non-C99-based standards] (log1pl): Likewise.
	[non-C99-based standards] (logbl): Likewise.
	[non-C99-based standards] (nextafterl): Likewise.
	[non-C99-based standards] (remainderl): Likewise.
	[non-C99-based standards] (rintl): Likewise.
	[non-C99-based standards] (scalbl): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	[non-C99-based standards] (FP_*): Do not allow.
	[C99-based standards] (FP_*): Change to
	FP_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	* conform/data/setjmp.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/signal.h-data (SIG_DFL): Use macro-constant.
	(SIG_ERR): Likewise.
	[X/Open-based standards] (SIG_HOLD): Likewise.
	(SIG_IGN): Likewise.
	(SIGABRT): Use macro-int-constant.  Specify type.  Require
	positive value.
	(SIGFPE): Likewise.
	(SIGILL): Likewise.
	(SIGINT): Likewise.
	(SIGSEGV): Likewise.
	(SIGTER): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGHUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGKILL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGQUIT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR1): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR2): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCHLD): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCONT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSTOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTSTP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTOU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGBUS): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPOLL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPROF): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSYS): Likewise.
	[X/Open-based standards] (SIGTRAP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGURG): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGVTALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXCPU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXFSZ): Likewise.
	* conform/data/stdarg.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.

2012-05-08  Ian Wienand  <ianw@vmware.com>

	[BZ #14080]
	* time/tzset.c (__tzset_parse_tz): Update default rules for
	daylight time changes in the Energy Policy Act of 2005.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #13983]
	* elf/ldconfig.c (parse_conf): Change string to make clear that
	ldconfig only issued a warning if ld.so.conf does not exist.

2012-05-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: Use
	movxtod instead of popping the value on the stack.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-08  Carlos O'Donell  <carlos_odonell@mentor.com>

	* config.h.in: Add HAVE_ARM_PCS_VFP.

2012-05-08  Roland Mc Grath  <roland@hack.frob.com>

	[BZ #13979]
	* include/features.h: Warn if user requests __FORTIFY_SOURCE
	checking but the checks are disabled for any reason.

2012-05-08  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h: Replace Elf64_XXX with ElfW(XXX)
	and ELF64_R_TYPE with ELFW(R_TYPE).

2012-05-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/syscalls.list (pause): Remove.
	(ulimit): Likewise.

	* sysdeps/unix/sysv/syscalls.list (setrlimit): Remove.
	(settimeofday): Likewise.

2012-05-08  Mike Frysinger  <vapier@gentoo.org>

	* inet/arpa/tftp.h (struct tftphdr): Rename th_u to th_u1.  Add
	a struct th_u2 inside the union, and move tu_block/tu_code into
	a new th_u3 union of tu_block/tu_code inside of that.  Move
	th_data[1] into the th_u2 as tu_data[0].  Change tu_stuff[1] to
	tu_stuff[0].  Add a new tu_padding[4] to keep sizeof() the same.
	(th_block): Change to th_u1.th_u2.th_u3.tu_block.
	(th_code): Change to th_u1.th_u2.th_u3.tu_code.
	(th_stuff): Change to th_u1.tu_stuff.
	(th_data): Define.
	(th_msg): Change to th_u1.th_u2.tu_data.

2012-05-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	[BZ #14074]
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK_CALL): New macro.
	(SETUP_PIC_REG): Use it.
	(SETUP_PIC_REG_LEAF): Use it.

2012-05-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13885]
	[BZ #13923]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/i386/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/x86_64/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not disable
	test of -max_value argument for long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-06  David S. Miller  <davem@davemloft.net>

	* scripts/data/localplt-sparc-linux-gnu.data: Add '?' markers to
	quad soft-float symbols whose references which are compiler
	generated.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2012-05-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13884]
	[BZ #13914]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* sysdeps/i386/fpu/e_exp10l.S: Define USE_AS_EXP10L and include
	e_expl.S.
	* sysdeps/ieee754/dbl-64/e_exp10.c: New file.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* math/libm-test.inc (exp10_test): Add more tests.  Do not disable
	tests for bugs.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #14064]
	* math/libm-test.inc (check_float_internal): Correct ulp
	calculation for subnormal expected results.

2012-05-06  Andreas Jaeger  <aj@suse.de>

	* Makeconfig (+math-flags): New, set to -frounding-math.
	(+cflags): Add +math-flags so that all of glibc gets compiled with
	it.

	* sysdeps/x86_64/fpu/libm-test-ulps: Updated.

2012-05-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (hypot_test) [TEST_DOUBLE && TEST_INLINE]:
	Disable one test.

	[BZ #13787]
	[BZ #13922]
	[BZ #14036]
	* sysdeps/i386/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* sysdeps/ieee754/dbl-64/w_exp.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__exp): Call __ieee754_exp before checking for overflow and
	underflow.
	* sysdeps/ieee754/flt-32/w_expf.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expf): Call __ieee754_expf before checking for overflow and
	underflow.
	* sysdeps/ieee754/ldbl-96/w_expl.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expl): Call __ieee754_expl before checking for overflow and
	underflow.
	* sysdeps/x86_64/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* math/libm-test.inc (exp_test): Add another test.  Do not allow
	missing overflow exception on overflow.
	(expm1_test): Do not allow missing overflow exception on overflow.

	* sysdeps/i386/fpu/e_expl.c: Move to ...
	* sysdeps/i386/fpu/e_expl.S: ... here.  Write directly in assembly
	rather than using inline asm.
	* sysdeps/x86_64/fpu/e_expl.c: Remove file.
	* sysdeps/x86_64/fpu/e_expl.S: Copy from
	sysdeps/i386/fpu/e_expl.S, adjusted for x86_64.

	* sysdeps/unix/sysv/syscalls.list (ftime): Remove.
	(nice): Likewise.
	(poll): Likewise.
	(signal): Likewise.
	(time): Likewise.
	(times): Likewise.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/syscalls.list (adjtime): Add entry from
	sysdeps/unix/common/syscalls.list.
	(fchmod): Likewise.
	(fchown): Likewise.
	(ftruncate): Likewise.
	(getrusage): Likewise.
	(gettimeofday): Likewise.
	(setpgid): Likewise.
	(setregid): Likewise.
	(setreuid): Likewise.
	(sigaction): Likewise.
	(truncate): Likewise.
	(vhangup): Likewise.
	* sysdeps/unix/common/syscalls.list: Remove file.
	* sysdeps/unix/bsd/Implies: Don't include unix/common.
	* sysdeps/unix/sysv/linux/Implies: Likewise.

2012-05-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/ld.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libBrokenLocale.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libanl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libcrypt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libdl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libm.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libnsl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libresolv.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/librt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libthread_db.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libutil.abilist: Here.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/bits/dirent.h: Remove file.
	* sysdeps/unix/common/bits/fcntl.h: Likewise.

	* sysdeps/unix/bsd/bits/dirent.h: Remove file.
	* sysdeps/unix/bsd/bits/fcntl.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/isatty.c: Likewise.
	* sysdeps/unix/bsd/isatty.c: Likewise.
	* sysdeps/unix/bsd/tcdrain.c: Likewise.
	* sysdeps/unix/bsd/tcgetattr.c: Likewise.
	* sysdeps/unix/bsd/tcsetattr.c: Likewise.

2012-05-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13563]
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Fix
	long double comparison inaccuracies.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/make-syscalls.sh: Fix check for version aliases.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Revert last change.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14049]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Check for trailing
	nonzero digits before rounding a hex value.
	* stdlib/tst-strtod.c (tests): Add another test.

2012-05-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* malloc/mcheck.c (mcheck): Add barrier so that malloc/free pair
	does not get optimized out.
	(malloc_opt_barrier): New.

2012-05-03  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* Makerules (.PRECIOUS): Add %.symlist pattern to prevent
	intermediate file deletion.
	(generated): Add .symlist files.

2012-05-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h [__USE_XOPEN2K8] (__dprintf_chk):
	Redirect under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	* libio/bits/stdio2.h [__USE_XOPEN2K8] (__dprintf_chk): Declare
	under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_XOPEN2K8] (dprintf): Define under this condition.
	[__USE_XOPEN2K8] (vdprintf): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	[__USE_GNU] (dprintf): Likewise.
	[__USE_GNU] (vdprintf): Likewise.

2012-05-03  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (common-generated): Set this instead of generated for
	.dyn, .phdr, .jmprel files.  Remove $(common-objpfx) from the
	$(all-built-dso)-derived lists.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* FAQ: Removed.
	* FAQ.in: Likewise.
	* scripts/gen-FAQ.pl: Likewise.
	* manual/install.texi (Installation): Point to online location of
	FAQ.
	* Makefile (files-for-dist): Remove FAQ.
	(FAQ): Remove.

2012-05-02  Allan McRae  <allan@archlinux.org>

	* elf/Makefile: (LDFLAGS-nodel2mod3.so: Use $(no-as-needed).
	(LDFLAGS-reldepmod5.so): Likewise.
	(LDFLAGS-reldep6mod1.so): Likewise.
	(LDFLAGS-reldep6mod4.so): Likewise.
	(LDFLAGS-reldep8mod3.so): Likewise.
	(LDFLAGS-unload4mod1.so): Likewise.
	(LDFLAGS-unload4mod2.so): Likewise.
	(LDFLAGS-tst-initorder): Likewise.
	(LDFLAGS-tst-initordera2.so): Likewise.
	(LDFLAGS-tst-initordera3.so): Likewise.
	(LDFLAGS-tst-initordera4.so): Likewise.
	(LDFLAGS-tst-initorderb2.so): Likewise.
	(LDFLAGS-noload): Likewise.
	(LDFLAGS-next): Likewise.
	(LDFLAGS-order2mod1.so): Likewise.
	(LDFLAGS-order2mod2.so): Likewise.
	(LDFLAGS-tst-initorder2): Likewise.
	(LDFLAGS-tst-initorder2a.so): Likewise.
	(LDFLAGS-tst-initorder2b.so): Likewise.
	(LDFLAGS-tst-initorder2c.so): Likewise.
	* stdlib/Makefile: (LDFLAGS-tst-putenv): Likewise.

2012-05-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-02  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14055]
	* elf/dl-sysdep.c (_dl_show_auxv): Add bounds check.

2012-05-02  Andreas Jaeger  <aj@suse.de>

	* math/Makefile (CPPFLAGS-test-ildoubl.c): Add -frounding-math
	since we manipulate rounding mode.
	(CPPFLAGS-test-idouble.c): Likewise.
	(CPPFLAGS-test-ifloat.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-float.c): Likewise.
	(CFLAGS-test-misc.c): Likewise.
	(CFLAGS-test-test-fenv.c): Likewise.

2012-05-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #2550]
	[BZ #2570]
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Use floating-point
	comparisons to determine direction to adjust input.

2012-05-01  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile ($(objpfx)check-localplt.out): Redirect the test's
	output to the target.

	* scripts/localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt): Target removed.
	(check-localplt-CFLAGS): Variable removed.
	($(all-built-dso:=.jmprel)): New static pattern rule.
	(generated): Add those targets.
	(localplt-built-dso): New variable.
	($(objpfx)check-localplt.out): Use the script on the .jmprel files.

	* elf/check-localplt.c: File removed.

	* scripts/check-execstack.awk: New file.
	* elf/Makefile ($(objpfx)check-execstack): Target removed.
	(check-execstack-CFLAGS): Variable removed.
	($(objpfx)check-execstack.h): Target removed.
	($(objpfx)execstack-default): New target.
	(generated): Add that instead of check-execstack.h.
	($(all-built-dso:=.phdr)): New static pattern rule.
	(generated): Add those targets.
	* elf/check-execstack.c: File removed.

	* scripts/check-textrel.awk: New file.
	* elf/Makefile ($(objpfx)check-textrel): Target removed.
	(check-textrel-CFLAGS): Variable removed.
	(all-built-dso): Use := to define.o
	($(all-built-dso:=.dyn)): New static pattern rule.
	(generated): Add those targets.
	($(objpfx)check-textrel.out): Use the script on the .dyn files.
	* config.make.in (READELF): New substituted variable.
	* elf/check-textrel.c: File removed.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/assert.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/ctype.h-data [C99-based standards] (isblank):
	Expect function.
	(is*): Change to is[abcdefghijklmnopqrstuvwxyz]*.
	(to*): Change to to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/errno.h-data (EDOM): Use macro-int-constant.
	Specify type.  Require positive value.
	(EILSEQ): Likewise.
	(ERANGE): Likewise.
	[ISO || POSIX] (EILSEQ): Do not expect.
	[!ISO && !ISO99 && !ISO11] (E2BIG): Use macro-int-constant.
	Specify type.  Require positive value.
	[!ISO && !ISO99 && !ISO11] (EACCES): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRINUSE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRNOTAVAIL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAFNOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAGAIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EALREADY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADF): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBUSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECANCELED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECHILD): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNABORTED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNREFUSED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNRESET): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDEADLK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDESTADDRREQ): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDQUOT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EEXIST): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFAULT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFBIG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EHOSTUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIDRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINPROGRESS): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINVAL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ELOOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMSGSIZE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMULTIHOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENAMETOOLONG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETDOWN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOBUFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODATA): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODEV): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOENT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOEXEC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMEM): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOPROTOOPT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSPC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSYS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTEMPTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENXIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOPNOTSUPP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOVERFLOW): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPERM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTONOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTOTYPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EROFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESRCH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESTALE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIME): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIMEDOUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETXTBSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXDEV): Likewise.
	[XOPEN2K8 || defined POSIX2008] (ENOTRECOVERABLE): Likewise.
	[XOPEN2K8 || defined POSIX2008] (EOWNERDEAD): Likewise.
	* conform/data/float.h-data (FLT_RADIX): Use macro-int-constant.
	Require >= 2.
	(FLT_ROUNDS): Expect as macro, not constant.
	(FLT_MANT_DIG): Use macro-int-constant.
	(DBL_MANT_DIG): Likewise.
	(LDBL_MANT_DIG): Likewise.
	(FLT_DIG): Likewise.
	(DBL_DIG): Likewise.
	(LDBL_DIG): Likewise.
	(FLT_MIN_EXP): Use macro-int-constant.  Require < 0.
	(DBL_MIN_EXP): Likewise.
	(LDBL_MIN_EXP): Likewise.
	(FLT_MAX_EXP): Use macro-int-constant.
	(DBL_MAX_EXP): Likewise.
	(LDBL_MAX_EXP): Likewise.
	(FLT_MAX_10_EXP): Likewise.
	(DBL_MAX_10_EXP): Likewise.
	(LDBL_MAX_10_EXP): Likewise.
	(FLT_MAX): Use macro-constant.
	(DBL_MAX): Likewise.
	(LDBL_MAX): Likewise.
	(FLT_EPSILON): Use macro-constant.  Give upper bound.
	(DBL_EPSILON): Likewise.
	(LDBL_EPSILON): Likewise.
	(FLT_MIN): Likewise.
	(DBL_MIN): Likewise.
	(LDBL_MIN): Likewise.
	[C99-based standards] (DECIMAL_DIG): Use macro-int-constant.
	[C99-based standards] (FLT_EVAL_METHOD): Likewise.
	[ISO11] (DBL_HAS_SUBNORM): Use macro-int-constant.
	[ISO11] (FLT_HAS_SUBNORM): Likewise.
	[ISO11] (LDBL_HAS_SUBNORM): Likewise.
	[ISO11] (DBL_DECIMAL_DIG): Likewise.
	[ISO11] (FLT_DECIMAL_DIG): Likewise.
	[ISO11] (LDBL_DECIMAL_DIG): Likewise.
	[ISO11] (DBL_TRUE_MIN): Use macro-constant.
	[ISO11] (FLT_TRUE_MIN): Likewise.
	[ISO11] (LDBL_TRUE_MIN): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/limits.h-data (CHAR_BIT): Use macro-int-constant.
	(SCHAR_MIN): Use macro-int-constant.  Specify type.
	(SCHAR_MAX): Likewise.
	(UCHAR_MAX): Likewise.
	(CHAR_MIN): Likewise.
	(CHAR_MAX): Likewise.
	(MB_LEN_MAX): Use macro-int-constant.
	(SHRT_MIN): Use macro-int-constant.  Specify type.
	(SHRT_MAX): Likewise.
	(USHRT_MAX): Likewise.
	(INT_MAX): Likewise.
	(INT_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.
	(UINT_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "U".
	(LONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "L".
	(LONG_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.  Suffix upper bound with "L".
	(ULONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "UL".
	[C99-based standards] (LLONG_MIN): Use macro-int-constant.
	Specify type.
	[C99-based standards] (LLONG_MAX): Likewise.
	[C99-based standards] (ULLONG_MAX): Likewise.
	* conform/data/stddef.h-data (NULL): Use macro-constant.  Require
	== 0.
	[ISO11] (max_align_t): Require type.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

	* conform/conformtest.pl ($CFLAGS_namespace): Define separately
	from $CFLAGS, without defining away __attribute__ calls.
	(checknamespace): Use $CFLAGS_namespace.

	* conform/conformtest.pl (@keywords): Only include C99 keywords
	for standards based on C99 or C11.

	* conform/data/iso646.h-data [ISO || POSIX || XPG3 || XPG4]:
	Disable tests.
	* conform/data/stdint.h-data [ISO || POSIX || XPG3 || XPG4 ||
	UNIX98]: Likewise.

	* conform/conformtest.pl: Handle "macro-int-constant" and test for
	usability of symbols in #if.

	* conform/conformtest.pl: If macro or constant types start
	"promoted:", expect the symbol to be of the following type
	promoted by the integer promotions.

	* conform/conformtest.pl: Parse all "constant" and "macro" lines
	in one place.  Also handle "macro-constant".

	* conform/conformtest.pl: Only accept expected macro values with
	"==".  Parse all "macro" lines in one place.
	* conform/data/stdlib.h-data: Use "==" form on "macro" lines.

	* conform/conformtest.pl: Handle braced types on "constant" lines
	instead of handling "typed-constant".
	* conform/data/signal.h-data: Use "constant" instead of
	"typed-constant".

	* conform/conformtest.pl: Handle "optional-" at start of lines in
	one place rather than duplicating several cases.  Handle each
	format of "macro" line with initial "optional-".

	* conform/conformtest.pl: Only accept expected constant or
	optional-constant values with "==".  Parse all "constant" lines in
	one place.  Parse all "optional-constant" lines in one place.
	* conform/data/cpio.h-data: Use "==" form on "constant" lines.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/limits.h-data: Use "==" form on "constant" and
	"optional-constant" lines.

	* conform/conformtest.pl: Use -ansi for XPG3, XPG4 and UNIX98.
	Use -std=c99 for XOPEN2K.
	(@knownproblems): Remove.
	(newtoken): Don't check %isknown.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (fpclassify):
	Do not expect macro.
	[XPG3 || XPG4 || UNIX98] (isfinite): Likewise.
	[XPG3 || XPG4 || UNIX98] (isinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnormal): Likewise.
	[XPG3 || XPG4 || UNIX98] (signbit): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreaterequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (isless): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isunordered): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Expect as function.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALF): Do not expect.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALL): Likewise.
	[XPG3 || XPG4 || UNIX98] (INFINITY): Likewise.
	[XPG3 || XPG4 || UNIX98] (NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_INFINITE): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_SUBNORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ZERO): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMA): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAF): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGB0): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGBNAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysign): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgama): Likewise.
	[XPG3] (acosh): Likewise.
	[XPG3] (asinh): Likewise.
	[XPG3] (atanh): Likewise.
	[XPG3] (cbrt): Likewise.
	[XPG3] (expm1): Likewise.
	[XPG3] (ilogb): Likewise.
	[XPG3] (log1p): Likewise.
	[XPG3] (logb): Likewise.
	[XPG3] (nextafter): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttoward): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyint): Likewise.
	[XPG3] (remainder): Likewise.
	[XPG3] (rint): Likewise.
	[XPG3 || XPG4 || UNIX98] (round): Likewise.
	[XPG3 || XPG4 || UNIX98] (trunc): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (lround): Likewise.
	[XPG3 || XPG4 || UNIX98] (llround): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquo): Likewise.
	[UNIX98 || XOPEN2K] (scalb): Expect.
	[XPG3 || XPG4 || UNIX98] (scalbn): Do not expect.
	[XPG3 || XPG4 || UNIX98] (scalbln): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdim): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmax): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmin): Likewise.
	[XPG3 || XPG4 || UNIX98] (fma): Likewise.
	[XPG3 || XPG4 || UNIX98] (nan): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceilf): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expf): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsf): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodf): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10f): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (modff): Likewise.
	[XPG3 || XPG4 || UNIX98] (powf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (erff): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcf): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotf): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderf): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquof): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdimf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceill): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expl): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsl): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodl): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10l): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (modfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (powl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcl): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotl): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynl): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderl): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquol): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdiml): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmal): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanl): Likewise.

	* conform/conformtest.pl: Define _XOPEN_SOURCE as well as
	_XOPEN_SOURCE_EXTENDED for XPG4.

	* conform/conformtest.pl: Handle "symbol" lines for allow-header.

	* Makeconfig (localtime): Remove variable.
	(inst_localtime-file): Likewise.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/librt.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Update.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2550]
	[BZ #2570]
	* math/s_nexttowardf.c (__nexttowardf): Use floating-point
	comparisons to determine direction to adjust input.
	* sysdeps/i386/fpu/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c(__nexttowardf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c (__nldbl_nexttowardf):
	Likewise.
	* math/libm-test.inc (nexttoward_test): Add more tests.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14040]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (nearbyintl): Define
	in version GLIBC_2.1, not GLIBC_2.0.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S (nearbyintl):
	Likewise.

2012-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13942]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Calculate 1 - x^2 as
	(1 - x) * (1 + x).
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* sysdeps/i386/fpu/e_asin.S (__ieee754_asin): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(asin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14034]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Take absolute value
	of square root.
	* sysdeps/i386/fpu/e_acosf.S (__ieee754_acosf): Likewise.
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* math/libm-test.inc (acos_test_tonearest): New function.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #13884]
	[BZ #13924]
	* math/e_exp10.c: Include <float.h>.
	(__ieee754_exp10): Handle underflow here rather than multiplying
	large negative argument by M_LN10.
	* math/e_exp10f.c (__ieee754_exp10f): Call __ieee754_exp instead
	of __ieee754_expf.
	* math/e_exp10l.c: Include <float.h>.
	(__ieee754_exp10l): Handle underflow here rather than multiplying
	large negative argument by M_LN10l.
	* math/libm-test.inc (exp10_test): Add another test.  Do not allow
	spurious overflow exception on underflow.

2012-04-29  Marek Polacek  <polacek@redhat.com>

	* misc/sys/cdefs.h (__attribute_artificial__): New macro.
	(__fortify_function): New macro.
	(__extern_always_inline): Don't use __attribute__ ((__artificial__)).
	* libio/bits/stdio-ldbl.h: Use __fortify_function in place of
	__extern_always_inline.
	* libio/bits/stdio2.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* string/string.h: Likewise.
	* string/bits/string3.h: Likewise.
	* include/stdio.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/unistd.h: Likewise.
	* io/bits/poll2.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/sys/poll.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/bits/syslog-ldbl.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* socket/bits/socket2.h: Likewise.
	* socket/sys/socket.h: Likewise.
	* debug/tst-chk1.c: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/bits/wchar-ldbl.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

2012-04-29  Andreas Jaeger  <aj@suse.de>

	* Makerules (tests): Remove enable-check-abi protection.
	(check-abi-warn): Remove.
	(check-abi-%): Remove check-abi-warn usage.

	* configure.in: Remove check-abi configure option.
	* configure: Regenerated.
	* config.make.in (enable-check-abi): Remove.

2012-04-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14033]
	* math/bits/math-finite.h [__NO_LONG_DOUBLE_MATH]: Redirect long
	double functions to double *_finite functions.

	[BZ #13941]
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c
	(__mpn_extract_long_double): Use DBL_MIN_EXP instead of
	LDBL_MIN_EXP.
	* stdio-common/Makefile (tests): Add tst-sprintf3.
	* stdio-common/tst-sprintf3.c: New file.

	* elf/Makefile ($(objpfx)tst-leaks1-mem, $(objpfx)noload-mem)
	($(objpfx)tst-unused-dep.out): Don't run when cross-compiling.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Remove duplicate typed-constant
	handling.

2012-04-28  David S. Miller  <davem@davemloft.net>

	* Makerules (%.abilist): Add vpath on sysdep_dirs.
	(check-abi-%): Remove AWK script prerequisite and explicit
	abilist directory.
	(check-abi): Rewrite to just diff the symlist with the abilist.
	(config-tls, config-abi-config): Delete, no longer used.
	(update-abi-%): Remove AWK script and explicit abilist directory.
	(update-abi): Rewrite to simply compare and conditionally copy the
	symlist and the sysdep abilist file.  Remove update-abi-config
	checks.
	* abilist/ld.abilist: Remove.
	* abilist/libBrokenLocale.abilist: Remove.
	* abilist/libanl.abilist: Remove.
	* abilist/libcrypt.abilist: Remove.
	* abilist/libdl.abilist: Remove.
	* abilist/librt.abilist: Remove.
	* abilist/libthread_db.abilist: Remove.
	* abilist/libutil.abilist: Remove.
	* scripts/extract-abilist.awk: Remove.
	* scripts/merge-abilist.awk: Remove.
	* sysdeps/generic/libcidn.abilist: New file.
	* sysdeps/generic/libnss_compat.abilist: New file.
	* sysdeps/generic/libnss_db.abilist: New file.
	* sysdeps/generic/libnss_dns.abilist: New file.
	* sysdeps/generic/libnss_files.abilist: New file.
	* sysdeps/generic/libnss_hesiod.abilist: New file.
	* sysdeps/generic/libnss_nis.abilist: New file.
	* sysdeps/generic/libnss_nisplus.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/ld.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libc.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libm.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libutil.abilist: New
	file.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Fix typo in handling typed-constant from
	allow-header.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	* README: Cut down references to pre-2.6 Linux kernels and
	Linuxthreads.  Update lists of configurations in libc and ports
	and sort alphabetically.  Say "or newer" with Linux kernel version
	requirements.

	* config.h.in [IS_IN_build]: Allow compiling without optimization.

2012-04-27  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	[BZ #887]
	* math/libm-test.inc (logb_test_downward): New test to expose
	erroneous negative sign on -0.0 result of logb[l](1) in FE_DOWNWARD
	rounding mode.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14027]
	* math/fclrexcpt.c (__feclearexcept): Return zero if nothing needs
	to be done.
	* math/fraiseexcpt.c (__feraiseexcept): Likewise.
	* math/fsetexcptflg.c (__fesetexceptflag): Likewise.

2012-04-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/i386/brk.S: Remove file.
	* sysdeps/unix/i386/dl-brk.S: Likewise.
	* sysdeps/unix/i386/pipe.S: Likewise.
	* sysdeps/unix/i386/sigreturn.S: Likewise.
	* sysdeps/unix/i386/syscall.S: Likewise.
	* sysdeps/unix/i386/vfork.S: Likewise.
	* sysdeps/unix/i386/wait.S: Likewise.

	* sysdeps/unix/common/tcsendbrk.c: Move to ...
	* sysdeps/unix/sysv/linux/tcsendbrk.c: ... here.

	* configure.in (arm*-none*): Do not allow without
	--enable-hacker-mode.
	(netbsd*): Remove case setting base_os.
	(386bsd*): Likewise.
	(freebsd*): Likewise.
	(bsdi*): Likewise.
	(osf*): Likewise.
	(sunos*): Likewise.
	(ultrix*): Likewise.
	(newsos*): Likewise.
	(dynix*): Likewise.
	(*bsd*): Likewise.
	(sysv*): Likewise.
	(isc*): Likewise.
	(esix*): Likewise.
	(sco*): Likewise.
	(minix*): Likewise.
	(irix4*): Likewise.
	(irix6*): Likewise.
	(solaris[2-9]*): Likewise.
	(none): Likewise.
	* configure: Regenerated.

2012-04-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #11521]
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c (__ctanhl): Avoid internal
	overflow or cancellation in calculating denominator.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c (__ctanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Breaking
	down expression to avoid unexpected rounding in newer GCCs.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for ctan, ctanh fix.

2012-04-26  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Generate
	long-double compat symbols.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/bits/atomic.h: Include sysdep.h to get
	HWCAP_* values only after the memory barriers have been defined.
	(atomic_full_barrier): Define.
	(atomic_read_barrier): Define.
	(atomic_write_barrier): Define.

2012-04-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* shlib-versions: Add libgcc_s version information.
	* sysdeps/generic/libgcc_s.h: Remove.
	* sysdeps/generic/framestate.c: Include gnu/lib-names.h instead of
	libgcc_s.h.
	* sysdeps/gnu/unwind-resume.c: Likewise.
	* scripts/test-installation.pl: Remove libgcc_s from link_libs.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/brk.S: Delete.
	* sysdeps/unix/sparc/dl-brk.S: Delete.
	* sysdeps/unix/sparc/pipe.S: Delete.
	* sysdeps/unix/sparc/sysdep.S: Delete.
	* sysdeps/unix/sparc/sysdep.h: Delete.
	* sysdeps/unix/sparc/vfork.S: Delete.
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK, SPARC_PIC_REG,
	SPARC_PIC_REG_LEAF, ENTRY, END, LOC): Define.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (ret, ret_NOERRNO,
	ret_ERRVAL, r0, r1, MOVE): Define.
	(JUMPTARGET): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Don't include
	sysdeps/unix/sparc/sysdep.h
	(ENTRY, END): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.

2012-04-25  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Use $(BUILD_LDFLAGS).
	(ALL_BUILD_CFLAGS): Use $(BUILD_CPPFLAGS) -D_GNU_SOURCE
	-DIS_IN_build.

	* timezone/README: Update upstream location and email address for
	tzcode and tzdata.
	* timezone/zdump.c: Update from tzcode 2012b.
	* timezone/zic.c: Likewise.

	* configure.in (libc_cv_as_needed): Remove test.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) != yes] (as-needed): Remove
	conditional definition.
	[$(have-as-needed) != yes] (no-as-needed): Likewise.
	[$(have-as-needed) != yes] (libgcc_eh): Likewise.
	* config.make.in (have-as-needed): Remove variable.

2012-04-25  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-minimal.c (__strtoul_internal): Parse hexadecimal and octal
	strings correctly.

2012-04-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/memcpy.S: Remove include of endian.h, change
	preprocessor endian tests to '#ifdef __BIG_ENDIAN__'.
	* sysdeps/sh/strlen.S: Likewise.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/fork.S: Remove file.
	* sysdeps/unix/i386/fork.S: Likewise.
	* sysdeps/unix/sparc/fork.S: Likewise.

	* sysdeps/unix/system.c: Remove file.
	* sysdeps/unix/bsd/bsd4.4/system.c: Likewise.

	* sysdeps/unix/getegid.S: Remove file.
	* sysdeps/unix/geteuid.S: Likewise.

2012-04-24  Roland McGrath  <roland@hack.frob.com>

	* scripts/check-localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt.out): Use that script instead
	of diff.
	* scripts/data/localplt-generic.data: Add a comment.

	* sysdeps/mach/hurd/symlink.c: Don't call __mach_port_deallocate on
	NODE when __dir_mkfile failed.
	* sysdeps/mach/hurd/symlinkat.c: Likewise.
	Reported by Ludovic Courts <ludo@gnu.org>.

2012-04-24  Andreas Jaeger  <aj@suse.de>

	* Makerules (common-clean): Also remove gen-as-const-headers
	files.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Do not change working directory for
	build.  Use $(OUTPUT_OPTION) in command.
	(ALL_BUILD_CFLAGS): Use $(common-objpfx) to find config.h.

2012-04-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13886]
	* sysdeps/powerpc/powerpc64/fpu/s_floorl.S: Delete file. Use the
	sysdeps/ieee754/ldbl-128ibm/s_floorl.c version instead.
	* math/libm-test.inc (floor_test): Add more tests.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for pow tests.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/getdents.c: Remove file.
	* sysdeps/unix/sysv/getdents.c: Likewise.
	* sysdeps/unix/sysv/syscalls.list (s_getdents): Remove.

	* sysdeps/unix/syscalls.list (madvise): Add syscall from
	sysdeps/unix/mman/syscalls.list.
	(mmap): Likewise.
	(mprotect): Likewise.
	(msync): Likewise.
	(munmap): Likewise.
	* sysdeps/unix/bsd/bsd4.4/Implies: Remove.
	* sysdeps/unix/mman/syscalls.list: Remove.
	* sysdeps/unix/sysv/linux/Implies: Don't include unix/mman.

	* configure.in (libc_cv_libgcc_s_suffix): Remove test.
	(libc_cv_as_needed): Don't use $libc_cv_libgcc_s_suffix.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) = yes] (libgcc_eh): Don't use
	$(libgcc_s_suffix).
	* config.make.in (libgcc_s_suffix): Remove variable.

2012-04-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/gethostname.c: Move to ...
	* sysdeps/posix/gethostname.c: ... here.

	* sysdeps/unix/execve.S: Remove file.

	* sysdeps/unix/_exit.S: Remove file.

2012-04-23  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* manual/Makefile: Remove make dist support, there's no
	need for a stand-alone documentation tar ball.
	(TEXI2DVI): Define always, it's not in Makeconfig.
	(dist): Removed.
	(tar-it): Removed.
	(edition): Removed.
	(glibc-doc-$(edition).tar): Removed
	(%.Z): Removed.
	(%.gz): Removed.
	(%.uu): Removed.
	(ETAGS): Remove, it's in Makeconfig.
	(move-if-change): Remove, it's in Makeconfig.

2013-04-23  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13970]
	* stdlib/stdlib.h: Remove warn_unused_result attribute from strtol etc.
	(strtod, strtof, strtold, strtol, strtoul, strtoq)
	(strtouq, strtoll, strtoull, strtol_l, strtoul_l, strtoll_l, strtoull_l)
	(strtod_l, strtof_l, strtold_l): Remove __wur.
	It is not necessarily an error to ignore strtol's return value.
	One can reliably look at the stored endptr to decide whether
	the number had valid syntax.

2012-04-21  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* sysdeps/s390/s390-64/Makefile (distribute): Remove variable.

2012-04-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.0): Add sysinfo.
	* sysdeps/unix/sysv/Versions: Remove file.

2012-04-21  Markus Trippelsdorf  <markus@trippelsdorf.de>

	[BZ #13927]
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-21  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7064]
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Omit explicit
	version	from __vm86.

2012-04-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/lxstat.c: Remove file.
	* sysdeps/unix/common/syscalls.list (sys_lstat): Remove.

	* sysdeps/unix/sysv/Makefile: Remove file.

	* sysdeps/unix/sysv/direct.h: Remove file.

	* sysdeps/unix/sysv/bits/dirent.h: Remove file.
	* sysdeps/unix/sysv/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/bits/local_lim.h: Likewise.
	* sysdeps/unix/sysv/bits/signum.h: Likewise.
	* sysdeps/unix/sysv/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/bits/utsname.h: Likewise.

	* sysdeps/unix/sysv/setrlimit.c: Remove file.

	* sysdeps/unix/xmknod.c: Remove file.
	* sysdeps/unix/syscalls.list (sys_mknod): Remove.

	* sysdeps/unix/sysv/settimeofday.c: Remove file.

	* sysdeps/unix/sysv/i386/time.S: Remove file.

	* sysdeps/unix/fxstat.c: Remove file.
	* sysdeps/unix/xstat.c: Likewise.
	* sysdeps/unix/syscalls.list (sys_fstat, sys_stat): Remove.

	* sysdeps/unix/sysv/sigaction.c: Remove file.

	* sysdeps/unix/sysv/Makefile [termio.h not in sysdep_headers]
	(sysdep_headers): Remove variable.
	[termio.h not in sysdep_headers] (generated): Likewise.
	[termio.h not in sysdep_headers] ($(objpfx)termio.h): Remove rule.
	* sysdeps/unix/sysv/sysv_termio.h: Remove file.
	* sysdeps/unix/sysv/tcdrain.c: Likewise.
	* sysdeps/unix/sysv/tcflow.c: Likewise.
	* sysdeps/unix/sysv/tcflush.c: Likewise.
	* sysdeps/unix/sysv/tcgetattr.c: Likewise.
	* sysdeps/unix/sysv/tcgetpgrp.c: Likewise.
	* sysdeps/unix/sysv/tcsendbrk.c: Likewise.
	* sysdeps/unix/sysv/tcsetattr.c: Likewise.
	* sysdeps/unix/sysv/tcsetpgrp.c: Likewise.

	* sysdeps/unix/siglist.c: Remove file.

	* sysdeps/unix/getppid.S: Remove file.

	* sysdeps/unix/mkdir.c: Remove file.
	* sysdeps/unix/rmdir.c: Likewise.

2012-04-19  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/gnu/errlist-compat.awk (END): Correct computation of
	ERR_MAX value.
	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.12): Adjust
	errlist-compat value.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/memcopy.h (reg_char): Delete.
	* debug/strcat_chk.c: Use char, not reg_char.
	* debug/strcpy_chk.c: Likewise.
	* debug/strncat_chk.c: Likewise.
	* debug/strncpy_chk.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* string/strcat.c: Likewise.
	* string/strchr.c: Likewise.
	* string/strchrnul.c: Likewise.
	* string/strcmp.c: Likewise.
	* string/strcpy.c: Likewise.
	* string/strncat.c: Likewise.
	* string/strncmp.c: Likewise.
	* string/strncpy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/memmove.c: New file based on string/memmove.c where
	__builtin_memcopy is called when src and dest ranges are known to not
	overlap.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c
	(_wordcopy_fwd_dest_aligned): Replace switch with a parameterized
	fwd_align_merge macro call.
	(_wordcopy_bwd_dest_aligned): Replace switch with a parameterized
	bwd_align_merge macro call.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Add fwd_align_merge and
	bwd_align_merge macros.
	(_wordcopy_fwd_dest_aligned): Use fwd_align_merge macro calls.
	(_wordcopy_bwd_dest_aligned): Use bwd_align_merge macro calls.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcopy.h: Delete.

2012-04-18  Andreas Jaeger  <aj@suse.de>

	[BZ# 6794]
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-64-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-64-128/e_ilogbl.c: ... here.
	Adjust for changed ldbl-128 files.

	* sysdeps/sparc/sparc64/soft-fp/s_ilogbl.c: Moved to ...
	* sysdeps/sparc/sparc64/soft-fp/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

2012-04-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcopy.h: Delete.

2012-04-17  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/e_ilogb.S: Remove __ilogb*_finite alias.
	* sysdeps/i386/fpu/e_ilogbf.S: Likewise.
	* sysdeps/i386/fpu/e_ilogbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_ilogbl.S: Likewise.
	* sysdeps/ieee754/dbl-64/e_ilogb.c: Likewise.
	* sysdeps/ieee754/flt-32/e_ilogbf.c: Likewise.

2012-04-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #6794]
	* math/Makefile: Add e_ilogb and w_ilogb, remove s_logb.
	* math/libm-test.inc: Add ilogb errno and exception tests.
	* math/w_ilogb.c: New file: ilogb wrapper.
	* math/w_ilogbf.c: New file: ilogbf wrapper.
	* math/w_ilogbl.c: New file: ilogbl wrapper.
	* sysdeps/generic/math_private.h: Add __ieee754_ilogb[l|f] prototypes.
	* sysdeps/i386/fpu/s_ilogb.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogb.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbf.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbf.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/x86_64/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/x86_64/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_ilogb.c: ... here.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_ilogbf.c: ... here.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c: ... here.
	* sysdeps/ieee754/ldbl-opt/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/ldbl-opt/w_ilogb.c: ... here.
	* sysdeps/ieee754/ldbl-opt/w_ilogbl.c: New file: ilogbl wrapper.

2012-04-17  Petr Baudis  <pasky@ucw.cz>

	* include/sys/uio.h: Change __vector to __iovec to avoid clash
	with altivec.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* elf/pldd-xx.c: Rename static_assert to pldd_assert.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Reverse the
	operands of fdivp instruction.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Check __ILP32__ instead of __LP64__.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.
	* sysdeps/x86_64/ffsll.c (ffsl): Likewise.
	* sysdeps/x86_64/preconfigure.in: Likewise.
	* sysdeps/x86_64/preconfigure: Regenerated.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE): Also check
	__ILP32__.

2012-04-13  Antoine Balestrat <merkil33@gmail.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Fix test on wrong variable.

2012-04-13  Chris Leonard  <cjlhomeaddress@gmail.com>

	[BZ #13973]
	* locale/iso-639.def: Fix gl language name. Spotted by
	Yaron Shahrabani.

2012-04-12  Roland McGrath  <roland@hack.frob.com>

	[BZ #2074]
	* libio/libio.h (__io_write_fn): Update comment.

2012-04-12  Petr Baudis  <pasky@ucw.cz>

	[BZ #2074]
	* stdio.texi (Hook Functions): The user provided writer function
	is not allowed to return -1.

2012-04-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-04-11  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Add /ports, /linuxthreads, and /linuxthreads_db.
	Add a leading slash to rtkaio.

2012-04-11  Jim Meyering  <meyering@redhat.com>

	[BZ #11959]
	* libio/stdio.h (fwrite, fwrite_unlocked): Remove __wur.
	It is not necessarily an error to ignore fwrite's return
	value.  One can reliably use ferror to test for errors after
	the fact.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): New type.
	* time/time.h (struct timespec): Use __snseconds_t on tv_nsec.

	* bits/typesizes.h (__SNSECONDS_T_TYPE): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-04-10  Andreas Jaeger  <aj@suse.de>

	[BZ #2636]
	* manual/time.texi (Processor Time): Return type of times is
	elapsed real time since an arbitrary point in the past.
	(CPU Time): Move CLK_TCK from here...
	(Processor Time): ...to here.  Correct description.
	* manual/conf.texi (Constants for Sysconf): Correct description of
	_SC_CLK_TCK.

2012-04-10  David S. Miller  <davem@davemloft.net>

	[BZ #13967]
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Handle the case
	where the is a gap between DT_REL(A) and DT_JMPREL.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/dl-support.c (_dl_inhibit_cache): New variable.
	* elf/rtld.c (_rtld_global_ro): New member _dl_inhibit_cache.
	(dl_main): Handle --inhibit-cache.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): New member
	_dl_inhibit_cache.
	* elf/dl-load.c (_dl_map_object): Use it.
	* elf/Makefile: Define SYSCONFDIR when building rtld.c.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13872]
	* sysdeps/i386/fpu/e_powl.S (p78): New object.
	(__ieee754_powl): Saturate large exponents rather than testing for
	overflow of y*log2(x).
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* math/libm-test.inc (pow_test): Do not permit spurious overflow
	exceptions.

	[BZ #11521]
	* math/s_ctan.c: Include <float.h>.
	(__ctan): Avoid internal overflow or cancellation in calculating
	denominator.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/libm-test.inc (ctan_test): Add more tests.
	(ctanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-04-09  Andreas Jaeger  <aj@suse.de>

	[BZ #6894]
	* manual/filesys.texi (Directory Entries): Mention that d_namlen
	is an optional BSD extension.

	[BZ #10254]
	* manual/stdio.texi (Opening Streams): Document additional fopen
	parameters.

2012-04-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__sincos_code): Don't clobber
	%eax without telling the compiler.

2012-04-09  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ # 13963]
	* manual/install.texi: Use sourceware.org.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13873]
	* sysdeps/ieee754/dbl-64/e_pow.c (huge, tiny): New variables.
	(__ieee754_pow): Generate overflow and underflow using huge*huge
	and tiny*tiny rather than just returning constant infinity or zero
	for large exponents.
	* math/libm-test.inc (pow_test): Require overflow exceptions for
	applicable cases of large exponents.

	[BZ #706]
	* sysdeps/i386/fpu/e_pow.S (p10): New object.
	(__ieee754_pow): Use iterative multiplication algorithm only for
	integer exponents with absolute value below 1024.  Check for odd
	integer exponents when using algorithm for real exponents.
	* math/libm-test.inc (pow_test): Add more tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13705]
	* math/libm-test.inc (exp_test): Do not allow overflow exception
	on underflow test.

2012-04-08  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #13705]
	* sysdeps/ieee754/dbl-64/w_exp.c (__exp): Use __kernel_standard
	instead of __kernel_standard_f.

2012-04-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Update copyright year.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-08  Andreas Jaeger  <aj@suse.de>

	[BZ #10153]
	* manual/startup.texi (Environment Access): Describe return value
	for putenv and setenv.

	[BZ #6895]
	* manual/filesys.texi (Directory Entries): Add description for
	DT_LNK.

	[BZ #6890]
	* manual/filesys.texi (Directory Entries): Clarify that it's file
	system not operating system in the description of DT_UNKNOWN.

	[BZ #6578]
	* manual/syslog.texi (closelog): Fix reference, it's openlog.

2012-04-08  Stephen Compall  <s11@member.fsf.org>

	[BZ #6649]
	* manual/llio.texi (Opening and Closing Files): Add cross
	reference to explain mode argument.

2012-04-07  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Change PIC to SHARED.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-07  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (R_SPARC_WDISP10): Define.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE32.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE64 and R_SPARC_H34.

2012-04-07  Carlos O'Donell  <carlos_odonell@mentor.com>

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Simplify
	conditions and remove no longer applicable assertion.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h (__bswap_16): Removed.
	Include <bits/byteswap-16.h> to get __bswap_16.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap-16.h: New file.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/s390/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap-16.h: Likewise.
	* string/Makefile (headers): Add bits/byteswap-16.h.

2012-04-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #13895]
	* nss/nsswitch.c (nss_load_library, __nss_lookup_function): Avoid
	extra indirection.
	* nss/Makefile (tests-static, tests): Add tst-nss-static.
	* nss/tst-nss-static.c: New.

2012-04-06  Robert Millan  <rmh@gnu.org>

	[BZ #6486]
	* manual/llio.texi (File Position Primitive): lseek
	refers to WHENCE when it really means OFFSET.

2012-04-06  Andreas Jaeger  <aj@suse.de>

	* nss/nss_db/db-initgroups.c: Include <string.h> for strlen and
	strncmp	declarations.

	* abilist/libc.abilist: Add __poll and __ppoll.

2012-04-05  David S. Miller  <davem@davemloft.net>

	* scripts/check-local-headers.sh: Accept a host triplet in the
	path matched by the exclude regexp.

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Reduce down to one
	definition.
	* sysdeps/powerpc/powerpc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Delete.
	* sysdeps/s390/s390-32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.

	* elf/rtld.c (dl_main): If DL_DEBUG_UNUSED is enabled, turn off
	lazy binding.
	* elf/dl-lookup.c (_dl_lookup_symbol_x): If DL_DEBUG_UNUSED, ignore
	undefined symbol errors.

	* elf/rtld.c (dl_main): Skip VDSO when checking for unused
	DT_NEEDED entries.

2012-04-05  Michael Matz  <matz@suse.de>

	[BZ #13592]
	* sysdeps/x86_64/memset.S: Fix size paramater comparisions.

2012-04-05  Andreas Jaeger  <aj@suse.de>

	[BZ #13908]
	* stdlib/stdlib.h: Don't warn about unused result of mktemp, fix
	comment.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Fix return value
	which ROUND is no valid rounding mode.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Set fpscr register which
	read again.
	* sysdeps/sh/sh4/fpu/ftestexcept.c: Likewise.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Produce
	an exception using FPU order intentionally.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fedisblxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/fegetexcept.c: New file.
	* sysdeps/sh/sh4/fpu/feupdateenv.c: New file.

2012-04-05  Simon Josefsson  <simon@josefsson.org>

	[BZ #12340]
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Return ERANGE instead of
	EINVAL when BUFLEN is too smal.

2012-04-05  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13553]
	* sysdeps/mach/i386/machine-lock.h: Use volatile instead of __volatile.
	* sysdeps/mach/powerpc/machine-lock.h: Likewise.

2012-04-03  Andreas Jaeger  <aj@suse.de>

	[BZ #13938]
	* manual/setjmp.texi (System V contexts): Fix sentence.

	[BZ #13926]
	* sysdeps/i386/bits/byteswap.h [!__GNUC__](__bswap_constant_64):
	New macro for this case.
	[!__GNUC__] (__bswap_64): New inline function for this case.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: [!__GNUC__] (__bswap_64): Use
	ull, guard with __GLIBC_HAVE_LONG_LONG.

	* string/endian.h (htobe64,htole64,be64toh,le64toh): Guard with
	__GLIBC_HAVE_LONG_LONG.

	* string/byteswap.h (bswap_64): Guard with __GLIBC_HAVE_LONG_LONG.
	Include <features.h> for __GLIBC_HAVE_LONG_LONG.

2012-04-02 Tulio Magno Quites Machado Filho <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Test end of input using
	inptr and inend, rather than using last_ch.

2012-04-02  David S. Miller  <davem@davemloft.net>

	With help from Paul Eggert, Carlos O'Donell, and Roland McGrath.
	* stdio-common/printf-parse.h (read_int): Change return type to
	'int', return -1 on INT_MAX overflow.
	* stdio-common/vfprintf.c (vfprintf): Validate width and precision
	against overflow of INT_MAX.  Set errno to EOVERFLOW when 'done'
	overflows INT_MAX.  Check for overflow of in-format-string precision
	values properly.  Use EOVERFLOW rather than ERANGE throughout.  Use
	SIZE_MAX not INT_MAX for integer overflow test.
	* stdio-common/printf-parsemb.c: If read_int signals an overflow,
	skip the construct in the format string but do not record anything.
	* stdio-common/bug22.c: Adjust to test both width/prevision
	INT_MAX overflow as well as total length INT_MAX overflow.  Check
	explicitly for proper errno values.

2012-04-02  Thomas Schwinge  <thomas@codesourcery.com>

	* string/test-memcmp.c [! WIDE]: #include <limits.h> for CHAR_MIN,
	CHAR_MAX.
	* string/test-strcmp.c [! WIDE]: Likewise.
	* time/tst-mktime2.c: Likewise for INT_MAX.
	* string/test-string.h: #include <sys/param.h> for MIN.

	* csu/init-first.c (__libc_init_first): Call __ctype_init.
	* sysdeps/i386/init-first.c (init): Likewise.
	* sysdeps/mach/hurd/i386/init-first.c (posixland_init): Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c (posixland_init): Likewise.
	* sysdeps/sh/init-first.c (init): Likewise.

2012-04-01  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.
	* po/vi.po: Likewise.

2012-03-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/nss_dns/dns-host.c: Merge copyright years.

2012-03-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	Optimize memcpy with prefetch if
	DATA_CACHE_SIZE_HALF <= len <  SHARED_CACHE_SIZE_HALF and
	src, dst pointers have unequal 16 byte alignments.

2012-03-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13928]
	* resolv/nss_dns/dns-host.c (getanswer_r): Also consider ttl
	from a CNAME entry and return the minimum ttl for the query.
	(gaih_getanswer_slice): Likewise.

2012-03-30  Jeff Law  <law@redhat.com>

	* crypt/md5-crypt.c (__md5_crypt_r): Avoid unbounded alloca uses
	due to long keys.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Likewise.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.

	* resolv/nss_dns/dns-host.c: Update copyright year.

2012-03-30  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (send_dg): Use sendmmsg if we have to write two
	requests to save a system call.  Fix check that all bytes are sent.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr): Fix up
	comments for sendmmsg.

2012-03-30  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Fix a bug when converting strings
	with only 1 character between 0x0041 and 0x01b0.
	* wcsmbs/Makefile (tests): Add tst-mbsnrtowcs.
	* wcsmbs/tst-mbsnrtowcs.c: New file.

2012-03-29  David S. Miller  <davem@davemloft.net>

	* libio/fileops.c (_IO_new_file_xsputn): Don't try to optimize
	small copies by hand.

2012-03-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13761]
	* nis/nss_compat/compat-initgroups.c (getgrent_next_nss,
	_nss_compat_initgroups_dyn): Fall back to malloc/free
	for large group memberships.

2012-03-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcpy.S: Implement mempcpy using a stub
	that branches into memcpy.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-ultra3.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add mempcpy multiarch
	bits.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: Include generic mempcpy
	implementation too.
	* sysdeps/sparc/mempcpy.S: New file.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Provide a hidden def to
	the IFUNC routine in the libc case.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: New file.

	* sysdeps/sparc/sparc64/multiarch/memset-niagara1.S: Unroll main
	loop to 256 bytes instead of 64 bytes and fix test signedness.

	* sysdeps/sparc/Makefile: Add -fPIC to ASFLAGS-.os here....
	* sysdeps/sparc/sparc32/Makefile: rather than here...
	* sysdeps/sparc/sparc64/Makefile: and here.

2012-03-28  Ulrich Drepper  <drepper@gmail.com>

	* malloc/mallocbug.c: Avoid warnings about unused variables.

2012-02-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13760]
	* resolv/nss_dns/dns-host.c (gaih_getanswer): Look for errno
	in the right place. Discard and retry query if response is
	larger than input buffer size.

2012-03-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #369]
	[BZ #2678]
	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Take absolute value of
	x for large integer exponent.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.  Adjust
	sign of result as needed afterwards.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Handle sign of
	result for underflowing pow the same as for overflow.
	(__kernel_standard_l): Handle powl overflow and underflow here
	rather than calling __kernel_standard.
	* math/libm-test.inc (pow_test): Add more tests.

	[BZ #3868]
	[BZ #13879]
	[BZ #13910]
	[BZ #13911]
	[BZ #13912]
	[BZ #13913]
	[BZ #13915]
	[BZ #13916]
	[BZ #13917]
	[BZ #13918]
	[BZ #13919]
	[BZ #13920]
	[BZ #13921]
	* sysdeps/generic/math_private.h (__kernel_standard_l): Declare.
	* sysdeps/ieee754/k_standard.c: Include <float.h>.
	(__kernel_standard_l): New function.
	* math/w_acoshl.c (__acoshl): Use __kernel_standard_l instead of
	__kernel_standard.
	* math/w_acosl.c (__acosl): Likewise.
	* math/w_asinl.c (__asinl): Likewise.
	* math/w_atan2l.c (__atan2l): Likewise.
	* math/w_atanhl.c (__atanhl): Likewise.
	* math/w_coshl.c (__coshl): Likewise.
	* math/w_exp10l.c (__exp10l): Likewise.
	* math/w_exp2l.c (__exp2l): Likewise.
	* math/w_fmodl.c (__fmodl): Likewise.
	* math/w_hypotl.c (__hypotl): Likewise.
	* math/w_j0l.c (__j0l, __y0l): Likewise.
	* math/w_j1l.c (__j1l, __y1l): Likewise.
	* math/w_jnl.c (__jnl, __ynl): Likewise.
	* math/w_lgammal.c (__lgammal): Likewise.
	* math/w_log10l.c (__log10l): Likewise.
	* math/w_log2l.c (__log2l): Likewise.
	* math/w_logl.c (__logl): Likewise.
	* math/w_powl.c (__powl): Likewise.
	* math/w_remainderl.c (__remainderl): Likewise.
	* math/w_scalbl.c (sysv_scalbl): Likewise.
	* math/w_sinhl.c (__sinhl): Likewise.
	* math/w_sqrtl.c (__sqrtl): Likewise.
	* math/w_tgammal.c (__tgammal): Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c (__expl): Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c (__expl): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(atanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(lgamma_test): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(pow_test): Do not allow some spurious overflow exceptions.
	(sqrt_test): Add more tests.
	(tgamma_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.

2012-03-27  Anton Blanchard  <anton@samba.org>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Define MAP_STACK and
	MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.

2012-03-27  David S. Miller  <davem@davemloft.net>

	* conform/Makefile: Run run-conformtest.sh using $(BASH).

	* sysdeps/sparc/sparc64/Makefile (ASFLAGS-.os): Move before
	have-as-vis3 check.

2012-03-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/elf/configure.in: Moved to ...
	* sysdeps/x86_64/configure.in: ... here.
	* sysdeps/x86_64/elf/start.S: Moved to ...
	* sysdeps/x86_64/start.S: ... here.
	* sysdeps/x86_64/elf/configure: Delete.

	* sysdeps/x86_64/configure.in: Merge contents from
	sysdeps/i386/configure.in (without i686 check).

	* sysdeps/i386/elf/Versions: Merge into ...
	* sysdeps/i386/Versions: ... this.
	* sysdeps/i386/elf/Versions: Delete file.
	* sysdeps/i386/elf/start.S: Moved to ...
	* sysdeps/i386/start.S: ...here.
	* sysdeps/i386/elf/configure.in: Merge into...
	* sysdeps/i386/configure.in: ...here.
	* sysdeps/i386/elf/configure.in: Delete file.
	* sysdeps/i386/elf/configure: Delete file.

	* sysdeps/generic/elf/backtracesyms.c: Moved to ...
	* debug/backtracesyms.c: ... here.
	* sysdeps/generic/elf/backtracesymsfd.c: Moved to ...
	* debug/backtracesymsfd.c: ... here.
	* sysdeps/generic/elf/ifunc-sel.h: Moved to ...
	* sysdeps/generic/ifunc-sel.h: ... here.

	* sysdeps/unix/i386/start.c: Delete file.
	* sysdeps/unix/sparc/start.c: Delete file.
	* sysdeps/unix/start.c: Delete file.

	* sysdeps/sh/elf/configure.in: Moved to ...
	* sysdeps/sh/configure.in: ... here.
	* sysdeps/sh/elf/start.S: Moved to ...
	* sysdeps/sh/start.S: ... here.
	* sysdeps/sh/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc64/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc64/bzero.S: ... here.
	* sysdeps/powerpc/powerpc64/elf/entry.h: Moved to ...
	* sysdeps/powerpc/powerpc64/entry.h: ... here.
	* sysdeps/powerpc/powerpc64/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc64/start.S: here.
	* sysdeps/powerpc/powerpc64/elf/Makefile: Merge into ...
	* sysdeps/powerpc/powerpc64/Makefile: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc64/configure.in: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc32/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc32/bzero.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc32/start.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc32/configure.in: ... this.
	* sysdeps/powerpc/powerpc32/elf/configure: Delete file.

	* sysdeps/powerpc/elf/ifunc-sel.h: Moved to ...
	* sysdeps/powerpc/ifunc-sel.h: ... here.
	* sysdeps/powerpc/elf/rtld-global-offsets.sym: Moved to ...
	* sysdeps/powerpc/rtld-global-offsets.sym: ... here.

	* sysdeps/sparc/elf/configure.in: Moved to ...
	* sysdeps/sparc/configure.in: ... here.
	* sysdeps/sparc/elf/configure: Delete file.
	* sysdeps/sparc/sparc32/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc32/start.S: ... here.
	* sysdeps/sparc/sparc64/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc64/start.S: ... here.
	* sysdeps/sparc/sparc32/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc32/Makefile: ... this.
	* sysdeps/sparc/sparc64/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc64/Makefile: ... this.

	* sysdeps/s390/s390-32/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-32/configure.in: ... here.
	* sysdeps/s390/s390-32/elf/configure: Delete file.
	* sysdeps/s390/s390-32/elf/start.S: Moved to ...
	* sysdeps/s390/s390-32/start.S: ... here.

	* sysdeps/s390/s390-64/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-64/configure.in: ... here
	* sysdeps/s390/s390-64/elf/configure: Delete file.
	* sysdeps/s390/s390-64/elf/start.S: Moved to ...
	* sysdeps/s390/s390-64/start.S: ... here.
	* sysdeps/s390/s390-64/elf/configure: Delete.

	* configure.in: Remove support for elf directories in sysdeps.

	* configure: Regenerated.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

2012-03-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (lomark): Adjust to take
	denormal result into account.

2012-03-25  Roland McGrath  <roland@hack.frob.com>

	* posix/confstr.c (confstr): Lift RESTENVS definition to function scope.
	Reported by Allan McRae <allan@archlinux.org>.

2012-03-23  Jeff Law  <law@redhat.com>

	* nss/getnssent.c (__nss_getent): Fix typo.

2012-03-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tlsdesc.h (tlsdesc): Use anonymous union
	to pad to uint64_t for each field.
	(dl_tls_index): Replace unsigned long with uint64_t.

2012-03-23  Daniel Jacobowitz  <dmj@google.com>
	Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #6528]
	* grp/Makefile (otherlibs): Don't set it.
	* inet/Makefile (otherlibs): Likewise.
	* login/Makefile (otherlibs): Likewise.
	* nscd/Makefile (otherlibs): Likewise.
	* posix/Makefile (otherlibs): Likewise.
	* pwd/Makefile (otherlibs): Likewise.
	* rt/Makefile (otherlibs): Likewise.
	* sunrpc/Makefile (otherlibs): Likewise.
	* nss/Makefile (otherlibs): Likewise.
	Add libnss_files to routines and static-only-routines.
	($(objpfx)getent): Remove rule.
	* resolv/Makefile: Add libnss_dns and libresolv to routines and
	static-only-routines.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13892]
	* math/s_cexp.c: Include <float.h>.
	(__cexp): Handle exp result overflowing not necessarily
	overflowing both real and imaginary parts of result.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* include/link.h (ELFW): New macro.
	* sysdeps/x86_64/dl-irel.h: Replace Elf64_XXX with ElfW(XXX).
	Replace ELF64_R_TYPE with ELFW(R_TYPE).

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tls.h (dl_tls_index): Replace unsigned long
	with uint64_t.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldsodefs.h (struct La_x32_regs): New forward
	declaration.
	(struct La_x32_retval): Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/preconfigure.in: New file.
	* sysdeps/x86_64/preconfigure: New generated file.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13824]
	* math/e_exp2l.c: Include <float.h>.
	(__ieee754_exp2l): Handle overflow and underflow cases
	separately.  Only pass fractional part of argument to
	__ieee754_expl.
	* math/libm-test.inc (exp2_test): Add more tests.

	* sysdeps/ieee754/ldbl-128/k_cosl.c (__kernel_cosl): Negate y if
	negating x to take absolute value.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c (__kernel_cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c (__kernel_sinl): Negate y when
	computing low part if x was negated.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Support la_x32_gnu_pltenter and
	la_x32_gnu_pltexit.
	(pltexit): Cast int_retval to ptrdiff_t.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.

	* sysdeps/generic/ldsodefs.h (audit_ifaces): Add x32_gnu_pltenter
	and x32_gnu_pltexit.

	* sysdeps/x86_64/bits/link.h: Check __x86_64__ instead of
	__ELF_NATIVE_CLASS.
	(La_x32_regs): New macro.
	(La_x32_retval): Likewise.
	(la_x32_gnu_pltenter): New function prototype.
	(la_x32_gnu_pltexit): Likewise.

2012-03-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (huge, tiny): Correct
	exponent.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* configure.in (libc_cv_cc_nofma): Check for option to disable
	generation of FMA instructions.
	* configure: Regenerate.
	* config.make.in (config-cflags-nofma): Set from libc_cv_cc_nofma.
	* sysdeps/ieee754/dbl-64/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libm-sysdep_routines):
	Remove brandred-fma4.
	(CFLAGS-brandred-fma4.c): Remove.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Remove.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c (__branred): Don't
	define.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c (__branred): Don't
	define.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.
	* stdio-common/_itowa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	* stdio-common/_itowa.h: Include <_itoa.h>.
	(_itowa_word): Use _ITOA_WORD_TYPE on value.
	(_itowa): New macro.  Defined only if _ITOA_NEEDED is false.
	* sysdeps/generic/_itoa.h (_ITOA_NEEDED): New macro.  Defined
	only if not defined.
	(_ITOA_WORD_TYPE): Likewise.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	Check !_ITOA_NEEDED instead of LONG_MAX == LLONG_MAX.

2012-03-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/configure.in: Check x86_64* instead
	of x86_64 when setting libc_cv_slibdir, libdir and
	libc_cv_localedir.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (Old Varargs): Remove section.
	(How Variadic): Update menu.
	(va_start): Do not mention varargs.h.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_ssp): Use LIBC_TRY_CC_OPTION instead of a
	link test.
	* configure: Regenerated.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>

	* conform/conformtest.pl: Handle --tmpdir argument, defaulting to /tmp.
	* conform/run-conformtest.sh: Pass --tmpdir argument when invoking
	conformtest.pl

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* NOTES: Remove.
	* Makefile (files-for-dist): Remove NOTES.
	(NOTES): Remove rule.
	* README: Don't refer to NOTES.
	* manual/creature.texi: Don't include macros.texi.
	* manual/intro.texi (creature.texi): Remove comment referring to
	NOTES.

	* aclocal.m4 (LIBC_TRY_CC_OPTION): New macro.
	* configure.in (libc_cv_cc_submachine): Use LIBC_TRY_CC_OPTION.
	* configure: Regenerated.
	* sysdeps/i386/configure.in (libc_cv_cc_sse4): Use
	LIBC_TRY_CC_OPTION.
	(libc_cv_as_i686): Likewise.
	(libc_cv_cc_avx): Likewise.
	(libc_cv_cc_sse2avx): Likewise.
	(libc_cv_cc_fma4): Likewise.
	(libc_cv_cc_novzeroupper): Likewise.
	* sysdeps/i386/configure: Regenerated.

	[BZ #13883]
	* sysdeps/i386/fpu/s_cexp.S: Remove.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-21  Allan McRae  <allan@archlinux.org>

	* timezone/Makefile: Do not install iso3166.tab and zone.tab

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13871]
	* math/w_exp2.c: Do not include <float.h>.
	(o_threshold, u_threshold): Remove.
	(__exp2): Calculate result before checking finiteness and calling
	__kernel_standard.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/libm-test.inc (exp2_test): Require overflow exception for
	1e6 input.

	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Test for y outside the
	range of signed 64-bit integers before using fistpll.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Test for y outside
	the range of signed 32-bit integers before using fistpl.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Ensure
	divide-by-zero is raised for zero to large negative powers.
	* sysdeps/x86_64/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* math/libm-test.inc (pow_test): Add more tests.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/backtracesymsfd.c: Include <_itoa.h> instead of
	<stdio-common/_itoa.h>.
	* debug/segfault.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-minimal.c: Likewise.
	* elf/dl-misc.c: Likewise.
	* elf/dl-sysdep.c: Likewise.
	* elf/dl-version.c: Likewise.
	* elf/rtld.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/lookup-retry.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* nscd/nscd_getgr_r.c: Likewise.
	* nscd/nscd_getpw_r.c: Likewise.
	* nscd/nscd_getserv_r.c: Likewise.
	* posix/getopt_init.c: Likewise.
	* posix/wordexp.c: Likewise.
	* stdio-common/_itoa.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* string/_strerror.c: Likewise.
	* sysdeps/generic/elf/backtracesymsfd.c: Likewise.
	* sysdeps/i386/i686/hp-timing.h: Likewise.
	* sysdeps/mach/_strerror.c: Likewise.
	* sysdeps/mach/hurd/powerpc/register-dump.h: Likewise.
	* sysdeps/mach/hurd/sethostid.c: Likewise.
	* sysdeps/mach/hurd/xmknodat.c: Likewise.
	* sysdeps/mach/xpg-strerror.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/register-dump.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/register-dump.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc64/hp-timing.h: Likewise.
	* sysdeps/unix/sysv/linux/fd_to_filename.h: Likewise.
	* sysdeps/unix/sysv/linux/futimes.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/register-dump.h: Likewise.

	* stdio-common/_itoa.c: Include <_itoa.h> instead of "_itoa.h".

	* stdio-common/_itoa.h: Moved to ...
	* sysdeps/generic/_itoa.h: Here.

	* stdio-common/_itowa.c: Include <_itowa.h> instead of "_itowa.h".

	* stdio-common/printf_fphex.c: Include <_itoa.h> and <_itowa.h>
	instead of "_itoa.h" and "_itowa.h".
	* stdio-common/vfprintf.: Likewise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't include
	<bits/wordsize.h>.
	(__signbitf): Check __x86_64__ instead of __WORDSIZE.
	(__signbit): Likwise.
	(llrintf): Likwise.
	(llrint): Likwise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/setjmp.h (__jmp_buf): Support x86-64 with
	__WORDSIZE != 64.

2012-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (%beautify): Add OVERFLOW_EXCEPTION and
	OVERFLOW_EXCEPTION_OK.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(OVERFLOW_EXCEPTION): Define.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(INVALID_EXCEPTION_OK): Renumber.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle FE_OVERFLOW.
	(exp10_test): Expect overflow exceptions.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(nextafter_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/atomic.h
	(__arch_c_compare_and_exchange_val_64_acq): Use atomic64_t on
	64bit integer.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Don't include <bits/wordsize.h>.
	(fenv_t): Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/mathdef.h: Don't include <bits/wordsize.h>.
	Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/ldd-rewrite.sed: Support x32.

2012-03-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/fpu/fenv_private.h: New file.
	* sysdeps/sparc/fpu/math_private.h: Use it.
	(libc_feholdexcept, libc_feholdexceptf, libc_feholdexceptl):
	Remove.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf,
	(libc_feholdexcept_setroundl): Remove.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl):
	Remove.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Remove.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvf): Remove.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/math_private.h (EXTRACT_WORDS64): Use
	int64_t instead of long int.
	(INSERT_WORDS64): Likwise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Cast
	_Unwind_GetCFA return to _Unwind_Ptr first.

2012-03-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c: Include <float.h>.
	(__clog): Scale large or subnormal inputs.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_clog10.c: Include <float.h>.
	(M_LOG10_2): Define.
	(__clog10): Scale large or subnormal inputs.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #11451]
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Scale large
	x and y.
	* math/libm-test.inc (atan2_test): Add another test.

	* Makerules (common-objdir-compile): Remove.
	* sysdeps/unix/Makefile (config-generated): Do not add
	$(unix-generated) to variable.
	[generic bits/local_lim.h] (mk-local_lim-CFLAGS): Remove variable.
	[generic bits/local_lim.h] ($(common-objpfx)bits/local_lim.h):
	Remove rule.
	[generic bits/local_lim.h] ($(common-objpfx)mk-local_lim):
	Likewise.
	[generic bits/local_lim.h] (before-compile): Do not append to
	variable.
	[generic bits/local_lim.h] (common-generated): Likewise.
	[generic sys/param.h] (before-compile): Do not append to variable.
	[generic sys/param.h] ($(common-objpfx)sys/param.h): Remove rule.
	[generic sys/param.h] ($(common-objpfx)param.h.c): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Do not
	include.
	[generic sys/param.h] (sys/param.h-includes): Remove variable.
	[generic sys/param.h] (sys/param.h-includes): Remove rule.
	[generic sys/param.h] ($(addprefix
	$(common-objpfx),$(sys/param.h-includes))): Likewise.
	[generic sys/param.h] (common-generated): Do not append to
	variable.
	[generic sys/param.h] (sysdep_headers): Likewise.
	[generic bits/errno.h] (before-compile): Do not append to
	variable.
	[generic bits/errno.h] ($(common-objpfx)bits/errno.h): Remove
	rule.
	[generic bits/errno.h] ($(common-objpfx)make-errnos): Likewise.
	[generic bits/errno.h] ($(common-objpfx)make-errnos.c): Likewise.
	[generic bits/errno.h] ($(common-objpfx)errnos): Likewise.
	[generic bits/errno.h] (common-generated): Do not append to
	variable.
	[generic bits/ioctls.h] (before-compile): Do not append to
	variable.
	[generic bits/ioctls.h] ($(common-objpfx)bits/ioctls.h): Remove
	rule.
	[generic bits/ioctls.h] (ioctl-includes): Remove variable.
	[generic bits/ioctls.h] (make-ioctls-CFLAGS): Likewise.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls): Remove
	rule.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls.c): Likewise.
	[generic bits/ioctls.h] (bits_termios.h): Remove variable.
	[generic bits/ioctls.h] ($(common-objpfx)ioctls): Remove rule.
	[generic bits/ioctls.h] (common-generated): Do not append to
	variable.
	[generic sys/syscall.h] (syscall.h): Remove variable.
	[generic sys/syscall.h] ($(common-objpfx)sys/syscall.h): Remove
	rule.
	[generic sys/syscall.h] (before-compile): Do not append to
	variable.
	[generic sys/syscall.h] (common-generated): Likewise.
	* sysdeps/unix/errnos-tmpl.c: Remove file.
	* sysdeps/unix/errnos.awk: Likewise.
	* sysdeps/unix/ioctls-tmpl.c: Likewise.
	* sysdeps/unix/ioctls.awk: Likewise.
	* sysdeps/unix/mk-local_lim.c: Likewise.
	* sysdeps/unix/snarf-ioctls: Likewise.

2012-03-19  Richard Henderson  <rth@twiddle.net>

	* sysdeps/i386/fpu/fenv_private.h: New file.
	* sysdeps/i386/fpu/math_private.h: Use it.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept_setround_53bit): Remove.
	(libc_feupdateenv_53bit): Remove.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept): Remove.
	(libc_feholdexcept_setround): Remove.
	(libc_fetestexcept, libc_fesetenv): Remove.
	(libc_feupdateenv_test): Remove.
	(libc_feupdateenv, libc_feholdsetround): Remove.
	(libc_feresetround): Remove.

	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Avoid the fldenv.
	* sysdeps/x86_64/fpu/feholdexcpt.c (feholdexcept): Likewise.

	* sysdeps/generic/math_private.h (default_libc_feupdateenv_test): New.
	(libc_feupdateenv_test, libc_feupdateenv_testf): New.
	(libc_feupdateenv_testl): New.
	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv_test): New.
	(libc_feupdateenv_testf): New.
	(libc_feupdateenv): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Likewise.

	* sysdeps/generic/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf, libc_feholdsetroundl): New.
	(libc_feresetround, libc_feresetroundf, libc_feresetroundl): New.
	(libc_feresetround_noex): New.
	(libc_feresetround_noexf): New.
	(libc_feresetround_noexl): New.
	(SET_RESTORE_ROUND, SET_RESTORE_ROUNDF, SET_RESTORE_ROUNDL): New.
	(SET_RESTORE_ROUND_NOEX, SET_RESTORE_ROUND_NOEXF): New.
	(SET_RESTORE_ROUND_NOEXL, SET_RESTORE_ROUND_53BIT): New.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Use
	SET_RESTORE_ROUND.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use SET_RESTORE_ROUND_53BIT.
	(__cos): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (__tan): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Use
	SET_RESTORE_ROUND_NOEX.
	* sysdeps/ieee754/dbl-64/e_exp2f.c (__ieee754_exp2f): Use
	SET_RESTORE_ROUND_NOEXF.
	* sysdeps/ieee754/flt-32/e_expf.c (__ieee754_expf): Likewise.
	* sysdeps/x86_64/fpu/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf): New.
	(libc_feresetround, libc_feresetroundf): New.

	* sysdeps/i386/fpu/math_private.h: Include <fenv.h>, <fpu_control.h>.
	(libc_feholdexcept_setround_53bit): Convert from macro to function.
	(libc_feupdateenv_53bit): Likewise.  Don't force _FPU_EXTENDED.

	* sysdeps/generic/math_private.h: Include <fenv.h>.
	(default_libc_feholdexcept): New.
	(default_libc_feholdexcept_setround): New.
	(default_libc_fesetenv, default_libc_feupdateenv): New.
	(libc_feholdexcept): Only define if undefined.
	(libc_feholdexceptf, libc_feholdexceptl): Likewise.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf): Likewise.
	(libc_feholdexcept_setroundl): Likewise.
	(libc_feholdexcept_setround_53bit): Likewise.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl): Likewise.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Likewise.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvl): Likewise.
	(libc_feupdateenv_53bit): Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Include <fenv.h>.
	(libc_feholdexcept): Convert from macro to inline function.
	(libc_feholdexcept_setround, libc_fetestexcept): Likewise.
	(libc_fesetenv, libc_feupdateenv): Likewise.

	* sysdeps/generic/math_private.h (GET_HIGH_WORD): Define only if
	not previously defined.
	(GET_LOW_WORD, EXTRACT_WORDS64, INSERT_WORDS): Likewise.
	(INSERT_WORDS64, SET_HIGH_WORD, SET_LOW_WORD): Likewise.
	(GET_FLOAT_WORD, SET_FLOAT_WORD): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: New file.
	* sysdeps/ieee754/flt-32/math_private.h: New file.
	* sysdeps/x86_64/fpu/math_private.h: Move the include_next of
	math_private.h below SET_FLOAT_WORD.
	(__isnan, __isinf_ns, __finite): Remove.
	(__isnanf, __isinf_nsf, __finitef): Remove.

2012-03-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-17  David S. Miller  <davem@davemloft.net>

	[BZ #6471]
	* sysdeps/unix/sysv/linux/sparc/Versions: Add __getshmlba entry
	for 2.16.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): Use -1l to avoid
	warnings.

	[BZ #6471]
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Test for syscall errors
	properly.
	* sysdeps/unix/sysv/linux/sparc/getshmlba.c: New file.
	* sysdeps/unix/sysv/linux/sparc/Makefile: Add getshmlba to
	sysdep_routines when subdir is sysvipc.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h (SHMLBA): Use new
	__getshmlba helper.

	* sysdeps/sparc/fpu/libm-test/ulps: Update.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/ffsll.c (ffsl): Define alias only under
	[__LP64__].

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Moved to ...
	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c: This.
	(__lround): Renamed to ...
	(__llround): This.  Replace long int with long long int.
	Define lround functions as aliases of llround functions.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Empty file.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/makecontext.c (__makecontext):
	Use greg_t on sp.  Use unsigned int on idx_uc_link.  Cast
	adresses to uintptr_t.  Replace "long int" and "unsigned long
	int" with "greg_t" on va_arg.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldconfig.h (FLAG_X8664_LIBX32): New macro.
	* elf/cache.c (print_entry): Handle FLAG_X8664_LIBX32.

	* sysdeps/unix/sysv/linux/i386/readelflib.c (process_elf_file):
	Move e_machine check before EI_CLASS check.  Handle x32
	libraries.  Check EM_IA_64 only if SKIP_EM_IA_64 isn't defined.
	* sysdeps/unix/sysv/linux/x86_64/readelflib.c: Just define
	SKIP_EM_IA_64 and include
	<sysdeps/unix/sysv/linux/i386/readelflib.c>.

	* sysdeps/unix/sysv/linux/x86_64/dl-cache.h:
	Don't include <sysdeps/unix/sysv/linux/sparc/dl-cache.h>.
	(add_system_dir): New macro.

	* sysdeps/unix/sysv/linux/x86_64/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add /libx32/ld-linux-x32.so.2.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2551]
	[BZ #2552]
	[BZ #2553]
	[BZ #2554]
	[BZ #2562]
	[BZ #2563]
	[BZ #2565]
	[BZ #2566]
	[BZ #2576]
	* math/w_j0.c (j0): Don't produce TLOSS errors for POSIX libm.
	(y0): Likewise.
	* math/w_j0f.c (j0f): Likewise.
	(y0f): Likewise.
	* math/w_j0l.c (__j0l): Likewise.
	(__y0l): Likewise.
	* math/w_j1.c (j1): Likewise.
	(y1): Likewise.
	* math/w_j1f.c (j1f): Likewise.
	(y1f): Likewise.
	* math/w_j1l.c (__j1l): Likewise.
	(__y1l): Likewise.
	* math/w_jn.c (jn): Likewise.
	(yn): Likewise.
	* math/w_jnf.c (jnf): Likewise.
	(ynf): Likewise.
	* math/w_jnl.c (__jnl): Likewise.
	(__ynl): Likewise.
	* math/libm-test.inc (j0_test): Add more tests.
	(j1_test): Likewise.
	(jn_test): Likewise.  Add trailing semicolon to existing test.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13851]
	[BZ #13854]
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Use
	libc_feholdexcept_setround_53bit and libc_feupdateenv_53bit.
	* sysdeps/ieee754/ldbl-96/k_tanl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Include <errno.h>.
	(__tanl): Set errno for infinite argument.
	* sysdeps/i386/fpu/mptan.c: Remove.
	* sysdeps/i386/fpu/s_tan.S: Likewise.
	* sysdeps/i386/fpu/s_tanl.S: Likewise.
	* sysdeps/x86_64/fpu/k_tanl.c: Likewise.
	* sysdeps/x86_64/fpu/s_tanl.S: Likewise.
	* math/libm-test.inc (tan_test): Add more tests and enable more
	tests for double and long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* sysdeps/x86_64/elf/start.S: Include <sysdep.h>.
	(_start): Add cfi_startproc, cfi_undefined for rip and cfi_endproc.

2012-03-16  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (LIBC_PRECONFIGURE): New macro.
	* configure.in: Use it for both main tree and add-ons.
	* configure: Regenerated.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* time/offtime.c (__offtime): Use time_t on days, rem, y and yg.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Include generator program
	in comment.

	[BZ #13851]
	* sysdeps/ieee754/ldbl-96/e_rem_pio2l.c: New file.
	* sysdeps/ieee754/ldbl-96/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c (__cosl): Correct test for
	infinite argument.
	* sysdeps/ieee754/ldbl-96/s_sinl.c (__sinl): Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Handle __FLT_EVAL_METHOD__
	!= 0 for prec == 2.
	* sysdeps/i386/fpu/e_rem_pio2l.c: Remove.
	* sysdeps/i386/fpu/k_rem_pio2.c: Likewise.
	* sysdeps/i386/fpu/s_cosl.S: Likewise.
	* sysdeps/i386/fpu/s_sincosl.S: Likewise.
	* sysdeps/i386/fpu/s_sinl.S: Likewise.
	* sysdeps/x86_64/fpu/e_rem_pio2l.c: Likewise.
	* sysdeps/x86_64/fpu/k_cosl.c: Likewise.
	* sysdeps/x86_64/fpu/k_sinl.c: Likewise.
	* sysdeps/x86_64/fpu/s_cosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sincosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sinl.S: Likewise.
	* math/libm-test.inc (cos_test): Add more tests and enable more
	tests for long double.
	(sin_test): Likewise.
	(sincos_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/math_private.h: New file.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add fma/fmaf
	sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

	* sysdeps/sparc/sparc32/fpu/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/s_fma.c: New file.

	* sysdeps/sparc/sparc-ifunc.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Use
	sparc-ifunc.h
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: Likewise.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/e_hypotf.c: Use double precision instead of
	scaling.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13852]
	* sysdeps/i386/fpu/e_rem_pio2f.c: Delete so that i386 uses the
	ieee754/flt-32 implementation for sin, cos and sincos.
	* sysdeps/i386/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/i386/fpu/s_cosf.S: Likewise.
	* sysdeps/i386/fpu/s_sincosf.S: Likewise.
	* sysdeps/i386/fpu/s_sinf.S: Likewise.
	* sysdeps/i386/fpu/s_tanf.S: Delete so that i386 uses the
	ieee754/flt-32 implementation for tan.

	* math/libm-test.inc (cos_test): Enable some large input tests for
	float as well
	(sin_test): Likewise.
	(sincos_test): Likewise.
	(tan_test): Add tests for large input.

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13658]
	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13837]
	* math/libm-test.inc (cos_test): Add a test case for large input
	value.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>,
	Joseph Myers  <joseph@codesourcery.com>

	[BZ #13658]
	* sysdeps/x86_64/fpu/s_sincos.S: Delete files so that
	x86-64 and i386 use the iee754/dbl-64 sin and cos implementation.
	* sysdeps/i386/fpu/branred.c: Likewise.
	* sysdeps/i386/fpu/dosincos.c: Likewise.
	* sysdeps/i386/fpu/mpa.c: Likewise.
	* sysdeps/i386/fpu/s_cos.S: Likewise.
	* sysdeps/i386/fpu/s_sin.S: Likewise.
	* sysdeps/i386/fpu/s_sincos.S: Likewise.
	* sysdeps/i386/fpu/sincos32.c: Likewise.

	* sysdeps/generic/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.
	* sysdeps/i386/fpu/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Do double arithmetic in
	53 bit (without extend i386 double precision).

	* math/libm-test.inc (sincos_test): Add tests for large input.
	(sin): Likewise.
	(cos): Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new vis3
	fmin/fmax sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

2012-03-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new VIS3
	routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add new
	VIS3 routines.

	* sysdeps/sparc/sparc32/sparcv9/fpu/unix/sysv/linux/multiarch/Implies:
	New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/configure.in: New file.
	* sysdeps/sparc/configure: Generate.
	* configure.in (libc_cv_sparc_as_vis3): Substitute.
	* configure: Regenerate.
	* config.h.in (HAVE_AS_VIS3_SUPPORT): New.
	* config.make.in (have-as-vis3): New.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-*): If VIS3 is
	available use -Av9d instead of -Av9a.
	* sysdeps/sparc/sparc64/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: New file.

	* sysdeps/sparc/sparc64/fpu/s_copysign.S (__copysign): Use
	fzeros/fnegs to load 0x80000000 into a float register instead of
	using the stack.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S (__copysignf): Likewise.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/syscall.h.
	($(objpfx)syscall-%.h): Rename rule to $(objpfx)bits/syscall%h.
	($(objpfx)syscall-%.d): Rename rule to $(objpfx)bits/syscall%d.
	($(inst_includedir)/bits/syscall.h): Remove rule.
	($(objpfx)bits/syscall.d): Include instead of
	$(objpfx)syscall-list.d.
	(generated): Change syscall-list.h and syscall-list.d to
	bits/syscall.h and bits/syscall.d.

2012-03-14  Roland McGrath  <roland@hack.frob.com>

	[BZ #13846]
	* manual/llio.texi (Memory-mapped I/O): Fix wrong function name.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13841]
	* math/s_csqrt.c: Include <float.h>.
	(__csqrt): Scale large or subnormal inputs.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13840]
	* math/libm-test.inc (hypot_test): Add more tests.

2012-03-13  David S. Miller  <davem@davemloft.net>

	[BZ #13840]
	* sysdeps/ieee754/flt-32/e_hypotf.c (__ieee754_hypotf): Rewrite to use
	double-precision for the calculation instead of scaling.

2012-03-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Do not
	manipulate bits before adding and subtracting TWO52[sx].
	* sysdeps/ieee754/dbl-64/s_rint.c (__rint): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c (__nearbyint):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c (__rint): Likewise.

2012-03-13  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/Makefile: Remove rtld-global-offsets.sym handling.
	* sysdeps/sparc/elf/rtld-global-offsets.sym: Delete.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Don't include
	rtld-global-offsets.h
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Use expl for
	large parameters.

	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-fxstatat64.c: New file.

	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Declare syscall
	'err' in the ifdef scope in which it is actually used.

	* nss/nss_db/db-init.c: Include string.h

2012-03-12  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	masking out of the most significant byte of random value used.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix coding style in previous change.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Set on sparc when 2.5.64 and later.
	(__ASSUME_TGKILL): Set on sparc when 2.6.1 and later, simplify
	expression.
	(__ASSUME_FADVISE64_64_SYSCALL): Set on sparc when 2.6.1 and
	later.

2012-03-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__makecontext): Fix signedness of pointer casts setting up 'sp'.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL) Use 'long'
	for 'resultvar' otherwise things get truncated on 64-bit.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix masking out of the most significant byte of random value used.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Protect local
	variables with appropriate CPP guards.
	* sysdeps/sparc/sparc32/dl-trampoline.S: Propagate the stack_ptr from the
	frame pointer, not the stack pointer.  Correct layout comments.  Fix test
	on resulting framesize and the management of the outregs buffer for pltexit.
	Preserve floating point return values across _dl_call_pltexit call.
	* sysdeps/sparc/sparc64/dl-trampoline.S: Fix test on resulting
	framesize and the management of the outregs buffer for pltexit.
	Preserve floating point return values across _dl_call_pltexit
	call.
	* elf/sotruss-lib.c (la_sparc32_gnu_pltenter, la_sparc64_gnu_pltenter,
	la_sparc32_gnu_pltexit, la_sparc64_gnu_pltexit): New functions.
	(print_exit): Fix format string for return register value.

2012-03-10  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/Makefile (others): Add rpcgen.
	($(objpfx)rpcgen): Remove special build rule and dependency on
	libc.
	* sunrpc/rpcgen.c: New file.

2012-03-09  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13673]
	* posix/bug-regex33.c: Replace FSF snail mail address with URL.
	* stdio-common/bug-vfprintf-nargs.c: Likewise.
	* sysdeps/i386/crti.S: Likewise.
	* sysdeps/i386/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc32/crti.S: Likewise.
	* sysdeps/powerpc/powerpc32/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc64/crti.S: Likewise.
	* sysdeps/powerpc/powerpc64/crtn.S: Likewise.
	* sysdeps/sh/crti.S: Likewise.
	* sysdeps/sh/crtn.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.

	[BZ #13673]
	* locale/programs/charmap-kw.gperf: Replace FSF snail mail address
	with URL.
	* locale/programs/locfile-kw.gperf: Likewise.
	* locale/programs/charmap-kw.h: Regenerated.
	* locale/programs/locfile-kw.h: Likewise.

	[BZ #13673]
	* intl/plural.y: Replace FSF snail mail address with URL.
	* intl/plural.c: Regenerated.

2012-03-09  Richard Henderson  <rth@twiddle.net>

	* include/math_private.h: Remove file.
	* math/math_private.h: Move file ...
	* sysdeps/generic/math_private.h: ... here.

	* sysdeps/i386/fpu/math_private.h: Use include_next for math_private.h.
	* sysdeps/powerpc/fpu/math_private.h: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.

	* sysdeps/i386/fpu/s_fpclassifyl.c: Use <> to include both <math.h>
	and <math_private.h>.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/branred.c: Likewise.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_cbrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fpclassify.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_signbit.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cbrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fpclassifyf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_remquof.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_signbitf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sincosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_truncf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_truncl.c: Likewise.
	* sysdeps/ieee754/s_lib_version.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/ieee754/s_signgam.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/s_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: Likewise.
	* sysdeps/powerpc/fpu/s_isnan.c: Likewise.
	* sysdeps/powerpc/fpu/s_rint.c: Likewise.
	* sysdeps/powerpc/fpu/s_rintf.c: Likewise.
	* sysdeps/powerpc/fpu/s_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_llrintf.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/rpc_cout.c: Remove __GNU_LIBRARY__ conditionals.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* include/math_private.h: New file.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/socket_type.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/socket_type.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Get enum __socket_type
	from <bits/socket_type.h>.
	(enum __socket_type): Don't define here.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Remove.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/socket_type.h.

	[BZ #13566]
	* libio/stdio.h (gets): Always declare for C++ up to C++11 without
	checking __USE_GNU.

	* Makerules ($(inst_includedir)/%.h): New rule.
	* stdio-common/Makefile (headers): Add bits/stdio_lim.h.
	(install-others): Remove variable setting.
	($(inst_includedir)/bits/stdio_lim.h): Remove rule.

2012-03-08  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/fpu/math_private.h (__ieee754_sqrt): Convert
	from macro to inline function; merge with the
	!__LIBC_INTERNAL_MATH_INLINES version.
	(__ieee754_sqrtf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__rint): Convert from macro
	to inline function.
	(__rintf, __floor, __floorf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__ieee754_sqrt): Convert from
	macro to inline function.
	(__ieee754_sqrtf, __ieee754_sqrtl): Likewise.

	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Include <math_private.h>,
	not <math/math_private.h>.

2012-03-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Update
	copyright year.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h: Likewise.

2012-03-08  Thomas Schwinge  <thomas@codesourcery.com>

	* resolv/gai_misc.c (handle_requests): Fix struct timespec
	normalization.
	* rt/tst-cpuclock2.c (test_nanosleep): Likewise.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Likewise.

2012-03-08  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/tst-fphex.c: Various cleanups.  The macros cannot
	be defined individually, they must be defined as a block.  Define
	S for printing a string instead of hidint the different by using a
	macro for adding the 'l'.
	* stdio-common/tst-fphex-wide.c: Adjust.

2012-03-07  Marek Polacek  <polacek@redhat.com>

	* stdio-common/tst-long-dbl-fphex.c: Fix test for non ldbl-96 targets.

2012-03-08  Marek Polacek  <polacek@redhat.com>

	[BZ #13806]
	* stdio-common/Makefile (tests): Add tst-fphex-wide.
	* stdio-common/tst-fphex.c: Define a few macros to make the
	test reusable.  Use them.
	* stdio-common/tst-fphex-wide.c: New file.

2012-03-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6911]
	* manual/macros.texi (gnusystems): New macro.
	(nongnusystems): Likewise.
	(gnulinuxhurdsystems): Likewise.
	(gnuhurdsystems): Likewise..
	(gnulinuxsystems): Likewise.
	* manual/charset.texi: Use new macros or @theglibc{} to refer to
	variants of the GNU system, not "GNU system".
	* manual/conf.texi: Likewise.
	* manual/errno.texi: Likewise.  Update example of errno macro
	expansion.
	* manual/filesys.texi: Likewise.
	(getumask): Document as specific to GNU/Hurd.
	* manual/install.texi: Likewise.  Reword some references to
	GNU/Linux.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	(File Name Portability): Detail which constraints are inapplicable
	to all GNU systems and which are only inapplicable to GNU/Hurd.
	* manual/job.texi: Likewise.
	* manual/llio.texi: Likewise.
	(O_NOCTTY): Document as present on GNU/Linux.
	* manual/maint.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/pipe.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	(RUSAGE_CHILDREN): Remove statement about specifying a particular
	child on GNU/Hurd.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/terminal.texi: Likewise.
	(ONLCR): Document as POSIX.
	(OXTABS): Document availability on GNU/Linux as XTABS.
	(ONOEOT): Document availability separately from other bits.
	(VLNEXT, VDISCARD, VSTATUS): Document availability individually.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

	* aclocal.m4 (LIBC_TRY_LINK_STATIC): New macro.
	* configure.in (libc_cv_preinit_array): Use LIBC_TRY_LINK_STATIC.
	(libc_cv_ctors_header): Likewise.  Use asm ("") instead of calling
	puts.
	* configure: Regenerated.

2012-03-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.in (cpuid.h): Use AC_CHECK_HEADER with no
	default includes instead of AC_HEADER_CHECK.
	* sysdeps/i386/configure: Regenerated.

	[BZ #10716]
	* math/s_cacosh.c (__cacosh): Convert negative log results to 0.
	* math/s_cacoshf.c (__cacoshf): Likewise.
	* math/s_cacoshl.c (__cacoshl): Likewise.
	* math/s_casinh.c (__casinh): Set signs of result from argument.
	* math/s_casinhf.c (__casinhf): Likewise.
	* math/s_casinhl.c (__casinhl): Likewise.
	* math/libm-test.inc (cacos_test, cacosh_test, casin_test)
	(casinh_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-07  Ulrich Drepper  <drepper@gmail.com>

	* po/zh_TW.po: Update from translation team.

	* login/Makefile (distribute): Remove variable.
	* catgets/Makefile: Likewise.
	* mach/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* iconv/Makefile: Likewise.
	* nscd/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	* manual/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* conform/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* time/Makefile: Likewise.
	* soft-fp/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* gmon/Makefile: Likewise.
	* po/Makefile: Likewise.
	* rt/Makefile: Likewise.
	* socket/Makefile: Likewise.
	* math/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* debug/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* timezone/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	* io/Makefile: Likewise.
	* argp/Makefile: Likewise.
	* inet/Makefile: Likewise.
	* hesiod/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* csu/Makefile: Likewise.
	* wctype/Makefile: Likewise.
	* crypt/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* string/Makefile: Likewise.
	* nis/Makefile: Likewise.
	* resolv/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* wcsmbs/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* posix/Makefile: Likewise.

	[BZ #6959]
	* timezone/Makefile: Don't install timezone files, just the programs
	and scripts.

2012-03-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/databases.def: Add missing gshadow entry.

	* stdio-common/vfprintf.c: Fix formatting.  Missing copyright update.

2012-03-06  Marek Polacek  <polacek@redhat.com>

	[BZ #13726]
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Adjust position of wnumstr.
	* sysdeps/x86_64/fpu/printf_fphex.c: Likewise.
	* stdio-common/Makefile (tests): Add tst-long-dbl-fphex.
	* stdio-common/tst-long-dbl-fphex.c: New file.

2012-03-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(set_obp_int): New function.
	(get_obp_int): New function.
	(__get_clockfreq_via_dev_openprom): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INTERNAL_SYSCALL_ERROR_P):
	Avoid unused variable warnings on 'val' and use builtin_expect.
	(INLINE_SYSCALL): Don't wrap INTERNAL_SYSCALL_ERROR_P with
	__builtin_expect.
	(INLINE_CLONE_SYSCALL): Likewise.

2012-03-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-05  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Drop exp(-x) term
	only for |x| >= 40.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.

2012-03-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c (gettimeofday_ifunc):
	Replace gettimeofday with __vdso_gettimeofday.

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): Replace clock_gettime and getcpu with
	__vdso_clock_gettime and __vdso_getcpu.

	* sysdeps/unix/sysv/linux/x86_64/time.c (time_ifunc): Replace
	time with __vdso_time.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (size_t): Note types to which size_t may be
	equivalent with the GNU C Library, but do not describe when
	differences between them are significant.

2012-03-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_pow.c: Include <fenv.h>.
	(__ieee754_pow): Save and restore rounding mode and use
	round-to-nearest for main computations.
	* math/libm-test.inc (pow_test_tonearest): New function.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #3976]
	* math/libm-test.inc (cosh_test_tonearest): New function.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-05  Tom de Vries  <tom@codesourcery.com>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Ensure
	default stack guard is set in last bytes.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Same.

2012-03-05  Kees Cook  <keescook@chromium.org>

	* stdio-common/vfprintf.c (vfprintf): add missing errno settings.

	[BZ #13656]
	* stdio-common/vfprintf.c (vfprintf): Check for nargs overflow and
	possibly allocate from heap instead of stack.
	* stdio-common/bug-vfprintf-nargs.c: New file.
	* stdio-common/Makefile (tests): Add nargs overflow test.

2012-03-03  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-03  Marek Polacek  <polacek@redhat.com>

	* include/sys/cdefs.h: Remove __GNUC_PREREQ macro.
	* math/math_private.h: Likewise.
	* stdlib/tst-strtod.c: Likewise.
	* sysdeps/i386/i486/bits/atomic.h: Likewise.
	* sysdeps/x86_64/bits/atomic.h: Likewise.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrintf.S: New file.

2012-03-02  Roland McGrath  <roland@hack.frob.com>

	[BZ #13792]
	* manual/examples/README: New file, says the example source files
	can be used under GPL>=2.
	* manual/Makefile (%.c.texi): Eat the leading part of the file until a
	line containing just "*/".
	* manual/examples/add.c: Add copyright header (GPL>=2).
	* manual/examples/argp-ex1.c: Likewise.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.
	* manual/examples/argp-ex4.c: Likewise.
	* manual/examples/atexit.c: Likewise.
	* manual/examples/db.c: Likewise.
	* manual/examples/dir.c: Likewise.
	* manual/examples/dir2.c: Likewise.
	* manual/examples/execinfo.c: Likewise.
	* manual/examples/filecli.c: Likewise.
	* manual/examples/filesrv.c: Likewise.
	* manual/examples/fmtmsgexpl.c: Likewise.
	* manual/examples/genpass.c: Likewise.
	* manual/examples/inetcli.c: Likewise.
	* manual/examples/inetsrv.c: Likewise.
	* manual/examples/isockad.c: Likewise.
	* manual/examples/longopt.c: Likewise.
	* manual/examples/memopen.c: Likewise.
	* manual/examples/memstrm.c: Likewise.
	* manual/examples/mkfsock.c: Likewise.
	* manual/examples/mkisock.c: Likewise.
	* manual/examples/mygetpass.c: Likewise.
	* manual/examples/pipe.c: Likewise.
	* manual/examples/popen.c: Likewise.
	* manual/examples/rprintf.c: Likewise.
	* manual/examples/search.c: Likewise.
	* manual/examples/select.c: Likewise.
	* manual/examples/setjmp.c: Likewise.
	* manual/examples/sigh1.c: Likewise.
	* manual/examples/sigusr.c: Likewise.
	* manual/examples/stpcpy.c: Likewise.
	* manual/examples/strdupa.c: Likewise.
	* manual/examples/strftim.c: Likewise.
	* manual/examples/strncat.c: Likewise.
	* manual/examples/subopt.c: Likewise.
	* manual/examples/swapcontext.c: Likewise.
	* manual/examples/termios.c: Likewise.
	* manual/examples/testopt.c: Likewise.
	* manual/examples/testpass.c: Likewise.
	* manual/examples/timeval_subtract.c: Likewise.

	[BZ #13792]
	* manual/time.texi (Elapsed Time): Move timeval_subtract example
	function to ...
	* manual/timeval_subtract.c.texi: ... here, new file.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update for recently added tests.

2012-03-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/s_sin.c: Include <fenv.h>
	(__sin): Save and restore rounding mode and use round-to-nearest
	for all computations.
	(__cos): Save and restore rounding mode and use round-to-nearest
	for all computations.
	* sysdeps/ieee754/dbl-64/s_tan.c: Include "math_private.h" and
	<fenv.h>.
	(tan): Save and restore rounding mode and use round-to-nearest for
	all computations.
	* math/libm-test.inc (cos_test_tonearest): New function.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #10135]
	* sysdeps/ieee754/dbl-64/s_scalbln.c (__scalbln): First test for
	small n, then large n, before computing and testing k+n.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (__scalbn): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c (__scalbln):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c (__scalbn):
	Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c (__scalblnf): Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c (__scalbnf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c (__scalbnl): Likewise.
	* math/libm-test.inc (scalbn_test): Add more tests.
	(scalbln_test): Likewise.

	* manual/filesys.texi (mode_t): Describe constraints on size and
	signedness, not exact equivalence to a particular type.
	(ino_t): Likewise.
	(ino64_t): Likewise.
	(dev_t): Likewise.
	(nlink_t): Likewise.
	(blkcnt_t): Likewise.
	(blkcnt64_t): Likewise.
	* manual/llio.texi (off_t): Likewise.

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_exp.c: Include <fenv.h>.
	(__ieee754_exp): Save and restore rounding mode and use
	round-to-nearest for all computations.
	* math/libm-test.inc (exp_test_tonearest): New function.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Chris Demetriou  <cgd@google.com>

	* sysdeps/gnu/errlist-compat.awk: Don't depend on AWK internals to
	have predictable order.

2012-03-01  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/getpagesize.c: Delete.

	* sysdeps/sparc/sparc64/fpu/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinff.S: New file.

	* sysdeps/sparc/sparc32/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitl.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitl.S: New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Move...
	* sysdeps/sparc/fpu/libm-test-ulps: to here.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Delete.

	* sysdeps/sparc/crti.S: Remove HAVE_BINUTILS_GOTDATA checks.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* config.h.in (HAVE_BINUTILS_GOTDATA): Delete.
	* sysdeps/sparc/elf/configure.in: Remove binutils GOTDATA checks.
	* sysdeps/sparc/elf/configure: Regenerated.

2012-03-01  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (AS, LD): Require binutils 2.20 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give binutils 2.20
	as required minimum version.
	* INSTALL: Regenerated.

	[BZ #2541]
	[BZ #4108]
	* sysdeps/ieee754/flt-32/s_erff.c (__erfcf): Mask out one more bit
	before squaring exponent.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfcl): Mask out whole
	bottom long double and 27 bits of top long double before squaring
	exponent.
	* math/libm-test.inc (erfc_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Kai Tietz  <ktietz@redhat.com>

	* soft-fp/soft-fp.h (_FP_STRUCT_LAYOUT): New macro.
	* soft-fp/quad.h (_FP_UNION_Q): Use _FP_STRUCT_LAYOUT on struct
	containing bit-fields.
	* soft-fp/extended.h (_FP_UNION_E): Likewise.
	* soft-fp/single.h (_FP_UNION_S): Likewise.
	* soft-fp/double.h (_FP_UNION_D): Likewise.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13786]
	* sysdeps/i386/i686/multiarch/strcmp.S [USE_AS_STRCASECMP_L]: Do
	not include ../strcmp.S.
	[USE_AS_STRNCASECMP_L]: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c
	(__strcasecmp_l_ia32): Define as alias to __strcasecmp_l_nonascii.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c
	(__strncasecmp_l_ia32): Define as alias to
	__strncasecmp_l_nonascii.

	[BZ #5794]
	* math/libm-test.inc (expm1_test): Add test for bug 5794.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Reduce some expected errors.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-29  Jeff Law  <law@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Avoid
	out of bounds read.

2012-02-29  Marek Polacek  <polacek@redhat.com>

	[BZ #13706]
	* elf/rtld.c (dl_main): Always set l_used to 1 for vDSO.
	* elf/Makefile: Add rules to run tst-unused-dep.out.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: New file.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (llround_test): Move one test from
	lround_test.  Use TEST_f_L in moved test.
	(lround_test): Move misplaced test to llround_test.  Add testcase
	from bug 2561.

2012-02-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/e_expf.S: New file.
	Contributed by Dmitrieva Liubov <liubov.dmitrieva@gmail.com>.

2012-02-28  Stanislav Brabec  <sbrabec@suse.cz>

	[BZ #13637]
	* posix/regex_internal.c (re_string_skip_chars): Fix miscomputation
	of remain_len that may cause incomplete multi-byte character and
	false match.
	* posix/bug-regex33.c: New file.
	* posix/Makefile (tests): Add bug-regex33.

2012-02-28  Joseph Myers  <joseph@codesourcery.com>

	* manual/macros.texi: New file.
	* Makefile (INSTALL, NOTES): Depend on manual/macros.texi.
	* manual/libc.texinfo: Include macros.texi.
	* manual/creatute.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/arith.texi: Use macros @Theglibc{}, @theglibc{} and
	@glibcadj{} in references to the GNU C Library.
	* manual/charset.texi: Likewise.
	* manual/conf.texi: Likewise.
	* manual/contrib.texi: Likewise.  Consistently use "GNU C Library"
	when not using those macros.
	* manual/creature.texi: Likewise.
	* manual/crypt.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/header.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	* manual/job.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/libc.texiinfo: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/maint.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/nss.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/syslog.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* NOTES: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

2012-02-28  Andreas Schwab  <schwab@linux-m68k.org>

	* include/dirent.h: Include <dirstream.h> before
	<dirent/dirent.h>.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_copysignf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S: New file.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floorf.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix accidental use of
	frame pointer instead of stack pointer relative arg slot.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.

2012-02-27  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #3992]
	* stdlib/fmtmsg.c: Use of uint32_t requires stdint.h.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix comment formatting.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: Likewise.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (CC): Restrict allowed GCC versions to 4.3 and
	later.  Allow versions 5-9.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give GCC 4.3 as
	required minimum version and 4.6 as recommended version.  Do not
	mention bugs in GCC 2.7 and 2.8.
	* INSTALL: Regenerated.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: New file.

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Do not
	manipulate bits before adding and subtracting TWO112[sx].
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-02-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h (vdprintf, dprintf): Put these under
	[__USE_XOPEN2K8] rather than [__USE_GNU], to match the stdio.h decls.
	* libio/stdio.h (vdprintf, dprintf): Remove comment about these not
	being in POSIX, because they are in 1003.1-2008.

	* rt/tst-aio.c: Include <fcntl.h>.
	* rt/tst-aio7.c: Likewise.
	* rt/tst-aio64.c: Likewise.

	* stdio-common/tst-fmemopen.c (main): Remove spurious const.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (--with-headers): Describe headers as
	interface headers, not private headers.
	(Specific advice for GNU/Linux systems): Describe use of headers
	from "make headers_install", not private headers from older
	kernels.
	* INSTALL: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in (LIBC_LINUX_VERSION):
	Change to 2.6.19.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* manual/llio.texi (fclean): Remove documentation.

	* manual/Makefile (libc-texi-generated): New variable.  Include
	version.texi.
	(libc.dvi, libc.pdf, libc.info, libc/index.html): Depend on
	$(libc-texi-generated), not duplicated list of files.
	(version.texi, stamp-version): New rules.
	(realclean): Remove $(libc-texi-generated), not individual files
	from that list.  Do not remove dir-add.texinfo.
	* manual/libc.texinfo: Comment out uses of edition numbers and
	references to printed manual.  Remove last-updated dates.
	(EDITION): Comment out.
	(ISBN): Likewise.
	(VERSION, UPDATED): Remove.
	(version.texi): Include.

2012-02-27  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/posix/spawni.c: Include <signal.h>.
	* sysdeps/pthread/aio_cancel.c: Include <fcntl.h>.
	* sysdeps/pthread/aio_fsync.c: Likewise.

2012-02-26  Ulrich Drepper  <drepper@gmail.com>

	* conform/Makefile (tests): Run only when not cross-compiling and
	when fast-check is not defined.

	* conform/conformtest.pl: XPG7 and POSIX2008 require C99.
	* conform/data/limits.h-data: Fixes for POSIX2008.
	* conform/run-conformtest.sh: Run all tests.
	* include/arpa/inet.h: Changes to allow conformtest.pl to use the
	headers.
	* include/bits/dlfcn.h: Likewise.
	* include/langinfo.h: Likewise.
	* include/monetary.h: Likewise.
	* include/sys/poll.h: Likewise.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT and AT_EMPTY_PATH only
	for __USE_GNU.
	* posix/spawn.h: Define __need_sigset_t.
	* posix/sys/wait.h: Don't include <sys/resource.h>, define id_t here.
	* posix/unistd.h: Declare ctermid only for XPG before XPG6.
	* rt/aio.h: Don't include fcntl.h and signal.h.  Use bits/siginfo.h
	to get sigevent_t only.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg and recvmmsg
	only for __USE_GNU.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev only for __USE_GNU.
	* termios/termios.h: Declare tcgetsid also for POSIX2008.

	* conform/Makefile: For now ignore errors from run-conformtest.
	* conform/conformtest.pl: Simplify code.  Add -ansi to CFLAGS for
	POSIX to avoid namespace pollution.  Don't prepend headers.
	* conform/data/aio.h-data: Fixes for POSIX testing.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/time.h-data: Likewise.
	* conform/data/unistd.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.

	* io/sys/stat.h: fchmod was always in POSIX.
	* posix/sys/wait.h: Include <sys/resource.h> only for waitid.
	* posix/unistd.h: fsync and ftruncate were in early POSIX as well.
	* rt/aio.h: Define __need_timespec before including <time.h>.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Don't name siginfo_t
	struct.  Add forward declaration of pthread_attr_t and use it in
	sigevent.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Don't let __STRICT_ANSI__
	always remove CLK_TCK definition.

2012-02-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/dbl-64/k_tan.c: Replace with empty file.

2012-02-25  Ulrich Drepper  <drepper@gmail.com>

	* conform/run-conformtest.sh: New file.
	* conform/Makefile: Run run-conformtest for tests.
	* conform/conformtest.pl: Many bug fixes.  Add ISO C99, ISO C11
	support.

	* conform/data/uchar.h-data: New file.
	* conform/data/aio.h-data: Fixes for ISO C and POSIX 1995 testing.
	* conform/data/arpa/inet.h-data: Likewise.
	* conform/data/assert.h-data: Likewise.
	* conform/data/complex.h-data: Likewise.
	* conform/data/cpio.h-data: Likewise.
	* conform/data/ctype.h-data: Likewise.
	* conform/data/dirent.h-data: Likewise.
	* conform/data/dlfcn.h-data: Likewise.
	* conform/data/errno.h-data: Likewise.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/float.h-data: Likewise.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/fnmatch.h-data: Likewise.
	* conform/data/ftw.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/iconv.h-data: Likewise.
	* conform/data/inttypes.h-data: Likewise.
	* conform/data/langinfo.h-data: Likewise.
	* conform/data/libgen.h-data: Likewise.
	* conform/data/limits.h-data: Likewise.
	* conform/data/locale.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/monetary.h-data: Likewise.
	* conform/data/mqueue.h-data: Likewise.
	* conform/data/ndbm.h-data: Likewise.
	* conform/data/net/if.h-data: Likewise.
	* conform/data/netdb.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/nl_types.h-data: Likewise.
	* conform/data/poll.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/regex.h-data: Likewise.
	* conform/data/sched.h-data: Likewise.
	* conform/data/search.h-data: Likewise.
	* conform/data/semaphore.h-data: Likewise.
	* conform/data/setjmp.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdarg.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/string.h-data: Likewise.
	* conform/data/strings.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/ipc.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/msg.h-data: Likewise.
	* conform/data/sys/resource.h-data: Likewise.
	* conform/data/sys/select.h-data: Likewise.
	* conform/data/sys/sem.h-data: Likewise.
	* conform/data/sys/shm.h-data: Likewise.
	* conform/data/sys/socket.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/statvfs.h-data: Likewise.
	* conform/data/sys/time.h-data: Likewise.
	* conform/data/sys/timeb.h-data: Likewise.
	* conform/data/sys/times.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/uio.h-data: Likewise.
	* conform/data/sys/un.h-data: Likewise.
	* conform/data/sys/utsname.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/syslog.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/termios.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.
	* conform/data/utmpx.h-data: Likewise.
	* conform/data/varargs.h-data: Likewise.
	* conform/data/wchar.h-data: Likewise.
	* conform/data/wctype.h-data: Likewise.
	* conform/data/wordexp.h-data: Likewise.

	* include/stropts.h: New file.
	* include/uchar.h: New file.
	* include/aio.h: Changes to allow conformtest.pl to use the headers.
	* include/assert.h: Likewise.
	* include/ctype.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fnmatch.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libio.h: Likewise.
	* include/locale.h: Likewise.
	* include/math.h: Likewise.
	* include/net/if.h: Likewise.
	* include/netdb.h: Likewise.
	* include/netinet/in.h: Likewise.
	* include/pthread.h: Likewise.
	* include/pwd.h: Likewise.
	* include/regex.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/setjmp.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/cdefs.h: Likewise.
	* include/sys/mman.h: Likewise.
	* include/sys/msg.h: Likewise.
	* include/sys/resource.h: Likewise.
	* include/sys/select.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/utsname.h: Likewise.
	* include/sys/wait.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utime.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* include/wordexp.h: Likewise.

	* posix/tar.h (TSVTX): Should not be visible for POSIX before 2008.

	* time/time.h: TIME_UTC must be a macro.
	Make timespec_get available for ISO C11 only as well.

2012-02-24  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/fmtmsg.c (fmtmsg): Lock around use of severity list.
	Reported by Peng Haitao <penght@cn.fujitsu.com>.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Use -o not -a in test for unsupported multi-arch.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2012-01-19.16.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/Makefile (licenses): Change fdl-1.1.texi to fdl-1.3.texi.

2012-02-24  Roland McGrath  <roland@hack.frob.com>

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): Set to 1.3.
	* manual/fdl-1.3.texi: New file.
	* manual/fdl-1.1.texi: File removed.

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): New @set.
	Use it for mention of FDL in cover text.
	(Documentation License): Use it in @include file name.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	[BZ #5461]
	* manual/arith.texi (strtoll): Refer to LLONG_MAX and LLONG_MIN,
	not LONG_LONG_MAX and LONG_LONG_MIN.
	* manual/lang.texi (LONG_LONG_MIN): Document first as ISO
	LLONG_MIN.  Refer to LONG_LONG_MIN only as older GCC-specific
	name.
	(LONG_LONG_MAX, LLONG_MAX, ULONG_LONG_MAX, ULLONG_MAX): Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2547]
	[BZ #11365]
	* sysdeps/ieee754/flt-32/s_nearbyintf.c (__nearbyintf): Do not
	manipulate bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (nearbyint_test): Add more tests.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2548]
	* sysdeps/ieee754/flt-32/s_rintf.c (__rintf): Do not manipulate
	bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (rint_test): Add more tests.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward: Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10110]
	* include/stdc-predef.h: New file.  Extracted from features.h.
	* include/features.h: Include stdc-predef.h.
	* Makefile (headers): Add stdc-predef.h.
	* CONFORMANCE (Compiler limitations): Update.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	* manual/libc.texinfo (VERSION, UPDATED): Revert.

2012-02-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: More jn test ULP updates.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/__longjmp.S: Unwind in the 'thread' path
	using a normal save/restore sequence, rather than allocating a
	dummy stack frame just to store a frame pointer and restore.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Fix stray word in line-wrapped comment.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/elf/configure.in (PI_STATIC_AND_HIDDEN): Define if
	both binutils and gcc support GOTDATA.

	* sysdeps/unix/sparc/sysdep.h: Document why we don't use
	"rd %pc" in the PIC register setup sequences.

	* sysdeps/sparc/crti.S: Try to use GOTDATA relocs.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.

	* config.h.in (HAVE_BINUTILS_GOTDATA): New.
	(HAVE_GCC_GOTDATA): New.
	* sysdeps/sparc/elf/configure.in: Test for GOTDATA
	relocation support in both binutils and gcc.
	* sysdeps/sparc/elf/configure: Regenerate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete.
	* sysdeps/sparc/sparc32/elf/configure: Delete.
	* sysdeps/sparc/sparc64/elf/configure.in: Delete.
	* sysdeps/sparc/sparc64/elf/configure: Delete.
	* sysdeps/sparc/elf/configure.in: New file.
	* sysdeps/sparc/elf/configure: Generate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete WDISP22 check.
	* sysdeps/sparc/sparc32/elf/configure: Regenerate.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure: Regenerate.
	* config.h.in (BROKEN_SPARC_WDISP22): Remove.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Do not mention specific glibc version
	numbers.
	* manual/libc.texinfo (VERSION, UPDATED): Update.
	(@copying): Use @copyright{} and range of years.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13695]
	* csu/Makefile (distribute): Remove initfini.c and defs.awk.
	[crti.S not in sysdirs] (generated): Do not append.
	[crti.S not in sysdirs] (omit-deps): Likewise.
	[crti.S not in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Remove rule.
	[crti.S not in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S not in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)):
	Likewise.
	[crti.S not in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S not in sysdirs] (CFLAGS-initfini.s): Remove variable.
	[crti.S not in sysdirs] (initfini.c): Remove vpath directive.
	* csu/defs.awk: Remove file.
	* sysdeps/generic/initfini.c: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile (CFLAGS-initfini.s): Remove
	variable.
	* sysdeps/powerpc/powerpc64/Makefile (CFLAGS-initfini.s):
	Likewise.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/epoll.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Remove
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Get flags from
	<bits/epoll.h>.
	(EPOLL_CLOEXEC, EPOLL_NONBLOCK): Don't define here.
	(__EPOLL_PACKED): Define to empty if not defined by
	<bits/epoll.h>.
	(struct epoll_event): Use __EPOLL_PACKED to make possibly packed.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/epoll.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/timerfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Get flags from
	<bits/timerfd.h>.
	(TFD_CLOEXEC, TFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timerfd.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Resort with gen-libm-test.pl -n
	in C locale.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-20  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Adjust ULPs for jn tests.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-19  Andreas Schwab  <schwab@linux-m68k.org>

	* manual/errno.texi (Error Codes): Add EHWPOISON entry.
	* sysdeps/unix/sysv/linux/bits/errno.h (EHWPOISON): Define if not
	defined.
	* sysdeps/unix/sysv/linux/sparc/bits/errno.h (EHWPOISON):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/Versions: Add new errlist compat
	entry for 2.16.

2012-02-19  Aurelien Jarno  <aurelien@aurel32.net>

	* math/w_acos.c: Use non-signaling floating-point comparisons.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9739]
	* manual/string.texi (strnlen): Use correct parameter name in
	equivalent expression.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #11174]
	* manual/users.texi (seteuid): Consistently use neweuid for
	argument name.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13704]
	* manual/nss.texi (Services in the NSS configuration): Correct
	list of services in example configuration file.

2012-02-19  Nick Bowler  <nbowler@draconx.ca>

	[BZ #11322]
	* manual/arith.texi: Remove statements about negative zero
	behaving identically to zero.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5993]
	* manual/install.texi: Do not document upgrading from libc5.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #4596]
	* manual/conf.texi (_POSIX_VERSION): Do not mention __POSIX__.

2012-02-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SPARC_PIC_THUNK): New macro.
	(SETUP_PIC_REG): Use SPARC_PIC_THUNK and don't save and restore
	%o7 across the call.
	(SETUP_PIC_REG_LEAF): Do %o7 save/restore in this new macro
	instead.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Use
	SETUP_PIC_REG_LEAF.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/sparc/crti.S: Use SETUP_PIC_REG.
	* sysdeps/sparc/crtn.S: Likewise.

2012-02-17  Ulrich Drepper  <drepper@gmail.com>

	* aout/Makefile: Remove.

2012-02-18  Rafe Kettler  <rafe.kettler@gmail.com>

	[BZ #13058]
	* manual/examples/argp-ex1.c (main): Format definition in GNU
	style.
	* manual/examples/argp-ex2.c (main): Likewise.
	* manual/examples/argp-ex3.c (main): Likewise.
	* manual/examples/argp-ex4.c (main): Likewise.
	* manual/examples/longopt.c (main): Use new-style prototype
	definition.
	* manual/examples/strncat.c (main): Specify return type and use
	(void) for arguments.
	* manual/examples/subopt.c (main): Use char **argv argument.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5077]
	* manual/lang.texi (FLT_EPSILON): Avoid description depending on
	rounding modes.

2012-02-17  Fabrice Bauzac  <fabrice.bauzac@wanadoo.fr>

	[BZ #6907]
	* manual/string.texi (strchr): Change when strchrnul is
	recommended.

2012-02-17  Dwayne Grant McConnell  <decimal@us.ibm.com>

	[BZ #174]
	* manual/locale.texi (setlocale): Document LOCPATH.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10210]
	* manual/process.texi (execle): Move @dots{} before last argument.

2012-02-17  Paul Bolle  <pebolle@tiscali.nl>

	[BZ #12047]
	* manual/charset.texi (Generic Charset Conversion): Fix typo
	(LC_TYPE -> LC_CTYPE).

2012-02-17  Nicolas Boulenguez  <nicolas.boulenguez@free.fr>

	[BZ #5805]
	* manual/arith.texi (scalbn): Use @var{} on parameter names.
	(scalbnf): Likewise.
	(scalbnl): Likewise.
	(scalbln): Likewise.
	(scalblnf): Likewise.
	(scalblnl): Likewise.
	* manual/errno.texi (vwarn): Name last parameter as @var{ap}.
	(vwarnx): Likewise.
	(verr): Likewise.
	(verrx): Likewise.
	* manual/filesys.texi (telldir): Use braces around return type.
	* manual/llio.texi (mmap): Add space after comma.
	(mmap64): Likewise.
	* manual/math.texi (jn): Use @var{} on parameter names.
	(jnf): Likewise.
	(jnl): Likewise.
	(yn): Likewise.
	(ynf): Likewise.
	(ynl): Likewise.
	* manual/memory.texi (alloca): Remove semicolon on @deftypefun
	line.
	* manual/resource.texi (ulimit): Use @dots{} instead of literal
	"...".
	(sched_get_priority_min): Remove semicolon on @deftypefun line.
	(sched_get_priority_max): Likewise.
	* manual/signal.texi (sigvec): Add space after comma.
	* manual/socket.texi (if_nametoindex): Use @var{} on parameter
	names.
	(if_indextoname): Likewise.
	(if_freenameindex): Likewise.
	(sendto): Use ',' instead of '.' in prototype.
	* manual/startup.texi (syscall): Use @dots{} instead of literal
	"...".
	* manual/stdio.texi (__fpending): Separate initial words of
	paragraph from @deftypefun line.
	* manual/syslog.texi (syslog): Use @dots{} instead of literal
	"...".
	(vsyslog): Use @var{} on parameter names.
	* manual/terminal.texi (stty): Use @var{} on parameter names.
	* manual/users.texi (getutmp): Use @var{} on parameter names.
	(getutmpx): Likewise.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6884]
	* manual/stdio.texi (fopen): Fix typos in description of
	",ccs=STRING".

2012-02-17  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #4026]
	* sysdeps/unix/sysv/linux/clock_settime.c: include <time.h> to
	get clock_id definition.

2012-02-17  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h: #include <sys/mman.h>.
	(madvise): Cast every argument to void on its own.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9902]
	* manual/startup.texi (Exit Status): Fix typo.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10140]
	* manual/examples/argp-ex1.c: Include <stdlib.h>.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.

2012-02-16  Richard Henderson  <rth@redhat.com>

	* sysdeps/s390/s390-32/crti.S, sysdeps/s390/s390-32/crtn.S: New files.
	* sysdeps/s390/s390-32/initfini.c: Remove.
	* sysdeps/s390/s390-64/crti.S, sysdeps/s390/s390-64/crtn.S:
	* sysdeps/s390/s390-64/initfini.c: Remove.

2012-02-15  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/crti.S, sysdeps/sh/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/sh/elf/initfini.c: Remove file.

2012-02-16  David S. Miller  <davem@davemloft.net>

	[BZ #11494]
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_FSYNC): Define.

	* sysdeps/sparc/Makefile: Add -fPIC when building crt{i,n}.S
	* sysdeps/sparc/crti.S: New file.
	* sysdeps/sparc/crtn.S: New file.
	* sysdeps/sparc/sparc32/Makefile: Remove initfini handling.
	* sysdeps/sparc/sparc64/Makefile: Likewise.

2012-02-15  Mike Frysinger  <vapier@gentoo.org>

	[BZ #3335]
	* sysdeps/unix/sysv/linux/getcwd.c: Include sys/param.h.

2012-02-15  Roland McGrath  <roland@hack.frob.com>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h (madvise): New macro.

	* mach/devstream.c (cookie_io_functions_t): Macro removed.
	(write, read, close): Likewise.
	Patch by Aurelien Jarno <aurelien@aurel32.net>.

2012-02-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/signalfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/signalfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/signalfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/signalfd.h: Get flags from
	<bits/signalfd.h>.
	(SFD_CLOEXEC, SFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/signalfd.h.

2012-02-14  Marek Polacek  <polacek@redhat.com>

	* sysdeps/x86_64/crti.S: New file.
	* sysdeps/x86_64/crtn.S: New file.
	* sysdeps/x86_64/elf/initfini.c: Remove file.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/inotify.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/inotify.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/inotify.h: Remove.
	* sysdeps/unix/sysv/linux/sys/inotify.h: Get flags from
	<bits/inotify.h>.
	(IN_CLOEXEC, IN_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/inotify.h.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/eventfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/eventfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/eventfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/eventfd.h: Get flags from
	<bits/eventfd.h>.
	(EFD_SEMAPHORE, EFD_CLOEXEC, EFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/eventfd.h.

2012-02-10  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Invoke
	__feraiseexcept instead of feraiseexcept.

	* rt/tst-cpuclock1.c: Add a few comments, and error checking for
	nanosleep invocations.
	* rt/tst-cpuclock2.c: Print some values as intended, fix explanatory
	strings, and add error checking for a nanosleep invocations.

2012-02-09  Paul Eggert  <eggert@cs.ucla.edu>

	Replace FSF snail mail address with URLs, as per GNU coding standards.
	Most of the snail mail addresses were wrong anyway, and omitting
	them makes the source code easier to maintain.  Almost all of the
	changes are to license notices and to locale LC_IDENTIFICATION
	addresses, except for this one:
	* manual/libc.texinfo: In "Published by", give the FSF's URL,
	not its snail mail address.

2012-02-09  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/internal_statvfs.c: Use <> for include
	of kernel-features.h.

	* elf/dl-tls.c (update_get_addr): Avoid pointer type mismatch warning.

2012-02-08  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Remove _G_HAVE_SYS_CDEFS conditional.
	* sysdeps/mach/hurd/_G_config.h: Remove _G_HAVE_SYS_CDEFS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.

2012-02-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/libm-test-ulps: Reduce ldouble ULPs for jn
	tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/powerpc/powerpc32/crti.S: New file.
	* sysdeps/powerpc/powerpc32/crtn.S: New file.
	* sysdeps/powerpc/powerpc64/crti.S: New file.
	* sysdeps/powerpc/powerpc64/crtn.S: New file.

	* Makeconfig (have-initfini): Don't set.
	* config.make.in (have-initfini, need-nopic-initfini): Don't set.
	* configure.in (nopic_initfini): Don't substitute.
	* config.h.in (HAVE_INITFINI): Don't #undef.
	* csu/Makefile (CPPFLAGS): Don't add -DHAVE_INITFINI.
	* csu/gmon-start.c: Assume HAVE_INITFINI is defined.

2012-02-08  Joseph Myers  <joseph@codesourcery.com>

	Support crti.S and crtn.S provided directly by architectures.
	* csu/Makefile [crti.S in sysdirs] (generated): Do not append.
	[crti.S in sysdirs] (omit-deps): Likewise.
	[crti.S in sysdirs] (CFLAGS-initfini.s): Do not define variable.
	[crti.S in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Disable rule.
	[crti.S in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)): Likewise.
	[crti.S in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S in sysdirs] (initfini.c): Remove vpath directive.
	* sysdeps/i386/crti.S, sysdeps/i386/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/i386/elf/Makefile: Remove file.
	* sysdeps/i386/Makefile (CFLAGS-initfini.s): Remove variable.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* sysdeps/generic/_G_config.h: Remove _G_ARGS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* math/Makefile (tests): Add tst-CMPLX2.
	* math/tst-CMPLX2.c: New file.

2012-02-07  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* math/libm-test.inc (jn_test): Add missing L suffix.

2012-02-06  Marek Polacek  <polacek@redhat.com>

	* sysdeps/s390/asm-syntax.h: Remove __ELF__ conditionals.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/s_log1p.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_expm1l.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/s_cexp.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/s_log1pl.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_log1pf.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/s_expm1l.S: Likewise.
	* sysdeps/x86_64/fpu/s_log1pl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #411]
	* sysdeps/i386/sysdep.h (__i686): Undefine and redefine.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h: Include <features.h>.
	(GET_PC_THUNK, GET_PC_THUNK_STR): Define conditionally on compiler
	version.

2012-02-05  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG_STR, LOAD_PIC_REG_STR):
	Define.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (check_consistency): Use
	LOAD_PIC_REG_STR.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (GET_PC_THUNK, GET_PC_THUNK_STR): Define.
	(SETUP_PIC_REG): Use GET_PC_THUNK.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Use GET_PC_THUNK_STR
	macro.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG, LOAD_PIC_REG): Define also
	for non-PIC compilation.
	(SETUP_PIC_REG): Add .p2align directive.
	* sysdeps/i386/i686/memcmp.S: Use macros for PIC register setup.
	* sysdeps/i386/i686/multiarch/bcopy.S: Likewise.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* math/tst-CMPLX.c: Include <stdio.h>.

2012-01-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/mathdef.h (float_t): Always define as
	float.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-31  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Don't define _PARAMS.
	* locale/programs/config.h: Don't define PARAMS.
	* stdlib/strtol_l.c: Likewise.
	(__strtol_l): Remove PARAMS from the prototype.

2012-01-31  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Remove name translation.  Don't use mixed-cap
	names.  Just use the correct names.  Remove unnecessary wrapper
	functions.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.

	* malloc/arena.c (arena_get2): Really don't call __get_nprocs if
	ARENA_TEST says not to.  Simplify test for creation of a new arena.
	Partially based on a patch by Siddhesh Poyarekar <siddhesh@redhat.com>.

2012-01-30  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-tls.c (__tls_get_addr): Optimize by transforming all calls
	into tail calls.
	(update_get_addr): New function.
	(tls_get_addr_tail): Take GET_ADDR_ARGS parameter, remove
	GET_ADDR_MODULE parameter.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* crypt/cert.c: Remove __STDC__ conditionals.
	* crypt/crypt-entry.c: Likewise.
	* crypt/crypt_util.c: Likewise.
	* libio/filedoalloc.c: Likewise.
	* libio/fileops.c: Likewise.
	* libio/genops.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopen64.c: Likewise.
	* libio/iogetdelim.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wgenops.c: Likewise.
	* locale/programs/xmalloc.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/xbug.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memcmp.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* time/strftime_l.c: Likewise.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_cc_sse2avx): AC_SUBST.
	* config.make.in (config-cflags-sse2avx): Define.
	* sysdeps/x86_64/fpu/multiarch/Makefile (CFLAGS-slowexp-avx.c):
	Fix typo.

2012-01-29  Chris Metcalf  <cmetcalf@tilera.com>

	* scripts/config.guess: Update from upstream config git repository.
	* scripts/config.sub: Likewise.

2012-01-28  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (EM_TILEPRO, EM_TILEGX): New macros.
	(EM_NUM): Update.
	(R_TILEPRO_*, R_TILEGX_*): New macros.

	* scripts/firstversions.awk: Fix bug in version range handling.

	* sysdeps/unix/sysv/linux/grantpt.c: Use <> brackets for not-cancel.h.

	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Call __fxstatat64.

	* include/sys/epoll.h: New file.
	* sysdeps/unix/sysv/linux/epoll_pwait.c (epoll_pwait): Mark as
	libc_hidden_def.

2012-01-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h (__signbitl): Optimize a bit.
	Avoid unnecessary __WORDSIZE == 64 test.
	(fmaxf): Use VEX format if possible.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.

	* config.h.in: Define HAVE_SSE2AVX_SUPPORT.
	* math/math_private.h: Remove libc_fegetround* and
	libc_fesetround*.
	* sysdeps/i386/configure.in: Check for -msse2avx.
	* sysdeps/x86_64/fpu/math_private.h: Use VEX-encoded instructions
	also if SSE2AVX is defined.
	Remove libc_fegetround* and libc_fesetround*.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Compile *-avx functions
	if config-cflags-sse2avx is yes.  Also add -DSSE2AVX to defines.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_AVX again instead
	of HAS_YMM_USABLE.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Simplify use of AVX instructions.

2012-01-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/a2/memcpy.S: Fix for when cache line
	size is not set.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.

2012-01-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13618]
	* elf/dl-open.c (dl_open_worker): Sort objects by dependency before
	relocation.
	* Makeconfig (libm): Define.
	* elf/Makefile: Add rules to build and run tst-relsort1.
	* elf/tst-relsort1.c: New file.
	* elf/tst-relsort1mod1.c: New file.
	* elf/tst-relsort1mod2.c: New file.

2012-01-27  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ldexp.c: Remove __STDC__ conditionals.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_nextafter.c: Likewise.
	* math/s_nexttowardf.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_jnl.c: Likewise.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* crypt/md5.h: Remove __STDC__ conditionals.
	* libio/libioP.h: Likewise.
	* locale/programs/config.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/unix/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h: Remove __STDC__ conditionals.
	* malloc/obstack.h: Likewise.
	* math/complex.h: Likewise.
	* math/math.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-26  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13583]
	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_OSXSAVE.
	Clean up HAS_* macros.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): If
	bit_AVX is set also check OSXAVE/XCR0 and set bit_YMM_Usable if
	possible.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_YMM_USABLE, not
	HAS_AVX.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

2012-01-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/tst-unique3.cc (gets): Remove declaration.
	* elf/tst-unique3lib.cc (gets): Likewise.
	* elf/tst-unique3lib2.cc (gets): Likewise.
	* elf/tst-unique4.cc (gets): Likewise.

2012-01-24  Ulrich Drepper  <drepper@gmail.com>

	* include/stdio.h: Add C++ protection.  Add gets declarations and
	definitions.
	* debug/tst-chk1.c: Don't declare gets here.
	* stdio-common/tst-gets.c: Likewise.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* posix/glob: Remove directory.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* wcsmbs/Makefile (tst-c16c32-1-ENV): Define.

2012-01-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/socket.c (__socket): Return EAFNOSUPPORT instead
	of the non-standard EPFNOSUPPORT.

2011-12-26  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/mmap.c (__mmap): When MAPADDR is nonzero, try
	__vm_allocate and __vm_map with ANYWHERE set to 0 first, and try with
	ANYWHERE set to 1 only on KERN_NO_SPACE error.

2012-01-21  Ulrich Drepper  <drepper@gmail.com>

	* wcsmbs/uchar.h: Test __STDC_VERSION__.

2012-01-20  Ulrich Drepper  <drepper@gmail.com>

	* nscd/aicache.c (addhstaiX): Do not cache negative results of
	transient errors.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.

2012-01-16  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Various cleanups.
	* malloc/hooks.c: Likewise.

	* stdlib/Makefile (tests): Add bug-fmtmsg1.
	* stdlib/bug-fmtmsg1.c: New file.

	* stdlib/fmtmsg.c (init): Add missing unlock.
	Patch by Peng Haitao <penght@cn.fujitsu.com>.

2012-01-12  Marek Polacek  <polacek@redhat.com>

	* libio/bits/stdio2.h: Do not define gets for ISO C11, ISO C++11,
	and _GNU_SOURCE.

2012-01-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Add GLUE and GENERATE_GOT_LABEL macros.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Call
	macro to ensure uniqueness of label name.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2012-01-11  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: New file.

	* sysdeps/ieee754/dbl-64/s_scalbln.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: New file.

2012-01-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: New file.

	* sysdeps/ieee754/dbl-64/s_modf.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.

	* math/bits/mathcalls.h: Add const attribute to fmin and fmax.

	* sysdeps/ieee754/dbl-64/s_scalbn.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: New file.

	* math/bits/math-finite.h: Add ldexp support.

2012-01-10  Marek Polacek  <polacek@redhat.com>

	* locale/programs/localedef.h (show_archive_content): Add noreturn
	attribute.

2012-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Add branch prediction.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* io/bits/poll2.h: Add __BEGIN/__END_DECLS.

	* io/Makefile (headers): Add bits/poll2.h.

2011-01-05  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S: Fix a
	typo #include statement.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* include/sys/cdefs.h: Define __attribute_alloc_size.
	* catgets/gencat.c: Add alloc_size attribute and apply consistently
	the malloc attribute to xmalloc, xcalloc, xrealloc, and xstrdup.
	* elf/pldd.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/strtab.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.h: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* nscd/nscd.h: Likewise.
	* nss/makedb.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.
	* locale/programs/localedef.c: Remove xmalloc prototype.
	* nscd/mem.c: Remove xmalloc and xcalloc prototypes.

2012-01-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Use alloca when
	appropriate.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* math/Makefile (tests): Add tst-CMPLX.
	* math/tst-CMPLX.c: New file.

	* math/complex.h (CMPLXL): Fix typo.

	* debug/Makefile (routines): Add poll_chk and ppoll_chk.
	* debug/Versions: Export __pool_chk and __ppoll_chk from libc for
	GLIBC_2.16.
	* debug/tst-chk1.c: Add poll and ppoll tests.
	* io/sys/poll.h: Include bits/poll2.h for _FORTIFY_SOURCE.
	* include/sys/poll.h: Add hidden proto for ppoll.
	* sysdeps/unix/sysv/linux/ppoll.c: Add hidden def.
	* sysdeps/mach/hurd/ppoll.c: Likewise.
	* io/ppoll.c: Likewise.
	* debug/poll_chk.c: New file.
	* debug/ppoll_chk.c: New file.
	* include/bits/poll2.h: New file.
	* io/bits/poll2.h: New file.

	[BZ #1350]
	* math/complex.h (CMPLX, CMPLXF, CMPLXL): Define.

	* configure.in: static is always set to yes.  Remove.
	* config.make.in: Don't set build-static.
	* Makeconfig: Remove use of build-static.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* math/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* nptl/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.

	* configure.in: PWD_P is not used anymore.
	* config.make.in: Remove PWD_P entry.

	* configure.in: Remove last remnants of RANLIB.
	No need to check for signed size_t anymore.
	Don't set libc_commonpagesize and libc_relro_required here for Alpha
	and IA-64.
	Remove __builtin_expect test because we require at least gcc 3.4.
	* aclocal.m4: Likewise.

	* wcsmbs/mbrtoc16.c: Implement using towc function.
	* wcsmbs/wcsmbsload.h: No need for toc16 and fromc16 functions.
	* wcsmbs/wcsmbsload.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/iconv_prog.c: Remove CHAR16 handling.

	* wcsmbs/c16rtomb.c: Remove #if 0'ed code.

	* wcsmbs/mbrtowc.c: Better check for invalid inputs.

	* configure.in: Remove --with-elf and --enable-bounded options.
	Dont set base_machine for ia64.  More non-ELF conditions removed.
	Remove testing and setting of leading underscore information.
	* config.make.in (build-bounded): Set to no.
	* config.h.in: Remove NO_UNDERSCORES entry.
	* include/libc-symbols.h: Don't define HAVE_WEAK_SYMBOLS.  ELF has
	them.
	* csu/start.c: Remove !NO_UNDERSCORE code.
	* locale/localeinfo.h: Likewise.
	* sysdeps/generic/machine-gmon.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/sparc/sparc32/alloca.S: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sparc/start.c: Likewise.
	* sysdeps/unix/sparc/sysdep.S: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/unix/start.c: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

2012-01-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13553]
	* misc/sys/cdefs.h: Remove __const, __signed, and __volatile definition
	for non-gcc.
	* argp/argp-fmtstream.h: Use const instead __const.
	* argp/argp.h: Likewise.
	* assert/assert.h: Likewise.
	* bits/fenv.h: Likewise.
	* bits/sched.h: Likewise.
	* bits/sigset.h: Likewise.
	* bits/sigthread.h: Likewise.
	* catgets/nl_types.h: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* crypt/crypt-private.h: Likewise.
	* crypt/crypt.h: Likewise.
	* crypt/crypt_util.c: Likewise.
	* ctype/ctype.h: Likewise.
	* debug/execinfo.h: Likewise.
	* debug/mbsnrtowcs_chk.c: Likewise.
	* debug/mbsrtowcs_chk.c: Likewise.
	* debug/wcsnrtombs_chk.c: Likewise.
	* debug/wcsrtombs_chk.c: Likewise.
	* debug/wcstombs_chk.c: Likewise.
	* dirent/dirent.h: Likewise.
	* dlfcn/dlfcn.h: Likewise.
	* elf/neededtest4.c: Likewise.
	* grp/grp.h: Likewise.
	* gshadow/gshadow.h: Likewise.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.h: Likewise.
	* iconv/loop.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* include/aio.h: Likewise.
	* include/aliases.h: Likewise.
	* include/argz.h: Likewise.
	* include/arpa/inet.h: Likewise.
	* include/assert.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/execinfo.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fenv.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libintl.h: Likewise.
	* include/mntent.h: Likewise.
	* include/netdb.h: Likewise.
	* include/pwd.h: Likewise.
	* include/rpc/netdb.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/shadow.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statfs.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/syslog.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/time.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* inet/aliases.h: Likewise.
	* inet/arpa/inet.h: Likewise.
	* inet/netinet/ether.h: Likewise.
	* inet/netinet/in.h: Likewise.
	* intl/libintl.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/ftw.h: Likewise.
	* io/sys/poll.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* io/utime.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* libio/bits/stdio2.h: Likewise.
	* libio/libio.h: Likewise.
	* libio/libioP.h: Likewise.
	* libio/stdio.h: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/locale.h: Likewise.
	* login/utmp.h: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/malloc.h: Likewise.
	* malloc/mcheck.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* math/bits/mathcalls.h: Likewise.
	* math/fenv.h: Likewise.
	* math/math_private.h: Likewise.
	* misc/bits/error.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/err.h: Likewise.
	* misc/error.h: Likewise.
	* misc/fstab.h: Likewise.
	* misc/mntent.h: Likewise.
	* misc/regexp.h: Likewise.
	* misc/search.h: Likewise.
	* misc/sgtty.h: Likewise.
	* misc/sys/mman.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* misc/sys/uio.h: Likewise.
	* misc/sys/xattr.h: Likewise.
	* misc/ttyent.h: Likewise.
	* nis/rpcsvc/ypclnt.h: Likewise.
	* nss/nss.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/fnmatch.h: Likewise.
	* posix/glob.h: Likewise.
	* posix/sched.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/wordexp.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resolv/netdb.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* rt/aio.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* shadow/shadow.h: Likewise.
	* signal/signal.h: Likewise.
	* socket/send.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/sys/socket.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/fmtmsg.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* stdlib/ucontext.h: Likewise.
	* streams/stropts.h: Likewise.
	* string/argz.h: Likewise.
	* string/bits/string2.h: Likewise.
	* string/string.h: Likewise.
	* string/strings.h: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_des.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/generic/inttypes.h: Likewise.
	* sysdeps/generic/net/if.h: Likewise.
	* sysdeps/generic/sys/swap.h: Likewise.
	* sysdeps/gnu/net/if.h: Likewise.
	* sysdeps/gnu/utmpx.h: Likewise.
	* sysdeps/i386/fpu/bits/fenv.h: Likewise.
	* sysdeps/i386/i486/bits/string.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-strtold_l.c: Likewise.
	* sysdeps/s390/bits/string.h: Likewise.
	* sysdeps/s390/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/mathinline.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigset.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sys_errlist.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/glob64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/olddirent.h: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/prlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/readv.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmp-convert.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmpx32.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/acct.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mount.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/swap.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Likewise.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Likewise.
	* sysdeps/x86_64/strncase_l-nonascii.c: Likewise.
	* sysvipc/sys/ipc.h: Likewise.
	* sysvipc/sys/msg.h: Likewise.
	* sysvipc/sys/sem.h: Likewise.
	* sysvipc/sys/shm.h: Likewise.
	* termios/termios.h: Likewise.
	* time/sys/time.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/uchar.h: Likewise.
	* wcsmbs/wchar.h: Likewise.
	* wctype/wctype.h: Likewise.

	[BZ #13551]
	* Makeconfig: Remove all but ELF support including AIX support.
	* Makerules: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Makefile: Likewise.
	* csu/version.c: Likewise.
	* debug/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* extra-lib.mk: Likewise.
	* iconv/Makefile: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/shlib-compat.h: Likewise.
	* resolv/Makefile: Likewise.
	* resolv/res_libc.c: Likewise.
	* rt/Makefile: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile: Likewise.
	* sysdeps/powerpc/powerpc64/Makefile: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/wordsize-32/divdi3.c: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

	* argp/Versions: Remove _argp_unlock_xxx.

	[BZ #13559]
	* abilist/ld.abilist: Update.  Adjust for removal of tls option.
	* abilist/libBrokenLocale.abilist: Likewise.
	* abilist/libanl.abilist: Likewise.
	* abilist/libc.abilist: Likewise.
	* abilist/libcrypt.abilist: Likewise.
	* abilist/libdl.abilist: Likewise.
	* abilist/libm.abilist: Likewise.
	* abilist/libnsl.abilist: Likewise.
	* abilist/libpthread.abilist: Likewise.
	* abilist/libresolv.abilist: Likewise.
	* abilist/librt.abilist: Likewise.
	* abilist/libthread_db.abilist: Likewise.
	* abilist/libutil.abilist: Likewise.
	* abilist/libnss_db.abilist: New file.

	* scripts/abilist.awk: Add support for indirect functions.

	* sysdeps/unix/sysv/linux/configure.in: Remove m68k support.

	* sysdeps/generic/ldsodefs.h: Remove Alpha support.

	* shlib-versions: Remove entries for ports architectures.

	* elf/tls-macros.h: Remove support for Alpha and IA-64.  Should be in
	files in ports.
	* elf/stackguard-macros.h: Remove support for IA-64.
	* elf/tst-auditmod1.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.

	* sysdeps/unix/sysv/linux/configure.in: Ports should define
	libc_cv_gcc_unwind_find_fde and arch_minimum_kernel in their
	configure files.

	[BZ #13552]
	* configure.in: Remove --enable-omitfp support.
	* FAQ.in: Adjust.
	* config.make.in: Likewise.
	* Makeconfig: Likewise.
	* manual/install.texi: Likewise.

	In case anyone cares, the IA-64 architecture could move to ports.
	* sysdeps/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/kernel-features.h: Remove IA-64 support.

	[BZ #13555]
	* configure.in: Remove entries for unsupported architectures.

	[BZ #13533]
	* iconv/gconv_builtin.h: Use CHAR16 for the char16_t conversions.
	* iconv/gconv_simple.c: Rename char16_t routines.  Add char16_t<->utf8
	routines.
	* iconv/gconv_int.h: Adjust prototypes for char16_t routines.
	* iconv/iconv_prog.c: Recognize CHAR16 as internal name.
	* wcsmbs/c16rtomb.c: Fix a few problems.  Disable all the code and
	fall back to using wcrtomb.
	* wcsmbs/mbrtoc16.: Fix implementation to handle real conversions.
	* wcsmbs/wcsmbsload.c: Make char16 routines optional.  Adjust for
	renaming.
	* wcsmbs/Makefile (tests): Add tst-c16c32-1:
	* wcsmbs/tst-c16c32-1.c: New file.

	* wcsmbs/wcrtomb.c: Use MB_LEN_MAX instead of MB_CUR_MAX for sizing
	local variable.

	* libio/stdio.h: Do not declare gets at all for _GNU_SOURCE.

	* elf/tst-unique3.cc: Add explicit declaration of gets.
	* elf/tst-unique3lib.cc: Likewise.
	* elf/tst-unique3lib2.cc: Likewise.
	* elf/tst-unique4.cc: Likewise.

	* string/test-strcpy.c (do_one_test): Fix format string for WIDE use.

2012-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13566]
	* assert/assert.h (static_assert): Don't define for C++.
	* libio/stdio.h (gets): Do declare for C++ <= C++11.
	* wcsmbs/uchar.h (char16_t, char32_t): Don't typedef for C++11.

2012-01-03  Ulrich Drepper  <drepper@gmail.com>

	* iconv/loop.c (single loop): Fix assertion in storing of
	remaining bytes.

	* posix/regcomp.c (init_word_char): Optimize a bit for sane encodings.

2012-01-01  Ulrich Drepper  <drepper@gmail.com>

	* posix/getconf.c: Update copyright year.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* debug/xtrace.sh: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* debug/catchsegv.sh: Likewise.

2011-12-30  Jakub Jelinek  <jakub@redhat.com>

	* posix/regex_internal.c (re_string_fetch_byte_case): Remove
	pure attribute.

2011-12-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13533]
	* iconv/gconv_simple.c: Add ASCII<->UTF-16 transformations.
	* iconv/gconv_builtin.h: Add entries for internal ASCII<->UTF-16
	transformations.
	* iconv/gconv_int.h: Likewise.
	* wcsmbs/Makefile (routines): Add mbrtoc16 and c16rtomb.
	* wcsmbs/Versions: Export mbrtoc16, c16rtomb, mbrtoc32, c32rtomb
	from libc for GLIBC_2.16.
	* wcsmbs/mbrtowc.c: Define mbrtoc32 alias.
	* wcsmbs/wcrtomb.c: Define c32rtomb alias.
	* wcsmbs/uchar.h: Really define mbstate_t.
	* wcsmbs/wchar.h: Allow defining mbstate_t in uchar.h.
	* wcsmbs/c16rtomb.c: New file.
	* wcsmbs/mbrtoc16.c: New file.
	* wcsmbs/wcsmbsload.c: Add static definitions for c16 conversions
	for C/POSIX locale.
	(__wcsmbs_load_conv): Do not fill in c16 routines yet.
	* wcsmbs/wcsmbsload.h (gconv_fcts): Add entries for c16 routines.

	* wcsmbs/wchar.h: Add missing __restrict.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13532]
	* time/Makefile (routines): Add timespec_get.
	* time/Versions: Export timespec_get from libc for GLIBC_2.16.
	* time/time.h: Define TIME_UTC and declare timespec_get.  Define
	timespec for ISO C11.
	* time/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/timespec_get.c: New file.

	[BZ #13531]
	* malloc/malloc.c: Define alias aligned_alloc for public_mEMALIGn.
	* stdlib/stdlib.h: Declare aligned_alloc.
	* Versions.def: Add GLIBC_2.16 for libc.
	* malloc/Versions: Export aligned_alloc from libc for GLIBC_2.16.

	[BZ 13527]
	* stdlib/stdlib.h: Make at_quick_exit and quick_exit available for
	ISO C11.

	* include/features.h: Define __USE_ISOCXX11 when compiling ISO C++11
	code.

	[BZ #13528]
	* libio/stdio.h: Do not declare gets for ISO C11 and _GNU_SOURCE.

	[BZ #13529]
	* assert/assert.h (static_assert): Define.

	* version.h: Update for 2.16 development version.

	[BZ #13526]
	* include/features.h: Handle __STDC_VERSION__ >= 201112 and
	_ISOC11_SOURCE.

	* version.h (RELEASE): Bump for 2.15 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 15.

	* sysdeps/x86_64/dl-machine.h: Fix typos in comments.
	Patch by Marek Polacek <mpolacek@redhat.com>.

	* bits/byteswap.h: Protect long long constants with __extension__.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/ia64/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Fix overrun in
	destination buffer.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: Likewise.

2011-12-23  Marek Polacek  <polacek@redhat.com>

	* elf/dl-addr.c (determine_info): Add inline keyword.
	* elf/tst-auditmod4b.c (check_avx): Likewise.
	* elf/tst-auditmod6b.c (check_avx): Likewise.
	* elf/tst-auditmod6c.c (check_avx): Likewise.
	* elf/tst-auditmod7b.c (check_avx): Likewise.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Also enable for
	!__SSE_MATH__.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-08-06  Bruno Haible  <bruno@clisp.org>

	[BZ #13061]
	* iconvdata/cp1258.c (comp_table_data): Combine U+00A8 U+0301 to
	U+0385, not to U+1FEE.

	[BZ #13062]
	* iconvdata/tcvn5712-1.c (comp_table_data): Remove useless and wrong
	entry for U+00A5 U+0301.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13166]
	* inet/getnameinfo.c (getnameinfo): Return EAI_OVERFLOW if the
	buffer for the output is too small.

	* sysdeps/i386/fpu/bits/fenv.h [__SSE_MATH__]: Add feraiseexcept
	optimization.

	[BZ #13185]
	* sysdeps/i386/fpu/fgetexcptflg.c (__fegetexceptflag): Also return
	SSE flags if possible.

2011-12-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-12-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants)
	(syscall-list-default-options, syscall-list-default-condition)
	(syscall-list-includes): Define.
	($(objpfx)syscall-%.h $(objpfx)syscall-%.d): Support arbitrary
	list of ABIs and options and #if conditions for each ABI.  Do not
	handle common syscalls between ABIs specially.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/s390/Makefile (64bit-predefine): Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/sparc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	* locale/iso-639.def: Add brx entry.

	[BZ #13328]
	* malloc/mtrace.c (tr_freehook): Avoid unnecessary unlock/lock.
	Proposed by Mariusz_Cukr <marcukr@op.pl>.

	* sysdeps/x86_64/fpu/bits/fenv.h: Use __REDIRECT_NTH for
	__feraiseexcept_renamed.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13538]
	* sysdeps/unix/sysv/linux/sys/epoll.h: Initialize EPOLLONESHOT and
	EPOLLET with unsigned values.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.

	* math/s_cacosh.c: Use Kahan's formula if the subtraction could lead
	to large cancellation.
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-11-18  Richard B. Kreckel  <kreckel@ginac.de>

	[BZ #13305]
	[BZ #12786]
	* math/s_cacosh.c: Fix rare miscomputation in cacosh().
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13439]
	* iconv/gconv.h: Define __GCONV_SWAP.
	* iconvdata/unicode.c: The swap bit must be stored in __flags.
	* iconvdata/utf-16.c: Likewise.
	* iconvdata/utf-32.c: Likewise.

2011-12-21  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13524]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Clear lowest limb of
	numerator after shifting it by one limb.

2011-12-19  Rafael vila de Espndola  <rafael.espindola@gmail.com>

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Define it only
	under [__USE_EXTERN_INLINES].

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13446]
	* stdio-common/vfprintf.c (vfprintf): Fix extension of specs array.

2011-11-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile: Added locale-defines.sym generation.
	* sysdeps/powerpc/locale-defines.sym: Locale definitions for strcasecmp
	optimized code.
	* sysdeps/powerpc/powerpc32/power7/Makefile: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp_l.S: New file.
	* sysdeps/powerpc/powerpc64/power7/Makefile: Added unroll-loop option
	for strncasecmp/strncasecmp_l compilation.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp_l.S: New file.

2011-12-08  Marek Polacek  <mpolacek@redhat.com>

	[BZ #13484]
	* math/bits/math-finite.h: Use __REDIRECT_NTH and __NTH instead
	of __asm__.

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13506]
	* time/tzfile.c (__tzfile_read): Check values from file header.

2011-11-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Define SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/a2/memcpy.S: Use SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/dl-start.S: Likewise.
	* powerpc/powerpc32/elf/start.S: Likewise.
	* powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceil.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceilf.S: Likewise.
	* powerpc/powerpc32/fpu/s_floor.S: Likewise.
	* powerpc/powerpc32/fpu/s_floorf.S: Likewise.
	* powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* powerpc/powerpc32/fpu/s_rint.S: Likewise.
	* powerpc/powerpc32/fpu/s_rintf.S: Likewise.
	* powerpc/powerpc32/fpu/s_round.S: Likewise.
	* powerpc/powerpc32/fpu/s_roundf.S: Likewise.
	* powerpc/powerpc32/fpu/s_trunc.S: Likewise.
	* powerpc/powerpc32/fpu/s_truncf.S: Likewise.
	* powerpc/powerpc32/fpu/setjmp-common.S: Likewise.
	* powerpc/powerpc32/memset.S: Likewise.
	* powerpc/powerpc32/power4/fpu/s_llround.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/____longjmp_chk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/brk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2011-11-18  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* math/libm-test.inc: Added more nearbyint tests.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: New file.

2011-11-21  Ross Lagerwall  <rosslagerwall@gmail.com>

	* resolv/res_init.c (__res_vinit): Open /etc/resolv.conf with
	FD_CLOEXEC.

2011-11-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=wcsmbs] (sysdep_routines):
	Add wcscpy-ssse3 wcscpy-c.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wcscpy-c.c: New file.
	* sysdeps/x86_64/multiarch/wcscpy.S: New file.
	* sysdeps/x86_64/wcschr.S: New file.
	* sysdeps/x86_64/wcsrchr.S: New file.
	* string/test-strcmp.c: Remove checking of wcscmp function for
	wrong alignments.
	* sysdeps/i386/i686/multiarch/Makefile [subdir=wcsmbs]
	(sysdep_routines): Add wcscpy-ssse3 wcscpy-c wcschr-sse2 wcschr-c
	wcsrchr-sse2 wcsrchr-c.
	* sysdeps/i386/i686/multiarch/wcschr.S: New file.
	* sysdeps/i386/i686/multiarch/wcschr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcschr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: New file.
	* wcsmbc/wcschr.c (WCSCHR): New macro.

2011-11-17  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcsrchr wcscpy.
	* wcsmbs/test-wcsrchr.c: New file.
	* string/test-strrchr.c: Add wcsrchr support.
	(WIDE): New macro.
	* wcsmbs/test-wcscpy.c: New file.
	* string/test-strcpy.c: Add wcscpy support.
	(WIDE): New macro.

2011-12-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Lift one operation out of
	the inner loop.

2011-12-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13472]
	* sysdeps/powerpc/fpu/e_hypot.c (twoM600): Correct value.

2011-12-04  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Fix attribute.
	Minor optimizations.

	* sunrpc/clnt_unix.c (clntunix_control): Fix aliasing issues.
	* sunrpc/clnt_tcp.c (clnttcp_control): Likewise.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.

2011-12-03  Ulrich Drepper  <drepper@gmail.com>

	* inet/netinet/in.h: Provide versions of IN6_IS_ADDR_UNSPECIFIED,
	IN6_IS_ADDR_LOOPBACK, IN6_IS_ADDR_LINKLOCAL, IN6_IS_ADDR_SITELOCAL,
	IN6_IS_ADDR_V4MAPPED, IN6_IS_ADDR_V4COMPAT, and IN6_ARE_ADDR_EQUAL
	for gcc to avoid warnings.
	* inet/Makefile (tests): Add tst-checks.
	* inet/tst-checks.c: New file.

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Add attribute to avoid
	warning.

	* sysdeps/x86_64/multiarch/wmemcmp-c.c: Provide prototype for
	__wmemcmp_sse2.

	* sysdeps/x86_64/fpu/s_scalbln.c: Removed.
	* sysdeps/x86_64/fpu/s_scalbn.c: Removed.

	* malloc/mcheck.h: Fix use of incorrect encoding in comment.

2011-12-02  Ulrich Drepper  <drepper@gmail.com>

	* nis/nis_findserv.c (__nis_findfastest_with_timeout): Avoid aliasing
	problem.

	* nscd/aicache.c (addhstaiX): Avoid unused variable warning.

2011-11-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h (rNOSP): Define
	conditional on GCC version.
	(__arch_compare_and_exchange_val_8_acq)
	(__arch_compare_and_exchange_val_16_acq)
	(__arch_compare_and_exchange_val_32_acq, atomic_exchange_and_add)
	(atomic_add, atomic_add_negative, atomic_add_zero, atomic_bit_set)
	(atomic_bit_test_set): Use rNOSP instead of "r" constraints.

2011-12-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/backtrace.c: New file.

2011-12-02  Andreas Schwab  <schwab@redhat.com>

	* misc/bits/select2.h (__FD_ELT): Mark as extension.  Add
	parenthesis.

2011-12-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/futimes.c: Truncate time values when
	falling back to utime.

2011-11-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Relax cpow (2 + 3 i, 4 + 0 i)
	expectations for float.

2011-11-29  Andreas Schwab  <schwab@redhat.com>

	* locale/weight.h (findidx): Add parameter len.
	* locale/weightwc.h (findidx): Likewise.
	* posix/fnmatch_loop.c (FCT): Adjust caller.
	* posix/regcomp.c (build_equiv_class): Likewise.
	* posix/regex_internal.h (re_string_elem_size_at): Likewise.
	* posix/regexec.c (check_node_accept_bytes): Likewise.
	* string/strcoll_l.c (STRCOLL): Likewise.
	* string/strxfrm_l.c (STRXFRM): Likewise.

2011-11-17  Ulrich Drepper  <drepper@gmail.com>

	* Makefile.in: Remove CVSOPT handling.
	* configure.in: Remove use of AC_REVISION.
	* iconvdata/Makefile (distribute): No need to filter out CVS.
	* scripts/list-sources.sh: Remove CVS, subversion and monotone
	handling.

2011-11-16  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S
	[USE_AS_STRCASECMP_L]: Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_ssse3, __strncasecmp_ssse3): Handle
	NO_TLS_DIRECT_SEG_REFS.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S [USE_AS_STRCASECMP_L]:
	Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_sse4_2, __strncasecmp_sse4_2): Handle
	NO_TLS_DIRECT_SEG_REFS.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* locale/loadarchive.c (_nl_load_locale_from_archive): Open files with
	O_CLOEXEC.
	* locale/loadlocale.c (_nl_load_locale): Likewise.

2011-11-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU)
	[__ASSUME_POSIX_CPU_TIMERS > 0]: Assign to retval and break.
	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c
	(SYSCALL_GETTIME): Set errno on error.

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Properly
	count references to noai6ai_cached.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* time/getdate.c (__getdate_r): Set FD_CLOEXEC for given file.

	* sysdeps/unix/sysv/linux/readonly-area.c (__readonly_area): Set
	FD_CLOEXEC for /proc/self/maps.

	* sysdeps/unix/sysv/linux/getsysstats.c (phys_pages_info): Set
	FD_CLOEXEC for /proc/meminfo.

	* sysdeps/posix/getaddrinfo.c (gaiconf_init): Set FD_CLOEXEC for
	gai.conf.

	* resolv/res_query.c (res_hostalias):  Don't allow cancellation and set
	FD_CLOEXEC for given file.

	* resolv/res_hconf.c (do_init): Set FD_CLOEXEC for host.conf.

	* resolv/gethnamaddr.c (_sethtent): Don't allow cancellation and set
	FD_CLOEXEC for /etc/hosts.
	(_gethtent): Likewise.

	* nss/nsswitch.c (nss_parse_file): Set FD_CLOEXEC.

	* nss/nss_files/files-netgrp.c (_nss_files_setnetgrent): Don't allow
	cancellation and set FD_CLOEXEC for /etc/netgroup.

	* nss/nss_files/files-key.c (search): Don't allow cancellation when
	reading /etc/publickey.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Don't
	allow cancellation when reading /etc/group.

	* nss/nss_files/files-alias.c (internal_setent): Don't allow
	cancellation.
	(get_next_alias): Likewise for included file.  Also set FD_CLOEXEC.

	* nss/nss_files/files-XXX.c (internal_setent): Don't allow cancellation
	when using data file.

	* nis/nss-default.c (init): Set FD_CLOEXEC for /etc/default/nss.

	* nis/nis_file.c (read_nis_obj): Set FD_CLOEXEC.
	(write_nis_obj): Use "c" and "e" in fopen.

	* misc/mntent_r.c (__setmntent): Also append e to fopen format.

	* misc/getusershell.c (initshells): Set FD_CLOEXEC for /etc/shells.

	* misc/getttyent.c (setttyent): Set FD_CLOEXEC.

	* misc/getpass.c (getpass): Set FD_CLOEXEC for /dev/tty.

	* intl/localealias.c (read_alias_file): Set FD_CLOEXEC for
	locale.alias.

	* inet/ruserpass.c (ruserpass): Set FD_CLOEXEC for .netrc.

	* inet/rcmd.c (iruserfopen): Set FD_CLOEXEC for hosts.equiv.

	* iconv/gconv_conf.c (read_conf_file): Set FD_CLOEXEC for config file.

	* hesiod/hesiod.c (parse_config_file): Prevent cancellation in config
	file parsing and set FD_CLOEXEC.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* time/tzfile.c (__tzfile_read): Use "e" in fopen call.

2011-11-14  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (arena_get2): Don't call reused_arena when
	_int_new_arena failed.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]
	(sysdep_routines): Add strcasecmp_l-sse4 and strncase_l-sse4.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Re-enable SSE4.2 code.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-sse4.S: New file.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Use L macro consistently.

2011-11-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]: Add
	locale-defines.sym to gen-as-const-headers.
	(sysdep_routines): Add strcasecmp_l-c, strcasecmp-c,
	strcasecmp_l-ssse3, strncase_l-c, strncase-c, and strncase_l-ssse3.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcmp.S: Allow to use for
	strcasecmp_l and strncasecmp_l.
	* sysdeps/i386/i686/multiarch/locale-defines.sym: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: New file.
	* sysdeps/i386/i686/multiarch/strncase-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l.S: New file.

2011-11-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/clock_gettime.c (clock_gettime): No need to assign
	result of SYSDEP_GETTIME_CPU to retval.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU): Add
	parameter list to macro.  Remove trailing semicolon.  Adjust users.

	* resolv/getaddrinfo_a.c (getaddrinfo_a): Avoid warning about unused
	variable.

	* sysdeps/ieee754/ldbl-96/e_j0l.c (__ieee754_j0l): Avoid storing
	mantissa words.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l): Likewise.

	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Avoid warning
	from unused variable.

	* sysdeps/generic/sysdep.h: Clean up, pretty print, use dwarf2.h for
	DWARF definitions.
	* sysdeps/generic/dwarf2.h: Don't define enums when using the file
	for assembling.

	* elf/dl-iteratephdr.c [!SHARED] (__dl_iterate_phdr): Don't iterate
	over namespaces.

	* sunrpc/rpc_prot.c (rejected): Fix case value.

	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS): Use
	unsigned long long int to avoid warnings in shift.

	* posix/regex_internal.c (re_string_reconstruct): Actually use result
	of use of trans.
	* posix/regex_internal.h (re_string_wchar_at): Remove temporary
	variable tmp.

	* sysdeps/i386/i686/multiarch/wcscmp-c.c: Avoid warning.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: Likewise.

	* nis/nis_table.c (nis_list): Use variable of correct type for
	result of __follow_path call.

2011-11-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h: Using inline assembly version
	of math functions ceil, trunc, floor, round, and sqrt, when
	avaliable on the platform.
	* sysdeps/powerpc/fpu/e_sqrt.c: Undefine __ieee754_sqrt to avoid
	name clash.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.

2011-10-30  Marek Polacek  <mpolacek@redhat.com>

	* libio/wfileops.c (_IO_wfile_underflow_mmap): Remove unused variable.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Likewise.

2011-11-11  Roland McGrath  <roland@hack.frob.com>

	* include/unistd.h: Fix __readlink return type.
	Reported by Chris Metcalf <cmetcalf@tilera.com>.

2011-11-11  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/ucontext.h: Undo last change for makecontext.

2011-11-11  Andreas Schwab  <schwab@redhat.com>

	* nss/db-Makefile ($(VAR_DB)/group.db): Fix typo in awk script.

	* misc/sys/cdefs.h (__REDIRECT_NTHNL): Define.
	* setjmp/setjmp.h: Mark functions as non-leaf.
	* setjmp/bits/setjmp2.h: Likewise.
	* stdlib/ucontext.h: Likewise.

2011-11-10  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (_int_new_arena): Don't increment narenas.
	(reused_arena): Don't check arena limit.
	(arena_get2): Atomically check arena limit.

2011-11-08  Ulrich Drepper  <drepper@gmail.com>

	* locale/findlocale.c (_nl_find_locale): Use __strcasecmp_l.
	* intl/localealias.c (strcasecmp): Define using __strcasecmp_l.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Remove unnecessary
	instructions.

2011-11-07  Andreas Schwab  <schwab@redhat.com>

	* libio/genops.c (_IO_flush_all_lockp): Only register cleanup
	handler when locking.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Fix size of allocated buffer.

2011-11-04  Andreas Schwab  <schwab@redhat.com>

	[BZ #10103]
	* math/math.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Provide
	declarations for long double functions.
	* math/complex.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Likewise.

	* elf/sprof.c (load_shobj): Fix off-by-one when reading link name.

2011-11-03  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd.c (main): Don't start AVC thread until credentials are
	installed.

	* nss/makedb.c (set_file_creation_context): Do nothing if SELinux
	is disabled.

2011-11-02  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/ioctl-types.h (_IOT_sgttyb): Set number of chars to 4.

2011-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* include/alloca.h (stackinfo_alloca_round): Define.
	(extend_alloca): Use it.
	[_STACK_GROWS_UP]: Correct check for adjacent allocation.
	* elf/dl-deps.c (_dl_map_object_deps): Don't round alloca size
	here.

	* scripts/check-local-headers.sh: Ignore libaudit.h.

	* nscd/Makefile (extra-objs): Make recursively expanded.

2011-11-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/strcmp.S: Fix test for non-ASCII locales.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Likewise.

	* posix/tst-rfc3484.c: Add missing __free_in6ai dummy function.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/syscalls.list: Add process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/Versions: Export process_vm_readv and
	process_vm_writev from libc using GLIBC_2.15 version.

	* nscd/connections.c: Use kernel headers instead of <netlink/netlink.h>.

2011-10-31  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-deps.c (_dl_map_object_deps): Reuse alloca space to reduce
	stack usage.

2011-10-31  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13367]
	* nss/getent.c (initgroups_keys): Show error message in case no group
	names are given.

	* include/ifaddrs.h: Declare __free_in6ai and __bump_nl_timestamp.
	* inet/check_pf.c: Provide dummy versions of __free_in6ai and
	__bump_nl_timestamp.
	* nscd/connections (nscd_init): When host database is served open
	netlink socket and request notification about configuration changes.
	(main_loop_poll): Track netlink file descriptor and bump timestamp
	in case data becomes available.
	(main_loop_epoll): Likewise.
	* nscd/nscd-client.h (DB_VERSION): Bump to 2.
	(database_pers_head): Add extra_data fileds.
	Declare __nscd_get_mapping and __nscd_get_nl_timestamp.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): New function.
	* nscd/nscd_helper.c (__nscd_get_mapping): Renamed from get_mapping.
	Adjust caller.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Don't call free on
	in6ai data, call __free_in6ai.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd] (sysdep-CFLAGS):
	Add -DHAVE_NETLINK.
	* sysdeps/unix/sysv/linux/check_pf.c: Major rewrite.  Cache the
	interface information.  Reuse previous data if netlink timestamp
	is not changed.
	(__bump_nl_timestamp): New function.
	(__free_in6ai): New function.

2011-10-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Don't call
	close_not_cancel_no_status here.
	(__check_pf): Reorganize code a bit to not call close twice if OOM.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13276]
	* malloc/malloc.c (munmap_chunk): Don't use assertion to check munmap
	return value.

	* posix/sys/wait.h: Mark wait3 and wait4 with __THROWNL.
	* libio/stdio.h: Mark sprintf, vsprintf snprintf, vsnprintf, vasprintf,
	asprintf, __asprintf, obstack_printf, obstack_vprintf with __THROWNL.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	[BZ #10709]
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Fix incorrect rounding
	of sin. Patch suggested by Paul Zimmermann <zimmerma+gcc@loria.fr>.
	* math/libm-test.inc (sin_test): Add test case.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13337]
	* elf/sprof.c (load_shobj): Correctly NUL-terminate link name.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* elf/chroot_canon.c (chroot_canon): Cleanups.

	* elf/dl-lookup.c (_dl_setup_hash): Avoid warning.

	[BZ #13335]
	* elf/chroot_canon.c (chroot_canon): Fix readlink call.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* string/test-strchr.c: Make usable for strchrnul testing.
	* string/test-strchrnul.c: New file.
	* string/Makefile (strop-tests): Add strchrnul.

	* po/it.po: Update from translation team.
	* po/es.po: Likewise.

2011-10-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Take
	the three constants needed as parameters.  Drop the others.
	(strcasestr_sse42): Load uclow, uchigh, and lcqword and pass to
	__m128i_strloadu_tolower.
	Create and initialize variable zero and use it in all the places
	where _mm_setzero_si128 was used.

	* sysdeps/x86_64/fpu/multiarch/Makefile: Don't build brandred-avx.c,
	doasin-avx.c, dosincos-avx.c, e_asin-avx.c, mpatan-avx.c,
	mpatan2-avx.c, mpsqrt-avx.c, mptan-avx.c, sincos32-avx.c.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: There are no _avx variants
	anymore.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: Don't redirect __mpatan2.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: Don't redirect __mpatan.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: Don't redirect __branred,
	__docos, __dubsin, __mpcos, __mpcos1, __mpsin, __mpsin1.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: Don't redirect __branred,
	__mpranred, __mptan.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: Removed.

2011-10-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strnlen-c.c (libc_hidden_def): Only
	redefine if SHARED.
	* sysdeps/i386/i686/multiarch/wcscmp-c.c (libc_hidden_def): Likewise.

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Move
	wide char related routines to wcsmbs subdir.

2011-10-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #13344]
	* misc/sys/cdefs.h (__THROWNL): Define.
	* posix/unistd.h: Use __THREADNL instead of __THREAD
	for memory synchronization functions.

2011-10-26  Roland McGrath  <roland@hack.frob.com>

	[BZ #13349]
	* libio/Versions (GLIBC_2.0): Remove open_obstack_stream, which
	doesn't exist.
	* manual/stdio.texi (Obstack Streams): Node removed.

2011-10-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/ieee754/flt-32/e_j0f.c: Fix use of math_force_eval.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.

	* math/math_private.h (math_force_eval): Allow non-addressable
	arguments.
	* sysdeps/i386/fpu/math_private.h (math_force_eval): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Comment everything out, the
	file is not needed.

	* sysdeps/x86_64/fpu/multiarch/e_asin.c: Support AVX variants.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Fix some CFLAGS-* variables.
	Add AVX variants.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-avx.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Make bit_* macros available
	all the time.  Define bit_AVX.  Define HAS_* macros using bit_* macros.

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Move common code to earlier
	place.  Use VEX encoding when compiling for AVX.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcscmp.c (WCSCMP): Compare as wchar_t, not wint_t.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.

	* string/test-strchr.c (do_test): Don't generate NUL bytes.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_atanh.c: Use math_force_eval instead of a
	useless if() expression.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Use VEX encoding when possible.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-deps.c (_dl_map_object_deps): Remove always true
	condition.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/branred.c: Move FMA4 code into separate
	.text section.  Avoid duplicate constants.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: Likewise.

2011-10-24  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dla.h: Move to ...
	* sysdeps/x86_64/fpu/dla.h: ...here.
	(DLA_FMS): Some compilers fail to inline __builtin_fma in some
	situations.  Use __builtin_fma only for gcc 4.6 and up.

	* config.make.in: Add have-mfma4 entry.
	* configure.in: Substitute libc_cv_cc_fma4.
	* math/Makefile (dbl-only-routines): Add sincostab.
	* sysdeps/ieee754/dbl-64/dosincos.c: Don't include sincos.tbl.
	Use __sincostab not sincos.
	* sysdeps/ieee754/dbl-64/e_asin.c: Don't define aliases when function
	name is a macro.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.  Define singArctan2
	using __copysign.
	* sysdeps/ieee754/dbl-64/mpa.c: Don't export __acr.  Don't define
	__cr and __cpymn.  Define __cpy unless NO___CPY is defined.  Define
	norm, denorm, and __mp_dbl unless NO___MP_DBL is defined.
	* sysdeps/ieee754/dbl-64/mpa.h: Don't declare __acr, __cr, __cpymn,
	and __inv.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Make fastiroot static.
	* sysdeps/ieee754/dbl-64/s_atan.c: Define __signArctan using
	__copysign.
	* sysdeps/ieee754/dbl-64/s_sin.c: Use __sincostab not sincos.  Don't
	define aliases when function name is a macro.
	* sysdeps/ieee754/dbl-64/sincostab.c: Renamed from
	sysdeps/ieee754/dbl-64/sincos.tbl.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Add entries to build
	fma4-enabled routines.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c: New file.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: New file.

	* sysdeps/ieee754/dbl-64/doasin.c: Adjust for DLA_FMA -> DLA_FMS
	rename.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-24  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcslen.c: Don't define WCSLEN, reverse logic.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: New file.

	* sysdeps/ieee754/dbl-64/e_fmod.c (__ieee754_fmod): Add some branch
	prediction.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: New file.

	* string/strnlen.c: Don't define STRNLEN, reverse logic.
	Remove unused variable magic_bits.
	* sysdeps/i386/i686/multiarch/rtld-strnlen.c: New file.

	* string/strnlen.c: Define and use STRNLEN macro.
	* sysdeps/i386/i686/multiarch/Makefile [string] (sysdep_routines):
	Add strnlen-sse2, strnlen-c, wcslen-sse2, and wcslen-c.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Add support for strnlen.
	* wcsmbs/wcslen.c: Define and use WCSLEN.
	* sysdeps/i386/i686/multiarch/strnlen-c.c: New file.
	* sysdeps/i386/i686/multiarch/strnlen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strnlen.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcslen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen.S: New file.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-10-20  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strnlen-sse2-no-bsf.
	Rename strlen-no-bsf to strlen-sse2-no-bsf.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Rename to
	* sysdeps/x86_64/multiarch/strlen-sse2-no-bsf.S:
	Add strnlen support.
	(USE_AS_STRNLEN): New macro.
	* sysdeps/x86_64/multiarch/strnlen-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Update.
	Rename strlen-no-bsf.S to strlen-sse2-no-bsf.S
	* sysdeps/x86_64/wcslen.S: New file.

2011-10-20  Michael Zolotukhin  <michael.v.zolotukhin@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	XMM-moves are used for copying on small sizes.

2011-10-19  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcschr.
	* wcsmbs/test-wcschr.c: New file.
	* string/test-strchr.c: Update.
	Add wcschr support.
	(WIDE): New macro.

2011-10-18  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcslen.
	* wcsmbs/test-wcslen.c: New file.
	* string/test-strlen.c: Update.
	Add wcslen support.
	(WIDE): New macro.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2011-09-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: Update.
	Fix wrong comparison semantics.
	wcscmp shall use signed comparison not unsigned.
	Don't use substraction to avoid overflow bug.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: Likewise.
	* wcsmbc/wcscmp.c: Likewise.
	* string/test-strcmp.c: Likewise.
	Add new tests to check cases with negative values.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/dla.h: Move DLA_FMA definition to...
	* sysdeps/x86_64/dla.h: ...here.  New file.
	* sysdeps/ieee754/dbl-64/doasin.c: Use <dla.h> not "dla.h".
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Add __jnl_finite and
	__ynl_finite aliases.

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/dbl-64/dla.h: When compiling with FMA4 support
	define DLA_FMA.
	[DLA_FMA] (EMULV): Use DLA_FMA.
	[DLA_FMA] (MUL12): Use EMULV.
	* sysdeps/ieee754/dbl-64/doasin.c [DLA_FMA]: Don't define variables
	that are not needed.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-22  Andreas Schwab  <schwab@linux-m68k.org>

	* math/s_nan.c: Undef __nan.
	* math/s_nanf.c: Undef __nanf.
	* math/s_nanl.c: Undef __nanl.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Include <math.h> before
	"math_private.h".

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* math/s_catan.c: Add branch predictions.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.

	* math/math_private.h: Define __nan, __nanf, __nanl.
	* math/s_cacosh.c: Include <math_private.h>.
	* math/s_cacoshl.c: Likewise.
	* math/s_casinh.c: Likewise.
	* math/s_casinhf.c: Likewise.
	* math/s_casinhl.c: Likewise.
	* math/s_ccos.c: Rely entire on ccosh.
	* math/s_ccosf.c: Rely entire on ccoshf.
	* math/s_ccosl.c: Rely entirely on ccoshl.
	* math/s_ccosh.c: Add branch predicion helpers.  Add branch prediction.
	Remove tests for FE_INVALID.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Use __ieee754_sqrt.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Use __ieee754_sqrtf.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Use __ieee754_sqrtl.

2011-10-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Fix
	compilation problems.

	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Add a few more
	__builtin_expect.

2011-10-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/configure.in: Test for -mfma4 option.
	* config.h.in: Add HAVE_FMA4_SUPPORT entry.
	* sysdeps/x86_64/multiarch/init-arch.h: Define HAS_FMA4 and
	COMMON_CPUID_INDEX_80000001.
	* sysdeps/x86_64/multiarch/init-arch.c: Read 80000001 leaf for AMD.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c: Test for FMA4 support and
	use it if FMA3 is not supported.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c: Likewise.

	* sysdeps/x86_64/multiarch/s_fma.c: Moved to ../fpu/multiarch.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.

2011-10-20  Andreas Schwab  <schwab@redhat.com>

	[BZ #12892]
	* elf/dl-fini.c (_dl_sort_fini): Ignore relocation dependency if
	it would create a cycle with a link time dependency.

2011-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Small optimization to safe an
	instruction.
	* string/Makefile (strop-tests): Add rawmemchr.
	* string/test-rawmemchr.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_AVX and index_AVX.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: New file.  Split out from...
	* sysdeps/x86_64/multiarch/strcmp.S: ...here.  Include strcmp-sse42.S
	when compiling str{,n}casecmp and when AVX is available.  Hook up
	new optimized code in initializers.

2011-10-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv): Use
	__feraiseexcept instead of feraiseexcept.

2011-10-18  Ulrich Drepper  <drepper@gmail.com>

	* math/math_private.h: Define defaults for libc_fetestexcept and
	libc_feupdateenv.
	* sysdeps/ieee754/dbl-64/s_fma.c: Use libc_fe* interfaces.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fetestexcept and libc_feupdateenv.

	* math/math_private.h: Define defaults for libc_feholdexcept_setround,
	libc_feholdexcept_setroundf, libc_feholdexcept_setroundl.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Use libc_feholdexcept_setround.
	* sysdeps/x86_64/fpu/math_private.h: Define special version of
	libc_feholdexcept_setround.

	* sysdeps/x86_64/fpu/multiarch/Makefile [math] (libm-sysdep-routines):
	Add s_nearbyint-c and s_nearbyintf-c.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Define nearbyint and
	nearbyintf inlines.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf.S: New file.

	* math/math_private.h: Define defaults for libc_fegetround,
	libc_fegetroundf, libc_fegetroundl, libc_fesetround, libc_fesetroundf,
	libc_fesetroundl, libc_feholdexcept, libc_feholdexceptf,
	libc_feholdexceptl, libc_fesetenv, libc_fesetenvf, libc_fesetenvl.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Use
	libc_feholdexcept, libc_fesetround, libc_fesetenv instead of the
	standard functions.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	Remove comments and hacks for old compiler versions.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fegetround, libc_fesetround, libc_feholdexcept, and
	libc_feholdexceptl.

2011-10-18  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Add C linkage markers.
	(__feraiseexcept_renamed): Add __NTH.
	(feraiseexcept): Add __NTH.  Rename local variables to fix
	namespace violations.

2011-10-17  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Small optimization.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: New file.

	* sysdeps/x86_64/fpu/math_private.h: Relax asm requirements for
	recently added interfaces.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Add some parenthesis to be safe
	about macro parameter expansion.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't define inlines if
	__NO_MATH_INLINES is defined.  Cleanups.

	* sysdeps/x86_64/fpu/math_private.h: Define __rint, __rintf, __floor,
	and __floorf is target has SSE4.1.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: Undef first.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: Likewise.

	* sysdeps/x86_64/fpu/bits/mathinline.h (floor): Use correct function
	name.
	(floorf): Likewise.

	* nscd/netgroupcache.c (addgetnetgrentX): Fix #ifdef nesting.

2011-10-17  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/cdefs.h: Fix last change.

	* grp/initgroups.c (internal_getgrouplist): Fix initgroups
	database lookup.

2011-10-16  Ulrich Drepper  <drepper@gmail.com>

	* misc/sys/cdefs.h: Use leaf function attribute in __THROW.

	* sysdeps/ieee754/dbl-64/s_ceil.c: Avoid alias renamed.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf.S: New file.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add inlines for rint, rintf,
	ceil, ceilf, floor, floorf.

	* elf/do-rel.h (elf_dynamic_do_Rel): Work around linker problem.
	Perform IRELATIVE relocations last.

	* elf/do-rel.h: Add another parameter nrelative, replacing the
	local variable with the same name.  Change name of the function
	to end in Rel or Rela (uppercase).
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Add new element
	nrelative to ranges.  Only nonzero for DT_REL/DT_RELA.  Pass to the
	elf_dynamic_do_##reloc function.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/fpu/e_log.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: New file.

	* sysdeps/ieee754/dbl-64/e_cosh.c: Cleanup.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: New file.

	* math/Versions [libm] (GLIBC_2.15): Add __exp_finite, __expf_finite,
	__expl_finite.
	* math/bits/math-finite.h: Add entries for exp.
	* math/e_expl.c: Add __*_finite alias.
	* sysdeps/i386/fpu/e_exp.S: Likewise.
	* sysdeps/i386/fpu/e_expf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Complete rewrite.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

	* sysdeps/i386/i686/fpu/e_logf.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* ctype/ctype-info.c (__ctype_init): Define.
	* include/ctype.h (__ctype_init): Declare.
	(__ctype_b_loc): The variable is always initialized.
	(__ctype_toupper_loc): Likewise.
	(__ctype_tolower_loc): Likewise.
	* ctype/Versions: Export __ctype_init for GLIBC_PRIVATE.
	* sysdeps/unix/sysv/linux/init-first.c (_init): Call __ctype_init.

2011-10-15  Andreas Schwab  <schwab@linux-m68k.org>

	* wcsmbs/wmemcmp.c (WMEMCMP): Define.

	* configure.in: Also look in $cxxmachine/include for C++ system
	headers.

2011-09-27  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile: (sysdep_routines): Add
	memcmp-ssse3 wmemcmp-sse4 wmemcmp-ssse3 wmemcmp-c
	* sysdeps/x86_64/multiarch/memcmp-ssse3: New file.
	* sysdeps/x86_64/multiarch/memcmp.S: Update.  Add __memcmp_ssse3.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	Fixing indents.
	* sysdeps/x86_64/multiarch/wmemcmp.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-c.S: New file.
	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	wmemcmp-ssse3 wmemcmp-sse4 wmemcmp-c
	* sysdeps/i386/i686/multiarch/wmemcmp.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	* sysdeps/i386/i686/multiarch/memcmp-ssse3: Likewise.
	* sysdeps/string/test-memcmp.c: Update.
	Fix simple_wmemcmp.
	Add new tests.
	* wcsmbs/wmemcmp.c: Update.
	(WMEMCMP): New macro.
	Fix overflow bug.

2011-10-12  Andreas Jaeger  <aj@suse.de>

	[BZ #13268]
	* math/bits/mathcalls.h: Mark argument 2 of modf as non-null.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/iofwide.c (do_length): Avoid warning.

	* ctype/ctype.h (__isctype_f): Add missing __THROW.

2011-10-14  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (find_maps): Remove leftover debug message.

	* sysdeps/i386/fpu/e_log.S: Add real definition of __log_finite.
	* sysdeps/i386/fpu/e_logf.S: Add real definition of __logf_finite.
	* sysdeps/i386/fpu/e_logl.S: Add real definition of __logl_finite.
	* sysdeps/i386/i686/fpu/e_log.S: New file.
	* sysdeps/i386/i686/fpu/e_logf.S: New file.
	* sysdeps/i386/i686/fpu/e_logl.S: New file.

	* ctype/ctype.h: Add support for inlined isXXX functions when
	compiling C++ code.

2011-10-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Fix last change.

2011-10-13  Roland McGrath  <roland@hack.frob.com>

	[BZ #13291]
	* manual/string.texi (String/Array Comparison): Typo fix in strverscmp.

2011-10-13  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Add __feraiseexcept alias.
	* sysdeps/x86_64/fpu/feupdateenv.c: Use __feraiseexcept instead of
	feraiseexcept.

	* sysdeps/x86_64/memrchr.S: Check for zero size.

	* string/stratcliff.c: Add memrchr tests.

2011-10-12  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	memchr-sse2 memchr-sse2-bsf memrchr-sse2 memrchr-sse2-bsf memrchr-c
	rawmemchr-sse2 rawmemchr-sse2-bsf.
	* sysdeps/i386/i686/multiarch/memchr.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2-bsf.S: New file.
	* string/memrchr.c (MEMRCHR): New macro.

2011-10-12  Ulrich Drepper  <drepper@gmail.com>

	Add integration with gcc's -ffinite-math-only and optimize wrapper
	functions in libm.
	* Versions.def: Define GLIBC_2.15 version for libm.
	* math/Makefile (headers): Add bits/math-finite.h.
	* math/bits/math-finite.h: New file.
	* sysdeps/ia64/fpu/bits/math-finite.h: New file.
	* math/Versions [libm] (GLIBC_2.15): Export __*_finite symbols.
	* math/e_acoshl.c: Add __*_finite alias.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_exp10.c: Likewise.
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/e_scalb.c: Completely rewritten and optimized.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/math.h: Define __MATH_DECLARE_LDOUBLE if long double functions
	are declared.  Include <bits/math-finite.h> if -ffinite-math-only is
	used.
	* math/math_private.h: Declare __kernel_standard_f.
	* math/w_cosh.c: Remove cruft and optimize a bit.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/i386/fpu/e_acos.S: Add __*_finite alias.
	Minor optimizations.  Pretty printing.  Remove cruft.
	* sysdeps/i386/fpu/e_acosf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/e_acosl.c: Likewise.
	* sysdeps/i386/fpu/e_asin.S: Likewise.
	* sysdeps/i386/fpu/e_asinf.S: Likewise.
	* sysdeps/i386/fpu/e_atan2.S: Likewise.
	* sysdeps/i386/fpu/e_atan2f.S: Likewise.
	* sysdeps/i386/fpu/e_atan2l.c: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/e_exp10.S: Likewise.
	* sysdeps/i386/fpu/e_exp10f.S: Likewise.
	* sysdeps/i386/fpu/e_exp10l.S: Likewise.
	* sysdeps/i386/fpu/e_exp2.S: Likewise.
	* sysdeps/i386/fpu/e_exp2f.S: Likewise.
	* sysdeps/i386/fpu/e_exp2l.S: Likewise.
	* sysdeps/i386/fpu/e_fmod.S: Likewise.
	* sysdeps/i386/fpu/e_fmodf.S: Likewise.
	* sysdeps/i386/fpu/e_fmodl.c: Likewise.
	* sysdeps/i386/fpu/e_hypot.S: Likewise.
	* sysdeps/i386/fpu/e_hypotf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_remainder.S: Likewise.
	* sysdeps/i386/fpu/e_remainderf.S: Likewise.
	* sysdeps/i386/fpu/e_remainderl.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/fpu/e_sqrt.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtf.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrt.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtl.c: Likewise.
	* sysdeps/sparc/sparc32/e_sqrt.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/e_sqrtl.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_fmodl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_remainderl.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_sqrt.c: Likewise.  Fix parameter order
	* sysdeps/x86_64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h (__isnan): Cast d parameter.
	(__isnanf): Likewise.
	(__isinf_ns): Likewise.
	(__isinf_nsf): Likewise.
	(__finite): Likewise.
	(__finitef): Likewise.
	(__ieee754_sqrt): Define as macro.
	(__ieee754_sqrtf): Define as macro.
	(__ieee754_sqrtl): Define as macro.
	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Add partially
	inlined copy.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Make use of
	__FINITE_MATH_ONLY__ consistent.
	* sysdeps/ieee754/k_standard.c (__kernel_standard_f): New function.

2011-10-10  Andreas Schwab  <schwab@linux-m68k.org>

	* inet/getnetgrent_r.c (nscd_getnetgrent): Use __rawmemchr instead
	of rawmemchr.

	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: New file.

2011-10-09  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-10-08  Roland McGrath  <roland@hack.frob.com>

	* locale/programs/locarchive.c (prepare_address_space): New function.
	(create_archive, enlarge_archive, open_archive): Use it.

	* sysdeps/unix/sysv/linux/x86_64/time.c: Move #include <dl-vdso.h>
	inside [SHARED], where it is used.

	* nscd/nscd_proto.h: Declare __nscd_setnetgrent.

	* nss/getent.c (netgroup_keys): Remove unused variable.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.

2011-10-08  Ulrich Drepper  <drepper@gmail.com>

	* include/math.h: Declare __isinf_ns, __isinf_nsf, __isinf_nsl.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: New file.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: New file.
	* math/Makefile (libm-calls): Add s_isinf_ns.
	* math/divtc3.c: Use __isinf_nsl instead of isinf.
	* math/multc3.c: Likewise.
	* math/s_casin.c: Likewise.
	* math/s_casinf.c: Likewise.
	* math/s_casinl.c: Likewise.
	* math/s_ccos.c: Likewise.
	* math/s_ccosf.c: Likewise.
	* math/s_ccosl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Undefine __isnan.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Undefine __nan.
	* sysdeps/ieee754/flt-32/s_finitef.c: Undefine __finitef.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Undefine __nan.
	* sysdeps/x86_64/fpu/math_private.h: Add optimized versions of __isnsn,
	__isnanf, __isinf_ns, __isinf_nsf, __finite, and __finitef.

	* stdio-common/printf_fp.c: Use the fact that isinf returns the sign
	of the number.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.

	* math/e_exp10.c: Include math_private.h using <...> not "...".
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_scalb.c: Likewise.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_cacoshf.c: Likewise.
	* math/s_catan.c: Likewise.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_ccosh.c: Likewise.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ldexp.c: Likewise.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_cosh.c: Likewise.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_dremf.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_jnl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.

	* po/ja.po: Update from translation team.

2011-09-29  Andreas Jaeger  <aj@suse.de>

	[BZ #13179]
	* sunrpc/netname.c (netname2host): Fix logic.

	[BZ #6779]
	[BZ #6783]
	* math/w_remainderl.c (__remainderl): Handle (NaN, 0) and (Inf,y)
	correctly.
	* math/w_remainder.c (__remainder): Likewise.
	* math/w_remainderf.c (__remainderf): Likewise.
	* math/libm-test.inc (remainder_test): Add test cases.

2011-10-04  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix zarch smul_ppmm and
	sdiv_qrnnd.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* string/test-memcmp.c: Avoid unncessary #defines.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-08-31  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Update.
	Use new sse2 version for core i3 - i7 as it's faster
	than sse42 version.
	(bit_Prefer_PMINUB_for_stringop): New.
	* sysdeps/x86_64/rawmemchr.S: Update.
	Replace with faster SSE2 version.
	* sysdeps/x86_64/memrchr.S: New file.
	* sysdeps/x86_64/memchr.S: Update.
	Replace with faster SSE2 version.

2011-09-12  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-load.c (lose): Add cast to avoid warning.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* po/ca.po: Update from translation team.

	* inet/getnetgrent_r.c: Hook up nscd.
	* nscd/Makefile (routines): Add nscd_netgroup.
	(nscd-modules): Add netgroupcache.
	(CFLAGS-netgroupcache.c): Define.
	* nscd/cache.c (readdfcts): Add entries for GETNETGRENT and INNETGR.
	(cache_search): Add const to second parameter.
	* nscd/connections.c (serv2str): Add entries for GETNETGRENT and
	INNETGR.
	(dbs): Add netgrdb entry.
	(reqinfo): Add entries for GETNETGRENT, INNETGR, and GETFDNETGR.
	(verify_persistent_db): Handle netgrdb.
	(handle_request): Handle GETNETGRENT, INNETGR, and GETFDNETGR.
	* nscd/nscd-client.h (request_type): Add GETNETGRENT, INNETGR, and
	GETFDNETGR.
	(netgroup_response_header): Define.
	(innetgroup_response_header): Define.
	(datahead): Add netgroup_response_header and innetgroup_response_header
	elements.
	* nscd/nscd.conf: Add entries for netgroup cache.
	* nscd/nscd.h (dbtype): Add netgrdb.
	(_PATH_NSCD_NETGROUP_DB): Define.
	(netgroup_iov_disabled): Declare.
	(xmalloc, xcalloc, xrealloc): Move declarations here.
	(cache_search): Adjust prototype.
	Add netgroup-related prototypes.
	* nscd/nscd_conf.c (dbnames): Add netgrdb entry.
	* nscd/nscd_proto.h (__nss_not_use_nscd_netgroup): Declare.
	(__nscd_innetgr): Declare.
	* nscd/selinux.c (perms): Use access_vector_t as element type and
	add netgroup-related initializers.
	* nscd/netgroupcache.c: New file.
	* nscd/nscd_netgroup.c: New file.
	* nss/Versions [libc] (GLIBC_PRIVATE): Export __nss_lookup.
	* nss/getent.c (netgroup_keys): Use setnetgrent only for one parameter.
	For four parameters use innetgr.
	* nss/nss_files/files-init.c: Add definition and callback for netgr.
	* nss/nsswitch.c (__nss_lookup): Add libc_hidden_def.
	(__nss_disable_nscd): Set __nss_not_use_nscd_netgroup.
	* nss/nsswitch.h (__nss_lookup): Add libc_hidden_proto.

	* nscd/connections.c (register_traced_file): Don't register file
	for disabled databases.

2011-10-06  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Initialize written in all cases.

	* nss/nsswitch.c (__nss_lookup_function): Fix order of deleting
	from tree and freeing node.

2011-09-25  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_database_lookup): Handle
	nss_parse_service_list out of memory case.

2011-09-15  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_lookup_function): Handle __tsearch
	out of memory case.

2011-10-04  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_NOIFUNC): Define.
	* elf/do-rel.h (elf_dynamic_do_rel): Add parameter skip_ifunc and
	pass it down.
	* elf/dynamic-link.h: Adjust prototypes of elf_machine_rel,
	elf_machine_rela, elf_machine_lazy_rel.
	(_ELF_DYNAMIC_DO_RELOC): Add parameter skip_ifunc and pass it down.
	(ELF_DYNAMIC_DO_REL): Likewise.
	(ELF_DYNAMIC_DO_RELA): Likewise.
	(ELF_DYNAMIC_RELOCATE): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Pass __RTLD_NOIFUNC down
	to ELF_DYNAMIC_DO_REL.
	* elf/rtld.c (_dl_start): Adjust use of ELF_DYNAMIC_RELOCATE.
	(dl_main): In trace mode always set __RTLD_NOIFUNC.
	* elf/dl-conflict.c (_dl_resolve_conflicts): Adjust call to
	elf_machine_rela.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Add parameter
	skip_ifunc, don't call ifunc function if non-zero.
	(elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	(elf_machine_lazy_rela): Likewise.
	* sysdeps/ia64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.

2011-09-28  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-init.c (_nss_files_init): Use static
	initialization for all the *_traced_file variables.

2011-09-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-09-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13226]
	* manual/signal.texi (Longjmp in Handler): Grammar fixes.

2011-09-27  Andreas Schwab  <schwab@redhat.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Reread the line before reparsing it.

2011-09-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Use __asm instead of asm.

2011-09-21  Chung-Lin Tang  <cltang@codesourcery.com>
	    Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* resolv/Makefile (LDLIBS-resolv.so): Link in $(elfobjdir)/ld.so
	if needed for __stack_chk_guard.

2011-09-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/spawni.c (script_execute): Always define it.
	It will be optimized away if unused.
	(maybe_script_execute): New function.
	(__spawni): Call it.

	* Makerules: Don't include tls.make.
	(config-tls): Always set to thread.
	* tls.make.c: File removed.

2011-09-19  Mike Frysinger  <vapier@gentoo.org>

	* Makeconfig (CPPFLAGS): Prepend $(CPPFLAGS-config).
	* config.make.in (CPPFLAGS-config): New substituted variable.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: New file.

	[BZ #13192]
	* sysdeps/unix/sysv/linux/bits/in.h (IP_MULTICAST_ALL): Define.
	Patch mostly by Neil Horman <nhorman@tuxdriver.com>.

2011-09-15  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S
	(CALL_FAIL): Use HIDDEN_JUMPTARGET for __fortify_fail.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/____longjmp_chk.S (CHECK_RSP): Likewise.
	(CALL_FAIL): Macro removed.
	Patch mostly by Mike Frysinger <vapier@gentoo.org>.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add fmax and fmin optimizations
	for __FINITE_MATH_ONLY__ == 1.

2011-09-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/e_hypot.c (__ieee754_hypot): Use
	__ieee754_sqrt instead of sqrt.
	* sysdeps/powerpc/fpu/e_hypotf.c (__ieee754_hypotf): Use
	__ieee754_sqrtf instead of sqrtf.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c (__ieee754_rem_pio2f): Use
	__floorf instead of floorf.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Use
	__floorf, __truncf instead of floorf, truncf.

2011-09-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/s_copysign.S [ELF]: Use correct section.

	* sysdeps/x86_64/fpu/bits/mathinline.h (__MATH_INLINE): Use
	__extern_always_inline.
	Define lrint{f,} and llrint{f,} for 64-bit and in some situations for
	32-bit.

2011-09-14  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Also relocate in dependency order when
	doing symbol dependency testing.

2011-09-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Always define `refsym'.

2011-09-13  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/select.h (__FD_MASK): Renamed from __FDMASK.
	(__FD_ELT): Renamed from __FDELT.
	* misc/bits/select2.h (__FD_ELT): Likewise.
	* bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET): Use __FD_ELT,
	__FD_MASK instead of __FDELT, __FDMASK.
	* sysdeps/i386/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.
	* sysdeps/x86_64/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.

	* elf/Makefile (gen-ldd): Fix pattern.

	* elf/rtld.c (dl_main): Only use USE___THREAD when defined.
	(init_tls): Likewise.

2011-09-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: New file.

2011-09-12  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Cast to
	`struct cmsghdr *' instead of `void *'.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (__cmsg_nxthdr):
	Likewise.

2011-09-11  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (gen-ldd): Prepend $(..) to $(ldd-rewrite-script)
	if non-absolute.
	* sysdeps/unix/sysv/linux/configure.in: Remove leading ../ from
	ldd_rewrite_script.

2011-09-11  Ulrich Drepper  <drepper@gmail.com>

	* configure.in: Remove --with-tls option.
	* config.h.in: Remove HAVE_TLS_SUPPORT entry.
	* sysdeps/i386/elf/configure.in: Always test for TLS support and err
	out in case it is missing.
	* sysdeps/ia64/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Likewise.
	* sysdeps/s390/s390-32/elf/configure.in: Likewise.
	* sysdeps/s390/s390-64/elf/configure.in: Likewise.
	* sysdeps/sh/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc32/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/x86_64/elf/configure.in: Likewise.
	* sysdeps/mach/hurd/i386/tls.h: Remove test for HAVE_TLS_SUPPORT.
	* sysdeps/mach/hurd/tls.h: Likewise.

	[BZ #13067]
	* malloc/obstack.h [!GNUC] (obstack_free): Avoid cast to int.

	[BZ #13090]
	* configure.in: Fix use of AC_INIT.

	* elf/dl-support.c (_dl_pagesize): Initialize to EXEC_PAGESIZE.

2011-09-10  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Replace MALLOC_FAILURE_ACTION with use of
	__set_errno.
	* malloc/hooks.c: Likewise.

	[BZ #11929]
	* malloc/arena.c (ptmalloc_init_minimal): Removed.  Initialize all
	variables statically.
	(narenas): Initialize.
	(list_lock): Initialize.
	(ptmalloc_init): Don't call ptmalloc_init_minimal.  Remove
	initializtion of main_arena and list_lock.  Small cleanups.
	Replace all uses of malloc_getpagesize with GLRO(dl_pagesize).
	* malloc/malloc.c: Remove malloc_getpagesize.  Include <ldsodefs.h>.
	Add initializers to main_arena and mp_.
	(malloc_state): Remove pagesize member.  Change all users to use
	GLRO(dl_pagesize).

	* elf/rtld.c (rtld_global_ro): Initialize _dl_pagesize.
	* sysdeps/unix/sysv/linux/getpagesize.c: Simplify.  GLRO(dl_pagesize)
	is always initialized.

	* malloc/malloc.c: Removed unused configurations and dead code.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/Makefile (CPPFLAGS-malloc.c): Don't add -DATOMIC_FASTBINS.

	* include/tls.h: Removed.  USE___THREAD must always be defined.
	* bits/libc-tsd.h: Don't handle !USE___THREAD.
	* elf/dl-libc.c: Likewise.
	* elf/dl-tsd.c: Likewise.
	* include/errno.h: Likewise.
	* include/netdb.h: Likewise.
	* include/resolv.h: Likewise.
	* inet/herrno-loc.c: Likewise.
	* inet/herrno.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/malloc.c: Likewise.
	* resolv/res-state.c: Likewise.
	* resolv/res_libc.c: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* sysdeps/ia64/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/sh/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/dl-machine.h: Likewise.
	* tls.make.c: Likewise.

	* configure.in: Remove --with-__thread option.  Make tests for
	--no-whole-archive, __builtin_expect, symbol redirection, __thread,
	tls_model attribute fail if no support is available.  Remove
	USE_IN_LIBIO.
	* Makeconfig: Adjust for dropped configure option.  All features are
	now mandatory.
	* Makerules: Likewise.
	* Versions.def: Likewise.
	* argp/argp-fmtstream.c: Likewise.
	* argp/argp-fmtstream.h: Likewise.
	* argp/argp-help.c: Likewise.
	* assert/assert.c: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Versions: Likewise.
	* csu/init.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls10.h: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tlsmod11.c: Likewise.
	* elf/tst-tlsmod12.c: Likewise.
	* elf/tst-tlsmod13.c: Likewise.
	* elf/tst-tlsmod13a.c: Likewise.
	* elf/tst-tlsmod14a.c: Likewise.
	* elf/tst-tlsmod15b.c: Likewise.
	* elf/tst-tlsmod16a.c: Likewise.
	* elf/tst-tlsmod16b.c: Likewise.
	* elf/tst-tlsmod7.c: Likewise.
	* elf/tst-tlsmod8.c: Likewise.
	* elf/tst-tlsmod9.c: Likewise.
	* gmon/gmon.c: Likewise.
	* grp/fgetgrent_r.c: Likewise.
	* grp/putgrent.c: Likewise.
	* hurd/fopenport.c: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/tls.h: Likewise.
	* intl/gettextP.h: Likewise.
	* intl/loadinfo.h: Likewise.
	* locale/global-locale.c: Likewise.
	* locale/localeinfo.h: Likewise.
	* mach/devstream.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/set-freeres.c: Likewise.
	* misc/err.c: Likewise.
	* misc/getttyent.c: Likewise.
	* misc/mntent_r.c: Likewise.
	* posix/getopt.c: Likewise.
	* posix/wordexp.c: Likewise.
	* pwd/fgetpwent_r.c: Likewise.
	* resolv/Versions: Likewise.
	* resolv/res_hconf.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* shadow/putspent.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdlib/abort.c: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (jn_test): Add tests for BZ#11589.
	* sysdeps/x86_64/fpu/libm-test-ulps: Add new ULPs for jn_test,
	regenerate with gen-libm-tests.pl.

2010-05-12  Petr Baudis  <pasky@suse.cz>

	[BZ #11589]
	* sysdeps/ieee754/dbl-64/e_jn.c: Compensate major precision loss
	around j0() zero points by switching to j1().
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h (__cmsg_nxthdr): Use NULL
	instead of 0.
	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Use (void*)0
	instead of 0.                              .
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	Patch in part by Pavel Roskin <proski@gnu.org>.

	[BZ #13138]
	* stdio-common/vfscanf.c (ADDW): Allocate large memory block with
	realloc.
	(_IO_vfscanf_internal): Remove reteof.  Use errout after setting done.
	Free memory block if necessary.

	[BZ #12847]
	* libio/genops.c (INTDEF): For string streams the _lock pointer can
	be NULL.  Don't lock in this case.

2011-09-09  Roland McGrath  <roland@hack.frob.com>

	* elf/elf.h (ELFOSABI_GNU): New macro.
	(ELFOSABI_LINUX): Define to that.

2011-07-29  Denis Zaitceff  <zaitceff@gmail.com>

	* string/strncat.c (strncat): Undef the symbol in case it has been
	defined in bits/string.h.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/sotruss.ksh: Clean up, fix, and complete help messages.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Fill in data from the real
	link map.

2011-08-17  Andreas Jaeger  <aj@suse.de>

	* elf/sprof.c (load_shobj): Remove unused variable log_hashfraction.

2011-08-18  Paul Pluzhnikov  <ppluzhnikov@google.com>
	    Ian Lance Taylor  <iant@google.com>

	* math/libm-test.inc (lround_test): New testcase.
	* sysdeps/ieee754/dbl-64/s_lround.c (__lround): Don't lose precision.

2011-09-08  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Remove support for automatic cvs check-ins.
	* Makerules: Likewise.
	* config.make.in: Likewise.
	* configure.in: Likewise.
	* intl/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* po/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/sparc/sparc32/Makefile: Likewise.

	[BZ #13118]
	* posix/Makefile (bug-regex32-ENV): Define.
	Patch by John Stanley <jpsinthemix@verizon.net>.

	* misc/Makefile (headers): Add bits/select2.h.
	* misc/sys/select.h: Include bits/select2.h for _FORTIFY_SOURCE.
	* misc/bits/select2.h: New file.
	* include/bits/select2.h: New file.
	* debug/Makefile (routines): Add fdelt_chk.
	* debug/Versions: Export __fdelt_chk and __fdelt_warn for GLIBC_2.15.
	* debug/tst-chk1.c (do_test): Add tests for FD_SET, FD_CLR, and
	FD_ISSET.
	* debug/fdelt_chk.c: New file.

	* wcsmbs/test-wcscmp.c: Moved from string/*.  Adjust.
	* wcsmbs/test-wmemcmp.c: Likewise.
	* string/Makefile (strop-tests): Remove wcscmp and wmemcmp.
	* wcsmbs/Makefile (strop-tests): Add wcscmp and wmemcmp.

2011-09-08  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile (strop-tests): Add memcmp.
	* string/test-wmemcmp.c: New file.
	* string/test-memcmp.c: Add wmemcmp support.

2011-09-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #13153]
	* manual/libc.texinfo (EDITION, VERSION, UPDATED): Update for
	2011-07-19 change.

	* sysdeps/mach/hurd/fork.c (__fork): Initialize REFS so we don't use a
	garbage value in a __mach_port_mod_refs call in the cases of the
	task-self and thread-self ports.

2011-09-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/sys/param.h (DEV_BSIZE): New macro.

2011-09-08  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (lose): Check for non-null L.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (open_verify): Use O_CLOEXEC.

	* elf/dl-libc.c (dlerror_run): Pass back error code from
	dl_catch_error.

	[BZ #13123]
	* elf/dl-load.c (lose): Free l_origin if it is valid.

	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Fix mixup in section
	names.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: Likewise.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@intel.com>.

2011-08-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/e_hypot.c: New file.
	* sysdeps/powerpc/fpu/e_hypotf.c: New file.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_cosf.c: New file.
	* sysdeps/powerpc/fpu/k_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_cosf.c: New file.
	* sysdeps/powerpc/fpu/s_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_scalbnf.c: New file.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: New file.

2011-08-15  Alan Modra  <amodra@gmail.com>

	[BZ #13092]
	* sysdeps/powerpc/Makefile (gmon): Move sysdep_routines to..
	* sysdeps/powerpc/powerpc64/Makefile (gmon): ..here..
	* sysdeps/powerpc/powerpc32/Makefile (gmon): ..and here.  Add
	ppc_mcount to static-only-routines.
	* sysdeps/powerpc/powerpc32/Versions: Export GLIBC_PRIVATE
	__mcount_internal.
	* sysdeps/powerpc/powerpc32/ppc-mcount.S (_mcount): Call
	__mcount_internal with usual JUMPTARGET.  Remove useless nop.

2011-08-18  David Flaherty  <flaherty@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: New file which checks
	for finite and infinity parameters.

2011-08-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Adjust the alignment
	and add nop instructions for throughput optimization.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-07-28  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Optimize the
	aligned copy for power7 with vector-scalar instructions.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.

2011-07-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Simplify
	AVX check.

2011-09-07  Andreas Schwab  <schwab@redhat.com>

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Revert
	last change.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): If vDSO is not present store pointer to
	syscall wrapper around clock_gettime in __vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Add entry for
	clock_gettime.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c (INTERNAL_GETTIME):
	Forgot to demangle the pointer.

	* sysdeps/i386/sysdep.h: Define atom_text_section.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Place function in
	section with atom_text_section.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c: New file.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSCALL_GETTIME): Allow
	already be defined.  Change to take two parameters and don't assign
	result to variable.  Adjust all users.
	Define INTERNAL_GETTIME if not already defined.
	Use INTERNAL_GETTIME instead of INTERNAL_VSYSCALL got clock_gettime
	call.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Don't define
	HAVE_CLOCK_GETTIME_VSYSCALL.
	* sysdeps/unix/clock_gettime.c: Adjust use of SYSDEP_GETTIME_CPU.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Don't use
	gettimeofday vsyscall, just use time.

2011-09-06  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Include
	<errno.h>.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Add entry for getcpu
	syscall on x86-64.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Use real
	syscall.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [!SHARED]: Use real
	syscall if possible.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd.c (get_process_info): Don't read whole ELF header, just
	e_ident.  Don't pass to find_mapsXX.
	* elf/pldd-xx.c (find_mapsXX): Remove second parameter.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2-no-bsf strrchr-sse2-no-bsf
	* sysdeps/x86_64/multiarch/strchr.S: Update.
	Check bit_slow_BSF bit.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: New file.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13134]
	* sysdeps/posix/spawni.c (script_execute): Define only for compatibility
	before glibc 2.15.
	(tryshell): Define.
	(__spawni): Change last parameter to be flag.  Test
	SPAWN_XFLAGS_USE_PATH flag to use path or not.
	Don't try to use shell unless SPAWN_XFLAGS_TRY_SHELL is set.
	* sysdeps/mach/hurd/spawni.c: Change last parameter and adjust user.
	* posix/spawni.c: Likewise.
	* posix/spawn.c: Add compat version which passed SPAWN_XFLAGS_TRY_SHELL.
	* posix/spawnp.c: Likewise.  Change normal version to use
	SPAWN_XFLAGS_USE_PATH.
	* posix/spawn_int.c: Define SPAWN_XFLAGS_USE_PATH and
	SPAWN_XFLAGS_TRY_SHELL.

	[BZ #13150]
	* posix/glob.h: Remove gcc 1.x support.

	[BZ #13068]
	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Use O_CLOEXEC.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2 strrchr-sse2 strchr-sse2-bsf
	strrchr-sse2-bsf
	* sysdeps/i386/i686/multiarch/strchr.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: New file.

2011-08-29  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: New file.

	* sysdeps/i386/i686/multiarch/Makefile: (sysdep_routines): Add
	wcscmp-c wcscmp-sse2
	* sysdeps/i386/i686/multiarch/wcscmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscmp.S: New file.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: New file.
	* wcsmbs/wcscmp.c: Allow renaming.

2011-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_fabsf.S: Use first argument
	stack slot, rather than the struct return pointer slot.
	* sysdeps/sparc/sparc32/fpu/s_fabs.c: Delete.
	* sysdeps/sparc/sparc32/fpu/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fabs.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/fpu/Implies: Likewise.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Fix to match
	kernel in 64-bit binaries.

2011-09-01  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (HWCAP_SPARC_*): Move to..
	* sysdeps/sparc/sysdep.h: this new file and add new values.
	* sysdeps/unix/sparc/sysdep.h: Include sysdeps/sparc/sysdep.h
	* sysdeps/sparc/dl-procinfo.h: Include sysdep.h and increase
	_DL_HWCAP_COUNT to 24.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.
	* sysdeps/sparc/sparc32/bits/atomic.h: Don't use magic local
	__ATOMIC_HWCAP_SPARC_V9 define, use sysdep.h one instead.
	* sysdeps/sparc/sparc32/dl-machine.h: Include sysdep.h
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use HWCAP_SPARC_*
	instead of magic constants.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

2011-08-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SETUP_PIC_REG): Define.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h (PSEUDO):
	Reimplement to do errno handling inline.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Include
	sysdeps/unix/sparc/sysdep.h instead of sysdeps/unix/sysdep.h
	(PSEUDO): Reimplement to do errno handling inline.
	(ret, ret_NOERRNO, ret_ERRVAL, r0, r1, MOVE): Don't redefine.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL):
	Implement in terms of INTERNAL_SYSCALL and __set_errno, just like
	i386.
	(INTERNAL_SYSCALL_DECL): Declare %g1 var for err state.
	(inline_syscall*): Add 'err' argument.
	(INTERNAL_SYSCALL, INTERNAL_SYSCALL_NCS,
	INTERNAL_SYSCALL_ERROR_P): Likewise and pass it down.
	(INLINE_CLONE_SYSCALL): Reimplement in terms of __SYSCALL_STRING,
	INTERNAL_SYSCALL_ERRNO, and INTERNAL_SYSCALL_ERROR_P.

	* scripts/data/localplt-sparc-linux-gnu.data: Remove 'ffs'.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2011-08-30  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Relocate objects in dependency order.

2011-08-29  Jiri Olsa <jolsa@redhat.com>

	* sysdeps/i386/dl-trampoline.S (_dl_runtime_profile): Fix cfi
	directive.

2011-08-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/strcmp.S: Rewrite.

2011-08-24  Andreas Schwab  <schwab@redhat.com>

	* elf/Makefile: Add rules to build and run unload8 test.
	* elf/unload8.c: New file.
	* elf/unload8mod1.c: New file.
	* elf/unload8mod1x.c: New file.
	* elf/unload8mod2.c: New file.
	* elf/unload8mod3.c: New file.

	* elf/dl-close.c (_dl_close_worker): Reset private search list if
	it wasn't used.

2011-08-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/dl-machine.h (DL_STACK_END): Do not
	subtract stack bias.
	* sysdeps/sparc/sparc64/jmpbuf-unwind.h (_JMPBUF_UNWINDS): Use
	%sp not %fp in calculations.
	(_JMPBUF_UNWINDS_ADJ): Likewise.

	* sysdeps/pthread/aio_suspend.c (do_aio_misc_wait): New function.
	(aio_suspend): Call it to force an exception region around the
	AIO_MISC_WAIT() invocation.

2011-08-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S (ENTRY): Add missing
	backslash.

2011-07-04  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/powerpc/dl-tls.h: Add _PPC_DL_TLS_H inclusion
	protection macro.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Include <ldsodefs.h>
	and <dl-machine.h>.
	(Elf64_FuncDesc): Remove.

2011-08-22  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Fix
	sigaltstack check, add missing cfi directives.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Add
	missing cfi directives, and sigaltstack handling.

2011-08-16  Andreas Schwab  <schwab@redhat.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Only assume cycle when
	object is seen twice.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

	* elf/Makefile (distribute): Add tst-initorder2.c.
	(tests): Add tst-initorder2.
	(modules-names): Add tst-initorder2a tst-initorder2b
	tst-initorder2c tst-initorder2d.  Add rules to build them.
	($(objpfx)tst-initorder2.out): New rule.
	* elf/tst-initorder2.c: New file.
	* elf/tst-initorder2.exp: New file.

2011-08-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/i386/scandir64.c: Include <string.h>.

	* elf/dl-deps.c (_dl_map_object_deps): Move check for missing
	dependencies back to end of function.

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(elfobjdir)/ld.so.

2011-08-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/time.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/time.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/bits/libc-vdso.h: Remove declaration
	of __vdso_gettimeofday.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Remove definition of
	__vdso_gettimeofday and __vdso_time.  Define __vdso_getcpu with
	attribute_hidden.
	(_libc_vdso_platform_setup): Remove initialization of
	__vdso_gettimeofday and __vdso_time.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-alias.c (get_next_alias): Use feof_unlocked
	and fgetc_unlocked.
	* nss/nss_files/files-key.c (search): Use fgets_unlocked and
	getc_unlocked.

	* elf/dl-open.c (add_to_global): Report additions to the global scope
	for LD_DEBUG=scopes.
	(dl_open_worker): Also print scope of newly loaded dependencies.
	(_dl_show_scope): Indicate if there is no scope.

	[BZ #13114]
	* stdio-common/Makefile (tests): Add bug24.
	* stdio-common/bug24.c: New file.

2011-08-19  Andreas Jaeger  <aj@suse.de>

	[BZ #13114]
	* libio/fileops.c (_IO_new_file_fopen): Fix handling of
	non-existant file when using close-on-exec mode.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_resolve): Fix CFI for
	the very first instruction.

	* sysdeps/x86_64/dl-trampoline.h: If MORE_CODE is defined, restore
	the CFI state in the end.
	* sysdeps/x86_64/dl-trampoline.S: Define MORE_CODE before first
	inclusion of dl-trampoline.h.
	Based on a patch by Jiri Olsa <jolsa@redhat.com>.

2011-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Relax ctan (0.75 + 1.25 i)
	expectations for long double.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/scandir64.c: Renamed
	from sysdeps/unix/sysv/linux/powerpc/scandir64.c.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): The
	artificual limit depends upon the system page size.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig (override CFLAGS): Add library-specific CFLAGS.
	* resolv/Makefile: Define CFLAGS-libresolv.

2011-08-17  Andreas Schwab  <schwab@redhat.com>

	* nss/makedb.c (compute_tables): Make variables used in nested
	function static.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (r_debug): Explicitly add padding when needed.
	* elf/pldd.c (get_process_info): Use pread to re-read auxiliary vector
	if buffer was too small.

	* elf/pldd.c (main): Attach to all threads in the process.
	Rewrite /proc handling to use *at functions.

2011-08-16  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c (_dl_show_scope): Take additional parameter which
	specifies first scope to show.
	(dl_open_worker): Update callers.  Move printing scope of new
	object to before the relocation.
	* elf/rtld.c (dl_main): Update _dl_show_scope call.
	* sysdeps/generic/ldsodefs.h: Update declaration.

	* elf/dl-open.c (_dl_show_scope): Use _dl_debug_printf to generate the
	string for the scope number.

2011-08-14  Ulrich Drepper  <drepper@gmail.com>

	* nscd/servicescache.c (cache_addserv): Make sure written is always
	initialized.

2011-08-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/i486/bits/atomic.h
	(__arch_compare_and_exchange_val_64_acq): Use RET alone at end of
	statement expression, so as to suppress "set but not used" warning.
	(__arch_c_compare_and_exchange_val_64_acq): Likewise.

	* string/strncat.c (STRNCAT): Use prototype definition.

	* locale/Makefile (locale-CPPFLAGS): Renamed CPPFLAGS-locale-programs.
	(locale-CPPFLAGS): New variable; put LOCALEDIR, LOCALE_ALIAS_PATH and
	-Iprograms here.
	(cppflags-iterator.mk sequence): Use locale-programs in place of nonlib.
	(localedef-modules): Add localedef.
	(locale-modules): Add locale.

	* sysdeps/generic/ldsodefs.h (struct unique_sym): Add a const.
	* elf/rtld.c (dl_main): Invert order of assignment in last change,
	to avoid a warning.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/resource.h (RLIM_INFINITY,
	RLIM64_INFINITY): Fix 64-bit values for 32-bit sparc.

2011-08-13  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c: Rename show_scope to _dl_show_scope and export.
	(dl_open_worker): Call _dl_show_scope when DL_DEBUG_SCOPES is set.
	* elf/rtld.c (dl_main): Set l_name of vDSO.
	Call _dl_show_scope when DL_DEBUG_SCOPES.
	(process_dl_debug): Recognize scopes flag and also set it for all.
	* sysdeps/generic/ldsodefs.h: Define DL_DEBUG_SCOPES.
	Declare _dl_show_scope.

	* elf/dl-libc.c (do_dlopen_args): Add caller_dlopen.
	(do_dlopen): Pass caller_dlopen to dl_open.
	(__libc_dlopen_mode): Initialize caller_dlopen.

	* intl/l10nflist.c (_nl_normalize_codeset): Make it compile outside
	of libc.  Make tolower call locale-independent.  Optimize a bit by
	using isdigit instead of isalnum.
	* locale/Makefile (locale-CPPFLAGS): Add -DNOT_IN_libc.

2011-08-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): Show in debug output whether a DSO
	was a dependency or dynamically loaded.

2011-08-11  Ulrich Drepper  <drepper@gmail.com>

	* intl/l10nflist.c: Allow architecture-specific pop function.
	* sysdeps/x86_64/l10nflist.c: New file.

	* intl/l10nflist.c (_nl_make_l10nflist): Use locale-independent
	classification.

2011-08-10  Andreas Schwab  <schwab@redhat.com>

	* include/dirent.h: Add libc_hidden_proto for scandirat and
	scandirat64.  Don't declare __scandirat64.
	* dirent/scandirat.c: Add libc_hidden_def.
	* dirent/scandirat64.c (SCANDIRAT): Remove underscores.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (SCANDIRAT): Likewise.

2011-08-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Add missing comma in
	enum.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.

2011-08-09  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def [libc]: Add GLIBC_2.15.
	* dirent/Makefile (routines): Add scandirat and scandirat64.
	* dirent/Versions [libc]: Export scandirat and scandirat64 for
	GLIBC_2.15.
	* dirent/dirent.h: Declare scandirat and scandirat64.
	* dirent/scandirat.c: New file.
	* dirent/scandirat64.c: New file.
	* sysdeps/wordsize-64/scandirat.c: New file.
	* sysdeps/wordsize-64/scandirat64.c: New file.
	* dirent/opendir.c: Define opendirat.
	* dirent/scandir.c: Move code to scandirat.c.  Implement scandir
	using scandirat.
	* dirent/scandir64.c: Adjust for scandir.c change.
	* include/dirent.h: Define scandir_cancel_struct.  Declare __opendirat,
	__scandirat64, and __scandir_cancel_handler.
	* sysdeps/unix/opendir.c: Rename __opendir to __opendirat.  Take
	additional parameter and use openat instead of open (outside of ld.so).
	Add new __opendir as wrapper around __opendirat.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Reimplement __old_scandir64
	here without requiring old scandirat implementation.

2011-08-08  Ulrich Drepper  <drepper@gmail.com>

	* dirent/scandir.c (cancel_handler): Renamed to
	__scandir_cancel_handler.  Do not define if SKIP_SCANDIR_CANCEL is
	defined.  Adjust users.
	* dirent/scandir64.c: Define SKIP_SCANDIR_CANCEL.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Likewise.

2011-08-04  Ulrich Drepper  <drepper@gmail.com>

	* string/test-string.h (IMPL): Use __STRING to expand name and then
	stringify it.

	* string/test-strcmp.c: Unify most of the WIDE and !WIDE code.  Lots
	of cleanups.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile: Update.
	(strop-tests): Append strncat.
	* string/test-wcscmp.c: New file.
	New comprehensive test for wcscmp.
	* string/test-strcmp.c: Update.
	(WIDE): New define.

2011-07-22  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_init.c (__res_vinit): Properly tokenize nameserver
	line.

2011-07-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	encoding to ACE if AI_IDN.

2011-08-01  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/dbl-64/k_rem_pio2.c (__kernel_rem_pio2): Fix up fq
	to y conversion for prec 3 and __FLT_EVAL_METHOD__ != 0.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Update.
	Fix overflow bug in strncat.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Likewise.

	* string/test-strncat.c: Update.
	Add new tests for checking overflow bugs.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2 strncat-ssse3 strncat-sse2 strncat-c.
	* sysdeps/i386/i686/multiarch/strcat.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncat.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-ssse3.S: New file.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.

2011-07-25  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i486/bits/string.h (__strncat_g): Correctly handle
	__n bigger than INT_MAX+1.
	(__strncmp_g): Likewise.

2011-07-23  Ulrich Drepper  <drepper@gmail.com>

	* posix/unistd.h: Define SEEK_DATA and SEEK_HOLE.
	* libio/stido.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.

	* sysdeps/unix/sysv/linux/sys/ptrace.h: Add new constants.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.

	[BZ #13021]
	* scripts/test-installation.pl: Don't expect libnss_test1 to be
	installed.

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix one more
	typo.
	(_dl_x86_64_save_sse): Likewise.

2011-07-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix test for
	OSXSAVE.
	(_dl_x86_64_save_sse): Likewise.

	* crypt/crypt_util.c (__init_des_r): Optimize memset calls.

	* crypt/crypt_util.c (__init_des_r): Add read barrier as well.

2011-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix last
	change.
	(_dl_x86_64_save_sse): Use correct AVX check.

2011-07-21  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Fix overfow
	bug in strncpy/strncat.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Likewise.

2011-07-21  Ulrich Drepper  <drepper@gmail.com>

	* string/tester.c (test_strcat): Add tests for different alignments
	of source and destination.
	(test_strncat): Likewise.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12852]
	* posix/glob.c (glob): Check passed in values before using them in
	expressions to avoid some overflows.
	(glob_in_dir): Likewise.

	[BZ #13007]
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): More complete
	check for AVX enablement so that we don't crash with old kernels and
	new hardware.
	* elf/tst-audit4.c: Add same checks here.
	* elf/tst-audit6.c: Likewise.

	* sysdeps/x86_64/bits/link.h (La_x86_64_ymm): Force 16-byte alignment.

2011-07-09  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/pathconf.c: Include <string.h>.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	* po/cs.po: Update from translation team.
	* po/bg.po: Likewise.

2011-07-12  Marek Polacek  <mpolacek@redhat.com>

	* misc/sys/cdefs.h: Add support for const attribute.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add __attribute_const__
	to gnu_dev_{major,minor,makedev} functions.

2011-07-20  Marek Polacek  <mpolacek@redhat.com>

	* intl/dcigettext.c (get_output_charset): Add missing bracket.

2011-07-20  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Use size_t for
	strlen results.

2011-07-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Use r10 for backing up the return address
	register in order to avoid conflicts with the soft frame pointer
	being held in r11 when necessary.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Likewise.

2011-07-14  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-fini.c (_dl_sort_fini): Remove unused link_map *l argument,
	* elf/dl-fini.c (_dl_fini): Adjust caller.
	* elf/dl-close.c (_dl_close_worker): Likewise.
	* sysdeps/generic/ldsodefs.h: Adjust declaration.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* elf/cache.c (load_aux_cache): Remove unnecessary condition of
	"aux_cache->nlibs < 0".

	* nscd/nscd_conf.c (nscd_parse_file): Remove unnecessary condition
	in the reload-count case.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2-unaligned strncat-ssse3
	strncat-sse2-unaligned strncat-c strlen-sse2-pminub
	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcat.S: New file.
	* sysdeps/x86_64/multiarch/strncat.S: New file.
	* sysdeps/x86_64/multiarch/strncat-c.c: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse2-pminub.S: New file.
	* string/strncat.c: Update.
	(USE_AS_STRNCAT): Define.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Turn on bit_Prefer_PMINUB_for_stringop for Intel Core i3, i5
	and i7.
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_Prefer_PMINUB_for_stringop): New.
	(index_Prefer_PMINUB_for_stringop): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (strlen): Check
	bit_Prefer_PMINUB_for_stringop.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Move buffer into union and add
	buffer64.
	* crypt/sha512.c (__sha512_finish_ctx): Use buffer64 for writes instead
	of casting of buffer.
	* crypt/sha256.h (struct sha256_ctx): Move buffer into union and add
	buffer32 and buffer64.
	* crypt/sha256.c (__sha256_finish_ctx): Use buffer32 or buffer64 for
	writes instead of casting of buffer.
	* crypt/md5.h (struct md5_ctx): Move buffer into union and add
	buffer32.
	* crypt/md5.c (md5_finish_ctx): Use buffer32 for writes instead of
	casting of buffer.

2011-07-19  Andreas Schwab  <schwab@redhat.com>

	* string/strxfrm_l.c (STRXFRM): Fix alloca accounting.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.c (termination_handler): Don't do anything for a database
	if it has not yet been initialized.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* po/nl.po: Update from translation team.
	* po/sv.po: Likewise.

2011-07-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/Makefile: Never use -mpreferred-stack-boundary=2,
	now disallowed by GCC.

	* configure.in (use-default-link): Default to yes if a test -shared
	link meets our qualifications.
	* configure: Regenerated.

	* config.make.in (output-format): New variable.
	* configure.in: Check for ld --print-output-format support.
	* configure: Regenerated.
	* Makerules ($(common-objpfx)format.lds)
	[$(output-format) != unknown]: Just use $(output-format),
	instead of the linker-script munging.

2011-07-14  Roland McGrath  <roland@hack.frob.com>

	* Makefile ($(common-objpfx)linkobj/libc.so): Use $(shlib-lds) instead
	of $(common-objpfx)shlib.lds.
	* elf/Makefile ($(objpfx)sotruss-lib.so): Likewise.

	* sysdeps/i386/i686/multiarch/strstr-c.c (libc_hidden_builtin_def):
	Conditionalize redefinition on [SHARED && DO_VERSIONING && !NO_HIDDEN].

	* configure.in (-z relro check): Adjust test code to add a large
	writable data section after it.
	* configure: Regenerated.

2011-07-11  Roland McGrath  <roland@hack.frob.com>

	* configure.in (-z relro check): Fix test code to make the variable
	truly const.
	* configure: Regenerated.

2011-07-11  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.h (struct traced_file): Define.
	(struct database_dyn): Remove inotify_descr, reset_res, and filename
	elements.  Add traced_files.
	(inotify_fd): Declare.
	(register_traced_file): Declare.
	* nscd/connections.c (dbs): Remove reset_res and filename initializers.
	(inotify_fd): Export.
	(resolv_conf_descr): Remove.
	(nscd_init): Move inotify descriptor creation to main.
	Don't register files for notification here.
	(register_traced_file): New function.
	(invalidate_cache): Don't use reset_res to determine whether to call
	res_init, go through the list of registered files.
	(main_loop_poll): The inotify descriptors are now stored in the
	structures for the traced files.
	(main_loop_epoll): Likewise
	* nscd/nscd.c (main): Create inotify socket here.  Pass extra argument
	to __nss_disable_nscd.
	* nscd/cache.c (prune_cache): There is no single inotify descriptor
	for a database anymore.  Check the records for all the registered
	files instead.
	* nss/Makefile (libnss_files-routines): Add files-init.
	(libnss_db-routines): Add db-init.
	* nss/Versions [libnss_files] (GLIBC_PRIVATE): Add _nss_files_init.
	[libnss_db] (GLIBC_PRIVATE): Add _nss_db_init.
	* nss/nss_db/db-init.c: New file.
	* nss/nss_files/files-init.c: New file.
	* nss/nsswitch.c (nss_load_library): New function.  Broken out of
	__nss_lookup_function.
	(__nss_lookup_function): Call nss_load_library.
	(nss_load_all_libraries): New function.
	(__nss_disable_nscd): Take parameter with callback function for files
	to register.  Set is_nscd.  Load all the DSOs for the NSS modules
	used for the cached services.
	* nss/nsswitch.h (__nss_disable_nscd): Adjust prototype.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd]: Pass the various -D
	options for features to all the files in nscd.

	* nss/nsswitch.c (nss_parse_file): Add missing fclose.

2011-07-10  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_init): Comment typo.

2011-07-09  Ulrich Drepper  <drepper@gmail.com>

	* po/pl.po: Update from translation team.
	* po/ja.po: Likewise.
	* po/ru.po: Likewise.
	* po/ko.po: Likewise.
	* po/fr.po: Likewise.

2011-07-09  Roland McGrath  <roland@hack.frob.com>

	* configure.in (.ctors/.dtors header and trailer check):
	Use an empirical test on a built program.
	* configure: Regenerated.

	* configure.in (-z relro check): Use an empirical test on a built DSO.
	Detect, but do not require, on ia64.
	* configure: Regenerated.

	* configure.in (READELF): Find it with AC_CHECK_TOOL.
	Update tests that use readelf to use $READELF instead.
	* configure: Regenerated.

2011-07-08  Ulrich Drepper  <drepper@gmail.com>

	* malloc/hooks.c (memalign_check): Avoid using checked_request2size
	if the result is not used.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	[BZ#9696]
	* stdlib/tst-strtod.c: Add testcase.

2011-07-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/pathconf.c (distinguish_extX): New function.
	(__statfs_link_max): Use it to distinguish between ext2/3 and ext4.
	The latter has a higher limit.  Take additional parameter to pass to
	the new function.
	(__pathconf): Pass file to __statfs_link_max.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Pass fd to
	__statfs_link_max.
	* sysdeps/unix/sysv/linux/pathconf.h: Adjust prototype of
	__statfs_link_max.

	[BZ #12868]
	* sysdeps/unix/sysv/linux/linux_fsinfo.h: Define Lustre constants.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle Lustre.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_link_max): Likewise.
	(__statfs_filesize_max): Likewise.
	Patch mostly by Andreas Dilger <adilger@whamcloud.com>.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	* resolv/res_comp.c (dn_skipname): Remove unused variable.

2011-07-06  Marek Polacek  <mpolacek@redhat.com>

	* nis/nss_nisplus/nisplus-spwd.c (_nss_nisplus_setspent): Honour the
	`status' variable.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_setetherent):
	Likewise.

2011-07-04  H.J. Lu  <hongjiu.lu@intel.com>

	* Makefile (strop-tests): Add strncat.
	* string/test-strncat.c: New file.

2011-06-30  Marek Polacek  <mpolacek@redhat.com>

	* iconvdata/johab.c: Don't inline `johab_sym_hanja_to_ucs' function.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules):
	Copy rule from iconvdata/Makefile.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12922]
	* posix/getopt.c (_getopt_internal_r): When "W;" is in short options
	but no long options are defined, just return 'W'.

2011-06-22  Marek Polacek  <mpolacek@redhat.com>

	[BZ #9696]
	* stdlib/strtod_l.c (round_and_return): Set ERANGE instead of EDOM.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	* inet/getnetgrent_r.c (internal_getnetgrent_r): Fix check for known
	netgroups to read.
	(innetgr): Likewise.

2011-07-05  Roland McGrath  <roland@hack.frob.com>

	* config.make.in (install_root): Default to $(DESTDIR).

2011-07-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Add cast to avoid warning.

2011-07-02  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)format.lds): Fail if result is empty.

	* Makefile ($(common-objpfx)testrun.sh): Generate to work relative to
	containing directory rather than embedding absolute directory names.

	* scripts/check-local-headers.sh: Rewritten using awk.
	Match by word, not by line.  Print error messages for matches.
	* Makefile ($(objpfx)check-local-headers.out): Pass AWK in to it.

	* Makerules [shlib-lds-flags empty]:
	($(common-objpfx)libc_pic.opts): New target.
	($(common-objpfx)libc_pic.os.clean): New target.
	($(common-objpfx)libc.so): Link it instead of libc_pic.os.

	* config.make.in (OBJCOPY): New variable.
	* aclocal.m4 (LIBC_PROG_BINUTILS): Substitute OBJCOPY too.
	* configure: Regenerated.

	* config.make.in (use-default-link): New variable.
	* configure.in (use_default_link): Grok --with-default-link to set it.
	* configure: Regenerated.
	* Makerules [$(elf) = yes] [$(use-default-link) = yes]:
	(shlib-lds, shlib-lds-flags): Define to empty.

	* Makerules (shlib-lds): New variable.
	(shlib-lds-flags): New variable.
	(build-shlib, build-moduile, build-module-asneeded): Use it.
	($(common-objpfx)libc.so): Use $(shlib-lds).
	($(extra-modules-build:%=$(objpfx)%.so)): Likewise.
	* iconvdata/extra-module.mk ($(objpfx)$(mod).so): Likewise.

	* elf/dynamic-link.h (elf_get_dynamic_info): Make asserts accept
	DT_FLAGS/DT_FLAGS_1 with zero flags.

	* elf/Makefile ($(objpfx)ld.so): Use -defsym=_begin=0 instead of
	linker script munging.

2011-07-02  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Add union to access total also
	as 128-bit value.
	* crypt/sha512.c (sha512_process_block): Perform total addition using
	128-bit if possible.
	(__sha512_finish_ctx): Likewise.
	* crypt/sha256.h (struct sha256_ctx): Add union to access total also
	as 64-bit value.
	* crypt/sha256.c (SWAP64): Define.
	(sha256_process_block): Perform total addition using 64-bit if
	possible.
	(__sha256_finish_ctx): Likewise.

2011-07-01  Ulrich Drepper  <drepper@gmail.com>

	* nscd/pwdcache.c (cache_addpw): Cleanup.  Add branch prediction.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise
	* nscd/servicescache.c (cache_addserv): Handle zero negtimeout.

2011-07-01  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/pwdcache.c (cache_addpw): Handle zero negtimeout.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise

2011-07-01  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Query NIS
	domain only when needed.

2011-06-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Make sure RES_USE_INET6
	is always restored.

2011-06-29  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Don't write notfound reply if we
	are re-adding the entry.
	* nscd/servicescache.c (cache_addserv): Likewise.

2011-06-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/generic/dl-irel.h: fix protection against multiple
	inclusions.
	* sysdeps/generic/dl-irel.h (elf_ifunc_invoke): New.

2011-06-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12935]
	* malloc/memusage.sh: Fix quoting in message.
	* debug/xtrace.sh: Likewise.

	* configure.in: Remove support for --experimental-malloc option, make
	it the default.
	* config.make.in: Likewise.
	* malloc/Makefile: Likewise.

2011-06-27  Andreas Schwab  <schwab@redhat.com>

	* iconvdata/gb18030.c (BODY for TO_LOOP): Fix encoding of non-BMP
	two-byte characters.

2011-06-27  Roland McGrath  <roland@hack.frob.com>

	* configure.in (NO_CTORS_DTORS_SECTIONS): Give this check its own
	AC_CACHE_CHECK invocation.
	* configure: Regenerated.

	* elf/soinit.c (__CTOR_LIST__, __DTOR_LIST__): Add used attribute.

2011-06-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* nscd/aicache.c (addhstaiX):  Restore only RES_USE_INET6
	bit from old_res_options.

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-servicescache.c): Define.

	* inet/getnetgrent_r.c (innetgr): Minimal cleanup, use correct return
	value type for setfct.

2011-06-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	__gettimeofday instead of gettimeofday.

2011-06-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile (all-built-dso): No need to check linkobj/libc.so.

2011-06-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcpy-sse2.S (RETURN): Fix a typo.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Correct unwind
	info.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2-unaligned strncpy-sse2-unaligned
	stpcpy-sse2-unaligned stpncpy-sse2-unaligned.
	* sysdeps/x86_64/multiarch/stpcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy.S: Remove strcpy with SSSE3.
	(STRCPY): Support SSE2 and SSSE3 versions.

2011-06-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12874]
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): Define.
	* sysdeps/wordsize-64/tst-writev.c: Work around problem with 2.6.38+
	kernels which artificially limit size of requests.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strncpy-c strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2 strncpy-sse2 stpcpy-sse2 stpncpy-sse2.
	* sysdeps/i386/i686/multiarch/stpcpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcpy.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable unaligned load optimization for Intel Core i3, i5 and i7
	processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Unaligned_Load):
	Define.
	(index_Fast_Unaligned_Load): Define.
	(HAS_FAST_UNALIGNED_LOAD): Define.

2011-06-23  Marek Polacek  <mpolacek@redhat.com>

	* nss/nss_db/db-open.c: Include <unistd.h> for read declaration.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12907]
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Avoid calling __check_pf
	until it is clear that the information is realy needed.
	Patch mostly by David Hanisch <david.hanisch@nsn.com>.

2011-06-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix last change.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	/sys/devices/system/cpu/online if it is usable.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Rate limit
	reading the information from the /proc filesystem to once a second.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/sigcontext.h: Fix definition of
	NULL after inclusion of kernel headers.

2011-06-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_db/db-XXX.c (nss_db_setENT): Only set entidx for successful
	calls to internal_setent.

	[BZ #12885]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): When looking up only IPv6
	addresses using gethostbyname4_r ignore IPv4 addresses.

	* sysdeps/posix/getaddrinfo.c (gaih_inet): After the last change the
	branch using gethostbyname2 is only for AF_INET.  Optimize accordingly.

	* inet/getnetgrent_r.c: Use DL_CALL_FCT in several places.

2011-06-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-plt.h: Protect against multiple
	inclusions.
	* sysdeps/sparc/sparc64/dl-plt.h: Likewise.

	* sysdeps/i386/dl-irel.h (elf_ifunc_invoke): New.
	(elf_irel): Use it.
	* sysdeps/powerpc/powerpc32/dl-irel.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc32/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h: Likewise.
	* sysdeps/x86_64/dl-irel.h: Likewise.

	* elf/dl-runtime.c: Use elf_ifunc_invoke.
	* elf/dl-sym.c: Likewise.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (__libc_res_nsend): Fix typos in last patch.  We
	need to dereference resplen2.

2011-06-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/wordsize-64/dl-fxstatat64.c: New file.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig: Define vardbdir and inst_vardbdir.
	* nss/Makefile: Add rules to install db-Makefile.

	* nss/nss_db/db-XXX.c: Cleanup.

	* nss/Makefile (libnss_db-dbs): Add db-initgroups.
	* nss/Versions [libnss_db]: Add _nss_db_initgroups_dyn for
	GLIBC_PRIVATE.
	* nss/db-Makefile (groups.db): Emit entries for initgroups lookups.
	* nss/makedb.c: Implement -g option to specify that value strings
	are generated and should not be added to table iterated over for
	get*ent calls.
	* nss/nss_db/db-initgroups.c: New file.

	* nss/getent.c: Add support for initgroups lookups through getgrouplist
	interface.

	* grp/initgroups.c (__nss_initgroups_database): Renamed and exported.
	(internal_getgrouplist): Adjust to name change.
	Update use_initgroups_entry if this is not the first call.
	* nss/databases.def: Add initgroups entry.

	* nss/makedb.c (compute_tables): Check result of multiple hash table
	sizes to minimize maximum chain length.

2011-06-14  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def: Add entry for libnss_db.
	* shlib-versions: Likewise.
	* nss/Makefile: Add rules to build libnss_db.
	* nss/Versions: Add libnss_db information.  Organize libnss_files
	entries better.
	* nss/db-Makefile: Add gshadow support.  Change rules for the new
	makedb progra.  Some minor improvements to generate smaller files.
	* nss/nss_db/nss_db.h: Move NSS database header data structures to
	here from...
	* nss/makedb.c: ...here.
	Improve database format to be smaller and require less memory at
	runtime.
	* nss/nss_db/db-XXX.x: Adjust for new database format.  Don't use
	db anymore.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-open.c: Likewise.
	* nss/nss_files/flies-XXX.x: Adjust comments.
	* nss/nss_files/files-ethers.c: Adjust for new DB_LOOKUP definition.
	* nss/nss_files/files-grp.c: Likewise.
	* nss/nss_files/files-hosts.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-proto.c: Likewise.
	* nss/nss_files/files-pwd.c: Likewise.
	* nss/nss_files/files-rpc.c: Likewise.
	* nss/nss_files/files-service.c: Likewise.
	* nss/nss_files/files-sgrp.c: Likewise.
	* nss/nss_files/files-spwd.c: Likewise.
	* nss/nss_db/db-alias.c: Removed.
	* nss/nss_db/dummy-db.h: Removed.

2011-06-02  Ulrich Drepper  <drepper@gmail.com>

	* nss/makedb.c: Rewritten to not use database library.
	* nss/Makefile: Update to build new makedb program.

2011-06-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/check_native.c: Include <string.h> for
	memset declaration.

2011-06-10  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix logic allocating
	tmpbuf.

2011-06-10  Roland McGrath  <roland@hack.frob.com>

	* Makerules (shlib.lds): Fail if the linker script comes out empty.
	* elf/Makefile ($(objpfx)ld.so): Likewise.

	* Makefile ($(common-objpfx)linkobj/libc.so): Break long lines with \.
	Don't list ld.so twice in dependencies.

	* posix/bug-regex31.c: Include <stdlib.h>.

	* nscd/hstcache.c (cache_addhst): Remove unused variable.

	* nis/nss_compat/compat-spwd.c
	(getspent_next_nss_netgr): Remove unused variable.
	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Likewise.

	* nis/nis_print_group_entry.c (nis_print_group_entry): Fix "Implicit
	nonmembers" output to use the right array.

	* resolv/nss_dns/dns-network.c (getanswer_r): Remove unused variable.

	* elf/dl-open.c (_dl_open): Quash warnings when DL_NNS==1.

	* locale/programs/ld-ctype.c (ctype_read): Remove unused variable.
	* locale/programs/ld-collate.c (add_to_tablewc): Likewise.
	* catgets/gencat.c (read_input_file): Likewise.
	* locale/programs/locarchive.c (enlarge_archive): Likewise.

	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Move DONTBLOCK
	variable definition inside #if's controlling its use.

	* inet/getnetgrent_r.c (innetgr): Remove unused variable.

	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Fix errno restoration.

	* misc/syslog.c (__vsyslog_chk): Remove unused variable.

	* io/fts.c (fts_build): Use if (0 && ...) rather than #if 0 for
	unreachable code.

	* stdio-common/printf_fp.c (___printf_fp): Remove unused variable.

	* configure.in (nss-crypt check): Use AC_LANG_PROGRAM.
	* configure: Regenerated.

	* Makerules: Revert last change.
	* elf/Makefile: Likewise.

2011-06-09  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)libc_pic.os): Use -Wl, before -r.
	* elf/Makefile ($(objpfx)librtld.os): Likewise.
	(reloc-link): Likewise.

2011-06-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Add rules to build pldd.
	* elf/pldd.c: New file.
	* elf/pldd-xx.c: New file.

2011-06-07  Ulrich Drepper  <drepper@gmail.com>

	* version.h: Update for 2.15 development version.

2011-06-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-irel.h (elf_irela): Pass dl_hwcap to
	ifuncs.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S (memcpy): Fetch
	dl_hwcap via passed in argument.
	* sysdeps/sparc/sparc64/multiarch/memset.S (memset, bzero):
	Likewise.

2011-06-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix smul_ppmm for S/390.

2011-06-06  Roland McGrath  <roland@hack.frob.com>

	[BZ #12849]
	* manual/fdl-1.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/fdl-1.1.texi
	* manual/lgpl-2.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/lgpl-2.1.texi
	* manual/Makefile (licenses): New variable, list those new file names.
	(texis): Use it.
	(chapters.% top-menu.%): Include $(licenses) with $(appendices).

	* manual/fdl.texi: File removed.
	* manual/lesser.texi: File removed.
	* manual/libc.texinfo (Copying, Documentation License):
	Use new @include file names, put @appendix directive before @include.

2011-06-04  Jakub Jelinek  <jakub@redhat.com>

	[BZ #12841]
	* rt/bits/mqueue2.h (__mq_open_2): Add __THROW.
	(__mq_open_alias): Use __REDIRECT_NTH instead of __REDIRECT.
	(mq_open): Add __NTH.

2011-06-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Assume Intel Core i3/i5/i7 processor if AVX is available.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	typo.

2011-05-31  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Don't free non-malloced
	memory.  Use alloca_account.  Fix memory leak when retrying.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.14 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 14.

	* config.make.in (RANLIB): Remove entry.

2011-05-30  Ulrich Drepper  <drepper@gmail.com>

	* po/Makefile (po-sed-cmd): Add ksh to extensions.
	(libc.pot): Work around missing support for .ksh extension in xgettext.

	[BZ #12684]
	* resolv/res_send.c (__libc_res_nsend): Only go to the next name server
	if both request failed.
	(send_dg): In case of server errors clear resplen or *resplen2.

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Run initializer sorting only
	when there are multiple maps.
	* elf/dl-fini.c (_dl_sort_fini): Check for list of one.
	(_dl_fini): Remove test here.

	* elf/rtld.c (dl_main): Don't allow the loader to load itself.

2011-05-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* sysdeps/posix/getaddrinfo.c (gethosts): Restore only RES_USE_IENT6
	bit from old_res_options.
	(gaih_inet): Likewise.

	[BZ #11099]
	* shadow/sgetspent_r.c (LINE_PARSER): Interpret numeric field values
	as signed.

	* resolv/res_init.c (res_setoptions): Make the code more compact.

	[BZ #11558]
	* resolv/res_init.c (res_setoptions): Recognize use-vc option and
	set RES_USEVC.

	[BZ #11634]
	* elf/Makefile (tests): Don't add tst-audit[67] without working -mavx.

	* malloc/malloc.h: Mark malloc hook variables as deprecated.

	[BZ #11781]
	* malloc/malloc.h: Declare malloc hook variables as volatile.

	* locale/programs/locarchive.c (add_locale_to_archive): Fix typo
	in last patch.

	[BZ #11799]
	* sysdeps/unix/sysv/linux/bits/siginfo.h (SI_USER): Don't mention
	raise in the comment.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h: Likewise.

2011-05-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12811]
	* posix/regex_internal.c (build_wcs_buffer): Don't signal we have to
	grow the buffers more if it already has to be sufficient.
	(build_wcs_upper_buffer): Likewise.
	* posix/regexec.c (check_matching): Likewise.
	(clean_state_log_if_needed): Likewise.
	(extend_buffers): Don't enlarge buffers beyond size of the input
	buffer.
	Patches mostly by Emil Wojak <emil@wojak.eu>.
	* posix/bug-regex32.c: New file.
	* posix/Makefile (tests): Add bug-regex32.

	* locale/findlocale.c (_nl_find_locale): Return right away if
	_nl_explode_name failed.
	* locale/programs/locarchive.c (add_locale_to_archive): Likewise.

	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_sendmmsg): Define.

	* debug/xtrace.sh: Unify messages.
	* malloc/memusage.sh: Likewise.

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_time): Retrieve
	time symbol from vDSO.  Substitute with vsyscall if not available.
	* sysdeps/unix/sysv/linux/x86_64/time.S [SHARED]: Use
	__vdso_time.

	* sysdeps/unix/sysv/linux/internal_sendmmsg.S: New file.
	* sysdeps/unix/sysv/linux/sendmmsg.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket] (sysdep_routines):
	Add sendmmsg and internal_sendmmsg.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add sendmmsg.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_SENDMMSG.

	* sysdeps/unix/sysv/linux/syscalls.list: Add setns entry.
	* sysdeps/unix/sysv/linux/bits/sched.h: Declare setns.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add setns.

2011-05-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_getcpu):
	Retrieve getcpu symbol from vDSO.  Substitute with vsyscall if not
	available.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [SHARED]: Use
	__vdso_getcpu.

	[BZ #12814]
	* iconvdata/Makefile (tests): Add bug-iconv9.
	* iconvdata/bug-iconv9.c: New file.

2011-05-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #12814]
	* iconvdata/iso-2022-jp.c (BODY): Fix invalid variable shadowing.

2011-05-25  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_regs_struct): Change intcs field back to cs.

2011-05-25  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-05-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12795]
	* sysdeps/unix/sysv/linux/bits/resource.h (RLIMIT_RTTIME): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Likewise.

2011-05-20  Andreas Schwab  <schwab@redhat.com>

	* stdlib/longlong.h: Update from GCC.

2011-05-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/ia64/sysconf.c (HAS_CPUCLOCK): Add
	parameter name.
	* sysdeps/unix/sysv/linux/sysconf.c (has_cpuclock, HAS_CPUCLOCK):
	Add parameter name.
	(__sysconf): Pass it down.

2011-05-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12671]
	* nis/nss_nis/nis-alias.c (_nss_nis_getaliasbyname_r): Use malloc in
	some situations.
	* nscd/nscd_getserv_r.c (nscd_getserv_r): Likewise.
	* posix/glob.c (glob_in_dir): Take additional parameter alloca_used.
	add in in __libc_use_alloca calls.  Adjust callers.
	(glob): Use malloc in some situations.

	* elf/dl-runtime.c (_dl_profile_fixup): Also store LA_SYMB_NOPLTENTER
	and LA_SYMB_NOPLTEXIT in flags which are passed to pltenter and
	pltexit.

2011-05-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h: Define CLOCK_REALTIME_ALARM
	and CLOCK_BOOTTIME_ALARM.

	[BZ #12782]
	* string/xpg-strerror.c (__xpg_strerror_r): Fill buffer even if error
	is returned.

	* string/_strerror.c (__strerror_r): Print negative errors as signed
	numbers.

	[BZ #12777]
	* iconvdata/cp1258.c (comp_table_data): Remove entry 0x00A5 0xEC.
	(decomp_table): Change U0385 entry to emit 0xA5 0xEC.
	* iconvdata/CP1258.irreversible: Adjust entry 0xA8EC.

	* configure.in: Fix typo in redirection and correct removal of test
	files in two cases.

	[BZ #12788]
	* locale/setlocale.c (new_composite_name): Fix test to check for
	identical name of all categories.

	[BZ #12792]
	* libio/filedoalloc.c (local_isatty): New function.
	(_IO_file_doallocate): Use local_isatty.
	* stdio-common/perror.c (perror): In case a new stream is used
	forward the stream error.
	* stdio-common/vfprintf.c (ARGCHECK): For read-only streams also set
	error flag.

2011-05-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11869]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't unconditionally use
	alloca.
	* include/alloca.h (extend_alloca_account): Define.

	[BZ #11857]
	* posix/regex.h: Fix comments with documentation of user-accessible
	fields after compilation and describe correct free'ing of pattern
	after re_compile_pattern.
	Patch by Reuben Thomas <rrt@sc3d.org>.

2011-05-18  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/Makefile (no-special-regs): Add -mno-vsx
	and -mno-altivec to prevent the compiler from using Altivec and/or
	VSX instructions when the corresponding registers are not available.

2011-05-19  Andreas Schwab  <schwab@redhat.com>

	* grp/compat-initgroups.c (__libc_use_alloca): Don't define.

2011-05-19  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Use __dup2, not dup2.
	* libio/freopen64.c (freopen64): Likewise.

2011-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12775]
	* sysdeps/x86_64/fpu/e_powl.S: Fix a typo.
	* math/Makefile (tests): Add test-powl.
	(CFLAGS-test-powl.c): Define.
	* math/test-powl.c: New file.

2011-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* fileops.c (_IO_new_file_fopen): Get fd from _IO_fileno.

2011-05-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11837]
	* iconvdata/gb18030.c: Update to GB18020-2005.

2011-05-16  Ulrich Drepper  <drepper@gmail.com>

	* posix/regex.h (RE_SYNTAX_AWK, RE_SYNTAX_GNU_AWK,
	RE_SYNTAX_POSIX_AWK): Update to match recent development.
	Patch by Aharon Robbins <arnold@skeeve.com>.

	[BZ #11892]
	* stdlib/putenv.c (putenv): Don't always create copy of the variable
	on the stack.

	[BZ #11895]
	* misc/pselect.c (__pselect): Handle timeout value errors hidden
	through underflows.

	[BZ #12766]
	* misc/error.c (error_at_line): Ensure file_name and old_file_name
	point to strings before performing equality test for error_one_per_line
	mode.

	[BZ #11697]
	* login/programs/pt_chown.c (do_pt_chown): Always call chown.

	[BZ #11820]
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_fpregs_struct): Avoid __uint*_t types.

	[BZ #6420]
	* malloc/mtrace.c (tr_where): Add additional parameter to point to
	symbol info.  Use it instead of calling _dl_addr locally.
	(lock_and_info): New function.
	(tr_freehook): Call lock_and_info and pass symbol info as additional
	parameter to tr_where.
	(tr_mallochook): Likewise.
	(tr_reallochook): Likewise.
	(tr_memalignhook): Likewise.

	* malloc/mtrace.c: Remove support for USE_MTRACE_FILE.  It is not
	used and couldn't be at all thread-safe.

2011-05-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Don't close old file descriptor
	before the new one is opened.  Instead dup the new file descriptor
	to the old one after the new stream is created.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/libio.h: Define _IO_FLAGS2_NOCLOSE and _IO_FLAGS2_CLOEXEC.
	* libio/fileops.c (_IO_new_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	(_IO_new_file_fopen): Set _IO_FLAGS2_CLOEXEC for "e" mode.
	If _IO_file_open didn't set FD_CLOEXEC do it after the call.
	* libio/oldfileops.c (_IO_old_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	* include/unistd.h: Add hidden_proto for dup3.
	Define __have_dup3.
	* io/dup3.c: Define hidden symbol.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_DUP3.

	[BZ #7101]
	* posix/getopt.c (_getopt_internal_r): List all ambigious possibilities
	when an incomplete long option is used.
	* posix/tst-getopt_long1.c: New file.
	* posix/Makefile (tests): Add tst-getopt_long1.

	[BZ #10138]
	* scripts/config.guess: Update from autoconf-2.68.
	* scripts/config.sub: Likewise.

	[BZ #10157]
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf): Split out CPUTIME
	tests into ...
	(has_cpuclock): ...this.  New function.
	* sysdeps/unix/sysv/linux/ia64/sysconf.c: Just define HAS_CPUCLOCK
	macro here based on has_cpuclock code.

	[BZ #10149]
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	First byte (not low byte) is now always NUL.
	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Likewise.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Use non-cancelable interfaces.

	[BZ #9809]
	* locale/iso-639.def: Add entry for Sorani.

	[BZ #11901]
	* include/stdlib.h: Move include protection to the right place.
	Define abort_msg_s.  Declare __abort_msg with it.
	* stdlib/abort.c (__abort_msg): Adjust type.
	* assert/assert.c (__assert_fail_base): New function.  Majority
	of code from __assert_fail.  Allocate memory for __abort_msg with
	mmap.
	(__assert_fail): Now call __assert_fail_base.
	* assert/assert-perr.c: Remove bulk of implementation.  Use
	__assert_fail_base.
	* include/assert.hL Declare __assert_fail_base.
	* sysdeps/posix/libc_fatal.c: Allocate memory for __abort_msg with
	mmap.
	* sysdeps/unix/sysv/linux/libc_fatal.c: Likewise.

2011-05-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11952]
	[BZ #12453]
	* elf/dl-open.c (dl_open_worker): Delay calls to _dl_update_slotinfo
	until all modules are registered in the DTV.
	* elf/Makefile: Add rules to build and run tst-tls19.
	* elf/tst-tls19.c: New file.
	* elf/tst-tls19mod1.c: New file.
	* elf/tst-tls19mod2.c: New file.
	* elf/tst-tls19mod3.c: New file.
	Patch mostly by Martin von Gagern <Martin.vGagern@gmx.net>.

	[BZ #12083]
	* sysdeps/pthread/aio_misc.c (__aio_init): Compute optim.aio_num
	correctly.

	[BZ #12601]
	* iconvdata/cp932.c (BODY to UCS4): Fix incrementing inptr in case of
	two-byte sequence errors.
	* iconvdata/Makefile (tests): Add bug-iconv8.
	* iconvdata/bug-iconv8.c: New file.

	[BZ #12626]
	* sysdeps/generic/elf/backtracesymsfd.c (__backtrace_symbols_fd): Move
	buf2 definition.

	* libio/fileops.c (_IO_new_file_close_it): Initialize write_status.

	[BZ #12432]
	* sysdeps/ia64/backtrace.c (struct trace_reg): Add cfa element.
	(dummy_getcfa): New function.
	(init): Get _Unwind_GetCFA address, use dummy if not found.
	(backtrace_helper): In recursion check, also check whether CFA changes.
	(__backtrace): Completely initialize arg.

	* iconv/loop.c (SINGLE) [STORE_REST]: Add input bytes to bytebuf before
	storing incomplete byte sequence in state object.  Avoid testing for
	guaranteed too small input if we know there is enough data available.

2011-05-11  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (+link-pie): Indent.
	* Rules (binaries-pie): Define if $(have-fpie) and
	$(build-shared).
	(binaries-shared): Also filter out $(binaries-pie).
	($(addprefix $(objpfx),$(binaries-pie))): New rule.
	* nscd/Makefile (others-pie): Add nscd.
	(LDFLAGS-nscd): Set this instead of relro-LDFLAGS.
	($(objpfx)nscd): Remove command override.
	* login/Makefile (others-pie): Add pt_chown.
	($(objpfx)pt_chown): Remove command override.
	* elf/Makefile: Add PIE tests to tests and tests-pie variables and
	remove command overrides.

2011-05-13  Ulrich Drepper  <drepper@gmail.com>

	* libio/tst_putwc.c: Fix error messages.

	[BZ #12724]
	* libio/fileops.c (_IO_new_file_close_it): Always flush when
	currently writing and seek to current position when not.
	* libio/Makefile (tests): Add bug-fclose1.
	* libio/bug-fclose1.c: New file.

2011-05-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12511]
	* elf/dl-lookup.c (enter): Don't test for copy relocation here and
	don't set DF_1_NODELETE here.
	(do_lookup_x): When entering new entry test for copy relocation
	and if necessary set DF_1_NODELETE flag.
	* elf/tst-unique4.cc: New file.
	* elf/tst-unique4.h: New file.
	* elf/tst-unique4lib.cc: New file.
	* elf/Makefile: Add rules to build and run tst-unique4.
	Patch by Piotr Bury <pbury@goahead.com>.

2011-05-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12052]
	* sysdeps/posix/spawni.c (__spawni): Fix sched_setscheduler call.

	[BZ #12625]
	* misc/mntent_r.c (addmntent): Flush the stream after the output

	[BZ #12393]
	* elf/dl-load.c (is_trusted_path): Remove unnecessary test.
	(is_trusted_path_normalize): Skip initial colon.  Append slash
	to empty buffer.  Duplicate is_trusted_path code but allow
	constructed patch to be prefix.
	(is_dst): Allow $ORIGIN followed by /.
	(_dl_dst_substitute): Correct clearing of check_for_trusted.
	Correct testing of result of is_trusted_path_normalize
	(decompose_rpath): Fix warning.

2011-05-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11257]
	* grp/initgroups.c (internal_getgrouplist): When we found the service
	list through the initgroups entry in nsswitch.conf do not always
	continue on a successful lookup.  Don't always use the
	__nss_group_database value if it is set.
	* nss/nsswitch.conf (initgroups): Change action for successful db
	lookup to continue for compatibility.

2011-05-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11532]
	* iconvdata/Makefile: Add rules to build CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/gconv-modules: Add entries for CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/tst-tables.sh: Likewise.
	* iconvdata/cp770.c: New file.
	* iconvdata/cp771.c: New file.
	* iconvdata/cp772.c: New file.
	* iconvdata/cp773.c: New file.
	* iconvdata/cp774.c: New file.
	* iconvdata/testdata/CP770: New file.
	* iconvdata/testdata/CP770..UTF8: New file.
	* iconvdata/testdata/CP771: New file.
	* iconvdata/testdata/CP771..UTF8: New file.
	* iconvdata/testdata/CP772: New file.
	* iconvdata/testdata/CP772..UTF8: New file.
	* iconvdata/testdata/CP773: New file.
	* iconvdata/testdata/CP773..UTF8: New file.
	* iconvdata/testdata/CP774: New file.
	* iconvdata/testdata/CP774..UTF8: New file.

	* iconvdata/gen-8bit-gap-1.sh: End reading of charmap file at
	END CHARMAP line.
	* iconvdata/gen-8bit-gap.sh: Likewise.
	* iconvdata/gen-8bit.sh: Likewise.

	* locale/iso-639.def: Add ary entry.

	[BZ #11258]
	* locale/C-translit.h.in: Add U20A1 transliteration.

	[BZ #12178]
	* locale/iso-639.def: Add wae entry.
	Patch by Kevin Bortis <bortis@translate-wae.ch>.

	[BZ #12545]
	* locale/programs/localedef.c (construct_output_path): Use ssize_t
	for n.

	[BZ #12711]
	* locale/C-translit.h.in: Add entry for U20B9.
	Patch by pravin.d.s@gmail.com.

2011-05-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12713]
	* sysdeps/unix/sysv/linux/getcwd.c: If getcwd syscall report
	ENAMETOOLONG use generic getcwd.
	* sysdeps/posix/getcwd.c: Add support to use openat.  Make usable
	in rtld.  Use *stat64.
	* sysdeps/unix/sysv/linux/Makefile [subdir=elf] (sysdep-rtld-routines):
	Add dl-getcwd, dl-openat64, dl-opendir, dl-fxstatat64.
	* sysdeps/unix/sysv/linux/dl-getcwd.c: New file.
	* sysdeps/unix/sysv/linux/dl-openat64.c: New file.
	* sysdeps/unix/sysv/linux/dl-opendir.c: New file.
	* sysdeps/unix/sysv/linux/dl-fxstat64.c: New file.
	* include/sys/stat.h: Define __fstatat, __lstat64, __fstat64, and
	__fstatat64 macros.
	* include/dirent.h: Add libc_hidden_proto for rewinddir.
	* dirent/rewinddir.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/rewinddir.c: Likewise.
	* sysdeps/unix/rewinddir.c: Likewise.  Don't do locking outside libc.

	* include/dirent.h (__alloc_dir): Add flags parameter.
	* sysdeps/unix/fdopendir.c (__fdopendir): Pass flags to __alloc_dir.
	* sysdeps/unix/opendir.c (__opendir): Pass 0 in new parameter to
	__alloc_dir.
	(__alloc_dir): Take new parameter.  Don't call fcntl for invocations
	from fdopendir if O_CLOEXEC is already set.

2011-03-15  Alan Modra  <amodra@gmail.com>

	* elf/dl-reloc.c (_dl_try_allocate_static_tls <TLS_DTV_AT_TP>): Handle
	l_tls_firstbyte_offset non-zero.  Save padding offset in
	l_tls_firstbyte_offset for later use.
	* elf/dl-close.c (_dl_close_worker <TLS_DTV_AT_TP>): Correct code
	freeing static tls block.

2011-03-05  Jonathan Nieder  <jrnieder@gmail.com>

	* sysdeps/unix/sysv/linux/sys/param.h: Fix an #ifndef __undef_ARG_MAX
	where #ifdef was intended.  The intent is to prevent ARG_MAX from
	being defined by the kernel headers.

2011-05-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12734]
	* resolv/resolv.h: Define RES_NOTLDQUERY.
	* resolv/res_init.c (res_setoptions): Recognize no_tld_query and
	no-tld-query and set RES_NOTLDQUERY.
	* resolv/res_debug.c (p_option): Handle RES_NOTLDQUERY.
	* resolv/res_query.c (__libc_res_nsearch): Backport changes from
	modern BIND to search name as TLD unless forbidden.

2011-05-07  Petr Baudis  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12393]
	* elf/dl-load.c (fillin_rpath): Move trusted path check...
	(is_trusted_path): ...to here.
	(is_trusted_path_normalize): Wrapper for /../ and /./ normalization.
	(_dl_dst_substitute): Verify expanded $ORIGIN path elements
	using is_trusted_path_normalize() in setuid scripts.

2011-05-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add missing
	__BEGIN/__END_DECLS.

2011-05-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Return
	NSS_STATUS_NOTFOUND if no record was found.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* sunrpc/Makefile (headers): Add rpc/netdb.h.
	(headers-not-in-tirpc): Remove rpc/netdb.h
	* resolv/netdb.h: Revert last change.

2011-05-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* Makeconfig (link-libc-static): Use --{start,end}-group to handle
	circular dependency between libgcc.a and libc.a.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* resolv/netdb.h: Don't include <rpc/netdb.h>.
	* nis/Makefile: Don't install rpcsvc/*.
	* inet/protocols/timed.h: Include <sys/types.h> and <sys/time.h>
	instead of <rpc/types.h>.
	(MAXHOSTNAMELEN): Define.

2011-05-03  Andreas Schwab  <schwab@redhat.com>

	* elf/ldconfig.c (add_dir): Don't crash on empty path.

2011-04-28  Maciej Babinski  <mbabinski@google.com>

	[BZ #12714]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't bypass
	gethostbyname4_r when IPv6 results are possible.

2011-05-02  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12723]
	* sysdeps/unix/sysv/linux/pathconf.c (__pathconf): Implement
	_PC_PIPE_BUF handling.

2011-04-30  Bruno Haible  <bruno@clisp.org>

	[BZ #12717]
	* conform/data/netdb.h-data (getnameinfo): Make POSIX compliant.
	* resolv/netdb.h (getnameinfo): Change type of flags parameter
	to 'int'.
	* inet/getnameinfo.c (getnameinfo): Likewise.

2011-04-29  Ulrich Drepper  <drepper@gmail.com>

	* grp/initgroups.c (internal_getgrouplist): Prefer initgroups setting
	to groups setting in database lookup.
	* nss/nsswitch.conf: Add initgroups entry.

2011-04-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12685]
	* libio/fileops.c (_IO_new_file_fopen): Scan up to 7 bytes of the
	mode string.
	Patch by Eric Blake <eblake@redhat.com>.

2011-04-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sunrpc/Makefile (need-export-routines): Add svc_run.
	(routines): Remove svc_run.
	($(objpfx)thrsvc): Add $(common-objpfx)linkobj/libc.so.
	* sunrpc/clnt_perr.c (clnt_perrno): Export.
	* sunrpc/svc_run.c (svc_run): Likewise.
	* sunrpc/svc_udp.c (svcudp_create): Likewise.

2011-04-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Fix
	problem in reallocation in last patch.

2011-04-20  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile: Move inclusion of Rules.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c: New file.
	* nss/Makefile (libnss_files-routines): Add files-initgroups.
	* nss/Versions (libnss_files) [GLIBC_PRIVATE]: Export
	_nss_files_initgroups_dyn.

2011-03-31  Richard Sandiford  <richard.sandiford@linaro.org>

	* elf/elf.h (R_ARM_IRELATIVE): Define.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile ($(rpc-compat-routines.os)): Add before-compile to
	dependencies.

2011-02-06  Mike Frysinger  <vapier@gentoo.org>

	[BZ #12653]
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Only protect
	MEMCPY_CHK with USE_AS_BCOPY ifdef check.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.

2011-03-28  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Don't read past
	differing bytes.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12420]
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Reload context after
	storing it.
	* stdlib/bug-getcontext.c: New file.
	* stdlib/Makefile: Add rules to build and run bug-getcontext.

2011-04-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Wrap the z9-109
	instructions into .machine "z9-109".
	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Likewise.

2011-04-11  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/elf/start.S (_start): Skip extra zeroes
	between environment variables and auxiliary vector.

2011-04-16  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Add rules to build linkobj/libc.so.
	* include/libc-symbols.h: Define libc_hidden_nolink.
	* include/rpc/auth.h: Mark functions which are to be hidden.
	* include/rpc/auth_des.h: Likewise.
	* include/rpc/auth_unix.h: Likewise.
	* include/rpc/clnt.h: Likewise.
	* include/rpc/des_crypt.h: Likewise.
	* include/rpc/key_prot.h: Likewise.
	* include/rpc/pmap_clnt.h: Likewise.
	* include/rpc/pmap_prot.h: Likewise.
	* include/rpc/pmap_rmt.h: Likewise.
	* include/rpc/rpc_msg.h: Likewise.
	* include/rpc/svc.h: Likewise.
	* include/rpc/svc_auth.h: Likewise.
	* include/rpc/xdr.h: Likewise.
	* nis/Makefile: Link all DSOs against linkobj/libc.so.
	* nss/Makefile: Likewise.
	* sunrpc/Makefile: Don't install headers.  Build library with normal
	entry points.  Don't build rpcinfo.  Link RPC tests appropriately.
	* sunrpc/auth_des.c: Hide exported symbols by default, export some
	for the compat linking library.  Remove use of INTDEF/INTUSE.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-04-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12650]
	* sysdeps/i386/dl-tls.h: Define TLS_DTV_UNALLOCATED.
	* sysdeps/ia64/dl-tls.h: Likewise.
	* sysdeps/powerpc/dl-tls.h: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/sh/dl-tls.h: Likewise.
	* sysdeps/sparc/dl-tls.h: Likewise.
	* sysdeps/x86_64/dl-tls.h: Likewise.
	* elf/dl-tls.c: Don't define TLS_DTV_UNALLOCATED here.

2011-03-14  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (_dl_dst_substitute): When skipping the first
	rpath element also skip the following colon.
	(expand_dynamic_string_token): Add is_path parameter and pass
	down to DL_DST_REQUIRED and _dl_dst_substitute.
	(decompose_rpath): Call expand_dynamic_string_token with
	non-zero is_path.  Ignore empty rpaths.
	(_dl_map_object_from_fd): Call expand_dynamic_string_token
	with zero is_path.

2011-04-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Make cancelable.

2011-04-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12655]
	* sysdeps/unix/sysv/linux/sys/syscall.h: Fix comment.
	Patch by Filipe David Manana <fdmanana@apache.org>.

2011-04-07  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S (CALL_FAIL):
	Maintain aligned stack.
	(CHECK_RSP): Remove unused macro.

2011-04-03  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/cacheinfo.c (intel_02_known): Fix typo in table.
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_02_known): Likewise.

2011-04-02  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h (CLOCK_BOOTTIME): Define.

	* include/features.h: Mention __USE_XOPEN2K8 in comment.

2011-03-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12518]
	* sysdeps/x86_64/Versions: Add memcpy to GLIBC_2.14.
	* sysdeps/x86_64/memcpy.S: Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: Include <shlib-compat.h>.
	(memcpy): Renamed to ...
	(__new_memcpy): This.
	(memcpy): Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/multiarch/memmove.c: Include <shlib-compat.h>.
	(memcpy): Provide GLIBC_2_2_5 memcpy.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12631]
	* wcsmbs/wchar.h: Make wcpcpy and wcpncpy visible for __USE_XOPEN2K8.

2011-03-30  Andreas Schwab  <schwab@redhat.com>

	* misc/syncfs.c: New file.
	* misc/Makefile (routines): Add syncfs.
	* posix/unistd.h: Declare syncfs.
	* sysdeps/unix/syscalls.list: Add syncfs.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Versions: Rename open_by_handle to
	open_by_handle_at.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define O_PATH.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

	* io/Makefile: Compile fallocate.c, fallocate64.c, and
	sync_file_range.c with -fexceptions.
	* sysdeps/unix/sysv/linux/fallocate.c: Make cancelable.
	* sysdeps/unix/sysv/linux/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Mark
	sync_file_range as cancellation point
	* sysdeps/unix/sysv/linux/i386/sync_file_range.c: New file.  This is
	now a wrapper around __call_sync_file_range with cancellation handling.
	* sysdeps/unix/sysv/linux/i386/sync_file_range.S: Renamed to ...
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: ...this.  Change
	function name to __call_sync_file_range.
	* sysdeps/unix/sysv/linux/i386/Makefile [subdir=io] (sysdep_routines):
	Add call_sync_file_range.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timex.h.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* iconv/iconv.h: Fix typo in comment.
	* io/fcntl.h: Likewise.
	* libio/stdio.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/unistd.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (name_to_handle_at,
	open_by_handle): Add.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define struct file_handle
	and MAX_HANDLE_SZ.  Declare name_to_handle_at and open_by_handle.
	Augment a few comments.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Add name_to_handle_at and
	open_by_handle.

	* io/fcntl.h (AT_EMPTY_PATH): Define.

2011-03-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add clock_adjtime.
	* sysdeps/unix/sysv/linux/bits/time.h: New file.
	* sysdeps/unix/sysv/linux/sys/timex.h: Move struct timex definition
	to...
	* sysdeps/unix/sysv/linux/bits/timex.h: ...here.  New file.
	* Versions.def: Add GLIBC_2.14.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (clock_adjtime):
	Export.

2011-03-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word): Increment
	round counter.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12597]
	* string/test-strncmp.c (do_page_test): New function.
	(check2): Likewise.
	(test_main): Call check2.
	* sysdeps/x86_64/multiarch/strcmp.S: Properly cross page boundary.

2011-03-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12587]
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word):
	Handle cache information in CPU leaf 4.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-18  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12583]
	* posix/fnmatch.c (fnmatch): Check size of pattern in wide
	character representation.
	Partly based on a patch by Tomas Hoger <thoger@redhat.com>.

2011-03-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnanf.S (isnanf): Fix
	END(__isnan) to END(__isnanf) to match function entry point/label
	EALIGN(__isnanf,...).

2011-03-10  Jakub Jelinek  <jakub@redhat.com>

	* wcsmbs/wchar.h (wmemcmp): Remove __restrict qualifiers.

2011-03-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12510]
	* elf/dl-lookup.c (do_lookup_x): For copy relocations of unique objects
	copy from the symbol referenced in the relocation to initialize the
	used variable.
	Patch by Piotr Bury <pbury@goahead.com>.
	* elf/Makefile: Add rules to build and tst-unique3.
	* include/bits/dlfcn.h: Remove _dl_mcount_wrapper_check declaration.
	* elf/tst-unique3.cc: New file.
	* elf/tst-unique3.h: New file.
	* elf/tst-unique3lib.cc: New file.
	* elf/tst-unique3lib2.cc: New file.

	* elf/Makefile: Don't run tst-execstack* tests of SELinux is enabled.

2011-03-10  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/sparc/sparc64/elf/configure.in (libc_cv_sparc64_tls): Add
	$LDFLAGS and -nostdlib -nostartfiles to linking step.  Change main
	to _start.

2011-03-06  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): If we are looking for the first
	to-be-loaded object along a path to loader is ld.so.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/memset.S: After aligning destination, code
	branches to different locations depending on the value of
	misalignment, when multiarch is enabled. Fix this.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>

	* sysdeps/x86_64/cacheinfo.c (init_cacheinfo):
	Set _x86_64_preferred_memory_instruction for AMD processsors.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for AMD processors.

2011-03-04  Ulrich Drepper  <drepper@gmail.com>

	* libio/fmemopen.c (fmemopen): Optimize a bit.

2011-03-03  Andreas Schwab  <schwab@redhat.com>

	* libio/fmemopen.c (fmemopen): Don't read past end of buffer.

2011-03-03  Roland McGrath  <roland@redhat.com>

	* setjmp/bits/setjmp2.h: Canonicalize comment formatting.

2011-02-28  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc64/multiarch/memset.S(__bzero): Call
	__bzero_ultra1 instead of __memset_ultra1.

2011-02-23  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12509]
	* include/link.h (struct link_map): Add l_orig_initfini.
	* elf/dl-load.c (_dl_map_object_from_fd): Free realname before
	returning unsuccessfully.
	* elf/dl-close.c (_dl_close_worker): If this is the last explicit
	close of a file loaded at startup, restore the original l_initfini
	list.
	* elf/dl-deps.c (_dl_map_object_deps): Don't free old l_initfini
	list, store the pointer.
	* elf/Makefile ($(objpfx)noload-mem): New rule.
	(noload-ENV): Define.
	(tests): Add $(objpfx)noload-mem.
	* elf/noload.c: Include <memcheck.h>.
	(main): Call mtrace.  Close all opened handles.

2011-02-17  Andreas Schwab  <schwab@redhat.com>

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Signal error early when
	dependencies are missing.

2011-02-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix __if_freereq crash: Unlike the generic version which uses free,
	Hurd needs munmap.
	* sysdeps/mach/hurd/ifreq.h: New file.

2011-01-27  Petr Baudis  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ 12445]#
	* stdio-common/vfprintf.c (vfprintf): Pass correct newlen
	to extend_alloca().
	* stdio-common/bug23.c: New file.
	* stdio-common/Makefile (tests): Add bug23.

2010-09-28  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12489]
	* elf/rtld.c (dl_main): Move setting of GLRO(dl_init_all_dirs)
	before performing relro protection.  At old place add assertion
	to make sure nothing changed.

2011-02-17  Nathan Sidwell  <nathan@codesourcery.com>
	    Glauber de Oliveira Costa  <glommer@gmail.com>

	* elf/elf.h: Add new ARM TLS relocs.

2011-02-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	(INTERNAL_VSYSCALL_NCS INTERNAL_SYSCALL_NCS): Remove erroneous (int)
	cast from r3.
	* sysdeps/wordsize-64/Makefile: New file.  Add tst-writev to
	'tests' variable.
	* sysdeps/wordsize-64/tst-writev.c: New file.

2011-02-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/Makefile: New file which adds
	-mno-vsx to the CFLAGS-rtld.c variable to avoid using VSX registers and
	insns in _dl_start to prevent a TOC reference before relocs are
	resolved.

2011-02-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12469]
	* Makeconfig: Remove RANLIB definition.
	* Makerules: Don't use RANLIB.
	* aclocal.m4: Remove ranlib test.
	* configure.in: No need to check for ranlib.
	* elf/rtld-Rules: Don't use RANLIB.

2011-02-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/i386/sysdep.h: Add _MACH_I386_SYSDEP_H inclusion
	protection macro.
	* sysdeps/mach/i386/thread_state.h: Add _MACH_I386_THREAD_STATE_H
	inclusion protection macro.

	* stdio-common/psiginfo.c (psiginfo): Check pinfo->si_signo against
	SIGRTMIN and SIGRTMAX and print information in that case only when
	SIGRTMIN is defined.

2011-02-11  Jakub Jelinek  <jakub@redhat.com>

	* stdio-common/printf-parsemb.c (__parse_one_specmb): Handle
	arginfo fn returning -1.

	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Ensure decimal
	and thousands string is zero terminated.

2011-02-03  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Sync with
	sysdeps/unix/sysv/linux/bits/socket.h.

2011-01-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/sched.h (__CPU_ZERO, __CPU_SET, __CPU_CLR, __CPU_ISSET)
	(__CPU_COUNT): Remove old macros.
	(__CPU_ZERO_S, __CPU_SET_S, __CPU_CLR_S, __CPU_ISSET_S)
	(__CPU_COUNT, __CPU_EQUAL_S, __CPU_OP_S, __CPU_ALLOC_SIZE)
	(__CPU_ALLOC, __CPU_FREE): Add macros.
	(__sched_cpualloc, __sched_cpufree): Add declarations.

2011-02-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd-client.h: Define MAX_TIMEOUT_VALUE.
	(struct datahead): Reuse 32 bits of the alignment for a TTL field.
	* nscd/aicache.c (addhstaiX): Return timeout of added value.
	(readdhstai): Return value of addhstaiX call.
	* nscd/grpcache.c (cache_addgr): Return timeout of added value.
	(addgrbyX): Return value returned by cache_addgr.
	(readdgrbyname): Return value returned by addgrbyX.
	(readdgrbygid): Likewise.
	* nscd/pwdcache.c (cache_addpw): Return timeout of added value.
	(addpwbyX): Return value returned by cache_addpw.
	(readdpwbyname): Return value returned by addhstbyX.
	(readdpwbyuid): Likewise.
	* nscd/servicescache.c (cache_addserv): Return timeout of added value.
	(addservbyX): Return value returned by cache_addserv.
	(readdservbyname): Return value returned by addservbyX:
	(readdservbyport): Likewise.
	* nscd/hstcache.c (cache_addhst): Return timeout of added value.
	(addhstbyX): Return value returned by cache_addhst.
	(readdhstbyname): Return value returned by addhstbyX.
	(readdhstbyaddr): Likewise.
	(readdhstbynamev6): Likewise.
	(readdhstbyaddrv6): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Return timeout of added value.
	(readdinitgroups): Return value returned by addinitgroupsX.
	* nscd/cache.c (readdfcts): Change return value of functions to time_t.
	(prune_cache): Keep track of timeout value of re-added entries.
	* nscd/connections.c (nscd_run_prune): Use MAX_TIMEOUT_VALUE.
	* nscd/nscd.h: Adjust prototypes of readd* functions.

2011-02-04  Roland McGrath  <roland@redhat.com>

	* nis/nis_server.c (nis_servstate): Use the right name for 0.
	(nis_stats): Likewise.
	* nis/nis_modify.c (nis_modify): Likewise.
	* nis/nis_remove.c (nis_remove): Likewise.
	* nis/nis_add.c (nis_add): Likewise.

	* elf/dl-object.c (_dl_new_object): Remove unused variable L.

	* posix/fnmatch_loop.c: Add some consts.

	* sysdeps/x86_64/multiarch/memset-x86-64.S: Add an #undef.

2011-02-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12460]
	* config.make.in (config-cflags-novzeroupper): Define.
	* configure.in: Substitute libc_cv_cc_novzeroupper.
	* elf/Makefile (AVX-CFLAGS): Define.
	(CFLAGS-tst-audit4.c): Replace -mavx with $(AVX-CFLAGS).
	(CFLAGS-tst-auditmod4a.c): Likewise.
	(CFLAGS-tst-auditmod4b.c): Likewise.
	(CFLAGS-tst-auditmod6b.c): Likewise.
	(CFLAGS-tst-auditmod6c.c): Likewise.
	(CFLAGS-tst-auditmod7b.c): Likewise.
	* sysdeps/i386/configure.in: Check -mno-vzeroupper.

2011-02-02  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-runtime.c (_dl_call_pltexit): Pass correct address of the
	function to the callback.
	Patch partly by Jiri Olsa <jolsa@redhat.com>.

2011-02-02  Andreas Schwab  <schwab@redhat.com>

	* shadow/sgetspent.c: Check return value of __sgetspent_r instead
	of errno.

2011-01-19  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Rewrite sorting determining order
	of constructors.
	* elf/dl-fini.c (_dl_sort_fini): Rewrite sorting determining order
	of destructors.
	(_dl_fini): Don't call _dl_sort_fini if there is only one object.

	[BZ #11724]
	* elf/Makefile: Add rules to build and run new test.
	* elf/tst-initorder.c: New file.
	* elf/tst-initorder.exp: New file.
	* elf/tst-initordera1.c: New file.
	* elf/tst-initordera2.c: New file.
	* elf/tst-initordera3.c: New file.
	* elf/tst-initordera4.c: New file.
	* elf/tst-initorderb1.c: New file.
	* elf/tst-initorderb2.c: New file.
	* elf/tst-order-a1.c: New file.
	* elf/tst-order-a2.c: New file.
	* elf/tst-order-a3.c: New file.
	* elf/tst-order-a4.c: New file.
	* elf/tst-order-b1.c: New file.
	* elf/tst-order-b2.c: New file.
	* elf/tst-order-main.c: New file.
	New test case by George Gensure <werkt0@gmail.com>.

2010-10-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	decoding ACE if AI_CANONIDN.

2011-01-18  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Build IFUNC tests unless multi-arch = no.

2011-01-17  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.13 release.
	* include/features.h: (__GLIBC_MINOR__): Bump to 13.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MADV_HUGEPAGE and
	MADV_NOHUGEPAGE.
	* sysdeps/unix/sysv/linux/ia64/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

	* posix/getconf.c: Update copyright year.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h: Define AF_CAIF, AF_ALG,
	PF_CAIF, and PF_ALG.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.

2011-01-16  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (tlsmod17a-modules, tlsmod18a-modules): Define.
	(modules-names): Use them.
	(ifunc-test-modules, ifunc-pie-tests): Define.
	(extra-test-objs): Add tlsmod17a-modules, tlsmod18a-modules,
	tst-pie1, ifunc-test-modules and ifunc-pie-tests objects.
	(test-extras): Likewise.
	($(patsubst %,$(objpfx)%.os,$(tlsmod17a-modules))): Use
	$(compile-command.c).
	($(patsubst %,$(objpfx)%.os,$(tlsmod18a-modules))): Likewise.
	(all-built-dso): Define.
	(check-textrel.out, check-execstack.out): Depend on it.

	* configure.in: Don't override --enable-multi-arch.

2011-01-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #6812]
	* nscd/hstcache.c (tryagain): Define.
	(cache_addhst): Return tryagain not notfound for temporary errors.
	(addhstbyX): Also set h_errno to TRY_AGAIN when memory allocation
	failed.

2011-01-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #10563]
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Use INLINE_SETXID_SYSCALL
	to make the syscall.
	* sysdeps/unix/sysv/linux/setgroups.c: New file.

	[BZ #12378]
	* posix/fnmatch_loop.c (FCT): When matching '[' keep track of beginning
	and fall back to matching as normal character if the string ends before
	the matching ']' is found.  This is what POSIX requires.
	* posix/testfnm.c: Adjust test result.
	* posix/globtest.sh: Adjust test result.  Add new test.
	* posix/tst-fnmatch.input: Likewise.
	* posix/tst-fnmatch2.c: Add new test.

2010-12-28  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (check-execstack): Revert last change.  Depend on
	check-execstack.h.
	(check-execstack.h): New target.
	(generated): Add check-execstack.h.
	* elf/check-execstack.c: Include "check-execstack.h".
	(main): Revert last change.
	(handle_file): Return zero if GNU_STACK is absent and
	DEFAULT_STACK_PERMS doesn't include PF_X.

2011-01-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/posix/spawni.c (__spawni): Don't fail if close file action
	in child fails because the descriptor is already closed.
	* include/sys/resource.h: Add libc_hidden_proto for getrlimit64.
	* sysdeps/unix/sysv/linux/getrlimit64.c: Add libc_hidden_def.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Likewise.

	[BZ #12397]
	* sysdeps/unix/sysv/linux/mkdirat.c (mkdirat): Fix handling of missing
	syscall.

	[BZ #10484]
	* nss/nss_files/files-hosts.c (HOST_DB_LOOKUP): Handle overflows of
	temporary buffer used to handle multi lookups locally.
	* include/alloca.h: Add libc_hidden_proto for __libc_alloca_cutoff.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-dst.h (DL_DST_REQUIRED): Allow l_origin to be NULL when
	loader is ld.so.

2011-01-10  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/i386/Makefile: stdlib/cxa_finalize.c needs 16-byte stack
	alignment for SSE2.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12394]
	* stdio-common/printf_fp.c (__printf_fp): Add more room for grouping
	characters.  When rounding increased number of integer digits recompute
	number of groups.
	* stdio-common/tst-grouping.c: New file.
	* stdio-common/Makefile: Add rules to build and run tst-grouping.

2011-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/select.h: Don't use asm code for __FD_SET,
	__FD_CLR, and __FS_ISSET.  gcc generates better code on its own.

	* sysdeps/x86_64/bits/select.h: Mark value of __FD_SET and __FD_CLR as
	void.
	* bits/select.h: Likewise.

2011-01-08  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-01-04  David S. Miller  <davem@sunset.davemloft.net>

	[BZ #11155]
	* sysdeps/unix/sysv/linux/sparc/sparc64/fxstat.c: Use i386's
	implementation just like for lxstat, fxstatat, et al.

2010-12-27  Jim Meyering  <meyering@redhat.com>

	[BZ #12348]
	* posix/regexec.c (build_trtable): Return failure indication upon
	calloc failure.  Otherwise, re_search_internal could infloop on OOM.

2010-12-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12201]
	* sysdeps/unix/sysv/linux/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Use ../getrlimit64.c.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_PRLIMIT64.

	[BZ #12207]
	* malloc/malloc.c (do_check_malloc_state): Use fastbin macro.

	[BZ #12204]
	* string/xpg-strerror.c (__xpg_strerror_r): Return error code, not -1.
	* sysdeps/mach/xpg-strerror.c (__xpg_strerror_r): Likewise.

2010-12-15  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (NO_CTORS_DTORS_SECTIONS): Define.
	* configure.in: Define NO_CTORS_DTORS_SECTIONS if linker
	script has SORT_BY_INIT_PRIORITY.
	* elf/sofini.c: Remove `.ctors' and `.dtors' sections if
	NO_CTORS_DTORS_SECTIONS is defined.
	* elf/soinit.c: Likewise.
	* sysdeps/i386/init-first.c: Don't call __libc_global_ctors if
	NO_CTORS_DTORS_SECTIONS is defined.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c: Likewise.
	* sysdeps/sh/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/init-first.c: Likewise.

2010-12-24  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/vfprintf.c (vfprintf): If printf handlers are installed
	always use the slow path.

2010-12-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* elf/Makefile: (check-execstack): Replace $(native-compile) with a
	similar rule which adds the sysdep directories to the header search in
	order to pick up the correct platform stackinfo.h.
	* elf/check-execstack.c (main): Check DEFAULT_STACK_PERMS for PF_X and
	perform test if it is, otherwise return successfully without testing.
	* elf/dl-load.c (_dl_map_object_from_fd): Source stack_flags from
	DEFAULT_STACK_PERMS define in stackinfo.h.
	* elf/dl-support.c (_dl_stack_flags): Source from DEFAULT_STACK_PERMS
	defined in stackinfo.h.
	* elf/rtld.c (_dl_starting_up): Source ._dl_stack_flags from
	DEFAULT_STACK_PERMS defined in stackinfo.h.
	* sysdeps/i386/stackinfo.h: Define DEFAULT_STACK_PERMS with PF_X.
	* sysdeps/ia64/stackinfo.h: Likewise.
	* sysdeps/s390/stackinfo.h: Likewise.
	* sysdeps/sh/stackinfo.h: Likewise.
	* sysdeps/sparc/stackinfo.h: Likewise.
	* sysdeps/x86_64/stackinfo.h: Likewise.
	* sysdeps/powerpc/stackinfo.h: Define DEFAULT_STACK_PERMS without
	PF_X for powerpc64.  Retain PF_X for powerpc32.

2010-12-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/readdir_r.c (__READDIR_R): Compute reclen more
	accurately.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir_r.c: Define
	GETDENTS_64BIT_ALIGNED.

2010-12-14  Ulrich Drepper  <dreper@gmail.com>

	* sysdeps/i386/i686/multiarch/strcmp.S: Undo accidental checkin.

2010-12-10  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Only declare under
	_GNU_SOURCE.

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Add __restrict.
	* wcsmbs/bits/wchar2.h (__wmemmove_chk_warn, wmemmove, wmemset):
	Remove __restrict.
	(wcscpy, __wcpcpy_chk, __wcpcpy_alias, wcpcpy, wcsncpy, wcpncpy)
	(wcscat, wcsncat, __wcrtomb_chk, wcrtomb): Add __restrict.

2010-12-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11655]
	* stdlib/msort.c (qsort_r): Make sure both phys_pages and pagesize
	are initialized.

2010-12-09  Jakub Jelinek  <jakub@redhat.com>

	* string/bits/string3.h (memmove, bcopy): Remove __restrict.

2010-12-03  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2010-12-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S (STRCMP): Remove
	unused codes.

2010-11-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Relax ynf(10,0.75) test expectations.

2010-11-24  Andreas Schwab  <schwab@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Don't handle ttl == 0
	specially.
	(gaih_getanswer_slice): Likewise.

2010-10-20  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Fix up inline asm.

2010-05-31  Petr Baudis  <pasky@suse.cz>

	[BZ #11149]
	* elf/ldconfig.c (main): Allow aux_cache_file open()ing to fail
	silently even in the chroot mode.

2010-11-22  Ulrich Drepper  <drepper@gmail.com>

	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Optimize
	last patch a bit.  Pretty printing

2010-05-31  Petr Baudis <pasky@suse.cz>

	[BZ #10085]
	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Fix
	initialization of skip_initgroups_dyn.

2010-11-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

2010-11-16  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/sys/swap.h (SWAP_FLAG_DISCARD): Define.

2010-11-11  Andreas Schwab  <schwab@redhat.com>

	* posix/fnmatch_loop.c (NEW_PATTERN): Fix use of alloca.
	* posix/Makefile (tests): Add $(objpfx)tst-fnmatch-mem.
	(tst-fnmatch-ENV): Set MALLOC_TRACE.
	($(objpfx)tst-fnmatch-mem): New rule.
	(generated): Add tst-fnmatch-mem and tst-fnmatch.mtrace.
	* posix/tst-fnmatch.c (main): Call mtrace.

2010-11-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Support Intel processor model 6 and model 0x2c.

2010-11-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (__ieee754_sqrtl): Force
	  signed comparison.

2010-11-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12205]
	* string/test-strncasecmp.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.
	* sysdeps/i386/i686/multiarch/strcmp.S (nibble_ashr_use_sse4_2_exit):
	Support strcasecmp and strncasecmp.

2010-11-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12194]
	* sysdeps/i386/bits/byteswap.h: Avoid warning in __bswap_16.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2010-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memset.S: Check USE_MULTIARCH and USE_SSE2 for
	IFUNC support.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-x86-64.
	* sysdeps/x86_64/multiarch/bzero.S: New file.
	* sysdeps/x86_64/multiarch/cacheinfo.c: New file.
	* sysdeps/x86_64/multiarch/memset-x86-64.S: New file.
	* sysdeps/x86_64/multiarch/memset.S: New file.
	* sysdeps/x86_64/multiarch/memset_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for Intel processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Prefer_SSE_for_memop):
	Define.
	(index_Prefer_SSE_for_memop): Define.
	(HAS_PREFER_SSE_FOR_MEMOP): Define.

2010-11-04  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: New file.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: New file.

2010-11-03  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12191]
	* sysdeps/i386/i686/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.

	* sysdeps/x86_64/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.
	(init_cacheinfo): Set __x86_64_raw_data_cache_size,
	__x86_64_raw_data_cache_size_half, __x86_64_raw_shared_cache_size
	and __x86_64_raw_shared_cache_size_half.  Round
	__x86_64_data_cache_size_half, __x86_64_data_cache_size
	__x86_64_shared_cache_size_half and __x86_64_shared_cache_size,
	to multiple of 256 bytes.

2010-11-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12167]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Recognize new mangling
	of inacessible symlinks.  Verify result of symlink before returning it.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.
	Patch mostly by Miklos Szeredi <miklos@szeredi.hu>.

2010-10-28  Erich Ritz  <erichritz@gmail.com>

	* math/math.h (isinf): Fix typo in comment.

2010-11-01  Ulrich Drepper  <drepper@gmail.com>

	* po/da.po: Update from translation team.

2010-10-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/rtld.c (dl_main): Move assertion after the point where rtld map
	is added to the list.

2010-10-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-object.c (_dl_new_object): Don't append the new object to
	the global list here.  Move code to...
	(_dl_add_to_namespace_list): ...here.  New function.
	* elf/rtld.c (dl_main): Invoke _dl_add_to_namespace_list.
	* sysdeps/generic/ldsodefs.h (_dl_add_to_namespace_list): Declare.
	* elf/dl-load.c (lose): Don't remove the element from the list.
	(_dl_map_object_from_fd): Invoke _dl_add_to_namespace_list.
	(_dl_map_object): Likewise.

2010-10-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12159]
	* sysdeps/x86_64/multiarch/strchr.S: Fix propagation of search byte
	into all bytes of SSE register.
	Patch by Richard Li <richardpku@gmail.com>.

2010-10-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12140]
	* malloc/malloc.c (_int_free): Fill correct number of bytes when
	perturbing.

2010-10-20  Michael B. Brutman  <brutman@us.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c: Add support for ppca2 platform
	* sysdeps/powerpc/dl-procinfo.h: Add support for ppca2 platform
	* sysdeps/powerpc/powerpc32/a2/memcpy.S: New file.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/a2/Implies: New
	submachine.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/a2/Implies: Likewise.

2010-10-22  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_SECURE): Define.
	* elf/dl-load.c (_dl_map_object): Remove preloaded parameter.  Use
	mode & __RTLD_SECURE instead.
	(open_path): Rename preloaded parameter to secure.
	* sysdeps/generic/ldsodefs.h (_dl_map_object): Adjust declaration.
	* elf/dl-open.c (dl_open_worker): Adjust call to _dl_map_object.
	* elf/dl-deps.c (openaux): Likewise.
	* elf/rtld.c (struct map_args): Remove is_preloaded.
	(map_doit): Don't use it.
	(dl_main): Likewise.
	(do_preload): Use __RTLD_SECURE instead of is_preloaded.
	(dlmopen_doit): Add __RTLD_SECURE to mode bits.

2010-09-09  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (sysd-rules-patterns): Add rtld-%:rtld-%.
	(sysd-rules-targets): Remove duplicates.
	* elf/rtld-Rules ($(objpfx)rtld-%.os): Add pattern rules with
	rtld-%.$o dependency.

2010-10-18  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-open.c (dl_open_worker): Don't expand DST here, let
	_dl_map_object do it.

2010-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has
	fast fma builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/x86_64/bits/mathdef.h: Likewise.

	* bits/mathdef.h: Update copyright year.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.

2010-10-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has fast fma
	builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (FP_FAST_FMA): Define, ppc as
	multiply/add.
	(FP_FAST_FMAF): Likewise.

2010-10-15  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some new testcases.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: New file.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do multiplication by C already in long double.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do bitwise or of inexact bit into u.d.
	* sysdeps/ieee754/ldbl-64-128/s_fmal.c: New file.
	* sysdeps/i386/fpu/s_fmaf.S: Removed.
	* sysdeps/i386/fpu/s_fma.S: Removed.
	* sysdeps/i386/fpu/s_fmal.S: Removed.

2010-10-16  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add IEEE quad long double fmal tests.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.  Fix value
	of minimum denormal long double.

2010-10-14  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more tests.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle underflows
	correctly.

2010-10-15  Andreas Schwab  <schwab@redhat.com>

	* scripts/data/localplt-s390-linux-gnu.data: New file.
	* scripts/data/localplt-s390x-linux-gnu.data: New file.

2010-10-13  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some more fmaf and fma tests.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include ldbl-96 version
	instead of dbl-64.
	* sysdeps/i386/fpu/bits/mathinline.h (fma, fmaf, fmal): Remove
	inlines.
	* sysdeps/ieee754/ldbl-96/s_fma.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix exponent adjustment
	if one of x and y is very large and the other is subnormal.
	* sysdeps/s390/fpu/s_fmaf.c: New file.
	* sysdeps/s390/fpu/s_fma.c: New file.
	* sysdeps/powerpc/fpu/s_fmaf.S: New file.
	* sysdeps/powerpc/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_fma.S: New file.
	* sysdeps/unix/sysv/linux/s390/fpu/s_fma.c: New file.

2010-10-12  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more fmaf tests, add
	fma tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Fix Inf/Nan check.
	* sysdeps/ieee754/dbl-64/s_fma.c: New file.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include
	sysdeps/ieee754/dbl-64/s_fma.c instead of math/s_fma.c.
	* sysdeps/x86_64/multiarch/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fma.c: New file.

2010-10-12  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12078]
	* posix/regcomp.c (parse_branch): One more memory leak plugged.
	* posix/bug-regex31.input: Add test case.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	* posix/bug-regex31.c: Rewrite to run multiple tests from stdin.
	* posix/bug-regex31.input: New file.

	[BZ #12078]
	* posix/regcomp.c (parse_branch): Free memory when allocation failed.
	(parse_sub_exp): Fix last change, use postorder.

	* posix/bug-regex31.c: New file.
	* posix/Makefile: Add rules to build and run bug-regex31.

	* posix/regcomp.c (parse_bracket_exp): Add missing re_free calls.

	[BZ #12078]
	* posix/regcomp.c (parse_sub_exp): Free tree data when it is not used.

	[BZ #12108]
	* stdio-common/psiginfo.c (psiginfo): Don't expext SIGRTMIN..SIGRTMAX
	to have entries in sys_siglist.

	[BZ #12093]
	* sysdeps/unix/sysv/linux/check_pf.c (__check_pf): ->ifa_addr might
	be NULL.

2010-10-07  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add 2 fmaf tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: New file.
	* sysdeps/i386/i686/multiarch/s_fmaf.c: Include
	sysdeps/ieee754/dbl-64/s_fmaf.c instead of math/s_fmaf.c.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.
	* include/fenv.h (feupdateenv, fetestexcept): Add libm_hidden_proto.
	* math/feupdateenv.c (feupdateenv): Add libm_hidden_ver.
	* sysdeps/i386/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/x86_64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Add libm_hidden_def.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* math/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/ia64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/i386/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/s390/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/powerpc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/x86_64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sparc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12107]
	* stdio-common/psiginfo.c (psiginfo): Terminate all strings with
	newline.

2010-10-06  Ulrich Drepper  <drepper@gmail.com>

	* string/bug-strstr1.c: New file.
	* string/Makefile: Add rules to build and run bug-strstr1.

2010-10-05  Eric Blake  <eblake@redhat.com>

	[BZ #12092]
	* string/str-two-way.h (two_way_long_needle): Always clear memory
	when skipping input due to the shift table.

2010-10-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12005]
	* malloc/mcheck.c: Handle large requests.

	[BZ #12077]
	* sysdeps/x86_64/strcmp.S: Fix handling of remaining bytes in buffer
	for strncmp and strncasecmp.
	* string/stratcliff.c: Add tests for strcmp and strncmp.
	* wcsmbs/wcsatcliff.c: Adjust for stratcliff change.

2010-09-28  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fpu_control.h: Add 'extern "C"' protection to
	__set_fpscr.

2010-09-30  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux_fsinfo.h (BTRFS_SUPER_MAGIC): Define.
	(CGROUP_SUPER_MAGIC): Define.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle btrfs and cgroup file systems.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_filesize_max):
	Likewise.

2010-09-27  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/rtld-memset.c: New file.
	* sysdeps/powerpc/powerpc64/rtld-memset.c: New file.

2010-09-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #12067]
	* sysdeps/s390/s390-32/elf/start.S: Fix address calculation when
	trying to locate the ELF header.

2010-09-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #11611]
	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS):
	Mask out sign-bit copies when constructing f_fsid.

2010-09-24  Petr Baudis <pasky@suse.cz>

	* debug/stack_chk_fail_local.c: Add missing licence exception.
	* debug/warning-nop.c: Likewise.

2010-09-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): When
	implementing getdents64 using getdents syscall, set d_type if
	__ASSUME_GETDENTS32_D_TYPE.

2010-09-16  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-close.c (free_slotinfo, free_mem): Move to...
	* elf/dl-libc.c (free_slotinfo, free_mem): ... here.

2010-09-21  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12037]
	* posix/unistd.h: Undo change of feature selection for ftruncate from
	2010-01-11.

2010-09-20  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Fix another typo in x86-64 strncasecmp limit
	detection.

2010-09-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add
	fanotify_mark.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.

2010-09-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/s390-32/__longjmp.c (__longjmp): Define register
	variables after CHECK_SP call.
	* sysdeps/s390/s390-64/__longjmp.c (__longjmp): Likewise.

2010-09-13  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>

	* elf/rtld.c (dl_main): Set GLRO(dl_init_all_dirs) just before
	re-relocationg ld.so.
	* elf/dl-support.c (_dl_non_dynamic_init): And here after the
	_dl_init_paths call.
	* elf/dl-load.c (_dl_init_paths).  Don't set GLRO(dl_init_all_dirs)
	here anymore.

2010-09-14  Ulrich Drepper  <drepper@redhat.com>

	* resolv/res_init.c (__res_vinit): Count the default server we added.

2010-09-08  Chung-Lin Tang  <cltang@codesourcery.com>
	    Ulrich Drepper  <drepper@redhat.com>

	[BZ #11968]
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(____longjmp_chk): Use %ebx for saving value across system call.
	Add unwind info.

2010-09-06  Andreas Schwab  <schwab@redhat.com>

	* manual/Makefile: Don't mix pattern rules with normal rules.

2010-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* debug/vdprintf_chk.c (__vdprintf_chk): Remove undefined
	operation.
	* libio/iofdopen.c (_IO_new_fdopen): Likewise.
	* libio/iofopncook.c (_IO_cookie_init): Likewise.
	* libio/iovdprintf.c (_IO_vdprintf): Likewise.
	* libio/oldiofdopen.c (_IO_old_fdopen): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.

2010-09-04  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11979]
	* iconvdata/gconv-modules: Remove EBCDIC-CP-AR2 alias from
	IBM-930, IBM-933, IBM-935, IBM-937, and IBM-939.

2010-09-02  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/add_n.S: Update from GMP 5.0.1.
	* sysdeps/x86_64/addmul_1.S: Likewise.
	* sysdeps/x86_64/lshift.S: Likewise.
	* sysdeps/x86_64/mul_1.S: Likewise.
	* sysdeps/x86_64/rshift.S: Likewise.
	* sysdeps/x86_64/sub_n.S: Likewise.
	* sysdeps/x86_64/submul_1.S: Likewise.

2010-09-01  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	This aligns bits/sched.h onto sysdeps/unix/sysv/linux/bits/sched.h:
	Define __sched_param instead of SCHED_* and sched_param when
	<bits/sched.h> is included with __need_schedparam defined.
	* bits/sched.h [__need_schedparam]
	(SCHED_OTHER, SCHED_FIFO, SCHED_RR, sched_param): Do not define.
	[!__defined_schedparam && (__need_schedparam || _SCHED_H)]
	(__defined_schedparam): Define to 1.
	(__sched_param): New structure, identical to sched_param.
	(__need_schedparam): Undefine.

2010-08-31  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h (epoll_create2): Delete.
	(epoll_create1): Declare.

	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Fix typo.

2010-08-31  Andreas Schwab  <schwab@redhat.com>

	[BZ #7066]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Fix array overflow when
	shifting retval into place.

2010-09-01  Ulrich Drepper  <drepper@redhat.com>

	* nis/rpcsvc/nis.h: Update copyright notice.
	* nis/rpcsvc/nis.x: Likewise.
	* nis/rpcsvc/nis_callback.h: Likewise.
	* nis/rpcsvc/nis_callback.x: Likewise.
	* nis/rpcsvc/nis_object.x: Likewise.
	* nis/rpcsvc/nis_tags.h: Likewise.
	* nis/rpcsvc/yp.h: Likewise.
	* nis/rpcsvc/yp.x: Likewise.
	* nis/rpcsvc/ypupd.h: Likewise.
	* nis/yp_xdr.c: Likewise.
	* nis/ypupdate_xdr.c: Likewise.

	* sunrpc/pm_getport.c (__libc_rpc_getport): New function.  This is
	mainly the body of pmap_getport.  Add parameters to specify timeouts.
	(pmap_getport): Use __libc_rpc_getport.
	* sunrpc/Versions: Export __libc_rpc_getport with GLIBC_PRIVATE.
	* include/rpc/pmap_clnt.h: Declare __libc_rpc_getport.
	* nis/nis_findserv.c: Remove pmap_getport copy. Use __libc_rpc_getport.

2010-08-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Add
	fanotify_mark.

2010-08-27  Roland McGrath  <roland@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile
	(CFLAGS-varshift.c): New variable.

2010-08-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/i386/i686/multiarch/varshift.S: File removed.
	* sysdeps/i386/i686/multiarch/varshift.c: New file.

	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Move to .text.slow section.

	* sysdeps/x86_64/strlen.S: Minimal code improvement.

2010-08-26  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strlen.S: Unroll the loop.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/x86_64/multiarch/strlen.S ((strlen): Return
	__strlen_no_bsf if bit_Slow_BSF is set.
	(__strlen_sse42): Removed.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strlen-sse4.S: New file.

2010-08-25  Roland McGrath  <roland@redhat.com>

	* sysdeps/x86_64/multiarch/varshift.S: File removed.
	* sysdeps/x86_64/multiarch/varshift.c: New file.
	* sysdeps/x86_64/multiarch/Makefile (CFLAGS-varshift.c): New variable.
	* sysdeps/x86_64/multiarch/varshift.h: Clean up decls, fix a cast.
	* sysdeps/x86_64/multiarch/memmove.c: Move decls around.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.

2010-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/i386/i686/multiarch/strlen.S (strlen): Return
	__strlen_sse2_bsf if bit_Slow_BSF is unset.
	(__strlen_sse2): Removed.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Set
	bit_Slow_BSF for Atom.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Slow_BSF): Define.
	(index_Slow_BSF): Define.
	(HAS_SLOW_BSF): Define.

2010-08-25  Ulrich Drepper  <drepper@redhat.com>

	[BZ #10851]
	* resolv/res_init.c (__res_vinit): When no server address at all
	is given default to loopback.

2010-08-24  Roland McGrath  <roland@redhat.com>

	* configure.in: Remove config-name.h generation.
	* configure: Regenerated.
	* config-name.in: File removed.
	* scripts/config-uname.sh: New file.
	* posix/Makefile (uname.c): Depend on $(objdir)config-name.h.
	($(objdir)config-name.h): New target.

	* sunrpc/rpc_parse.h: Avoid nested comment.

2010-08-24  Richard Henderson  <rth@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add varshift.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Likewise.
	* sysdeps/x86_64/multiarch/strcspn-c.c: Include "varshift.h".
	Replace _mm_srli_si128 with __m128i_shift_right.  Replace
	_mm_alignr_epi8 with _mm_loadu_si128.
	* sysdeps/x86_64/multiarch/strspn-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strstr.c: Include "varshift.h".
	(__m128i_shift_right): Removed.
	* sysdeps/i386/i686/multiarch/varshift.h: New file.
	* sysdeps/i386/i686/multiarch/varshift.S: New file.
	* sysdeps/x86_64/multiarch/varshift.h: New file.
	* sysdeps/x86_64/multiarch/varshift.S: New file.

2010-08-21  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move assembler checks to before sysdep dir checking.

2010-08-20  Petr Baudis  <pasky@suse.cz>

	* LICENSES: Sync the sunrpc license.

2010-08-19  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/auth_des.c: Update copyright notice once again.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/getrpcport.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_unix.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/des_crypt.h: Likewise.
	* sunrpc/rpc/key_prot.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/pmap_prot.h: Likewise.
	* sunrpc/rpc/pmap_rmt.h: Likewise.
	* sunrpc/rpc/rpc.h: Likewise.
	* sunrpc/rpc/rpc_des.h: Likewise.
	* sunrpc/rpc/rpc_msg.h: Likewise.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/rpc/svc_auth.h: Likewise.
	* sunrpc/rpc/types.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sunrpc/rpc_clntout.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_cout.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_hout.c: Likewise.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_parse.c: Likewise.
	* sunrpc/rpc_parse.h: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_sample.c: Likewise.
	* sunrpc/rpc_scan.c: Likewise.
	* sunrpc/rpc_scan.h: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.
	* sunrpc/rpc_tblout.c: Likewise.
	* sunrpc/rpc_util.c: Likewise.
	* sunrpc/rpc_util.h: Likewise.
	* sunrpc/rpcinfo.c: Likewise.
	* sunrpc/rpcsvc/bootparam_prot.x: Likewise.
	* sunrpc/rpcsvc/key_prot.x: Likewise.
	* sunrpc/rpcsvc/klm_prot.x: Likewise.
	* sunrpc/rpcsvc/mount.x: Likewise.
	* sunrpc/rpcsvc/nfs_prot.x: Likewise.
	* sunrpc/rpcsvc/nlm_prot.x: Likewise.
	* sunrpc/rpcsvc/rex.x: Likewise.
	* sunrpc/rpcsvc/rstat.x: Likewise.
	* sunrpc/rpcsvc/rusers.x: Likewise.
	* sunrpc/rpcsvc/sm_inter.x: Likewise.
	* sunrpc/rpcsvc/spray.x: Likewise.
	* sunrpc/rpcsvc/yppasswd.x: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

	* sysdeps/x86_64/multiarch/strcmp.S: Fix two typos in strncasecmp
	handling.

2010-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S [!SHARED]: Fix SSE4.2 check.

2010-08-19  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: New file.

2010-07-26  Anton Blanchard  <anton@samba.org>

	* malloc/malloc.c (sYSTRIm): Replace divide and multiply with mask.
	* malloc/arena.c (heap_trim): Likewise.

2010-08-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add entry for fanotify_init
	here.  Not...
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: ...here...
	* sysdeps/unix/sysv/linux/i386/syscalls.list: ... orhere.

2010-08-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/elf/Makefile: New file.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/sys/fanotify.h: Remove third argument
	from fanotify_init.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.

2010-08-15  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Use correct register for fourth parameter
	of strncasecmp_l.
	* sysdeps/multiarch/strcmp.S: Likewise.

2010-08-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strncase_l-nonascii.
	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strncase_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Prepare for use as strncasecmp.
	* sysdeps/x86_64/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncase_l.S: New file.
	* sysdeps/x86_64/strncase.S: New file.
	* sysdeps/x86_64/strncase_l-nonascii.c: New file.
	* sysdeps/x86_64/strncase_l.S: New file.
	* string/Makefile (strop-tests): Add strncasecmp.
	* string/test-strncasecmp.c: New file.

	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Add prototype to avoid
	warning.

	* sysdeps/x86_64/strcmp.S: Move definition of NO_NOLOCALE_ALIAS to...
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: ... here.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/prlimit.c: Make it compile.

2010-08-12  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/termios.h: Define EXTPROC.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Likewise.

2010-05-01  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Correct cfi for r24.
	* sysdeps/powerpc/powerpc64/bsd-_setjmp.S: Move contents..
	* sysdeps/powerpc/powerpc64/bsd-setjmp.S: ..and these too..
	* sysdeps/powerpc/powerpc64/setjmp.S: ..to here..
	* sysdeps/powerpc/powerpc64/setjmp-common.S: ..and here, with some
	tidying.  Don't tail-call __sigjmp_save for static lib.
	* sysdeps/powerpc/powerpc64/sysdep.h (SAVE_ARG, REST_ARG): Correct
	save location.
	(CFI_SAVE_ARG, CFI_REST_ARG): New macros.
	(CALL_MCOUNT): Add eh info, and nop after bl.
	(TAIL_CALL_SYSCALL_ERROR): New macro.
	(PSEUDO_RET): Use it.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve):
	Correct save location of integer regs and cr.
	(_dl_profile_resolve): Correct cr save location.  Delete nops
	after bl when SHARED.  Reduce cfi size a little by better
	placement of cfi directives.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S (__copysign): Don't
	make a stack frame.  Instead use parm save area as a temp.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S (__brk): Don't
	make a stack frame.  Use TAIL_CALL_SYSCALL_ERROR.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Don't make a stack frame for parent, use parm save area.
	Increase child stack frame to 112 bytes.  Don't save unused reg,
	and adjust reg usage.  Set up cfi on error recovery and
	epilogue of parent, and use TAIL_CALL_SYSCALL_ERROR, PSEUDO_RET.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext): Add dummy nop after jump to exit.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S (__socket):
	Use correct parm save area and cr save, reduce stack frame.
	Correct cfi for possible PSEUDO_RET frame setup.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork):
	Branch to local label emitted by PSEUDO_RET rather than
	__syscall_error.

2010-08-12  Andreas Schwab  <schwab@redhat.com>

	[BZ #11904]
	* locale/programs/locale.c (print_assignment): New function.
	(show_locale_vars): Use it.

2010-08-11  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/statfs.h (struct statfs): Add f_flags
	field.
	(struct statfs64): Likewise.
	(_STATFS_F_FLAGS): Define.
	* sysdeps/unix/sysv/linux/s390/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Don't define if __ASSUME_STATFS_F_FLAGS is defined.
	(ST_VALID): Define locally.
	(INTERNAL_STATVFS): If f_flags has ST_VALID set don't call
	__statvfs_getflags, use the provided value.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_STATFS_F_FLAGS.

	* sysdeps/unix/sysv/linux/sys/inotify.h (IN_EXCL_UNLINK): Define.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_headers):
	Add sys/fanotify.h.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export fanotify_init and
	fanotify_mask for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entries for
	fanotify_init and fanotify_mark.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sys/fanotify.h: New file.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_routines):
	Add prlimit.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export prlimit and
	prlimit64 for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/bits/resource.h: Declare prlimit and
	prlimit64.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entry for prlimit64
	syscall.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.lis: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.  Also
	add prlimit alias.
	* sysdeps/unix/sysv/linux/prlimit.c: New file.

	[BZ #11903]
	* sysdeps/generic/netinet/ip.h (IPTOS_CLASS): Fix definition.
	Patch by Evgeni Bikov <bikovevg@iitp.ru>.

	* nss/Makefile: Add rules to build and run tst-nss-test1.
	* shlib-versions: Add entry for libnss_test1.
	* nss/nss_test1.c: New file.
	* nss/tst-nss-test1.c: New file.

	* nss/nsswitch.c (__nss_database_custom): Define new variable.
	(__nss_configure_lookup): Set appropriate entry in
	__nss_configure_lookup to true.
	* nss/nsswitch.h: Define enum with indeces of databases in
	databases and __nss_database_custom arrays.  Declare
	__nss_database_custom.
	* grp/initgroups.c (internal_getgrouplist): Use __nss_database_custom
	to avoid using nscd when custom rules are installed.
	* nss/getXXbyYY_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

	* nss/nss_files/files-parse.c: Whitespace fixes.

2010-08-09  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11883]
	* posix/fnmatch.c: Keep track of alloca use and fall back on malloc.
	* posix/fnmatch_loop.c: Likewise.

2010-07-17  Andi Kleen  <ak@linux.intel.com>

	* sysdeps/i386/i386-mcount.S (__fentry__): Define.
	* sysdeps/x86_64/_mcount.S (__fentry__): Define.
	* stdlib/Versions (__fentry__): Add for GLIBC 2.13
	* Versions.def [GLIBC_2.13]: Add.

2010-08-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Also fail if tpwd after pwuid call is NULL.

2010-07-31  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdselect.c (_hurd_select): Round timeout up instead of down
	when converting to ms.

2010-06-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/ttyname.c (ttyname): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.

2010-07-31  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strcasecmp_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Add support to compile for
	strcasecmp.
	* sysdeps/x86_64/strcmp.S: Allow more flexible compiling of strcasecmp.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: New file.
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: New file.

2010-07-30  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp.S: Pretty printing.

	* string/Makefile (strop-tests): Add strcasecmp.
	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strcasecmp_l-nonascii.
	(gen-as-const-headers): Add locale-defines.sym.
	* sysdeps/x86_64/strcmp.S: Add support for strcasecmp implementation.
	* sysdeps/x86_64/strcasecmp.S: New file.
	* sysdeps/x86_64/strcasecmp_l.S: New file.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: New file.
	* sysdeps/x86_64/locale-defines.sym: New file.
	* string/test-strcasecmp.c: New file.

	* string/test-strcasestr.c: Test both ends of the range of characters.
	* sysdeps/x86_64/multiarch/strstr.c: Fix UCHIGH definition.

2010-07-29  Roland McGrath  <roland@redhat.com>

	[BZ #11856]
	* manual/locale.texi (Yes-or-No Questions): Fix example code.

2010-07-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp-ssse3.S: Avoid compiling the file
	for ld.so.

2010-07-27  Andreas Schwab  <schwab@redhat.com>

	* manual/memory.texi (Malloc Tunable Parameters): Document
	M_PERTURB.

2010-07-26  Roland McGrath  <roland@redhat.com>

	[BZ #11840]
	* configure.in (-fgnu89-inline check): Set and substitute
	gnu89_inline, not libc_cv_gnu89_inline.
	* configure: Regenerated.
	* config.make.in (gnu89-inline-CFLAGS): Use @gnu89_inline@.

2010-07-26  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strnlen.c: New file.
	* string/Makefile (strop-tests): Add strnlen.
	* string/tester.c (test_strnlen): Add a few more test cases.
	* string/tst-strlen.c: Better error reporting.

	* sysdeps/x86_64/strnlen.S: New file.

2010-07-24  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Use
	lower-latency instructions.

2010-07-23  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strcasestr.c: New file.
	* string/test-strstr.c: New file.
	* string/Makefile (strop-tests): Add strstr and strcasestr.
	* string/str-two-way.h: Don't undefine MAX.
	* string/strcasestr.c: Don't define alias if NO_ALIAS is defined.

2010-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcasestr-nonascii.
	(CFLAGS-strcasestr-nonascii.c): Define.
	* sysdeps/i386/i686/multiarch/strcasestr-nonascii.c: New file.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c (STRSTR_SSE42):
	Remove unused attribute.

2010-07-20  Roland McGrath  <roland@redhat.com>

	* elf/dl-sysdep.c (_dl_important_hwcaps): Add dsocaps mask to
	dl_hwcap_mask as well as dl_hwcap.  Without this, dsocaps matching in
	ld.so.cache was broken.  With it, there is no way to disable dsocaps
	like LD_HWCAP_MASK can disable hwcaps.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* sysdeps/mach/hurd/sendmsg.c (__libc_sendmsg): Fix memory leaks.

2010-07-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c: Rewrite to avoid indirect function
	call in strcasestr.
	* sysdeps/x86_64/multiarch/strcasestr.c: Declare
	__strcasestr_sse42_nonascii.
	* sysdeps/x86_64/multiarch/Makefile: Add rules to build
	strcasestr-nonascii.c.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: New file.

2010-06-15  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysignf.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysignf.S: New file.

2010-07-09  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Use __fcntl not
	fcntl.

2010-07-06  Andreas Schwab  <schwab@redhat.com>

	[BZ #11577]
	* elf/dl-version.c (match_symbol): Don't pass NULL occation to
	dl_signal_cerror.

2010-07-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Implement
	_PC_PIPE_BUF using F_GETPIPE_SZ.

2010-07-05  Roland McGrath  <roland@redhat.com>

	* manual/arith.texi (Rounding Functions): Fix rint description
	implicit in round description.

2010-07-02  Ulrich Drepper  <drepper@redhat.com>

	* elf/Makefile: Fix linking for a few tests to make recent linker
	happy.

2010-06-30  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(common-objpfx)libc_nonshared.a.

2010-06-21  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc32/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc32/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc64/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc64/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc64/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/powerpc/powerpc64/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/Implies: New file.

2010-06-25  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/memmove_chk.c (__memmove_chk): Renamed to ...
	(MEMMOVE_CHK): ...this.  Default to __memmove_chk.
	* string/memmove.c (memmove): Renamed to ...
	(MEMMOVE): ...this.  Default to memmove.
	* sysdeps/x86_64/memcpy.S: Use ENTRY_CHK and END_CHK.
	* sysdeps/x86_64/sysdep.h (ENTRY_CHK): Define.
	(END_CHK): Define.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memcpy-ssse3 mempcpy-ssse3 memmove-ssse3 memcpy-ssse3-back
	mempcpy-ssse3-back memmove-ssse3-back.
	* sysdeps/x86_64/multiarch/bcopy.S: New file .
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: New file.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memmove_chk.c: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Copy_Backward):
	Define.
	(index_Fast_Copy_Backward): Define.
	(HAS_ARCH_FEATURE): Define.
	(HAS_FAST_REP_STRING): Define.
	(HAS_FAST_COPY_BACKWARD): Define.

2010-06-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Restore proper fallback handling.

2010-06-19  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11701]
	* posix/group_member.c (__group_member): Correct checking loop.

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid): Handle
	OOM in getpwuid_r correctly.  Return error number when the caller
	should return, otherwise -1.
	(getlogin_r): Adjust to return also for result of __getlogin_r_loginuid
	call returning > 0 value.
	* sysdeps/unix/sysv/linux/getlogin.c (getlogin): Likewise.

2010-06-07  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile: Remove explicit dependencies on libc.so and
	libc_nonshared.a from targets in modules-names.

2010-06-02  Kirill A. Shutemov  <kirill@shutemov.name>

	* elf/dl-reloc.c: Flush cache after solving TEXTRELs if arch
	requires it.

2010-06-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcmp.S: New file
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: New file.

2010-06-02  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_nis/nis-initgroups.c (get_uid): Properly resize buffer.

2010-06-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Define F_SETPIPE_SZ
	and F_GETPIPE_SZ.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise

2010-06-14  Roland McGrath  <roland@redhat.com>

	* manual/libc.texinfo (@copying): Change to GFDL v1.3.

2010-06-07  Jakub Jelinek  <jakub@redhat.com>

	* libio/stdio.h (sscanf, vsscanf): Use __REDIRECT_NTH instead of
	__REDIRECT followed by __THROW.
	* wcsmbs/wchar.h (swscanf, vswscanf): Likewise.
	* posix/getopt.h (getopt): Likewise.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* hurd/lookup-at.c (__file_name_lookup_at): Accept
	AT_SYMLINK_FOLLOW in AT_FLAGS.  Fail with EINVAL if both
	AT_SYMLINK_FOLLOW and AT_SYMLINK_NOFOLLOW are present
	in AT_FLAGS.
	* hurd/hurd/fd.h (__file_name_lookup_at): Update comment.
	* sysdeps/mach/hurd/linkat.c (linkat): Pass O_NOLINK in FLAGS.

2010-05-28  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Exchange srdi for srwi.

2010-05-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #11640]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Properly check family and model.

2010-05-26  Takashi Yoshii  <takashi.yoshii.zj@renesas.com>

	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Fix iov[] size.

2010-05-24  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memset.S: POWER7 32-bit memset fix.

2010-05-21  Ulrich Drepper  <drepper@redhat.com>

	* elf/dl-runtime.c (_dl_profile_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-19  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-runtime.c (_dl_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add recvmmsg
	and internal_recvmmsg.
	* sysdeps/unix/sysv/linux/recvmmsg.c: New file.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S: New file.
	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_recvmmsg): Define.
	* sysdeps/unix/sysv/linux/syscalls.list (recvmmsg): Remove.

	* sunrpc/clnt_tcp.c (clnttcp_control): Add missing break.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2010-05-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sys/timex.h: Use __REDIRECT_NTH.

2010-05-17  Luis Machado  <luisgpm@br.ibm.com>

	POWER7 optimizations.
	* sysdeps/powerpc/powerpc64/power7/memset.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memset.S: New file.

2010-05-19  Ulrich Drepper  <drepper@redhat.com>

	* version.h: Update for 2.13 development version.

2010-05-12  Andrew Stubbs  <ams@codesourcery.com>

	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Really disable all
	exceptions.  Return 0.

2010-05-07  Roland McGrath  <roland@redhat.com>

	* elf/ldconfig.c (main): Add a const.

2010-05-06  Ulrich Drepper  <drepper@redhat.com>

	* nss/getent.c (idn_flags): Default to AI_IDN|AI_CANONIDN.
	(args_options): Add no-idn option.
	(ahosts_keys_int): Add idn_flags to ai_flags.
	(parse_option): Handle 'i' option to clear idn_flags.

	* malloc/malloc.c (_int_free): Possible race in the most recently
	added check.  Only act on the data if no current modification
	happened.

See ChangeLog.17 for earlier changes.
