2001-01-28  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Include <float.h>.

	* conform/conformtest.pl: Define $mustprepend{"stdio.h"}.
	* libio/stdio.h: Define va_list correctly.

	* conform/data/pthread.h-data: Make priority protocol related
	functions optional.  Fix typos.

	* posix/sched.h: Define sched_priority as __sched_priority.
	* sysdeps/generic/bits/sched.h (struct sched_param): Rename element
	to __sched_priority.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.

2001-01-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/clock_getcpuclockid.c: Include <time.h> instead
	of <sys/time.h>.

	* sysdeps/unix/stime.c: Include <stddef.h> for NULL.
	* sysdeps/unix/time.c: Likewise.

	* conform/data/time.h-data: CLK_TCK is not in XPG6.  Fix tzname entry.
	* sysdeps/mach/hurd/bits/time.h: Don't define CLK_TCK for XPG6.
	* sysdeps/mach/hurd/i386/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/time.h: Likewise.
	* time/time.h: Likewise.

	* conform/conformtest.pl (@headers): Add complex.h and tgmath.h.
	* conform/data/complex.h-data: New file.
	* conform/data/tgmath.h-data: New file.

	* conform/data/wchar.h-data: Add missing functions.

	* sysdeps/gnu/bits/utmpx.h: Define RUN_LVL only if __USE_GNU.

	* conform/data/termios.h-data: Add missing const in tcsetattr()
	prototype.

	* posix/sys/wait.h: Include <signal.h> and <sys/resource.h>.
	Don't define pid_t here.

	* conform/data/sys/utsname.h-data: Don't provide fixed array sizes.

	* conform/data/sys/time.h-data: Allow sys/select.h.
	* conform/data/sys/un.h-data: Fix typo.
	* time/sys/time.h: Don't include all of <time.h>, just struct timeval.
	* sysdeps/posix/clock_getres.c: Include <time.h> instead of
	<sys/time.h>.
	* sysdeps/unix/clock_nanosleep.c: Likewise.
	* sysdeps/unix/i386/clock_getcpuclockid.c: Likewise.
	* sysdeps/unix/i386/i586/clock_getres.c: Likewise.
	* sysdeps/unix/clock_gettime.c: Also include <time.h>.
	* sysdeps/unix/clock_settime.c: Likewise.

	* sysdeps/generic/pselect.c: Include <stddef.h> for NULL.
	* login/getutent.c: Likewise.
	* login/getutid.c: Likewise.
	* login/getutline.c: Likewise.

	* socket/sys/un.h: Define SUN_LEN only if __USE_MISC.

	* sysdeps/unix/sysv/linux/bits/statvfs.h: Change type of f_fsid field
	to unsigned long.  Add __f_unused.  Define _STATVFSBUF_F_UNUSED.
	* sysdeps/unix/sysv/linux/internal_statvfs.c: Adjust initialization of
	f_fsid field after change in struct statvfs.
	* sysdeps/unix/sysv/linux/alpha/bits/statvfs.h: New file.
	* sysdeps/unix/sysv/linux/ia64/bits/statvfs.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/statvfs.h: New file.

	* conform/data/sys/stat.h-data: Remove isfdtype.  Use
	optional-macro.

	* conform/data/sys/socket.h-data: Fix typos.  Correct getsockopt,
	recvfrom, send, and socketpair prototypes.  Add allow lines.
	* socket/sys/socket.h: Include <sys/uio.h>.
	Don't use fancy __SOCKADDR_ARG definition unless __USE_GNU.
	Fix type of second parameter of listen.
	Don't declare isfdtype unless __USE_MISC.
	* sysdeps/generic/listen.c: Fix type of second parameter of listen.
	* sysdeps/mach/hurd/listen.c: Likewise.
	* sysdeps/generic/bits/socket.h (struct sockaddr_storage): Define
	ss_family and __ss_family.
	* sysdeps/unix/sysv/aix/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	(struct msghdr): Change type of msg_iovlen to int and type of
	msg_controllen to socklen_t.
	* sysdeps/unix/sysv/linux/alpha/bits/socket.h: New file.
	* sysdeps/unix/sysv/linux/ia64/bits/socket.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/socket.h: New file.
	* inet/rcmd.c (rcmd_af): __ss_family is now ss_family.
	(rresvport_af): Likewise.

	* conform/data/sys/shm.h-data: SHMLBA is not required to by a constant.
	* conform/conformtest.pl: Implement handling of symbol.

	* signal/signal.h: Fix handling of __need_* symbols.
	* misc/sys/select.c: Define fd_set here.  Remove __fd_set.  Define
	fd_mask only if __USE_MISC.  Declare pselect for __USE_XOPEN2K.
	* include/sys/select.h: Use fd_set not __fd_set.
	* sysdeps/generic/bits/select.h: Likewise.
	* sysdeps/i386/bits/select.h: Likewise.
	* sysdeps/generic/bits/types.h: Don't define __fd_mask, __NFDBITS,
	__FDELT, __FDMASK, and __fd_set here.
	* sysdeps/unix/sysv/aix/bits/types.h: Likewise.
	* sysdeps/unix/sysv/hpux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.
	* time/sys/time.h: Define struct timeval before including <time.h>
	and <sys/select.h>.

	* conform/data/sys/time.h-data: fd_set is a typedef.
	* conform/data/sys/select.h-data: New file.
	* conform/data/sys/mman.h-data: Make typed mem stuff optional.
	* conform/conformtest.pl (@headers): Add sys/select.h.
	(type, optional-type): Unless testing a typedef instantiate object.
	Implement optional-function.

	* math/test-misc.c: Include <float.h>.

2001-01-27  Andreas Jaeger  <aj@suse.de>

	* misc/efgcvt_r.c: Include <float.h>.

2001-01-26  Ulrich Drepper  <drepper@redhat.com>

	* conform/data/stdlib.h-data: Account for XPG6 changes.
	* stdlib/stdlib.h (__random): Change return value type to long.
	(posix_memalign): Cleanup parameter names.
	(setenv, unsetenv): Make available for __USE_XOPEN2K.
	Change return type of unsetenv to int.
	(qecvt, qgcvt, qfcvt): Declare only if __USE_MISC.
	* include/stdlib.h: Change return type of unsetenv to int.
	Change return type of random to long int.
	* sysdeps/generic/setenv.c (unsetenv): Change return type to int.
	Return -1 and set errno if parameter is invalid.
	* stdlib/random.c (__random): Change return value type to long.

	* conform/data/stdio.h-data: Account for changes in XPG6.

	* conform/data/spawn.h-data: Correct posix_spawnattr_setflags
	prototype.

	* conform/conformtest.pl: Define $mustprepend{"signal.h"}.
	* conform/data/signal.h-data: Fix sigev_notify_function entry.
	Fix typo (SIGVALRM -> SIGVTALRM).
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Define sigev_notify_attr
	with real type.
	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/siginfo.h: Likewise.

	* conform/conformtest.pl: Implement optional-element.  Define
	$mustprepend{"sched.h"}.
	* conform/data/sched.h-data: Make sporadic scheduler definitions
	optional.

	* pwd/pwd.h: Don't define getpwent_r for XPG.

	* io/sys/poll.h: Define nfds_t and use it in poll prototype.
	* sysdeps/generic/poll.c: Use nfds_t type in function definition.
	* sysdeps/mach/hurd/poll.c: Likewise.
	* sysdeps/unix/bsd/poll.c: Likewise.
	* sysdeps/unix/sysv/linux/poll.c: Likewise.
	* sysdeps/unix/sysv/aix/poll.c: Likewise.
	* sysdeps/generic/bits/poll.h: Define NPOLLFILE only if __USE_MISC.
	* sysdeps/unix/sysv/linux/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/poll.h: Likewise.
	* conform/data/poll.h-data: Fix typo in poll prototype.

	* sysdeps/gnu/netinet/tcp.h: Define everything but TCP_ macros
	only if __USE_MISC.
	* conform/data/netinet/tcp.h-data: Reserved prefix TCP_.

	* sysdeps/gnu/net/if.h: Cleanup namespace.  Define IF_NAMESIZE.

	* inet/netinet/in.h: Make IPPROTO_ constants also macros.

	* conform/conformtest.pl: Implement optional-type.

	* resolv/netdb.h: Include <netinet/in.h> not <sys/socket.h>.  Include
	<rpc/netdb.h> only if __USE_MISC.  Include <stdint.h> instead of
	defining uint32_t here.  Define IPPORT_RESERVED.
	(struct hostent): Type of h_length element is int.
	(getnameinfo): Type of flags parameter is unsigned int.
	* inet/getnameinfo.c (getnameinfo): flags argument is unsigned.
	* conform/data/netdb.h-data: Add many missing definitions.

	* conform/conformtest.pl: Implement optional-macro.
	* conform/data/math.h-data: Update for XPG6.

	* math/math.h (HUGE): Define as FLT_MAX value but don't use
	FLT_MAX.  Don't include <float.h>.
	(MAXFLOAT): Likewise.

	* math/math.h: Define MATH_ERRNO and MATH_ERREXCEPT.

	* include/bits/xopen_lim.h: Don't define FOPEN_MAX here.

	* conform/data/limits.h-data: Mark constants as optional wherever
	appropriate.

	* posix/bits/posix2_lim.h: Set correct values for
	_POSIX2_COLL_WEIGHTS_MAX and _POSIX2_CHARCLASS_NAME_MAX.  Remove
	EQUIV_CLASS_MAX.

	* posix/bits/posix1_lim.h: Define _POSIX_TZNAME_MAX as 6.
	Required by POSIX.

	* intl/loadmsgcat.c: Include <locale.h.> for _LIBC.

	* conform/data/netinet/in.h-data: Add reserved prefixes.

	* conform/data/arpa/inet.h-data: Fix a few typos.

2001-01-26  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/strtol.c: Include <locale.h>
	* stdlib/strtod.c: Likewise
	* stdlib/strfmon.c: Likewise.
	* string/strcoll.c: Likewise.
	* string/strxfrm.c: Likewise.
	* wctype/wcfuncs_l.c: Likewise.
	* wctype/wctype_l.c: Likewise.
	* wctype/wctrans_l.c: Likewise.

	* include/bits/locale.h: New file.

2001-01-26  Ulrich Drepper  <drepper@redhat.com>

	* locale/langinfo.h: Correct logic in #ifs when defining YESSTR
	and NOSTR.

	* locale/Makefile (headers): Add bits/locale.h.
	* locale/langinfo.h: Don't include <locale.h>.  Include <bits/locale.h>
	and use __LC_ constants instead of LC_.
	* locale/locale.h: Include <bits/locale.h> and define LC_ constants
	using __LC_ constants.
	* locale/bits/locale.h: New file.
	* locale/loadlocale.c: Include <locale.h>.
	* locale/nl_langinfo.h: Likewise.

	* posix/glob.h: Cleanup namespace for non-_GNU_SOURCE case.

	* io/sys/stat.h: Define S_IFSOCK for XPG6.

	* conform/data/fcntl.h-data: posix_madvise is not expected here.

	* conform/conformtest.pl: Fix handling of macro-str.

	* conform/data/inttypes.h-data: Add missing definition and all of
	stdint.h-data.

	* sysdeps/unix/sysv/linux/sys/param.h (MAXSYMLINKS): Bump to 20.

2001-01-25  Ulrich Drepper  <drepper@redhat.com>

	* conform/conformtest.pl (@headers): Add stdint.h.
	* conform/data/stdint.h-data: New file.

	* conform/conformtest.pl: Recognize options --headers and
	--dialect.  Add dialect-specific CFLAGS.

	* conform/conformtest.pl: Implement handling of recursive
	allow-header.

	* conform/data/locale.h-data: Add new struct lconv members.

	* posix/wordexp.h: Correct definition of wordexp_t.
	* posix/wordexp.c: Moved to ...
	* sysdeps/generic/wordexp.c: ...here.  New file.
	* sysdeps/unix/sysv/linux/alpha/wordexp.c: New file.
	* sysdeps/unix/sysv/linux/ia64/wordexp.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/wordexp.c: New file.
	* sysdeps/unix/sysv/linux/alpha/Versions [libc] (GLIBC_2.2.2): Add
	wordexp.
	* sysdeps/unix/sysv/linux/ia64/Versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Versions: Likewise.

	* math/tgmath.h: Pretty printing.

	* math/Makefile (tests): Add test-tgmath.
	(CFLAGS-test-tgmath.c): New variable.
	* math/test-tgmath.c: New file.  Contributed by Jakub Jelinek.

	* conform/conformtest.pl: Handle allow-header in secondary headers
	correctly.

	* conform/data/fcntl.h-data: Mark symbols introduced in XPG6 with
	#ifdef.

	* conform/data/netinet/in.h-data: Use correct comment character.
	* conform/data/sys/stat.h-data: Likewise.

2001-01-25  Jakub Jelinek  <jakub@redhat.com>

	* math/tgmath.h (__TGMATH_BINARY_FIRST_REAL_ONLY,
	__TGMATH_BINARY_REAL_ONLY, __TGMATH_TERNARY_FIRST_SECOND_REAL_ONLY,
	__TGMATH_TERNARY_REAL_ONLY): Use proper arguments to
	__builtin_classify_type, add ##f suffixes where appropriate.
	(__TGMATH_UNARY_REAL_IMAG): Remove extraneous left parenthesis.
	(__TGMATH_BINARY_REAL_IMAG): Likewise, use proper arguments to
	__builtin_classify_type.
	(fma): Fix spelling of first argument.

2001-01-25  Ulrich Drepper  <drepper@redhat.com>

	* conform/data/unistd.h-data: Mark functions removed in XPG6
	correctly.

	* posix/unistd.h: Don't make functions removed in XPG6 available if
	__USE_XOPEN2K.

	* conform/conformtest.pl: Implement optional-constant.
	* conform/data/unistd.h-data: Use optional-constant wherever
	appropriate.

	* sysdeps/generic/bits/confname.h: Correct names of _SC_PBS
	constants and add _SC_STREAMS.
	* sysdeps/posix/sysconf.c (__sysconf): Likewise.

	* sysdeps/unix/sysv/linux/statvfs64.c: Rename to __statvfs64 and
	make old name weak alias.
	* sysdeps/generic/statvfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/fstatvfs64.c: Rename to __fstatvfs64 and
	make old name weak alias.
	* sysdeps/generic/fstatvfs64.c: Likewise.
	* include/sys/statvfs.h: New file.

	* sysdeps/generic/bits/confname.h: Define _PC_REC_INCR_XFER_SIZE,
	_PC_REC_MAX_XFER_SIZE, _PC_REC_MIN_XFER_SIZE, and
	_PC_REC_XFER_ALIGN.
	* sysdeps/posix/pathconf.c (__pathconf): Implement handling of
	_PC_REC_INCR_XFER_SIZE, _PC_REC_MAX_XFER_SIZE,
	_PC_REC_MIN_XFER_SIZE, and _PC_REC_XFER_ALIGN.
	* sysdeps/posix/fpathconf.c (__fpathconf): Likewise.

	* conform/conformtest.pl: Run Unix tests for XPG6.
	Implement handling of known namespace violations.
	Improve printing of results.

	* posix/unistd.h (usleep): Correct return type.
	* sysdeps/unix/sysv/linux/usleep.c: Correct return type.
	* sysdeps/unix/bsd/usleep.c: Correct return type.
	* sysdeps/mach/usleep.c: Correct return type.
	* sysdeps/generic/usleep.c: Correct return type.

	* posix/unistd.h (sync): Correct return type.
	* sysdeps/generic/sync.c: Likewise.
	* sysdeps/mach/hurd/sync.c: Likewise.

	* sysdeps/generic/bits/confname.h (_SC_IOV_MAX): New definition.

	* posix/unistd.h: Make seteuid and setegid available for XPG6.

	* wcsmbs/wchar.h: Get FILE definition for XPG5.

	* conform/data/ctype.h-data: Use correct comment form.
	* conform/data/errno.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/mqueue.h-data: Likewise.
	* conform/data/netdb.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.

2001-01-24  Ulrich Drepper  <drepper@redhat.com>

	* conform/data/wordexp.h-data: Fix typo.

	* conform/conformtest.pl: Handle allow-header correctly.

	* conform/data/time.h-data: Use correct comment form.

	* conform/conformtest.pl (checknamespace): Ignore #undef lines.

	* configure.in: Comment out binutils version test.

	* stdlib/strtod.c (str_to_mpn): Correct parsing of thousands
	separators.
	Reported by Lagardere Jean-Francois <LAGARDEREJ@thmulti.com>.

	* stdlib/tst-strtod.c (locale_test): New function.
	(main): Call locale_test.
	* stdlib/Makefile (tst-strtod-ENV): New variable.

2001-01-24  Mark Kettenis  <kettenis@gnu.org>

	* hurd/hurdsig.c (_hurdsig_getenv): Remove spurious innermost
	declaration of value such that we actually return the value of the
	environment variable.

2001-01-24  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/init-first.c: Remove extra __sysctl
	prototype.
	* sysdeps/unix/sysv/linux/dl-osinfo.h: Likewise.

	* include/sys/sysctl.h: New file.

2001-01-23  Andreas Jaeger  <aj@suse.de>

	* stdlib/Makefile ($(objpfx)isomac.out): Also pass sysincludes to
	isomac.

	* elf/dl-load.c (_dl_init_paths): Don't use strdupa in function
	arguments.  Reported by Jiri Kubicek <kubicek@bitsmart.com>,
	closes PR libc/2039.

	* manual/install.texi (Tools for Compilation): Change required
	binutils version.

2001-01-22  Andreas Jaeger  <aj@suse.de>

	* configure.in: Add test for new enough binutils version, move
	compiler/binutils test up.

	* Versions.def: Add version GLIBC_2.2.2.

2001-01-21  Ulrich Drepper  <drepper@redhat.com>

	* iconvdata/TESTS: UTF-8 test data for IBM932 and IBM943 are now
	available.
	* iconvdata/testdata/IBM932: New file.
	* iconvdata/testdata/IBM932..UTF8: New file.
	* iconvdata/testdata/IBM943: New file.
	* iconvdata/testdata/IBM943..UTF8: New file.
	Contributed by Masahide Washizawa <washi@jp.ibm.com>.

2001-01-21  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* sysdeps/unix/sysv/linux/powerpc/mmap64.c: Correctly mask offset.

2001-01-21  Ulrich Drepper  <drepper@redhat.com>

	* malloc/malloc.c: Remove a few unnecessary initializers of global
	variables.

2000-12-09  H.J. Lu  <hjl@gnu.org>

	* nss/Makefile (routines): Add digits_dots.
	* nss/Versions (libc): Add __nss_hostname_digits_dots to GLIBC_2.2.2.
	* nss/digits_dots.c (__nss_hostname_digits_dots): Turn template
	into a function.
	* nss/nsswitch.h (__nss_hostname_digits_dots): New internal NSS
	function.
	* nss/getXXbyYY.c (H_ERRNO_VAR_P): New definition.
	(TYPE_VAR_P): Likewise.
	(FLAGS_VAR): Likewise.
	(AF_VAR_P): Likewise.
	(INTERNAL (REENTRANT_NAME)): Call __nss_hostname_digits_dots ()
	instead of including digits_dots.c.
	* nss/getXXbyYY_r.c (H_ERRNO_VAR_P): New definition.
	(TYPE_VAR_P): Likewise.
	(FLAGS_VAR): Likewise.
	(AF_VAR_P): Likewise.
	(INTERNAL (REENTRANT_NAME)): Call __nss_hostname_digits_dots ()
	instead of including digits_dots.c.

2001-01-21  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/posix/getaddrinfo.c: Reduce .data size.

2001-01-21  Andreas Jaeger  <aj@suse.de>

	* elf/constload2.c: Add prototype for init.

2001-01-21  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/stdlib.h (drand48_data): Make available only for
	__USE_MISC.  Rename elements to protect namespace.  Change type
	and position of a and init element.
	* stdlib/drand48-iter.c: Don't handle unsigned short > 16 bit
	differently.  Adjust for drand48_data change.  Don't compute a here,
	it comes from drand48_data.
	* stdlib/lcong48_r.c: Don't handle unsigned short > 16 bit
	differently.  Adjust for drand48_data change.  Compute a here.
	* stdlib/srand48_r.c: Likewise.
	* stdlib/drand48.c: Adjust for drand48_data change.
	* stdlib/lrand48.c: Likewise.
	* stdlib/mrand48.c: Likewise.
	* stdlib/seek48.c: Likewise.
	* stdlib/drand48_r.c: Likewise.
	* stdlib/lrand48_r.c: Likewise.
	* stdlib/mrand48_r.c: Likewise.
	* stdlib/seed48_r.c: Likewise.  Don't handle unsigned short > 16 bit
	differently.
	* stdlib/erand48_r.c: Don't handle unsigned short > 16 bit differently.
	* stdlib/jrand48_r.c: Likewise.

	* po/sv.po: Update from translation team.

2001-01-21  Andreas Jaeger  <aj@suse.de>

	* stdio-common/vfprintf.c (vfprintf): Add casts.

2001-01-20  Ulrich Drepper  <drepper@redhat.com>

	* iconvdata/run-iconv-test.sh: Reorgnize a bit to allow running only
	the ASCII test.
	* iconvdata/TESTS: Add entries for IBM932 and IBM943.

	* iconvdata/Makefile (modules): Add IBM932 and IBM943.
	* iconvdata/gconv-modules: Add entries for IBM932 and IBM943.
	* iconvdata/ibm932.c: New file.
	* iconvdata/ibm932.h: New file.
	* iconvdata/ibm943.c: New file.
	* iconvdata/ibm943.h: New file.
	Patches by Masahide Washizawa <washi@jp.ibm.com>.

	* sysdeps/generic/dl-sysdep.c (_dl_sysdep_start): Fix typo
	preventing optimization from being done.  Set the correct type bit
	in seen.  Don't define and use _dl_base_addr unless
	NEED_DL_BASE_ADDR is defined.

	* io/ftw.c (ftw_dir): Add slash after directory name if there
	wasn't any.  Reported by loris <loris@iol.it>.
	* io/Makefile (tests): Add bug-ftw2.
	* io/bug-ftw2.c: New file.

2001-01-19  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/jrand48_r.c (__jrand48_r): Correct constructing of
	results.  Reported by Jeff Higham <jhigham@algorithmics.com>.
	* stdlib/tst-rand48.c: New file.
	* stdlib/Makefile (tests): Add tst-rand48.

	* locale/newlocale.c (__newlocale): Fix test for setting all
	categories.

2001-01-19  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/chroot.c (chroot): Revert 1999-02-27 changes,
	but change looking up the initial directory port in a similar way
	as done by _hurd_change_directory_port_from_name.
	* hurd/fchroot.c (fchroot): Likewise.

2001-01-18  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/dl-sysdep.c (_dl_sysdep_start): If HAVE_AUX_XID is
	defined don't look whether the AT_*ID values were set.
	If HAVE_AUX_PAGESIZE is defined don't look whether the pagesize is set.
	(_dl_show_auxv): Rewrite to avoid switch statement.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_AT_PAGESIZE for kernel >= 2.4.1.
	* sysdeps/unix/sysv/linux/ldsodefs.h: Define HAVE_AUX_XID.
	Define HAVE_AUX_PAGESIZE if __ASSUME_AT_PAGESIZE is defined.

	* sysdeps/unix/sysv/linux/fxstat64.c: Add one __builtin_expect.
	* sysdeps/unix/sysv/linux/lxstat64.c: Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c: Likewise.

	* elf/rtld.c (process_envvars): Call __strtoul_internal instead of
	strtoul.
	* elf/dl-minimal.c (strtol, __strtol_internal, strtoul): Removed.
	(__sigjmp_save): Set __mask_was_saved to zero since we don't save
	anything.
	* dlfcn/eval.c (__strtol_internal): Define here.
	(eval): Use __strtol_internal instead of strtol.

	* elf/elf.h: Add a few more EF_MIPS_* constants.

2001-01-17  Ulrich Drepper  <drepper@redhat.com>

	* manual/Makefile (chapters): Add debug.
	* manual/debug.texi: New file.
	* manual/examples/execinfo.c: New file.
	Patch by suckfish@ihug.co.nz.

2001-01-17  Andreas Schwab  <schwab@suse.de>

	* sysdeps/m68k/bits/byteswap.h (__bswap_32): Add cast to avoid
	invalid asm.

2001-01-17  Andreas Jaeger  <aj@suse.de>

	* nscd/connections.c (nscd_run): Use proper format specifier.

2001-01-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Move x86_cap_flags and
	x86_platforms data into new file after prepending _dl_.  Change
	users.
	* sysdeps/unix/sysv/linux/i386/dl-procinfo.c: New file.
	* sysdeps/unix/sysv/linux/i386/Dist: Add dl-procinfo.c.
	* sysdeps/unix/sysv/linux/i386/Makefile: Add rules to build
	dl-procinfo.c.

	* setjmp/setjmp.h: Cleanup definition of setjmp macro.

	* sysdeps/i386/elf/bsd-setjmp.S: Real implementation.
	* sysdeps/i386/elf/bsd-_setjmp.S: Removed.
	* sysdeps/i386/elf/setjmp.S (setjmp): Removed here.
	(_setjmp): Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Real implementation.
	* sysdeps/i386/bsd-setjmp.S: Real implementation.
	* sysdeps/i386/bits/setjmp.h: Remove PUSH_SIGNAL_MASK definition.
	* sysdeps/i386/setjmp.S: Remove PIC support.  This is the non-ELF
	version.

2001-01-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/sigcontextinfo.h (SIGCONTEXT): Fix
	misapplied last patch.

2001-01-15  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/random.c (__initstate): Clean up a cast.
	(__setstate): Likewise.

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Remove select
	syscall handling.  The generic Linux version should work.

2001-01-15  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sys/sendfile.h: Fix typo.

	* stdio-common/tstscanf.c (main): Add two testcases for '*' modifier.

2001-01-14  Jakub Jelinek  <jakub@redhat.com>

	* nss/getent.c (print_aliases, aliases_keys, ethers_keys,
	netgroup_keys, print_rpc, rpc_keys, print_shadow, shadow_keys):
	New functions.
	(group_keys, hosts_keys, network_keys, passwd_keys, protocols_keys):
	If number is 0, list all.
	(services_keys): Likewise.  Lookup aliases as well.
	(databases): New table.
	(build_doc): Prepare argp doc text with list of supported databases.
	(main): Change to table driven processing.

2001-01-14  Thorsten Kukuk <kukuk@suse.de>

	* sunrpc/xdr.c (xdr_long, xdr_u_long): Fix comments about these
	functions.

2001-01-03  Jakub Jelinek  <jakub@redhat.com>

	* sunrpc/xdr.c (xdr_long, xdr_u_long): Return FALSE if trying to
	encode value which does not fit in the 32bit type.

2001-01-15  Hiroyuki Machida <machida@sm.sony.co.jp>

	* sysdeps/unix/sysv/linux/mips/register-dump.h (REGISTER_DUMP):
	Change type of CTX to (struct sigcontext *).
	* sysdeps/unix/sysv/linux/mips/sigcontextinfo.h (GET_PC): Likewise.
	(GET_FRAME): Likewise.
	(GET_STACK): Likewise.
	(SIGCONTEXT): Likewise. Add 2nd arg _code.
	(SIGCONTEXT_EXTRA_ARGS): Add 2nd arg _code.

2001-01-13  Ulrich Drepper  <drepper@redhat.com>

	* manual/texinfo.tex: Update from upstream version.

2001-01-13  Jakub Jelinek  <jakub@redhat.com>

	* inet/ether_ntoh.c (lookup_function): Change arguments to match
	_nss_*_getntohost_r prototype.
	(ether_ntohost): Pass errno pointer to NSS function.

2001-01-12  Franz Sirl	<Franz.Sirl-kernel@lauterbach.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h (MS_SYNC): Fix value.
	(MAP_LOCKED): New definition.
	(MAP_NORESERVE): New definition.

2001-01-12  Ulrich Drepper  <drepper@redhat.com>

	* assert/assert.h: Use static_cast instead of C-style cast for C++.
	Patch by Enrico Scholz <enrico.scholz@informatik.tu-chemnitz.de>.

2001-01-12  Ben Collins	 <bcollins@debian.org>

	* sysdeps/generic/segfault.c (install_handler): Use access, not
	__access.

2001-01-12  Andreas Jaeger  <aj@suse.de>

	* posix/fnmatch_loop.c (FCT): Remove signed warnings.
	* posix/wordexp.c (do_parse_glob): Likewise.
	* sysdeps/posix/sigblock.c (__sigblock): Likewise.
	* sysdeps/posix/sigsetmask.c (__sigsetmask): Likewise.
	* elf/dl-open.c (_dl_open): Likewise.
	* elf/dl-close.c (_dl_close): Likewise.
	* elf/dl-load.c (_dl_map_object): Likewise.
	* iconv/iconv_prog.c (process_fd): Likewise.
	* stdio-common/vfscanf.c (_IO_vfscanf): Likewise.

	* locale/localeinfo.h (struct locale_data): Use __flexarr instead
	of a zero-length array.

2001-01-11  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/cxa_atexit.c (__cxa_atexit): Cast to (void *, int) func.
	* stdlib/cxa_finalize.c (__cxa_finalize): Add hidden second argument.
	* stdlib/cxa_on_exit.c: Remove.
	* stdlib/Makefile: Revert last patch.
	* stdlib/Versions: Likewise.
	* include/stdlib.h: Likewise.
	* stdlib/exit.h: Revert last patch.
	(struct exit_function): Add second argument to cxa fn.
	* stdlib/exit.c: Revert last patch.
	(exit): Add hidden second argument.

2001-01-11  H.J. Lu  <hjl@gnu.org>

	* elf/dl-libc.c (do_dlopen): Move DL_STATIC_INIT to ...
	* elf/dl-open.c (_dl_open): Here.
	* sysdeps/unix/sysv/linux/ia64/dl-static.c (_dl_static_lock):
	Make it static.
	(_dl_static_init): Initialize the variables every time when possible.
	* sysdeps/unix/sysv/linux/ia64/ldsodefs.h (DL_STATIC_INIT):
	Undefine it first.

2001-01-11  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/Makefile (routines): Add cxa_on_exit.
	* stdlib/Versions [libc] (GLIBC_2.2.1): Add __cxa_on_exit.
	* stdlib/cxa_on_exit.c: New file.
	* include/stdlib.h: Add prototype for __cxa_on_exit.
	* stdlib/exit.c: Handle ef_cxa2.
	* stdlib/exit.h (enum): Add ef_cxa2.
	(struct exit_function): Add cxa2.

	* Versions.def [ld]: Add GLIBC_2.2.1.

2001-01-10  H.J. Lu  <hjl@gnu.org>

	* elf/dl-libc.c (do_dlopen): Call DL_STATIC_INIT for static binaries.
	* sysdeps/unix/sysv/linux/ia64/Makefile (sysdep-dl-routines): Add
	dl-static.
	* sysdeps/unix/sysv/linux/ia64/Versions (ld): Add _dl_var_init.
	* sysdeps/generic/ldsodefs.h (DL_STATIC_INIT): Defined if not defined.
	* sysdeps/unix/sysv/linux/ia64/ldsodefs.h: New file.
	* sysdeps/unix/sysv/linux/ia64/dl-static.c: New file.
	* sysdeps/unix/sysv/linux/ia64/Dist: Add dl-static.c.

2001-01-11  Ulrich Drepper  <drepper@redhat.com>

	* libio/stdio.h: Remove definition of off_t.

2001-01-11  Andreas Jaeger  <aj@suse.de>

	* wcsmbs/tst-mbrtowc.c (utf8_test): New function by Markus Kuhn
	<mkuhn@acm.org>.

2001-01-10  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/Makefile (distribute): Add errqueue.h.

2001-01-10  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ia64/dl-machine.h (TRAMPOLINE_TEMPLATE): Also preserve
	r9, r10 and r11 for language specific registers.

2001-01-10  Jakub Jelinek  <jakub@redhat.com>

	* sunrpc/clnt_udp.c (clntudp_bufcreate): Set IP_RECVERR on the
	UDP socket.
	(clntudp_call): Handle MSG_ERRQUEUE.
	* sysdeps/generic/errqueue.h: New file.
	* sysdeps/unix/sysv/linux/errqueue.h: New file.

2001-01-10  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/ia64/syscalls.list (s_getpagesize): Removed.

2001-01-10  Joseph S. Myers  <jsm28@cam.ac.uk>

	* CONFORMANCE: Update.

2001-01-09  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/elf/backtracesyms.c (__backtrace_symbols):
	Minimal cleanups.  Add assert to ensure memory handling is correct.

	* manual/conf.texi (File Minimums): Fix _POSIX_PATH_MAX value.
	Reported by Ben Collins <bcollins@debian.org>.

	* time/strftime.c (my_strftime): Mark previous GNU extensions
	which are now in C99 as such.

2001-01-08  Ulrich Drepper  <drepper@redhat.com>

	* elf/rtld.c (process_envvars): Place output files for profiling
	in SUID binaries in /var/profile.

	* elf/dl-load.c (_dl_map_object): Don't look in cache for
	preloading in SUID binaries.

	* elf/dl-profile.c (_dl_start_profile): Open the output file with
	O_NOFOLLOW if possible.

	* include/stdlib.h: Add __posix_openpt declaration.
	* stdlib/stdlib.h: Add posix_openpt declaration.
	* login/Versions: Add posix_openpt for GLIBC_2.2.1.
	* sysdeps/generic/getpt.c: Define posix_openpt.
	* sysdeps/unix/bsd/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/getpt.c: Likewise.

	* time/Makefile (tests): Add tst-mktime.
	* time/tst-mktime.c: New file.

	* posix/tst-dir.c (main): One more mkdir() test.

	* sysdeps/unix/sysv/linux/ia64/getpagesize.c (__getpagesize):
	Remove getpagesize syscall.  We assume that the pagesize is always
	determined from the auxiliary vector.

	* intl/dcigettext.c: Fix a few warnings.
	Patch by Bruno Haible <haible@ilog.fr>.

2001-01-08  Andreas Jaeger  <aj@suse.de>

	* io/test-lfs.c (do_test): Check lseek64 return for EINVAL.
	Reported by Joseph S. Myers <jsm28@cam.ac.uk>.

2001-01-08  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/segfault.c (install_handler): Check output file
	name with access().

	* resolv/res_query.c: Use simply getenv() for HOSTALIASES.
	* sysdeps/generic/unsecvars.h (UNSECURE_ENVVARS): Add HOSTALIASES.

	* sysdeps/generic/unsecvars.h (UNSECURE_ENVVARS): Add missing comma.

	* malloc/memusage.c (me): Use access() to determine whether we
	should write the output file or not.

	* libio/bits/stdio.h (printf): Define macro to map printf call to
	fprintf which gcc can optimize.
	* stdio-common/printf.c: Undefine printf.

2001-01-07  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/bits/byteswap.h (__bswap_64): Partly revert last
	patch.	We must use unsigned int for l member of union.

	* sysdeps/powerpc/elf/libc-start.c (__libc_start_main): Don't call
	_dl_aux_init for shared libraries.

	* sysdeps/unix/sysv/linux/glob64.c: Moved to ...
	* sysdeps/gnu/glob64.c: ...here.  New file.

2001-01-07  Ben Collins	 <bcollins@debian.org>

	* manual/examples/longopt.c: Make the "struct option" a little
	more like it should be, adding usage of required_argument,
	noargument and such, and also setting the options string right.

	* manual/sysinfo.texi (Load Average): New section, documents
	getloadavg().

2001-01-06  Ulrich Drepper  <drepper@redhat.com>

	* version.h (VERSION): Bump to 2.2.1.

	* sysdeps/unix/sysv/linux/mips/Dist: Remove sys/acct.h.
	* sysdeps/alpha/Dist: Add alphaev6/stxncpy.S and alphaev6/stxcpy.S.
	* sysdeps/unix/sysv/aix/Dist: Add uitrunc.c, savef.S, and restf.S.
	* dlfcn/Makefile (distribute): Add errmsg1mod.c.
	* Makefile (distribute): Add include/libc-internal.h.
	* libio/Makefile (distribute): Avoid overwriting.

	* iconvdata/ibm937.c (BODY to IBM937): Correct several mistakes in
	buffer and table handling.

2001-01-05  H.J. Lu  <hjl@gnu.org>

	* elf/dl-support.c (non_dynamic_init): Move the auxiliary
	vector checking to ...
	(_dl_aux_init): Here. New function. Defined only if
	HAVE_AUX_VECTOR is defined.

	* sysdeps/generic/libc-start.c (__libc_start_main): Call
	_dl_aux_init for static binaries if HAVE_AUX_VECTOR is defined.

	* sysdeps/powerpc/elf/libc-start.c (__libc_start_main): Call
	_dl_aux_init.

	* sysdeps/unix/sysv/linux/ldsodefs.h (DL_FIND_AUXV): Removed.
	(HAVE_AUX_VECTOR): Defined.
	(_dl_aux_init): Declared.

2001-01-05  Ben Collins	 <bcollins@debian.org>

	* manual/string.texi (Finding Tokens in a String): Document XPG
	basename() and dirname(), as well as GNU basename().

2001-01-05  Jakub Jelinek  <jakub@redhat.com>

	* Makeconfig (preprocess-version): Replace -traditional with
	-x assembler-with-cpp.

2001-01-05  Joseph S. Myers  <jsm28@cam.ac.uk>

	* math/bits/cmathcalls.h: Don't define inline cimag, creal or conj
	for GCC 2.97 or later.

2001-01-05  Ben Collins	 <bcollins@debian.org>

	* manual/stdio.texi (getline): Clarify the return value in the
	case of EOF being reached before a newline.

2001-01-04  Jakub Jelinek  <jakub@redhat.com>

	* sunrpc/pmap_clnt.c (__get_myaddress): Return TRUE if successful,
	FALSE otherwise.
	(pmap_set, pmap_unset): Check __get_myaddress return value.

2001-01-05  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/generic/netinet/if_ether.h: Include <sys/types.h>.
	(struct ether_addr): Declare ether_addr_octet member as
	`u_int8_t'.  Add __attribute__ ((__packed__)).

2001-01-06  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/readdir64.c: New file.
	* sysdeps/mach/hurd/readdir64_r.c: New file.

2001-01-07  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/fstatvfs.c (fstatvfs): Add comment about
	`struct statfs' and `struct statvfs' being identical.
	* sysdeps/mach/hurd/statvfs.c (statvfs): Likewise.

2001-01-06  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/fstatfs64.c: New file.
	* sysdeps/mach/hurd/fstatvfs64.c: New file.
	* sysdeps/mach/hurd/statfs64.c: New file.
	* sysdeps/mach/hurd/statvfs64.c: New file.
	* sysdeps/mach/hurd/statfsconv.c: New file.
	* sysdeps/mach/hurd/Dist: Add statfsconv.c.

2001-01-06  Ulrich Drepper  <drepper@redhat.com>

	* iconv/skeleton.c: Reset outbuf for next round of the loop.
	Reported by Owen Taylor <otaylor@redhat.com>.
	* iconv/Makefile (tests): Add tst-iconv3.
	* iconv/tst-iconv3.c: New file.

	* iconvdata/ibm930.c: Fix handling of state.  Optimize a bit.
	* iconvdata/ibm933.c: Likewise.
	* iconvdata/ibm935.c: Likewise.
	* iconvdata/ibm937.c: Likewise.
	* iconvdata/ibm939.c: Likewise.
	* iconvdata/ibm930.h: Adjust single byte table for optimization.
	* iconvdata/ibm933.h: Likewise.
	* iconvdata/ibm935.h: Likewise.
	* iconvdata/ibm939.h: Likewise.

	* iconvdata/testdata/IBM930: Add misssing SI.
	* iconvdata/testdata/IBM933: Likewise.
	* iconvdata/testdata/IBM935: Likewise.
	* iconvdata/testdata/IBM937: Likewise.
	* iconvdata/testdata/IBM939: Likewise.

2001-01-06  Andreas Jaeger  <aj@suse.de>

	* configure.in: Check for old add-ons that shouldn't be used with
	current glibc anymore.

2001-01-06  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/readdir_r.c (__readdir_r): Return error number
	instead of -1 on failure.  Don't forget to copy file name into
	*ENTRY if successful.  Set *RESULT to NULL upon reaching the end
	of the directory.

2001-01-06  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/xstatconv.c (xstat64_conv): Don't forget to
	copy st_atime member.

2001-01-05  Ulrich Drepper  <drepper@redhat.com>

	* io/ftw.c (ftw_dir): Don't add a second slash at the beginning
	for searches from the root directory.
	Reported by loris <loris@iol.it> [PR libc/1991].
	* io/Makefile (tests): Add bug-ftw1.
	* io/bug-ftw1.c: New file.

	* elf/dl-support.c (non_dynamic_init): Don't define DL_FIND_AUXV
	if it is not available.	 Instead use it only if it is available.
	* sysdeps/unix/sysv/linux/ldsodefs.h: New file.

	* iconv/gconv_simple.c (internal_ics4_loop): Correct test for
	overflowing output buffer.
	(internal_ucs4_loop_unaligned): Likewise.
	(ucs4_internal_loop): Likewise.
	(ucs4_internal_loop_unaligned): Likewise.
	(internal_ucs4le_loop): Likewise.
	(internal_ucs4le_loop_unaligned): Likewise.
	(ucs4le_internal_loop): Likewise.
	(ucs4le_internal_loop_unaligned): Likewise.
	Reported by Owen Taylor <otaylor@redhat.com>.
	* iconv/Makefile (tests): Add tst-iconv2.
	* iconv/tst-iconv2.c: New file.

2001-01-04  H.J. Lu  <hjl@gnu.org>

	* elf/dl-support.c (DL_FIND_AUXV): New.	 Defined if not defined.
	(_dl_clktck): Declared.
	(non_dynamic_init): Take 3 arguments.
	Set _dl_pagesize, _dl_platform and _dl_clktck from AUX.

2001-01-01  Bruno Haible  <haible@clisp.cons.org>

	Finish implementation of plural form handling.
	* intl/dcigettext.c (known_translation_t): Rename 'domain' field to
	'domainname'.  Remove 'plindex' field. Add 'domain' and
	'translation_length' fields.
	(transcmp): Don't compare 'plindex' fields.
	(plural_lookup): New function.
	(DCIGETTEXT): Change cache handing in the plural case.	Don't call
	plural_eval before the translation and its catalog file have been
	found. Remove plindex from cache key.  Add 'translation_length' and
	'domain' to cache result.
	(_nl_find_msg): Remove index argument, return length of translation
	to the caller instead.	Weaken comparison of string lengths, to account
	for plural entries.  Call iconv() on the entire result string, not
	only on the portion needed so far.
	* intl/loadinfo.h (_nl_find_msg): Remove index argument, add lengthp
	argument.
	* intl/loadmsgcat.c (_nl_load_domain): Adapt to _nl_find_msg change.

2001-01-04  Ulrich Drepper  <drepper@redhat.com>

	* intl/plural.y (yylex): Minimal improvement in number scanner.

2000-07-31  Bruno Haible  <haible@clisp.cons.org>

	* intl/plural.y: Include config.h. Needed to define 'inline' away for
	C compilers that don't support it.
	(yylex): Don't use gcc specific case range syntax.
	* intl/loadmsgcat.c (INIT_GERMANIC_PLURAL): New macro, for old
	compilers.

2000-10-12  Bruno Haible  <haible@clisp.cons.org>

	* intl/finddomain.c: Remove unneeded includes.

2000-10-12  Bruno Haible  <haible@clisp.cons.org>

	* intl/localealias.c (memcpy): Return first argument, just like the
	real memcpy function does.
	* intl/bindtextdom.c (memcpy): Likewise.
	* intl/finddomain.c (memcpy): Likewise.
	* intl/l10nflist.c (memcpy): Likewise.
	* intl/textdomain.c (memcpy): Likewise.
	From Paul Eggert <eggert@twinsun.com>.

2001-01-03  Jakub Jelinek  <jakub@redhat.com>

	* resolv/resolv.h (struct __res_state): Add nsinit field.
	* resolv/res_send.c (res_nsend): Use it instead of nscount.
	* resolv/res_init.c (__res_vinit): Initialize it.
	(res_nclose): Clear it instead of nscount.

2001-01-04  Ulrich Drepper  <drepper@redhat.com>

	* malloc/mtrace.pl: Fix matching of addresses.
	Patch by Aharon Robbins <arnold@skeeve.com>.

	* Versions.def (ld): Add GLIBC_2.2.

	* catgets/gencat.c: Copyright 2001.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* locale/locale.c: Likewise.
	* locale/localedef.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c: Likewise.
	* posix/getconf.c: Likewise.

2001-01-04  Mark Kettenis  <kettenis@gnu.org>

	* include/stdio.h: Only provide __getwc_unlocked prototype if
	USE_IN_LIBIO is defined.

2001-01-04  Kaz Kojima	<kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/socket.S (__socket): Fix error code
	handling.

2001-01-03  Andreas Schwab  <schwab@suse.de>

	* sysdeps/generic/strtoll.c: Remove unused __strtoq_internal alias.
	* sysdeps/generic/strtoull.c: Remove unused __strtouq_internal alias.

	* sysdeps/wordsize-64/strtol.c: Add strtoq alias and fix strtoll alias.
	* sysdeps/wordsize-64/strtoul.c: Add strtouq alias and fix
	strtoull alias.
	* sysdeps/wordsize-64/wcstol.c: Add wcstoq alias and fix wcstoll alias.
	* sysdeps/wordsize-64/wcstoul.c: Add wcstouq alias and fix
	wcstoull alias.

	* sysdeps/generic/strtoul.c: Make sure we find strtol.c in this
	directory.
	* sysdeps/generic/strtol_l.c: Likewise.
	* sysdeps/generic/strtoul_l.c: Likewise.
	* sysdeps/generic/wcstoul.c: Likewise, for wcstol.c.

	* sysdeps/wordsize-64/strtol_l.c: Fix alias.
	* sysdeps/wordsize-64/strtoul_l.c: Likewise.
	* sysdeps/wordsize-64/wcstol_l.c: Fix alias.
	* sysdeps/wordsize-64/wcstoul_l.c: Likewise.

2001-01-04  Andreas Jaeger  <aj@suse.de>

	* nss/nsswitch.c: Include files for missing prototypes, remove
	buggy declaration of prototypes.

2001-01-03  Franz Sirl	<Franz.Sirl-kernel@lauterbach.com>

	* resolv/Versions: Fix bracing.
	* sysdeps/powerpc/soft-fp/Versions: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/Versions: Likewise.

2001-01-02  Franz Sirl	<Franz.Sirl-kernel@lauterbach.com>

	* sysdeps/powerpc/dl-machine.c (__process_machine_rela): Fix typo.

2001-01-02  Ulrich Drepper  <drepper@redhat.com>

	* manual/Makefile (TEXI2PDF): Change to texi2dvi --pdf.
	Suggested by Minko Markov <mmarkov@home.com>.

2001-01-02  Franz Sirl	<Franz.Sirl-kernel@lauterbach.com>

	* sysdeps/powerpc/elf/start.S (__data_start): Make it global.
	* sysdeps/powerpc/dl-machine.c (dl_reloc_overflow): Print the name of
	the failing symbol.
	(__process_machine_rela): Pass symbol to dl_reloc_overflow().

2001-01-02  Ben Collins	 <bcollins@debian.org>

	* time/tzset.c (tzset_internal): Make sure we fall back to UTC
	if TZ is not set and TZDEFAULT is not present.

2001-01-01  Ben Collins	 <bcollins@debian.org>

	* string/strings.h: Make sure we declare our functions even if
	string.h is already included, based on whether or not __USE_BSD is
	defined.

2001-01-02  Ulrich Drepper  <drepper@redhat.com>

	* dlfcn/dlerror.c (dlerror): Handle call of dlerror() before any
	other dlopen() and dlsym().
	Based on a patch by Ben Collins <bcollins@debian.org>.

2001-01-02  Andreas Jaeger  <aj@suse.de>

	* dlfcn/errmsg1.c (main): Call dlerror initially.
	Reported by Ben Collins <bcollins@debian.org>.

2001-01-02  Ulrich Drepper  <drepper@redhat.com>

	* intl/dcigettext.c (guess_category_value): Rewrite so that LANGUAGE
	value is ignored if the selected locale is the C locale.
	* intl/tst-gettext.c: Set locale for above change.
	* intl/tst-translit.c: Likewise.

2001-01-02  Andreas Jaeger  <aj@suse.de>

	* libio/wgenops.c (_IO_wdoallocbuf): Use correct wide access macro.
	(_IO_switch_to_wget_mode): Likewise.
	(_IO_sputbackwc): Likewise.
	(_IO_sungetwc): Use wint_t for result.

	* stdio-common/vfscanf.c (__vfscanf): Use WINT_T for done.

	* sysdeps/generic/strtol.c (strtol): Make cnt size_t for correct
	signedness.

	* sysdeps/generic/printf_fphex.c (putc): Cast _IO_putwc_unlocked
	to (int) to avoid warnings.
	* stdio-common/printf_fp.c (putc): Likewise.
	* stdio-common/printf_size.c (putc): Likewise.

	* sysdeps/generic/dl-sysdep.c (_dl_important_hwcaps): Make
	constant unsigned.

2001-01-01  Andreas Jaeger  <aj@suse.de>

	* inet/rcmd.c (rcmd_af): Use socklen_t for len.

2000-12-31  Andreas Jaeger  <aj@suse.de>

	* include/libc-internal.h: Add prototype for __libc_freeres.

	* sysdeps/unix/sysv/linux/init-first.c: Include <libc-internals.h>
	for prototypes, remove redundant prototypes.
	* gmon/gmon.c: Likewise.
	* sysdeps/unix/i386/i586/clock_getres.c: Likewise.
	* sysdeps/unix/i386/i586/clock_gettime.c: Likewise.
	* malloc/mtrace.c: Likewise.

	* sysdeps/generic/enbl-secure.c: Include <libc-internals.h> for
	prototypes.
	* elf/soinit.c: Likewise.
	* sysdeps/generic/prof-freq.c: Likewise.
	* sysdeps/mach/hurd/profil.c: Likewise.
	* debug/noophooks.c: Likewise.
	* debug/pcprofile.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c: Likewise.
	* sysdeps/generic/get_clockfreq.c: Likewise.
	* malloc/set-freeres.c: Likewise.

	* locale/localeinfo.h: Add internal prototypes.

	* elf/rtld.c (dl_main): Fix prototype.

	* iconvdata/tst-table-to.c (main): Use return instead of exit to
	avoid warning.

	* nis/rpcsvc/yp_prot.h: Remove __P.
	* nis/rpcsvc/ypupd.h: Likewise.
	* nis/rpcsvc/yp.h: Likewise.

	* sunrpc/rpc_main.c: Add noreturn attributes.
	* sunrpc/rpc_scan.h: Likewise.

	* sunrpc/rpc_hout.c (storexdrfuncdecl): Make static.

	* sunrpc/rpcinfo.c: Add noreturn attribute to brdcst.

	* sunrpc/proto.h: Add noreturn attributes to error and crash.

	* posix/bsd-getpgrp.c: Add prototype to avoid warning.

	* sunrpc/svc_unix.c: Include <rpc/svc.h> for prototypes.

	* sunrpc/create_xid.c: Include <rpc/svc.h> for prototypes.

	* include/rpc/rpc_msg.h: Add prototypes for some functions.
	* include/rpc/auth.h: Likewise.
	* include/rpc/auth_des.h: Likewise.
	* include/rpc/clnt.h: Likewise.
	* include/rpc/rpc.h: Likewise.
	* include/rpc/svc.h: Likewise.
	* include/rpc/svc_auth.h: Likewise.

	* include/rpc/des_crypt.h: New file.

	* malloc/memusagestat.c (main): Use return instead of exit to
	avoid warning.
	* io/pwd.c (main): Likewise.
	* iconvdata/tst-table-from.c (main): Likewise.
	* ctype/test_ctype.c (main): Likewise.
	* setjmp/tst-setjmp.c (main): Likewise.
	* signal/tst-signal.c (main): Likewise.
	* stdlib/tst-strtol.c (main): Likewise.
	* stdlib/tst-strtod.c (main): Likewise.
	* stdlib/tst-strtoll.c (main): Likewise.
	* stdlib/tst-xpg-basename.c (main): Likewise.
	* dirent/tst-seekdir.c (main): Likewise.
	* grp/testgrp.c (main): Likewise.
	* inet/test_ifindex.c (main): Likewise.
	* io/test-utime.c (main): Likewise.
	* posix/test-vfork.c (main): Likewise.
	* posix/testfnm.c (main): Likewise.
	* stdio-common/temptest.c (main): Likewise.
	* stdio-common/test_rdwr.c (main): Likewise.
	* stdio-common/tst-fileno.c (main): Likewise.
	* stdio-common/tst-sscanf.c (main): Likewise.
	* stdio-common/tstscanf.c (main): Likewise.
	* string/bug-strncat1.c (main): Likewise.
	* string/bug-strpbrk1.c (main): Likewise.
	* string/bug-strspn1.c (main): Likewise.
	* string/test-ffs.c (main): Likewise.
	* string/tst-inlcall.c (main): Likewise.
	* string/tst-svc.c (main): Likewise.
	* timezone/test-tz.c (main): Likewise.
	* wctype/test_wcfuncs.c (main): Likewise.
	* wctype/test_wctype.c (main): Likewise.

	* stdlib/tst-random.c: Add attribute noreturn to fail.

2000-12-28  Wolfram Gloger  <wg@malloc.de>

	* malloc/malloc.c (MALLOC_COPY): Handle case if source and
	destination overlap.  Assume dest is always below source if
	overlapping.

2000-12-30  Ulrich Drepper  <drepper@redhat.com>

	* elf/dl-close.c (_dl_close): We can ignore the NODELETE flag if the
	object was not yet initialized.

2000-12-28  H.J. Lu  <hjl@gnu.org>

	* elf/dl-deps.c (_dl_map_object_deps): Make sure the DSO state
	is always consistent even if its dependency is failed.

	* elf/dl-open.c (_dl_open): Increment the open count before
	calling _dl_close () in case of failure.

	* elf/neededtest4.c: New file.
	* elf/neededobj5.c: New file.
	* elf/neededobj6.c: New file.

	* elf/Makefile (distribute): Add neededobj5.c and neededobj6.c.
	(tests): Add neededtest4.
	(modules-names): Add neededobj5 and neededobj6.
	($(objpfx)neededobj6.so): New target.
	($(objpfx)neededtest4): New target.
	($(objpfx)neededtest4.out): New target.

2000-12-28  Joseph S. Myers  <jsm28@cam.ac.uk>

	* misc/sys/cdefs.h (__attribute_format_strfmon__): Define.
	* stdlib/monetary.h: Add strfmon format attributes.

2000-12-28  Roland McGrath  <roland@frob.com>

	* sysdeps/mach/hurd/ioctl.c (do_ioctl): Avoid double-increment after
	__mempcpy does it for us.

2000-12-28  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/dl-environ.c: Add prototype for unsetenv.

	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Add prototype for
	__new_setrlimit.

	* sysdeps/unix/sysv/linux/i386/oldgetrlimit64.c: Add prototype for
	__old_getrlimit64.

	* sysdeps/unix/sysv/linux/i386/getrlimit.c: Add prototype for
	__new_getrlimit.

	* sysdeps/unix/sysv/linux/i386/chown.c: Add prototypes for
	__chown_is_lchown and __real_chown.

	* sysdeps/generic/ldsodefs.h: Add noreturn attribute to
	_dl_reloc_bad_type.

	* sunrpc/rpc_hout.c (print_funcdef): Add break statement to shut
	up GCC's warning about "deprecated use of label at end of compound
	statement."
	* sunrpc/rpc_cout.c (emit_inline): Likewise.

	* gmon/bb_exit_func.c: Include <sys/gmon.h> for internal
	prototypes.
	Remove struct bb and __bb_head since those are declared by
	sys/gmon.h.

2000-12-22  Ben Collins	 <bcollins@debian.org>

	* manual/charset.texi: Fix typo in description of WCHAR_MAX.

	* manual/argp.texi: Document argp_domain as part of struct argp.

2000-12-28  Andreas Jaeger  <aj@suse.de>

	* catgets/Makefile (generated): Add sample.SJIS.cat.

	* sunrpc/rpc_dtable.c: Include rpc/clnt.h for prototypes.

	* elf/dl-minimal.c: Add prototypes.

	* include/locale.h: Add internal prototypes.
	* include/sys/gmon.h: Likewise.

	* dlfcn/errmsg1mod.c: Add prototype for foo to shut up GCC.

2000-12-27  Ben Collins	 <bcollins@debian.org>

	* elf/dl-open.c (_dl_open): Correctly set the new objname pointer
	when reallocating the error strings.
	Reported by Kalle Olavi Niemitalo <kon@iki.fi>

2000-12-27  Ulrich Drepper  <drepper@redhat.com>

	* dlfcn/Makefile (tests): Add errmsg1.
	(modules-names): Add errmsg1mod.
	Add rules to run errmsg1.
	* dlfcn/errmsg1.c: New file.
	* dlfcn/errmsg1mod.c: New file.

	* dlfcn/dlerror.c (dlerror): Always create output string which
	includes object file name.

	* sysdeps/alpha/alphaev6/memcpy.S: Don't go through unrolled loop
	if we would go through it only once.
	Patch by Rick Gorton <rick.gorton@api-networks.com>.

	* sysdeps/alpha/alphaev67/strncat.S: Fix handling of numeric parameter.
	Patch by Richard Henderson <rth@redhat.com>.

2000-12-27  Jakub Jelinek  <jakub@redhat.com>

	* malloc/malloc.c (memmove): Add prototypes.
	(MALLOC_MEMMOVE): Define.
	(chunk_realloc): Use it instead of MALLOC_COPY if source and
	destination might overlap.

2000-12-27  Andreas Jaeger  <aj@suse.de>

	* stdio-common/printf_fp.c (__printf_fp): Add prototype for nested
	function.
	* elf/dl-load.c (_dl_map_object_from_fd): Likewise.
	* locale/programs/locale.c (show_locale_vars): Likewise.
	(show_info): Likewise.
	* locale/programs/ld-collate.c (collate_output): Likewise.
	* locale/programs/ld-ctype.c (set_class_defaults): Likewise.
	* elf/dl-deps.c (_dl_map_object_deps): Likewise.
	* stdlib/rpmatch.c (rpmatch): Likewise.

	* setjmp/tst-setjmp.c: Make local functions static.
	* setjmp/jmpbug.c: Likewise.
	* signal/tst-signal.c: Likewise.
	* stdio-common/tfformat.c: Likewise.
	* string/tst-svc.c: Likewise.
	* time/clocktest.c: Likewise.
	* time/tst-getdate.c: Likewise.
	* dirent/list.c: Likewise.
	* dirent/opendir-tst1.c: Likewise.
	* posix/runtests.c: Likewise.
	* posix/tst-getaddrinfo.c: Likewise.
	* posix/tst-chmod.c: Likewise.
	* posix/wordexp-test.c: Likewise.
	* misc/tst-efgcvt.c: Likewise.
	* timezone/tst-timezone.c: Likewise.
	* rt/tst-clock.c: Likewise.
	* rt/tst-shm.c: Likewise.
	* rt/tst-aio2.c: Likewise.
	* rt/tst-aio3.c: Likewise.
	* rt/tst-aio4.c: Likewise.
	* rt/tst-aio5.c: Likewise.

	* dlfcn/failtest.c: Add prototype for foo.

	* dlfcn/glrefmain.c: Add prototype for do_test.

	* dlfcn/tst-dladdr.c: Add prototype for do_test.

	* string/test-ffs.c (main): Add prototype for nested function.

	* sunrpc/des_soft.c: Include rpc/des_crypt.h for prototype.

	* nss/XXX-lookup.c: Add prototype to shut up GCC.

	* include/netinet/ether.h (DECLARE_NSS_PROTOTYPES): Fix
	setetherent prototype.
	Add internal interfaces.

	* nis/nss_nis/nis-ethers.c (_nss_nis_setetherent): Likewise.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_setetherent): Likewise.

	* resolv/res_data.c: Don't add (conflicting) prototypes for _LIBC.

	* nis/nis_intern.h: Add prototype for __pmap_getnisport.

	* nss/nss_files/files-ethers.c: Include netinet/ether.h to get
	prototypes, remove struct etherent since it's declared in ether.h.
	Fix ntohost declaration.

	* elf/dl-profile.c (_dl_mcount): Add empty statement to shut up GCC.

	* include/getopt.h: Add internal interfaces.
	* include/termios.h: Likewise.
	* include/resolv.h: Likewise.
	* include/netdb.h: Likewise.
	* include/grp.h: Likewise.
	* include/pwd.h: Likewise.
	* include/shadow.h: Likewise.
	* include/rpc/netdb.h: Likewise.
	* include/setjmp.h: Likewise.

	* include/stdio.h: Add prototypes for compatibility functions.
	* include/grp.h: Likewise.
	* include/pwd.h: Likewise.
	* include/shadow.h: Likewise.

	* include/fenv.h: Define internal interfaces.

2000-12-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/bits/byteswap.h (__bswap_64): Handle constant
	argument case separately.
	* sysdeps/i386/bits/byteswap.h (__bswap_64): Likewise.

2000-12-27  Andreas Jaeger  <aj@suse.de>

	* include/sys/wait.h: Add some prototypes.
	* Rules (dummy.c): Create also prototype to shut up GCC.

2000-12-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/mach/hurd/if_index.c (__protocol_available): Uncomment,
	it's not needed at the moment.
	* sysdeps/generic/if_index.c (__protocol_available): Likewise.
	* sysdeps/unix/sysv/linux/if_index.c (__protocol_available): Likewise.

2000-12-26  Andreas Jaeger  <aj@suse.de>

	* libio/getc_u.c: Include stdio.h via system path to get internal
	prototypes.
	* libio/getwc_u.c: Likewise.

	* stdlib/strfmon.c: Fix prototype of __printf_fp.

	* stdio-common/vfprintf.c (process_arg): Move __printf_fphex and
	__printf_fp prototypes to ...
	* include/printf.h: ...here.

	* include/stdio.h: Add some internal prototypes to shut up GCC.
	* include/stdlib.h: Likewise.

	* sysdeps/posix/sigpause.c (__sigpause): Use ISO C prototype
	declaration.

	* include/signal.h: Add prototypes for internal sigpause
	interfaces.

2000-12-26  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/generic/bits/byteswap.h (__bswap_64): Make it usable for
	64bit platforms.  Reported by Dave Gilbert <gilbertd@treblig.org>.

	* string/Makefile (tests): Add tst-bswap.
	* string/tst-bswap.c: New file.

2000-12-11  Bruno Haible  <haible@clisp.cons.org>

	* Makefile ($(inst_includedir)/gnu/stubs.h): Sort in the C locale.

2000-12-26  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/Makefile (rpcgen-cmd): Use single quotes in sed call.
	Patch by Ed Connell <Ed.Connell@sas.com>.

2000-12-24  Ulrich Drepper  <drepper@redhat.com>

	* locale/iso-639.def: Correct one entry.  Add two missing entries.

	* locale/iso-4217.def: Change entry for Eritrea.
	Reported by Daniel Yacob <yacob@geez.org>.

2000-12-23  Ben Collins	 <bcollins@debian.org>

	* manual/charset.texi (Extended Char Intro): Fix typo in ISO 6937
	description.

	* manual/stdio.texi (Dynamic Output): Document the return value of
	asprintf.  Also make the asprintf/snprintf examples a little
	better (check for some error returns).

2000-12-22  Andreas Jaeger  <aj@suse.de>

	* include/stdio.h: Add __ftrylockfile prototype.

2000-12-21  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ia64/fpu/math_ldbl.h (ieee_long_double_shape_type):
	Make sign_exponent element signed.

	* sysdeps/ieee754/ldbl-96/math_ldbl.h (ieee_long_double_shape_type):
	Fix a typo.

	* sysdeps/i386/fpu/s_nextafterl.c (__nextafterl): Remove dead branch.

2000-12-21  Andreas Jaeger  <aj@suse.de>

	* nis/nss_nisplus/nisplus-ethers.c (struct etherent): Removed.
	* inet/ether_hton.c: Likewise
	* inet/ether_ntoh.c: Likewise.

	* nis/nss_nis/nis-ethers.c (_nss_nis_getntohost_r): Fix
	declaration to match prototype.

	* include/netinet/ether.h (struct etherent): Declare here so that
	all implementations use the same struct.

	* nis/nss_nis/nis-ethers.c: Include netinet/ether.h to get
	prototypes.
	(struct ether): Removed.
	Use struct etherent instead of ether everywhere.

	* include/rpc/auth.h (DECLARE_NSS_PROTOTYPES): New.

	* include/rpc/auth_des.h (DECLARE_NSS_PROTOTYPES): New.

	* sunrpc/publickey.c: Include auth_des.h for prototypes.

2000-12-20  Ulrich Drepper  <drepper@redhat.com>

	* math/test-misc.c: Add more tests for nextafter functions.

	* sysdeps/i386/fpu/s_nextafterl.c: Handle change from denormal to
	normal correctly.  Correct test for sign.
	Based on a patch by HJ Lu.

2000-12-19  Ulrich Drepper  <drepper@redhat.com>

	* Makeconfig (preprocess-version): Add -traditional to gcc call.
	Cleanup sed calls.

2000-12-19  Andreas Jaeger  <aj@suse.de>

	* include/netinet/ether.h (DECLARE_NSS_PROTOTYPES): New.

	* nis/nis_intern.h: Add prototype for __do_niscall3.

	* nis/nss_nis/nis-rpc.c (_nss_nis_setrpcent): Fix declaration to
	match prototype.

	* include/netdb.h (DECLARE_NSS_PROTOTYPES): Reformat.

	* include/rpc/netdb.h (DECLARE_NSS_PROTOTYPES): New.

	* include/aliases.h (DECLARE_NSS_PROTOTYPES): New.

2000-12-18  Ulrich Drepper  <drepper@redhat.com>

	* math/test-misc.c: Add more tests for nextafter.
	* sysdeps/i386/fpu/s_nextafterl.c: Handle decrement for x<0 correctly.
	* sysdeps/ieee754/ldbl-96/math_ldbl.h
	(ieee_long_double_shape_type): Make sign_exponent element signed.

	* manual/message.texi: Add Estonian to plural overview list.
	Correct rule for Slavic languages.
	Patch by Stanislav Brabec <utx@penguin.cz>.

	* nis/nss_nis/nis-netgrp.c: Remove unnecessary initializations.

2000-12-18  Andreas Jaeger  <aj@suse.de>

	* test-skeleton.c: Use temp_name_list instead of name_list to
	avoid collision with name_list from inet/netgroup.h.

	* nss/nss_files/files-network.c (NEED_H_ERRNO): Define.

	* include/grp.h (DECLARE_NSS_PROTOTYPES): New.
	* include/pwd.h (DECLARE_NSS_PROTOTYPES): New.
	* include/netdb.h (DECLARE_NSS_PROTOTYPES): New.
	* include/shadow.h (DECLARE_NSS_PROTOTYPES): New.

	* hesiod/nss_hesiod/hesiod-proto.c (_nss_hesiod_setprotoent): Fix
	declaration to match prototype.
	* hesiod/nss_hesiod/hesiod-pwd.c (_nss_hesiod_setpwent): Likewise.
	* hesiod/nss_hesiod/hesiod-grp.c (_nss_hesiod_setgrent): Likewise.
	* hesiod/nss_hesiod/hesiod-service.c (_nss_hesiod_setservent):
	Likewise.
	* nis/nss_nis/nis-grp.c (_nss_nis_setgrent): Likewise.
	* nis/nss_nis/nis-pwd.c (_nss_nis_setpwent): Likewise.
	* nis/nss_nis/nis-proto.c (_nss_nis_setprotoent): Likewise.
	* nis/nss_nis/nis-service.c (_nss_nis_setservent): Likewise.
	(_nss_nis_getservbyport_r): Likewise.
	* nis/nss_nis/nis-hosts.c (_nss_nis_sethostent): Likewise.
	* nis/nss_nis/nis-spwd.c (_nss_nis_setspent): Likewise.
	* nis/nss_nis/nis-network.c (_nss_nis_getnetent_r): Likewise.
	(_nss_nis_setnetent): Likewise
	* nis/nss_nis/nis-netgrp.c (_nss_nis_setnetgrent): Likewise.
	(_nss_nis_endnetgrent): Likewise.
	* nis/nss_nisplus/nisplus-netgrp.c (_nss_nisplus_endnetgrent):
	Likewise.
	(_nss_nisplus_setnetgrent): Likewise.
	* nis/nss_nisplus/nisplus-spwd.c (_nss_nisplus_setspent): Likewise.
	* nis/nss_nisplus/nisplus-pwd.c (_nss_nisplus_setpwent): Likewise.
	* nis/nss_nisplus/nisplus-grp.c (_nss_nisplus_setgrent): Likewise.
	* nis/nss_nisplus/nisplus-network.c (_nss_nisplus_setnetent):
	Likewise.
	* nis/nss_nisplus/nisplus-hosts.c (_nss_nisplus_sethostent):
	Likewise.
	* nis/nss_nisplus/nisplus-service.c (_nss_nisplus_setservent):
	Likewise.
	* nis/nss_nisplus/nisplus-proto.c (_nss_nisplus_setprotoent):
	Likewise.
	* nis/nss_compat/compat-spwd.c (_nss_compat_setspent): Likewise.
	* nis/nss_compat/compat-pwd.c (_nss_compat_setpwent): Likewise.
	* nis/nss_compat/compat-grp.c (_nss_compat_setgrent): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr_r): Likewise.
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r): Likewise.
	(_nss_dns_getnetbyaddr_r): Likewise.

2000-12-17  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/k_sinl.c (__kernel_sinl): Fix functions
	parameter.

	* sysdeps/unix/sysv/linux/shm_open.c (freeit): Make static and add
	unused attribute to shut up gcc warnings.

	* sysdeps/generic/k_sinl.c: Include math_private for prototypes.
	* sysdeps/generic/k_tanl.c: Likewise.
	* sysdeps/generic/k_cosl.c: Likewise.
	* sysdeps/generic/e_j0l.c: Likewise.
	* sysdeps/generic/e_j1l.c: Likewise.
	* sysdeps/generic/e_jnl.c: Likewise.
	* sysdeps/generic/e_lgammal_r.c: Likewise.

	* elf/vismain.c: Move prototypes for functions in vismod*.c to
	vismod.h.
	* elf/vismod.h: New file.
	* elf/Makefile (distribute): Add vismod.h.
	* elf/vismod1.c: Include vismod.h.
	* elf/vismod2.c: Likewise.
	* elf/vismod3.c: Likewise.

	* elf/constload3.c: Add prototype declarations to shut up gcc.
	* elf/failobj.c: Likewise.
	* elf/nodelmod3.c: Likewise.
	* elf/filtmod1.c: Likewise.
	* elf/filtmod2.c: Likewise.
	* elf/reldepmod1.c: Likewise.
	* elf/reldepmod2.c: Likewise.
	* elf/reldepmod3.c: Likewise.
	* elf/reldepmod4.c: Likewise.
	* elf/unload2dep.c: Likewise.
	* elf/unload2mod.c: Likewise.
	* elf/ltglobmod1.c: Likewise.
	* elf/pathoptobj.c: Likewise.
	* elf/neededobj1.c: Likewise.
	* elf/neededobj2.c: Likewise.
	* elf/neededobj3.c: Likewise.
	* elf/neededobj4.c: Likewise.
	* elf/nextmod1.c: Likewise.
	* elf/nextmod2.c: Likewise.

	* locale/programs/ld-collate.c (collate_finish): Don't use labels
	at end of compound statement.
	* locale/programs/locale.c (show_info): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr_r): Likewise.

2000-12-16  Jakub Jelinek  <jakub@redhat.com>

	* catgets/gencat.c (read_input_file): Avoid calling obstack_free
	with a pointer not returned by obstack_ functions.

2000-12-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/aix/bits/stat.h (struct stat): Align with AIX
	version.
	(struct stat64): Likewise.
	Reported by Michael Keezer <mkeezer@redhat.com>.

	* timezone/asia: Update from tzdata2000h.
	* timezone/australasia: Likewise.
	* timezone/backward: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/zone.tab: Likewise.

2000-12-14  Jakub Jelinek  <jakub@redhat.com>

	* io/ftw.c (ftw_dir): If process_entry returned non-zero result
	and dir.stream is NULL, only free dir.content.
	* io/ftwtest.c (cb, main): Add --early-exit option to test it.
	* io/ftwtest-sh: Test with --early-exit.

2000-12-13  Jakub Jelinek  <jakub@redhat.com>

	* misc/efgcvt.c (FCVT_MAXDIG): Define.
	(FCVT_BUFPTR): New variable.
	(fcvt): If fcvt_r returns -1 on the static short buffer,
	try to malloc a sufficiently large one and retry.
	(free_mem): New function.
	* misc/qefgcvt.c (FCVT_MAXDIG): Define.
	* misc/tst-efgcvt.c (fcvt_tests): Add new test.

2000-12-15  Ulrich Drepper  <drepper@redhat.com>

	* misc/dirname.c (dirname): Fix search for second to last slash.

2000-12-13  Andreas Jaeger  <aj@suse.de>

	* misc/tst-dirname.c (main): Fix typo in test to really use
	the examples from Unix98.
	Reported by Michael Kerrisk <mtk16@ext.canterbury.ac.nz>.

2000-12-09  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ia64/fpu/s_fabs.S: New file.
	* sysdeps/ia64/fpu/s_fabsf.S: New file.
	* sysdeps/ia64/fpu/s_fabsl.S: New file.

2000-12-15  Andreas Jaeger  <aj@suse.de>

	* stdio-common/scanf9.c (main): Reformat and change to avoid
	warnings.

	* stdio-common/tstdiomisc.c: Make local functions static.
	* stdio-common/tst-printf.c: Likewise.

	* elf/constload2.c: Add prototype declarations to shut up gcc.
	* elf/dep1.c: Likewise.
	* elf/dep2.c: Likewise.
	* elf/dep3.c: Likewise.
	* elf/dep4.c: Likewise.
	* elf/ltglobmod2.c: Likewise.

	* libio/fmemopen.c: Make local functions static.

	* elf/Makefile (distribute): Added testobj.h.

	* elf/testobj.h: New file.

	* elf/testobj1.c: Include testobj.h and move prototype
	declarations to testobj.h.
	* elf/testobj2.c: Likewise.
	* elf/testobj3.c: Likewise.
	* elf/testobj4.c: Likewise.
	* elf/testobj5.c: Likewise.
	* elf/testobj6.c: Likewise.
	* elf/testobj1_1.c: Likewise.
	* elf/preloadtest.c: Likewise.

2000-12-15  Ben Collins	 <bcollins@debian.org>

	* misc/sys/cdefs.h: Fix thinko in checks for flexarr macros.
	Patch by Akim Demaille <akim@epita.fr> in Debian bug report.

2000-12-14  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ieee754/flt-32/s_sincosf.c (__sincosf): The exponent
	field in a float is 8 bits, not 11 bits.

2000-12-13  Jakub Jelinek  <jakub@redhat.com>

	* math/test-misc.c (main): Adjust m for IEEE quad long double.

2000-12-13  Andreas Jaeger  <aj@suse.de>

	* manual/message.texi (Using gettextized software): Fix typo.

	* manual/charset.texi (Converting a Character): Fix mbstouwcs
	program to compile.
	Patch by Martin Buchholz <martin@xemacs.org>.

	* sysdeps/unix/sysv/linux/sigpending.c (sigpending): Fix typo.
	Reported by Michael Kerrisk <mtk16@ext.canterbury.ac.nz>.

2000-12-11  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/kernel_sigaction.h: Declare
	kernel_sigset_t and use it.
	Patch by Hiroyuki Machida <machida@sm.sony.co.jp>.

2000-12-10  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/alphaev67/fpu/Implies: New file.
	* sysdeps/alpha/alphaev6/fpu/e_sqrtf.S: New file.
	* sysdeps/alpha/alphaev6/fpu/e_sqrt.S: New file.

2000-12-10  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/alpha/htonl.S: Fix a typo.

2000-12-10  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/alpha/alphaev6/stxcpy.S: Exchange t8 with t10.

2000-12-10  Andreas Jaeger  <aj@suse.de>

	* locale/programs/ld-ctype.c (charclass_symbolic_ellipsis): Fixed
	cast as suggested by Jakub Jelinek <jakub@redhat.com> and Ulrich
	Drepper <drepper@redhat.com>.

2000-12-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/sigaction.c: New file.

	* sysdeps/unix/sysv/linux/mips/sys/acct.h: Removed, we can use the
	generic version.
	Patches by Hiroyuki Machida <machida@sm.sony.co.jp>.

	* locale/programs/ld-collate.c (handle_ellipsis): Fix format
	string.

	* locale/programs/ld-ctype.c (charclass_symbolic_ellipsis): Fix
	format string.

	* nscd/hstcache.c (addhstbyname): Add cast to avoid warning.
	* nscd/connections.c (handle_request): Likewise.
	* nscd/pwdcache.c (addpwbyname): Likewise.
	* nscd/grpcache.c (addgrbyname): Likewise.

	* nscd/nscd_conf.c (nscd_parse_file): Remove extra argument.

2000-12-09  Ulrich Drepper  <drepper@redhat.com>

	* string/stratcliff.c: Add tests for stpncpy, memcpy, and mempcpy.

	* Makeconfig (default_cflags): Make -O2 the default for stable
	releases.

2000-12-08  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ia64/fpu/s_isinfl.S: Renamed to ...
	* sysdeps/ia64/fpu/s_isinf.S: This.
	Add a .pred.rel.mutex note to avoid false report.

	* sysdeps/ia64/fpu/s_isnanl.S: Renamed to ...
	* sysdeps/ia64/fpu/s_isnan.S: This.

	* sysdeps/ia64/fpu/s_fpclassify.S: New file.
	* sysdeps/ia64/fpu/s_fpclassifyf.S: New file.
	* sysdeps/ia64/fpu/s_fpclassifyl.S: New file.
	* sysdeps/ia64/fpu/s_isinff.S: New file.
	* sysdeps/ia64/fpu/s_isinfl.S: New file.
	* sysdeps/ia64/fpu/s_isnanf.S: New file.
	* sysdeps/ia64/fpu/s_isnanl.S: New file.
	* sysdeps/ia64/fpu/s_finite.S: New file.
	* sysdeps/ia64/fpu/s_finitef.S: New file.
	* sysdeps/ia64/fpu/s_finitel.S: New file.
	* sysdeps/ia64/fpu/s_signbit.S: New file.
	* sysdeps/ia64/fpu/s_signbitf.S: New file.
	* sysdeps/ia64/fpu/s_signbitl.S: New file.
	* sysdeps/ia64/fpu/s_copysign.S: New file.
	* sysdeps/ia64/fpu/s_copysignf.S: New file.
	* sysdeps/ia64/fpu/s_copysignl.S: New file.

2000-12-08  Ulrich Drepper  <drepper@redhat.com>

	* math/libm-test.inc (main): Fix typos in messages.

	* string/stratcliff.c: Add test for rawmemchr.

2000-12-08  Jakub Jelinek  <jakub@redhat.com>

	* elf/dl-open.c (_dl_open): If objname points right after errstring,
	allocate it together with errstring using alloca.
	* elf/dl-error.c (_dl_signal_error): If malloc failed, set objname
	to "", because it might point to local stack.

2000-12-05  H.J. Lu  <hjl@gnu.org>

	* nss/Makefile (routines): Add getnssent and getnssent_r.
	* nss/nsswitch.h (__nss_setent): New internal NSS function.
	(__nss_endent): Likewise.
	(__nss_getent_r): Likewise.
	(__nss_getent): Likewise.
	* nss/getnssent_r.c: New file.
	* nss/getnssent.c: New file.
	* nss/getXXent.c (H_ERRNO_VAR): Updated.
	(GETFUNC_NAME): Updated to call __nss_getent ().
	* nss/getXXent_r.c (H_ERRNO_VAR_P): New.
	(STAYOPEN_TMPVAR): Updated.
	(STAYOPEN_VAR): Updated.
	(SETFUNC_NAME): Updated to call __nss_setent ().
	(ENDFUNC_NAME): Updated to call __nss_endent ().
	(INTERNAL (REENTRANT_GETNAME)): Updated to call __nss_getent_r ().

2000-12-08  Andreas Jaeger  <aj@suse.de>

	* nscd/dbg_log.h (dbg_log): Correct attribute.

2000-12-08  Jakub Jelinek  <jakub@redhat.com>

	* elf/dl-load.c (fillin_rpath): Don't assume there is '\0' at
	cp + len.  Compute where from dirname.
	Reported by <jreiser@BitWagon.com>.

2000-12-08  Richard Henderson  <rth@twiddle.net>

	* sysdeps/alpha/_mcount.S: Fix typo.
	* sysdeps/alpha/strncpy.S: Likewise.

	* sysdeps/alpha/alphaev6/Implies: New file.
	* sysdeps/alpha/alphaev67/Implies: New file.
	* sysdeps/alpha/alphaev67/ffs.S: New file.
	* sysdeps/alpha/alphaev67/ffsll.S: New file.
	* sysdeps/alpha/alphaev67/rawmemchr.S: New file.
	* sysdeps/alpha/alphaev67/stpcpy.S: New file.
	* sysdeps/alpha/alphaev67/stpncpy.S: New file.
	* sysdeps/alpha/rawmemchr.S: New file.
	* sysdeps/alpha/strcat.S: Tail call to __stxcpy.
	* sysdeps/alpha/strcpy.S: Likewise.

	From GMP 3.1.1:
	* sysdeps/alpha/alphaev6/addmul_1.s: New file.

	From rick.gorton@alpha-processor.com:
	* sysdeps/alpha/alphaev6/memchr.S: New file.
	* sysdeps/alpha/alphaev6/memcpy.S: New file.
	* sysdeps/alpha/alphaev6/memset.S: New file.
	* sysdeps/alpha/alphaev6/stxcpy.S: New file.
	* sysdeps/alpha/alphaev6/stxncpy.S: New file.
	* sysdeps/alpha/alphaev67/strcat.S: New file.
	* sysdeps/alpha/alphaev67/strchr.S: New file.
	* sysdeps/alpha/alphaev67/strlen.S: New file.
	* sysdeps/alpha/alphaev67/strncat.S: New file.
	* sysdeps/alpha/htonl.S: Use a shorter sequence.

2000-12-08  Jakub Jelinek  <jakub@redhat.com>

	* inet/getnameinfo.c (getnameinfo): Fix NI_NOFQDN support.
	Reported by <pspencer@fields.utoronto.ca>.

2000-12-07  Jes Sorensen  <jes@linuxcare.com>

	* sysdeps/ia64/elf/start.S (__data_start): Add __data_start variable.
	Pointed out by Hans Boehm.

2000-12-07  H.J. Lu  <hjl@gnu.org>

	* elf/dl-version.c (match_symbol): Check map->l_name[0] for printing.

2000-12-07  Andreas Jaeger  <aj@suse.de>

	* misc/error.c: Add format attributes for __error and __error_at_line.

	* nscd/dbg_log.h: Add format attribute.

2000-12-08  Ulrich Drepper  <drepper@redhat.com>

	* misc/sys/syslog.h: Add format attributes to syslog and vsyslog.
	Patch by Joseph S. Myers <jsm28@cam.ac.uk>.

2000-12-07  Dan Pop  <Dan.Pop@cern.ch>

	* sysdeps/ia64/strcpy.S: Fix a bug in a recovery code sequence.

2000-12-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/aix/Makefile [$(subdir)==misc]
	(sysdep_routines): Add uitrunc.
	* sysdeps/unix/sysv/aix/uitrunc.c: New file.
	Patches by Michael Keezer <mkeezer@redhat.com>.

2000-12-06  Roland McGrath  <roland@frob.com>

	* sysdeps/mach/hurd/ioctl.c (__ioctl): Don't clobber ARG as we copy in
	argument data, since it will be used to copy out too (for INOUT).
	Reported by Marcus Brinkmann <marcus@gnu.org>.

	* sysdeps/mach/hurd/ioctl.c: Include <stdint.h>.
	(__ioctl): Use uintptr_t instead of unsigned long int.

2000-12-06  Jim Wilson	<wilson@redhat.com>

	* stdlib/l64a.c (l64a): Truncate M to 32-bit value.

2000-12-06  Ulrich Drepper  <drepper@redhat.com>

	* stdio-common/printf_fp.c (__printf_fp): Handle decimal point in
	x.5 rounding correctly.

2000-12-06  Mark Kettenis  <kettenis@gnu.org>

	* stdio-common/perror.c (perror): Conditionalize code dealing with
	wide-oriented streams on USE_IN_LIBIO.

2000-12-06  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/dl-sysdep.c (_dl_sysdep_start_cleanup): Mark
	as internal_function.

2000-12-05  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/alpha/elf/start.S (__data_start): Define.

2000-12-05  H.J. Lu  <hjl@gnu.org>

	* nss/getXXent_r.c (setup): Change the return type to int.

2000-12-05  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/aix/Makefile [$(subdir)==misc]
	(sysdep_routines): Add restf and savef.
	* sysdeps/unix/sysv/aix/restf.c: New file.
	* sysdeps/unix/sysv/aix/savef.c: New file.
	Patches by Michael Keezer <mkeezer@redhat.com>.

	* sysdeps/unix/opendir.c (__opendir): Don't use o_directory_works
	if O_DIRECTORY is not defined.
	Patch by Michael Keezer <mkeezer@redhat.com>.

	* include/libc-symbols.h (C_SYMBOL_DOT_NAME): Define.
	Patch by Michael Keezer <mkeezer@redhat.com>.

	* locale/programs/linereader.c (get_toplvl_escape): Recognize more
	than 4 bytes in escape sequence.
	Patch by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

2000-12-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/sys/tas.h (_test_and_set): Don't
	set mips2.

	* sysdeps/unix/sysv/linux/mips/sysdep.h: New file.

	* sysdeps/unix/sysv/linux/mips/sys/syscall.h: Removed.

	* sysdeps/unix/mips/sysdep.h: Use SYS_ify.
	Patches by Maciej W. Rozycki <macro@ds2.pg.gda.pl>.

	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Mark as
	internal_function.
	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Likewise.
	* sysdeps/generic/dl-sysdep.c (_dl_sysdep_start_cleanup): Likewise.

	* sysdeps/generic/dl-cache.c: Remove declaration of
	_dl_sysdep_read_whole_file.

	* elf/dl-load.c (_dl_map_object): Remove declaration of
	_dl_load_cache_lookup.

	* sysdeps/generic/ldsodefs.h: Add declarations of
	_dl_load_cache_lookup, _dl_unload_cache,
	_dl_sysdep_read_whole_file, _dl_sysdep_start and
	_dl_sysdep_start_cleanup.

	* elf/rtld.c: Remove prototypes that are defined in ldsodefs.h
	now.

	* elf/dl-misc.c: Include <ldsodefs.h> to get prototypes.
	* sysdeps/generic/dl-environ.c: Likewise.

	* stdio-common/printf_fp.c: Include <gmp.h> instead of
	<stdlib/gmp.h>.
	* math/atest-exp.c: Likewise.
	* math/atest-exp2.c: Likewise.
	* math/atest-sincos.c: Likewise.
	* stdio-common/_itoa.c: Likewise.
	* stdio-common/_itowa.c: Likewise.

	* include/gmp.h: New file with internal prototypes.

	* sysdeps/generic/longjmp.c: Move _longjmp_unwind declaration from
	here to...
	* include/setjmp.h: ...here.

	* locale/Makefile (routines): Remove codeset_name since it's not
	needed anywhere.

	* locale/codeset_name.c: Removed.

2000-12-05  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/aix/sys/param.h: Define MAXHOSTNAMELEN here.

2000-12-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sys/param.h: Revert last patch.

2000-12-05  Martin Schwidefsky	<schwidefsky@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/mmap64.S: Use mmap if mmap2 isn't
	available.

2000-12-05  Andreas Jaeger  <aj@suse.de>

	* nss/test-netdb.c: Mark local functions as static to avoid
	warnings.
	(main): Use return to silence warning.

	* stdlib/test-canon.c (check_path): Mark as static to avoid warning.

	* stdio-common/test-popen.c: Mark local functions as static to
	avoid warnings.
	(main): Use return to silence warning.

	* stdlib/testsort.c (compare): Mark as static to avoid warning.

	* assert/test-assert.c: Mark local functions as static to avoid
	warnings.
	* assert/test-assert-perr.c: Likewise.

	* math/libm-test.inc (main): Use return to silence warnings.

2000-12-04  Ulrich Drepper  <drepper@redhat.com>

	* math/fenv.h: Fix typo in comment.

	* math/test-misc.c (main): Add a few more over and underflow tests
	for scalb.

	* sysdeps/i386/fpu/e_scalb.S: Handle NaN as first parameter correctly.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* math/w_scalb.c: Don't use matherr except in SVID mode.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/test-misc.c: Add test for NaN and scalbl.
	Reported by Fred J. Tydeman <tydeman@tybor.com>.

2000-12-04  Ulrich Drepper  <drepper@redhat.com>

	* configure.in: Define HAVE_ASM_GLOBAL_DOT_NAME for AIX.
	* config.h.in: Add HAVE_ASM_GLOBAL_DOT_NAME.
	* include/libc-symbols.h (strong_alias): Define special version
	for HAVE_ASM_GLOBAL_DOT_NAME.
	(weak_alias): Likewise.
	* sysdeps/powerpc/bsd-setjmp.S: Use strong_alias not .set.
	* sysdeps/unix/sysv/aix/Makefile [$(subdir)==login]
	(sysdep_routines): Add setutxent, getutxent, endutxent, getutxid,
	getutxline, pututxline, and utmpxname.
	* sysdeps/unix/sysv/aix/fchdir.c: Define __fchdir.
	* sysdeps/unix/sysv/aix/lseek.c: Define __libc_lseek alias.
	* sysdeps/unix/sysv/aix/open.c: Define __libc_open alias.
	* sysdeps/unix/sysv/aix/pread.c: Define pread alias.
	* sysdeps/unix/sysv/aix/pread64.c: Define pread64 alias.
	* sysdeps/unix/sysv/aix/sysdep.h (JUMPTARGET): Use C_TEXT.
	* sysdeps/unix/sysv/aix/bits/types.h: Define __clockid_t and __timer_t.
	* sysdeps/unix/sysv/aix/bits/utmp.h: Cleanup.  Add comments.
	* sysdeps/unix/sysv/linux/sys/param.h (MAXHOSTNAMELEN): Define.
	Patches by Michael Keezer <mkeezer@redhat.com>.

2000-12-04  H.J. Lu  <hjl@gnu.org>

	* configure.in: Change --with-oldest-abi=ABI to
	--enable-oldest-abi=ABI.

2000-12-02  Bruno Haible  <haible@clisp.cons.org>

	* stdio-common/perror.c (perror): If stderr is wide-oriented, use
	fwprintf instead of fprintf.

2000-12-04  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/alpha/fpu/bits/mathdef.h: Remove FLT_EVAL_METHOD and
	DECIMAL_DIG definitions.
	* sysdeps/arm/fpu/bits/mathdef.h: Likewise
	* sysdeps/generic/bits/mathdef.h: Likewise
	* sysdeps/i386/fpu/bits/mathdef.h: Likewise
	* sysdeps/ia64/fpu/bits/mathdef.h: Likewise
	* sysdeps/m68k/fpu/bits/mathdef.h: Likewise
	* sysdeps/powerpc/fpu/bits/mathdef.h: Likewise
	* sysdeps/sparc/fpu/bits/mathdef.h: Likewise
	* sysdeps/sh/sh4/fpu/bits/mathdef.h: Likewise

2000-12-03  Ulrich Drepper  <drepper@redhat.com>

	* math/test-fenv.c (main): Use return instead of exit to avoid warning.

	* math/atest-exp.c: Mark local functions as static to avoid warnings.
	* math/atest-exp2.c: Likewise.
	* math/atest-sincos.c: Likewise.

	* sysdeps/i386/fpu/bits/mathdef.h (DECIMAL_DIG): Correct value.
	Reported by Fred J. Tydeman <tydeman@tybor.com>.

	* sysdeps/i386/fpu/s_nextafterl.c (__nextafterl): Hopefully fix
	the handling of denormalized numbers.

	* math/test-misc.c (main): Test for fpclassify and pseudo denormal
	numbers on x86.
	* sysdeps/i386/fpu/fpclassifyl.c: New file.

	* sysdeps/i386/ldbl2mpn.c (__mpn_extract_long_double): Handle the
	pseudo denormal representation of LDBL_MIN.

	* iconvdata/SJIS.irreversible: Remove unnecessary entries.
	* iconvdata/EUC-JP.irreversible: Remove unnecessary entries.

	* iconvdata/sjis.c: Enable round-trip mapping of backslash and tilde.
	* iconvdata/jis0208.c: Likewise.
	* iconvdata/jis0212.c: Likewise.
	Patch by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

	* math/test-misc.c (main): More tests for frexp and some for
	fpclassify and isnormal.

	* sysdeps/ieee754/flt-32/s_fpclassifyf.c (__fpclassifyf): Correct
	test for subnormal.
	Reported by Fred J. Tydeman <tydeman@tybor.com>.

	* math/test-misc.c (main): Add tests for frexp.
	Reported by Fred J. Tydeman <tydeman@tybor.com>.
	* sysdeps/i386/fpu/s_frexpl.S: Don't overflow during the computation.

2000-12-02  H.J. Lu  <hjl@gnu.org>

	* locale/lc-time.c (_nl_init_era_entries): Pass L'\0' instead of
	'\0' to wcschr.

2000-12-02  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/i386/fpu/s_frexp.S: Add missing fwait.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.

	* sysdeps/generic/glob.c: Adjust types of several variables to
	avoid warnings.

2000-12-01  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/shm_open.c: Remove incorrect comment.

2000-11-30  Roland McGrath  <roland@frob.com>

	* hurd/hurd/ioctl.h (_HURD_HANDLE_IOCTLS_1): New macro.
	(_HURD_HANDLE_IOCTLS, _HURD_HANDLE_IOCTL): Redefine using it, so as to
	allow multiple instances using the same function name in one file.

2000-12-01  Ulrich Drepper  <drepper@redhat.com>

	* configure.in: Correct test for pserver CVS access.

2000-11-28  H.J. Lu  <hjl@gnu.org>

	* libio/libio.h: Remove extra "#if ... #endif".

2000-11-29  H.J. Lu  <hjl@gnu.org>

	* stdio-common/vfscanf.c (ORIENT): Swap the COMPILE_WSCANF case.

2000-12-01  H.J. Lu  <hjl@gnu.org>

	* nss/getXXbyYY_r.c: Fix verioned symbol handling.
	* nss/getXXent_r.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/chown.c: Likewise.

2000-11-30  H.J. Lu  <hjl@gnu.org>

	* scripts/abi-versions.awk (oldest_abi): New variable.
	Handle the oldest ABI supported.

	* Makerules ($(common-objpfx)abi-versions.h): Set oldest_abi
	for scripts/abi-versions.awk.

	* configure.in: Add --with-oldest-abi=ABI.
	* configure: Rebuild.

	* config.make.in (oldest-abi): New.

	* config.h.in (GLIBC_OLDEST_ABI): New.

	* csu/version.c (banner): Support GLIBC_OLDEST_ABI.

2000-11-30  Jakub Jelinek  <jakub@redhat.com>

	* locale/setlocale.c (setname): Free for all categories, not just
	LC_ALL.
	(setlocale): Store a copy of string passed by user, not the string
	itself.

2000-11-30  Roland McGrath  <roland@frob.com>

	* sysdeps/mach/hurd/defs.c (init_stdio): Put this on __libc_subinit
	rather than _hurd_fd_subinit, so it happens after it's safe to use
	libc facilities like malloc.

2000-11-28  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/getdents.c: Add _syscall_getdents64
	declaration, adjust declaration of __syscall_getdents to match
	kernel.

2000-11-29  H.J. Lu  <hjl@gnu.org>

	* sysdeps/generic/readelflib.c (check_ptr): Undefine it first.

2000-11-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/hppa/brk.c (__brk): Remove unused variable.

2000-11-28  Ulrich Drepper  <drepper@redhat.com>

	* dlfcn/defaultmod1.c: Add prototypes to avoid warnings.
	* dlfcn/defaultmod2.c: Likewise.
	* dlfcn/dlopen.c: Likewise.
	* dlfcn/dlopenold.c: Likewise.
	* dlfcn/failtestmod.c: Likewise.
	* dlfcn/glreflib1.c: Likewise.
	* dlfcn/glreflib2.c: Likewise.
	* dlfcn/eval.c: Likewise.  Add attributes.

	* ctype/ctype-extn.c: Define isblank and not __isblank.

	* time/strftime.c: Add const where necessary to avoid warnings.
	* time/strptime.c (strptime_internal): Add casts to avoid warnings.

2000-11-22  Paul Eggert	 <eggert@twinsun.com>

	* time/strftime.c (my_strftime): Do not invoke mbrlen with a
	size of (size_t) -1; it's not portable.

2000-11-28  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/i386/fpu/libm-test-ulps: Adjust some values for the
	crappy i486 FPU.
	Reported by Michael Deutschmann <michael@talamasca.ocis.net>.

2000-11-14  Jes Sorensen  <jes@linuxcare.com>

	* sysdeps/ia64/_mcount.S: Call __mcount instead of __mcount_internal.

	* sysdeps/ia64/Makefile: Compile _mcount.S in subdir gmon as
	_mcount is required by profiled binaries.

	* sysdeps/unix/sysv/linux/ia64/machine-gmon.h: Moved to...
	* sysdeps/ia64/machine-gmon.h: ...here.

2000-11-28  Masahide Washizawa	<washi@jp.ibm.com>

	* iconvdata/Makefile (modules): Add IBM922, IBM1124, and IBM1129.
	(distribute): Add ibm922.c, ibm1124.c, ibm1129.c, ibm922.h, ibm1124.h,
	and ibm1129.h.
	* iconvdata/gconv-modules: Add entries for IBM922, IBM1124, and
	IBM1129.
	* iconvdata/ibm922.c: New file.
	* iconvdata/ibm922.h: New file.
	* iconvdata/ibm1124.c: New file.
	* iconvdata/ibm1124.h: New file.
	* iconvdata/ibm1129.c: New file.
	* iconvdata/ibm1129.h: New file.
	* iconvdata/testdata/IBM922: New file.
	* iconvdata/testdata/IBM922..UTF8: New file.
	* iconvdata/testdata/IBM1124: New file.
	* iconvdata/testdata/IBM1124..UTF8: New file.
	* iconvdata/testdata/IBM1129: New file.
	* iconvdata/testdata/IBM1129..UTF8: New file.

2000-11-28  Ulrich Drepper  <drepper@redhat.com>

	* catgets/gencat.c (normalize_line): Take extra parameter with escape
	character.  Change callers.
	(open_conversion): Determine mapping of 0x5c as wchar_t value.
	* catgets/Makefile: Add rules to build and run test-gencat.
	* catgets/sample.SJIS: New file.
	* catgets/test-gencat.c: New file.
	* catgets/test-gencat.sh: New file.
	Report and test case by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

2000-11-28  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Synch with generic
	Linux version.

2000-11-28  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Fix last patch.

2000-11-28  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/socket.h (struct cmsghdr): Use
	__flexarr.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h (struct cmsghdr):
	Likewise.

2000-11-27  Ulrich Drepper  <drepper@redhat.com>

	* misc/getusershell.c: Make strings in okshells array const.
	* misc/regexp.c: Add const to cast to avoid warnings.
	* sysdeps/unix/sysv/linux/llseek.c: Add prototype for __llseek.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Add prototype for
	__setresuid.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Add prototype for
	setresgid.
	* misc/error.c: Add prototypes for __error and __error_at_line.
	* misc/mntent_r.c (__getmntent_r): Add break at end of switch
	statement to avoid warning.
	* test-skeleton.c: Mark timeout_handler with noreturn.
	* iconv/skeleton.c (get16u): Add const to cast.
	(get32u): Likewise.
	* iconvdata/gb18030.c: Likewise.
	* iconvdata/iso-2022-cn-ext.c: Likewise.
	* iconvdata/ansi_x3.110.c: Add cast to avoid warning.
	* iconvdata/big5.c: Likewise.
	* iconvdata/big5hkscs.c: Likewise.
	* iconvdata/iso_6937.c: Likewise.
	* iconvdata/iso_6937-2.c: Likewise.
	* iconvdata/t.61.c: Likewise.
	* iconvdata/iso646.c: Add prototypes for gconv_init and gconv_env.
	* iconvdata/unicode.c: Likewise.
	* iconvdata/utf-16.c: Likewise.
	* iconvdata/cns11643.h (ucs4_to_cns11643): Define needed as size_t.
	* iconv/gconv_trans.c (__gconv_translit_find): Avoid one warning
	with little code shuffling.

	* sysdeps/powerpc/Makefile (CFLAGS-initfini.s): Add -O1 to avoid
	the problems introduced when the user selects -O3.

	* iconv/gconv.h (__gconv_info): Define __data element using __flexarr.
	* misc/sys/cdefs.h: Define __flexarr.
	Proposed by Joseph S. Myers <jsm28@cam.ac.uk>.

	* iconvdata/iso-2022-jp.c: Add prototypes to avoid warnings.
	* iconv/skeleton.c: Likewise.
	* iconvdata/iso8859-1.c (BODY to 8859-1): Add const to cast.
	* iconv/loop.c (get16): Add const to cast.
	(get32): Likewise.

2000-11-27  Andreas Jaeger  <aj@suse.de>

	* login/programs/pt_chown.c (do_pt_chown): Mark function as static
	to avoid warning.
	* login/programs/utmpdump.c (print_entry): Likewise.

2000-11-25  Maciej W. Rozycki  <macro@ds2.pg.gda.pl>

	* sysdeps/mips/__longjmp.c (__longjmp): Restore SP and FP last and
	in a single asm as they may be used to access other stored
	registers.
	* sysdeps/mips/mips64/__longjmp.c (__longjmp): Likewise.

2000-11-27  Andreas Jaeger  <aj@suse.de>

	* rt/tst-aio.c: Mark test functions as static to avoid warnings.
	* rt/tst-aio64.c: Likewise.

2000-11-27  Ulrich Drepper  <drepper@redhat.com>

	* catgets/Makefile (test1.cat): Set LC_ALL, LOCPATH, and GCONV_PATH
	for gencat run.
	(libc.cat): Likewise.
	* catgets/gencat.c: Implement handling of message catalogs encoded
	with stateful character sets.
	Based on a patch by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

2000-11-26  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/opendir.c (__opendir): Add cast to avoid warning.

	* inet/getnameinfo.c: Adjust casts to avoid warnings.
	* inet/rcmd.c: Likewise.
	* inet/ruserpass.c: Likewise.
	* inet/netinet/in.h (IN6_IS_ADDR_UNSPECIFIED, IN6_IS_ADDR_LOOPBACK,
	IN6_IS_ADDR_MULTICAST, IN6_IS_ADDR_LINKLOCAL, IN6_IS_ADDR_SITELOCAL,
	IN6_IS_ADDR_V4MAPPED, IN6_IS_ADDR_V4COMPAT, IN6_ARE_ADDR_EQUAL,
	IN6_IS_ADDR_MC_NODELOCAL, IN6_IS_ADDR_MC_LINKLOCAL,
	IN6_IS_ADDR_MC_SITELOCAL, IN6_IS_ADDR_MC_ORGLOCAL,
	IN6_IS_ADDR_MC_GLOBAL): Preserve const in cast.
	* include/aliases.h: Add prototypes for internal __getalias* functions.
	* include/netdb.h: Add prototypes for __old_gethostent_r,
	__old_gethostbyaddr_r, __old_gethostbyname_r, __old_gethostbyname2_r,
	__old_getnetent_r, __old_getnetbyaddr_r, __old_getnetbyname_r,
	__old_getservent_r, __old_getservbyname_r, __old_getservbyport_r,
	__old_getprotoent_r, __old_getprotobyname_r, __old_getprotobynumber_r.
	* include/rpc/netdb.h: Add prototypes for __old_getrpcbyname_r,
	__old_getrpcbynumber_r, __old_getrpcent_r.

	* include/rpc/netdb.h: Add __getrpcbyname_r, __getrpcbynumber_r,
	__getrpcent_r prototypes.

2000-11-25  Ulrich Drepper  <drepper@redhat.com>

	* string/strcoll.c: Add casts to avoid warnings.
	* string/strnlen.c: Likewise.
	* string/strxfrm.c: Likewise.
	* sysdeps/generic/_strerror.c: Likewise.
	* sysdeps/generic/memrchr.c: Likewise.
	* sysdeps/generic/strcasestr.c: Likewise.
	* sysdeps/generic/strstr.c: Likewise.

	* locale/weight.h (findidx): Add const to cast to avoid warning.

	* elf/loadfail.c: Little cosmetic changes to avoid warnings.
	* elf/loadtest.c: Likewise.
	* elf/multiload.c: Likewise.
	* elf/next.c: Likewise.
	* elf/nodelete.c: Likewise.
	* elf/noload.c: Likewise.
	* elf/order.c: Likewise.
	* elf/origtest.c: Likewise.
	* elf/preloadtest.c: Likewise.
	* elf/restest1.c: Likewise.

	* sysdeps/i386/i486/bits/string.h (__strncat_g) [i686]: Fourth
	parameter of asm must be in %ecx.

	* string/tester.c: Mark test functions as static to avoid warnings.

	* iconv/gconv_conf.c (read_conf_file): Make mod_counter static to
	preserve value over different gconv-modules files.

2000-11-24  Ulrich Drepper  <drepper@redhat.com>

	* locale/findlocale.c: Add casts to avoid warnings.
	* locale/localeinfo.h (LIMAGIC): Add cast to avoid warnings.
	* misc/efgcvt_r.c (fcvt_r): Use ssize_t instead of int and add cast
	to avoid warnings.
	* misc/tsearch.c (const_node): New type.
	(trecurse): Correct casts to avoid warnings.
	(__twalk): Likewise.
	* stdlib/tst-limits.c: Add z modifier to formats for WORD_BIT and
	LONG_BIT.

	* debug/backtrace-tst.c (compare): Add casts to avoid warnings.

	* test-skeleton.c: Mark local functions as static to avoid warnings.

2000-11-23  H.J. Lu  <hjl@gnu.org>

	* rt/tst-aio6.c (do_test): Use pipe instead of STDIN_FILENO to
	support the background job.
	Fix a typo.

2000-11-24  Ulrich Drepper  <drepper@redhat.com>

	* iconv/gconv_conf.c (insert_module): Replace old entry if new one
	has same names but lower cost.

2000-11-23  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/sparc/sparc32/dl-machine.h: Ifdef out handling for relocs
	which never occur during bootstrap.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.

2000-11-23  Andreas Jaeger  <aj@suse.de>

	* nss/nss_files/files-hosts.c: Remove getipnodebyname.

	* nss/Versions: Remove _nss_files_getipnodebyname_r.

	* sysdeps/unix/sysv/linux/Versions: Fix typo in last patch.

2000-11-18  Martin Buchholz  <martin@xemacs.org>

	* csu/gmon-start.c (__gmon_start__): Avoid over-clever trick `if
	(called++) return;'

2000-11-21  Alan Modra	<alan@linuxcare.com.au>

	* sysdeps/generic/bsd-_setjmp.c (setjmp): Rename to _setjmp.

	* csu/abi-note.S: Correct comment for operating system number.

2000-11-22  Ulrich Drepper  <drepper@redhat.com>

	* Versions.def: Add GLIBC_2.2.1 for glibc.

2000-11-22  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Add pivot_root.
	* sysdeps/unix/sysv/linux/Versions: Add pivot_root at GLIBC_2.2.1.

2000-11-22  Ulrich Drepper  <drepper@redhat.com>

	* rt/aio_suspend.c (aio_suspend): Convert timeout value to
	absolute time for pthread_cond_timedwait call.
	Reported by Lawrence Chen <lchen@opentext.com> [libc/1930].

	* rt/Makefile (tests): Add tst-aio6.
	* rt/tst-aio6.c: New file.

2000-11-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/bits/string.h (strncat): Fix one more typo.

2000-11-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/bits/string.h (strncat): Add missing quotation marks.

2000-11-21  Martin Schwidefsky	<schwidefsky@de.ibm.com>

	* sysdeps/s390/bits/string.h: Make strncat always add a \0.

2000-11-21  Andreas Schwab  <schwab@suse.de>

	* sysdeps/alpha/setjmp.S: Remove __setjmp entry point.
	* sysdeps/arm/setjmp.S: Likewise.
	* sysdeps/arm/fpu/setjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/i386/elf/setjmp.S: Likewise.
	* sysdeps/s390/setjmp.S: Likewise.
	* sysdeps/s390/elf/setjmp.S: Likewise.
	* sysdeps/sh/sh3/setjmp.S: Likewise.
	* sysdeps/sh/sh4/setjmp.S: Likewise.
	* sysdeps/sparc/sparc32/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setjmp.c: Removed.

2000-11-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/__longjmp.c (__longjmp): Remove obsolete
	NORETURN, fix parameter list.

	* string/bug-strncat1.c (main): Fix typo.
	Patch by Bernhard Kaindl <bernhard.kaindl@suse.de>.

2000-11-20  Ulrich Drepper  <drepper@redhat.com>

	* configure.in: Add --enable-all-warnings.
	* config.make.in (all-warnings): New variable.
	* Makeconfig (+gccwarn): Define with many more warnings if
	all-warnings is yes.

2000-11-20  Jakub Jelinek  <jakub@redhat.com>

	* iconvdata/bug-iconv2.c (main): Use %zd in format string.
	* io/test-lfs.c (do_test): Cast statbuf.st_size to long long.
	* malloc/tst-valloc.c (main): Cast valloc return value to long.
	* malloc/tst-obstack.c (verbose_malloc): Use %zd in format string.
	* math/test-fpucw.c (main): Use %lx in format string, cast
	control words to long.
	* stdio-common/tst-fmemopen.c (main): Use %td in format strings.
	* stdlib/tst-strtol.c (tests): Avoid (bogus?) decimal constant is so
	large that it is unsigned warning.

	* sysdeps/unix/sysv/linux/sparc/bits/types.h (__ssize_t): Changing
	it to long on sparc64.

2000-11-20  Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.h (termination_handler): Add noreturn attribute.
	(receiv_print_stats): Likewise.

	* elf/ldconfig.c (path_hwcap): Cast -1 for proper comparison.

2000-11-20  Ulrich Drepper  <drepper@redhat.com>

	* malloc/thread-m.h: gcc doesn't tolerate zero-sized types anymore.

	* csu/gmon-start.c: Always have prototype for __gmon_start.
	* csu/version.c: Add prototypes for __libc_print_version and
	__libc_main.
	* iconv/gconv.c: Include gconv_int.h and gconv.h.
	* iconv/gconv.h (struct __gconv_step): Remove const from __from_name
	and __to_name.
	* iconv/gconv_builtin.h: Add ASCII module definitions.
	* iconv/gconv_conf.c (__gconv_path_elem): Remove const.
	(add_module): Add cast to avoid warning.  Rework construction of
	strings for new module.
	* iconv/gconv_db.c (__gconv_alias_compare): Make s1 and s2 const.
	(derivation_compare): Likewise.
	* iconv/gconv_dl.c (do_release_shlib): Remove const from nodep.
	(__gconv_release_shlib): Cast do_release_shlib as parameter for twalk.
	* iconv/gconv_int.h (__gconv_path_elem): Remove const.
	(struct gconv_alias): Remove const from fromname and toname.
	* iconv/gconv_simple.c: Include gconv_builtin.h to get prototypes
	for loop functions.
	(internal_ucs4_loop): Use correct const-ness.
	(ucs4_internal_loop): Likewise.
	(internal_ucs4le_loop): Likewise.
	(ucs4le_internal_loop_single): Likewise.
	* iconv/gconv_trans.c (__gconv_transliterate): Make from_idx, from_tbl,
	to_idx, to_tbl, winbuf, winbufend const.  Change casts in
	assignments appropriately.
	(struct known_trans): Remove const from fname.
	(trans_compare): Make s1 and s2 const.
	* iconv/loop.c (LOOPFC): Make outend parameter const.  Add cast to
	avoid warning.
	* iconv/skeleton.c: Remove cast in calls of loop functions.
	* iconvdata/gconv-modules: Remove US-ASCII definitions.
	* iconvdata/iso646.c: Remove US_ASCII support.
	* include/set-hooks.h (DEFINE_HOOK): Also generate prototype.
	* include/unistd.h: Add __libc_check_standard_fds prototype.
	* string/bits/string2.h (__mempcpy_args): Add const to casts.
	* sysdeps/generic/initfini.c: Add prototypes for dummy, _init, and
	_fini.
	* sysdeps/generic/libc-start.c: Add prototype for __libc_start_main.
	* sysdeps/i386/i486/bits/string.h (strcmp): Add const to casts.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (dl_fatal): Add cast to avoid
	warning.
	* sysdeps/unix/sysv/linux/init-first.c: Add prototypes for
	__libc_init_first and _dl_start.
	* intl/dcigettext.c (transcmp): Make s1 and s2 const.
	(DCIGETTEXT): Make domaindata variable const.
	* intl/loadmsgcat.c (_nl_load_domain): Rearrange domain initialization
	to avoid warning.

2000-11-20  Hiroyuki Machida  <machida@sm.sony.co.jp>

	* sysdeps/unix/sysv/linux/mips/clone.S: Fix comments.

	* sysdeps/unix/sysv/linux/mips/kernel_stat.h (kernel_stat): Expand
	time_t to 'long int' not, 'unsigned int'.  Use 'long int' for
	__unused? members.

	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h (O_NOFOLLOW): Use same
	value defined in /usr/include/asm-mips/fcntl.h.

2000-11-18  Ulrich Drepper  <drepper@redhat.com>

	* stdio-common/Makefile (tests): Add test-vfprintf.
	(test-vfprintf-ENV): New variable.
	* stdio-common/test-vfprintf.c: New file.

	* wcsmbs/mbrtowc.c (__mbrtowc): Do not only flush if input is '\0'.

	* wcsmbs/Makefile (tests): Add tst-mbrtowc and tst-wcrtomb.
	(tst-mbrtowc-ENV): New variable.
	(tst-wcrtomb-ENV): New variable.
	* wcsmbs/tst-mbrtowc.c: New file.
	* wcsmbs/tst-wcrtomb.c: New file.

2000-11-16  Andreas Jaeger  <aj@suse.de>

	* manual/install.texi (Tools for Compilation): Update
	documentation for GCC 2.95.2.

2000-11-18  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only return -EAI_AGAIN
	if IPv4 and IPv6 requests timed out.

2000-11-18  Akim Demaille  <akim@epita.fr>

	* malloc/obstack.h: Formatting changes.
	(obstack_grow, obstack_grow0): Don't cast WHERE at all: it
	prevents type checking.
	(obstack_ptr_grow, obstack_ptr_grow_fast): When assigning, don't
	cast the value to (void *): assigning a `foo *' to a `void *'
	variable is valid.
	(obstack_int_grow, obstack_int_grow_fast): Don't cast AINT to int.

2000-11-17  Ulrich Drepper  <drepper@redhat.com>

	* scripts/config.guess: Update from upstream maintainer.
	* scripts/config.sub: Likewise.

2000-11-16  Ulrich Drepper  <drepper@redhat.com>

	* libio/freopen.c (freopen): Reset _mode after succesful reopening.
	* libio/freopen64.c (freopen64): Likewise.
	Patch by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

	* libio/Makefile: Add rules to build and run test-freopen.
	* libio/test-freopen.c: New file.
	* libio/test-freopen.sh: New file.

2000-11-15  H.J. Lu  <hjl@gnu.org>

	* sysdeps/generic/ldsodefs.h (DL_DT_INIT_ADDRESS): Defined if
	ELF_FUNCTION_PTR_IS_SPECIAL is not defined.
	(DL_DT_FINI_ADDRESS): Likewise.

	* sysdeps/ia64/dl-lookupcfg.h (_dl_lookup_address): Set the
	return type to ElfW(Addr).
	(_dl_function_address): New prototype.
	(DL_FUNCTION_ADDRESS): Defined.
	(DL_DT_INIT_ADDRESS): Defined as DL_FUNCTION_ADDRESS.
	(DL_DT_FINI_ADDRESS): Likewise.

	* sysdeps/ia64/Versions (GLIBC_2.2): Add _dl_function_address.

	* sysdeps/ia64/dl-machine.h (_dl_start_address): Removed.
	(ELF_MACHINE_START_ADDRESS): Changed to DL_FUNCTION_ADDRESS.

	* sysdeps/ia64/dl-symaddr.c (_dl_start_address): Renamed to ...
	(_dl_function_address): This.

	* elf/dl-fini.c (_dl_fini): Use DL_DT_FINI_ADDRESS to get the
	function pointer for DT_FINI.
	* elf/dl-close.c (_dl_close): Likewise.

	* elf/dl-init.c (_dl_init): Use DL_DT_INIT_ADDRESS to get the
	function pointer for DT_INIT.

2000-11-16  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/generic/printf_fphex.c (__printf_fphex): Compute correctly
	end of wexpbuf buffer.

2000-11-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Remove duplicate
	definition of F_GETLK, F_SETLK, F_SETLKW.

2000-11-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/dl-cache.c (_DL_PLATFORMS_COUNT): Define to 0 if
	it's not defined.

2000-11-15  Jakub Jelinek  <jakub@redhat.com>

	* dlfcn/default.c (main): Add test for dladdr of main returning
	argv[0] in dli_fname field.

2000-11-15  Jakub Jelinek  <jakub@redhat.com>

	* Makeconfig (run-program-prefix): Move test-static test into the
	variable.

	* sysdeps/alpha/dl-machine.h (RTLD_START): Update _dl_argv.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise,
	schedule instructions.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise,
	schedule instructions, fix a bug in copying auxiliary data.

2000-11-15  Ulrich Drepper  <drepper@redhat.com>

	* manual/startup.texi (Program Arguments): Fix type of main's envp
	parameter.
	Reported by Ral Nez de Arenas Coronado <dervishd@linuxfreak.com>.

	* iconvdata/gconv-modules: Add CP950 alias.

2000-11-13  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile: Allow ports to override
	syscall-list.h goal.
	* sysdeps/unix/sysv/linux/sparc/Makefile: New file.

2000-11-15  Ulrich Drepper  <drepper@redhat.com>

	* intl/Makefile: tst-gettext2.sh does not need a third parameter.

	* intl/tst-gettext2.sh: Copy locale data.  Adjust LOCPATH.  Verify
	output of program.

	* intl/tst-gettext2.c: Set C locale if setting other locale
	failed.	 Use gettext() not _().

	* locale/setlocale.c: Increment _nl_msg_cat_cntr whenever we
	successfully loaded a new locale.

2000-11-13  Andreas Jaeger  <aj@suse.de>

	* configure.in: Require gcc 2.95 or newer.

2000-11-15  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/paths.h: Adjust for FHS.
	Patch by Arkadiusz Miskiewicz <misiek@pld.ORG.PL>.

2000-11-11  Jim Meyering  <meyering@lucent.com>

	* string/strndup.c (strndup): Cast return value to `char *'.

2000-11-15  Jim Meyering  <meyering@ascend.com>

	* sysdeps/generic/memchr.c: Remove some useless parentheses.
	[HAVE_STDLIB_H || defined _LIBC]: Include <stdlib.h>.
	[HAVE_BP_SYM_H || defined _LIBC]: Guard inclusion of bp-sym.h.
	[! (HAVE_BP_SYM_H || defined _LIBC)] (BP_SYM): Define as no-op.
	Also #undef __memchr.
	Use `weak_alias' only if it's defined.

2000-11-10  H.J. Lu  <hjl@gnu.org>

	* Makefile.in (install): Set LANGUAGE=C LC_ALL=C.

2000-11-15  Andreas Jaeger  <aj@suse.de>

	* elf/chroot_canon.c: Include <stdint.h>.

	* elf/cache.c (struct cache_entry): Use uint64_t for hwcap.
	(print_entry): Likewise.
	(add_to_cache): Likewise.

	* elf/ldconfig.h (add_to_cache): Change prototype for hwcap change.

	* elf/ldconfig.c (struct lib_entry): Use uint64_t for hwcap.
	(path_hwcap): Likewise.
	(search_dir): Likewise.

	* sysdeps/generic/dl-cache.c (HWCAP_CHECK): Handle platform.

	* elf/cache.c (add_to_cache): Handle 64 bit hwcap entry.

	* sysdeps/unix/sysv/linux/sparc/sparc32/dl-procinfo.h
	(_dl_platform_string): New.
	(_DL_HWCAP_PLATFORM): New.
	(_dl_string_platform): New.
	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-procinfo.h: Likewise.

	* sysdeps/generic/dl-procinfo.h (_DL_HWCAP_COUNT): New.
	(_dl_string_platform): New.
	(_DL_HWCAP_PLATFORM): New.
	(_dl_platform_string): New.

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Added x86 platform
	recognition.
	(_DL_HWCAP_COUNT): New.
	(_dl_string_platform): New.
	(_DL_HWCAP_PLATFORM): New.
	(_dl_platform_string): New.

2000-11-14  Ulrich Drepper  <drepper@redhat.com>

	* iconvdata/gconv-modules: Add CP936 as alias for GBK.

2000-11-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/dl-cache.c (HWCAP_CHECK): Fix access to _dl_hwcap.

2000-11-13  Roland McGrath  <roland@frob.com>

	* hurd/get-host.c (_hurd_get_host_config): Fix last change.

2000-11-13  Marcus Brinkmann <marcus@gnu.org>

	* hurd/get-host.c (_hurd_get_host_config): Fix possible buffer
	underrun and make sure the result is null terminated even if there
	is no trailing newline.

2000-11-13  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2000-11-10  H.J. Lu  <hjl@gnu.org>

	* sysdeps/ia64/fpu/libm-test-ulps: Updated.

2000-11-10  Andreas Jaeger  <aj@suse.de>

	* elf/ldconfig.c (create_links): Fix alloca calculation.
	Patch by Ben Collins <bcollins@debian.org>.

2000-11-09  Ulrich Drepper  <drepper@redhat.com>

	* inet/getnameinfo.c (getnameinfo): Use correct destination
	parameter for if_indextoname.
	Patch by Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>.

2000-11-09  H.J. Lu  <hjl@gnu.org>

	* sunrpc/Versions (GLIBC_2.1): Remove xdr_cryptkeyarg,
	xdr_cryptkeyarg2, xdr_cryptkeyres, xdr_des_block,
	xdr_key_netstarg, xdr_key_netstres, xdr_keybuf and
	xdr_keystatus.

	* time/Versions (GLIBC_2.1): Move getitimer to...
	* sysdeps/unix/sysv/linux/alpha/Versions (GLIBC_2.1): ...here.

2000-11-03  Bruno Haible  <haible@clisp.cons.org>

	* manual/install.texi: Recommend to set LANGUAGE=C LC_ALL=C during
	"make install", to work around a binary incompatibility between
	glibc 2.1 and glibc 2.2 gconv modules.

2000-11-09  Ulrich Drepper  <drepper@redhat.com>

	* intl/locale.alias: Add thai.
	Patch by Chanop Silpa-Anan <chanop@syseng.anu.edu.au>.

2000-11-07  Akim Demaille  <akim@epita.fr>

	* malloc/obstack.c (obstack_grow, obstack_grow0): Rename the second
	argument `data' for consistency with the prototypes.
	Qualify it `const'.
	(obstack_copy, obstack_copy0): Rename the second argument as
	`address' for consistency.  Qualify it `const'.
	* malloc/obstack.h (obstack_copy, obstack_copy0, obstack_grow)
	(obstack_grow0, obstack_ptr_grow, obstack_ptr_grow_fast): Qualify
	`const' their input argument (`data' or `address').
	Adjust the corresponding macros to include `const' in casts.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Clean-up: define family to hold
	target family.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Loosen protocol check to ease raw
	socket creation.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Ensure to fill ai_socktype and
	ai_protocol by internal table if service was not given.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Don't raise an error even if
	numerical port was specified with protocol without socktype.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Ensure to check if protocol is ok.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* inet/getnameinfo.c: getnameinfo() NI_xxx flag validation.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* sysdeps/posix/getaddrinfo.c: Ensure not to fill garbage value in
	sin6_scope_id field.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* inet/getnameinfo.c: Repair getnameinfo() sin6_socpe_id support.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* inet/getnameinfo.c: Repair NI_NOFQDN flag support.

2000-11-06  Hideaki YOSHIFUJI  <yoshfuji@linux-ipv6.org>

	* inet/getnameinfo.c: Wake-up sin6_scope_id support in
	getnameinfo(): check for whether sin6_socpe_id exist was wrong.

2000-11-09  Martin Schwidefsky	<mschwide@nc.boeblingen.de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/mmap.S: Use mmap2 if it is present.
	* sysdeps/unix/sysv/linux/s390/mmap64.S: New file.

2000-11-09  H.J. Lu  <hjl@gnu.org>

	* io/Versions (GLIBC_2.1.1): Remove lockf64.


See ChangeLog.11 for earlier changes.
